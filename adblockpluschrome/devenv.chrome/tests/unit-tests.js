/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ 9979:
/***/ ((module) => {

"use strict";
module.exports = JSON.parse("{\"0.bg\":1,\"001www.com\":1,\"0e.vc\":1,\"0emm.com\":2,\"1.bg\":1,\"12hp.at\":1,\"12hp.ch\":1,\"12hp.de\":1,\"1337.pictures\":1,\"16-b.it\":1,\"1kapp.com\":1,\"2.bg\":1,\"2000.hu\":1,\"2038.io\":1,\"2ix.at\":1,\"2ix.ch\":1,\"2ix.de\":1,\"3.bg\":1,\"32-b.it\":1,\"3utilities.com\":1,\"4.bg\":1,\"4lima.at\":1,\"4lima.ch\":1,\"4lima.de\":1,\"4u.com\":1,\"5.bg\":1,\"6.bg\":1,\"611.to\":1,\"64-b.it\":1,\"7.bg\":1,\"8.bg\":1,\"9.bg\":1,\"9guacu.br\":1,\"a.bg\":1,\"a.prod.fastly.net\":1,\"a.run.app\":1,\"a.se\":1,\"a.ssl.fastly.net\":1,\"aa.no\":1,\"aaa.pro\":1,\"aarborte.no\":1,\"ab.ca\":1,\"abashiri.hokkaido.jp\":1,\"abc.br\":1,\"abeno.osaka.jp\":1,\"abiko.chiba.jp\":1,\"abira.hokkaido.jp\":1,\"abkhazia.su\":1,\"abo.pa\":1,\"abr.it\":1,\"abruzzo.it\":1,\"abu.yamaguchi.jp\":1,\"ac.ae\":1,\"ac.at\":1,\"ac.be\":1,\"ac.ci\":1,\"ac.cn\":1,\"ac.cr\":1,\"ac.cy\":1,\"ac.fj\":1,\"ac.gn\":1,\"ac.gov.br\":1,\"ac.id\":1,\"ac.il\":1,\"ac.im\":1,\"ac.in\":1,\"ac.ir\":1,\"ac.jp\":1,\"ac.ke\":1,\"ac.kr\":1,\"ac.leg.br\":1,\"ac.lk\":1,\"ac.ls\":1,\"ac.ma\":1,\"ac.me\":1,\"ac.mu\":1,\"ac.mw\":1,\"ac.mz\":1,\"ac.ni\":1,\"ac.nz\":1,\"ac.pa\":1,\"ac.pr\":1,\"ac.rs\":1,\"ac.ru\":1,\"ac.rw\":1,\"ac.se\":1,\"ac.sz\":1,\"ac.th\":1,\"ac.tj\":1,\"ac.tz\":1,\"ac.ug\":1,\"ac.uk\":1,\"ac.vn\":1,\"ac.za\":1,\"ac.zm\":1,\"ac.zw\":1,\"aca.pro\":1,\"academia.bo\":1,\"academy.museum\":1,\"accesscam.org\":1,\"accident-investigation.aero\":1,\"accident-prevention.aero\":1,\"acct.pro\":1,\"achi.nagano.jp\":1,\"act.au\":1,\"act.edu.au\":1,\"ad.jp\":1,\"adachi.tokyo.jp\":1,\"adm.br\":1,\"adobeaemcloud.com\":1,\"adobeaemcloud.net\":1,\"adult.ht\":1,\"adv.br\":1,\"adv.mz\":1,\"advisor.ws\":2,\"adygeya.ru\":1,\"adygeya.su\":1,\"ae.org\":1,\"aejrie.no\":1,\"aero.mv\":1,\"aero.tt\":1,\"aerobatic.aero\":1,\"aeroclub.aero\":1,\"aerodrome.aero\":1,\"aeroport.fr\":1,\"afjord.no\":1,\"africa.com\":1,\"ag.it\":1,\"aga.niigata.jp\":1,\"agano.niigata.jp\":1,\"agdenes.no\":1,\"agematsu.nagano.jp\":1,\"agents.aero\":1,\"agr.br\":1,\"agrar.hu\":1,\"agric.za\":1,\"agriculture.museum\":1,\"agrigento.it\":1,\"agrinet.tn\":1,\"agro.bo\":1,\"agro.pl\":1,\"aguni.okinawa.jp\":1,\"ah.cn\":1,\"ah.no\":1,\"aibetsu.hokkaido.jp\":1,\"aichi.jp\":1,\"aid.pl\":1,\"aikawa.kanagawa.jp\":1,\"ainan.ehime.jp\":1,\"aioi.hyogo.jp\":1,\"aip.ee\":1,\"air-surveillance.aero\":1,\"air-traffic-control.aero\":1,\"air.museum\":1,\"aircraft.aero\":1,\"airguard.museum\":1,\"airline.aero\":1,\"airport.aero\":1,\"airtraffic.aero\":1,\"aisai.aichi.jp\":1,\"aisho.shiga.jp\":1,\"aizubange.fukushima.jp\":1,\"aizumi.tokushima.jp\":1,\"aizumisato.fukushima.jp\":1,\"aizuwakamatsu.fukushima.jp\":1,\"aju.br\":1,\"ak.us\":1,\"akabira.hokkaido.jp\":1,\"akagi.shimane.jp\":1,\"akaiwa.okayama.jp\":1,\"akashi.hyogo.jp\":1,\"aki.kochi.jp\":1,\"akiruno.tokyo.jp\":1,\"akishima.tokyo.jp\":1,\"akita.akita.jp\":1,\"akita.jp\":1,\"akkeshi.hokkaido.jp\":1,\"aknoluokta.no\":1,\"ako.hyogo.jp\":1,\"akrehamn.no\":1,\"aktyubinsk.su\":1,\"akune.kagoshima.jp\":1,\"al.eu.org\":1,\"al.gov.br\":1,\"al.it\":1,\"al.leg.br\":1,\"al.no\":1,\"al.us\":1,\"alabama.museum\":1,\"alaheadju.no\":1,\"aland.fi\":1,\"alaska.museum\":1,\"alces.network\":2,\"alessandria.it\":1,\"alesund.no\":1,\"algard.no\":1,\"algorithmia.com\":2,\"alpha-myqnapcloud.com\":1,\"alpha.bounty-full.com\":1,\"alstahaug.no\":1,\"alt.za\":1,\"alta.no\":1,\"altervista.org\":1,\"alto-adige.it\":1,\"altoadige.it\":1,\"alvdal.no\":1,\"alwaysdata.net\":1,\"am.br\":1,\"am.gov.br\":1,\"am.leg.br\":1,\"ama.aichi.jp\":1,\"ama.shimane.jp\":1,\"amagasaki.hyogo.jp\":1,\"amakusa.kumamoto.jp\":1,\"amami.kagoshima.jp\":1,\"amber.museum\":1,\"ambulance.aero\":1,\"ambulance.museum\":1,\"american.museum\":1,\"americana.museum\":1,\"americanantiques.museum\":1,\"americanart.museum\":1,\"ami.ibaraki.jp\":1,\"amli.no\":1,\"amot.no\":1,\"amsterdam.museum\":1,\"amsw.nl\":1,\"amusement.aero\":1,\"an.it\":1,\"anamizu.ishikawa.jp\":1,\"anan.nagano.jp\":1,\"anan.tokushima.jp\":1,\"anani.br\":1,\"ancona.it\":1,\"and.mom\":1,\"and.museum\":1,\"andasuolo.no\":1,\"andebu.no\":1,\"ando.nara.jp\":1,\"andoy.no\":1,\"andria-barletta-trani.it\":1,\"andria-trani-barletta.it\":1,\"andriabarlettatrani.it\":1,\"andriatranibarletta.it\":1,\"anjo.aichi.jp\":1,\"ann-arbor.mi.us\":1,\"annaka.gunma.jp\":1,\"annefrank.museum\":1,\"anpachi.gifu.jp\":1,\"anthro.museum\":1,\"anthropology.museum\":1,\"antiques.museum\":1,\"ao.it\":1,\"aogaki.hyogo.jp\":1,\"aogashima.tokyo.jp\":1,\"aoki.nagano.jp\":1,\"aomori.aomori.jp\":1,\"aomori.jp\":1,\"aosta-valley.it\":1,\"aosta.it\":1,\"aostavalley.it\":1,\"aoste.it\":1,\"ap-northeast-1.elasticbeanstalk.com\":1,\"ap-northeast-2.elasticbeanstalk.com\":1,\"ap-northeast-3.elasticbeanstalk.com\":1,\"ap-south-1.elasticbeanstalk.com\":1,\"ap-southeast-1.elasticbeanstalk.com\":1,\"ap-southeast-2.elasticbeanstalk.com\":1,\"ap.gov.br\":1,\"ap.gov.pl\":1,\"ap.it\":1,\"ap.leg.br\":1,\"aparecida.br\":1,\"api.stdlib.com\":1,\"apigee.io\":1,\"app.banzaicloud.io\":1,\"app.br\":1,\"app.gp\":1,\"app.lmpm.com\":1,\"app.os.fedoraproject.org\":1,\"app.os.stg.fedoraproject.org\":1,\"app.render.com\":1,\"appchizi.com\":1,\"appengine.flow.ch\":1,\"applicationcloud.io\":1,\"applinzi.com\":1,\"apps.fbsbx.com\":1,\"apps.lair.io\":1,\"appspot.com\":1,\"aprendemas.cl\":1,\"aq.it\":1,\"aquarium.museum\":1,\"aquila.it\":1,\"ar.com\":1,\"ar.it\":1,\"ar.us\":1,\"arai.shizuoka.jp\":1,\"arakawa.saitama.jp\":1,\"arakawa.tokyo.jp\":1,\"arao.kumamoto.jp\":1,\"arboretum.museum\":1,\"archaeological.museum\":1,\"archaeology.museum\":1,\"architecture.museum\":1,\"ardal.no\":1,\"aremark.no\":1,\"arendal.no\":1,\"arezzo.it\":1,\"ariake.saga.jp\":1,\"arida.wakayama.jp\":1,\"aridagawa.wakayama.jp\":1,\"arita.saga.jp\":1,\"arkhangelsk.su\":1,\"armenia.su\":1,\"arna.no\":1,\"arq.br\":1,\"art.br\":1,\"art.do\":1,\"art.dz\":1,\"art.ht\":1,\"art.museum\":1,\"art.pl\":1,\"art.sn\":1,\"artanddesign.museum\":1,\"artcenter.museum\":1,\"artdeco.museum\":1,\"arte.bo\":1,\"arteducation.museum\":1,\"artgallery.museum\":1,\"arts.co\":1,\"arts.museum\":1,\"arts.nf\":1,\"arts.ro\":1,\"arts.ve\":1,\"artsandcrafts.museum\":1,\"arvo.network\":1,\"as.us\":1,\"asago.hyogo.jp\":1,\"asahi.chiba.jp\":1,\"asahi.ibaraki.jp\":1,\"asahi.mie.jp\":1,\"asahi.nagano.jp\":1,\"asahi.toyama.jp\":1,\"asahi.yamagata.jp\":1,\"asahikawa.hokkaido.jp\":1,\"asaka.saitama.jp\":1,\"asakawa.fukushima.jp\":1,\"asakuchi.okayama.jp\":1,\"asaminami.hiroshima.jp\":1,\"ascoli-piceno.it\":1,\"ascolipiceno.it\":1,\"aseral.no\":1,\"ashgabad.su\":1,\"ashibetsu.hokkaido.jp\":1,\"ashikaga.tochigi.jp\":1,\"ashiya.fukuoka.jp\":1,\"ashiya.hyogo.jp\":1,\"ashoro.hokkaido.jp\":1,\"asker.no\":1,\"askim.no\":1,\"askoy.no\":1,\"askvoll.no\":1,\"asmatart.museum\":1,\"asn.au\":1,\"asn.lv\":1,\"asnes.no\":1,\"aso.kumamoto.jp\":1,\"ass.km\":1,\"assabu.hokkaido.jp\":1,\"assassination.museum\":1,\"assisi.museum\":1,\"assn.lk\":1,\"asso.bj\":1,\"asso.ci\":1,\"asso.dz\":1,\"asso.eu.org\":1,\"asso.fr\":1,\"asso.gp\":1,\"asso.ht\":1,\"asso.km\":1,\"asso.mc\":1,\"asso.nc\":1,\"asso.re\":1,\"association.aero\":1,\"association.museum\":1,\"asti.it\":1,\"astronomy.museum\":1,\"asuke.aichi.jp\":1,\"at-band-camp.net\":1,\"at.eu.org\":1,\"at.it\":1,\"at.md\":1,\"at.vg\":1,\"atami.shizuoka.jp\":1,\"ath.cx\":1,\"atlanta.museum\":1,\"atm.pl\":1,\"ato.br\":1,\"atsugi.kanagawa.jp\":1,\"atsuma.hokkaido.jp\":1,\"au.eu.org\":1,\"audnedaln.no\":1,\"augustow.pl\":1,\"aukra.no\":1,\"aure.no\":1,\"aurland.no\":1,\"aurskog-holand.no\":1,\"aus.basketball\":1,\"austevoll.no\":1,\"austin.museum\":1,\"australia.museum\":1,\"austrheim.no\":1,\"author.aero\":1,\"auto.pl\":1,\"automotive.museum\":1,\"av.it\":1,\"av.tr\":1,\"avellino.it\":1,\"averoy.no\":1,\"aviation.museum\":1,\"avocat.fr\":1,\"avocat.pro\":1,\"avoues.fr\":1,\"awaji.hyogo.jp\":1,\"awdev.ca\":2,\"awsmppl.com\":1,\"axis.museum\":1,\"aya.miyazaki.jp\":1,\"ayabe.kyoto.jp\":1,\"ayagawa.kagawa.jp\":1,\"ayase.kanagawa.jp\":1,\"az.us\":1,\"azerbaijan.su\":1,\"azimuth.network\":1,\"azumino.nagano.jp\":1,\"azure-mobile.net\":1,\"azurecontainer.io\":2,\"azurewebsites.net\":1,\"b-data.io\":1,\"b.bg\":1,\"b.br\":1,\"b.se\":1,\"b.ssl.fastly.net\":1,\"ba.gov.br\":1,\"ba.it\":1,\"ba.leg.br\":1,\"babia-gora.pl\":1,\"backplaneapp.io\":1,\"backyards.banzaicloud.io\":2,\"badaddja.no\":1,\"badajoz.museum\":1,\"baghdad.museum\":1,\"bahcavuotna.no\":1,\"bahccavuotna.no\":1,\"bahn.museum\":1,\"baidar.no\":1,\"bajddar.no\":1,\"balashov.su\":1,\"balat.no\":1,\"bale.museum\":1,\"balena-devices.com\":1,\"balestrand.no\":1,\"ballangen.no\":1,\"ballooning.aero\":1,\"balsan-sudtirol.it\":1,\"balsan-suedtirol.it\":1,\"balsan.it\":1,\"balsfjord.no\":1,\"baltimore.museum\":1,\"bamble.no\":1,\"bandai.fukushima.jp\":1,\"bando.ibaraki.jp\":1,\"banzai.cloud\":2,\"bar.pro\":1,\"bar0.net\":1,\"bar1.net\":1,\"bar2.net\":1,\"barcelona.museum\":1,\"bardu.no\":1,\"bari.it\":1,\"barletta-trani-andria.it\":1,\"barlettatraniandria.it\":1,\"barreau.bj\":1,\"barrel-of-knowledge.info\":1,\"barrell-of-knowledge.info\":1,\"barsy.bg\":1,\"barsy.ca\":1,\"barsy.club\":1,\"barsy.co.uk\":1,\"barsy.de\":1,\"barsy.eu\":1,\"barsy.in\":1,\"barsy.info\":1,\"barsy.io\":1,\"barsy.me\":1,\"barsy.menu\":1,\"barsy.mobi\":1,\"barsy.net\":1,\"barsy.online\":1,\"barsy.org\":1,\"barsy.pro\":1,\"barsy.pub\":1,\"barsy.shop\":1,\"barsy.site\":1,\"barsy.support\":1,\"barsy.uk\":1,\"barsycenter.com\":1,\"barsyonline.co.uk\":1,\"barsyonline.com\":1,\"barueri.br\":1,\"barum.no\":1,\"bas.it\":1,\"baseball.museum\":1,\"basel.museum\":1,\"bashkiria.ru\":1,\"bashkiria.su\":1,\"basicserver.io\":1,\"basilicata.it\":1,\"baths.museum\":1,\"bato.tochigi.jp\":1,\"batsfjord.no\":1,\"bauern.museum\":1,\"bbs.tr\":1,\"bc.ca\":1,\"bc.platform.sh\":1,\"bci.dnstrace.pro\":1,\"bd\":2,\"bd.se\":1,\"be.ax\":1,\"be.eu.org\":1,\"be.gy\":1,\"bearalvahki.no\":1,\"beardu.no\":1,\"beauxarts.museum\":1,\"bedzin.pl\":1,\"beeldengeluid.museum\":1,\"beep.pl\":1,\"beiarn.no\":1,\"bel.tr\":1,\"belau.pw\":1,\"belem.br\":1,\"bellevue.museum\":1,\"belluno.it\":1,\"benevento.it\":1,\"beppu.oita.jp\":1,\"berg.no\":1,\"bergamo.it\":1,\"bergbau.museum\":1,\"bergen.no\":1,\"berkeley.museum\":1,\"berlevag.no\":1,\"berlin.museum\":1,\"bern.museum\":1,\"beskidy.pl\":1,\"beta.bounty-full.com\":1,\"betainabox.com\":1,\"better-than.tv\":1,\"bg.eu.org\":1,\"bg.it\":1,\"bhz.br\":1,\"bi.it\":1,\"bialowieza.pl\":1,\"bialystok.pl\":1,\"bib.br\":1,\"bibai.hokkaido.jp\":1,\"bible.museum\":1,\"biei.hokkaido.jp\":1,\"bielawa.pl\":1,\"biella.it\":1,\"bieszczady.pl\":1,\"bievat.no\":1,\"bifuka.hokkaido.jp\":1,\"bihoro.hokkaido.jp\":1,\"bilbao.museum\":1,\"bill.museum\":1,\"bindal.no\":1,\"bio.br\":1,\"bir.ru\":1,\"biratori.hokkaido.jp\":1,\"birdart.museum\":1,\"birkenes.no\":1,\"birthplace.museum\":1,\"bitbridge.net\":1,\"biz.at\":1,\"biz.az\":1,\"biz.bb\":1,\"biz.cy\":1,\"biz.dk\":1,\"biz.et\":1,\"biz.fj\":1,\"biz.gl\":1,\"biz.id\":1,\"biz.ki\":1,\"biz.ls\":1,\"biz.mv\":1,\"biz.mw\":1,\"biz.ni\":1,\"biz.nr\":1,\"biz.pk\":1,\"biz.pl\":1,\"biz.pr\":1,\"biz.ss\":1,\"biz.tj\":1,\"biz.tr\":1,\"biz.tt\":1,\"biz.ua\":1,\"biz.vn\":1,\"biz.zm\":1,\"bizen.okayama.jp\":1,\"bj.cn\":1,\"bjarkoy.no\":1,\"bjerkreim.no\":1,\"bjugn.no\":1,\"bl.it\":1,\"blackbaudcdn.net\":1,\"blog.bo\":1,\"blog.br\":1,\"blog.gt\":1,\"blog.kg\":1,\"blog.vu\":1,\"blogdns.com\":1,\"blogdns.net\":1,\"blogdns.org\":1,\"blogsite.org\":1,\"blogsite.xyz\":1,\"blogspot.ae\":1,\"blogspot.al\":1,\"blogspot.am\":1,\"blogspot.ba\":1,\"blogspot.be\":1,\"blogspot.bg\":1,\"blogspot.bj\":1,\"blogspot.ca\":1,\"blogspot.cf\":1,\"blogspot.ch\":1,\"blogspot.cl\":1,\"blogspot.co.at\":1,\"blogspot.co.id\":1,\"blogspot.co.il\":1,\"blogspot.co.ke\":1,\"blogspot.co.nz\":1,\"blogspot.co.uk\":1,\"blogspot.co.za\":1,\"blogspot.com\":1,\"blogspot.com.ar\":1,\"blogspot.com.au\":1,\"blogspot.com.br\":1,\"blogspot.com.by\":1,\"blogspot.com.co\":1,\"blogspot.com.cy\":1,\"blogspot.com.ee\":1,\"blogspot.com.eg\":1,\"blogspot.com.es\":1,\"blogspot.com.mt\":1,\"blogspot.com.ng\":1,\"blogspot.com.tr\":1,\"blogspot.com.uy\":1,\"blogspot.cv\":1,\"blogspot.cz\":1,\"blogspot.de\":1,\"blogspot.dk\":1,\"blogspot.fi\":1,\"blogspot.fr\":1,\"blogspot.gr\":1,\"blogspot.hk\":1,\"blogspot.hr\":1,\"blogspot.hu\":1,\"blogspot.ie\":1,\"blogspot.in\":1,\"blogspot.is\":1,\"blogspot.it\":1,\"blogspot.jp\":1,\"blogspot.kr\":1,\"blogspot.li\":1,\"blogspot.lt\":1,\"blogspot.lu\":1,\"blogspot.md\":1,\"blogspot.mk\":1,\"blogspot.mr\":1,\"blogspot.mx\":1,\"blogspot.my\":1,\"blogspot.nl\":1,\"blogspot.no\":1,\"blogspot.pe\":1,\"blogspot.pt\":1,\"blogspot.qa\":1,\"blogspot.re\":1,\"blogspot.ro\":1,\"blogspot.rs\":1,\"blogspot.ru\":1,\"blogspot.se\":1,\"blogspot.sg\":1,\"blogspot.si\":1,\"blogspot.sk\":1,\"blogspot.sn\":1,\"blogspot.td\":1,\"blogspot.tw\":1,\"blogspot.ug\":1,\"blogspot.vn\":1,\"blogsyte.com\":1,\"bloxcms.com\":1,\"bmd.br\":1,\"bmoattachments.org\":1,\"bn.it\":1,\"bnr.la\":1,\"bo.it\":1,\"bo.nordland.no\":1,\"bo.telemark.no\":1,\"boavista.br\":1,\"bodo.no\":1,\"bokn.no\":1,\"boldlygoingnowhere.org\":1,\"boleslawiec.pl\":1,\"bolivia.bo\":1,\"bologna.it\":1,\"bolt.hu\":1,\"bolzano-altoadige.it\":1,\"bolzano.it\":1,\"bomlo.no\":1,\"bonn.museum\":1,\"boomla.net\":1,\"boston.museum\":1,\"botanical.museum\":1,\"botanicalgarden.museum\":1,\"botanicgarden.museum\":1,\"botany.museum\":1,\"bounceme.net\":1,\"bounty-full.com\":1,\"boxfuse.io\":1,\"bozen-sudtirol.it\":1,\"bozen-suedtirol.it\":1,\"bozen.it\":1,\"bpl.biz\":1,\"bplaced.com\":1,\"bplaced.de\":1,\"bplaced.net\":1,\"br.com\":1,\"br.it\":1,\"brand.se\":1,\"brandywinevalley.museum\":1,\"brasil.museum\":1,\"brasilia.me\":1,\"bremanger.no\":1,\"brescia.it\":1,\"brindisi.it\":1,\"bristol.museum\":1,\"british.museum\":1,\"britishcolumbia.museum\":1,\"broadcast.museum\":1,\"broke-it.net\":1,\"broker.aero\":1,\"bronnoy.no\":1,\"bronnoysund.no\":1,\"browsersafetymark.io\":1,\"brumunddal.no\":1,\"brunel.museum\":1,\"brussel.museum\":1,\"brussels.museum\":1,\"bruxelles.museum\":1,\"bryansk.su\":1,\"bryne.no\":1,\"bs.it\":1,\"bsb.br\":1,\"bss.design\":1,\"bt.it\":1,\"bu.no\":1,\"budejju.no\":1,\"building.museum\":1,\"builtwithdark.com\":1,\"bukhara.su\":1,\"bulsan-sudtirol.it\":1,\"bulsan-suedtirol.it\":1,\"bulsan.it\":1,\"bungoono.oita.jp\":1,\"bungotakada.oita.jp\":1,\"bunkyo.tokyo.jp\":1,\"burghof.museum\":1,\"bus.museum\":1,\"busan.kr\":1,\"bushey.museum\":1,\"buyshouses.net\":1,\"buzen.fukuoka.jp\":1,\"bydgoszcz.pl\":1,\"byen.site\":1,\"bygland.no\":1,\"bykle.no\":1,\"bytom.pl\":1,\"bz.it\":1,\"bzz.dapps.earth\":2,\"c.bg\":1,\"c.cdn77.org\":1,\"c.la\":1,\"c.se\":1,\"c66.me\":1,\"ca-central-1.elasticbeanstalk.com\":1,\"ca.eu.org\":1,\"ca.it\":1,\"ca.na\":1,\"ca.us\":1,\"caa.aero\":1,\"caa.li\":1,\"cable-modem.org\":1,\"cadaques.museum\":1,\"cagliari.it\":1,\"cahcesuolo.no\":1,\"cal.it\":1,\"calabria.it\":1,\"california.museum\":1,\"caltanissetta.it\":1,\"cam.it\":1,\"cambridge.museum\":1,\"camdvr.org\":1,\"campania.it\":1,\"campidano-medio.it\":1,\"campidanomedio.it\":1,\"campinagrande.br\":1,\"campinas.br\":1,\"campobasso.it\":1,\"can.museum\":1,\"canada.museum\":1,\"capebreton.museum\":1,\"carbonia-iglesias.it\":1,\"carboniaiglesias.it\":1,\"cargo.aero\":1,\"carrara-massa.it\":1,\"carraramassa.it\":1,\"carrd.co\":1,\"carrier.museum\":1,\"cartoonart.museum\":1,\"casacam.net\":1,\"casadelamoneda.museum\":1,\"caserta.it\":1,\"casino.hu\":1,\"castle.museum\":1,\"castres.museum\":1,\"cat.ax\":1,\"catania.it\":1,\"catanzaro.it\":1,\"catering.aero\":1,\"catholic.edu.au\":1,\"caxias.br\":1,\"cb.it\":1,\"cbg.ru\":1,\"cc.ak.us\":1,\"cc.al.us\":1,\"cc.ar.us\":1,\"cc.as.us\":1,\"cc.az.us\":1,\"cc.ca.us\":1,\"cc.co.us\":1,\"cc.ct.us\":1,\"cc.dc.us\":1,\"cc.de.us\":1,\"cc.fl.us\":1,\"cc.ga.us\":1,\"cc.gu.us\":1,\"cc.hi.us\":1,\"cc.hn\":1,\"cc.ia.us\":1,\"cc.id.us\":1,\"cc.il.us\":1,\"cc.in.us\":1,\"cc.ks.us\":1,\"cc.ky.us\":1,\"cc.la.us\":1,\"cc.ma.us\":1,\"cc.md.us\":1,\"cc.me.us\":1,\"cc.mi.us\":1,\"cc.mn.us\":1,\"cc.mo.us\":1,\"cc.ms.us\":1,\"cc.mt.us\":1,\"cc.na\":1,\"cc.nc.us\":1,\"cc.nd.us\":1,\"cc.ne.us\":1,\"cc.nh.us\":1,\"cc.nj.us\":1,\"cc.nm.us\":1,\"cc.nv.us\":1,\"cc.ny.us\":1,\"cc.oh.us\":1,\"cc.ok.us\":1,\"cc.or.us\":1,\"cc.pa.us\":1,\"cc.pr.us\":1,\"cc.ri.us\":1,\"cc.sc.us\":1,\"cc.sd.us\":1,\"cc.tn.us\":1,\"cc.tx.us\":1,\"cc.ua\":1,\"cc.ut.us\":1,\"cc.va.us\":1,\"cc.vi.us\":1,\"cc.vt.us\":1,\"cc.wa.us\":1,\"cc.wi.us\":1,\"cc.wv.us\":1,\"cc.wy.us\":1,\"cci.fr\":1,\"cd.eu.org\":1,\"cdn77-ssl.net\":1,\"ce.gov.br\":1,\"ce.it\":1,\"ce.leg.br\":1,\"cechire.com\":1,\"celtic.museum\":1,\"center.museum\":1,\"certification.aero\":1,\"certmgr.org\":1,\"cesena-forli.it\":1,\"cesenaforli.it\":1,\"ch.eu.org\":1,\"ch.it\":1,\"ch.tc\":1,\"chambagri.fr\":1,\"championship.aero\":1,\"channelsdvr.net\":1,\"charter.aero\":1,\"chattanooga.museum\":1,\"cheltenham.museum\":1,\"cherkassy.ua\":1,\"cherkasy.ua\":1,\"chernigov.ua\":1,\"chernihiv.ua\":1,\"chernivtsi.ua\":1,\"chernovtsy.ua\":1,\"chesapeakebay.museum\":1,\"chiba.jp\":1,\"chicago.museum\":1,\"chichibu.saitama.jp\":1,\"chieti.it\":1,\"chigasaki.kanagawa.jp\":1,\"chihayaakasaka.osaka.jp\":1,\"chijiwa.nagasaki.jp\":1,\"chikugo.fukuoka.jp\":1,\"chikuho.fukuoka.jp\":1,\"chikuhoku.nagano.jp\":1,\"chikujo.fukuoka.jp\":1,\"chikuma.nagano.jp\":1,\"chikusei.ibaraki.jp\":1,\"chikushino.fukuoka.jp\":1,\"chikuzen.fukuoka.jp\":1,\"children.museum\":1,\"childrens.museum\":1,\"childrensgarden.museum\":1,\"chimkent.su\":1,\"chino.nagano.jp\":1,\"chippubetsu.hokkaido.jp\":1,\"chiropractic.museum\":1,\"chirurgiens-dentistes-en-france.fr\":1,\"chirurgiens-dentistes.fr\":1,\"chiryu.aichi.jp\":1,\"chita.aichi.jp\":1,\"chitose.hokkaido.jp\":1,\"chiyoda.gunma.jp\":1,\"chiyoda.tokyo.jp\":1,\"chizu.tottori.jp\":1,\"chocolate.museum\":1,\"chofu.tokyo.jp\":1,\"chonan.chiba.jp\":1,\"chosei.chiba.jp\":1,\"choshi.chiba.jp\":1,\"choyo.kumamoto.jp\":1,\"christiansburg.museum\":1,\"chtr.k12.ma.us\":1,\"chungbuk.kr\":1,\"chungnam.kr\":1,\"chuo.chiba.jp\":1,\"chuo.fukuoka.jp\":1,\"chuo.osaka.jp\":1,\"chuo.tokyo.jp\":1,\"chuo.yamanashi.jp\":1,\"ci.it\":1,\"ciencia.bo\":1,\"cieszyn.pl\":1,\"cim.br\":1,\"cincinnati.museum\":1,\"cinema.museum\":1,\"circus.museum\":1,\"ciscofreak.com\":1,\"cistron.nl\":1,\"city.hu\":1,\"city.kawasaki.jp\":0,\"city.kitakyushu.jp\":0,\"city.kobe.jp\":0,\"city.nagoya.jp\":0,\"city.sapporo.jp\":0,\"city.sendai.jp\":0,\"city.yokohama.jp\":0,\"civilaviation.aero\":1,\"civilisation.museum\":1,\"civilization.museum\":1,\"civilwar.museum\":1,\"ck\":2,\"ck.ua\":1,\"cl.it\":1,\"clan.rip\":1,\"cleverapps.io\":1,\"clic2000.net\":1,\"clinton.museum\":1,\"clock.museum\":1,\"cloud.fedoraproject.org\":1,\"cloud.goog\":1,\"cloud.metacentrum.cz\":2,\"cloud66.ws\":1,\"cloud66.zone\":1,\"cloudaccess.host\":1,\"cloudaccess.net\":1,\"cloudapp.net\":1,\"cloudapps.digital\":1,\"cloudcontrolapp.com\":1,\"cloudcontrolled.com\":1,\"cloudeity.net\":1,\"cloudera.site\":1,\"cloudfront.net\":1,\"cloudfunctions.net\":1,\"cloudjiffy.net\":1,\"cloudns.asia\":1,\"cloudns.biz\":1,\"cloudns.cc\":1,\"cloudns.club\":1,\"cloudns.eu\":1,\"cloudns.in\":1,\"cloudns.info\":1,\"cloudns.org\":1,\"cloudns.pro\":1,\"cloudns.pw\":1,\"cloudns.us\":1,\"cloudycluster.net\":1,\"club.aero\":1,\"club.tw\":1,\"cn-north-1.eb.amazonaws.com.cn\":1,\"cn-northwest-1.eb.amazonaws.com.cn\":1,\"cn.com\":1,\"cn.eu.org\":1,\"cn.it\":1,\"cn.ua\":1,\"cn.vu\":1,\"cng.br\":1,\"cnpy.gdn\":1,\"cns.joyent.com\":2,\"cnt.br\":1,\"co.ae\":1,\"co.ag\":1,\"co.am\":1,\"co.ao\":1,\"co.at\":1,\"co.bb\":1,\"co.bi\":1,\"co.bn\":1,\"co.business\":1,\"co.bw\":1,\"co.ca\":1,\"co.ci\":1,\"co.cl\":1,\"co.cm\":1,\"co.com\":1,\"co.cr\":1,\"co.cz\":1,\"co.dk\":1,\"co.education\":1,\"co.events\":1,\"co.financial\":1,\"co.gg\":1,\"co.gl\":1,\"co.gy\":1,\"co.hu\":1,\"co.id\":1,\"co.il\":1,\"co.im\":1,\"co.in\":1,\"co.ir\":1,\"co.it\":1,\"co.je\":1,\"co.jp\":1,\"co.ke\":1,\"co.kr\":1,\"co.krd\":1,\"co.lc\":1,\"co.ls\":1,\"co.ma\":1,\"co.me\":1,\"co.mg\":1,\"co.mu\":1,\"co.mw\":1,\"co.mz\":1,\"co.na\":1,\"co.network\":1,\"co.ni\":1,\"co.nl\":1,\"co.no\":1,\"co.nz\":1,\"co.om\":1,\"co.pl\":1,\"co.place\":1,\"co.pn\":1,\"co.pw\":1,\"co.ro\":1,\"co.rs\":1,\"co.rw\":1,\"co.st\":1,\"co.sz\":1,\"co.technology\":1,\"co.th\":1,\"co.tj\":1,\"co.tm\":1,\"co.tt\":1,\"co.tz\":1,\"co.ua\":1,\"co.ug\":1,\"co.uk\":1,\"co.us\":1,\"co.uz\":1,\"co.ve\":1,\"co.vi\":1,\"co.za\":1,\"co.zm\":1,\"co.zw\":1,\"coal.museum\":1,\"coastaldefence.museum\":1,\"codespot.com\":1,\"cody.museum\":1,\"cog.mi.us\":1,\"col.ng\":1,\"coldwar.museum\":1,\"collection.museum\":1,\"collegefan.org\":1,\"colonialwilliamsburg.museum\":1,\"coloradoplateau.museum\":1,\"columbia.museum\":1,\"columbus.museum\":1,\"com.ac\":1,\"com.af\":1,\"com.ag\":1,\"com.ai\":1,\"com.al\":1,\"com.am\":1,\"com.ar\":1,\"com.au\":1,\"com.aw\":1,\"com.az\":1,\"com.ba\":1,\"com.bb\":1,\"com.bh\":1,\"com.bi\":1,\"com.bm\":1,\"com.bn\":1,\"com.bo\":1,\"com.br\":1,\"com.bs\":1,\"com.bt\":1,\"com.by\":1,\"com.bz\":1,\"com.ci\":1,\"com.cm\":1,\"com.cn\":1,\"com.co\":1,\"com.cu\":1,\"com.cw\":1,\"com.cy\":1,\"com.de\":1,\"com.dm\":1,\"com.do\":1,\"com.dz\":1,\"com.ec\":1,\"com.ee\":1,\"com.eg\":1,\"com.es\":1,\"com.et\":1,\"com.fj\":1,\"com.fm\":1,\"com.fr\":1,\"com.ge\":1,\"com.gh\":1,\"com.gi\":1,\"com.gl\":1,\"com.gn\":1,\"com.gp\":1,\"com.gr\":1,\"com.gt\":1,\"com.gu\":1,\"com.gy\":1,\"com.hk\":1,\"com.hn\":1,\"com.hr\":1,\"com.ht\":1,\"com.im\":1,\"com.io\":1,\"com.iq\":1,\"com.is\":1,\"com.jo\":1,\"com.kg\":1,\"com.ki\":1,\"com.km\":1,\"com.kp\":1,\"com.kw\":1,\"com.ky\":1,\"com.kz\":1,\"com.la\":1,\"com.lb\":1,\"com.lc\":1,\"com.lk\":1,\"com.lr\":1,\"com.lv\":1,\"com.ly\":1,\"com.mg\":1,\"com.mk\":1,\"com.ml\":1,\"com.mo\":1,\"com.ms\":1,\"com.mt\":1,\"com.mu\":1,\"com.mv\":1,\"com.mw\":1,\"com.mx\":1,\"com.my\":1,\"com.na\":1,\"com.nf\":1,\"com.ng\":1,\"com.ni\":1,\"com.nr\":1,\"com.om\":1,\"com.pa\":1,\"com.pe\":1,\"com.pf\":1,\"com.ph\":1,\"com.pk\":1,\"com.pl\":1,\"com.pr\":1,\"com.ps\":1,\"com.pt\":1,\"com.py\":1,\"com.qa\":1,\"com.re\":1,\"com.ro\":1,\"com.ru\":1,\"com.sa\":1,\"com.sb\":1,\"com.sc\":1,\"com.sd\":1,\"com.se\":1,\"com.sg\":1,\"com.sh\":1,\"com.sl\":1,\"com.sn\":1,\"com.so\":1,\"com.ss\":1,\"com.st\":1,\"com.sv\":1,\"com.sy\":1,\"com.tj\":1,\"com.tm\":1,\"com.tn\":1,\"com.to\":1,\"com.tr\":1,\"com.tt\":1,\"com.tw\":1,\"com.ua\":1,\"com.ug\":1,\"com.uy\":1,\"com.uz\":1,\"com.vc\":1,\"com.ve\":1,\"com.vi\":1,\"com.vn\":1,\"com.vu\":1,\"com.ws\":1,\"com.zm\":1,\"commune.am\":1,\"communication.museum\":1,\"communications.museum\":1,\"community-pro.de\":1,\"community-pro.net\":1,\"community.museum\":1,\"como.it\":1,\"compute-1.amazonaws.com\":2,\"compute.amazonaws.com\":2,\"compute.amazonaws.com.cn\":2,\"compute.estate\":2,\"computer.museum\":1,\"computerhistory.museum\":1,\"conf.au\":1,\"conf.lv\":1,\"conf.se\":1,\"conference.aero\":1,\"conn.uk\":1,\"consulado.st\":1,\"consultant.aero\":1,\"consulting.aero\":1,\"contagem.br\":1,\"contemporary.museum\":1,\"contemporaryart.museum\":1,\"control.aero\":1,\"convent.museum\":1,\"coop.br\":1,\"coop.ht\":1,\"coop.km\":1,\"coop.mv\":1,\"coop.mw\":1,\"coop.py\":1,\"coop.rw\":1,\"coop.tt\":1,\"cooperativa.bo\":1,\"copenhagen.museum\":1,\"copro.uk\":1,\"corporation.museum\":1,\"corvette.museum\":1,\"cosenza.it\":1,\"costume.museum\":1,\"couchpotatofries.org\":1,\"couk.me\":1,\"council.aero\":1,\"countryestate.museum\":1,\"county.museum\":1,\"coz.br\":1,\"cpa.pro\":1,\"cq.cn\":1,\"cr.it\":1,\"cr.ua\":1,\"crafting.xyz\":1,\"crafts.museum\":1,\"cranbrook.museum\":1,\"crd.co\":1,\"creation.museum\":1,\"cremona.it\":1,\"crew.aero\":1,\"cri.br\":1,\"cri.nz\":1,\"crimea.ua\":1,\"crotone.it\":1,\"cryptonomic.net\":2,\"cs.it\":1,\"csx.cc\":1,\"ct.it\":1,\"ct.us\":1,\"cuiaba.br\":1,\"cultural.museum\":1,\"culturalcenter.museum\":1,\"culture.museum\":1,\"cuneo.it\":1,\"cupcake.is\":1,\"curitiba.br\":1,\"curv.dev\":1,\"cust.dev.thingdust.io\":1,\"cust.disrec.thingdust.io\":1,\"cust.prod.thingdust.io\":1,\"cust.retrosnub.co.uk\":1,\"cust.testing.thingdust.io\":1,\"custom.metacentrum.cz\":1,\"customer-oci.com\":2,\"customer.enonic.io\":1,\"customer.mythic-beasts.com\":1,\"customer.speedpartner.de\":1,\"cv.ua\":1,\"cx.ua\":1,\"cy.eu.org\":1,\"cya.gg\":1,\"cyber.museum\":1,\"cymru.museum\":1,\"cyon.link\":1,\"cyon.site\":1,\"cz.eu.org\":1,\"cz.it\":1,\"czeladz.pl\":1,\"czest.pl\":1,\"d.bg\":1,\"d.gv.vc\":1,\"d.se\":1,\"daegu.kr\":1,\"daejeon.kr\":1,\"daemon.panel.gg\":1,\"dagestan.ru\":1,\"dagestan.su\":1,\"daigo.ibaraki.jp\":1,\"daisen.akita.jp\":1,\"daito.osaka.jp\":1,\"daiwa.hiroshima.jp\":1,\"dali.museum\":1,\"dallas.museum\":1,\"damnserver.com\":1,\"daplie.me\":1,\"dapps.earth\":2,\"database.museum\":1,\"date.fukushima.jp\":1,\"date.hokkaido.jp\":1,\"dattolocal.com\":1,\"dattolocal.net\":1,\"dattorelay.com\":1,\"dattoweb.com\":1,\"davvenjarga.no\":1,\"davvesiida.no\":1,\"dazaifu.fukuoka.jp\":1,\"dc.us\":1,\"dd-dns.de\":1,\"ddns.me\":1,\"ddns.net\":1,\"ddnsfree.com\":1,\"ddnsgeek.com\":1,\"ddnsking.com\":1,\"ddnslive.com\":1,\"ddnss.de\":1,\"ddnss.org\":1,\"ddr.museum\":1,\"de.com\":1,\"de.cool\":1,\"de.eu.org\":1,\"de.gt\":1,\"de.ls\":1,\"de.md\":1,\"de.us\":1,\"deatnu.no\":1,\"debian.net\":1,\"decorativearts.museum\":1,\"dedyn.io\":1,\"def.br\":1,\"defense.tn\":1,\"definima.io\":1,\"definima.net\":1,\"delaware.museum\":1,\"dell-ogliastra.it\":1,\"dellogliastra.it\":1,\"delmenhorst.museum\":1,\"demo.jelastic.com\":1,\"democracia.bo\":1,\"demon.nl\":1,\"denmark.museum\":1,\"dep.no\":1,\"deporte.bo\":1,\"depot.museum\":1,\"des.br\":1,\"desa.id\":1,\"design.aero\":1,\"design.museum\":1,\"det.br\":1,\"detroit.museum\":1,\"dev-myqnapcloud.com\":1,\"dev.adobeaemcloud.com\":2,\"dev.br\":1,\"dev.static.land\":1,\"dev.vu\":1,\"development.run\":1,\"devices.resinstaging.io\":1,\"df.gov.br\":1,\"df.leg.br\":1,\"dgca.aero\":1,\"dh.bytemark.co.uk\":1,\"dielddanuorri.no\":1,\"dinosaur.museum\":1,\"direct.quickconnect.to\":1,\"discourse.group\":1,\"discourse.team\":1,\"discovery.museum\":1,\"diskstation.eu\":1,\"diskstation.me\":1,\"diskstation.org\":1,\"diskussionsbereich.de\":1,\"ditchyourip.com\":1,\"divtasvuodna.no\":1,\"divttasvuotna.no\":1,\"dk.eu.org\":1,\"dlugoleka.pl\":1,\"dn.ua\":1,\"dnepropetrovsk.ua\":1,\"dni.us\":1,\"dnipropetrovsk.ua\":1,\"dnsalias.com\":1,\"dnsalias.net\":1,\"dnsalias.org\":1,\"dnsdojo.com\":1,\"dnsdojo.net\":1,\"dnsdojo.org\":1,\"dnsfor.me\":1,\"dnshome.de\":1,\"dnsiskinky.com\":1,\"dnsking.ch\":1,\"dnsup.net\":1,\"dnsupdate.info\":1,\"dnsupdater.de\":1,\"does-it.net\":1,\"doesntexist.com\":1,\"doesntexist.org\":1,\"dolls.museum\":1,\"donetsk.ua\":1,\"donna.no\":1,\"donostia.museum\":1,\"dontexist.com\":1,\"dontexist.net\":1,\"dontexist.org\":1,\"doomdns.com\":1,\"doomdns.org\":1,\"dopaas.com\":1,\"doshi.yamanashi.jp\":1,\"dovre.no\":1,\"dp.ua\":1,\"dr.na\":1,\"dr.tr\":1,\"drammen.no\":1,\"drangedal.no\":1,\"dray-dns.de\":1,\"drayddns.com\":1,\"draydns.de\":1,\"dreamhosters.com\":1,\"drobak.no\":1,\"drud.io\":1,\"drud.us\":1,\"dscloud.biz\":1,\"dscloud.me\":1,\"dscloud.mobi\":1,\"dsmynas.com\":1,\"dsmynas.net\":1,\"dsmynas.org\":1,\"dst.mi.us\":1,\"duckdns.org\":1,\"durham.museum\":1,\"dvrcam.info\":1,\"dvrdns.org\":1,\"dweb.link\":2,\"dy.fi\":1,\"dyn-berlin.de\":1,\"dyn-ip24.de\":1,\"dyn-o-saur.com\":1,\"dyn-vpn.de\":1,\"dyn.cosidns.de\":1,\"dyn.ddnss.de\":1,\"dyn.home-webserver.de\":1,\"dyn53.io\":1,\"dynalias.com\":1,\"dynalias.net\":1,\"dynalias.org\":1,\"dynamic-dns.info\":1,\"dynamisches-dns.de\":1,\"dynathome.net\":1,\"dyndns-at-home.com\":1,\"dyndns-at-work.com\":1,\"dyndns-blog.com\":1,\"dyndns-free.com\":1,\"dyndns-home.com\":1,\"dyndns-ip.com\":1,\"dyndns-mail.com\":1,\"dyndns-office.com\":1,\"dyndns-pics.com\":1,\"dyndns-remote.com\":1,\"dyndns-server.com\":1,\"dyndns-web.com\":1,\"dyndns-wiki.com\":1,\"dyndns-work.com\":1,\"dyndns.biz\":1,\"dyndns.dappnode.io\":1,\"dyndns.ddnss.de\":1,\"dyndns.info\":1,\"dyndns.org\":1,\"dyndns.tv\":1,\"dyndns.ws\":1,\"dyndns1.de\":1,\"dynns.com\":1,\"dynserv.org\":1,\"dynu.net\":1,\"dynv6.net\":1,\"dynvpn.de\":1,\"dyroy.no\":1,\"e.bg\":1,\"e.se\":1,\"e12.ve\":1,\"e164.arpa\":1,\"e4.cz\":1,\"east-kazakhstan.su\":1,\"eastafrica.museum\":1,\"eastcoast.museum\":1,\"eating-organic.net\":1,\"eaton.mi.us\":1,\"ebetsu.hokkaido.jp\":1,\"ebina.kanagawa.jp\":1,\"ebino.miyazaki.jp\":1,\"ebiz.tw\":1,\"echizen.fukui.jp\":1,\"ecn.br\":1,\"eco.br\":1,\"ecologia.bo\":1,\"economia.bo\":1,\"ed.ao\":1,\"ed.ci\":1,\"ed.cr\":1,\"ed.jp\":1,\"ed.pw\":1,\"edgeapp.net\":1,\"edgestack.me\":1,\"edogawa.tokyo.jp\":1,\"edu.ac\":1,\"edu.af\":1,\"edu.al\":1,\"edu.ar\":1,\"edu.au\":1,\"edu.az\":1,\"edu.ba\":1,\"edu.bb\":1,\"edu.bh\":1,\"edu.bi\":1,\"edu.bm\":1,\"edu.bn\":1,\"edu.bo\":1,\"edu.br\":1,\"edu.bs\":1,\"edu.bt\":1,\"edu.bz\":1,\"edu.ci\":1,\"edu.cn\":1,\"edu.co\":1,\"edu.cu\":1,\"edu.cw\":1,\"edu.dm\":1,\"edu.do\":1,\"edu.dz\":1,\"edu.ec\":1,\"edu.ee\":1,\"edu.eg\":1,\"edu.es\":1,\"edu.et\":1,\"edu.eu.org\":1,\"edu.fm\":1,\"edu.gd\":1,\"edu.ge\":1,\"edu.gh\":1,\"edu.gi\":1,\"edu.gl\":1,\"edu.gn\":1,\"edu.gp\":1,\"edu.gr\":1,\"edu.gt\":1,\"edu.gu\":1,\"edu.gy\":1,\"edu.hk\":1,\"edu.hn\":1,\"edu.ht\":1,\"edu.in\":1,\"edu.iq\":1,\"edu.is\":1,\"edu.it\":1,\"edu.jo\":1,\"edu.kg\":1,\"edu.ki\":1,\"edu.km\":1,\"edu.kn\":1,\"edu.kp\":1,\"edu.krd\":1,\"edu.kw\":1,\"edu.ky\":1,\"edu.kz\":1,\"edu.la\":1,\"edu.lb\":1,\"edu.lc\":1,\"edu.lk\":1,\"edu.lr\":1,\"edu.ls\":1,\"edu.lv\":1,\"edu.ly\":1,\"edu.me\":1,\"edu.mg\":1,\"edu.mk\":1,\"edu.ml\":1,\"edu.mn\":1,\"edu.mo\":1,\"edu.ms\":1,\"edu.mt\":1,\"edu.mv\":1,\"edu.mw\":1,\"edu.mx\":1,\"edu.my\":1,\"edu.mz\":1,\"edu.ng\":1,\"edu.ni\":1,\"edu.nr\":1,\"edu.om\":1,\"edu.pa\":1,\"edu.pe\":1,\"edu.pf\":1,\"edu.ph\":1,\"edu.pk\":1,\"edu.pl\":1,\"edu.pn\":1,\"edu.pr\":1,\"edu.ps\":1,\"edu.pt\":1,\"edu.py\":1,\"edu.qa\":1,\"edu.rs\":1,\"edu.ru\":1,\"edu.sa\":1,\"edu.sb\":1,\"edu.sc\":1,\"edu.sd\":1,\"edu.sg\":1,\"edu.sl\":1,\"edu.sn\":1,\"edu.so\":1,\"edu.ss\":1,\"edu.st\":1,\"edu.sv\":1,\"edu.sy\":1,\"edu.tj\":1,\"edu.tm\":1,\"edu.to\":1,\"edu.tr\":1,\"edu.tt\":1,\"edu.tw\":1,\"edu.ua\":1,\"edu.uy\":1,\"edu.vc\":1,\"edu.ve\":1,\"edu.vn\":1,\"edu.vu\":1,\"edu.ws\":1,\"edu.za\":1,\"edu.zm\":1,\"education.museum\":1,\"educational.museum\":1,\"educator.aero\":1,\"edugit.org\":1,\"edunet.tn\":1,\"ee.eu.org\":1,\"egersund.no\":1,\"egyptian.museum\":1,\"ehime.jp\":1,\"eid.no\":1,\"eidfjord.no\":1,\"eidsberg.no\":1,\"eidskog.no\":1,\"eidsvoll.no\":1,\"eigersund.no\":1,\"eiheiji.fukui.jp\":1,\"eisenbahn.museum\":1,\"ekloges.cy\":1,\"elasticbeanstalk.com\":1,\"elb.amazonaws.com\":2,\"elb.amazonaws.com.cn\":2,\"elblag.pl\":1,\"elburg.museum\":1,\"elk.pl\":1,\"elvendrell.museum\":1,\"elverum.no\":1,\"emb.kw\":1,\"embaixada.st\":1,\"embetsu.hokkaido.jp\":1,\"embroidery.museum\":1,\"emergency.aero\":1,\"emilia-romagna.it\":1,\"emiliaromagna.it\":1,\"emp.br\":1,\"empresa.bo\":1,\"emr.it\":1,\"en-root.fr\":1,\"en.it\":1,\"ena.gifu.jp\":1,\"encyclopedic.museum\":1,\"endofinternet.net\":1,\"endofinternet.org\":1,\"endoftheinternet.org\":1,\"enebakk.no\":1,\"enf.br\":1,\"eng.br\":1,\"eng.pro\":1,\"engerdal.no\":1,\"engine.aero\":1,\"engineer.aero\":1,\"england.museum\":1,\"eniwa.hokkaido.jp\":1,\"enna.it\":1,\"enonic.io\":1,\"ens.tn\":1,\"ent.platform.sh\":1,\"enterprisecloud.nu\":1,\"entertainment.aero\":1,\"entomology.museum\":1,\"environment.museum\":1,\"environmentalconservation.museum\":1,\"epilepsy.museum\":1,\"equipment.aero\":1,\"er\":2,\"erimo.hokkaido.jp\":1,\"erotica.hu\":1,\"erotika.hu\":1,\"es.ax\":1,\"es.eu.org\":1,\"es.gov.br\":1,\"es.kr\":1,\"es.leg.br\":1,\"esan.hokkaido.jp\":1,\"esashi.hokkaido.jp\":1,\"esp.br\":1,\"essex.museum\":1,\"est-a-la-maison.com\":1,\"est-a-la-masion.com\":1,\"est-le-patron.com\":1,\"est-mon-blogueur.com\":1,\"est.pr\":1,\"estate.museum\":1,\"etajima.hiroshima.jp\":1,\"etc.br\":1,\"ethnology.museum\":1,\"eti.br\":1,\"etne.no\":1,\"etnedal.no\":1,\"eu-1.evennode.com\":1,\"eu-2.evennode.com\":1,\"eu-3.evennode.com\":1,\"eu-4.evennode.com\":1,\"eu-central-1.elasticbeanstalk.com\":1,\"eu-west-1.elasticbeanstalk.com\":1,\"eu-west-2.elasticbeanstalk.com\":1,\"eu-west-3.elasticbeanstalk.com\":1,\"eu.ax\":1,\"eu.com\":1,\"eu.int\":1,\"eu.meteorapp.com\":1,\"eu.org\":1,\"eu.platform.sh\":1,\"eun.eg\":1,\"evenassi.no\":1,\"evenes.no\":1,\"evje-og-hornnes.no\":1,\"ex.futurecms.at\":2,\"ex.ortsinfo.at\":2,\"exchange.aero\":1,\"exeter.museum\":1,\"exhibition.museum\":1,\"exnet.su\":1,\"experts-comptables.fr\":1,\"express.aero\":1,\"f.bg\":1,\"f.se\":1,\"fam.pk\":1,\"family.museum\":1,\"familyds.com\":1,\"familyds.net\":1,\"familyds.org\":1,\"fantasyleague.cc\":1,\"far.br\":1,\"farm.museum\":1,\"farmequipment.museum\":1,\"farmers.museum\":1,\"farmstead.museum\":1,\"farsund.no\":1,\"fastly-terrarium.com\":1,\"fastlylb.net\":1,\"fastvps-server.com\":1,\"fastvps.host\":1,\"fastvps.site\":1,\"fauske.no\":1,\"fbx-os.fr\":1,\"fbxos.fr\":1,\"fc.it\":1,\"fe.it\":1,\"fed.us\":1,\"federation.aero\":1,\"fedje.no\":1,\"fedorainfracloud.org\":1,\"fedorapeople.org\":1,\"feira.br\":1,\"fermo.it\":1,\"ferrara.it\":1,\"feste-ip.net\":1,\"fet.no\":1,\"fetsund.no\":1,\"fg.it\":1,\"fh.se\":1,\"fhapp.xyz\":1,\"fhs.no\":1,\"fhsk.se\":1,\"fhv.se\":1,\"fi.cloudplatform.fi\":1,\"fi.cr\":1,\"fi.eu.org\":1,\"fi.it\":1,\"fie.ee\":1,\"field.museum\":1,\"figueres.museum\":1,\"filatelia.museum\":1,\"filegear-au.me\":1,\"filegear-de.me\":1,\"filegear-gb.me\":1,\"filegear-ie.me\":1,\"filegear-jp.me\":1,\"filegear-sg.me\":1,\"filegear.me\":1,\"film.hu\":1,\"film.museum\":1,\"fin.ci\":1,\"fin.ec\":1,\"fin.tn\":1,\"fineart.museum\":1,\"finearts.museum\":1,\"finland.museum\":1,\"finnoy.no\":1,\"firebaseapp.com\":1,\"firenet.ch\":2,\"firenze.it\":1,\"firewall-gateway.com\":1,\"firewall-gateway.de\":1,\"firewall-gateway.net\":1,\"firm.co\":1,\"firm.dk\":1,\"firm.ht\":1,\"firm.in\":1,\"firm.nf\":1,\"firm.ng\":1,\"firm.ro\":1,\"firm.ve\":1,\"fitjar.no\":1,\"fj.cn\":1,\"fjaler.no\":1,\"fjell.no\":1,\"fk\":2,\"fl.us\":1,\"fla.no\":1,\"flakstad.no\":1,\"flanders.museum\":1,\"flatanger.no\":1,\"flekkefjord.no\":1,\"flesberg.no\":1,\"flight.aero\":1,\"flog.br\":1,\"flora.no\":1,\"florence.it\":1,\"florida.museum\":1,\"floripa.br\":1,\"floro.no\":1,\"flt.cloud.muni.cz\":1,\"fly.dev\":1,\"flynnhosting.net\":1,\"fm.br\":1,\"fm.it\":1,\"fm.no\":1,\"fnd.br\":1,\"fnwk.site\":1,\"foggia.it\":1,\"folionetwork.site\":1,\"folkebibl.no\":1,\"folldal.no\":1,\"for-better.biz\":1,\"for-more.biz\":1,\"for-our.info\":1,\"for-some.biz\":1,\"for-the.biz\":1,\"for.men\":1,\"for.mom\":1,\"for.one\":1,\"for.sale\":1,\"force.museum\":1,\"forde.no\":1,\"forgot.her.name\":1,\"forgot.his.name\":1,\"forli-cesena.it\":1,\"forlicesena.it\":1,\"forsand.no\":1,\"fortal.br\":1,\"forte.id\":1,\"fortmissoula.museum\":1,\"fortworth.museum\":1,\"forum.hu\":1,\"forumz.info\":1,\"fosnes.no\":1,\"fot.br\":1,\"foundation.museum\":1,\"foz.br\":1,\"fr.eu.org\":1,\"fr.it\":1,\"frana.no\":1,\"francaise.museum\":1,\"frankfurt.museum\":1,\"franziskaner.museum\":1,\"fredrikstad.no\":1,\"free.hr\":1,\"freebox-os.com\":1,\"freebox-os.fr\":1,\"freeboxos.com\":1,\"freeboxos.fr\":1,\"freeddns.org\":1,\"freeddns.us\":1,\"freedesktop.org\":1,\"freemasonry.museum\":1,\"freesite.host\":1,\"freetls.fastly.net\":1,\"frei.no\":1,\"freiburg.museum\":1,\"fribourg.museum\":1,\"friuli-v-giulia.it\":1,\"friuli-ve-giulia.it\":1,\"friuli-vegiulia.it\":1,\"friuli-venezia-giulia.it\":1,\"friuli-veneziagiulia.it\":1,\"friuli-vgiulia.it\":1,\"friuliv-giulia.it\":1,\"friulive-giulia.it\":1,\"friulivegiulia.it\":1,\"friulivenezia-giulia.it\":1,\"friuliveneziagiulia.it\":1,\"friulivgiulia.it\":1,\"frog.museum\":1,\"frogn.no\":1,\"froland.no\":1,\"from-ak.com\":1,\"from-al.com\":1,\"from-ar.com\":1,\"from-az.net\":1,\"from-ca.com\":1,\"from-co.net\":1,\"from-ct.com\":1,\"from-dc.com\":1,\"from-de.com\":1,\"from-fl.com\":1,\"from-ga.com\":1,\"from-hi.com\":1,\"from-ia.com\":1,\"from-id.com\":1,\"from-il.com\":1,\"from-in.com\":1,\"from-ks.com\":1,\"from-ky.com\":1,\"from-la.net\":1,\"from-ma.com\":1,\"from-md.com\":1,\"from-me.org\":1,\"from-mi.com\":1,\"from-mn.com\":1,\"from-mo.com\":1,\"from-ms.com\":1,\"from-mt.com\":1,\"from-nc.com\":1,\"from-nd.com\":1,\"from-ne.com\":1,\"from-nh.com\":1,\"from-nj.com\":1,\"from-nm.com\":1,\"from-nv.com\":1,\"from-ny.net\":1,\"from-oh.com\":1,\"from-ok.com\":1,\"from-or.com\":1,\"from-pa.com\":1,\"from-pr.com\":1,\"from-ri.com\":1,\"from-sc.com\":1,\"from-sd.com\":1,\"from-tn.com\":1,\"from-tx.com\":1,\"from-ut.com\":1,\"from-va.com\":1,\"from-vt.com\":1,\"from-wa.com\":1,\"from-wi.com\":1,\"from-wv.com\":1,\"from-wy.com\":1,\"from.hr\":1,\"frosinone.it\":1,\"frosta.no\":1,\"froya.no\":1,\"fst.br\":1,\"ftpaccess.cc\":1,\"fuchu.hiroshima.jp\":1,\"fuchu.tokyo.jp\":1,\"fuchu.toyama.jp\":1,\"fudai.iwate.jp\":1,\"fuefuki.yamanashi.jp\":1,\"fuel.aero\":1,\"fuettertdasnetz.de\":1,\"fuji.shizuoka.jp\":1,\"fujieda.shizuoka.jp\":1,\"fujiidera.osaka.jp\":1,\"fujikawa.shizuoka.jp\":1,\"fujikawa.yamanashi.jp\":1,\"fujikawaguchiko.yamanashi.jp\":1,\"fujimi.nagano.jp\":1,\"fujimi.saitama.jp\":1,\"fujimino.saitama.jp\":1,\"fujinomiya.shizuoka.jp\":1,\"fujioka.gunma.jp\":1,\"fujisato.akita.jp\":1,\"fujisawa.iwate.jp\":1,\"fujisawa.kanagawa.jp\":1,\"fujishiro.ibaraki.jp\":1,\"fujiyoshida.yamanashi.jp\":1,\"fukagawa.hokkaido.jp\":1,\"fukaya.saitama.jp\":1,\"fukuchi.fukuoka.jp\":1,\"fukuchiyama.kyoto.jp\":1,\"fukudomi.saga.jp\":1,\"fukui.fukui.jp\":1,\"fukui.jp\":1,\"fukumitsu.toyama.jp\":1,\"fukuoka.jp\":1,\"fukuroi.shizuoka.jp\":1,\"fukusaki.hyogo.jp\":1,\"fukushima.fukushima.jp\":1,\"fukushima.hokkaido.jp\":1,\"fukushima.jp\":1,\"fukuyama.hiroshima.jp\":1,\"funabashi.chiba.jp\":1,\"funagata.yamagata.jp\":1,\"funahashi.toyama.jp\":1,\"fundacio.museum\":1,\"fuoisku.no\":1,\"fuossko.no\":1,\"furano.hokkaido.jp\":1,\"furniture.museum\":1,\"furubira.hokkaido.jp\":1,\"furudono.fukushima.jp\":1,\"furukawa.miyagi.jp\":1,\"fusa.no\":1,\"fuso.aichi.jp\":1,\"fussa.tokyo.jp\":1,\"futaba.fukushima.jp\":1,\"futsu.nagasaki.jp\":1,\"futtsu.chiba.jp\":1,\"futurecms.at\":2,\"futurehosting.at\":1,\"futuremailing.at\":1,\"fvg.it\":1,\"fylkesbibl.no\":1,\"fyresdal.no\":1,\"g.bg\":1,\"g.se\":1,\"g.vbrplsbx.io\":1,\"g12.br\":1,\"ga.us\":1,\"gaivuotna.no\":1,\"gallery.museum\":1,\"galsa.no\":1,\"gamagori.aichi.jp\":1,\"game-host.org\":1,\"game-server.cc\":1,\"game.tw\":1,\"games.hu\":1,\"gamo.shiga.jp\":1,\"gamvik.no\":1,\"gangaviika.no\":1,\"gangwon.kr\":1,\"garden.museum\":1,\"gateway.museum\":1,\"gaular.no\":1,\"gausdal.no\":1,\"gb.com\":1,\"gb.net\":1,\"gc.ca\":1,\"gd.cn\":1,\"gda.pl\":1,\"gdansk.pl\":1,\"gdynia.pl\":1,\"ge.it\":1,\"geek.nz\":1,\"geekgalaxy.com\":1,\"geelvinck.museum\":1,\"gehirn.ne.jp\":1,\"geisei.kochi.jp\":1,\"gemological.museum\":1,\"gen.in\":1,\"gen.mi.us\":1,\"gen.ng\":1,\"gen.nz\":1,\"gen.tr\":1,\"genkai.saga.jp\":1,\"genoa.it\":1,\"genova.it\":1,\"gentapps.com\":1,\"gentlentapis.com\":1,\"geo.br\":1,\"geology.museum\":1,\"geometre-expert.fr\":1,\"georgia.museum\":1,\"georgia.su\":1,\"getmyip.com\":1,\"gets-it.net\":1,\"gg.ax\":1,\"ggf.br\":1,\"giehtavuoatna.no\":1,\"giessen.museum\":1,\"gifu.gifu.jp\":1,\"gifu.jp\":1,\"giize.com\":1,\"gildeskal.no\":1,\"ginan.gifu.jp\":1,\"ginowan.okinawa.jp\":1,\"ginoza.okinawa.jp\":1,\"giske.no\":1,\"git-pages.rit.edu\":1,\"git-repos.de\":1,\"gitapp.si\":1,\"github.io\":1,\"githubusercontent.com\":1,\"gitlab.io\":1,\"gitpage.si\":1,\"gjemnes.no\":1,\"gjerdrum.no\":1,\"gjerstad.no\":1,\"gjesdal.no\":1,\"gjovik.no\":1,\"glas.museum\":1,\"glass.museum\":1,\"gleeze.com\":1,\"gliding.aero\":1,\"glitch.me\":1,\"gliwice.pl\":1,\"global.prod.fastly.net\":1,\"global.ssl.fastly.net\":1,\"glogow.pl\":1,\"gloppen.no\":1,\"glug.org.uk\":1,\"gmina.pl\":1,\"gniezno.pl\":1,\"go.ci\":1,\"go.cr\":1,\"go.dyndns.org\":1,\"go.gov.br\":1,\"go.id\":1,\"go.it\":1,\"go.jp\":1,\"go.ke\":1,\"go.kr\":1,\"go.leg.br\":1,\"go.pw\":1,\"go.th\":1,\"go.tj\":1,\"go.tz\":1,\"go.ug\":1,\"gob.ar\":1,\"gob.bo\":1,\"gob.cl\":1,\"gob.do\":1,\"gob.ec\":1,\"gob.es\":1,\"gob.gt\":1,\"gob.hn\":1,\"gob.mx\":1,\"gob.ni\":1,\"gob.pa\":1,\"gob.pe\":1,\"gob.pk\":1,\"gob.sv\":1,\"gob.ve\":1,\"gobo.wakayama.jp\":1,\"godo.gifu.jp\":1,\"goiania.br\":1,\"goip.de\":1,\"gojome.akita.jp\":1,\"gok.pk\":1,\"gokase.miyazaki.jp\":1,\"gol.no\":1,\"golffan.us\":1,\"gon.pk\":1,\"gonohe.aomori.jp\":1,\"googleapis.com\":1,\"googlecode.com\":1,\"gop.pk\":1,\"gorge.museum\":1,\"gorizia.it\":1,\"gorlice.pl\":1,\"gos.pk\":1,\"gose.nara.jp\":1,\"gosen.niigata.jp\":1,\"goshiki.hyogo.jp\":1,\"gotdns.ch\":1,\"gotdns.com\":1,\"gotdns.org\":1,\"gotemba.shizuoka.jp\":1,\"goto.nagasaki.jp\":1,\"gotpantheon.com\":1,\"gotsu.shimane.jp\":1,\"gouv.bj\":1,\"gouv.ci\":1,\"gouv.fr\":1,\"gouv.ht\":1,\"gouv.km\":1,\"gouv.ml\":1,\"gouv.sn\":1,\"gov.ac\":1,\"gov.ae\":1,\"gov.af\":1,\"gov.al\":1,\"gov.ar\":1,\"gov.as\":1,\"gov.au\":1,\"gov.az\":1,\"gov.ba\":1,\"gov.bb\":1,\"gov.bf\":1,\"gov.bh\":1,\"gov.bm\":1,\"gov.bn\":1,\"gov.br\":1,\"gov.bs\":1,\"gov.bt\":1,\"gov.by\":1,\"gov.bz\":1,\"gov.cd\":1,\"gov.cl\":1,\"gov.cm\":1,\"gov.cn\":1,\"gov.co\":1,\"gov.cu\":1,\"gov.cx\":1,\"gov.cy\":1,\"gov.dm\":1,\"gov.do\":1,\"gov.dz\":1,\"gov.ec\":1,\"gov.ee\":1,\"gov.eg\":1,\"gov.et\":1,\"gov.fj\":1,\"gov.gd\":1,\"gov.ge\":1,\"gov.gh\":1,\"gov.gi\":1,\"gov.gn\":1,\"gov.gr\":1,\"gov.gu\":1,\"gov.gy\":1,\"gov.hk\":1,\"gov.ie\":1,\"gov.il\":1,\"gov.in\":1,\"gov.iq\":1,\"gov.ir\":1,\"gov.is\":1,\"gov.it\":1,\"gov.jo\":1,\"gov.kg\":1,\"gov.ki\":1,\"gov.km\":1,\"gov.kn\":1,\"gov.kp\":1,\"gov.kw\":1,\"gov.ky\":1,\"gov.kz\":1,\"gov.la\":1,\"gov.lb\":1,\"gov.lc\":1,\"gov.lk\":1,\"gov.lr\":1,\"gov.ls\":1,\"gov.lt\":1,\"gov.lv\":1,\"gov.ly\":1,\"gov.ma\":1,\"gov.me\":1,\"gov.mg\":1,\"gov.mk\":1,\"gov.ml\":1,\"gov.mn\":1,\"gov.mo\":1,\"gov.mr\":1,\"gov.ms\":1,\"gov.mu\":1,\"gov.mv\":1,\"gov.mw\":1,\"gov.my\":1,\"gov.mz\":1,\"gov.nc.tr\":1,\"gov.ng\":1,\"gov.nr\":1,\"gov.om\":1,\"gov.ph\":1,\"gov.pk\":1,\"gov.pl\":1,\"gov.pn\":1,\"gov.pr\":1,\"gov.ps\":1,\"gov.pt\":1,\"gov.py\":1,\"gov.qa\":1,\"gov.rs\":1,\"gov.ru\":1,\"gov.rw\":1,\"gov.sa\":1,\"gov.sb\":1,\"gov.sc\":1,\"gov.scot\":1,\"gov.sd\":1,\"gov.sg\":1,\"gov.sh\":1,\"gov.sl\":1,\"gov.so\":1,\"gov.ss\":1,\"gov.st\":1,\"gov.sx\":1,\"gov.sy\":1,\"gov.tj\":1,\"gov.tl\":1,\"gov.tm\":1,\"gov.tn\":1,\"gov.to\":1,\"gov.tr\":1,\"gov.tt\":1,\"gov.tw\":1,\"gov.ua\":1,\"gov.uk\":1,\"gov.vc\":1,\"gov.ve\":1,\"gov.vn\":1,\"gov.ws\":1,\"gov.za\":1,\"gov.zm\":1,\"gov.zw\":1,\"government.aero\":1,\"govt.nz\":1,\"gr.com\":1,\"gr.eu.org\":1,\"gr.it\":1,\"gr.jp\":1,\"grajewo.pl\":1,\"gran.no\":1,\"grandrapids.museum\":1,\"grane.no\":1,\"granvin.no\":1,\"graphox.us\":1,\"gratangen.no\":1,\"graz.museum\":1,\"greta.fr\":1,\"grimstad.no\":1,\"griw.gov.pl\":1,\"groks-the.info\":1,\"groks-this.info\":1,\"grondar.za\":1,\"grong.no\":1,\"grosseto.it\":1,\"groundhandling.aero\":1,\"group.aero\":1,\"grozny.ru\":1,\"grozny.su\":1,\"grp.lk\":1,\"gru.br\":1,\"grue.no\":1,\"gs.aa.no\":1,\"gs.ah.no\":1,\"gs.bu.no\":1,\"gs.cn\":1,\"gs.fm.no\":1,\"gs.hl.no\":1,\"gs.hm.no\":1,\"gs.jan-mayen.no\":1,\"gs.mr.no\":1,\"gs.nl.no\":1,\"gs.nt.no\":1,\"gs.of.no\":1,\"gs.ol.no\":1,\"gs.oslo.no\":1,\"gs.rl.no\":1,\"gs.sf.no\":1,\"gs.st.no\":1,\"gs.svalbard.no\":1,\"gs.tm.no\":1,\"gs.tr.no\":1,\"gs.va.no\":1,\"gs.vf.no\":1,\"gsj.bz\":1,\"gsm.pl\":1,\"gu.us\":1,\"guam.gu\":1,\"gub.uy\":1,\"guernsey.museum\":1,\"gujo.gifu.jp\":1,\"gulen.no\":1,\"gunma.jp\":1,\"guovdageaidnu.no\":1,\"gushikami.okinawa.jp\":1,\"gv.ao\":1,\"gv.at\":1,\"gv.vc\":1,\"gwangju.kr\":1,\"gwiddle.co.uk\":1,\"gx.cn\":1,\"gyeongbuk.kr\":1,\"gyeonggi.kr\":1,\"gyeongnam.kr\":1,\"gyokuto.kumamoto.jp\":1,\"gz.cn\":1,\"h.bg\":1,\"h.se\":1,\"ha.cn\":1,\"ha.no\":1,\"habikino.osaka.jp\":1,\"habmer.no\":1,\"haboro.hokkaido.jp\":1,\"hachijo.tokyo.jp\":1,\"hachinohe.aomori.jp\":1,\"hachioji.tokyo.jp\":1,\"hachirogata.akita.jp\":1,\"hadano.kanagawa.jp\":1,\"hadsel.no\":1,\"haebaru.okinawa.jp\":1,\"haga.tochigi.jp\":1,\"hagebostad.no\":1,\"hagi.yamaguchi.jp\":1,\"haibara.shizuoka.jp\":1,\"hakata.fukuoka.jp\":1,\"hakodate.hokkaido.jp\":1,\"hakone.kanagawa.jp\":1,\"hakuba.nagano.jp\":1,\"hakui.ishikawa.jp\":1,\"hakusan.ishikawa.jp\":1,\"halden.no\":1,\"half.host\":1,\"halloffame.museum\":1,\"halsa.no\":1,\"ham-radio-op.net\":1,\"hamada.shimane.jp\":1,\"hamamatsu.shizuoka.jp\":1,\"hamar.no\":1,\"hamaroy.no\":1,\"hamatama.saga.jp\":1,\"hamatonbetsu.hokkaido.jp\":1,\"hamburg.museum\":1,\"hammarfeasta.no\":1,\"hammerfest.no\":1,\"hamura.tokyo.jp\":1,\"hanamaki.iwate.jp\":1,\"hanamigawa.chiba.jp\":1,\"hanawa.fukushima.jp\":1,\"handa.aichi.jp\":1,\"handson.museum\":1,\"hanggliding.aero\":1,\"hannan.osaka.jp\":1,\"hanno.saitama.jp\":1,\"hanyu.saitama.jp\":1,\"hapmir.no\":1,\"happou.akita.jp\":1,\"hara.nagano.jp\":1,\"haram.no\":1,\"hareid.no\":1,\"harima.hyogo.jp\":1,\"harstad.no\":1,\"harvestcelebration.museum\":1,\"hasama.oita.jp\":1,\"hasami.nagasaki.jp\":1,\"hashbang.sh\":1,\"hashikami.aomori.jp\":1,\"hashima.gifu.jp\":1,\"hashimoto.wakayama.jp\":1,\"hasuda.saitama.jp\":1,\"hasura-app.io\":1,\"hasura.app\":1,\"hasvik.no\":1,\"hatogaya.saitama.jp\":1,\"hatoyama.saitama.jp\":1,\"hatsukaichi.hiroshima.jp\":1,\"hattfjelldal.no\":1,\"haugesund.no\":1,\"hawaii.museum\":1,\"hayakawa.yamanashi.jp\":1,\"hayashima.okayama.jp\":1,\"hazu.aichi.jp\":1,\"hb.cldmail.ru\":1,\"hb.cn\":1,\"he.cn\":1,\"health-carereform.com\":1,\"health.museum\":1,\"health.nz\":1,\"health.vn\":1,\"heguri.nara.jp\":1,\"heimatunduhren.museum\":1,\"hekinan.aichi.jp\":1,\"hellas.museum\":1,\"helsinki.museum\":1,\"hembygdsforbund.museum\":1,\"hemne.no\":1,\"hemnes.no\":1,\"hemsedal.no\":1,\"hepforge.org\":1,\"herad.no\":1,\"here-for-more.info\":1,\"heritage.museum\":1,\"herokuapp.com\":1,\"herokussl.com\":1,\"heroy.more-og-romsdal.no\":1,\"heroy.nordland.no\":1,\"hi.cn\":1,\"hi.us\":1,\"hicam.net\":1,\"hichiso.gifu.jp\":1,\"hida.gifu.jp\":1,\"hidaka.hokkaido.jp\":1,\"hidaka.kochi.jp\":1,\"hidaka.saitama.jp\":1,\"hidaka.wakayama.jp\":1,\"hidora.com\":1,\"higashi.fukuoka.jp\":1,\"higashi.fukushima.jp\":1,\"higashi.okinawa.jp\":1,\"higashiagatsuma.gunma.jp\":1,\"higashichichibu.saitama.jp\":1,\"higashihiroshima.hiroshima.jp\":1,\"higashiizu.shizuoka.jp\":1,\"higashiizumo.shimane.jp\":1,\"higashikagawa.kagawa.jp\":1,\"higashikagura.hokkaido.jp\":1,\"higashikawa.hokkaido.jp\":1,\"higashikurume.tokyo.jp\":1,\"higashimatsushima.miyagi.jp\":1,\"higashimatsuyama.saitama.jp\":1,\"higashimurayama.tokyo.jp\":1,\"higashinaruse.akita.jp\":1,\"higashine.yamagata.jp\":1,\"higashiomi.shiga.jp\":1,\"higashiosaka.osaka.jp\":1,\"higashishirakawa.gifu.jp\":1,\"higashisumiyoshi.osaka.jp\":1,\"higashitsuno.kochi.jp\":1,\"higashiura.aichi.jp\":1,\"higashiyama.kyoto.jp\":1,\"higashiyamato.tokyo.jp\":1,\"higashiyodogawa.osaka.jp\":1,\"higashiyoshino.nara.jp\":1,\"hiji.oita.jp\":1,\"hikari.yamaguchi.jp\":1,\"hikawa.shimane.jp\":1,\"hikimi.shimane.jp\":1,\"hikone.shiga.jp\":1,\"himeji.hyogo.jp\":1,\"himeshima.oita.jp\":1,\"himi.toyama.jp\":1,\"hino.tokyo.jp\":1,\"hino.tottori.jp\":1,\"hinode.tokyo.jp\":1,\"hinohara.tokyo.jp\":1,\"hioki.kagoshima.jp\":1,\"hirado.nagasaki.jp\":1,\"hiraizumi.iwate.jp\":1,\"hirakata.osaka.jp\":1,\"hiranai.aomori.jp\":1,\"hirara.okinawa.jp\":1,\"hirata.fukushima.jp\":1,\"hiratsuka.kanagawa.jp\":1,\"hiraya.nagano.jp\":1,\"hirogawa.wakayama.jp\":1,\"hirokawa.fukuoka.jp\":1,\"hirono.fukushima.jp\":1,\"hirono.iwate.jp\":1,\"hiroo.hokkaido.jp\":1,\"hirosaki.aomori.jp\":1,\"hiroshima.jp\":1,\"hisayama.fukuoka.jp\":1,\"histoire.museum\":1,\"historical.museum\":1,\"historicalsociety.museum\":1,\"historichouses.museum\":1,\"historisch.museum\":1,\"historisches.museum\":1,\"history.museum\":1,\"historyofscience.museum\":1,\"hita.oita.jp\":1,\"hitachi.ibaraki.jp\":1,\"hitachinaka.ibaraki.jp\":1,\"hitachiomiya.ibaraki.jp\":1,\"hitachiota.ibaraki.jp\":1,\"hitra.no\":1,\"hizen.saga.jp\":1,\"hjartdal.no\":1,\"hjelmeland.no\":1,\"hk.cn\":1,\"hk.com\":1,\"hk.org\":1,\"hl.cn\":1,\"hl.no\":1,\"hm.no\":1,\"hn.cn\":1,\"hobby-site.com\":1,\"hobby-site.org\":1,\"hobol.no\":1,\"hof.no\":1,\"hofu.yamaguchi.jp\":1,\"hokkaido.jp\":1,\"hokksund.no\":1,\"hokuryu.hokkaido.jp\":1,\"hokuto.hokkaido.jp\":1,\"hokuto.yamanashi.jp\":1,\"hol.no\":1,\"hole.no\":1,\"holmestrand.no\":1,\"holtalen.no\":1,\"home-webserver.de\":1,\"home.dyndns.org\":1,\"homebuilt.aero\":1,\"homedns.org\":1,\"homeftp.net\":1,\"homeftp.org\":1,\"homeip.net\":1,\"homelink.one\":1,\"homelinux.com\":1,\"homelinux.net\":1,\"homelinux.org\":1,\"homeoffice.gov.uk\":1,\"homesecuritymac.com\":1,\"homesecuritypc.com\":1,\"homeunix.com\":1,\"homeunix.net\":1,\"homeunix.org\":1,\"honai.ehime.jp\":1,\"honbetsu.hokkaido.jp\":1,\"honefoss.no\":1,\"hongo.hiroshima.jp\":1,\"honjo.akita.jp\":1,\"honjo.saitama.jp\":1,\"honjyo.akita.jp\":1,\"hopto.me\":1,\"hopto.org\":1,\"hornindal.no\":1,\"horokanai.hokkaido.jp\":1,\"horology.museum\":1,\"horonobe.hokkaido.jp\":1,\"horten.no\":1,\"hostedpi.com\":1,\"hosting-cluster.nl\":1,\"hosting.myjino.ru\":2,\"hostyhosting.io\":1,\"hotel.hu\":1,\"hotel.lk\":1,\"hotel.tz\":1,\"house.museum\":1,\"hoyanger.no\":1,\"hoylandet.no\":1,\"hr.eu.org\":1,\"hs.kr\":1,\"hs.run\":1,\"hs.zone\":1,\"hu.com\":1,\"hu.eu.org\":1,\"hu.net\":1,\"huissier-justice.fr\":1,\"humanities.museum\":1,\"hurdal.no\":1,\"hurum.no\":1,\"hvaler.no\":1,\"hyllestad.no\":1,\"hyogo.jp\":1,\"hyuga.miyazaki.jp\":1,\"hzc.io\":1,\"i.bg\":1,\"i.ng\":1,\"i.ph\":1,\"i.se\":1,\"i234.me\":1,\"ia.us\":1,\"iamallama.com\":1,\"ibara.okayama.jp\":1,\"ibaraki.ibaraki.jp\":1,\"ibaraki.jp\":1,\"ibaraki.osaka.jp\":1,\"ibestad.no\":1,\"ibigawa.gifu.jp\":1,\"ic.gov.pl\":1,\"ichiba.tokushima.jp\":1,\"ichihara.chiba.jp\":1,\"ichikai.tochigi.jp\":1,\"ichikawa.chiba.jp\":1,\"ichikawa.hyogo.jp\":1,\"ichikawamisato.yamanashi.jp\":1,\"ichinohe.iwate.jp\":1,\"ichinomiya.aichi.jp\":1,\"ichinomiya.chiba.jp\":1,\"ichinoseki.iwate.jp\":1,\"id.au\":1,\"id.ir\":1,\"id.lv\":1,\"id.ly\":1,\"id.us\":1,\"ide.kyoto.jp\":1,\"idf.il\":1,\"idrett.no\":1,\"idv.hk\":1,\"idv.tw\":1,\"ie.eu.org\":1,\"if.ua\":1,\"iglesias-carbonia.it\":1,\"iglesiascarbonia.it\":1,\"iheya.okinawa.jp\":1,\"iida.nagano.jp\":1,\"iide.yamagata.jp\":1,\"iijima.nagano.jp\":1,\"iitate.fukushima.jp\":1,\"iiyama.nagano.jp\":1,\"iizuka.fukuoka.jp\":1,\"iizuna.nagano.jp\":1,\"ikaruga.nara.jp\":1,\"ikata.ehime.jp\":1,\"ikawa.akita.jp\":1,\"ikeda.fukui.jp\":1,\"ikeda.gifu.jp\":1,\"ikeda.hokkaido.jp\":1,\"ikeda.nagano.jp\":1,\"ikeda.osaka.jp\":1,\"iki.fi\":1,\"iki.nagasaki.jp\":1,\"ikoma.nara.jp\":1,\"ikusaka.nagano.jp\":1,\"il.eu.org\":1,\"il.us\":1,\"ilawa.pl\":1,\"illustration.museum\":1,\"ilovecollege.info\":1,\"im.it\":1,\"imabari.ehime.jp\":1,\"imageandsound.museum\":1,\"imakane.hokkaido.jp\":1,\"imari.saga.jp\":1,\"imb.br\":1,\"imizu.toyama.jp\":1,\"imperia.it\":1,\"impertrix.com\":1,\"impertrixcdn.com\":1,\"in-addr.arpa\":1,\"in-berlin.de\":1,\"in-brb.de\":1,\"in-butter.de\":1,\"in-dsl.de\":1,\"in-dsl.net\":1,\"in-dsl.org\":1,\"in-the-band.net\":1,\"in-vpn.de\":1,\"in-vpn.net\":1,\"in-vpn.org\":1,\"in.eu.org\":1,\"in.futurecms.at\":2,\"in.london\":1,\"in.na\":1,\"in.net\":1,\"in.ni\":1,\"in.rs\":1,\"in.th\":1,\"in.ua\":1,\"in.us\":1,\"ina.ibaraki.jp\":1,\"ina.nagano.jp\":1,\"ina.saitama.jp\":1,\"inabe.mie.jp\":1,\"inagawa.hyogo.jp\":1,\"inagi.tokyo.jp\":1,\"inami.toyama.jp\":1,\"inami.wakayama.jp\":1,\"inashiki.ibaraki.jp\":1,\"inatsuki.fukuoka.jp\":1,\"inawashiro.fukushima.jp\":1,\"inazawa.aichi.jp\":1,\"inc.hk\":1,\"incheon.kr\":1,\"ind.br\":1,\"ind.gt\":1,\"ind.in\":1,\"ind.kw\":1,\"ind.tn\":1,\"inderoy.no\":1,\"indian.museum\":1,\"indiana.museum\":1,\"indianapolis.museum\":1,\"indianmarket.museum\":1,\"indie.porn\":1,\"indigena.bo\":1,\"industria.bo\":1,\"ine.kyoto.jp\":1,\"inf.br\":1,\"inf.cu\":1,\"inf.mk\":1,\"inf.ua\":1,\"info.at\":1,\"info.au\":1,\"info.az\":1,\"info.bb\":1,\"info.bo\":1,\"info.co\":1,\"info.cx\":1,\"info.ec\":1,\"info.et\":1,\"info.fj\":1,\"info.gu\":1,\"info.ht\":1,\"info.hu\":1,\"info.ke\":1,\"info.ki\":1,\"info.la\":1,\"info.ls\":1,\"info.mv\":1,\"info.na\":1,\"info.nf\":1,\"info.ni\":1,\"info.nr\":1,\"info.pk\":1,\"info.pl\":1,\"info.pr\":1,\"info.ro\":1,\"info.sd\":1,\"info.tn\":1,\"info.tr\":1,\"info.tt\":1,\"info.tz\":1,\"info.ve\":1,\"info.vn\":1,\"info.zm\":1,\"ing.pa\":1,\"ingatlan.hu\":1,\"ino.kochi.jp\":1,\"instantcloud.cn\":1,\"insurance.aero\":1,\"int.ar\":1,\"int.az\":1,\"int.bo\":1,\"int.ci\":1,\"int.co\":1,\"int.eu.org\":1,\"int.is\":1,\"int.la\":1,\"int.lk\":1,\"int.mv\":1,\"int.mw\":1,\"int.ni\":1,\"int.pt\":1,\"int.ru\":1,\"int.tj\":1,\"int.tt\":1,\"int.ve\":1,\"int.vn\":1,\"intelligence.museum\":1,\"interactive.museum\":1,\"internet-dns.de\":1,\"intl.tn\":1,\"inuyama.aichi.jp\":1,\"inzai.chiba.jp\":1,\"io.kg\":1,\"iobb.net\":1,\"ip6.arpa\":1,\"ipifony.net\":1,\"iraq.museum\":1,\"iris.arpa\":1,\"iron.museum\":1,\"iruma.saitama.jp\":1,\"is-a-anarchist.com\":1,\"is-a-blogger.com\":1,\"is-a-bookkeeper.com\":1,\"is-a-bruinsfan.org\":1,\"is-a-bulls-fan.com\":1,\"is-a-candidate.org\":1,\"is-a-caterer.com\":1,\"is-a-celticsfan.org\":1,\"is-a-chef.com\":1,\"is-a-chef.net\":1,\"is-a-chef.org\":1,\"is-a-conservative.com\":1,\"is-a-cpa.com\":1,\"is-a-cubicle-slave.com\":1,\"is-a-democrat.com\":1,\"is-a-designer.com\":1,\"is-a-doctor.com\":1,\"is-a-financialadvisor.com\":1,\"is-a-geek.com\":1,\"is-a-geek.net\":1,\"is-a-geek.org\":1,\"is-a-green.com\":1,\"is-a-guru.com\":1,\"is-a-hard-worker.com\":1,\"is-a-hunter.com\":1,\"is-a-knight.org\":1,\"is-a-landscaper.com\":1,\"is-a-lawyer.com\":1,\"is-a-liberal.com\":1,\"is-a-libertarian.com\":1,\"is-a-linux-user.org\":1,\"is-a-llama.com\":1,\"is-a-musician.com\":1,\"is-a-nascarfan.com\":1,\"is-a-nurse.com\":1,\"is-a-painter.com\":1,\"is-a-patsfan.org\":1,\"is-a-personaltrainer.com\":1,\"is-a-photographer.com\":1,\"is-a-player.com\":1,\"is-a-republican.com\":1,\"is-a-rockstar.com\":1,\"is-a-socialist.com\":1,\"is-a-soxfan.org\":1,\"is-a-student.com\":1,\"is-a-teacher.com\":1,\"is-a-techie.com\":1,\"is-a-therapist.com\":1,\"is-an-accountant.com\":1,\"is-an-actor.com\":1,\"is-an-actress.com\":1,\"is-an-anarchist.com\":1,\"is-an-artist.com\":1,\"is-an-engineer.com\":1,\"is-an-entertainer.com\":1,\"is-by.us\":1,\"is-certified.com\":1,\"is-found.org\":1,\"is-gone.com\":1,\"is-into-anime.com\":1,\"is-into-cars.com\":1,\"is-into-cartoons.com\":1,\"is-into-games.com\":1,\"is-leet.com\":1,\"is-lost.org\":1,\"is-not-certified.com\":1,\"is-saved.org\":1,\"is-slick.com\":1,\"is-uberleet.com\":1,\"is-very-bad.org\":1,\"is-very-evil.org\":1,\"is-very-good.org\":1,\"is-very-nice.org\":1,\"is-very-sweet.org\":1,\"is-with-theband.com\":1,\"is.eu.org\":1,\"is.gov.pl\":1,\"is.it\":1,\"isa-geek.com\":1,\"isa-geek.net\":1,\"isa-geek.org\":1,\"isa-hockeynut.com\":1,\"isa.kagoshima.jp\":1,\"isa.us\":1,\"isahaya.nagasaki.jp\":1,\"ise.mie.jp\":1,\"isehara.kanagawa.jp\":1,\"isen.kagoshima.jp\":1,\"isernia.it\":1,\"iserv.dev\":1,\"isesaki.gunma.jp\":1,\"ishigaki.okinawa.jp\":1,\"ishikari.hokkaido.jp\":1,\"ishikawa.fukushima.jp\":1,\"ishikawa.jp\":1,\"ishikawa.okinawa.jp\":1,\"ishinomaki.miyagi.jp\":1,\"isla.pr\":1,\"isleofman.museum\":1,\"isshiki.aichi.jp\":1,\"issmarterthanyou.com\":1,\"isteingeek.de\":1,\"istmein.de\":1,\"isumi.chiba.jp\":1,\"it.ao\":1,\"it.eu.org\":1,\"itabashi.tokyo.jp\":1,\"itako.ibaraki.jp\":1,\"itakura.gunma.jp\":1,\"itami.hyogo.jp\":1,\"itano.tokushima.jp\":1,\"itayanagi.aomori.jp\":1,\"ito.shizuoka.jp\":1,\"itoigawa.niigata.jp\":1,\"itoman.okinawa.jp\":1,\"its.me\":1,\"ivano-frankivsk.ua\":1,\"ivanovo.su\":1,\"iveland.no\":1,\"ivgu.no\":1,\"iwade.wakayama.jp\":1,\"iwafune.tochigi.jp\":1,\"iwaizumi.iwate.jp\":1,\"iwaki.fukushima.jp\":1,\"iwakuni.yamaguchi.jp\":1,\"iwakura.aichi.jp\":1,\"iwama.ibaraki.jp\":1,\"iwamizawa.hokkaido.jp\":1,\"iwanai.hokkaido.jp\":1,\"iwanuma.miyagi.jp\":1,\"iwata.shizuoka.jp\":1,\"iwate.iwate.jp\":1,\"iwate.jp\":1,\"iwatsuki.saitama.jp\":1,\"iwi.nz\":1,\"iyo.ehime.jp\":1,\"iz.hr\":1,\"izena.okinawa.jp\":1,\"izu.shizuoka.jp\":1,\"izumi.kagoshima.jp\":1,\"izumi.osaka.jp\":1,\"izumiotsu.osaka.jp\":1,\"izumisano.osaka.jp\":1,\"izumizaki.fukushima.jp\":1,\"izumo.shimane.jp\":1,\"izumozaki.niigata.jp\":1,\"izunokuni.shizuoka.jp\":1,\"j.bg\":1,\"j.layershift.co.uk\":1,\"j.scaleforce.com.cy\":1,\"jab.br\":1,\"jambyl.su\":1,\"jamison.museum\":1,\"jampa.br\":1,\"jan-mayen.no\":1,\"jaworzno.pl\":1,\"jcloud.ik-server.com\":1,\"jdevcloud.com\":1,\"jdf.br\":1,\"jefferson.museum\":1,\"jeju.kr\":1,\"jelastic.dogado.eu\":1,\"jelastic.regruhosting.ru\":1,\"jelastic.saveincloud.net\":1,\"jelastic.team\":1,\"jele.cloud\":1,\"jele.club\":1,\"jele.host\":1,\"jele.io\":1,\"jele.site\":1,\"jelenia-gora.pl\":1,\"jeonbuk.kr\":1,\"jeonnam.kr\":1,\"jerusalem.museum\":1,\"jessheim.no\":1,\"jevnaker.no\":1,\"jewelry.museum\":1,\"jewish.museum\":1,\"jewishart.museum\":1,\"jfk.museum\":1,\"jgora.pl\":1,\"jinsekikogen.hiroshima.jp\":1,\"jl.cn\":1,\"jls-sto1.elastx.net\":1,\"jm\":2,\"joboji.iwate.jp\":1,\"jobs.tt\":1,\"joetsu.niigata.jp\":1,\"jogasz.hu\":1,\"johana.toyama.jp\":1,\"joinville.br\":1,\"jolster.no\":1,\"jondal.no\":1,\"jor.br\":1,\"jorpeland.no\":1,\"joso.ibaraki.jp\":1,\"journal.aero\":1,\"journalism.museum\":1,\"journalist.aero\":1,\"joyo.kyoto.jp\":1,\"jozi.biz\":1,\"jp.eu.org\":1,\"jp.kg\":1,\"jp.md\":1,\"jp.net\":1,\"jpn.com\":1,\"js.cn\":1,\"js.org\":1,\"judaica.museum\":1,\"judygarland.museum\":1,\"juedisches.museum\":1,\"juif.museum\":1,\"jur.pro\":1,\"jus.br\":1,\"jx.cn\":1,\"k.bg\":1,\"k.se\":1,\"k12.ak.us\":1,\"k12.al.us\":1,\"k12.ar.us\":1,\"k12.as.us\":1,\"k12.az.us\":1,\"k12.ca.us\":1,\"k12.co.us\":1,\"k12.ct.us\":1,\"k12.dc.us\":1,\"k12.de.us\":1,\"k12.ec\":1,\"k12.fl.us\":1,\"k12.ga.us\":1,\"k12.gu.us\":1,\"k12.ia.us\":1,\"k12.id.us\":1,\"k12.il\":1,\"k12.il.us\":1,\"k12.in.us\":1,\"k12.ks.us\":1,\"k12.ky.us\":1,\"k12.la.us\":1,\"k12.ma.us\":1,\"k12.md.us\":1,\"k12.me.us\":1,\"k12.mi.us\":1,\"k12.mn.us\":1,\"k12.mo.us\":1,\"k12.ms.us\":1,\"k12.mt.us\":1,\"k12.nc.us\":1,\"k12.ne.us\":1,\"k12.nh.us\":1,\"k12.nj.us\":1,\"k12.nm.us\":1,\"k12.nv.us\":1,\"k12.ny.us\":1,\"k12.oh.us\":1,\"k12.ok.us\":1,\"k12.or.us\":1,\"k12.pa.us\":1,\"k12.pr.us\":1,\"k12.sc.us\":1,\"k12.tn.us\":1,\"k12.tr\":1,\"k12.tx.us\":1,\"k12.ut.us\":1,\"k12.va.us\":1,\"k12.vi\":1,\"k12.vi.us\":1,\"k12.vt.us\":1,\"k12.wa.us\":1,\"k12.wi.us\":1,\"k12.wy.us\":1,\"kaas.gg\":1,\"kadena.okinawa.jp\":1,\"kadogawa.miyazaki.jp\":1,\"kadoma.osaka.jp\":1,\"kafjord.no\":1,\"kaga.ishikawa.jp\":1,\"kagami.kochi.jp\":1,\"kagamiishi.fukushima.jp\":1,\"kagamino.okayama.jp\":1,\"kagawa.jp\":1,\"kagoshima.jp\":1,\"kagoshima.kagoshima.jp\":1,\"kaho.fukuoka.jp\":1,\"kahoku.ishikawa.jp\":1,\"kahoku.yamagata.jp\":1,\"kai.yamanashi.jp\":1,\"kainan.tokushima.jp\":1,\"kainan.wakayama.jp\":1,\"kaisei.kanagawa.jp\":1,\"kaita.hiroshima.jp\":1,\"kaizuka.osaka.jp\":1,\"kakamigahara.gifu.jp\":1,\"kakegawa.shizuoka.jp\":1,\"kakinoki.shimane.jp\":1,\"kakogawa.hyogo.jp\":1,\"kakuda.miyagi.jp\":1,\"kalisz.pl\":1,\"kalmykia.ru\":1,\"kalmykia.su\":1,\"kaluga.su\":1,\"kamagaya.chiba.jp\":1,\"kamaishi.iwate.jp\":1,\"kamakura.kanagawa.jp\":1,\"kameoka.kyoto.jp\":1,\"kameyama.mie.jp\":1,\"kami.kochi.jp\":1,\"kami.miyagi.jp\":1,\"kamiamakusa.kumamoto.jp\":1,\"kamifurano.hokkaido.jp\":1,\"kamigori.hyogo.jp\":1,\"kamiichi.toyama.jp\":1,\"kamiizumi.saitama.jp\":1,\"kamijima.ehime.jp\":1,\"kamikawa.hokkaido.jp\":1,\"kamikawa.hyogo.jp\":1,\"kamikawa.saitama.jp\":1,\"kamikitayama.nara.jp\":1,\"kamikoani.akita.jp\":1,\"kamimine.saga.jp\":1,\"kaminokawa.tochigi.jp\":1,\"kaminoyama.yamagata.jp\":1,\"kamioka.akita.jp\":1,\"kamisato.saitama.jp\":1,\"kamishihoro.hokkaido.jp\":1,\"kamisu.ibaraki.jp\":1,\"kamisunagawa.hokkaido.jp\":1,\"kamitonda.wakayama.jp\":1,\"kamitsue.oita.jp\":1,\"kamo.kyoto.jp\":1,\"kamo.niigata.jp\":1,\"kamoenai.hokkaido.jp\":1,\"kamogawa.chiba.jp\":1,\"kanagawa.jp\":1,\"kanan.osaka.jp\":1,\"kanazawa.ishikawa.jp\":1,\"kanegasaki.iwate.jp\":1,\"kaneyama.fukushima.jp\":1,\"kaneyama.yamagata.jp\":1,\"kani.gifu.jp\":1,\"kanie.aichi.jp\":1,\"kanmaki.nara.jp\":1,\"kanna.gunma.jp\":1,\"kannami.shizuoka.jp\":1,\"kanonji.kagawa.jp\":1,\"kanoya.kagoshima.jp\":1,\"kanra.gunma.jp\":1,\"kanuma.tochigi.jp\":1,\"kanzaki.saga.jp\":1,\"karacol.su\":1,\"karaganda.su\":1,\"karasjohka.no\":1,\"karasjok.no\":1,\"karasuyama.tochigi.jp\":1,\"karate.museum\":1,\"karatsu.saga.jp\":1,\"karelia.su\":1,\"karikatur.museum\":1,\"kariwa.niigata.jp\":1,\"kariya.aichi.jp\":1,\"karlsoy.no\":1,\"karmoy.no\":1,\"karpacz.pl\":1,\"kartuzy.pl\":1,\"karuizawa.nagano.jp\":1,\"karumai.iwate.jp\":1,\"kasahara.gifu.jp\":1,\"kasai.hyogo.jp\":1,\"kasama.ibaraki.jp\":1,\"kasamatsu.gifu.jp\":1,\"kasaoka.okayama.jp\":1,\"kashiba.nara.jp\":1,\"kashihara.nara.jp\":1,\"kashima.ibaraki.jp\":1,\"kashima.saga.jp\":1,\"kashiwa.chiba.jp\":1,\"kashiwara.osaka.jp\":1,\"kashiwazaki.niigata.jp\":1,\"kasserver.com\":1,\"kasuga.fukuoka.jp\":1,\"kasuga.hyogo.jp\":1,\"kasugai.aichi.jp\":1,\"kasukabe.saitama.jp\":1,\"kasumigaura.ibaraki.jp\":1,\"kasuya.fukuoka.jp\":1,\"kaszuby.pl\":1,\"katagami.akita.jp\":1,\"katano.osaka.jp\":1,\"katashina.gunma.jp\":1,\"katori.chiba.jp\":1,\"katowice.pl\":1,\"katsuragi.nara.jp\":1,\"katsuragi.wakayama.jp\":1,\"katsushika.tokyo.jp\":1,\"katsuura.chiba.jp\":1,\"katsuyama.fukui.jp\":1,\"kautokeino.no\":1,\"kawaba.gunma.jp\":1,\"kawachinagano.osaka.jp\":1,\"kawagoe.mie.jp\":1,\"kawagoe.saitama.jp\":1,\"kawaguchi.saitama.jp\":1,\"kawahara.tottori.jp\":1,\"kawai.iwate.jp\":1,\"kawai.nara.jp\":1,\"kawajima.saitama.jp\":1,\"kawakami.nagano.jp\":1,\"kawakami.nara.jp\":1,\"kawakita.ishikawa.jp\":1,\"kawamata.fukushima.jp\":1,\"kawaminami.miyazaki.jp\":1,\"kawanabe.kagoshima.jp\":1,\"kawanehon.shizuoka.jp\":1,\"kawanishi.hyogo.jp\":1,\"kawanishi.nara.jp\":1,\"kawanishi.yamagata.jp\":1,\"kawara.fukuoka.jp\":1,\"kawasaki.jp\":2,\"kawasaki.miyagi.jp\":1,\"kawatana.nagasaki.jp\":1,\"kawaue.gifu.jp\":1,\"kawazu.shizuoka.jp\":1,\"kayabe.hokkaido.jp\":1,\"kazimierz-dolny.pl\":1,\"kazo.saitama.jp\":1,\"kazuno.akita.jp\":1,\"keisen.fukuoka.jp\":1,\"kembuchi.hokkaido.jp\":1,\"kep.tr\":1,\"kepno.pl\":1,\"ketrzyn.pl\":1,\"keymachine.de\":1,\"kg.kr\":1,\"kh\":2,\"kh.ua\":1,\"khakassia.su\":1,\"kharkiv.ua\":1,\"kharkov.ua\":1,\"kherson.ua\":1,\"khmelnitskiy.ua\":1,\"khmelnytskyi.ua\":1,\"khplay.nl\":1,\"kibichuo.okayama.jp\":1,\"kicks-ass.net\":1,\"kicks-ass.org\":1,\"kids.museum\":1,\"kids.us\":1,\"kiev.ua\":1,\"kiho.mie.jp\":1,\"kihoku.ehime.jp\":1,\"kijo.miyazaki.jp\":1,\"kikonai.hokkaido.jp\":1,\"kikuchi.kumamoto.jp\":1,\"kikugawa.shizuoka.jp\":1,\"kimino.wakayama.jp\":1,\"kimitsu.chiba.jp\":1,\"kimobetsu.hokkaido.jp\":1,\"kin.okinawa.jp\":1,\"kinghost.net\":1,\"kinko.kagoshima.jp\":1,\"kinokawa.wakayama.jp\":1,\"kira.aichi.jp\":1,\"kirkenes.no\":1,\"kirovograd.ua\":1,\"kiryu.gunma.jp\":1,\"kisarazu.chiba.jp\":1,\"kishiwada.osaka.jp\":1,\"kiso.nagano.jp\":1,\"kisofukushima.nagano.jp\":1,\"kisosaki.mie.jp\":1,\"kita.kyoto.jp\":1,\"kita.osaka.jp\":1,\"kita.tokyo.jp\":1,\"kitaaiki.nagano.jp\":1,\"kitaakita.akita.jp\":1,\"kitadaito.okinawa.jp\":1,\"kitagata.gifu.jp\":1,\"kitagata.saga.jp\":1,\"kitagawa.kochi.jp\":1,\"kitagawa.miyazaki.jp\":1,\"kitahata.saga.jp\":1,\"kitahiroshima.hokkaido.jp\":1,\"kitakami.iwate.jp\":1,\"kitakata.fukushima.jp\":1,\"kitakata.miyazaki.jp\":1,\"kitakyushu.jp\":2,\"kitami.hokkaido.jp\":1,\"kitamoto.saitama.jp\":1,\"kitanakagusuku.okinawa.jp\":1,\"kitashiobara.fukushima.jp\":1,\"kitaura.miyazaki.jp\":1,\"kitayama.wakayama.jp\":1,\"kiwa.mie.jp\":1,\"kiwi.nz\":1,\"kiyama.saga.jp\":1,\"kiyokawa.kanagawa.jp\":1,\"kiyosato.hokkaido.jp\":1,\"kiyose.tokyo.jp\":1,\"kiyosu.aichi.jp\":1,\"kizu.kyoto.jp\":1,\"klabu.no\":1,\"klepp.no\":1,\"klodzko.pl\":1,\"km.ua\":1,\"kmpsp.gov.pl\":1,\"knightpoint.systems\":1,\"knowsitall.info\":1,\"knx-server.net\":1,\"kobayashi.miyazaki.jp\":1,\"kobe.jp\":2,\"kobierzyce.pl\":1,\"kochi.jp\":1,\"kochi.kochi.jp\":1,\"kodaira.tokyo.jp\":1,\"koebenhavn.museum\":1,\"koeln.museum\":1,\"kofu.yamanashi.jp\":1,\"koga.fukuoka.jp\":1,\"koga.ibaraki.jp\":1,\"koganei.tokyo.jp\":1,\"koge.tottori.jp\":1,\"koka.shiga.jp\":1,\"kokonoe.oita.jp\":1,\"kokubunji.tokyo.jp\":1,\"kolobrzeg.pl\":1,\"komae.tokyo.jp\":1,\"komagane.nagano.jp\":1,\"komaki.aichi.jp\":1,\"komatsu.ishikawa.jp\":1,\"komatsushima.tokushima.jp\":1,\"komforb.se\":1,\"kommunalforbund.se\":1,\"kommune.no\":1,\"komono.mie.jp\":1,\"komoro.nagano.jp\":1,\"komvux.se\":1,\"konan.aichi.jp\":1,\"konan.shiga.jp\":1,\"kongsberg.no\":1,\"kongsvinger.no\":1,\"konin.pl\":1,\"konskowola.pl\":1,\"konsulat.gov.pl\":1,\"konyvelo.hu\":1,\"koori.fukushima.jp\":1,\"kopervik.no\":1,\"koriyama.fukushima.jp\":1,\"koryo.nara.jp\":1,\"kosai.shizuoka.jp\":1,\"kosaka.akita.jp\":1,\"kosei.shiga.jp\":1,\"koshigaya.saitama.jp\":1,\"koshimizu.hokkaido.jp\":1,\"koshu.yamanashi.jp\":1,\"kosuge.yamanashi.jp\":1,\"kota.aichi.jp\":1,\"koto.shiga.jp\":1,\"koto.tokyo.jp\":1,\"kotohira.kagawa.jp\":1,\"kotoura.tottori.jp\":1,\"kouhoku.saga.jp\":1,\"kounosu.saitama.jp\":1,\"kouyama.kagoshima.jp\":1,\"kouzushima.tokyo.jp\":1,\"koya.wakayama.jp\":1,\"koza.wakayama.jp\":1,\"kozagawa.wakayama.jp\":1,\"kozaki.chiba.jp\":1,\"kozow.com\":1,\"kppsp.gov.pl\":1,\"kr.com\":1,\"kr.eu.org\":1,\"kr.it\":1,\"kr.ua\":1,\"kraanghke.no\":1,\"kragero.no\":1,\"krakow.pl\":1,\"krasnik.pl\":1,\"krasnodar.su\":1,\"kristiansand.no\":1,\"kristiansund.no\":1,\"krodsherad.no\":1,\"krokstadelva.no\":1,\"krym.ua\":1,\"ks.ua\":1,\"ks.us\":1,\"kuchinotsu.nagasaki.jp\":1,\"kudamatsu.yamaguchi.jp\":1,\"kudoyama.wakayama.jp\":1,\"kui.hiroshima.jp\":1,\"kuji.iwate.jp\":1,\"kuju.oita.jp\":1,\"kujukuri.chiba.jp\":1,\"kuki.saitama.jp\":1,\"kumagaya.saitama.jp\":1,\"kumakogen.ehime.jp\":1,\"kumamoto.jp\":1,\"kumamoto.kumamoto.jp\":1,\"kumano.hiroshima.jp\":1,\"kumano.mie.jp\":1,\"kumatori.osaka.jp\":1,\"kumejima.okinawa.jp\":1,\"kumenan.okayama.jp\":1,\"kumiyama.kyoto.jp\":1,\"kunden.ortsinfo.at\":2,\"kunigami.okinawa.jp\":1,\"kunimi.fukushima.jp\":1,\"kunisaki.oita.jp\":1,\"kunitachi.tokyo.jp\":1,\"kunitomi.miyazaki.jp\":1,\"kunneppu.hokkaido.jp\":1,\"kunohe.iwate.jp\":1,\"kunst.museum\":1,\"kunstsammlung.museum\":1,\"kunstunddesign.museum\":1,\"kurashiki.okayama.jp\":1,\"kurate.fukuoka.jp\":1,\"kure.hiroshima.jp\":1,\"kurgan.su\":1,\"kuriyama.hokkaido.jp\":1,\"kurobe.toyama.jp\":1,\"kurogi.fukuoka.jp\":1,\"kuroishi.aomori.jp\":1,\"kuroiso.tochigi.jp\":1,\"kuromatsunai.hokkaido.jp\":1,\"kurotaki.nara.jp\":1,\"kurume.fukuoka.jp\":1,\"kusatsu.gunma.jp\":1,\"kusatsu.shiga.jp\":1,\"kushima.miyazaki.jp\":1,\"kushimoto.wakayama.jp\":1,\"kushiro.hokkaido.jp\":1,\"kustanai.ru\":1,\"kustanai.su\":1,\"kusu.oita.jp\":1,\"kutchan.hokkaido.jp\":1,\"kutno.pl\":1,\"kuwana.mie.jp\":1,\"kuzumaki.iwate.jp\":1,\"kv.ua\":1,\"kvafjord.no\":1,\"kvalsund.no\":1,\"kvam.no\":1,\"kvanangen.no\":1,\"kvinesdal.no\":1,\"kvinnherad.no\":1,\"kviteseid.no\":1,\"kvitsoy.no\":1,\"kwp.gov.pl\":1,\"kwpsp.gov.pl\":1,\"ky.us\":1,\"kyiv.ua\":1,\"kyonan.chiba.jp\":1,\"kyotamba.kyoto.jp\":1,\"kyotanabe.kyoto.jp\":1,\"kyotango.kyoto.jp\":1,\"kyoto.jp\":1,\"kyowa.akita.jp\":1,\"kyowa.hokkaido.jp\":1,\"kyuragi.saga.jp\":1,\"l-o-g-i-n.de\":1,\"l.bg\":1,\"l.se\":1,\"la-spezia.it\":1,\"la.us\":1,\"laakesvuemie.no\":1,\"lab.ms\":1,\"labor.museum\":1,\"labour.museum\":1,\"lahppi.no\":1,\"lajolla.museum\":1,\"lakas.hu\":1,\"lanbib.se\":1,\"lancashire.museum\":1,\"land-4-sale.us\":1,\"landes.museum\":1,\"landing.myjino.ru\":2,\"langevag.no\":1,\"lans.museum\":1,\"lapy.pl\":1,\"laquila.it\":1,\"lardal.no\":1,\"larsson.museum\":1,\"larvik.no\":1,\"laspezia.it\":1,\"latina.it\":1,\"lavagis.no\":1,\"lavangen.no\":1,\"law.pro\":1,\"law.za\":1,\"laz.it\":1,\"lazio.it\":1,\"lc.it\":1,\"lcl.dev\":2,\"lcube-server.de\":1,\"le.it\":1,\"leadpages.co\":1,\"leangaviika.no\":1,\"leasing.aero\":1,\"lebesby.no\":1,\"lebork.pl\":1,\"lebtimnetz.de\":1,\"lecce.it\":1,\"lecco.it\":1,\"leczna.pl\":1,\"leg.br\":1,\"legnica.pl\":1,\"leikanger.no\":1,\"leirfjord.no\":1,\"leirvik.no\":1,\"leitungsen.de\":1,\"leka.no\":1,\"leksvik.no\":1,\"lel.br\":1,\"lelux.site\":1,\"lenug.su\":1,\"lenvik.no\":1,\"lerdal.no\":1,\"lesja.no\":1,\"levanger.no\":1,\"lewismiller.museum\":1,\"lezajsk.pl\":1,\"lg.jp\":1,\"lg.ua\":1,\"li.it\":1,\"lib.ak.us\":1,\"lib.al.us\":1,\"lib.ar.us\":1,\"lib.as.us\":1,\"lib.az.us\":1,\"lib.ca.us\":1,\"lib.co.us\":1,\"lib.ct.us\":1,\"lib.dc.us\":1,\"lib.de.us\":1,\"lib.ee\":1,\"lib.fl.us\":1,\"lib.ga.us\":1,\"lib.gu.us\":1,\"lib.hi.us\":1,\"lib.ia.us\":1,\"lib.id.us\":1,\"lib.il.us\":1,\"lib.in.us\":1,\"lib.ks.us\":1,\"lib.ky.us\":1,\"lib.la.us\":1,\"lib.ma.us\":1,\"lib.md.us\":1,\"lib.me.us\":1,\"lib.mi.us\":1,\"lib.mn.us\":1,\"lib.mo.us\":1,\"lib.ms.us\":1,\"lib.mt.us\":1,\"lib.nc.us\":1,\"lib.nd.us\":1,\"lib.ne.us\":1,\"lib.nh.us\":1,\"lib.nj.us\":1,\"lib.nm.us\":1,\"lib.nv.us\":1,\"lib.ny.us\":1,\"lib.oh.us\":1,\"lib.ok.us\":1,\"lib.or.us\":1,\"lib.pa.us\":1,\"lib.pr.us\":1,\"lib.ri.us\":1,\"lib.sc.us\":1,\"lib.sd.us\":1,\"lib.tn.us\":1,\"lib.tx.us\":1,\"lib.ut.us\":1,\"lib.va.us\":1,\"lib.vi.us\":1,\"lib.vt.us\":1,\"lib.wa.us\":1,\"lib.wi.us\":1,\"lib.wy.us\":1,\"lier.no\":1,\"lierne.no\":1,\"lig.it\":1,\"liguria.it\":1,\"likes-pie.com\":1,\"likescandy.com\":1,\"lillehammer.no\":1,\"lillesand.no\":1,\"lima-city.at\":1,\"lima-city.ch\":1,\"lima-city.de\":1,\"lima-city.rocks\":1,\"lima.zone\":1,\"limanowa.pl\":1,\"lincoln.museum\":1,\"lindas.no\":1,\"lindesnes.no\":1,\"linkitools.space\":1,\"linkyard-cloud.ch\":1,\"linkyard.cloud\":1,\"linodeobjects.com\":2,\"linz.museum\":1,\"living.museum\":1,\"livinghistory.museum\":1,\"livorno.it\":1,\"ln.cn\":1,\"lo.it\":1,\"loabat.no\":1,\"localhistory.museum\":1,\"localhost.daplie.me\":1,\"lodi.it\":1,\"lodingen.no\":1,\"log.br\":1,\"loginline.app\":1,\"loginline.dev\":1,\"loginline.io\":1,\"loginline.services\":1,\"loginline.site\":1,\"loginto.me\":1,\"logistics.aero\":1,\"logoip.com\":1,\"logoip.de\":1,\"lolipop.io\":1,\"lom.it\":1,\"lom.no\":1,\"lombardia.it\":1,\"lombardy.it\":1,\"lomza.pl\":1,\"london.cloudapps.digital\":1,\"london.museum\":1,\"londrina.br\":1,\"loppa.no\":1,\"lorenskog.no\":1,\"losangeles.museum\":1,\"loseyourip.com\":1,\"loten.no\":1,\"louvre.museum\":1,\"lowicz.pl\":1,\"loyalist.museum\":1,\"lpages.co\":1,\"lpusercontent.com\":1,\"lt.eu.org\":1,\"lt.it\":1,\"lt.ua\":1,\"ltd.co.im\":1,\"ltd.cy\":1,\"ltd.gi\":1,\"ltd.hk\":1,\"ltd.lk\":1,\"ltd.ng\":1,\"ltd.ua\":1,\"ltd.uk\":1,\"lu.eu.org\":1,\"lu.it\":1,\"lubartow.pl\":1,\"lubin.pl\":1,\"lublin.pl\":1,\"lucania.it\":1,\"lucca.it\":1,\"lucerne.museum\":1,\"lug.org.uk\":1,\"lugansk.ua\":1,\"lugs.org.uk\":1,\"lukow.pl\":1,\"lund.no\":1,\"lunner.no\":1,\"luroy.no\":1,\"luster.no\":1,\"lutsk.ua\":1,\"luxembourg.museum\":1,\"luzern.museum\":1,\"lv.eu.org\":1,\"lv.ua\":1,\"lviv.ua\":1,\"lyngdal.no\":1,\"lyngen.no\":1,\"lynx.mythic-beasts.com\":1,\"m.bg\":1,\"m.se\":1,\"ma.gov.br\":1,\"ma.leg.br\":1,\"ma.us\":1,\"macapa.br\":1,\"maceio.br\":1,\"macerata.it\":1,\"machida.tokyo.jp\":1,\"mad.museum\":1,\"madrid.museum\":1,\"maebashi.gunma.jp\":1,\"magazine.aero\":1,\"magentosite.cloud\":2,\"maibara.shiga.jp\":1,\"mail.pl\":1,\"maintenance.aero\":1,\"maizuru.kyoto.jp\":1,\"makinohara.shizuoka.jp\":1,\"makurazaki.kagoshima.jp\":1,\"malatvuopmi.no\":1,\"malbork.pl\":1,\"mallorca.museum\":1,\"malopolska.pl\":1,\"malselv.no\":1,\"malvik.no\":1,\"mamurogawa.yamagata.jp\":1,\"manaus.br\":1,\"manchester.museum\":1,\"mandal.no\":1,\"mangyshlak.su\":1,\"maniwa.okayama.jp\":1,\"manno.kagawa.jp\":1,\"mansion.museum\":1,\"mansions.museum\":1,\"mantova.it\":1,\"manx.museum\":1,\"maori.nz\":1,\"map.fastly.net\":1,\"map.fastlylb.net\":1,\"mar.it\":1,\"marburg.museum\":1,\"marche.it\":1,\"marine.ru\":1,\"maringa.br\":1,\"maritime.museum\":1,\"maritimo.museum\":1,\"marker.no\":1,\"marnardal.no\":1,\"marugame.kagawa.jp\":1,\"marumori.miyagi.jp\":1,\"maryland.museum\":1,\"marylhurst.museum\":1,\"masaki.ehime.jp\":1,\"masfjorden.no\":1,\"mashike.hokkaido.jp\":1,\"mashiki.kumamoto.jp\":1,\"mashiko.tochigi.jp\":1,\"masoy.no\":1,\"massa-carrara.it\":1,\"massacarrara.it\":1,\"masuda.shimane.jp\":1,\"mat.br\":1,\"matera.it\":1,\"matsubara.osaka.jp\":1,\"matsubushi.saitama.jp\":1,\"matsuda.kanagawa.jp\":1,\"matsudo.chiba.jp\":1,\"matsue.shimane.jp\":1,\"matsukawa.nagano.jp\":1,\"matsumae.hokkaido.jp\":1,\"matsumoto.kagoshima.jp\":1,\"matsumoto.nagano.jp\":1,\"matsuno.ehime.jp\":1,\"matsusaka.mie.jp\":1,\"matsushige.tokushima.jp\":1,\"matsushima.miyagi.jp\":1,\"matsuura.nagasaki.jp\":1,\"matsuyama.ehime.jp\":1,\"matsuzaki.shizuoka.jp\":1,\"matta-varjjat.no\":1,\"mayfirst.info\":1,\"mayfirst.org\":1,\"mazowsze.pl\":1,\"mazury.pl\":1,\"mb.ca\":1,\"mb.it\":1,\"mc.ax\":1,\"mc.eu.org\":1,\"mc.it\":1,\"mcdir.ru\":1,\"mcpe.me\":1,\"md.ci\":1,\"md.us\":1,\"me.eu.org\":1,\"me.it\":1,\"me.ke\":1,\"me.so\":1,\"me.tc\":1,\"me.tz\":1,\"me.uk\":1,\"me.us\":1,\"me.vu\":1,\"med.br\":1,\"med.ec\":1,\"med.ee\":1,\"med.ht\":1,\"med.ly\":1,\"med.om\":1,\"med.pa\":1,\"med.pl\":1,\"med.pro\":1,\"med.sa\":1,\"med.sd\":1,\"medecin.fr\":1,\"medecin.km\":1,\"media.aero\":1,\"media.hu\":1,\"media.museum\":1,\"media.pl\":1,\"medical.museum\":1,\"medicina.bo\":1,\"medio-campidano.it\":1,\"mediocampidano.it\":1,\"medizinhistorisches.museum\":1,\"meeres.museum\":1,\"meguro.tokyo.jp\":1,\"mein-iserv.de\":1,\"mein-vigor.de\":1,\"meinforum.net\":1,\"meiwa.gunma.jp\":1,\"meiwa.mie.jp\":1,\"meland.no\":1,\"meldal.no\":1,\"melhus.no\":1,\"meloy.no\":1,\"members.linode.com\":1,\"memorial.museum\":1,\"memset.net\":1,\"meraker.no\":1,\"merseine.nu\":1,\"mesaverde.museum\":1,\"messina.it\":1,\"meteorapp.com\":1,\"mex.com\":1,\"mg.gov.br\":1,\"mg.leg.br\":1,\"mi.it\":1,\"mi.th\":1,\"mi.us\":1,\"miasa.nagano.jp\":1,\"miasta.pl\":1,\"mibu.tochigi.jp\":1,\"michigan.museum\":1,\"microlight.aero\":1,\"midatlantic.museum\":1,\"midori.chiba.jp\":1,\"midori.gunma.jp\":1,\"midsund.no\":1,\"midtre-gauldal.no\":1,\"mie.jp\":1,\"mielec.pl\":1,\"mielno.pl\":1,\"mifune.kumamoto.jp\":1,\"mihama.aichi.jp\":1,\"mihama.chiba.jp\":1,\"mihama.fukui.jp\":1,\"mihama.mie.jp\":1,\"mihama.wakayama.jp\":1,\"mihara.hiroshima.jp\":1,\"mihara.kochi.jp\":1,\"miharu.fukushima.jp\":1,\"miho.ibaraki.jp\":1,\"mikasa.hokkaido.jp\":1,\"mikawa.yamagata.jp\":1,\"miki.hyogo.jp\":1,\"mil.ac\":1,\"mil.ae\":1,\"mil.al\":1,\"mil.ar\":1,\"mil.az\":1,\"mil.ba\":1,\"mil.bo\":1,\"mil.br\":1,\"mil.by\":1,\"mil.cl\":1,\"mil.cn\":1,\"mil.co\":1,\"mil.do\":1,\"mil.ec\":1,\"mil.eg\":1,\"mil.fj\":1,\"mil.ge\":1,\"mil.gh\":1,\"mil.gt\":1,\"mil.hn\":1,\"mil.id\":1,\"mil.in\":1,\"mil.iq\":1,\"mil.jo\":1,\"mil.kg\":1,\"mil.km\":1,\"mil.kr\":1,\"mil.kz\":1,\"mil.lv\":1,\"mil.mg\":1,\"mil.mv\":1,\"mil.my\":1,\"mil.mz\":1,\"mil.ng\":1,\"mil.ni\":1,\"mil.no\":1,\"mil.nz\":1,\"mil.pe\":1,\"mil.ph\":1,\"mil.pl\":1,\"mil.py\":1,\"mil.qa\":1,\"mil.ru\":1,\"mil.rw\":1,\"mil.sh\":1,\"mil.st\":1,\"mil.sy\":1,\"mil.tj\":1,\"mil.tm\":1,\"mil.to\":1,\"mil.tr\":1,\"mil.tw\":1,\"mil.tz\":1,\"mil.uy\":1,\"mil.vc\":1,\"mil.ve\":1,\"mil.za\":1,\"mil.zm\":1,\"mil.zw\":1,\"milan.it\":1,\"milano.it\":1,\"military.museum\":1,\"mill.museum\":1,\"mima.tokushima.jp\":1,\"mimata.miyazaki.jp\":1,\"minakami.gunma.jp\":1,\"minamata.kumamoto.jp\":1,\"minami-alps.yamanashi.jp\":1,\"minami.fukuoka.jp\":1,\"minami.kyoto.jp\":1,\"minami.tokushima.jp\":1,\"minamiaiki.nagano.jp\":1,\"minamiashigara.kanagawa.jp\":1,\"minamiawaji.hyogo.jp\":1,\"minamiboso.chiba.jp\":1,\"minamidaito.okinawa.jp\":1,\"minamiechizen.fukui.jp\":1,\"minamifurano.hokkaido.jp\":1,\"minamiise.mie.jp\":1,\"minamiizu.shizuoka.jp\":1,\"minamimaki.nagano.jp\":1,\"minamiminowa.nagano.jp\":1,\"minamioguni.kumamoto.jp\":1,\"minamisanriku.miyagi.jp\":1,\"minamitane.kagoshima.jp\":1,\"minamiuonuma.niigata.jp\":1,\"minamiyamashiro.kyoto.jp\":1,\"minano.saitama.jp\":1,\"minato.osaka.jp\":1,\"minato.tokyo.jp\":1,\"mincom.tn\":1,\"mine.nu\":1,\"miners.museum\":1,\"mining.museum\":1,\"miniserver.com\":1,\"minnesota.museum\":1,\"mino.gifu.jp\":1,\"minobu.yamanashi.jp\":1,\"minoh.osaka.jp\":1,\"minokamo.gifu.jp\":1,\"minowa.nagano.jp\":1,\"mintere.site\":1,\"mircloud.host\":1,\"misaki.okayama.jp\":1,\"misaki.osaka.jp\":1,\"misasa.tottori.jp\":1,\"misato.akita.jp\":1,\"misato.miyagi.jp\":1,\"misato.saitama.jp\":1,\"misato.shimane.jp\":1,\"misato.wakayama.jp\":1,\"misawa.aomori.jp\":1,\"misconfused.org\":1,\"mishima.fukushima.jp\":1,\"mishima.shizuoka.jp\":1,\"missile.museum\":1,\"missoula.museum\":1,\"misugi.mie.jp\":1,\"mitaka.tokyo.jp\":1,\"mitake.gifu.jp\":1,\"mitane.akita.jp\":1,\"mito.ibaraki.jp\":1,\"mitou.yamaguchi.jp\":1,\"mitoyo.kagawa.jp\":1,\"mitsue.nara.jp\":1,\"mitsuke.niigata.jp\":1,\"miura.kanagawa.jp\":1,\"miyada.nagano.jp\":1,\"miyagi.jp\":1,\"miyake.nara.jp\":1,\"miyako.fukuoka.jp\":1,\"miyako.iwate.jp\":1,\"miyakonojo.miyazaki.jp\":1,\"miyama.fukuoka.jp\":1,\"miyama.mie.jp\":1,\"miyashiro.saitama.jp\":1,\"miyawaka.fukuoka.jp\":1,\"miyazaki.jp\":1,\"miyazaki.miyazaki.jp\":1,\"miyazu.kyoto.jp\":1,\"miyoshi.aichi.jp\":1,\"miyoshi.hiroshima.jp\":1,\"miyoshi.saitama.jp\":1,\"miyoshi.tokushima.jp\":1,\"miyota.nagano.jp\":1,\"mizuho.tokyo.jp\":1,\"mizumaki.fukuoka.jp\":1,\"mizunami.gifu.jp\":1,\"mizusawa.iwate.jp\":1,\"mjondalen.no\":1,\"mk.eu.org\":1,\"mk.ua\":1,\"mlbfan.org\":1,\"mm\":2,\"mmafan.biz\":1,\"mn.it\":1,\"mn.us\":1,\"mo-i-rana.no\":1,\"mo-siemens.io\":1,\"mo.cn\":1,\"mo.it\":1,\"mo.us\":1,\"moareke.no\":1,\"mobara.chiba.jp\":1,\"mobi.gp\":1,\"mobi.ke\":1,\"mobi.na\":1,\"mobi.ng\":1,\"mobi.tt\":1,\"mobi.tz\":1,\"mochizuki.nagano.jp\":1,\"mod.gi\":1,\"modalen.no\":1,\"modelling.aero\":1,\"modena.it\":1,\"modern.museum\":1,\"modum.no\":1,\"moka.tochigi.jp\":1,\"mol.it\":1,\"molde.no\":1,\"molise.it\":1,\"moma.museum\":1,\"mombetsu.hokkaido.jp\":1,\"money.museum\":1,\"monmouth.museum\":1,\"monticello.museum\":1,\"montreal.museum\":1,\"monza-brianza.it\":1,\"monza-e-della-brianza.it\":1,\"monza.it\":1,\"monzabrianza.it\":1,\"monzaebrianza.it\":1,\"monzaedellabrianza.it\":1,\"moonscale.io\":2,\"moonscale.net\":1,\"mordovia.ru\":1,\"mordovia.su\":1,\"morena.br\":1,\"moriguchi.osaka.jp\":1,\"morimachi.shizuoka.jp\":1,\"morioka.iwate.jp\":1,\"moriya.ibaraki.jp\":1,\"moriyama.shiga.jp\":1,\"moriyoshi.akita.jp\":1,\"morotsuka.miyazaki.jp\":1,\"moroyama.saitama.jp\":1,\"moscow.museum\":1,\"moseushi.hokkaido.jp\":1,\"mosjoen.no\":1,\"moskenes.no\":1,\"moss.no\":1,\"mosvik.no\":1,\"motegi.tochigi.jp\":1,\"motobu.okinawa.jp\":1,\"motorcycle.museum\":1,\"motosu.gifu.jp\":1,\"motoyama.kochi.jp\":1,\"movimiento.bo\":1,\"mozilla-iot.org\":1,\"mp.br\":1,\"mr.no\":1,\"mragowo.pl\":1,\"ms.gov.br\":1,\"ms.it\":1,\"ms.kr\":1,\"ms.leg.br\":1,\"ms.us\":1,\"msk.ru\":1,\"msk.su\":1,\"mt.eu.org\":1,\"mt.gov.br\":1,\"mt.it\":1,\"mt.leg.br\":1,\"mt.us\":1,\"muenchen.museum\":1,\"muenster.museum\":1,\"mugi.tokushima.jp\":1,\"muika.niigata.jp\":1,\"mukawa.hokkaido.jp\":1,\"muko.kyoto.jp\":1,\"mulhouse.museum\":1,\"munakata.fukuoka.jp\":1,\"muncie.museum\":1,\"muni.il\":1,\"muosat.no\":1,\"mup.gov.pl\":1,\"murakami.niigata.jp\":1,\"murata.miyagi.jp\":1,\"murayama.yamagata.jp\":1,\"murmansk.su\":1,\"muroran.hokkaido.jp\":1,\"muroto.kochi.jp\":1,\"mus.br\":1,\"mus.mi.us\":1,\"musashimurayama.tokyo.jp\":1,\"musashino.tokyo.jp\":1,\"museet.museum\":1,\"museum.mv\":1,\"museum.mw\":1,\"museum.no\":1,\"museum.om\":1,\"museum.tt\":1,\"museumcenter.museum\":1,\"museumvereniging.museum\":1,\"music.museum\":1,\"musica.ar\":1,\"musica.bo\":1,\"mutsu.aomori.jp\":1,\"mutsuzawa.chiba.jp\":1,\"mw.gov.pl\":1,\"mx.na\":1,\"my-firewall.org\":1,\"my-gateway.de\":1,\"my-router.de\":1,\"my-vigor.de\":1,\"my-wan.de\":1,\"my.eu.org\":1,\"my.id\":1,\"myactivedirectory.com\":1,\"myasustor.com\":1,\"mycd.eu\":1,\"mydatto.com\":1,\"mydatto.net\":1,\"myddns.rocks\":1,\"mydissent.net\":1,\"mydobiss.com\":1,\"mydrobo.com\":1,\"myds.me\":1,\"myeffect.net\":1,\"myfast.host\":1,\"myfast.space\":1,\"myfirewall.org\":1,\"myforum.community\":1,\"myfritz.net\":1,\"myftp.biz\":1,\"myftp.org\":1,\"myhome-server.de\":1,\"myiphost.com\":1,\"myjino.ru\":1,\"mykolaiv.ua\":1,\"mymailer.com.tw\":1,\"mymediapc.net\":1,\"myoko.niigata.jp\":1,\"mypep.link\":1,\"mypets.ws\":1,\"myphotos.cc\":1,\"mypi.co\":1,\"mypsx.net\":1,\"myqnapcloud.com\":1,\"myravendb.com\":1,\"mysecuritycamera.com\":1,\"mysecuritycamera.net\":1,\"mysecuritycamera.org\":1,\"myshopblocks.com\":1,\"mytis.ru\":1,\"mytuleap.com\":1,\"myvnc.com\":1,\"mywire.org\":1,\"n.bg\":1,\"n.se\":1,\"n4t.co\":1,\"na.it\":1,\"na4u.ru\":1,\"naamesjevuemie.no\":1,\"nabari.mie.jp\":1,\"nachikatsuura.wakayama.jp\":1,\"nagahama.shiga.jp\":1,\"nagai.yamagata.jp\":1,\"nagano.jp\":1,\"nagano.nagano.jp\":1,\"naganohara.gunma.jp\":1,\"nagaoka.niigata.jp\":1,\"nagaokakyo.kyoto.jp\":1,\"nagara.chiba.jp\":1,\"nagareyama.chiba.jp\":1,\"nagasaki.jp\":1,\"nagasaki.nagasaki.jp\":1,\"nagasu.kumamoto.jp\":1,\"nagato.yamaguchi.jp\":1,\"nagatoro.saitama.jp\":1,\"nagawa.nagano.jp\":1,\"nagi.okayama.jp\":1,\"nagiso.nagano.jp\":1,\"nago.okinawa.jp\":1,\"nagoya.jp\":2,\"naha.okinawa.jp\":1,\"nahari.kochi.jp\":1,\"naie.hokkaido.jp\":1,\"naka.hiroshima.jp\":1,\"naka.ibaraki.jp\":1,\"nakadomari.aomori.jp\":1,\"nakagawa.fukuoka.jp\":1,\"nakagawa.hokkaido.jp\":1,\"nakagawa.nagano.jp\":1,\"nakagawa.tokushima.jp\":1,\"nakagusuku.okinawa.jp\":1,\"nakagyo.kyoto.jp\":1,\"nakai.kanagawa.jp\":1,\"nakama.fukuoka.jp\":1,\"nakamichi.yamanashi.jp\":1,\"nakamura.kochi.jp\":1,\"nakaniikawa.toyama.jp\":1,\"nakano.nagano.jp\":1,\"nakano.tokyo.jp\":1,\"nakanojo.gunma.jp\":1,\"nakanoto.ishikawa.jp\":1,\"nakasatsunai.hokkaido.jp\":1,\"nakatane.kagoshima.jp\":1,\"nakatombetsu.hokkaido.jp\":1,\"nakatsugawa.gifu.jp\":1,\"nakayama.yamagata.jp\":1,\"nakijin.okinawa.jp\":1,\"naklo.pl\":1,\"nalchik.ru\":1,\"nalchik.su\":1,\"namdalseid.no\":1,\"name.az\":1,\"name.cy\":1,\"name.eg\":1,\"name.et\":1,\"name.fj\":1,\"name.hr\":1,\"name.jo\":1,\"name.mk\":1,\"name.mv\":1,\"name.my\":1,\"name.na\":1,\"name.ng\":1,\"name.pr\":1,\"name.qa\":1,\"name.tj\":1,\"name.tr\":1,\"name.tt\":1,\"name.vn\":1,\"namegata.ibaraki.jp\":1,\"namegawa.saitama.jp\":1,\"namerikawa.toyama.jp\":1,\"namie.fukushima.jp\":1,\"namikata.ehime.jp\":1,\"namsos.no\":1,\"namsskogan.no\":1,\"nanae.hokkaido.jp\":1,\"nanao.ishikawa.jp\":1,\"nanbu.tottori.jp\":1,\"nanbu.yamanashi.jp\":1,\"nango.fukushima.jp\":1,\"nanjo.okinawa.jp\":1,\"nankoku.kochi.jp\":1,\"nanmoku.gunma.jp\":1,\"nannestad.no\":1,\"nanporo.hokkaido.jp\":1,\"nantan.kyoto.jp\":1,\"nanto.toyama.jp\":1,\"nanyo.yamagata.jp\":1,\"naoshima.kagawa.jp\":1,\"naples.it\":1,\"napoli.it\":1,\"nara.jp\":1,\"nara.nara.jp\":1,\"narashino.chiba.jp\":1,\"narita.chiba.jp\":1,\"naroy.no\":1,\"narusawa.yamanashi.jp\":1,\"naruto.tokushima.jp\":1,\"narviika.no\":1,\"narvik.no\":1,\"nasu.tochigi.jp\":1,\"nasushiobara.tochigi.jp\":1,\"nat.tn\":1,\"natal.br\":1,\"national.museum\":1,\"nationalfirearms.museum\":1,\"nationalheritage.museum\":1,\"nativeamerican.museum\":1,\"natori.miyagi.jp\":1,\"natural.bo\":1,\"naturalhistory.museum\":1,\"naturalhistorymuseum.museum\":1,\"naturalsciences.museum\":1,\"naturbruksgymn.se\":1,\"nature.museum\":1,\"naturhistorisches.museum\":1,\"natuurwetenschappen.museum\":1,\"naumburg.museum\":1,\"naustdal.no\":1,\"naval.museum\":1,\"navigation.aero\":1,\"navoi.su\":1,\"navuotna.no\":1,\"nayoro.hokkaido.jp\":1,\"nb.ca\":1,\"nc.tr\":1,\"nc.us\":1,\"nctu.me\":1,\"nd.us\":1,\"ne.jp\":1,\"ne.ke\":1,\"ne.kr\":1,\"ne.pw\":1,\"ne.tz\":1,\"ne.ug\":1,\"ne.us\":1,\"neat-url.com\":1,\"nebraska.museum\":1,\"nedre-eiker.no\":1,\"neko.am\":1,\"nemuro.hokkaido.jp\":1,\"nerdpol.ovh\":1,\"nerima.tokyo.jp\":1,\"nes.akershus.no\":1,\"nes.buskerud.no\":1,\"nesna.no\":1,\"nesodden.no\":1,\"nesoddtangen.no\":1,\"nesseby.no\":1,\"nesset.no\":1,\"net-freaks.com\":1,\"net.ac\":1,\"net.ae\":1,\"net.af\":1,\"net.ag\":1,\"net.ai\":1,\"net.al\":1,\"net.am\":1,\"net.ar\":1,\"net.au\":1,\"net.az\":1,\"net.ba\":1,\"net.bb\":1,\"net.bh\":1,\"net.bm\":1,\"net.bn\":1,\"net.bo\":1,\"net.br\":1,\"net.bs\":1,\"net.bt\":1,\"net.bz\":1,\"net.ci\":1,\"net.cm\":1,\"net.cn\":1,\"net.co\":1,\"net.cu\":1,\"net.cw\":1,\"net.cy\":1,\"net.dm\":1,\"net.do\":1,\"net.dz\":1,\"net.ec\":1,\"net.eg\":1,\"net.et\":1,\"net.eu.org\":1,\"net.fj\":1,\"net.fm\":1,\"net.ge\":1,\"net.gg\":1,\"net.gl\":1,\"net.gn\":1,\"net.gp\":1,\"net.gr\":1,\"net.gt\":1,\"net.gu\":1,\"net.gy\":1,\"net.hk\":1,\"net.hn\":1,\"net.ht\":1,\"net.id\":1,\"net.il\":1,\"net.im\":1,\"net.in\":1,\"net.iq\":1,\"net.ir\":1,\"net.is\":1,\"net.je\":1,\"net.jo\":1,\"net.kg\":1,\"net.ki\":1,\"net.kn\":1,\"net.kw\":1,\"net.ky\":1,\"net.kz\":1,\"net.la\":1,\"net.lb\":1,\"net.lc\":1,\"net.lk\":1,\"net.lr\":1,\"net.ls\":1,\"net.lv\":1,\"net.ly\":1,\"net.ma\":1,\"net.me\":1,\"net.mk\":1,\"net.ml\":1,\"net.mo\":1,\"net.ms\":1,\"net.mt\":1,\"net.mu\":1,\"net.mv\":1,\"net.mw\":1,\"net.mx\":1,\"net.my\":1,\"net.mz\":1,\"net.nf\":1,\"net.ng\":1,\"net.ni\":1,\"net.nr\":1,\"net.nz\":1,\"net.om\":1,\"net.pa\":1,\"net.pe\":1,\"net.ph\":1,\"net.pk\":1,\"net.pl\":1,\"net.pn\":1,\"net.pr\":1,\"net.ps\":1,\"net.pt\":1,\"net.py\":1,\"net.qa\":1,\"net.ru\":1,\"net.rw\":1,\"net.sa\":1,\"net.sb\":1,\"net.sc\":1,\"net.sd\":1,\"net.sg\":1,\"net.sh\":1,\"net.sl\":1,\"net.so\":1,\"net.ss\":1,\"net.st\":1,\"net.sy\":1,\"net.th\":1,\"net.tj\":1,\"net.tm\":1,\"net.tn\":1,\"net.to\":1,\"net.tr\":1,\"net.tt\":1,\"net.tw\":1,\"net.ua\":1,\"net.uk\":1,\"net.uy\":1,\"net.uz\":1,\"net.vc\":1,\"net.ve\":1,\"net.vi\":1,\"net.vn\":1,\"net.vu\":1,\"net.ws\":1,\"net.za\":1,\"net.zm\":1,\"netlify.app\":1,\"neues.museum\":1,\"newhampshire.museum\":1,\"newjersey.museum\":1,\"newmexico.museum\":1,\"newport.museum\":1,\"news.hu\":1,\"newspaper.museum\":1,\"newyork.museum\":1,\"neyagawa.osaka.jp\":1,\"nf.ca\":1,\"nflfan.org\":1,\"nfshost.com\":1,\"ng.city\":1,\"ng.eu.org\":1,\"ng.ink\":1,\"ng.school\":1,\"ngo.lk\":1,\"ngo.ng\":1,\"ngo.ph\":1,\"ngo.za\":1,\"ngrok.io\":1,\"nh-serv.co.uk\":1,\"nh.us\":1,\"nhlfan.net\":1,\"nhs.uk\":1,\"nic.in\":1,\"nic.tj\":1,\"nic.za\":1,\"nichinan.miyazaki.jp\":1,\"nichinan.tottori.jp\":1,\"nid.io\":1,\"niepce.museum\":1,\"nieruchomosci.pl\":1,\"niigata.jp\":1,\"niigata.niigata.jp\":1,\"niihama.ehime.jp\":1,\"niikappu.hokkaido.jp\":1,\"niimi.okayama.jp\":1,\"niiza.saitama.jp\":1,\"nikaho.akita.jp\":1,\"niki.hokkaido.jp\":1,\"nikko.tochigi.jp\":1,\"nikolaev.ua\":1,\"ninohe.iwate.jp\":1,\"ninomiya.kanagawa.jp\":1,\"nirasaki.yamanashi.jp\":1,\"nis.za\":1,\"nishi.fukuoka.jp\":1,\"nishi.osaka.jp\":1,\"nishiaizu.fukushima.jp\":1,\"nishiarita.saga.jp\":1,\"nishiawakura.okayama.jp\":1,\"nishiazai.shiga.jp\":1,\"nishigo.fukushima.jp\":1,\"nishihara.kumamoto.jp\":1,\"nishihara.okinawa.jp\":1,\"nishiizu.shizuoka.jp\":1,\"nishikata.tochigi.jp\":1,\"nishikatsura.yamanashi.jp\":1,\"nishikawa.yamagata.jp\":1,\"nishimera.miyazaki.jp\":1,\"nishinomiya.hyogo.jp\":1,\"nishinoomote.kagoshima.jp\":1,\"nishinoshima.shimane.jp\":1,\"nishio.aichi.jp\":1,\"nishiokoppe.hokkaido.jp\":1,\"nishitosa.kochi.jp\":1,\"nishiwaki.hyogo.jp\":1,\"nissedal.no\":1,\"nisshin.aichi.jp\":1,\"niteroi.br\":1,\"nittedal.no\":1,\"niyodogawa.kochi.jp\":1,\"nj.us\":1,\"nl.ca\":1,\"nl.ci\":1,\"nl.eu.org\":1,\"nl.no\":1,\"nm.cn\":1,\"nm.us\":1,\"no-ip.biz\":1,\"no-ip.ca\":1,\"no-ip.co.uk\":1,\"no-ip.info\":1,\"no-ip.net\":1,\"no-ip.org\":1,\"no.com\":1,\"no.eu.org\":1,\"no.it\":1,\"nobeoka.miyazaki.jp\":1,\"noboribetsu.hokkaido.jp\":1,\"noda.chiba.jp\":1,\"noda.iwate.jp\":1,\"nodebalancer.linode.com\":2,\"nodum.co\":1,\"nodum.io\":1,\"nogata.fukuoka.jp\":1,\"nogi.tochigi.jp\":1,\"noheji.aomori.jp\":1,\"noho.st\":1,\"nohost.me\":1,\"noip.me\":1,\"noip.us\":1,\"nom.ad\":1,\"nom.ae\":1,\"nom.af\":1,\"nom.ag\":1,\"nom.ai\":1,\"nom.al\":1,\"nom.br\":2,\"nom.bz\":1,\"nom.cl\":1,\"nom.co\":1,\"nom.es\":1,\"nom.fr\":1,\"nom.gd\":1,\"nom.ge\":1,\"nom.gl\":1,\"nom.gt\":1,\"nom.hn\":1,\"nom.im\":1,\"nom.ke\":1,\"nom.km\":1,\"nom.li\":1,\"nom.lv\":1,\"nom.mg\":1,\"nom.mk\":1,\"nom.nc\":1,\"nom.ni\":1,\"nom.nu\":1,\"nom.pa\":1,\"nom.pe\":1,\"nom.pl\":1,\"nom.pw\":1,\"nom.qa\":1,\"nom.re\":1,\"nom.ro\":1,\"nom.rs\":1,\"nom.si\":1,\"nom.st\":1,\"nom.tj\":1,\"nom.tm\":1,\"nom.ug\":1,\"nom.uy\":1,\"nom.vc\":1,\"nom.vg\":1,\"nom.za\":1,\"nombre.bo\":1,\"nome.pt\":1,\"nomi.ishikawa.jp\":1,\"nonoichi.ishikawa.jp\":1,\"nord-aurdal.no\":1,\"nord-fron.no\":1,\"nord-odal.no\":1,\"norddal.no\":1,\"nordkapp.no\":1,\"nordre-land.no\":1,\"nordreisa.no\":1,\"nore-og-uvdal.no\":1,\"norfolk.museum\":1,\"north-kazakhstan.su\":1,\"north.museum\":1,\"nose.osaka.jp\":1,\"nosegawa.nara.jp\":1,\"noshiro.akita.jp\":1,\"not.br\":1,\"notaires.fr\":1,\"notaires.km\":1,\"noticias.bo\":1,\"noto.ishikawa.jp\":1,\"notodden.no\":1,\"notogawa.shiga.jp\":1,\"notteroy.no\":1,\"nov.ru\":1,\"nov.su\":1,\"novara.it\":1,\"now-dns.net\":1,\"now-dns.org\":1,\"now-dns.top\":1,\"now.sh\":1,\"nowaruda.pl\":1,\"nozawaonsen.nagano.jp\":1,\"np\":2,\"nrw.museum\":1,\"ns.ca\":1,\"nsn.us\":1,\"nsupdate.info\":1,\"nsw.au\":1,\"nsw.edu.au\":1,\"nt.au\":1,\"nt.ca\":1,\"nt.edu.au\":1,\"nt.no\":1,\"nt.ro\":1,\"ntdll.top\":1,\"ntr.br\":1,\"nu.ca\":1,\"nu.it\":1,\"numata.gunma.jp\":1,\"numata.hokkaido.jp\":1,\"numazu.shizuoka.jp\":1,\"nuoro.it\":1,\"nv.us\":1,\"nx.cn\":1,\"ny.us\":1,\"nyaa.am\":1,\"nyan.to\":1,\"nyc.mn\":1,\"nyc.museum\":1,\"nym.by\":1,\"nym.bz\":1,\"nym.ec\":1,\"nym.gr\":1,\"nym.gy\":1,\"nym.hk\":1,\"nym.ie\":1,\"nym.kz\":1,\"nym.la\":1,\"nym.lc\":1,\"nym.li\":1,\"nym.lt\":1,\"nym.lu\":1,\"nym.me\":1,\"nym.mn\":1,\"nym.mx\":1,\"nym.nz\":1,\"nym.pe\":1,\"nym.pt\":1,\"nym.ro\":1,\"nym.sk\":1,\"nym.su\":1,\"nym.sx\":1,\"nym.tw\":1,\"nyny.museum\":1,\"nysa.pl\":1,\"nyuzen.toyama.jp\":1,\"nz.basketball\":1,\"nz.eu.org\":1,\"o.bg\":1,\"o.se\":1,\"oamishirasato.chiba.jp\":1,\"oarai.ibaraki.jp\":1,\"obama.fukui.jp\":1,\"obama.nagasaki.jp\":1,\"obanazawa.yamagata.jp\":1,\"obihiro.hokkaido.jp\":1,\"obira.hokkaido.jp\":1,\"obninsk.su\":1,\"obu.aichi.jp\":1,\"obuse.nagano.jp\":1,\"oceanographic.museum\":1,\"oceanographique.museum\":1,\"ocelot.mythic-beasts.com\":1,\"ochi.kochi.jp\":1,\"oci.customer-oci.com\":2,\"ocp.customer-oci.com\":2,\"ocs.customer-oci.com\":2,\"od.ua\":1,\"odate.akita.jp\":1,\"odawara.kanagawa.jp\":1,\"odda.no\":1,\"odesa.ua\":1,\"odessa.ua\":1,\"odo.br\":1,\"oe.yamagata.jp\":1,\"of.by\":1,\"of.fashion\":1,\"of.football\":1,\"of.london\":1,\"of.no\":1,\"of.work\":1,\"off.ai\":1,\"office-on-the.net\":1,\"official.academy\":1,\"ofunato.iwate.jp\":1,\"og.ao\":1,\"og.it\":1,\"oga.akita.jp\":1,\"ogaki.gifu.jp\":1,\"ogano.saitama.jp\":1,\"ogasawara.tokyo.jp\":1,\"ogata.akita.jp\":1,\"ogawa.ibaraki.jp\":1,\"ogawa.nagano.jp\":1,\"ogawa.saitama.jp\":1,\"ogawara.miyagi.jp\":1,\"ogi.saga.jp\":1,\"ogimi.okinawa.jp\":1,\"ogliastra.it\":1,\"ogori.fukuoka.jp\":1,\"ogose.saitama.jp\":1,\"oguchi.aichi.jp\":1,\"oguni.kumamoto.jp\":1,\"oguni.yamagata.jp\":1,\"oh.us\":1,\"oharu.aichi.jp\":1,\"ohda.shimane.jp\":1,\"ohi.fukui.jp\":1,\"ohira.miyagi.jp\":1,\"ohira.tochigi.jp\":1,\"ohkura.yamagata.jp\":1,\"ohtawara.tochigi.jp\":1,\"oi.kanagawa.jp\":1,\"oirase.aomori.jp\":1,\"oirm.gov.pl\":1,\"oishida.yamagata.jp\":1,\"oiso.kanagawa.jp\":1,\"oita.jp\":1,\"oita.oita.jp\":1,\"oizumi.gunma.jp\":1,\"oji.nara.jp\":1,\"ojiya.niigata.jp\":1,\"ok.us\":1,\"okagaki.fukuoka.jp\":1,\"okawa.fukuoka.jp\":1,\"okawa.kochi.jp\":1,\"okaya.nagano.jp\":1,\"okayama.jp\":1,\"okayama.okayama.jp\":1,\"okazaki.aichi.jp\":1,\"okegawa.saitama.jp\":1,\"oketo.hokkaido.jp\":1,\"oki.fukuoka.jp\":1,\"okinawa.jp\":1,\"okinawa.okinawa.jp\":1,\"okinoshima.shimane.jp\":1,\"okoppe.hokkaido.jp\":1,\"oksnes.no\":1,\"okuizumo.shimane.jp\":1,\"okuma.fukushima.jp\":1,\"okutama.tokyo.jp\":1,\"ol.no\":1,\"olawa.pl\":1,\"olbia-tempio.it\":1,\"olbiatempio.it\":1,\"olecko.pl\":1,\"olkusz.pl\":1,\"olsztyn.pl\":1,\"omachi.nagano.jp\":1,\"omachi.saga.jp\":1,\"omaezaki.shizuoka.jp\":1,\"omaha.museum\":1,\"omasvuotna.no\":1,\"ome.tokyo.jp\":1,\"omg.lol\":1,\"omi.nagano.jp\":1,\"omi.niigata.jp\":1,\"omigawa.chiba.jp\":1,\"omihachiman.shiga.jp\":1,\"omitama.ibaraki.jp\":1,\"omiya.saitama.jp\":1,\"omniwe.site\":1,\"omotego.fukushima.jp\":1,\"omura.nagasaki.jp\":1,\"omuta.fukuoka.jp\":1,\"on-aptible.com\":1,\"on-k3s.io\":2,\"on-rancher.cloud\":2,\"on-rio.io\":2,\"on-the-web.tv\":1,\"on-web.fr\":1,\"on.ca\":1,\"on.fashion\":1,\"onagawa.miyagi.jp\":1,\"onfabrica.com\":1,\"ong.br\":1,\"onga.fukuoka.jp\":1,\"onjuku.chiba.jp\":1,\"online.museum\":1,\"online.th\":1,\"onna.okinawa.jp\":1,\"ono.fukui.jp\":1,\"ono.fukushima.jp\":1,\"ono.hyogo.jp\":1,\"onojo.fukuoka.jp\":1,\"onomichi.hiroshima.jp\":1,\"onred.one\":1,\"onrender.com\":1,\"ontario.museum\":1,\"onthewifi.com\":1,\"onza.mythic-beasts.com\":1,\"ooguy.com\":1,\"ookuwa.nagano.jp\":1,\"ooshika.nagano.jp\":1,\"openair.museum\":1,\"opencraft.hosting\":1,\"opensocial.site\":1,\"operaunite.com\":1,\"opoczno.pl\":1,\"opole.pl\":1,\"oppdal.no\":1,\"oppegard.no\":1,\"or.at\":1,\"or.bi\":1,\"or.ci\":1,\"or.cr\":1,\"or.id\":1,\"or.it\":1,\"or.jp\":1,\"or.ke\":1,\"or.kr\":1,\"or.mu\":1,\"or.na\":1,\"or.pw\":1,\"or.th\":1,\"or.tz\":1,\"or.ug\":1,\"or.us\":1,\"ora.gunma.jp\":1,\"oregon.museum\":1,\"oregontrail.museum\":1,\"org.ac\":1,\"org.ae\":1,\"org.af\":1,\"org.ag\":1,\"org.ai\":1,\"org.al\":1,\"org.am\":1,\"org.ar\":1,\"org.au\":1,\"org.az\":1,\"org.ba\":1,\"org.bb\":1,\"org.bh\":1,\"org.bi\":1,\"org.bm\":1,\"org.bn\":1,\"org.bo\":1,\"org.br\":1,\"org.bs\":1,\"org.bt\":1,\"org.bw\":1,\"org.bz\":1,\"org.ci\":1,\"org.cn\":1,\"org.co\":1,\"org.cu\":1,\"org.cw\":1,\"org.cy\":1,\"org.dm\":1,\"org.do\":1,\"org.dz\":1,\"org.ec\":1,\"org.ee\":1,\"org.eg\":1,\"org.es\":1,\"org.et\":1,\"org.fj\":1,\"org.fm\":1,\"org.ge\":1,\"org.gg\":1,\"org.gh\":1,\"org.gi\":1,\"org.gl\":1,\"org.gn\":1,\"org.gp\":1,\"org.gr\":1,\"org.gt\":1,\"org.gu\":1,\"org.gy\":1,\"org.hk\":1,\"org.hn\":1,\"org.ht\":1,\"org.hu\":1,\"org.il\":1,\"org.im\":1,\"org.in\":1,\"org.iq\":1,\"org.ir\":1,\"org.is\":1,\"org.je\":1,\"org.jo\":1,\"org.kg\":1,\"org.ki\":1,\"org.km\":1,\"org.kn\":1,\"org.kp\":1,\"org.kw\":1,\"org.ky\":1,\"org.kz\":1,\"org.la\":1,\"org.lb\":1,\"org.lc\":1,\"org.lk\":1,\"org.lr\":1,\"org.ls\":1,\"org.lv\":1,\"org.ly\":1,\"org.ma\":1,\"org.me\":1,\"org.mg\":1,\"org.mk\":1,\"org.ml\":1,\"org.mn\":1,\"org.mo\":1,\"org.ms\":1,\"org.mt\":1,\"org.mu\":1,\"org.mv\":1,\"org.mw\":1,\"org.mx\":1,\"org.my\":1,\"org.mz\":1,\"org.na\":1,\"org.ng\":1,\"org.ni\":1,\"org.nr\":1,\"org.nz\":1,\"org.om\":1,\"org.pa\":1,\"org.pe\":1,\"org.pf\":1,\"org.ph\":1,\"org.pk\":1,\"org.pl\":1,\"org.pn\":1,\"org.pr\":1,\"org.ps\":1,\"org.pt\":1,\"org.py\":1,\"org.qa\":1,\"org.ro\":1,\"org.rs\":1,\"org.ru\":1,\"org.rw\":1,\"org.sa\":1,\"org.sb\":1,\"org.sc\":1,\"org.sd\":1,\"org.se\":1,\"org.sg\":1,\"org.sh\":1,\"org.sl\":1,\"org.sn\":1,\"org.so\":1,\"org.ss\":1,\"org.st\":1,\"org.sv\":1,\"org.sy\":1,\"org.sz\":1,\"org.tj\":1,\"org.tm\":1,\"org.tn\":1,\"org.to\":1,\"org.tr\":1,\"org.tt\":1,\"org.tw\":1,\"org.ua\":1,\"org.ug\":1,\"org.uk\":1,\"org.uy\":1,\"org.uz\":1,\"org.vc\":1,\"org.ve\":1,\"org.vi\":1,\"org.vn\":1,\"org.vu\":1,\"org.ws\":1,\"org.za\":1,\"org.zm\":1,\"org.zw\":1,\"oristano.it\":1,\"orkanger.no\":1,\"orkdal.no\":1,\"orland.no\":1,\"orskog.no\":1,\"orsta.no\":1,\"orx.biz\":1,\"os.hedmark.no\":1,\"os.hordaland.no\":1,\"osaka.jp\":1,\"osakasayama.osaka.jp\":1,\"osaki.miyagi.jp\":1,\"osakikamijima.hiroshima.jp\":1,\"osasco.br\":1,\"osen.no\":1,\"oseto.nagasaki.jp\":1,\"oshima.tokyo.jp\":1,\"oshima.yamaguchi.jp\":1,\"oshino.yamanashi.jp\":1,\"oshu.iwate.jp\":1,\"oslo.no\":1,\"osoyro.no\":1,\"osteroy.no\":1,\"ostre-toten.no\":1,\"ostroda.pl\":1,\"ostroleka.pl\":1,\"ostrowiec.pl\":1,\"ostrowwlkp.pl\":1,\"ot.it\":1,\"ota.gunma.jp\":1,\"ota.tokyo.jp\":1,\"otago.museum\":1,\"otake.hiroshima.jp\":1,\"otaki.chiba.jp\":1,\"otaki.nagano.jp\":1,\"otaki.saitama.jp\":1,\"otama.fukushima.jp\":1,\"otap.co\":2,\"otari.nagano.jp\":1,\"otaru.hokkaido.jp\":1,\"other.nf\":1,\"oto.fukuoka.jp\":1,\"otobe.hokkaido.jp\":1,\"otofuke.hokkaido.jp\":1,\"otoineppu.hokkaido.jp\":1,\"otoyo.kochi.jp\":1,\"otsu.shiga.jp\":1,\"otsuchi.iwate.jp\":1,\"otsuki.kochi.jp\":1,\"otsuki.yamanashi.jp\":1,\"ouchi.saga.jp\":1,\"ouda.nara.jp\":1,\"oum.gov.pl\":1,\"oumu.hokkaido.jp\":1,\"outsystemscloud.com\":1,\"overhalla.no\":1,\"ovre-eiker.no\":1,\"owani.aomori.jp\":1,\"owariasahi.aichi.jp\":1,\"own.pm\":1,\"ownip.net\":1,\"ownprovider.com\":1,\"owo.codes\":2,\"ox.rs\":1,\"oxford.museum\":1,\"oy.lc\":1,\"oya.to\":1,\"oyabe.toyama.jp\":1,\"oyama.tochigi.jp\":1,\"oyamazaki.kyoto.jp\":1,\"oyer.no\":1,\"oygarden.no\":1,\"oyodo.nara.jp\":1,\"oystre-slidre.no\":1,\"oz.au\":1,\"ozora.hokkaido.jp\":1,\"ozu.ehime.jp\":1,\"ozu.kumamoto.jp\":1,\"p.bg\":1,\"p.se\":1,\"pa.gov.br\":1,\"pa.gov.pl\":1,\"pa.it\":1,\"pa.leg.br\":1,\"pa.us\":1,\"paas.datacenter.fi\":1,\"paas.massivegrid.com\":1,\"pacific.museum\":1,\"paderborn.museum\":1,\"padova.it\":1,\"padua.it\":1,\"pagefrontapp.com\":1,\"pages.dev\":1,\"pages.wiardweb.com\":1,\"pagespeedmobilizer.com\":1,\"pagexl.com\":1,\"palace.museum\":1,\"paleo.museum\":1,\"palermo.it\":1,\"palmas.br\":1,\"palmsprings.museum\":1,\"panama.museum\":1,\"panel.gg\":1,\"pantheonsite.io\":1,\"parachuting.aero\":1,\"paragliding.aero\":1,\"paris.eu.org\":1,\"paris.museum\":1,\"parliament.cy\":1,\"parliament.nz\":1,\"parma.it\":1,\"paroch.k12.ma.us\":1,\"parti.se\":1,\"pasadena.museum\":1,\"passenger-association.aero\":1,\"patria.bo\":1,\"pavia.it\":1,\"pb.ao\":1,\"pb.gov.br\":1,\"pb.leg.br\":1,\"pc.it\":1,\"pc.pl\":1,\"pcloud.host\":1,\"pd.it\":1,\"pdns.page\":1,\"pe.ca\":1,\"pe.gov.br\":1,\"pe.it\":1,\"pe.kr\":1,\"pe.leg.br\":1,\"penza.su\":1,\"per.la\":1,\"per.nf\":1,\"per.sg\":1,\"perso.ht\":1,\"perso.sn\":1,\"perso.tn\":1,\"perspecta.cloud\":1,\"perugia.it\":1,\"pesaro-urbino.it\":1,\"pesarourbino.it\":1,\"pescara.it\":1,\"pg\":2,\"pg.it\":1,\"pgafan.net\":1,\"pgfog.com\":1,\"pharmacien.fr\":1,\"pharmaciens.km\":1,\"pharmacy.museum\":1,\"philadelphia.museum\":1,\"philadelphiaarea.museum\":1,\"philately.museum\":1,\"phoenix.museum\":1,\"photography.museum\":1,\"pi.gov.br\":1,\"pi.it\":1,\"pi.leg.br\":1,\"piacenza.it\":1,\"piedmont.it\":1,\"piemonte.it\":1,\"pila.pl\":1,\"pilot.aero\":1,\"pilots.museum\":1,\"pimienta.org\":1,\"pinb.gov.pl\":1,\"pippu.hokkaido.jp\":1,\"pisa.it\":1,\"pistoia.it\":1,\"pisz.pl\":1,\"pittsburgh.museum\":1,\"piw.gov.pl\":1,\"pixolino.com\":1,\"pl.eu.org\":1,\"pl.ua\":1,\"planetarium.museum\":1,\"plantation.museum\":1,\"plants.museum\":1,\"platform0.app\":1,\"platformsh.site\":2,\"platter-app.com\":1,\"platter-app.dev\":1,\"platterp.us\":1,\"playstation-cloud.com\":1,\"plaza.museum\":1,\"plc.co.im\":1,\"plc.ly\":1,\"plc.uk\":1,\"plesk.page\":1,\"pleskns.com\":1,\"plo.ps\":1,\"plurinacional.bo\":1,\"pmn.it\":1,\"pn.it\":1,\"po.gov.pl\":1,\"po.it\":1,\"poa.br\":1,\"podhale.pl\":1,\"podlasie.pl\":1,\"podzone.net\":1,\"podzone.org\":1,\"point2this.com\":1,\"pointto.us\":1,\"poivron.org\":1,\"pokrovsk.su\":1,\"pol.dz\":1,\"pol.ht\":1,\"pol.tr\":1,\"police.uk\":1,\"politica.bo\":1,\"polkowice.pl\":1,\"poltava.ua\":1,\"pomorskie.pl\":1,\"pomorze.pl\":1,\"poniatowa.pl\":1,\"ponpes.id\":1,\"pony.club\":1,\"pordenone.it\":1,\"porsanger.no\":1,\"porsangu.no\":1,\"porsgrunn.no\":1,\"port.fr\":1,\"portal.museum\":1,\"portland.museum\":1,\"portlligat.museum\":1,\"posts-and-telecommunications.museum\":1,\"potager.org\":1,\"potenza.it\":1,\"powiat.pl\":1,\"poznan.pl\":1,\"pp.az\":1,\"pp.ru\":1,\"pp.se\":1,\"pp.ua\":1,\"ppg.br\":1,\"pr.gov.br\":1,\"pr.it\":1,\"pr.leg.br\":1,\"pr.us\":1,\"prato.it\":1,\"prd.fr\":1,\"prd.km\":1,\"prd.mg\":1,\"preservation.museum\":1,\"presidio.museum\":1,\"press.aero\":1,\"press.cy\":1,\"press.ma\":1,\"press.museum\":1,\"press.se\":1,\"presse.ci\":1,\"presse.km\":1,\"presse.ml\":1,\"pri.ee\":1,\"principe.st\":1,\"priv.at\":1,\"priv.hu\":1,\"priv.me\":1,\"priv.no\":1,\"priv.pl\":1,\"privatizehealthinsurance.net\":1,\"pro.az\":1,\"pro.br\":1,\"pro.cy\":1,\"pro.ec\":1,\"pro.fj\":1,\"pro.ht\":1,\"pro.mv\":1,\"pro.na\":1,\"pro.om\":1,\"pro.pr\":1,\"pro.tt\":1,\"pro.vn\":1,\"prochowice.pl\":1,\"production.aero\":1,\"prof.pr\":1,\"profesional.bo\":1,\"project.museum\":1,\"protonet.io\":1,\"pruszkow.pl\":1,\"prvcy.page\":1,\"przeworsk.pl\":1,\"psc.br\":1,\"psi.br\":1,\"psp.gov.pl\":1,\"psse.gov.pl\":1,\"pt.eu.org\":1,\"pt.it\":1,\"ptplus.fit\":1,\"pu.it\":1,\"pub.sa\":1,\"publ.pt\":1,\"public.museum\":1,\"publishproxy.com\":1,\"pubol.museum\":1,\"pubtls.org\":1,\"pueblo.bo\":1,\"pug.it\":1,\"puglia.it\":1,\"pulawy.pl\":1,\"pup.gov.pl\":1,\"pv.it\":1,\"pvh.br\":1,\"pvt.ge\":1,\"pvt.k12.ma.us\":1,\"pyatigorsk.ru\":1,\"pymnt.uk\":1,\"pz.it\":1,\"q-a.eu.org\":1,\"q.bg\":1,\"qa2.com\":1,\"qbuser.com\":1,\"qc.ca\":1,\"qc.com\":1,\"qcx.io\":1,\"qh.cn\":1,\"qld.au\":1,\"qld.edu.au\":1,\"qld.gov.au\":1,\"qsl.br\":1,\"qualifioapp.com\":1,\"quebec.museum\":1,\"quicksytes.com\":1,\"quipelements.com\":2,\"r.appspot.com\":2,\"r.bg\":1,\"r.cdn77.net\":1,\"r.se\":1,\"ra.it\":1,\"rackmaze.com\":1,\"rackmaze.net\":1,\"rade.no\":1,\"radio.am\":1,\"radio.br\":1,\"radio.fm\":1,\"radom.pl\":1,\"radoy.no\":1,\"ragusa.it\":1,\"rahkkeravju.no\":1,\"raholt.no\":1,\"railroad.museum\":1,\"railway.museum\":1,\"raisa.no\":1,\"rakkestad.no\":1,\"ralingen.no\":1,\"rana.no\":1,\"randaberg.no\":1,\"rankoshi.hokkaido.jp\":1,\"ranzan.saitama.jp\":1,\"ras.ru\":1,\"rauma.no\":1,\"ravendb.community\":1,\"ravendb.me\":1,\"ravendb.run\":1,\"ravenna.it\":1,\"rawa-maz.pl\":1,\"rc.it\":1,\"rdv.to\":1,\"re.it\":1,\"re.kr\":1,\"read-books.org\":1,\"readmyblog.org\":1,\"readthedocs.io\":1,\"realestate.pl\":1,\"realm.cz\":1,\"rebun.hokkaido.jp\":1,\"rec.br\":1,\"rec.co\":1,\"rec.nf\":1,\"rec.ro\":1,\"rec.ve\":1,\"recht.pro\":1,\"recife.br\":1,\"recreation.aero\":1,\"red.sv\":1,\"redirectme.net\":1,\"reg.dk\":1,\"reggio-calabria.it\":1,\"reggio-emilia.it\":1,\"reggiocalabria.it\":1,\"reggioemilia.it\":1,\"reklam.hu\":1,\"rel.ht\":1,\"rel.pl\":1,\"remotewd.com\":1,\"rendalen.no\":1,\"rennebu.no\":1,\"rennesoy.no\":1,\"rep.br\":1,\"rep.kp\":1,\"repbody.aero\":1,\"repl.co\":1,\"repl.run\":1,\"res.aero\":1,\"res.in\":1,\"research.aero\":1,\"research.museum\":1,\"resindevice.io\":1,\"resistance.museum\":1,\"revista.bo\":1,\"rg.it\":1,\"rhcloud.com\":1,\"ri.it\":1,\"ri.us\":1,\"ribeirao.br\":1,\"rieti.it\":1,\"rifu.miyagi.jp\":1,\"riik.ee\":1,\"rikubetsu.hokkaido.jp\":1,\"rikuzentakata.iwate.jp\":1,\"rimini.it\":1,\"rindal.no\":1,\"ringebu.no\":1,\"ringerike.no\":1,\"ringsaker.no\":1,\"rio.br\":1,\"riobranco.br\":1,\"riodejaneiro.museum\":1,\"riopreto.br\":1,\"rishiri.hokkaido.jp\":1,\"rishirifuji.hokkaido.jp\":1,\"risor.no\":1,\"rissa.no\":1,\"ritto.shiga.jp\":1,\"rivne.ua\":1,\"rj.gov.br\":1,\"rj.leg.br\":1,\"rl.no\":1,\"rm.it\":1,\"rn.gov.br\":1,\"rn.it\":1,\"rn.leg.br\":1,\"rnrt.tn\":1,\"rns.tn\":1,\"rnu.tn\":1,\"ro.eu.org\":1,\"ro.gov.br\":1,\"ro.im\":1,\"ro.it\":1,\"ro.leg.br\":1,\"roan.no\":1,\"rochester.museum\":1,\"rockart.museum\":1,\"rodoy.no\":1,\"rokunohe.aomori.jp\":1,\"rollag.no\":1,\"roma.it\":1,\"roma.museum\":1,\"rome.it\":1,\"romsa.no\":1,\"romskog.no\":1,\"roros.no\":1,\"rost.no\":1,\"rotorcraft.aero\":1,\"router.management\":1,\"rovigo.it\":1,\"rovno.ua\":1,\"royken.no\":1,\"royrvik.no\":1,\"rr.gov.br\":1,\"rr.leg.br\":1,\"rs.gov.br\":1,\"rs.leg.br\":1,\"rsc.cdn77.org\":1,\"ru.com\":1,\"ru.eu.org\":1,\"ru.net\":1,\"run.app\":1,\"ruovat.no\":1,\"russia.museum\":1,\"rv.ua\":1,\"rybnik.pl\":1,\"rygge.no\":1,\"ryokami.saitama.jp\":1,\"ryugasaki.ibaraki.jp\":1,\"ryuoh.shiga.jp\":1,\"rzeszow.pl\":1,\"rzgw.gov.pl\":1,\"s.bg\":1,\"s.se\":1,\"s3-ap-northeast-1.amazonaws.com\":1,\"s3-ap-northeast-2.amazonaws.com\":1,\"s3-ap-south-1.amazonaws.com\":1,\"s3-ap-southeast-1.amazonaws.com\":1,\"s3-ap-southeast-2.amazonaws.com\":1,\"s3-ca-central-1.amazonaws.com\":1,\"s3-eu-central-1.amazonaws.com\":1,\"s3-eu-west-1.amazonaws.com\":1,\"s3-eu-west-2.amazonaws.com\":1,\"s3-eu-west-3.amazonaws.com\":1,\"s3-external-1.amazonaws.com\":1,\"s3-fips-us-gov-west-1.amazonaws.com\":1,\"s3-sa-east-1.amazonaws.com\":1,\"s3-us-east-2.amazonaws.com\":1,\"s3-us-gov-west-1.amazonaws.com\":1,\"s3-us-west-1.amazonaws.com\":1,\"s3-us-west-2.amazonaws.com\":1,\"s3-website-ap-northeast-1.amazonaws.com\":1,\"s3-website-ap-southeast-1.amazonaws.com\":1,\"s3-website-ap-southeast-2.amazonaws.com\":1,\"s3-website-eu-west-1.amazonaws.com\":1,\"s3-website-sa-east-1.amazonaws.com\":1,\"s3-website-us-east-1.amazonaws.com\":1,\"s3-website-us-west-1.amazonaws.com\":1,\"s3-website-us-west-2.amazonaws.com\":1,\"s3-website.ap-northeast-2.amazonaws.com\":1,\"s3-website.ap-south-1.amazonaws.com\":1,\"s3-website.ca-central-1.amazonaws.com\":1,\"s3-website.eu-central-1.amazonaws.com\":1,\"s3-website.eu-west-2.amazonaws.com\":1,\"s3-website.eu-west-3.amazonaws.com\":1,\"s3-website.us-east-2.amazonaws.com\":1,\"s3.amazonaws.com\":1,\"s3.ap-northeast-2.amazonaws.com\":1,\"s3.ap-south-1.amazonaws.com\":1,\"s3.ca-central-1.amazonaws.com\":1,\"s3.cn-north-1.amazonaws.com.cn\":1,\"s3.dualstack.ap-northeast-1.amazonaws.com\":1,\"s3.dualstack.ap-northeast-2.amazonaws.com\":1,\"s3.dualstack.ap-south-1.amazonaws.com\":1,\"s3.dualstack.ap-southeast-1.amazonaws.com\":1,\"s3.dualstack.ap-southeast-2.amazonaws.com\":1,\"s3.dualstack.ca-central-1.amazonaws.com\":1,\"s3.dualstack.eu-central-1.amazonaws.com\":1,\"s3.dualstack.eu-west-1.amazonaws.com\":1,\"s3.dualstack.eu-west-2.amazonaws.com\":1,\"s3.dualstack.eu-west-3.amazonaws.com\":1,\"s3.dualstack.sa-east-1.amazonaws.com\":1,\"s3.dualstack.us-east-1.amazonaws.com\":1,\"s3.dualstack.us-east-2.amazonaws.com\":1,\"s3.eu-central-1.amazonaws.com\":1,\"s3.eu-west-2.amazonaws.com\":1,\"s3.eu-west-3.amazonaws.com\":1,\"s3.us-east-2.amazonaws.com\":1,\"s5y.io\":2,\"sa-east-1.elasticbeanstalk.com\":1,\"sa.au\":1,\"sa.com\":1,\"sa.cr\":1,\"sa.edu.au\":1,\"sa.gov.au\":1,\"sa.gov.pl\":1,\"sa.it\":1,\"sabae.fukui.jp\":1,\"sado.niigata.jp\":1,\"safety.aero\":1,\"saga.jp\":1,\"saga.saga.jp\":1,\"sagae.yamagata.jp\":1,\"sagamihara.kanagawa.jp\":1,\"saigawa.fukuoka.jp\":1,\"saijo.ehime.jp\":1,\"saikai.nagasaki.jp\":1,\"saiki.oita.jp\":1,\"saintlouis.museum\":1,\"saitama.jp\":1,\"saitama.saitama.jp\":1,\"saito.miyazaki.jp\":1,\"saka.hiroshima.jp\":1,\"sakado.saitama.jp\":1,\"sakae.chiba.jp\":1,\"sakae.nagano.jp\":1,\"sakahogi.gifu.jp\":1,\"sakai.fukui.jp\":1,\"sakai.ibaraki.jp\":1,\"sakai.osaka.jp\":1,\"sakaiminato.tottori.jp\":1,\"sakaki.nagano.jp\":1,\"sakata.yamagata.jp\":1,\"sakawa.kochi.jp\":1,\"sakegawa.yamagata.jp\":1,\"saku.nagano.jp\":1,\"sakuho.nagano.jp\":1,\"sakura.chiba.jp\":1,\"sakura.tochigi.jp\":1,\"sakuragawa.ibaraki.jp\":1,\"sakurai.nara.jp\":1,\"sakyo.kyoto.jp\":1,\"salangen.no\":1,\"salat.no\":1,\"salem.museum\":1,\"salerno.it\":1,\"saltdal.no\":1,\"salud.bo\":1,\"salvador.br\":1,\"salvadordali.museum\":1,\"salzburg.museum\":1,\"samegawa.fukushima.jp\":1,\"samnanger.no\":1,\"sampa.br\":1,\"samukawa.kanagawa.jp\":1,\"sanagochi.tokushima.jp\":1,\"sanda.hyogo.jp\":1,\"sandcats.io\":1,\"sande.more-og-romsdal.no\":1,\"sande.vestfold.no\":1,\"sande.xn--mre-og-romsdal-qqb.no\":1,\"sandefjord.no\":1,\"sandiego.museum\":1,\"sandnes.no\":1,\"sandnessjoen.no\":1,\"sandoy.no\":1,\"sanfrancisco.museum\":1,\"sango.nara.jp\":1,\"sanjo.niigata.jp\":1,\"sannan.hyogo.jp\":1,\"sannohe.aomori.jp\":1,\"sano.tochigi.jp\":1,\"sanok.pl\":1,\"santabarbara.museum\":1,\"santacruz.museum\":1,\"santafe.museum\":1,\"santamaria.br\":1,\"santoandre.br\":1,\"sanuki.kagawa.jp\":1,\"saobernardo.br\":1,\"saogonca.br\":1,\"saotome.st\":1,\"sapporo.jp\":2,\"sar.it\":1,\"sardegna.it\":1,\"sardinia.it\":1,\"saroma.hokkaido.jp\":1,\"sarpsborg.no\":1,\"sarufutsu.hokkaido.jp\":1,\"sasaguri.fukuoka.jp\":1,\"sasayama.hyogo.jp\":1,\"sasebo.nagasaki.jp\":1,\"saskatchewan.museum\":1,\"sassari.it\":1,\"satosho.okayama.jp\":1,\"satsumasendai.kagoshima.jp\":1,\"satte.saitama.jp\":1,\"satx.museum\":1,\"sauda.no\":1,\"sauherad.no\":1,\"savannahga.museum\":1,\"saves-the-whales.com\":1,\"savona.it\":1,\"sayama.osaka.jp\":1,\"sayama.saitama.jp\":1,\"sayo.hyogo.jp\":1,\"sb.ua\":1,\"sc.cn\":1,\"sc.gov.br\":1,\"sc.ke\":1,\"sc.kr\":1,\"sc.leg.br\":1,\"sc.ls\":1,\"sc.tz\":1,\"sc.ug\":1,\"sc.us\":1,\"scapp.io\":1,\"sch.ae\":1,\"sch.id\":1,\"sch.ir\":1,\"sch.jo\":1,\"sch.lk\":1,\"sch.ly\":1,\"sch.ng\":1,\"sch.qa\":1,\"sch.sa\":1,\"sch.so\":1,\"sch.uk\":2,\"sch.zm\":1,\"schlesisches.museum\":1,\"schoenbrunn.museum\":1,\"schokokeks.net\":1,\"schokoladen.museum\":1,\"school.museum\":1,\"school.na\":1,\"school.nz\":1,\"school.za\":1,\"schools.nsw.edu.au\":1,\"schulserver.de\":1,\"schweiz.museum\":1,\"sci.eg\":1,\"science-fiction.museum\":1,\"science.museum\":1,\"scienceandhistory.museum\":1,\"scienceandindustry.museum\":1,\"sciencecenter.museum\":1,\"sciencecenters.museum\":1,\"sciencehistory.museum\":1,\"sciences.museum\":1,\"sciencesnaturelles.museum\":1,\"scientist.aero\":1,\"scotland.museum\":1,\"scrapper-site.net\":1,\"scrapping.cc\":1,\"scrysec.com\":1,\"sd.cn\":1,\"sd.us\":1,\"sdn.gov.pl\":1,\"se.eu.org\":1,\"se.gov.br\":1,\"se.leg.br\":1,\"se.net\":1,\"seaport.museum\":1,\"sebastopol.ua\":1,\"sec.ps\":1,\"securitytactics.com\":1,\"seg.br\":1,\"seidat.net\":1,\"seihi.nagasaki.jp\":1,\"seika.kyoto.jp\":1,\"seiro.niigata.jp\":1,\"seirou.niigata.jp\":1,\"seiyo.ehime.jp\":1,\"sejny.pl\":1,\"seki.gifu.jp\":1,\"sekigahara.gifu.jp\":1,\"sekikawa.niigata.jp\":1,\"sel.no\":1,\"selbu.no\":1,\"selfip.biz\":1,\"selfip.com\":1,\"selfip.info\":1,\"selfip.net\":1,\"selfip.org\":1,\"selje.no\":1,\"seljord.no\":1,\"sells-for-less.com\":1,\"sells-for-u.com\":1,\"sells-it.net\":1,\"sellsyourhome.org\":1,\"semboku.akita.jp\":1,\"semine.miyagi.jp\":1,\"sendai.jp\":2,\"sennan.osaka.jp\":1,\"senseering.net\":1,\"sensiosite.cloud\":2,\"seoul.kr\":1,\"sera.hiroshima.jp\":1,\"seranishi.hiroshima.jp\":1,\"servebbs.com\":1,\"servebbs.net\":1,\"servebbs.org\":1,\"servebeer.com\":1,\"serveblog.net\":1,\"servecounterstrike.com\":1,\"serveexchange.com\":1,\"serveftp.com\":1,\"serveftp.net\":1,\"serveftp.org\":1,\"servegame.com\":1,\"servegame.org\":1,\"servehalflife.com\":1,\"servehttp.com\":1,\"servehumour.com\":1,\"serveirc.com\":1,\"serveminecraft.net\":1,\"servemp3.com\":1,\"servep2p.com\":1,\"servepics.com\":1,\"servequake.com\":1,\"servesarcasm.com\":1,\"service.gov.uk\":1,\"services.aero\":1,\"setagaya.tokyo.jp\":1,\"seto.aichi.jp\":1,\"setouchi.okayama.jp\":1,\"settlement.museum\":1,\"settlers.museum\":1,\"settsu.osaka.jp\":1,\"sevastopol.ua\":1,\"sex.hu\":1,\"sex.pl\":1,\"sf.no\":1,\"sh.cn\":1,\"shacknet.nu\":1,\"shakotan.hokkaido.jp\":1,\"shari.hokkaido.jp\":1,\"shell.museum\":1,\"sherbrooke.museum\":1,\"shibata.miyagi.jp\":1,\"shibata.niigata.jp\":1,\"shibecha.hokkaido.jp\":1,\"shibetsu.hokkaido.jp\":1,\"shibukawa.gunma.jp\":1,\"shibuya.tokyo.jp\":1,\"shichikashuku.miyagi.jp\":1,\"shichinohe.aomori.jp\":1,\"shiftedit.io\":1,\"shiga.jp\":1,\"shiiba.miyazaki.jp\":1,\"shijonawate.osaka.jp\":1,\"shika.ishikawa.jp\":1,\"shikabe.hokkaido.jp\":1,\"shikama.miyagi.jp\":1,\"shikaoi.hokkaido.jp\":1,\"shikatsu.aichi.jp\":1,\"shiki.saitama.jp\":1,\"shikokuchuo.ehime.jp\":1,\"shima.mie.jp\":1,\"shimabara.nagasaki.jp\":1,\"shimada.shizuoka.jp\":1,\"shimamaki.hokkaido.jp\":1,\"shimamoto.osaka.jp\":1,\"shimane.jp\":1,\"shimane.shimane.jp\":1,\"shimizu.hokkaido.jp\":1,\"shimizu.shizuoka.jp\":1,\"shimoda.shizuoka.jp\":1,\"shimodate.ibaraki.jp\":1,\"shimofusa.chiba.jp\":1,\"shimogo.fukushima.jp\":1,\"shimoichi.nara.jp\":1,\"shimoji.okinawa.jp\":1,\"shimokawa.hokkaido.jp\":1,\"shimokitayama.nara.jp\":1,\"shimonita.gunma.jp\":1,\"shimonoseki.yamaguchi.jp\":1,\"shimosuwa.nagano.jp\":1,\"shimotsuke.tochigi.jp\":1,\"shimotsuma.ibaraki.jp\":1,\"shinagawa.tokyo.jp\":1,\"shinanomachi.nagano.jp\":1,\"shingo.aomori.jp\":1,\"shingu.fukuoka.jp\":1,\"shingu.hyogo.jp\":1,\"shingu.wakayama.jp\":1,\"shinichi.hiroshima.jp\":1,\"shinjo.nara.jp\":1,\"shinjo.okayama.jp\":1,\"shinjo.yamagata.jp\":1,\"shinjuku.tokyo.jp\":1,\"shinkamigoto.nagasaki.jp\":1,\"shinonsen.hyogo.jp\":1,\"shinshinotsu.hokkaido.jp\":1,\"shinshiro.aichi.jp\":1,\"shinto.gunma.jp\":1,\"shintoku.hokkaido.jp\":1,\"shintomi.miyazaki.jp\":1,\"shinyoshitomi.fukuoka.jp\":1,\"shiogama.miyagi.jp\":1,\"shiojiri.nagano.jp\":1,\"shioya.tochigi.jp\":1,\"shirahama.wakayama.jp\":1,\"shirakawa.fukushima.jp\":1,\"shirakawa.gifu.jp\":1,\"shirako.chiba.jp\":1,\"shiranuka.hokkaido.jp\":1,\"shiraoi.hokkaido.jp\":1,\"shiraoka.saitama.jp\":1,\"shirataka.yamagata.jp\":1,\"shiriuchi.hokkaido.jp\":1,\"shiroi.chiba.jp\":1,\"shiroishi.miyagi.jp\":1,\"shiroishi.saga.jp\":1,\"shirosato.ibaraki.jp\":1,\"shishikui.tokushima.jp\":1,\"shiso.hyogo.jp\":1,\"shisui.chiba.jp\":1,\"shitara.aichi.jp\":1,\"shiwa.iwate.jp\":1,\"shizukuishi.iwate.jp\":1,\"shizuoka.jp\":1,\"shizuoka.shizuoka.jp\":1,\"shobara.hiroshima.jp\":1,\"shonai.fukuoka.jp\":1,\"shonai.yamagata.jp\":1,\"shoo.okayama.jp\":1,\"shop.ht\":1,\"shop.hu\":1,\"shop.pl\":1,\"shop.ro\":1,\"shop.th\":1,\"shopitsite.com\":1,\"shopware.store\":1,\"show.aero\":1,\"showa.fukushima.jp\":1,\"showa.gunma.jp\":1,\"showa.yamanashi.jp\":1,\"shunan.yamaguchi.jp\":1,\"shw.io\":1,\"si.eu.org\":1,\"si.it\":1,\"sibenik.museum\":1,\"sic.it\":1,\"sicilia.it\":1,\"sicily.it\":1,\"siellak.no\":1,\"siena.it\":1,\"sigdal.no\":1,\"siljan.no\":1,\"silk.museum\":1,\"simple-url.com\":1,\"sinaapp.com\":1,\"siracusa.it\":1,\"sirdal.no\":1,\"siteleaf.net\":1,\"sites.static.land\":1,\"sjc.br\":1,\"sk.ca\":1,\"sk.eu.org\":1,\"skanit.no\":1,\"skanland.no\":1,\"skaun.no\":1,\"skedsmo.no\":1,\"skedsmokorset.no\":1,\"ski.museum\":1,\"ski.no\":1,\"skien.no\":1,\"skierva.no\":1,\"skiptvet.no\":1,\"skjak.no\":1,\"skjervoy.no\":1,\"sklep.pl\":1,\"sko.gov.pl\":1,\"skoczow.pl\":1,\"skodje.no\":1,\"skole.museum\":1,\"skydiving.aero\":1,\"skygearapp.com\":1,\"slask.pl\":1,\"slattum.no\":1,\"sld.do\":1,\"sld.pa\":1,\"slg.br\":1,\"slupsk.pl\":1,\"slz.br\":1,\"sm.ua\":1,\"small-web.org\":1,\"smola.no\":1,\"sn.cn\":1,\"snaase.no\":1,\"snasa.no\":1,\"snillfjord.no\":1,\"snoasa.no\":1,\"so.gov.pl\":1,\"so.it\":1,\"sobetsu.hokkaido.jp\":1,\"soc.lk\":1,\"soc.srcf.net\":1,\"sochi.su\":1,\"society.museum\":1,\"sodegaura.chiba.jp\":1,\"soeda.fukuoka.jp\":1,\"software.aero\":1,\"sogndal.no\":1,\"sogne.no\":1,\"soja.okayama.jp\":1,\"soka.saitama.jp\":1,\"sokndal.no\":1,\"sola.no\":1,\"sologne.museum\":1,\"solund.no\":1,\"soma.fukushima.jp\":1,\"somna.no\":1,\"sondre-land.no\":1,\"sondrio.it\":1,\"songdalen.no\":1,\"soni.nara.jp\":1,\"soo.kagoshima.jp\":1,\"sopot.pl\":1,\"sor-aurdal.no\":1,\"sor-fron.no\":1,\"sor-odal.no\":1,\"sor-varanger.no\":1,\"sorfold.no\":1,\"sorocaba.br\":1,\"sorreisa.no\":1,\"sortland.no\":1,\"sorum.no\":1,\"sos.pl\":1,\"sosa.chiba.jp\":1,\"sosnowiec.pl\":1,\"soundandvision.museum\":1,\"soundcast.me\":1,\"southcarolina.museum\":1,\"southwest.museum\":1,\"sowa.ibaraki.jp\":1,\"sp.gov.br\":1,\"sp.it\":1,\"sp.leg.br\":1,\"space-to-rent.com\":1,\"space.museum\":1,\"spacekit.io\":1,\"spb.ru\":1,\"spb.su\":1,\"spdns.de\":1,\"spdns.eu\":1,\"spdns.org\":1,\"spectrum.myjino.ru\":2,\"sphinx.mythic-beasts.com\":1,\"spjelkavik.no\":1,\"sport.hu\":1,\"spy.museum\":1,\"spydeberg.no\":1,\"square.museum\":1,\"square7.ch\":1,\"square7.de\":1,\"square7.net\":1,\"sr.gov.pl\":1,\"sr.it\":1,\"srv.br\":1,\"ss.it\":1,\"ssl.origin.cdn77-secure.org\":1,\"st.no\":1,\"stackhero-network.com\":1,\"stadt.museum\":1,\"stage.nodeart.io\":1,\"staging.onred.one\":1,\"stalbans.museum\":1,\"stalowa-wola.pl\":1,\"stange.no\":1,\"starachowice.pl\":1,\"stargard.pl\":1,\"starnberg.museum\":1,\"starostwo.gov.pl\":1,\"stat.no\":1,\"state.museum\":1,\"stateofdelaware.museum\":1,\"stathelle.no\":1,\"static-access.net\":1,\"static.land\":1,\"static.observableusercontent.com\":1,\"statics.cloud\":2,\"station.museum\":1,\"stavanger.no\":1,\"stavern.no\":1,\"steam.museum\":1,\"steiermark.museum\":1,\"steigen.no\":1,\"steinkjer.no\":1,\"stg.dev\":2,\"sth.ac.at\":1,\"stjohn.museum\":1,\"stjordal.no\":1,\"stjordalshalsen.no\":1,\"stockholm.museum\":1,\"stokke.no\":1,\"stolos.io\":2,\"stor-elvdal.no\":1,\"storage.yandexcloud.net\":1,\"stord.no\":1,\"stordal.no\":1,\"store.bb\":1,\"store.dk\":1,\"store.nf\":1,\"store.ro\":1,\"store.st\":1,\"store.ve\":1,\"storfjord.no\":1,\"storj.farm\":1,\"stpetersburg.museum\":1,\"strand.no\":1,\"stranda.no\":1,\"stryn.no\":1,\"student.aero\":1,\"stuff-4-sale.org\":1,\"stuff-4-sale.us\":1,\"stufftoread.com\":1,\"stuttgart.museum\":1,\"sue.fukuoka.jp\":1,\"suedtirol.it\":1,\"suginami.tokyo.jp\":1,\"sugito.saitama.jp\":1,\"suifu.ibaraki.jp\":1,\"suisse.museum\":1,\"suita.osaka.jp\":1,\"sukagawa.fukushima.jp\":1,\"sukumo.kochi.jp\":1,\"sula.no\":1,\"suldal.no\":1,\"suli.hu\":1,\"sumida.tokyo.jp\":1,\"sumita.iwate.jp\":1,\"sumoto.hyogo.jp\":1,\"sumoto.kumamoto.jp\":1,\"sumy.ua\":1,\"sunagawa.hokkaido.jp\":1,\"sund.no\":1,\"sunndal.no\":1,\"surgeonshall.museum\":1,\"surnadal.no\":1,\"surrey.museum\":1,\"susaki.kochi.jp\":1,\"susono.shizuoka.jp\":1,\"suwa.nagano.jp\":1,\"suwalki.pl\":1,\"suzaka.nagano.jp\":1,\"suzu.ishikawa.jp\":1,\"suzuka.mie.jp\":1,\"sv.it\":1,\"svalbard.no\":1,\"svc.firenet.ch\":2,\"sveio.no\":1,\"svelvik.no\":1,\"svizzera.museum\":1,\"svn-repos.de\":1,\"sweden.museum\":1,\"sweetpepper.org\":1,\"swidnica.pl\":1,\"swidnik.pl\":1,\"swiebodzin.pl\":1,\"swinoujscie.pl\":1,\"sx.cn\":1,\"sydney.museum\":1,\"sykkylven.no\":1,\"syncloud.it\":1,\"syno-ds.de\":1,\"synology-diskstation.de\":1,\"synology-ds.de\":1,\"synology.me\":1,\"sys.qcx.io\":2,\"sytes.net\":1,\"szczecin.pl\":1,\"szczytno.pl\":1,\"szex.hu\":1,\"szkola.pl\":1,\"t.bg\":1,\"t.se\":1,\"t3l3p0rt.net\":1,\"ta.it\":1,\"taa.it\":1,\"tabayama.yamanashi.jp\":1,\"tabuse.yamaguchi.jp\":1,\"tachiarai.fukuoka.jp\":1,\"tachikawa.tokyo.jp\":1,\"tadaoka.osaka.jp\":1,\"tado.mie.jp\":1,\"tadotsu.kagawa.jp\":1,\"tagajo.miyagi.jp\":1,\"tagami.niigata.jp\":1,\"tagawa.fukuoka.jp\":1,\"tahara.aichi.jp\":1,\"taifun-dns.de\":1,\"taiji.wakayama.jp\":1,\"taiki.hokkaido.jp\":1,\"taiki.mie.jp\":1,\"tainai.niigata.jp\":1,\"taira.toyama.jp\":1,\"taishi.hyogo.jp\":1,\"taishi.osaka.jp\":1,\"taishin.fukushima.jp\":1,\"taito.tokyo.jp\":1,\"taiwa.miyagi.jp\":1,\"tajimi.gifu.jp\":1,\"tajiri.osaka.jp\":1,\"taka.hyogo.jp\":1,\"takagi.nagano.jp\":1,\"takahagi.ibaraki.jp\":1,\"takahama.aichi.jp\":1,\"takahama.fukui.jp\":1,\"takaharu.miyazaki.jp\":1,\"takahashi.okayama.jp\":1,\"takahata.yamagata.jp\":1,\"takaishi.osaka.jp\":1,\"takamatsu.kagawa.jp\":1,\"takamori.kumamoto.jp\":1,\"takamori.nagano.jp\":1,\"takanabe.miyazaki.jp\":1,\"takanezawa.tochigi.jp\":1,\"takaoka.toyama.jp\":1,\"takarazuka.hyogo.jp\":1,\"takasago.hyogo.jp\":1,\"takasaki.gunma.jp\":1,\"takashima.shiga.jp\":1,\"takasu.hokkaido.jp\":1,\"takata.fukuoka.jp\":1,\"takatori.nara.jp\":1,\"takatsuki.osaka.jp\":1,\"takatsuki.shiga.jp\":1,\"takayama.gifu.jp\":1,\"takayama.gunma.jp\":1,\"takayama.nagano.jp\":1,\"takazaki.miyazaki.jp\":1,\"takehara.hiroshima.jp\":1,\"taketa.oita.jp\":1,\"taketomi.okinawa.jp\":1,\"taki.mie.jp\":1,\"takikawa.hokkaido.jp\":1,\"takino.hyogo.jp\":1,\"takinoue.hokkaido.jp\":1,\"takko.aomori.jp\":1,\"tako.chiba.jp\":1,\"taku.saga.jp\":1,\"tama.tokyo.jp\":1,\"tamakawa.fukushima.jp\":1,\"tamaki.mie.jp\":1,\"tamamura.gunma.jp\":1,\"tamano.okayama.jp\":1,\"tamatsukuri.ibaraki.jp\":1,\"tamayu.shimane.jp\":1,\"tamba.hyogo.jp\":1,\"tana.no\":1,\"tanabe.kyoto.jp\":1,\"tanabe.wakayama.jp\":1,\"tanagura.fukushima.jp\":1,\"tananger.no\":1,\"tank.museum\":1,\"tanohata.iwate.jp\":1,\"tara.saga.jp\":1,\"tarama.okinawa.jp\":1,\"taranto.it\":1,\"targi.pl\":1,\"tarnobrzeg.pl\":1,\"tarui.gifu.jp\":1,\"tarumizu.kagoshima.jp\":1,\"tas.au\":1,\"tas.edu.au\":1,\"tas.gov.au\":1,\"tashkent.su\":1,\"tatebayashi.gunma.jp\":1,\"tateshina.nagano.jp\":1,\"tateyama.chiba.jp\":1,\"tateyama.toyama.jp\":1,\"tatsuno.hyogo.jp\":1,\"tatsuno.nagano.jp\":1,\"tawaramoto.nara.jp\":1,\"taxi.br\":1,\"tc.br\":1,\"tcm.museum\":1,\"tcp4.me\":1,\"te.it\":1,\"te.ua\":1,\"teaches-yoga.com\":1,\"teams.algorithmia.com\":0,\"tec.br\":1,\"tec.mi.us\":1,\"tec.ve\":1,\"technology.museum\":1,\"tecnologia.bo\":1,\"tel.tr\":1,\"tele.amune.org\":1,\"telebit.app\":1,\"telebit.io\":1,\"telebit.xyz\":2,\"telekommunikation.museum\":1,\"television.museum\":1,\"temp-dns.com\":1,\"tempio-olbia.it\":1,\"tempioolbia.it\":1,\"tendo.yamagata.jp\":1,\"tenei.fukushima.jp\":1,\"tenkawa.nara.jp\":1,\"tenri.nara.jp\":1,\"teo.br\":1,\"teramo.it\":1,\"termez.su\":1,\"terni.it\":1,\"ternopil.ua\":1,\"teshikaga.hokkaido.jp\":1,\"test-iserv.de\":1,\"test.algorithmia.com\":0,\"test.ru\":1,\"test.tj\":1,\"texas.museum\":1,\"textile.museum\":1,\"tgory.pl\":1,\"the.br\":1,\"theater.museum\":1,\"theworkpc.com\":1,\"thingdustdata.com\":1,\"thruhere.net\":1,\"time.museum\":1,\"time.no\":1,\"timekeeping.museum\":1,\"tingvoll.no\":1,\"tinn.no\":1,\"tj.cn\":1,\"tjeldsund.no\":1,\"tjome.no\":1,\"tksat.bo\":1,\"tm.cy\":1,\"tm.fr\":1,\"tm.hu\":1,\"tm.km\":1,\"tm.mc\":1,\"tm.mg\":1,\"tm.no\":1,\"tm.pl\":1,\"tm.ro\":1,\"tm.se\":1,\"tm.za\":1,\"tmp.br\":1,\"tn.it\":1,\"tn.us\":1,\"to.gov.br\":1,\"to.gt\":1,\"to.it\":1,\"to.leg.br\":1,\"to.md\":1,\"to.work\":1,\"toba.mie.jp\":1,\"tobe.ehime.jp\":1,\"tobetsu.hokkaido.jp\":1,\"tobishima.aichi.jp\":1,\"tochigi.jp\":1,\"tochigi.tochigi.jp\":1,\"tochio.niigata.jp\":1,\"toda.saitama.jp\":1,\"toei.aichi.jp\":1,\"toga.toyama.jp\":1,\"togakushi.nagano.jp\":1,\"togane.chiba.jp\":1,\"togitsu.nagasaki.jp\":1,\"togliatti.su\":1,\"togo.aichi.jp\":1,\"togura.nagano.jp\":1,\"tohma.hokkaido.jp\":1,\"tohnosho.chiba.jp\":1,\"toho.fukuoka.jp\":1,\"tokai.aichi.jp\":1,\"tokai.ibaraki.jp\":1,\"tokamachi.niigata.jp\":1,\"tokashiki.okinawa.jp\":1,\"toki.gifu.jp\":1,\"tokigawa.saitama.jp\":1,\"tokke.no\":1,\"tokoname.aichi.jp\":1,\"tokorozawa.saitama.jp\":1,\"tokushima.jp\":1,\"tokushima.tokushima.jp\":1,\"tokuyama.yamaguchi.jp\":1,\"tokyo.jp\":1,\"tolga.no\":1,\"tomakomai.hokkaido.jp\":1,\"tomari.hokkaido.jp\":1,\"tome.miyagi.jp\":1,\"tomi.nagano.jp\":1,\"tomigusuku.okinawa.jp\":1,\"tomika.gifu.jp\":1,\"tomioka.gunma.jp\":1,\"tomisato.chiba.jp\":1,\"tomiya.miyagi.jp\":1,\"tomobe.ibaraki.jp\":1,\"tonaki.okinawa.jp\":1,\"tonami.toyama.jp\":1,\"tondabayashi.osaka.jp\":1,\"tone.ibaraki.jp\":1,\"tono.iwate.jp\":1,\"tonosho.kagawa.jp\":1,\"tonsberg.no\":1,\"toolforge.org\":1,\"toon.ehime.jp\":1,\"topology.museum\":1,\"torahime.shiga.jp\":1,\"toride.ibaraki.jp\":1,\"torino.it\":1,\"torino.museum\":1,\"torsken.no\":1,\"tos.it\":1,\"tosa.kochi.jp\":1,\"tosashimizu.kochi.jp\":1,\"toscana.it\":1,\"toshima.tokyo.jp\":1,\"tosu.saga.jp\":1,\"tottori.jp\":1,\"tottori.tottori.jp\":1,\"touch.museum\":1,\"tourism.pl\":1,\"tourism.tn\":1,\"towada.aomori.jp\":1,\"town.museum\":1,\"townnews-staging.com\":1,\"toya.hokkaido.jp\":1,\"toyako.hokkaido.jp\":1,\"toyama.jp\":1,\"toyama.toyama.jp\":1,\"toyo.kochi.jp\":1,\"toyoake.aichi.jp\":1,\"toyohashi.aichi.jp\":1,\"toyokawa.aichi.jp\":1,\"toyonaka.osaka.jp\":1,\"toyone.aichi.jp\":1,\"toyono.osaka.jp\":1,\"toyooka.hyogo.jp\":1,\"toyosato.shiga.jp\":1,\"toyota.aichi.jp\":1,\"toyota.yamaguchi.jp\":1,\"toyotomi.hokkaido.jp\":1,\"toyotsu.fukuoka.jp\":1,\"toyoura.hokkaido.jp\":1,\"tozawa.yamagata.jp\":1,\"tozsde.hu\":1,\"tp.it\":1,\"tr.eu.org\":1,\"tr.it\":1,\"tr.no\":1,\"tra.kp\":1,\"trader.aero\":1,\"trading.aero\":1,\"traeumtgerade.de\":1,\"trafficplex.cloud\":1,\"trainer.aero\":1,\"trana.no\":1,\"tranby.no\":1,\"trani-andria-barletta.it\":1,\"trani-barletta-andria.it\":1,\"traniandriabarletta.it\":1,\"tranibarlettaandria.it\":1,\"tranoy.no\":1,\"transport.museum\":1,\"transporte.bo\":1,\"transurl.be\":2,\"transurl.eu\":2,\"transurl.nl\":2,\"trapani.it\":1,\"travel.pl\":1,\"travel.tt\":1,\"trd.br\":1,\"tree.museum\":1,\"trentin-sud-tirol.it\":1,\"trentin-sudtirol.it\":1,\"trentin-sued-tirol.it\":1,\"trentin-suedtirol.it\":1,\"trentino-a-adige.it\":1,\"trentino-aadige.it\":1,\"trentino-alto-adige.it\":1,\"trentino-altoadige.it\":1,\"trentino-s-tirol.it\":1,\"trentino-stirol.it\":1,\"trentino-sud-tirol.it\":1,\"trentino-sudtirol.it\":1,\"trentino-sued-tirol.it\":1,\"trentino-suedtirol.it\":1,\"trentino.it\":1,\"trentinoa-adige.it\":1,\"trentinoaadige.it\":1,\"trentinoalto-adige.it\":1,\"trentinoaltoadige.it\":1,\"trentinos-tirol.it\":1,\"trentinostirol.it\":1,\"trentinosud-tirol.it\":1,\"trentinosudtirol.it\":1,\"trentinosued-tirol.it\":1,\"trentinosuedtirol.it\":1,\"trentinsud-tirol.it\":1,\"trentinsudtirol.it\":1,\"trentinsued-tirol.it\":1,\"trentinsuedtirol.it\":1,\"trento.it\":1,\"treviso.it\":1,\"trieste.it\":1,\"triton.zone\":2,\"troandin.no\":1,\"trogstad.no\":1,\"troitsk.su\":1,\"trolley.museum\":1,\"tromsa.no\":1,\"tromso.no\":1,\"trondheim.no\":1,\"trust.museum\":1,\"trustee.museum\":1,\"trycloudflare.com\":1,\"trysil.no\":1,\"ts.it\":1,\"tselinograd.su\":1,\"tsk.tr\":1,\"tsu.mie.jp\":1,\"tsubame.niigata.jp\":1,\"tsubata.ishikawa.jp\":1,\"tsubetsu.hokkaido.jp\":1,\"tsuchiura.ibaraki.jp\":1,\"tsuga.tochigi.jp\":1,\"tsugaru.aomori.jp\":1,\"tsuiki.fukuoka.jp\":1,\"tsukigata.hokkaido.jp\":1,\"tsukiyono.gunma.jp\":1,\"tsukuba.ibaraki.jp\":1,\"tsukui.kanagawa.jp\":1,\"tsukumi.oita.jp\":1,\"tsumagoi.gunma.jp\":1,\"tsunan.niigata.jp\":1,\"tsuno.kochi.jp\":1,\"tsuno.miyazaki.jp\":1,\"tsuru.yamanashi.jp\":1,\"tsuruga.fukui.jp\":1,\"tsurugashima.saitama.jp\":1,\"tsurugi.ishikawa.jp\":1,\"tsuruoka.yamagata.jp\":1,\"tsuruta.aomori.jp\":1,\"tsushima.aichi.jp\":1,\"tsushima.nagasaki.jp\":1,\"tsuwano.shimane.jp\":1,\"tsuyama.okayama.jp\":1,\"tt.im\":1,\"tula.su\":1,\"tunk.org\":1,\"tur.ar\":1,\"tur.br\":1,\"turek.pl\":1,\"turen.tn\":1,\"turin.it\":1,\"turystyka.pl\":1,\"tuscany.it\":1,\"tuva.su\":1,\"tuxfamily.org\":1,\"tv.bb\":1,\"tv.bo\":1,\"tv.br\":1,\"tv.im\":1,\"tv.it\":1,\"tv.kg\":1,\"tv.na\":1,\"tv.sd\":1,\"tv.tr\":1,\"tv.tz\":1,\"tvedestrand.no\":1,\"tw.cn\":1,\"twmail.cc\":1,\"twmail.net\":1,\"twmail.org\":1,\"tx.us\":1,\"tychy.pl\":1,\"tydal.no\":1,\"tynset.no\":1,\"tysfjord.no\":1,\"tysnes.no\":1,\"tysvar.no\":1,\"u.bg\":1,\"u.channelsdvr.net\":1,\"u.se\":1,\"u2-local.xnbay.com\":1,\"u2.xnbay.com\":1,\"ua.rs\":1,\"ube.yamaguchi.jp\":1,\"uber.space\":1,\"uberspace.de\":2,\"uchihara.ibaraki.jp\":1,\"uchiko.ehime.jp\":1,\"uchinada.ishikawa.jp\":1,\"uchinomi.kagawa.jp\":1,\"ud.it\":1,\"uda.nara.jp\":1,\"udi.br\":1,\"udine.it\":1,\"udono.mie.jp\":1,\"ueda.nagano.jp\":1,\"ueno.gunma.jp\":1,\"uenohara.yamanashi.jp\":1,\"ufcfan.org\":1,\"ug.gov.pl\":1,\"ugim.gov.pl\":1,\"uhren.museum\":1,\"ui.nabu.casa\":1,\"uji.kyoto.jp\":1,\"ujiie.tochigi.jp\":1,\"ujitawara.kyoto.jp\":1,\"uk.com\":1,\"uk.eu.org\":1,\"uk.kg\":1,\"uk.net\":1,\"uk0.bigv.io\":1,\"ukco.me\":1,\"uki.kumamoto.jp\":1,\"ukiha.fukuoka.jp\":1,\"uklugs.org\":1,\"ullensaker.no\":1,\"ullensvang.no\":1,\"ulm.museum\":1,\"ulsan.kr\":1,\"ulvik.no\":1,\"um.gov.pl\":1,\"umaji.kochi.jp\":1,\"umb.it\":1,\"umbria.it\":1,\"umi.fukuoka.jp\":1,\"umig.gov.pl\":1,\"unazuki.toyama.jp\":1,\"undersea.museum\":1,\"uni5.net\":1,\"union.aero\":1,\"univ.sn\":1,\"university.museum\":1,\"unjarga.no\":1,\"unnan.shimane.jp\":1,\"unusualperson.com\":1,\"unzen.nagasaki.jp\":1,\"uonuma.niigata.jp\":1,\"uozu.toyama.jp\":1,\"upow.gov.pl\":1,\"uppo.gov.pl\":1,\"urakawa.hokkaido.jp\":1,\"urasoe.okinawa.jp\":1,\"urausu.hokkaido.jp\":1,\"urawa.saitama.jp\":1,\"urayasu.chiba.jp\":1,\"urbino-pesaro.it\":1,\"urbinopesaro.it\":1,\"ureshino.mie.jp\":1,\"uri.arpa\":1,\"url.tw\":1,\"urn.arpa\":1,\"urown.cloud\":1,\"uruma.okinawa.jp\":1,\"uryu.hokkaido.jp\":1,\"us-1.evennode.com\":1,\"us-2.evennode.com\":1,\"us-3.evennode.com\":1,\"us-4.evennode.com\":1,\"us-east-1.amazonaws.com\":1,\"us-east-1.elasticbeanstalk.com\":1,\"us-east-2.elasticbeanstalk.com\":1,\"us-gov-west-1.elasticbeanstalk.com\":1,\"us-west-1.elasticbeanstalk.com\":1,\"us-west-2.elasticbeanstalk.com\":1,\"us.ax\":1,\"us.com\":1,\"us.eu.org\":1,\"us.gov.pl\":1,\"us.kg\":1,\"us.na\":1,\"us.org\":1,\"us.platform.sh\":1,\"usa.museum\":1,\"usa.oita.jp\":1,\"usantiques.museum\":1,\"usarts.museum\":1,\"uscountryestate.museum\":1,\"usculture.museum\":1,\"usdecorativearts.museum\":1,\"user.aseinet.ne.jp\":1,\"user.party.eus\":1,\"user.srcf.net\":1,\"usercontent.jp\":1,\"usgarden.museum\":1,\"ushiku.ibaraki.jp\":1,\"ushistory.museum\":1,\"ushuaia.museum\":1,\"uslivinghistory.museum\":1,\"usr.cloud.muni.cz\":1,\"ustka.pl\":1,\"usui.fukuoka.jp\":1,\"usuki.oita.jp\":1,\"ut.us\":1,\"utah.museum\":1,\"utashinai.hokkaido.jp\":1,\"utazas.hu\":1,\"utazu.kagawa.jp\":1,\"uto.kumamoto.jp\":1,\"utsira.no\":1,\"utsunomiya.tochigi.jp\":1,\"utwente.io\":1,\"uvic.museum\":1,\"uw.gov.pl\":1,\"uwajima.ehime.jp\":1,\"uwu.ai\":1,\"uwu.nu\":1,\"uy.com\":1,\"uz.ua\":1,\"uzhgorod.ua\":1,\"uzs.gov.pl\":1,\"v-info.info\":1,\"v.bg\":1,\"v.ua\":1,\"va.it\":1,\"va.no\":1,\"va.us\":1,\"vaapste.no\":1,\"vadso.no\":1,\"vaga.no\":1,\"vagan.no\":1,\"vagsoy.no\":1,\"vaksdal.no\":1,\"val-d-aosta.it\":1,\"val-daosta.it\":1,\"vald-aosta.it\":1,\"valdaosta.it\":1,\"valer.hedmark.no\":1,\"valer.ostfold.no\":1,\"valle-aosta.it\":1,\"valle-d-aosta.it\":1,\"valle-daosta.it\":1,\"valle.no\":1,\"valleaosta.it\":1,\"valled-aosta.it\":1,\"valledaosta.it\":1,\"vallee-aoste.it\":1,\"vallee-d-aoste.it\":1,\"valleeaoste.it\":1,\"valleedaoste.it\":1,\"valley.museum\":1,\"vang.no\":1,\"vantaa.museum\":1,\"vanylven.no\":1,\"vao.it\":1,\"vapor.cloud\":1,\"vaporcloud.io\":1,\"vardo.no\":1,\"varese.it\":1,\"varggat.no\":1,\"varoy.no\":1,\"vb.it\":1,\"vc.it\":1,\"vda.it\":1,\"ve.it\":1,\"vefsn.no\":1,\"vega.no\":1,\"vegarshei.no\":1,\"ven.it\":1,\"veneto.it\":1,\"venezia.it\":1,\"venice.it\":1,\"vennesla.no\":1,\"verbania.it\":1,\"vercel.app\":1,\"vercel.dev\":1,\"vercelli.it\":1,\"verdal.no\":1,\"verona.it\":1,\"verran.no\":1,\"versailles.museum\":1,\"vestby.no\":1,\"vestnes.no\":1,\"vestre-slidre.no\":1,\"vestre-toten.no\":1,\"vestvagoy.no\":1,\"vet.br\":1,\"veterinaire.fr\":1,\"veterinaire.km\":1,\"vevelstad.no\":1,\"vf.no\":1,\"vgs.no\":1,\"vi.it\":1,\"vi.us\":1,\"vibo-valentia.it\":1,\"vibovalentia.it\":1,\"vic.au\":1,\"vic.edu.au\":1,\"vic.gov.au\":1,\"vicenza.it\":1,\"video.hu\":1,\"vik.no\":1,\"viking.museum\":1,\"vikna.no\":1,\"village.museum\":1,\"vindafjord.no\":1,\"vinnica.ua\":1,\"vinnytsia.ua\":1,\"vip.jelastic.cloud\":1,\"vipsinaapp.com\":1,\"virginia.museum\":1,\"virtual-user.de\":1,\"virtual.museum\":1,\"virtualserver.io\":1,\"virtualuser.de\":1,\"virtueeldomein.nl\":1,\"virtuel.museum\":1,\"viterbo.it\":1,\"vix.br\":1,\"vlaanderen.museum\":1,\"vladikavkaz.ru\":1,\"vladikavkaz.su\":1,\"vladimir.ru\":1,\"vladimir.su\":1,\"vlog.br\":1,\"vm.bytemark.co.uk\":1,\"vn.ua\":1,\"voagat.no\":1,\"volda.no\":1,\"volkenkunde.museum\":1,\"vologda.su\":1,\"volyn.ua\":1,\"voorloper.cloud\":1,\"voss.no\":1,\"vossevangen.no\":1,\"vpndns.net\":1,\"vpnplus.to\":1,\"vps.mcdir.ru\":1,\"vps.myjino.ru\":2,\"vr.it\":1,\"vs.it\":1,\"vs.mythic-beasts.com\":1,\"vt.it\":1,\"vt.us\":1,\"vv.it\":1,\"vxl.sh\":1,\"w.bg\":1,\"w.se\":1,\"wa.au\":1,\"wa.edu.au\":1,\"wa.gov.au\":1,\"wa.us\":1,\"wada.nagano.jp\":1,\"wafflecell.com\":1,\"wajiki.tokushima.jp\":1,\"wajima.ishikawa.jp\":1,\"wakasa.fukui.jp\":1,\"wakasa.tottori.jp\":1,\"wakayama.jp\":1,\"wakayama.wakayama.jp\":1,\"wake.okayama.jp\":1,\"wakkanai.hokkaido.jp\":1,\"wakuya.miyagi.jp\":1,\"walbrzych.pl\":1,\"wales.museum\":1,\"wallonie.museum\":1,\"wanouchi.gifu.jp\":1,\"war.museum\":1,\"warabi.saitama.jp\":1,\"warmia.pl\":1,\"warszawa.pl\":1,\"washingtondc.museum\":1,\"washtenaw.mi.us\":1,\"wassamu.hokkaido.jp\":1,\"watarai.mie.jp\":1,\"watari.miyagi.jp\":1,\"watch-and-clock.museum\":1,\"watchandclock.museum\":1,\"waw.pl\":1,\"wazuka.kyoto.jp\":1,\"we.bs\":1,\"we.tc\":1,\"web.app\":1,\"web.bo\":1,\"web.co\":1,\"web.do\":1,\"web.gu\":1,\"web.id\":1,\"web.in\":1,\"web.lk\":1,\"web.nf\":1,\"web.ni\":1,\"web.pk\":1,\"web.tj\":1,\"web.tr\":1,\"web.ve\":1,\"web.za\":1,\"webhare.dev\":2,\"webhop.biz\":1,\"webhop.info\":1,\"webhop.me\":1,\"webhop.net\":1,\"webhop.org\":1,\"webhosting.be\":1,\"webredirect.org\":1,\"website.yandexcloud.net\":1,\"webspace.rocks\":1,\"wedeploy.io\":1,\"wedeploy.me\":1,\"wedeploy.sh\":1,\"wegrow.pl\":1,\"wellbeingzone.co.uk\":1,\"wellbeingzone.eu\":1,\"western.museum\":1,\"westfalen.museum\":1,\"whaling.museum\":1,\"wi.us\":1,\"wielun.pl\":1,\"wien.funkfeuer.at\":1,\"wif.gov.pl\":1,\"wiih.gov.pl\":1,\"wiki.bo\":1,\"wiki.br\":1,\"wildlife.museum\":1,\"williamsburg.museum\":1,\"winb.gov.pl\":1,\"windmill.museum\":1,\"wios.gov.pl\":1,\"witd.gov.pl\":1,\"withgoogle.com\":1,\"withyoutube.com\":1,\"wiw.gov.pl\":1,\"wlocl.pl\":1,\"wloclawek.pl\":1,\"wmcloud.org\":1,\"wmflabs.org\":1,\"wnext.app\":1,\"wodzislaw.pl\":1,\"wolomin.pl\":1,\"workers.dev\":1,\"workinggroup.aero\":1,\"workisboring.com\":1,\"works.aero\":1,\"workshop.museum\":1,\"worse-than.tv\":1,\"wpdevcloud.com\":1,\"wpenginepowered.com\":1,\"writesthisblog.com\":1,\"wroc.pl\":1,\"wroclaw.pl\":1,\"ws.na\":1,\"wsa.gov.pl\":1,\"wskr.gov.pl\":1,\"wuoz.gov.pl\":1,\"wv.us\":1,\"www.ck\":0,\"www.ro\":1,\"wy.us\":1,\"wzmiuw.gov.pl\":1,\"x.bg\":1,\"x.mythic-beasts.com\":1,\"x.se\":1,\"x443.pw\":1,\"xen.prgmr.com\":1,\"xenapponazure.com\":1,\"xj.cn\":1,\"xn--0trq7p7nn.jp\":1,\"xn--12c1fe0br.xn--o3cw4h\":1,\"xn--12cfi8ixb8l.xn--o3cw4h\":1,\"xn--12co0c3b4eva.xn--o3cw4h\":1,\"xn--1ctwo.jp\":1,\"xn--1lqs03n.jp\":1,\"xn--1lqs71d.jp\":1,\"xn--2m4a15e.jp\":1,\"xn--32vp30h.jp\":1,\"xn--4it168d.jp\":1,\"xn--4it797k.jp\":1,\"xn--4pvxs.jp\":1,\"xn--55qx5d.cn\":1,\"xn--55qx5d.hk\":1,\"xn--55qx5d.xn--j6w193g\":1,\"xn--5js045d.jp\":1,\"xn--5rtp49c.jp\":1,\"xn--5rtq34k.jp\":1,\"xn--6btw5a.jp\":1,\"xn--6orx2r.jp\":1,\"xn--7t0a264c.jp\":1,\"xn--80au.xn--90a3ac\":1,\"xn--8ltr62k.jp\":1,\"xn--8pvr4u.jp\":1,\"xn--90azh.xn--90a3ac\":1,\"xn--9dbhblg6di.museum\":1,\"xn--andy-ira.no\":1,\"xn--aroport-bya.ci\":1,\"xn--asky-ira.no\":1,\"xn--aurskog-hland-jnb.no\":1,\"xn--avery-yua.no\":1,\"xn--b-5ga.nordland.no\":1,\"xn--b-5ga.telemark.no\":1,\"xn--balsan-sdtirol-nsb.it\":1,\"xn--bdddj-mrabd.no\":1,\"xn--bearalvhki-y4a.no\":1,\"xn--berlevg-jxa.no\":1,\"xn--bhcavuotna-s4a.no\":1,\"xn--bhccavuotna-k7a.no\":1,\"xn--bidr-5nac.no\":1,\"xn--bievt-0qa.no\":1,\"xn--bjarky-fya.no\":1,\"xn--bjddar-pta.no\":1,\"xn--blt-elab.no\":1,\"xn--bmlo-gra.no\":1,\"xn--bod-2na.no\":1,\"xn--bozen-sdtirol-2ob.it\":1,\"xn--brnny-wuac.no\":1,\"xn--brnnysund-m8ac.no\":1,\"xn--brum-voa.no\":1,\"xn--btsfjord-9za.no\":1,\"xn--bulsan-sdtirol-nsb.it\":1,\"xn--c1avg.xn--90a3ac\":1,\"xn--c3s14m.jp\":1,\"xn--cesena-forl-mcb.it\":1,\"xn--cesenaforl-i8a.it\":1,\"xn--ciqpn.hk\":1,\"xn--comunicaes-v6a2o.museum\":1,\"xn--correios-e-telecomunicaes-ghc29a.museum\":1,\"xn--czrw28b.tw\":1,\"xn--d1at.xn--90a3ac\":1,\"xn--d5qv7z876c.jp\":1,\"xn--davvenjrga-y4a.no\":1,\"xn--djrs72d6uy.jp\":1,\"xn--djty4k.jp\":1,\"xn--dnna-gra.no\":1,\"xn--drbak-wua.no\":1,\"xn--dyry-ira.no\":1,\"xn--efvn9s.jp\":1,\"xn--ehqz56n.jp\":1,\"xn--elqq16h.jp\":1,\"xn--eveni-0qa01ga.no\":1,\"xn--f6qx53a.jp\":1,\"xn--finny-yua.no\":1,\"xn--fjord-lra.no\":1,\"xn--fl-zia.no\":1,\"xn--flor-jra.no\":1,\"xn--forl-cesena-fcb.it\":1,\"xn--forlcesena-c8a.it\":1,\"xn--frde-gra.no\":1,\"xn--frna-woa.no\":1,\"xn--frya-hra.no\":1,\"xn--ggaviika-8ya47h.no\":1,\"xn--gildeskl-g0a.no\":1,\"xn--givuotna-8ya.no\":1,\"xn--gjvik-wua.no\":1,\"xn--gls-elac.no\":1,\"xn--gmq050i.hk\":1,\"xn--gmqw5a.hk\":1,\"xn--gmqw5a.xn--j6w193g\":1,\"xn--h-2fa.no\":1,\"xn--h1aegh.museum\":1,\"xn--h3cuzk1di.xn--o3cw4h\":1,\"xn--hbmer-xqa.no\":1,\"xn--hcesuolo-7ya35b.no\":1,\"xn--hery-ira.nordland.no\":1,\"xn--hery-ira.xn--mre-og-romsdal-qqb.no\":1,\"xn--hgebostad-g3a.no\":1,\"xn--hkkinen-5wa.fi\":1,\"xn--hmmrfeasta-s4ac.no\":1,\"xn--hnefoss-q1a.no\":1,\"xn--hobl-ira.no\":1,\"xn--holtlen-hxa.no\":1,\"xn--hpmir-xqa.no\":1,\"xn--hyanger-q1a.no\":1,\"xn--hylandet-54a.no\":1,\"xn--indery-fya.no\":1,\"xn--io0a7i.cn\":1,\"xn--io0a7i.hk\":1,\"xn--jlster-bya.no\":1,\"xn--jrpeland-54a.no\":1,\"xn--k7yn95e.jp\":1,\"xn--karmy-yua.no\":1,\"xn--kbrq7o.jp\":1,\"xn--kfjord-iua.no\":1,\"xn--klbu-woa.no\":1,\"xn--klt787d.jp\":1,\"xn--kltp7d.jp\":1,\"xn--kltx9a.jp\":1,\"xn--klty5x.jp\":1,\"xn--koluokta-7ya57h.no\":1,\"xn--krager-gya.no\":1,\"xn--kranghke-b0a.no\":1,\"xn--krdsherad-m8a.no\":1,\"xn--krehamn-dxa.no\":1,\"xn--krjohka-hwab49j.no\":1,\"xn--ksnes-uua.no\":1,\"xn--kvfjord-nxa.no\":1,\"xn--kvitsy-fya.no\":1,\"xn--kvnangen-k0a.no\":1,\"xn--l-1fa.no\":1,\"xn--laheadju-7ya.no\":1,\"xn--langevg-jxa.no\":1,\"xn--lcvr32d.hk\":1,\"xn--ldingen-q1a.no\":1,\"xn--leagaviika-52b.no\":1,\"xn--lesund-hua.no\":1,\"xn--lgrd-poac.no\":1,\"xn--lhppi-xqa.no\":1,\"xn--linds-pra.no\":1,\"xn--lns-qla.museum\":1,\"xn--loabt-0qa.no\":1,\"xn--lrdal-sra.no\":1,\"xn--lrenskog-54a.no\":1,\"xn--lt-liac.no\":1,\"xn--lten-gra.no\":1,\"xn--lury-ira.no\":1,\"xn--m3ch0j3a.xn--o3cw4h\":1,\"xn--mely-ira.no\":1,\"xn--merker-kua.no\":1,\"xn--mgba3a4f16a.ir\":1,\"xn--mgba3a4fra.ir\":1,\"xn--mjndalen-64a.no\":1,\"xn--mk0axi.hk\":1,\"xn--mkru45i.jp\":1,\"xn--mlatvuopmi-s4a.no\":1,\"xn--mli-tla.no\":1,\"xn--mlselv-iua.no\":1,\"xn--moreke-jua.no\":1,\"xn--mori-qsa.nz\":1,\"xn--mosjen-eya.no\":1,\"xn--mot-tla.no\":1,\"xn--msy-ula0h.no\":1,\"xn--mtta-vrjjat-k7af.no\":1,\"xn--muost-0qa.no\":1,\"xn--mxtq1m.hk\":1,\"xn--mxtq1m.xn--j6w193g\":1,\"xn--nit225k.jp\":1,\"xn--nmesjevuemie-tcba.no\":1,\"xn--nry-yla5g.no\":1,\"xn--ntso0iqx3a.jp\":1,\"xn--ntsq17g.jp\":1,\"xn--nttery-byae.no\":1,\"xn--nvuotna-hwa.no\":1,\"xn--o1ac.xn--90a3ac\":1,\"xn--o1ach.xn--90a3ac\":1,\"xn--o3cyx2a.xn--o3cw4h\":1,\"xn--od0alg.cn\":1,\"xn--od0alg.hk\":1,\"xn--od0alg.xn--j6w193g\":1,\"xn--od0aq3b.hk\":1,\"xn--oppegrd-ixa.no\":1,\"xn--ostery-fya.no\":1,\"xn--osyro-wua.no\":1,\"xn--porsgu-sta26f.no\":1,\"xn--pssu33l.jp\":1,\"xn--qqqt11m.jp\":1,\"xn--rady-ira.no\":1,\"xn--rdal-poa.no\":1,\"xn--rde-ula.no\":1,\"xn--rdy-0nab.no\":1,\"xn--rennesy-v1a.no\":1,\"xn--rhkkervju-01af.no\":1,\"xn--rholt-mra.no\":1,\"xn--rht27z.jp\":1,\"xn--rht3d.jp\":1,\"xn--rht61e.jp\":1,\"xn--risa-5na.no\":1,\"xn--risr-ira.no\":1,\"xn--rland-uua.no\":1,\"xn--rlingen-mxa.no\":1,\"xn--rmskog-bya.no\":1,\"xn--rny31h.jp\":1,\"xn--rros-gra.no\":1,\"xn--rskog-uua.no\":1,\"xn--rst-0na.no\":1,\"xn--rsta-fra.no\":1,\"xn--ryken-vua.no\":1,\"xn--ryrvik-bya.no\":1,\"xn--s-1fa.no\":1,\"xn--sandnessjen-ogb.no\":1,\"xn--sandy-yua.no\":1,\"xn--sdtirol-n2a.it\":1,\"xn--seral-lra.no\":1,\"xn--sgne-gra.no\":1,\"xn--skierv-uta.no\":1,\"xn--skjervy-v1a.no\":1,\"xn--skjk-soa.no\":1,\"xn--sknit-yqa.no\":1,\"xn--sknland-fxa.no\":1,\"xn--slat-5na.no\":1,\"xn--slt-elab.no\":1,\"xn--smla-hra.no\":1,\"xn--smna-gra.no\":1,\"xn--snase-nra.no\":1,\"xn--sndre-land-0cb.no\":1,\"xn--snes-poa.no\":1,\"xn--snsa-roa.no\":1,\"xn--sr-aurdal-l8a.no\":1,\"xn--sr-fron-q1a.no\":1,\"xn--sr-odal-q1a.no\":1,\"xn--sr-varanger-ggb.no\":1,\"xn--srfold-bya.no\":1,\"xn--srreisa-q1a.no\":1,\"xn--srum-gra.no\":1,\"xn--stjrdal-s1a.no\":1,\"xn--stjrdalshalsen-sqb.no\":1,\"xn--stre-toten-zcb.no\":1,\"xn--tjme-hra.no\":1,\"xn--tn0ag.hk\":1,\"xn--tnsberg-q1a.no\":1,\"xn--tor131o.jp\":1,\"xn--trany-yua.no\":1,\"xn--trentin-sd-tirol-rzb.it\":1,\"xn--trentin-sdtirol-7vb.it\":1,\"xn--trentino-sd-tirol-c3b.it\":1,\"xn--trentino-sdtirol-szb.it\":1,\"xn--trentinosd-tirol-rzb.it\":1,\"xn--trentinosdtirol-7vb.it\":1,\"xn--trentinsd-tirol-6vb.it\":1,\"xn--trentinsdtirol-nsb.it\":1,\"xn--trgstad-r1a.no\":1,\"xn--trna-woa.no\":1,\"xn--troms-zua.no\":1,\"xn--tysvr-vra.no\":1,\"xn--uc0atv.hk\":1,\"xn--uc0atv.tw\":1,\"xn--uc0atv.xn--j6w193g\":1,\"xn--uc0ay4a.hk\":1,\"xn--uist22h.jp\":1,\"xn--uisz3g.jp\":1,\"xn--unjrga-rta.no\":1,\"xn--uuwu58a.jp\":1,\"xn--vads-jra.no\":1,\"xn--valle-aoste-ebb.it\":1,\"xn--valle-d-aoste-ehb.it\":1,\"xn--valleaoste-e7a.it\":1,\"xn--valledaoste-ebb.it\":1,\"xn--vard-jra.no\":1,\"xn--vegrshei-c0a.no\":1,\"xn--vestvgy-ixa6o.no\":1,\"xn--vg-yiab.no\":1,\"xn--vgan-qoa.no\":1,\"xn--vgsy-qoa0j.no\":1,\"xn--vgu402c.jp\":1,\"xn--vler-qoa.hedmark.no\":1,\"xn--vler-qoa.xn--stfold-9xa.no\":1,\"xn--vre-eiker-k8a.no\":1,\"xn--vrggt-xqad.no\":1,\"xn--vry-yla5g.no\":1,\"xn--wcvs22d.hk\":1,\"xn--wcvs22d.xn--j6w193g\":1,\"xn--yer-zna.no\":1,\"xn--ygarden-p1a.no\":1,\"xn--ystre-slidre-ujb.no\":1,\"xn--zbx025d.jp\":1,\"xn--zf0ao64a.tw\":1,\"xn--zf0avx.hk\":1,\"xnbay.com\":1,\"xs4all.space\":1,\"xx.gl\":1,\"xy.ax\":1,\"xz.cn\":1,\"y.bg\":1,\"y.se\":1,\"yabu.hyogo.jp\":1,\"yabuki.fukushima.jp\":1,\"yachimata.chiba.jp\":1,\"yachiyo.chiba.jp\":1,\"yachiyo.ibaraki.jp\":1,\"yaese.okinawa.jp\":1,\"yahaba.iwate.jp\":1,\"yahiko.niigata.jp\":1,\"yaita.tochigi.jp\":1,\"yaizu.shizuoka.jp\":1,\"yakage.okayama.jp\":1,\"yakumo.hokkaido.jp\":1,\"yakumo.shimane.jp\":1,\"yali.mythic-beasts.com\":1,\"yalta.ua\":1,\"yamada.fukuoka.jp\":1,\"yamada.iwate.jp\":1,\"yamada.toyama.jp\":1,\"yamaga.kumamoto.jp\":1,\"yamagata.gifu.jp\":1,\"yamagata.ibaraki.jp\":1,\"yamagata.jp\":1,\"yamagata.nagano.jp\":1,\"yamagata.yamagata.jp\":1,\"yamaguchi.jp\":1,\"yamakita.kanagawa.jp\":1,\"yamamoto.miyagi.jp\":1,\"yamanakako.yamanashi.jp\":1,\"yamanashi.jp\":1,\"yamanashi.yamanashi.jp\":1,\"yamanobe.yamagata.jp\":1,\"yamanouchi.nagano.jp\":1,\"yamashina.kyoto.jp\":1,\"yamato.fukushima.jp\":1,\"yamato.kanagawa.jp\":1,\"yamato.kumamoto.jp\":1,\"yamatokoriyama.nara.jp\":1,\"yamatotakada.nara.jp\":1,\"yamatsuri.fukushima.jp\":1,\"yamazoe.nara.jp\":1,\"yame.fukuoka.jp\":1,\"yanagawa.fukuoka.jp\":1,\"yanaizu.fukushima.jp\":1,\"yandexcloud.net\":1,\"yao.osaka.jp\":1,\"yaotsu.gifu.jp\":1,\"yasaka.nagano.jp\":1,\"yashio.saitama.jp\":1,\"yashiro.hyogo.jp\":1,\"yasu.shiga.jp\":1,\"yasuda.kochi.jp\":1,\"yasugi.shimane.jp\":1,\"yasuoka.nagano.jp\":1,\"yatomi.aichi.jp\":1,\"yatsuka.shimane.jp\":1,\"yatsushiro.kumamoto.jp\":1,\"yawara.ibaraki.jp\":1,\"yawata.kyoto.jp\":1,\"yawatahama.ehime.jp\":1,\"yazu.tottori.jp\":1,\"ybo.faith\":1,\"ybo.party\":1,\"ybo.review\":1,\"ybo.science\":1,\"ybo.trade\":1,\"ye\":2,\"yk.ca\":1,\"yn.cn\":1,\"yoichi.hokkaido.jp\":1,\"yoita.niigata.jp\":1,\"yoka.hyogo.jp\":1,\"yokaichiba.chiba.jp\":1,\"yokawa.hyogo.jp\":1,\"yokkaichi.mie.jp\":1,\"yokohama.jp\":2,\"yokoshibahikari.chiba.jp\":1,\"yokosuka.kanagawa.jp\":1,\"yokote.akita.jp\":1,\"yokoze.saitama.jp\":1,\"yolasite.com\":1,\"yombo.me\":1,\"yomitan.okinawa.jp\":1,\"yonabaru.okinawa.jp\":1,\"yonago.tottori.jp\":1,\"yonaguni.okinawa.jp\":1,\"yonezawa.yamagata.jp\":1,\"yono.saitama.jp\":1,\"yorii.saitama.jp\":1,\"york.museum\":1,\"yorkshire.museum\":1,\"yoro.gifu.jp\":1,\"yosemite.museum\":1,\"yoshida.saitama.jp\":1,\"yoshida.shizuoka.jp\":1,\"yoshikawa.saitama.jp\":1,\"yoshimi.saitama.jp\":1,\"yoshino.nara.jp\":1,\"yoshinogari.saga.jp\":1,\"yoshioka.gunma.jp\":1,\"yotsukaido.chiba.jp\":1,\"youth.museum\":1,\"yuasa.wakayama.jp\":1,\"yufu.oita.jp\":1,\"yugawa.fukushima.jp\":1,\"yugawara.kanagawa.jp\":1,\"yuki.ibaraki.jp\":1,\"yukuhashi.fukuoka.jp\":1,\"yura.wakayama.jp\":1,\"yurihonjo.akita.jp\":1,\"yusuhara.kochi.jp\":1,\"yusui.kagoshima.jp\":1,\"yuu.yamaguchi.jp\":1,\"yuza.yamagata.jp\":1,\"yuzawa.niigata.jp\":1,\"z.bg\":1,\"z.se\":1,\"za.bz\":1,\"za.com\":1,\"za.net\":1,\"za.org\":1,\"zachpomor.pl\":1,\"zagan.pl\":1,\"zakopane.pl\":1,\"zama.kanagawa.jp\":1,\"zamami.okinawa.jp\":1,\"zao.miyagi.jp\":1,\"zaporizhzhe.ua\":1,\"zaporizhzhia.ua\":1,\"zapto.org\":1,\"zapto.xyz\":1,\"zarow.pl\":1,\"zentsuji.kagawa.jp\":1,\"zgora.pl\":1,\"zgorzelec.pl\":1,\"zhitomir.ua\":1,\"zhytomyr.ua\":1,\"zj.cn\":1,\"zlg.br\":1,\"zoological.museum\":1,\"zoology.museum\":1,\"zp.gov.pl\":1,\"zp.ua\":1,\"zt.ua\":1,\"zushi.kanagawa.jp\":1}");

/***/ }),

/***/ 6834:
/***/ ((module) => {

"use strict";
module.exports = JSON.parse("{\"blank-text\":\"data:text/plain,\",\"blank-css\":\"data:text/css,\",\"blank-js\":\"data:application/javascript,\",\"blank-html\":\"data:text/html,<!DOCTYPE html><html><head></head><body></body></html>\",\"blank-mp3\":\"data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjIwLjEwMAAAAAAAAAAAAAAA//tUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAGAAADAABgYGBgYGBgYGBgYGBgYGBggICAgICAgICAgICAgICAgICgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4P////////////////////8AAAAATGF2YzU4LjM1AAAAAAAAAAAAAAAAJAYAAAAAAAAAAwDVxttG//sUZAAP8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAETEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sUZB4P8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sUZDwP8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sUZFoP8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sUZHgP8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sUZJYP8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV\",\"blank-mp4\":\"data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAAuJtZGF0AAACrwYF//+r3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE2MCByMzAxMU0gY2RlOWE5MyAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMjAgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0xIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDM6MHgxMTMgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MCB0cmVsbGlzPTEgOHg4ZGN0PTEgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz0yIGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MyBiX3B5cmFtaWQ9MiBiX2FkYXB0PTEgYl9iaWFzPTAgZGlyZWN0PTEgd2VpZ2h0Yj0xIG9wZW5fZ29wPTAgd2VpZ2h0cD0yIGtleWludD0yNTAga2V5aW50X21pbj0yNSBzY2VuZWN1dD00MCBpbnRyYV9yZWZyZXNoPTAgcmNfbG9va2FoZWFkPTQwIHJjPWNyZiBtYnRyZWU9MSBjcmY9MjMuMCBxY29tcD0wLjYwIHFwbWluPTAgcXBtYXg9NjkgcXBzdGVwPTQgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAACNliIQAK//+9dvzLK5umjbe9jc2CT9EPcfnoOYC2tjtP+go4QAAAwRtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAAKAABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAACLnRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAZAAAADgAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAACgAAAAAAAEAAAAAAaZtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAADIAAAACAFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAFRbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABEXN0YmwAAACtc3RzZAAAAAAAAAABAAAAnWF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAZAA4AEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAA3YXZjQwFkAAr/4QAaZ2QACvNlHJ42JwEQAAADABAAAAMDIPEiWWABAAZo6+PLIsD8+PgAAAAAEHBhc3AAAAABAAAAAQAAABhzdHRzAAAAAAAAAAEAAAABAAACAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAALaAAAAAQAAABRzdGNvAAAAAAAAAAEAAAAwAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1OC40NS4xMDA=\",\"1x1-transparent-gif\":\"data:image/gif;base64,R0lGODlhAQABAIABAAAAAP///yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\",\"2x2-transparent-png\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAC0lEQVQI12NgQAcAABIAAe+JVKQAAAAASUVORK5CYII=\",\"3x2-transparent-png\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAYAAACddGYaAAAAC0lEQVQI12NgwAUAABoAASRETuUAAAAASUVORK5CYII=\",\"32x32-transparent-png\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGklEQVRYw+3BAQEAAACCIP+vbkhAAQAAAO8GECAAAZf3V9cAAAAASUVORK5CYII=\"}");

/***/ }),

/***/ 7543:
/***/ ((module) => {

"use strict";
module.exports = JSON.parse("[{\"type\":\"ads\",\"languages\":[\"id\",\"ms\"],\"title\":\"ABPindo+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/abpindo+easylist.txt\",\"homepage\":\"http://abpindo.blogspot.com/\"},{\"type\":\"ads\",\"languages\":[\"vi\"],\"title\":\"ABPVN List+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/abpvn+easylist.txt\",\"homepage\":\"http://abpvn.com/\"},{\"type\":\"ads\",\"languages\":[\"bg\"],\"title\":\"Bulgarian list+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/bulgarian_list+easylist.txt\",\"homepage\":\"https://stanev.org/abp/\"},{\"type\":\"ads\",\"languages\":[\"no\",\"nb\",\"nn\",\"da\",\"is\",\"fo\",\"kl\"],\"title\":\"Dandelion Sprout's Nordic Filters+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/dandelion_sprouts_nordic_filters+easylist.txt\",\"homepage\":\"https://github.com/DandelionSprout/adfilt\"},{\"type\":\"ads\",\"languages\":[\"en\"],\"title\":\"EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/easylist.txt\",\"homepage\":\"https://easylist.to/\"},{\"type\":\"ads\",\"languages\":[\"zh\"],\"title\":\"EasyList China+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/easylistchina+easylist.txt\",\"homepage\":\"http://abpchina.org/forum/\"},{\"type\":\"ads\",\"languages\":[\"cs\",\"sk\"],\"title\":\"EasyList Czech and Slovak+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/easylistczechslovak+easylist.txt\",\"homepage\":\"https://adblock.sk/\"},{\"type\":\"ads\",\"languages\":[\"nl\"],\"title\":\"EasyList Dutch+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/easylistdutch+easylist.txt\",\"homepage\":\"https://easylist.to/\"},{\"type\":\"ads\",\"languages\":[\"de\"],\"title\":\"EasyList Germany+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/easylistgermany+easylist.txt\",\"homepage\":\"https://easylist.to/\"},{\"type\":\"ads\",\"languages\":[\"he\"],\"title\":\"EasyList Hebrew+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/israellist+easylist.txt\",\"homepage\":\"https://github.com/easylist/EasyListHebrew\"},{\"type\":\"ads\",\"languages\":[\"it\"],\"title\":\"EasyList Italy+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/easylistitaly+easylist.txt\",\"homepage\":\"https://easylist.to/\"},{\"type\":\"ads\",\"languages\":[\"lt\"],\"title\":\"EasyList Lithuania+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/easylistlithuania+easylist.txt\",\"homepage\":\"http://margevicius.lt/\"},{\"type\":\"ads\",\"languages\":[\"pl\"],\"title\":\"EasyList Polish+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/easylistpolish+easylist.txt\",\"homepage\":\"https://easylist.to/\"},{\"type\":\"ads\",\"languages\":[\"pt\"],\"title\":\"EasyList Portuguese+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/easylistportuguese+easylist.txt\",\"homepage\":\"https://easylist.to/\"},{\"type\":\"ads\",\"languages\":[\"es\"],\"title\":\"EasyList Spanish+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/easylistspanish+easylist.txt\",\"homepage\":\"https://easylist.to/\"},{\"type\":\"ads\",\"languages\":[\"bn\",\"gu\",\"hi\",\"pa\",\"as\",\"mr\",\"ml\",\"te\",\"kn\",\"or\",\"ne\",\"si\"],\"title\":\"IndianList+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/indianlist+easylist.txt\",\"homepage\":\"https://easylist.to/\"},{\"type\":\"ads\",\"languages\":[\"ko\"],\"title\":\"KoreanList+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/koreanlist+easylist.txt\",\"homepage\":\"https://easylist.to/\"},{\"type\":\"ads\",\"languages\":[\"lv\"],\"title\":\"Latvian List+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/latvianlist+easylist.txt\",\"homepage\":\"https://notabug.org/latvian-list/adblock-latvian\"},{\"type\":\"ads\",\"languages\":[\"ar\"],\"title\":\"Liste AR+Liste FR+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/liste_ar+liste_fr+easylist.txt\",\"homepage\":\"https://code.google.com/p/liste-ar-adblock/\"},{\"type\":\"ads\",\"languages\":[\"fr\"],\"title\":\"Liste FR+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/liste_fr+easylist.txt\",\"homepage\":\"https://forums.lanik.us/viewforum.php?f\"},{\"type\":\"ads\",\"languages\":[\"ro\"],\"title\":\"ROList+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/rolist+easylist.txt\",\"homepage\":\"https://zoso.ro/rolist/\"},{\"type\":\"ads\",\"languages\":[\"ru\",\"uk\"],\"title\":\"RuAdList+EasyList\",\"url\":\"https://easylist-downloads.adblockplus.org/ruadlist+easylist.txt\",\"homepage\":\"https://forums.lanik.us/viewforum.php?f\"},{\"type\":\"circumvention\",\"title\":\"ABP filters\",\"url\":\"https://easylist-downloads.adblockplus.org/abp-filters-anti-cv.txt\",\"homepage\":\"https://github.com/abp-filters/abp-filters-anti-cv\"},{\"type\":\"cookies\",\"title\":\"I don't care about cookies\",\"url\":\"https://easylist-downloads.adblockplus.org/i_dont_care_about_cookies.txt\",\"homepage\":\"https://www.i-dont-care-about-cookies.eu/\"},{\"type\":\"notifications\",\"title\":\"Fanboy's Notifications Blocking List\",\"url\":\"https://easylist-downloads.adblockplus.org/fanboy-notifications.txt\",\"homepage\":\"https://easylist.to/\"},{\"type\":\"privacy\",\"title\":\"EasyPrivacy\",\"url\":\"https://easylist-downloads.adblockplus.org/easyprivacy.txt\",\"homepage\":\"https://easylist.to/\"},{\"type\":\"social\",\"title\":\"Fanboy's Social Blocking List\",\"url\":\"https://easylist-downloads.adblockplus.org/fanboy-social.txt\",\"homepage\":\"https://easylist.to/\"}]");

/***/ }),

/***/ 8671:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



const {Prefs} = __webpack_require__(4776);

const {MILLIS_IN_DAY} = __webpack_require__(6936);

/**
 * Converts a version string into a `Date` object with minute-level precision.
 *
 * @param {string} version The version string in `YYYYMMDD[HH[MM]]` format or
 *   just the value `"0"`.
 *
 * @returns {Date} A `Date` object. If the value of `version` is `"0"`, the
 *   returned value represents the Unix epoch.
 */
function versionToDate(version)
{
  if (version == "0")
    return new Date(0);

  let year = version.substring(0, 4);
  let month = version.substring(4, 6);
  let date = version.substring(6, 8);

  let hours = version.substring(8, 10) || "00";
  let minutes = version.substring(10, 12) || "00";

  // The input is nearly a valid ISO 8601 timestamp, except for the hyphens,
  // the colon, and the special characters T and Z. We can use the timestamp
  // string version of the Date constructor directly. Alternatively, we could
  // use Date.UTC(), but that would require some adjustment to the values
  // (e.g. the month must be 0-based).
  return new Date(`${year}-${month}-${date}T${hours}:${minutes}Z`);
}

/**
 * Strips the value of the `firstVersion` parameter down to either `YYYYMMDD`,
 * `YYYYMM`, or `YYYY` depending on its distance from the value of the
 * `currentVersion` parameter.
 *
 * @param {string} firstVersion A version string in `YYYYMMDD[HH[MM]]` format
 *   with an optional `"-E"` suffix or just `"0"` or `"0-E"`.
 * @param {string} currentVersion A version string in `YYYYMMDD[HH[MM]]` format
 *   or just `"0"`.
 *
 * @returns {?string}
 */
function stripFirstVersion(firstVersion, currentVersion)
{
  let eFlag = firstVersion.endsWith("-E");
  if (eFlag)
    firstVersion = firstVersion.slice(0, -2);

  try
  {
    let firstDate = versionToDate(firstVersion);
    let currentDate = versionToDate(currentVersion);

    if (currentDate - firstDate > 365 * MILLIS_IN_DAY)
      firstVersion = firstVersion.substring(0, 4);
    else if (currentDate - firstDate > 30 * MILLIS_IN_DAY)
      firstVersion = firstVersion.substring(0, 6);
    else
      firstVersion = firstVersion.substring(0, 8);
  }
  catch (error)
  {
    return null;
  }

  if (eFlag)
    firstVersion += "-E";

  return firstVersion;
}

/**
 * Checks whether this is a fresh installation.
 * @returns {boolean}
 */
function isFreshInstall()
{
  return !("data" in Prefs.notificationdata);
}

/**
 * `{@link module:analytics.analytics analytics}` implementation.
 */
class Analytics
{
  /**
   * @hideconstructor
   */
  constructor()
  {
  }

  /**
   * Checks whether the given URL is trusted for analytics purposes based on
   * the value of the `analytics.trustedHosts` preference.
   *
   * @param {string} url The URL.
   *
   * @returns {boolean} Whether the URL is trusted.
   */
  isTrusted(url)
  {
    let {trustedHosts} = Prefs.analytics || {};
    if (Array.isArray(trustedHosts))
    {
      try
      {
        return trustedHosts.includes(new URL(url).host);
      }
      catch (error)
      {
      }
    }

    return false;
  }

  /**
   * Returns a string indicating the version of the first ever downloaded
   * resource (as recorded by
   * `{@link module:analytics~Analytics#recordVersion recordVersion()}`), for
   * the purpose of cohort analysis.
   *
   * For privacy reasons, the original value is stripped down to either
   * `YYYYMMDD`, `YYYYMM`, or `YYYY` depending on its age. An `-E` suffix is
   * appended to the original value if it was recorded on an existing
   * installation.
   *
   * @returns {?string} A string indicating the version of the first ever
   *   downloaded resource, or `"0"` or `"0-E"` if there is no data, or `null`
   *   in case of a parsing error.
   */
  getFirstVersion()
  {
    let {analytics} = Prefs;
    if (analytics)
    {
      let {firstVersion = "0", currentVersion = "0"} = analytics.data || {};
      let strippedFirstVersion = stripFirstVersion(firstVersion,
                                                   currentVersion);
      if (strippedFirstVersion)
      {
        if (strippedFirstVersion == "0" && !isFreshInstall())
          strippedFirstVersion = "0-E";

        return strippedFirstVersion;
      }
    }

    return null;
  }

  /**
   * Records the version of a downloaded resource for the purpose of cohort
   * analysis.
   *
   * The value of the `analytics` preference must be set at least to an
   * empty object, otherwise nothing is ever recorded and
   * `{@link module:analytics~Analytics#getFirstVersion getFirstVersion()}`
   * always returns `null`.
   *
   * @param {string} version The version, in `YYYYMMDD[HH[MM]]` format.
   */
  recordVersion(version)
  {
    if (!/^(\d{8}|\d{10}|\d{12})$/.test(version))
      return;

    let {analytics} = Prefs;
    if (analytics)
    {
      if (!analytics.data)
        analytics.data = {};

      let {data} = analytics;

      data.currentVersion = version;

      if (typeof data.firstVersion == "undefined")
      {
        // If this is not a new installation, set the -E flag.
        if (!isFreshInstall())
          version += "-E";

        data.firstVersion = version;
      }

      // JSON values aren't saved unless they are assigned a different object.
      Prefs.analytics = JSON.parse(JSON.stringify(analytics));
    }
  }
}

/**
 * Implements data analytics functions.
 * @type {module:analytics~Analytics}
 */
exports.analytics = new Analytics();


/***/ }),

/***/ 5889:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * A `Cache` object represents a cache of arbitrary data.
 * @package
 */
exports.Cache = class Cache extends Map
{
  /**
   * Creates a cache.
   * @param {number} capacity The maximum number of entries that can exist in
   *   the cache.
   */
  constructor(capacity)
  {
    // Note: This check works for non-number values.
    if (!(capacity >= 1))
      throw new Error("capacity must be a positive number.");

    super();
    this._capacity = capacity;
  }

  /**
   * Writes an entry to the cache.
   *
   * If the cache has reached the specified maximum number of entries, all the
   * old entries are cleared first.
   *
   * @param {?*} key The key for the entry.
   * @param {?*} value The value of the entry.
   */
  set(key, value)
  {
    // To prevent logical errors, neither key nor value is allowed to be
    // undefined.
    if (typeof key == "undefined")
      throw new Error("key must not be undefined.");

    if (typeof value == "undefined")
      throw new Error("value must not be undefined.");

    if (this.size == this._capacity && !this.has(key))
      this.clear();

    super.set(key, value);
  }
};


/***/ }),

/***/ 9173:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * Converts raw text into a regular expression string
 * @param {string} text the string to convert
 * @return {string} regular expression representation of the text
 * @package
 */
exports.textToRegExp = function textToRegExp(text)
{
  return text.replace(/[-/\\^$*+?.()|[\]{}]/g, "\\$&");
};

/**
 * Converts filter text into regular expression string
 * @param {string} text as in Filter()
 * @return {string} regular expression representation of filter text
 * @package
 */
exports.filterToRegExp = function filterToRegExp(text)
{
  // remove multiple wildcards
  text = text.replace(/\*+/g, "*");

  // remove leading wildcard
  if (text[0] == "*")
    text = text.substring(1);

  // remove trailing wildcard
  if (text[text.length - 1] == "*")
    text = text.substring(0, text.length - 1);

  return text
    // remove anchors following separator placeholder
    .replace(/\^\|$/, "^")
    // escape special symbols
    .replace(/\W/g, "\\$&")
    // replace wildcards by .*
    .replace(/\\\*/g, ".*")
    // process separator placeholders (all ANSI characters but alphanumeric
    // characters and _%.-)
    .replace(/\\\^/g, "(?:[\\x00-\\x24\\x26-\\x2C\\x2F\\x3A-\\x40\\x5B-\\x5E\\x60\\x7B-\\x7F]|$)")
    // process extended anchor at expression start
    .replace(/^\\\|\\\|/, "^[\\w\\-]+:\\/+(?!\\/)(?:[^\\/]+\\.)?")
    // process anchor at expression start
    .replace(/^\\\|/, "^")
    // process anchor at expression end
    .replace(/\\\|$/, "$");
};

let splitSelector = exports.splitSelector = function splitSelector(selector)
{
  if (!selector.includes(","))
    return [selector];

  let selectors = [];
  let start = 0;
  let level = 0;
  let sep = "";

  for (let i = 0; i < selector.length; i++)
  {
    let chr = selector[i];

    if (chr == "\\")        // ignore escaped characters
    {
      i++;
    }
    else if (chr == sep)    // don't split within quoted text
    {
      sep = "";             // e.g. [attr=","]
    }
    else if (sep == "")
    {
      if (chr == '"' || chr == "'")
      {
        sep = chr;
      }
      else if (chr == "(")  // don't split between parentheses
      {
        level++;            // e.g. :matches(div,span)
      }
      else if (chr == ")")
      {
        level = Math.max(0, level - 1);
      }
      else if (chr == "," && level == 0)
      {
        selectors.push(selector.substring(start, i));
        start = i + 1;
      }
    }
  }

  selectors.push(selector.substring(start));
  return selectors;
};

function findTargetSelectorIndex(selector)
{
  let index = 0;
  let whitespace = 0;
  let scope = [];

  // Start from the end of the string and go character by character, where each
  // character is a Unicode code point.
  for (let character of [...selector].reverse())
  {
    let currentScope = scope[scope.length - 1];

    if (character == "'" || character == "\"")
    {
      // If we're already within the same type of quote, close the scope;
      // otherwise open a new scope.
      if (currentScope == character)
        scope.pop();
      else
        scope.push(character);
    }
    else if (character == "]" || character == ")")
    {
      // For closing brackets and parentheses, open a new scope only if we're
      // not within a quote. Within quotes these characters should have no
      // meaning.
      if (currentScope != "'" && currentScope != "\"")
        scope.push(character);
    }
    else if (character == "[")
    {
      // If we're already within a bracket, close the scope.
      if (currentScope == "]")
        scope.pop();
    }
    else if (character == "(")
    {
      // If we're already within a parenthesis, close the scope.
      if (currentScope == ")")
        scope.pop();
    }
    else if (!currentScope)
    {
      // At the top level (not within any scope), count the whitespace if we've
      // encountered it. Otherwise if we've hit one of the combinators,
      // terminate here; otherwise if we've hit a non-colon character,
      // terminate here.
      if (/\s/.test(character))
        whitespace++;
      else if ((character == ">" || character == "+" || character == "~") ||
               (whitespace > 0 && character != ":"))
        break;
    }

    // Zero out the whitespace count if we've entered a scope.
    if (scope.length > 0)
      whitespace = 0;

    // Increment the index by the size of the character. Note that for Unicode
    // composite characters (like emoji) this will be more than one.
    index += character.length;
  }

  return selector.length - index + whitespace;
}

/**
 * Qualifies a CSS selector with a qualifier, which may be another CSS selector
 * or an empty string. For example, given the selector "div.bar" and the
 * qualifier "#foo", this function returns "div#foo.bar".
 * @param {string} selector The selector to qualify.
 * @param {string} qualifier The qualifier with which to qualify the selector.
 * @returns {string} The qualified selector.
 * @package
 */
exports.qualifySelector = function qualifySelector(selector, qualifier)
{
  let qualifiedSelector = "";

  let qualifierTargetSelectorIndex = findTargetSelectorIndex(qualifier);
  let [, qualifierType = ""] =
    /^([a-z][a-z-]*)?/i.exec(qualifier.substring(qualifierTargetSelectorIndex));

  for (let sub of splitSelector(selector))
  {
    sub = sub.trim();

    qualifiedSelector += ", ";

    let index = findTargetSelectorIndex(sub);

    // Note that the first group in the regular expression is optional. If it
    // doesn't match (e.g. "#foo::nth-child(1)"), type will be an empty string.
    let [, type = "", rest] =
      /^([a-z][a-z-]*)?\*?(.*)/i.exec(sub.substring(index));

    if (type == qualifierType)
      type = "";

    // If the qualifier ends in a combinator (e.g. "body #foo>"), we put the
    // type and the rest of the selector after the qualifier
    // (e.g. "body #foo>div.bar"); otherwise (e.g. "body #foo") we merge the
    // type into the qualifier (e.g. "body div#foo.bar").
    if (/[\s>+~]$/.test(qualifier))
      qualifiedSelector += sub.substring(0, index) + qualifier + type + rest;
    else
      qualifiedSelector += sub.substring(0, index) + type + qualifier + rest;
  }

  // Remove the initial comma and space.
  return qualifiedSelector.substring(2);
};


/***/ }),

/***/ 298:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



let contentTypes =
/**
 * Content types for request blocking and allowing (allowlisting).
 *
 * There are two kinds of content types: resource types, and special
 * (non-resource) types.
 *
 * Resource types include web resources like scripts, images, and so on.
 *
 * Special types include filter options for popup blocking and CSP header
 * injection as well as flags for allowing documents.
 *
 * By default a filter matches any resource type, but if a filter has an
 * explicit resource type, special option, or allowing flag, like
 * `$script`, `$popup`, or `$elemhide`, then it matches only the given type,
 * option, or flag.
 *
 * @type {object}
 *
 * @public
 */
exports.contentTypes = {
  // Types of web resources.
  OTHER: 1,
  SCRIPT: 2,
  IMAGE: 4,
  STYLESHEET: 8,
  OBJECT: 16,
  SUBDOCUMENT: 32,
  WEBSOCKET: 128,
  WEBRTC: 256,
  PING: 1024,
  XMLHTTPREQUEST: 2048, // 1 << 11

  MEDIA: 16384,
  FONT: 32768, // 1 << 15

  // Special filter options.
  POPUP: 1 << 24,
  CSP: 1 << 25,
  HEADER: 1 << 26,

  // Allowing flags.
  DOCUMENT: 1 << 27,
  GENERICBLOCK: 1 << 28,
  ELEMHIDE: 1 << 29,
  GENERICHIDE: 1 << 30
};

// Backwards compatibility.
contentTypes.BACKGROUND = contentTypes.IMAGE;
contentTypes.XBL = contentTypes.OTHER;
contentTypes.DTD = contentTypes.OTHER;

const RESOURCE_TYPES =
/**
 * Bitmask for resource types like `$script`, `$image`, `$stylesheet`, and so
 * on.
 *
 * If a filter has no explicit content type, it applies to all resource types
 * (but not to any {@link module:contentTypes.SPECIAL_TYPES special types}).
 *
 * @const {number}
 *
 * @package
 */
// The first 24 bits are reserved for resource types like "script", "image",
// and so on.
// https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/ResourceType
exports.RESOURCE_TYPES = (1 << 24) - 1;

const SPECIAL_TYPES = ~RESOURCE_TYPES & (1 << 31) - 1;
/**
 * Bitmask for special "types" (options and flags) like `$csp`, `$elemhide`,
 * and so on.
 *
 * @const {number}
 *
 * @package
 */
exports.SPECIAL_TYPES = SPECIAL_TYPES;

/**
 * Bitmask for "types" (flags) that are for exception rules only, like
 * `$document`, `$elemhide`, and so on.
 *
 * @const {number}
 *
 * @package
 */
exports.ALLOWING_TYPES = contentTypes.DOCUMENT |
                         contentTypes.GENERICBLOCK |
                         contentTypes.ELEMHIDE |
                         contentTypes.GENERICHIDE;

/**
 * Yields individual types from a filter's type mask.
 *
 * @param {number} contentType A filter's type mask.
 * @param {number} [selection] Which types to yield.
 *
 * @generator
 * @yields {number}
 *
 * @package
 */
exports.enumerateTypes = function* enumerateTypes(contentType, selection = ~0)
{
  for (let mask = contentType & selection, bitIndex = 0;
       mask != 0; mask >>>= 1, bitIndex++)
  {
    if ((mask & 1) != 0)
    {
      // Note: The zero-fill right shift by zero is necessary for dropping the
      // sign.
      yield 1 << bitIndex >>> 0;
    }
  }
};


/***/ }),

/***/ 9709:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @fileOverview Downloads a set of URLs in regular time intervals.
 */

const {MILLIS_IN_DAY} = __webpack_require__(6936);
const {isLocalhost} = __webpack_require__(5622);

/**
 * A type of function that yields `{@link module:downloader.Downloadable}`
 * objects to a `{@link module:downloader.Downloader}`.
 *
 * **Note**: The implementation must yield a new
 * `{@link module:downloader.Downloadable}` instance on each call with
 * up-to-date values for properties like
 * `{@link module:downloader.Downloadable#lastCheck}`,
 * `{@link module:downloader.Downloadable#lastVersion}`,
 * `{@link module:downloader.Downloadable#downloadCount}`, and others. If a
 * value is outdated, it may result in unexpected behavior.
 *
 * @callback DataSource
 *
 * @yields {module:downloader.Downloadable}
 * @generator
 *
 * @see module:downloader.Downloader
 * @see module:downloader.Downloader#dataSource
 */

/**
 * Use a `Downloader` object to download a set of URLs at regular time
 * intervals.
 *
 * This class is used by `{@link module:synchronizer.synchronizer}` and
 * `{@link module:notifications.notifications}`.
 *
 * @example
 *
 * function* dataSource()
 * {
 *   yield new Downloadable("https://example.com/filters.txt");
 * }
 *
 * let initialDelay = 1000;
 * let checkInterval = 60000;
 *
 * let downloader = new Downloader(dataSource);
 * downloader.scheduleChecks(checkInterval, initialDelay);
 *
 * downloader.onDownloadStarted = function(downloadable)
 * {
 *   console.log(`Downloading ${downloadable.url} ...`);
 * }
 *
 * @package
 */
exports.Downloader = class Downloader
{
  /**
   * Creates a new downloader instance.
   * @param {module:downloader~DataSource} dataSource
   *   A function that yields `{@link module:downloader.Downloadable}` objects
   *   on each {@link module:downloader.Downloader#scheduleChecks check}.
   */
  constructor(dataSource)
  {
    /**
     * Maximal time interval that the checks can be left out until the soft
     * expiration interval increases.
     * @type {number}
     */
    this.maxAbsenceInterval = 1 * MILLIS_IN_DAY;

    /**
     * Minimal time interval before retrying a download after an error.
     * @type {number}
     */
    this.minRetryInterval = 1 * MILLIS_IN_DAY;

    /**
     * Maximal allowed expiration interval; larger expiration intervals will be
     * corrected.
     * @type {number}
     */
    this.maxExpirationInterval = 14 * MILLIS_IN_DAY;

    /**
     * Maximal number of redirects before the download is considered as failed.
     * @type {number}
     */
    this.maxRedirects = 5;

    /**
     * Called whenever expiration intervals for an object need to be adapted.
     * @type {function?}
     */
    this.onExpirationChange = null;

    /**
     * Callback to be triggered whenever a download starts.
     * @type {function?}
     */
    this.onDownloadStarted = null;

    /**
     * Callback to be triggered whenever a download finishes successfully.
     *
     * The callback can return an error code to indicate that the data is
     * wrong.
     *
     * @type {function?}
     */
    this.onDownloadSuccess = null;

    /**
     * Callback to be triggered whenever a download fails.
     * @type {function?}
     */
    this.onDownloadError = null;

    /**
     * A function that yields `{@link module:downloader.Downloadable}` objects
     * on each {@link module:downloader.Downloader#scheduleChecks check}.
     * @type {module:downloader~DataSource}
     */
    this.dataSource = dataSource;

    /**
     * Set containing the URLs of objects currently being downloaded.
     * @type {Set.<string>}
     */
    this._downloading = new Set();

    /**
     * Store the timeout ID for scheduled checks.
     * @type {number}
     */
    this._timeout = 0;
  }

  /**
   * Schedules checks at regular time intervals.
   *
   * @param {number} interval The interval between checks in milliseconds.
   * @param {number} delay The delay before the initial check in milliseconds.
   */
  scheduleChecks(interval, delay)
  {
    // clear previous timeouts if called too many times
    this.unscheduleChecks();

    let check = () =>
    {
      try
      {
        this._doCheck();
      }
      finally
      {
        // Schedule the next check only after the callback has finished with
        // the current check.
        this._timeout =
          setTimeout(check, interval); // eslint-disable-line no-undef
      }
    };

    // Note: test/_common.js overrides setTimeout() for the tests; if this
    // global function is used anywhere else, it may give incorrect results.
    // This is why we disable ESLint's no-undef rule locally.
    // https://gitlab.com/eyeo/adblockplus/adblockpluscore/issues/43
    this._timeout = setTimeout(check, delay); // eslint-disable-line no-undef
  }

  /**
   * Clear previously scheduled checks, if any.
   */
  unscheduleChecks()
  {
    if (this._timeout)
    {
      clearTimeout(this._timeout); // eslint-disable-line no-undef
      this._timeout = 0;
    }
  }

  /**
   * Checks whether anything needs downloading.
   */
  _doCheck()
  {
    let now = Date.now();
    for (let downloadable of this.dataSource())
    {
      if (downloadable.lastCheck &&
          now - downloadable.lastCheck > this.maxAbsenceInterval)
      {
        // No checks for a long time interval - user must have been offline,
        // e.g.  during a weekend. Increase soft expiration to prevent load
        // peaks on the server.
        downloadable.softExpiration += now - downloadable.lastCheck;
      }
      downloadable.lastCheck = now;

      // Sanity check: do expiration times make sense? Make sure people changing
      // system clock don't get stuck with outdated subscriptions.
      if (downloadable.hardExpiration - now > this.maxExpirationInterval)
        downloadable.hardExpiration = now + this.maxExpirationInterval;
      if (downloadable.softExpiration - now > this.maxExpirationInterval)
        downloadable.softExpiration = now + this.maxExpirationInterval;

      // Notify the caller about changes to expiration parameters
      if (this.onExpirationChange)
        this.onExpirationChange(downloadable);

      // Does that object need downloading?
      if (downloadable.softExpiration > now &&
          downloadable.hardExpiration > now)
        continue;

      // Do not retry downloads too often
      if (downloadable.lastError &&
          now - downloadable.lastError < this.minRetryInterval)
        continue;

      this._download(downloadable, 0);
    }
  }

  /**
   * Checks whether an address is currently being downloaded.
   * @param {string} url
   * @returns {boolean}
   */
  isDownloading(url)
  {
    return this._downloading.has(url);
  }

  /**
   * Starts downloading for an object.
   * @param {Downloadable} downloadable
   */
  download(downloadable)
  {
    this._download(downloadable, 0);
  }

  /**
   * Generates the real download URL for an object by appending various
   * parameters.
   * @param {Downloadable} downloadable
   * @returns {string}
   */
  getDownloadUrl(downloadable)
  {
    const {addonName, addonVersion, application, applicationVersion,
           platform, platformVersion} = __webpack_require__(187);

    let url = downloadable.redirectURL || downloadable.url;
    if (url.includes("?"))
      url += "&";
    else
      url += "?";

    // We limit the download count to 4+ to keep the request anonymized.
    let {downloadCount, method} = downloadable;
    if (downloadCount > 4)
      downloadCount = "4+";

    url += "addonName=" + encodeURIComponent(addonName) +
           "&addonVersion=" + encodeURIComponent(addonVersion) +
           "&application=" + encodeURIComponent(application) +
           "&applicationVersion=" + encodeURIComponent(applicationVersion) +
           "&platform=" + encodeURIComponent(platform) +
           "&platformVersion=" + encodeURIComponent(platformVersion) +
           "&lastVersion=" + encodeURIComponent(downloadable.lastVersion) +
           "&downloadCount=" + encodeURIComponent(downloadCount) +
           "&disabled=" + String(method === "HEAD");

    if (downloadable.firstVersion && !downloadable.redirectURL)
      url += "&firstVersion=" + encodeURIComponent(downloadable.firstVersion);

    return url;
  }

  _download(downloadable, redirects)
  {
    if (this.isDownloading(downloadable.url))
      return;

    let downloadUrl = this.getDownloadUrl(downloadable);
    let responseStatus = 0;

    let errorCallback = error =>
    {
      console.warn("Adblock Plus: Downloading URL " + downloadable.url +
                   " failed (" + error + ")\n" +
                   "Download address: " + downloadUrl + "\n" +
                   "Server response: " + responseStatus);

      if (this.onDownloadError)
      {
        // Allow one extra redirect if the error handler gives us a redirect URL
        let redirectCallback = null;
        if (redirects <= this.maxRedirects)
        {
          redirectCallback = url =>
          {
            downloadable.redirectURL = url;
            this._download(downloadable, redirects + 1);
          };
        }

        this.onDownloadError(downloadable, downloadUrl, error, responseStatus,
                             redirectCallback);
      }
    };

    if (!Downloader.isValidURL(downloadUrl))
    {
      errorCallback("synchronize_invalid_url");
      return;
    }

    let requestURL = new URL(downloadUrl);

    let initObj = {
      cache: "no-store",
      credentials: "omit",
      referrer: "no-referrer",
      method: downloadable.method
    };

    let handleError = () =>
    {
      this._downloading.delete(downloadable.url);
      errorCallback("synchronize_connection_error");
    };

    let handleResponse = response =>
    {
      this._downloading.delete(downloadable.url);

      // If the Response.url property is available [1], disallow redirection
      // from HTTPS to any other protocol.
      // [1]: https://developer.mozilla.org/en-US/docs/Web/API/Response/url#Browser_compatibility
      if (typeof response.url == "string" && requestURL.protocol == "https:" &&
          new URL(response.url).protocol != requestURL.protocol)
      {
        errorCallback("synchronize_connection_error");
        return;
      }

      responseStatus = response.status;

      if (responseStatus != 200)
      {
        errorCallback("synchronize_connection_error");
        return;
      }

      // We need to keep updated the subscription version even via HEAD.
      if (downloadable.method === "HEAD")
      {
        // However, as we don't know if the server would respond with such
        // detail, we need to be sure there is such `Date` or `date` field.
        let date = response.headers.get("Date") || response.headers.get("date");
        if (date)
        {
          // if that's the case, we want it to be formatted as YYYYMMDDHHMM.
          downloadable.lastVersion =
            new Date(date).toISOString().replace(/\D/g, "").slice(0, 12);
        }
      }
      else
      {
        downloadable.downloadCount++;
      }

      response.text().then(
        responseText =>
        {
          this.onDownloadSuccess(
            downloadable, responseText, errorCallback, url =>
            {
              if (redirects >= this.maxRedirects)
              {
                errorCallback("synchronize_connection_error");
                return;
              }

              downloadable.redirectURL = url;
              this._download(downloadable, redirects + 1);
            }
          );
        },
        () =>
        {
          errorCallback("synchronize_connection_error");
        }
      );
    };

    fetch(requestURL.href, initObj).then(handleResponse, handleError);

    this._downloading.add(downloadable.url);

    if (this.onDownloadStarted)
      this.onDownloadStarted(downloadable);
  }

  /**
   * Produces a soft and a hard expiration interval for a given supplied
   * expiration interval.
   * @param {number} interval
   * @returns {Array.<number>} soft and hard expiration interval
   */
  processExpirationInterval(interval)
  {
    interval = Math.min(Math.max(interval, 0), this.maxExpirationInterval);
    let soft = Math.round(interval * (Math.random() * 0.4 + 0.8));
    let hard = interval * 2;
    let now = Date.now();
    return [now + soft, now + hard];
  }
};

/**
 * Checks whether a URL is a valid download URL.
 *
 * For a URL to be a valid download URL, its scheme must be `https` or `data`.
 * If the host component of the URL is `localhost`, `127.0.0.1`, or `[::1]`,
 * however, but its scheme is not `https` or `data`, the URL is still
 * considered to be a valid download URL.
 *
 * `https://example.com/`, `data:,Hello%2C%20World!`, and
 * `http://127.0.0.1/example.txt` are all examples of valid download URLs.
 *
 * @param {string} url The URL.
 *
 * @returns {boolean} Whether the URL is a valid download URL.
 *
 * @package
 */
exports.Downloader.isValidURL = function isValidURL(url)
{
  try
  {
    url = new URL(url);
  }
  catch (error)
  {
    return false;
  }

  if (!["https:", "data:"].includes(url.protocol) &&
      !isLocalhost(url.hostname))
    return false;

  return true;
};

/**
 * A `Downloadable` object represents a downloadable resource.
 * @package
 */
exports.Downloadable = class Downloadable
{
  /**
   * Creates an object that can be downloaded by the downloader.
   * @param {string} url  URL that has to be requested for the object
   */
  constructor(url)
  {
    /**
     * URL that the download was redirected to if any.
     * @type {string?}
     */
    this.redirectURL = null;

    /**
     * Time of last download error or 0 if the last download was successful.
     * @type {number}
     */
    this.lastError = 0;

    /**
     * Time of last check whether the object needs downloading.
     * @type {number}
     */
    this.lastCheck = 0;

    /**
     * Object version corresponding to the last successful download.
     * @type {number}
     */
    this.lastVersion = 0;

    /**
     * A string indicating the version of the first ever downloaded resource,
     * in `YYYY[MM[DD]][-E]` format or just `"0"` or `"0-E"`.
     *
     * Note that unlike `{@link module:downloader.Downloadable#lastVersion}`
     * this property is related to analytics and its value is common across all
     * downloadable resources.
     *
     * If `{@link module:downloader.Downloadable#url}` is not a trusted URL,
     * the value of this property should be set to `null`.
     *
     * @see module:analytics~Analytics#getFirstVersion
     * @see module:analytics~Analytics#isTrusted
     *
     * @type {?string}
     *
     * @package
     */
    this.firstVersion = null;

    /**
     * Soft expiration interval; will increase if no checks are performed for a
     * while.
     * @type {number}
     */
    this.softExpiration = 0;

    /**
     * Hard expiration interval; this is fixed.
     * @type {number}
     */
    this.hardExpiration = 0;

    /**
     * Number indicating how often the object was downloaded.
     * @type {number}
     */
    this.downloadCount = 0;

    /**
     * Request method to use, which is either "GET" or "HEAD".
     * @type {string}
     */
    this.method = "GET";

    /**
     * URL that has to be requested for the object.
     * @type {string}
     */
    this.url = url;
  }
};


/***/ }),

/***/ 5093:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @fileOverview Element hiding implementation.
 */

const {elemHideExceptions} = __webpack_require__(8580);
const {domainSuffixes} = __webpack_require__(5622);
const {FiltersByDomain, FilterMap} = __webpack_require__(9613);
const {Cache} = __webpack_require__(5889);

/**
 * The maximum number of selectors in a CSS rule.
 *
 * This is used by
 * `{@link module:elemHide.createStyleSheet createStyleSheet()}` to split up a
 * long list of selectors into multiple rules.
 *
 * @const {number}
 * @default
 */
const SELECTOR_GROUP_SIZE = 1024;

/**
 * `{@link module:elemHide.elemHide elemHide}` implementation.
 */
class ElemHide
{
  /**
   * @hideconstructor
   */
  constructor()
  {
    /**
     * Lookup table, active flag, by filter by domain.
     *
     * (Only contains filters that aren't unconditionally matched for all
     * domains.)
     *
     * @type {FiltersByDomain}
     *
     * @private
     */
    this._filtersByDomain = new FiltersByDomain();

    /**
     * Lookup table, filter by selector.
     *
     * (Only used for selectors that are unconditionally matched for all
     * domains.)
     *
     * @type {Map.<string, Filter>}
     *
     * @private
     */
    this._filterBySelector = new Map();

    /**
     * This array caches the keys of
     * `{@link module:elemHide~ElemHide#_filterBySelector _filterBySelector}`
     * (selectors which unconditionally apply on all domains).
     *
     * It will be `null` if the cache needs to be rebuilt.
     *
     * @type {?Array.<string>}
     *
     * @private
     */
    this._unconditionalSelectors = null;

    /**
     * The default style sheet that applies on all domains.
     *
     * This is based on the value of
     * `{@link module:elemHide~ElemHide#_unconditionalSelectors
     *         _unconditionalSelectors}`.
     *
     * @type {?string}
     *
     * @private
     */
    this._defaultStyleSheet = null;

    /**
     * The common style sheet that applies on all unknown domains.
     *
     * This is a concatenation of the default style sheet and an additional
     * style sheet based on selectors from all generic filters that are not in
     * the `{@link module:elemHide~ElemHide#_unconditionalSelectors
     *             _unconditionalSelectors}` list.
     *
     * @type {?string}
     *
     * @private
     */
    this._commonStyleSheet = null;

    /**
     * Cache of generated domain-specific style sheets.
     *
     * This contains entries for only known domains. If a domain is unknown, it
     * gets `{@link module:elemHide~ElemHide#_commonStyleSheet
     *              _commonStyleSheet}`.
     *
     * @type {Cache.<string, string>}
     *
     * @private
     */
    this._styleSheetCache = new Cache(100);

    /**
     * Set containing known element hiding filters
     * @type {Set.<module:filterClasses.ElemHideFilter>}
     * @private
     */
    this._filters = new Set();

    /**
     * All domains known to occur in exceptions
     * @type {Set.<string>}
     * @private
     */
    this._exceptionDomains = new Set();

    elemHideExceptions.on("added", this._onExceptionAdded.bind(this));
  }

  /**
   * Removes all known element hiding filters.
   */
  clear()
  {
    this._commonStyleSheet = null;

    for (let collection of [this._styleSheetCache, this._filtersByDomain,
                            this._filterBySelector, this._filters,
                            this._exceptionDomains])
      collection.clear();

    this._unconditionalSelectors = null;
    this._defaultStyleSheet = null;
  }

  /**
   * Add a new element hiding filter.
   * @param {module:filterClasses.ElemHideFilter} filter
   */
  add(filter)
  {
    if (this._filters.has(filter))
      return;

    this._styleSheetCache.clear();
    this._commonStyleSheet = null;

    let {domains, selector} = filter;

    if (!(domains || elemHideExceptions.hasExceptions(selector)))
    {
      // The new filter's selector is unconditionally applied to all domains
      this._filterBySelector.set(selector, filter);
      this._unconditionalSelectors = null;
      this._defaultStyleSheet = null;
    }
    else
    {
      // The new filter's selector only applies to some domains
      this._filtersByDomain.add(filter, domains);
    }

    this._filters.add(filter);
  }

  /**
   * Removes an existing element hiding filter.
   * @param {module:filterClasses.ElemHideFilter} filter
   */
  remove(filter)
  {
    if (!this._filters.has(filter))
      return;

    this._styleSheetCache.clear();
    this._commonStyleSheet = null;

    let {selector} = filter;

    // Unconditially applied element hiding filters
    if (this._filterBySelector.get(selector) == filter)
    {
      this._filterBySelector.delete(selector);
      this._unconditionalSelectors = null;
      this._defaultStyleSheet = null;
    }
    // Conditionally applied element hiding filters
    else
    {
      this._filtersByDomain.remove(filter);
    }

    this._filters.delete(filter);
  }

  /**
   * Checks whether an element hiding filter exists.
   * @param {module:filterClasses.ElemHideFilter} filter
   * @returns {boolean}
   */
  has(filter)
  {
    return this._filters.has(filter);
  }

  /**
   * @typedef {object} ElemHideStyleSheet
   * @property {string} code CSS code.
   * @property {?Array.<string>} selectors List of selectors.
   * @property {?Array.<string>} exceptions List of exceptions.
   */

  /**
   * Returns a style sheet for a given domain based on the current set of
   * filters.
   *
   * @param {string} domain The domain.
   * @param {boolean} [specificOnly=false] Whether selectors from generic
   *   filters should be included.
   * @param {boolean} [includeSelectors=false] Whether the return value should
   *   include a separate list of selectors.
   * @param {boolean} [includeExceptions=false] Whether the return value should
   *   include a separate list of exceptions.
   *
   * @returns {module:elemHide~ElemHideStyleSheet} An object containing the CSS
   *   code and the list of selectors.
   */
  getStyleSheet(domain, specificOnly = false, includeSelectors = false,
                includeExceptions = false)
  {
    let code = null;
    let selectors = null;
    let exceptions = null;

    if (specificOnly)
    {
      if (includeExceptions)
      {
        let selectorsAndExceptions =
          this._getConditionalSelectorsWithExceptions(domain, true);

        selectors = selectorsAndExceptions.selectors;
        exceptions = selectorsAndExceptions.exceptions;
      }
      else
      {
        selectors = this._getConditionalSelectors(domain, true);
      }

      code = createStyleSheet(selectors);
    }
    else
    {
      let knownSuffix = this._getKnownSuffix(domain);

      if (includeSelectors || includeExceptions)
      {
        let selectorsAndExceptions =
          this._getConditionalSelectorsWithExceptions(knownSuffix, false);

        selectors = selectorsAndExceptions.selectors;
        exceptions = selectorsAndExceptions.exceptions;
        code = knownSuffix == "" ? this._getCommonStyleSheet() :
                 this._getDefaultStyleSheet() + createStyleSheet(selectors);

        selectors = this._getUnconditionalSelectors().concat(selectors);
      }
      else
      {
        code = knownSuffix == "" ? this._getCommonStyleSheet() :
                 this._getDefaultStyleSheet() +
                 this._getDomainSpecificStyleSheet(knownSuffix);
      }
    }

    return {
      code,
      selectors: includeSelectors ? selectors : null,
      exceptions: includeExceptions ? exceptions : null
    };
  }

  /**
   * Returns a style sheet for a given domain based on the current set of
   * filters.
   *
   * @param {string} domain The domain.
   * @param {boolean} [specificOnly=false] Whether selectors from generic
   *   filters should be included.
   * @param {boolean} [includeSelectors=false] Whether the return value should
   *   include a separate list of selectors.
   * @param {boolean} [includeExceptions=false] Whether the return value should
   *   include a separate list of exceptions.
   *
   * @returns {module:elemHide~ElemHideStyleSheet} An object containing the CSS
   *   code and the list of selectors.
   *
   * @deprecated Use
   *   <code>{@link module:elemHide~ElemHide#getStyleSheet}</code> instead.
   * @see module:elemHide~ElemHide#getStyleSheet
   */
  generateStyleSheetForDomain(domain, specificOnly = false,
                              includeSelectors = false,
                              includeExceptions = false)
  {
    return this.getStyleSheet(domain, specificOnly, includeSelectors,
                              includeExceptions);
  }

  /**
   * Returns the suffix of the given domain that is known.
   *
   * If no suffix is known, an empty string is returned.
   *
   * @param {?string} domain
   *
   * @returns {string}
   *
   * @private
   */
  _getKnownSuffix(domain)
  {
    for (let suffix of domainSuffixes(domain))
    {
      if (this._filtersByDomain.has(suffix) ||
          this._exceptionDomains.has(suffix))
        return suffix;
    }

    return "";
  }

  /**
   * Returns a list of selectors that apply on each website unconditionally.
   * @returns {string[]}
   * @private
   */
  _getUnconditionalSelectors()
  {
    if (!this._unconditionalSelectors)
      this._unconditionalSelectors = [...this._filterBySelector.keys()];

    return this._unconditionalSelectors;
  }

  /**
   * Returns the list of selectors that apply on a given domain from the subset
   * of filters that do not apply unconditionally on all domains.
   *
   * @param {string} domain The domain.
   * @param {boolean} specificOnly Whether selectors from generic filters should
   *   be included.
   *
   * @returns {Array.<string>} The list of selectors.
   *
   * @private
   */
  _getConditionalSelectors(domain, specificOnly)
  {
    let selectors = [];

    let excluded = new Set();

    for (let currentDomain of domainSuffixes(domain, !specificOnly))
    {
      let map = this._filtersByDomain.get(currentDomain);
      if (map)
      {
        for (let [filter, include] of (map instanceof FilterMap ?
                                         map.entries() : [[map, true]]))
        {
          if (!include)
          {
            excluded.add(filter);
          }
          else
          {
            let {selector} = filter;
            if ((excluded.size == 0 || !excluded.has(filter)) &&
                !elemHideExceptions.getException(selector, domain))
              selectors.push(selector);
          }
        }
      }
    }

    return selectors;
  }

  /**
   * Returns the list of selectors and the list of exceptions that apply on a
   * given domain from the subset of filters that do not apply unconditionally
   * on all domains.
   *
   * @param {string} domain The domain.
   * @param {boolean} specificOnly Whether selectors from generic filters should
   *   be included.
   *
   * @returns {{selectors: Array.<string>,
   *            exceptions: Array.<module:filterClasses.ElemHideException>}}
   *   An object containing the lists of selectors and exceptions.
   *
   * @private
   */
  _getConditionalSelectorsWithExceptions(domain, specificOnly)
  {
    let selectors = [];
    let exceptions = [];

    let excluded = new Set();

    for (let currentDomain of domainSuffixes(domain, !specificOnly))
    {
      let map = this._filtersByDomain.get(currentDomain);
      if (map)
      {
        for (let [filter, include] of (map instanceof FilterMap ?
                                         map.entries() : [[map, true]]))
        {
          if (!include)
          {
            excluded.add(filter);
          }
          else if (excluded.size == 0 || !excluded.has(filter))
          {
            let {selector} = filter;
            let exception = elemHideExceptions.getException(selector, domain);

            if (exception)
              exceptions.push(exception);
            else
              selectors.push(selector);
          }
        }
      }
    }

    return {selectors, exceptions};
  }

  /**
   * Returns the default style sheet that applies on all domains.
   * @returns {string}
   * @private
   */
  _getDefaultStyleSheet()
  {
    if (!this._defaultStyleSheet)
    {
      this._defaultStyleSheet =
        createStyleSheet(this._getUnconditionalSelectors());
    }

    return this._defaultStyleSheet;
  }

  /**
   * Returns the common style sheet that applies on all unknown domains.
   * @returns {string}
   * @private
   */
  _getCommonStyleSheet()
  {
    if (!this._commonStyleSheet)
    {
      this._commonStyleSheet =
        this._getDefaultStyleSheet() +
        createStyleSheet(this._getConditionalSelectors("", false));
    }

    return this._commonStyleSheet;
  }

  /**
   * Returns the domain-specific style sheet that applies on a given domain.
   * @param {string} domain
   * @returns {string}
   * @private
   */
  _getDomainSpecificStyleSheet(domain)
  {
    let styleSheet = this._styleSheetCache.get(domain);

    if (typeof styleSheet == "undefined")
    {
      styleSheet =
        createStyleSheet(this._getConditionalSelectors(domain, false));
      this._styleSheetCache.set(domain, styleSheet);
    }

    return styleSheet;
  }

  _onExceptionAdded(exception)
  {
    let {domains, selector} = exception;

    this._styleSheetCache.clear();
    this._commonStyleSheet = null;

    if (domains)
    {
      for (let domain of domains.keys())
      {
        // Note: Once an exception domain is known it never becomes unknown,
        // even when all the exceptions containing that domain are removed.
        // This is a best-case optimization.
        if (domain != "")
          this._exceptionDomains.add(domain);
      }
    }

    // If this is the first exception for a previously unconditionally applied
    // element hiding selector we need to take care to update the lookups.
    let unconditionalFilterForSelector = this._filterBySelector.get(selector);
    if (unconditionalFilterForSelector)
    {
      this._filtersByDomain.add(unconditionalFilterForSelector);
      this._filterBySelector.delete(selector);
      this._unconditionalSelectors = null;
      this._defaultStyleSheet = null;
    }
  }
}

/**
 * Container for element hiding filters.
 * @type {module:elemHide~ElemHide}
 */
exports.elemHide = new ElemHide();

/**
 * Yields rules from a style sheet returned by
 * `{@link module:elemHide.createStyleSheet createStyleSheet()}`.
 *
 * @param {string} styleSheet A style sheet returned by
 *   `{@link module:elemHide.createStyleSheet createStyleSheet()}`. If the
 *   given style sheet is *not* a value previously returned by a call to
 *   `{@link module:elemHide.createStyleSheet createStyleSheet()}`, the
 *   behavior is undefined.
 *
 * @generator
 * @yields {string} A rule from the given style sheet.
 */
exports.rulesFromStyleSheet = function* rulesFromStyleSheet(styleSheet)
{
  let startIndex = 0;
  while (startIndex < styleSheet.length)
  {
    let ruleTerminatorIndex = styleSheet.indexOf("\n", startIndex);
    yield styleSheet.substring(startIndex, ruleTerminatorIndex);
    startIndex = ruleTerminatorIndex + 1;
  }
};

/**
 * Splits a list of selectors into groups determined by the value of
 * `{@link module:elemHide~SELECTOR_GROUP_SIZE}`.
 *
 * @param {Array.<string>} selectors
 *
 * @yields {Array.<string>}
 */
function* splitSelectors(selectors)
{
  // Chromium's Blink engine supports only up to 8,192 simple selectors, and
  // even fewer compound selectors, in a rule. The exact number of selectors
  // that would work depends on their sizes (e.g. "#foo .bar" has a size of 2).
  // Since we don't know the sizes of the selectors here, we simply split them
  // into groups of 1,024, based on the reasonable assumption that the average
  // selector won't have a size greater than 8. The alternative would be to
  // calculate the sizes of the selectors and divide them up accordingly, but
  // this approach is more efficient and has worked well in practice. In theory
  // this could still lead to some selectors not working on Chromium, but it is
  // highly unlikely.
  // See issue #6298 and https://crbug.com/804179
  for (let i = 0; i < selectors.length; i += SELECTOR_GROUP_SIZE)
    yield selectors.slice(i, i + SELECTOR_GROUP_SIZE);
}

/**
 * Escapes curly braces to prevent CSS rule injection.
 *
 * @param {string} selector
 *
 * @returns {string}
 */
function escapeSelector(selector)
{
  return selector.replace("{", "\\7B ").replace("}", "\\7D ");
}

/**
 * Creates an element hiding CSS rule for a given list of selectors.
 *
 * @param {Array.<string>} selectors The list of selectors.
 * @param {string} [declarationBlock] Optional CSS code to use as the
 *   declaration block. By default, the code `{display: none !important;}` is
 *   used. If specified, the value is injected as-is into the rule.
 *
 * @returns {string} A CSS rule.
 */
function createRule(selectors, declarationBlock = "{display: none !important;}")
{
  let rule = "";

  for (let i = 0; i < selectors.length - 1; i++)
    rule += escapeSelector(selectors[i]) + ", ";

  rule += escapeSelector(selectors[selectors.length - 1]) + " " +
          declarationBlock + "\n";

  return rule;
}

let createStyleSheet =
/**
 * Creates an element hiding CSS style sheet from a given list of selectors.
 *
 * @param {Array.<string>} selectors The list of selectors.
 * @param {string} [declarationBlock] Optional CSS code to use as the
 *   declaration block. By default, the code `{display: none !important;}` is
 *   used. If specified, the value is injected as-is into the style sheet.
 *
 * @returns {string} A CSS style sheet.
 */
exports.createStyleSheet = function createStyleSheet(selectors,
                                                     declarationBlock)
{
  let styleSheet = "";

  for (let selectorGroup of splitSelectors(selectors))
    styleSheet += createRule(selectorGroup, declarationBlock);

  return styleSheet;
};


/***/ }),

/***/ 5363:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @fileOverview Element hiding emulation implementation.
 */

const {elemHideExceptions} = __webpack_require__(8580);

/**
 * `{@link module:elemHideEmulation.elemHideEmulation elemHideEmulation}`
 * implementation.
 */
class ElemHideEmulation extends Set
{
  /**
   * Removes an existing element hiding emulation filter.
   * @param {module:filterClasses.ElemHideEmulationFilter} filter
   *
   * @deprecated Use
   *   <code>ElemHideEmulation#delete</code>
   *   instead.
   */
  remove(filter)
  {
    this.delete(filter);
  }

  /**
   * Returns a list of all element hiding emulation filters active on the given
   * domain.
   * @param {string} domain The domain.
   * @returns {Array.<module:filterClasses.ElemHideEmulationFilter>} A list of
   *   element hiding emulation filters.
   */
  getFilters(domain)
  {
    let result = [];

    for (let filter of this)
    {
      if (filter.isActiveOnDomain(domain) &&
          !elemHideExceptions.getException(filter.selector, domain))
        result.push(filter);
    }

    return result;
  }

  /**
   * Returns a list of all element hiding emulation filters active on the given
   * domain.
   * @param {string} domain The domain.
   * @returns {Array.<module:filterClasses.ElemHideEmulationFilter>} A list of
   *   element hiding emulation filters.
   *
   * @deprecated Use
   *   <code>{@link
   *          module:elemHideEmulation~ElemHideEmulation#getFilters}</code>
   *   instead.
   * @see module:elemHideEmulation~ElemHideEmulation#getFilters
   */
  getRulesForDomain(domain)
  {
    return this.getFilters(domain);
  }
}

/**
 * Container for element hiding emulation filters.
 * @type {module:elemHideEmulation~ElemHideEmulation}
 */
exports.elemHideEmulation = new ElemHideEmulation();


/***/ }),

/***/ 8580:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @fileOverview Element hiding exceptions implementation.
 */

const {EventEmitter} = __webpack_require__(8450);

/**
 * `{@link module:elemHideExceptions.elemHideExceptions elemHideExceptions}`
 * implementation.
 */
class ElemHideExceptions extends EventEmitter
{
  /**
   * @hideconstructor
   */
  constructor()
  {
    super();

    /**
     * Lookup table, lists of element hiding exceptions by selector
     * @type {Map.<string, Set.<module:filterClasses.ElemHideException>>}
     * @private
     */
    this._exceptionsBySelector = new Map();

    /**
     * Set containing known element hiding exceptions
     * @type {Set.<module:filterClasses.ElemHideException>}
     * @private
     */
    this._exceptions = new Set();
  }

  /**
   * Removes all known element hiding exceptions.
   */
  clear()
  {
    this._exceptionsBySelector.clear();
    this._exceptions.clear();
  }

  /**
   * Adds a new element hiding exception.
   * @param {module:filterClasses.ElemHideException} exception
   */
  add(exception)
  {
    if (this._exceptions.has(exception))
      return;

    let {selector} = exception;
    let set = this._exceptionsBySelector.get(selector);
    if (set)
      set.add(exception);
    else
      this._exceptionsBySelector.set(selector, new Set([exception]));

    this._exceptions.add(exception);

    this.emit("added", exception);
  }

  /**
   * Removes an existing element hiding exception.
   * @param {module:filterClasses.ElemHideException} exception
   */
  remove(exception)
  {
    if (!this._exceptions.has(exception))
      return;

    let {selector} = exception;
    let set = this._exceptionsBySelector.get(selector);
    set.delete(exception);
    if (set.size == 0)
      this._exceptionsBySelector.delete(selector);

    this._exceptions.delete(exception);

    this.emit("removed", exception);
  }

  /**
   * Checks whether an element hiding exception exists.
   * @param {module:filterClasses.ElemHideException} exception
   * @returns {boolean}
   */
  has(exception)
  {
    return this._exceptions.has(exception);
  }

  /**
   * Checks whether any exception rules are registered for a selector.
   * @param {string} selector
   * @returns {boolean}
   */
  hasExceptions(selector)
  {
    return this._exceptionsBySelector.has(selector);
  }

  /**
   * Checks whether an exception rule is registered for a selector on a
   * particular domain.
   * @param {string} selector
   * @param {?string} [domain]
   * @returns {?module:filterClasses.ElemHideException}
   */
  getException(selector, domain)
  {
    let exceptions = this._exceptionsBySelector.get(selector);
    if (exceptions)
    {
      for (let exception of exceptions)
      {
        if (exception.isActiveOnDomain(domain))
          return exception;
      }
    }

    return null;
  }
}

/**
 * Container for element hiding exceptions.
 * @type {module:elemHideExceptions~ElemHideExceptions}
 */
exports.elemHideExceptions = new ElemHideExceptions();


/***/ }),

/***/ 8450:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * Registers and emits named events.
 */
exports.EventEmitter = class EventEmitter
{
  constructor()
  {
    this._listeners = new Map();
  }

  /**
   * Adds a listener for the specified event name.
   *
   * @param {string}   name
   * @param {function} listener
   */
  on(name, listener)
  {
    let listeners = this._listeners.get(name);
    if (listeners)
      listeners.push(listener);
    else
      this._listeners.set(name, [listener]);
  }

  /**
   * Removes a listener for the specified event name.
   *
   * @param {string}   name
   * @param {function} listener
   */
  off(name, listener)
  {
    let listeners = this._listeners.get(name);
    if (listeners)
    {
      if (listeners.length > 1)
      {
        let idx = listeners.indexOf(listener);
        if (idx != -1)
          listeners.splice(idx, 1);
      }
      else if (listeners[0] === listener)
      {
        // We must use strict equality above for compatibility with
        // Array.prototype.indexOf
        this._listeners.delete(name);
      }
    }
  }

  /**
   * Returns a copy of the array of listeners for the specified event.
   *
   * @param {string} name
   *
   * @returns {Array.<function>}
   */
  listeners(name)
  {
    let listeners = this._listeners.size > 0 ? this._listeners.get(name) : null;
    return listeners ? listeners.slice() : [];
  }

  /**
   * Checks whether there are any listeners for the specified event.
   *
   * @param {string} [name] The name of the event. If omitted, checks whether
   *   there are any listeners for any event.
   *
   * @returns {boolean}
   */
  hasListeners(name)
  {
    return this._listeners.size > 0 &&
           (typeof name == "undefined" || this._listeners.has(name));
  }

  /**
   * Calls all previously added listeners for the given event name.
   *
   * @param {string} name
   * @param {...*}   [args]
   */
  emit(name, ...args)
  {
    let listeners = this._listeners.size > 0 ? this._listeners.get(name) : null;
    if (listeners)
    {
      for (let listener of listeners.slice())
        listener(...args);
    }
  }
};


/***/ }),

/***/ 3217:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @fileOverview Definition of Filter class and its subclasses.
 */

const {contentTypes, RESOURCE_TYPES} = __webpack_require__(298);
const {filterToRegExp} = __webpack_require__(9173);
const {parseDomains, domainSuffixes} = __webpack_require__(5622);
const {filterState} = __webpack_require__(9970);

const resources = __webpack_require__(6834);

/**
 * Map of internal resources for URL rewriting.
 * @type {Map.<string,string>}
 */
let resourceMap = new Map(
  Object.keys(resources).map(key => [key, resources[key]])
);

/**
 * Regular expression used to match the `||` prefix in an otherwise literal
 * pattern.
 * @type {RegExp}
 */
let extendedAnchorRegExp = new RegExp(filterToRegExp("||") + "$");

/**
 * Regular expression used to match the `^` suffix in an otherwise literal
 * pattern.
 * @type {RegExp}
 */
// Note: This should match the pattern in lib/common.js
let separatorRegExp = /[\x00-\x24\x26-\x2C\x2F\x3A-\x40\x5B-\x5E\x60\x7B-\x7F]/;

/**
 * Checks whether the given pattern is a string of literal characters with no
 * wildcards or any other special characters.
 *
 * If the pattern is prefixed with a `||` or suffixed with a `^` but otherwise
 * contains no special characters, it is still considered to be a literal
 * pattern.
 *
 * @param {string} pattern
 *
 * @returns {boolean}
 */
function isLiteralPattern(pattern)
{
  return !/[*^|]/.test(pattern.replace(/^\|{1,2}/, "").replace(/[|^]$/, ""));
}

let isActiveFilter =
/**
 * Checks whether the given filter is an active filter.
 *
 * Filters of type `blocking`, `allowing`, `elemhide`, `elemhideexception`,
 * `elemhideemulation`, and `snippet` are considered active; filters of type
 * `invalid` and `comment` are not considered active.
 *
 * @param {?Filter} filter The filter.
 *
 * @returns {boolean} Whether the filter is active.
 */
exports.isActiveFilter = function isActiveFilter(filter)
{
  return filter instanceof ActiveFilter;
};

let Filter =
/**
 * Abstract base class for filters
 */
exports.Filter = class Filter
{
  /**
   * @param {string} text   string representation of the filter
   * @private
   */
  constructor(text)
  {
    this._text = text;
  }

  /**
   * String representation of the filter
   * @type {string}
   */
  get text()
  {
    return this._text;
  }

  /**
   * Filter type as a string, e.g. "blocking".
   * @type {string}
   */
  get type()
  {
    throw new Error("Please define filter type in the subclass");
  }

  /**
   * Serializes the filter for writing out on disk.
   * @yields {string}
   */
  *serialize()
  {
    let {text} = this;

    yield "[Filter]";
    yield "text=" + text;
  }

  toString()
  {
    return this.text;
  }
};

/**
 * Cache for known filters, maps string representation to filter objects.
 * @type {Map.<string,module:filterClasses.Filter>}
 */
Filter.knownFilters = new Map();

/**
 * Regular expression that content filters should match
 * @type {RegExp}
 */
Filter.contentRegExp = /^([^/|@"!]*?)#([@?$])?#(.+)$/;
/**
 * Regular expression that options on a RegExp filter should match
 * @type {RegExp}
 */
Filter.optionsRegExp = /\$(~?[\w-]+(?:=[^,]*)?(?:,~?[\w-]+(?:=[^,]*)?)*)$/;
/**
 * Regular expression that matches an invalid Content Security Policy
 * @type {RegExp}
 */
Filter.invalidCSPRegExp = /(;|^) ?(base-uri|referrer|report-to|report-uri|upgrade-insecure-requests)\b/i;

/**
 * Creates a filter of correct type from its text representation - does the
 * basic parsing and calls the right constructor then.
 *
 * @param {string} text   as in Filter()
 * @return {module:filterClasses.Filter}
 */
Filter.fromText = function(text)
{
  let filter = Filter.knownFilters.get(text);
  if (filter)
    return filter;

  if (text[0] == "!")
  {
    filter = new CommentFilter(text);
  }
  else
  {
    let match = text.includes("#") ? Filter.contentRegExp.exec(text) : null;
    if (match)
      filter = ContentFilter.fromText(text, match[1], match[2], match[3]);
    else
      filter = URLFilter.fromText(text);
  }

  Filter.knownFilters.set(filter.text, filter);
  return filter;
};

/**
 * Deserializes a filter
 *
 * @param {Object}  obj map of serialized properties and their values
 * @return {module:filterClasses.Filter} filter or null if the filter couldn't
 *   be created
 */
Filter.fromObject = function(obj)
{
  let filter = Filter.fromText(obj.text);
  if (isActiveFilter(filter))
    filterState.fromObject(filter.text, obj);
  return filter;
};

/**
 * Removes unnecessary whitespaces from filter text, will only return null if
 * the input parameter is null.
 * @param {string} text
 * @return {string}
 */
Filter.normalize = function(text)
{
  if (!text)
    return text;

  // Remove line breaks, tabs etc
  text = text.replace(/[^\S ]+/g, "");

  if (!text.includes(" "))
    return text;

  // Don't remove spaces inside comments
  if (/^ *!/.test(text))
    return text.trim();

  // Special treatment for content filters, right side is allowed to contain
  // spaces
  if (Filter.contentRegExp.test(text))
  {
    let [, domains, separator, body] = /^(.*?)(#[@?$]?#?)(.*)$/.exec(text);
    return domains.replace(/ +/g, "") + separator + body.trim();
  }

  // For most regexp filters we strip all spaces, but $csp filter options
  // are allowed to contain single (non trailing) spaces.
  let strippedText = text.replace(/ +/g, "");
  if (!strippedText.includes("$") || !/\b(csp|header)=/i.test(strippedText))
    return strippedText;

  let optionsMatch = Filter.optionsRegExp.exec(strippedText);
  if (!optionsMatch)
    return strippedText;

  // For $csp filters we must first separate out the options part of the
  // text, being careful to preserve its spaces.
  let beforeOptions = strippedText.substring(0, optionsMatch.index);
  let strippedDollarIndex = -1;
  let dollarIndex = -1;
  do
  {
    strippedDollarIndex = beforeOptions.indexOf("$", strippedDollarIndex + 1);
    dollarIndex = text.indexOf("$", dollarIndex + 1);
  }
  while (strippedDollarIndex != -1);
  let optionsText = text.substring(dollarIndex + 1);

  // Then we can normalize spaces in the options part safely
  let options = optionsText.split(",");
  for (let i = 0; i < options.length; i++)
  {
    let option = options[i];
    let optionMatch = /^ *(c *s *p|h *e *a *d *e *r) *=/i.exec(option);
    if (optionMatch)
    {
      options[i] = optionMatch[0].replace(/ +/g, "") +
                   option.substring(optionMatch[0].length).trim().replace(/ +/g, " ");
    }
    else
    {
      options[i] = option.replace(/ +/g, "");
    }
  }

  return beforeOptions + "$" + options.join();
};

let InvalidFilter =
/**
 * Class for invalid filters
 */
exports.InvalidFilter = class InvalidFilter extends Filter
{
  /**
   * @param {string} text see {@link module:filterClasses.Filter Filter()}
   * @param {string} reason Reason why this filter is invalid
   * @private
   */
  constructor(text, reason)
  {
    super(text);

    this._reason = reason;
  }

  get type()
  {
    return "invalid";
  }

  *serialize() {}

  /**
   * Reason why this filter is invalid
   * @type {string}
   */
  get reason()
  {
    return this._reason;
  }
};

let CommentFilter =
/**
 * Class for comments
 */
exports.CommentFilter = class CommentFilter extends Filter
{
  /**
   * @param {string} text see {@link module:filterClasses.Filter Filter()}
   * @private
   */
  constructor(text)
  {
    super(text);
  }

  get type()
  {
    return "comment";
  }

  *serialize() {}
};

let ActiveFilter =
/**
 * Abstract base class for filters that can get hits
 */
exports.ActiveFilter = class ActiveFilter extends Filter
{
  /**
   * @param {string} text
   *   see {@link module:filterClasses.Filter Filter()}
   * @param {string} [domains]
   *   Domains that the filter is restricted to separated by domainSeparator
   *   e.g. "foo.com|bar.com|~baz.com"
   * @private
   */
  constructor(text, domains)
  {
    super(text);

    /**
     * String that the domains property should be generated from
     * @type {?string}
     */
    this.domainSource = domains ? domains.toLowerCase() : null;

    /**
     * Separator character used in domainSource property, must be
     * overridden by subclasses
     * @type {string}
     */
    this.domainSeparator = null;

    /**
     * String that the sitekey property should be generated from
     * @type {?string}
     */
    this.sitekeySource = null;

    /**
     * Number of filters contained, will always be 1 (required to
     * optimize {@link module:matcher.Matcher Matcher}).
     * @type {number}
     * @package
     */
    this.size = 1;
  }

  /**
   * See Filter.serialize()
   * @inheritdoc
   */
  *serialize()
  {
    yield* filterState.serialize(this.text);
  }

  /**
   * Defines whether the filter is disabled
   * @type {boolean}
   */
  get disabled()
  {
    return !filterState.isEnabled(this.text);
  }
  set disabled(value)
  {
    filterState.setEnabled(this.text, !value);
  }

  /**
   * Number of hits on the filter since the last reset
   * @type {number}
   */
  get hitCount()
  {
    return filterState.getHitCount(this.text);
  }
  set hitCount(value)
  {
    filterState.setHitCount(this.text, value);
  }

  /**
   * Last time the filter had a hit (in milliseconds since the beginning of the
   * epoch)
   * @type {number}
   */
  get lastHit()
  {
    return filterState.getLastHit(this.text);
  }
  set lastHit(value)
  {
    filterState.setLastHit(this.text, value);
  }

  /**
   * Map containing domains that this filter should match on/not match
   * on or null if the filter should match on all domains
   * @type {?Map.<string,boolean>}
   */
  get domains()
  {
    let {domainSource} = this;
    if (!domainSource)
      return null;

    let value = parseDomains(domainSource, this.domainSeparator);
    Object.defineProperty(this, "domains", {value});
    return value;
  }

  /**
   * Array containing public keys of websites that this filter should apply to
   * @type {?Array.<string>}
   */
  get sitekeys()
  {
    return null;
  }

  /**
   * Checks whether this filter is active on a domain.
   * @param {?string} [docDomain] domain name of the document that loads the URL
   * @param {string} [sitekey] public key provided by the document
   * @return {boolean} true in case of the filter being active
   */
  isActiveOnDomain(docDomain, sitekey)
  {
    // Sitekeys are case-sensitive so we shouldn't convert them to
    // upper-case to avoid false positives here. Instead we need to
    // change the way filter options are parsed.
    if (this.sitekeys &&
        (!sitekey || !this.sitekeys.includes(sitekey.toUpperCase())))
      return false;

    let {domains} = this;

    // If no domains are set the rule matches everywhere
    if (!domains)
      return true;

    if (docDomain == null)
      docDomain = "";
    else if (docDomain[docDomain.length - 1] == ".")
      docDomain = docDomain.substring(0, docDomain.length - 1);

    // If the document has no host name, match only if the filter
    // isn't restricted to specific domains
    if (!docDomain)
      return domains.get("");

    for (docDomain of domainSuffixes(docDomain))
    {
      let isDomainIncluded = domains.get(docDomain);
      if (typeof isDomainIncluded != "undefined")
        return isDomainIncluded;
    }

    return domains.get("");
  }

  /**
   * Checks whether this filter is active only on a domain and its subdomains.
   * @param {?string} [docDomain]
   * @return {boolean}
   */
  isActiveOnlyOnDomain(docDomain)
  {
    let {domains} = this;

    if (!domains || domains.get(""))
      return false;

    if (docDomain == null)
      docDomain = "";
    else if (docDomain[docDomain.length - 1] == ".")
      docDomain = docDomain.substring(0, docDomain.length - 1);

    if (!docDomain)
      return false;

    for (let [domain, isIncluded] of domains)
    {
      if (isIncluded && domain != docDomain)
      {
        if (domain.length <= docDomain.length)
          return false;

        if (!domain.endsWith("." + docDomain))
          return false;
      }
    }

    return true;
  }

  /**
   * Checks whether this filter is generic or specific
   * @return {boolean}
   */
  isGeneric()
  {
    let {sitekeys, domains} = this;

    return !(sitekeys && sitekeys.length) && (!domains || domains.get(""));
  }

  /**
   * Yields the filter itself (required to optimize
   *   {@link module:matcher.Matcher Matcher}).
   * @yields {module:filterClasses.ActiveFilter}
   * @package
   */
  *[Symbol.iterator]()
  {
    yield this;
  }
};

let URLFilter =
/**
 * Abstract base class for URL filters
 */
exports.URLFilter = class URLFilter extends ActiveFilter
{
  /**
   * @param {string} text see {@link module:filterClasses.Filter Filter()}
   * @param {string} regexpSource
   *   filter part that the regular expression should be build from
   * @param {number} [contentType]
   *   Content types the filter applies to, combination of values from
   *   `{@link module:contentTypes.contentTypes}`
   * @param {boolean} [matchCase]
   *   Defines whether the filter should distinguish between lower and upper
   *   case letters
   * @param {string} [domains]
   *   Domains that the filter is restricted to, e.g. "foo.com|bar.com|~baz.com"
   * @param {boolean} [thirdParty]
   *   Defines whether the filter should apply to third-party or first-party
   *   content only
   * @param {string} [sitekeys]
   *   Public keys of websites that this filter should apply to
   * @param {?string} [header]
   *   Header-based filtering.
   * @param {?string} [rewrite]
   *   The name of the internal resource to which to rewrite the
   *   URL. e.g. if the value of the `$rewrite` option is
   *   `abp-resource:blank-html`, this should be `blank-html`.
   *
   * @private
   */
  constructor(text, regexpSource, contentType, matchCase, domains, thirdParty,
              sitekeys, header, rewrite)
  {
    super(text, domains);

    /**
     * @see ActiveFilter.domainSeparator
     */
    this.domainSeparator = "|";

    /**
     * Expression from which a regular expression should be generated -
     * for delayed creation of the regexp property
     * @type {?string}
     */
    this.pattern = null;

    /**
     * Content types the filter applies to, combination of values from
     * `{@link module:contentTypes.contentTypes}`
     * @type {number}
     */
    this.contentType = contentType != null ? contentType : RESOURCE_TYPES;

    /**
     * Defines whether the filter should distinguish between lower and
     * upper case letters
     * @type {boolean}
     */
    this.matchCase = matchCase || false;

    /**
     * Defines whether the filter should apply to third-party or
     * first-party content only. Can be null (apply to all content).
     * @type {?boolean}
     */
    this.thirdParty = thirdParty != null ? thirdParty : null;

    /**
     * Header-based filtering expression. Refer to the filter
     * documentation reference for the syntax, or
     * `{@link BlockingFilter.filterHeaders}` for the reference
     * implementation.
     * @type {?string}
     */
    this.header = header != null ? header : null;

    /**
     * The name of the internal resource to which to rewrite the
     * URL. e.g. if the value of the `$rewrite` option is
     * `abp-resource:blank-html`, this should be `blank-html`.
     * @type {?string}
     */
    this.rewrite = rewrite != null ? rewrite : null;

    if (sitekeys != null)
      this.sitekeySource = sitekeys;

    if (!this.matchCase)
      regexpSource = regexpSource.toLowerCase();

    if (regexpSource.length >= 2 &&
        regexpSource[0] == "/" &&
        regexpSource[regexpSource.length - 1] == "/")
    {
      // The filter is a regular expression - convert it immediately to
      // catch syntax errors
      let regexp =
        new RegExp(regexpSource.substring(1, regexpSource.length - 1));
      Object.defineProperty(this, "regexp", {value: regexp});
    }
    else
    {
      // Patterns like /foo/bar/* exist so that they are not treated as regular
      // expressions. We drop any superfluous wildcards here so our
      // optimizations can kick in.
      regexpSource = regexpSource.replace(/^\*+/, "").replace(/\*+$/, "");

      // No need to convert this filter to regular expression yet, do it on
      // demand
      this.pattern = regexpSource;
    }
  }

  /**
   * Regular expression to be used when testing against this filter
   * @type {RegExp}
   */
  get regexp()
  {
    let value = null;

    let {pattern} = this;
    if (!isLiteralPattern(pattern))
      value = new RegExp(filterToRegExp(pattern));

    Object.defineProperty(this, "regexp", {value});
    return value;
  }

  /**
   * @see ActiveFilter.sitekeys
   */
  get sitekeys()
  {
    let {sitekeySource} = this;
    if (!sitekeySource)
      return null;

    let value = sitekeySource.split("|");
    Object.defineProperty(this, "sitekeys", {value});
    return value;
  }

  /**
   * Tests whether the URL request matches this filter
   * @param {module:url.URLRequest} request URL request to be tested
   * @param {number} typeMask bitmask of content / request types to match
   * @param {?string} [sitekey] public key provided by the document
   * @return {boolean} true in case of a match
   */
  matches(request, typeMask, sitekey)
  {
    return (this.contentType & typeMask) != 0 &&
           (this.thirdParty == null || this.thirdParty == request.thirdParty) &&
           (this.regexp ?
              this.isActiveOnDomain(request.documentHostname, sitekey) &&
              this._matchesLocation(request) :
              this._matchesLocation(request) &&
              this.isActiveOnDomain(request.documentHostname, sitekey));
  }

  /**
   * Checks whether the given URL request matches this filter's pattern.
   * @param {module:url.URLRequest} request The URL request to check.
   * @returns {boolean} `true` if the URL request matches.
   * @private
   */
  _matchesLocation(request)
  {
    let location = this.matchCase ? request.href : request.lowerCaseHref;

    let {regexp} = this;

    if (regexp)
      return regexp.test(location);

    let {pattern} = this;

    let startsWithAnchor = pattern[0] == "|";
    let startsWithExtendedAnchor = startsWithAnchor && pattern[1] == "|";
    let endsWithSeparator = pattern[pattern.length - 1] == "^";
    let endsWithAnchor = !endsWithSeparator &&
                         pattern[pattern.length - 1] == "|";

    if (startsWithExtendedAnchor)
      pattern = pattern.substr(2);
    else if (startsWithAnchor)
      pattern = pattern.substr(1);

    if (endsWithSeparator || endsWithAnchor)
      pattern = pattern.slice(0, -1);

    let index = location.indexOf(pattern);

    while (index != -1)
    {
      // The "||" prefix requires that the text that follows does not start
      // with a forward slash.
      if ((startsWithExtendedAnchor ?
             location[index] != "/" &&
             extendedAnchorRegExp.test(location.substring(0, index)) :
             startsWithAnchor ?
               index == 0 :
               true) &&
          (endsWithSeparator ?
             !location[index + pattern.length] ||
             separatorRegExp.test(location[index + pattern.length]) :
             endsWithAnchor ?
               index == location.length - pattern.length :
               true))
        return true;

      if (pattern == "")
        return true;

      index = location.indexOf(pattern, index + 1);
    }

    return false;
  }
};

/**
 * Creates a URL filter from its text representation
 * @param {string} text   same as in Filter()
 * @return {module:filterClasses.Filter}
 */
URLFilter.fromText = function(text)
{
  let blocking = true;
  let origText = text;
  if (text[0] == "@" && text[1] == "@")
  {
    blocking = false;
    text = text.substring(2);
  }

  let contentType = null;
  let matchCase = null;
  let domains = null;
  let sitekeys = null;
  let thirdParty = null;
  let csp = null;
  let rewrite = null;
  let header = null;
  let options;
  let match = text.includes("$") ? Filter.optionsRegExp.exec(text) : null;
  if (match)
  {
    options = match[1].split(",");
    text = match.input.substring(0, match.index);
    for (let option of options)
    {
      let value = null;
      let separatorIndex = option.indexOf("=");
      if (separatorIndex >= 0)
      {
        value = option.substring(separatorIndex + 1);
        option = option.substring(0, separatorIndex);
      }

      let inverse = option[0] == "~";
      if (inverse)
        option = option.substring(1);

      let type = contentTypes[option.replace(/-/, "_").toUpperCase()];
      if (type)
      {
        if (inverse)
        {
          if (contentType == null)
            contentType = RESOURCE_TYPES;
          contentType &= ~type;
        }
        else
        {
          contentType |= type;

          switch (type)
          {
            case contentTypes.CSP:
              if (blocking && !value)
                return new InvalidFilter(origText, "filter_invalid_csp");
              csp = value;
              break;
            case contentTypes.HEADER:
              if (blocking && !value)
                return new InvalidFilter(origText, "filter_invalid_header");
              if (value)
              {
                let equal = value.indexOf("=");
                if (equal == 0)
                  return new InvalidFilter(origText, "filter_invalid_header");
                if (equal != -1 && value.length >= equal + 3 &&
                    value[equal + 1] == "/" && value[value.length - 1] == "/")
                  return new InvalidFilter(origText, "filter_invalid_header");
                header = value.replace(/([^\\])\\x2c/, "$1,");
              }
              break;
          }
        }
      }
      else
      {
        switch (option.toLowerCase())
        {
          case "match-case":
            matchCase = !inverse;
            break;
          case "domain":
            if (!value)
              return new InvalidFilter(origText, "filter_unknown_option");
            domains = value;
            break;
          case "third-party":
            thirdParty = !inverse;
            break;
          case "sitekey":
            if (!value)
              return new InvalidFilter(origText, "filter_unknown_option");
            sitekeys = value.toUpperCase();
            break;
          case "rewrite":
            if (value == null)
              return new InvalidFilter(origText, "filter_unknown_option");
            if (!value.startsWith("abp-resource:"))
              return new InvalidFilter(origText, "filter_invalid_rewrite");
            rewrite = value.substring("abp-resource:".length);
            break;
          default:
            return new InvalidFilter(origText, "filter_unknown_option");
        }
      }
    }
  }

  try
  {
    if (blocking)
    {
      if (csp && Filter.invalidCSPRegExp.test(csp))
        return new InvalidFilter(origText, "filter_invalid_csp");

      if (rewrite)
      {
        if (text[0] == "|" && text[1] == "|")
        {
          if (!domains && thirdParty != false)
            return new InvalidFilter(origText, "filter_invalid_rewrite");
        }
        else if (text[0] == "*")
        {
          if (!domains)
            return new InvalidFilter(origText, "filter_invalid_rewrite");
        }
        else
        {
          return new InvalidFilter(origText, "filter_invalid_rewrite");
        }
      }

      return new BlockingFilter(origText, text, contentType, matchCase, domains,
                                thirdParty, sitekeys, header, rewrite, csp);
    }
    return new AllowingFilter(origText, text, contentType, matchCase, domains,
                              thirdParty, sitekeys, header);
  }
  catch (e)
  {
    return new InvalidFilter(origText, "filter_invalid_regexp");
  }
};

/**
 * @deprecated Use <code>{@link contentTypes}</code> instead.
 * @see contentTypes
 */
// For backwards compatibility.
URLFilter.typeMap = contentTypes;

let BlockingFilter =
/**
 * Class for blocking filters
 */
exports.BlockingFilter = class BlockingFilter extends URLFilter
{
  /**
   * @param {string} text see {@link module:filterClasses.Filter Filter()}
   * @param {string} regexpSource see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {number} [contentType] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {boolean} [matchCase] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {string} [domains] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {boolean} [thirdParty] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {string} [sitekeys] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {?string} [header] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {?string} [rewrite]
   *   The name of the internal resource to which to rewrite the
   *   URL. e.g. if the value of the `$rewrite` option is
   *   `abp-resource:blank-html`, this should be `blank-html`.
   * @param {?string} [csp]
   *   Content Security Policy to inject when the filter matches
   *
   * @private
   */
  constructor(text, regexpSource, contentType, matchCase, domains, thirdParty,
              sitekeys, header, rewrite, csp)
  {
    super(text, regexpSource, contentType, matchCase, domains, thirdParty,
          sitekeys, header, rewrite);

    /**
     * Content Security Policy to inject for matching requests.
     * @type {?string}
     */
    this.csp = csp != null ? csp : null;
  }

  get type()
  {
    return "blocking";
  }

  /**
   * Rewrites an URL.
   * @param {string} url the URL to rewrite
   * @return {string} the rewritten URL, or the original in case of failure
   */
  rewriteUrl(url)
  {
    return resourceMap.get(this.rewrite) || url;
  }

  /**
   * Filter headers.
   *
   * This function would be called by the request blocker code after
   * matching the request.
   *
   * @param {webRequest.HttpHeaders} headers the HTTP response headers
   *   to match, as they are returned by the request blocker. They
   *   follow the {@link webRequest API
   *   https://developer.mozilla.org/en-US/docs/Web/API/webRequest/HttpHeaders}.
   * @return {boolean} Whether the headers match. Will return true if
   *   there is nothing to match against, or if the header is present
   *   but no value.
   */
  filterHeaders(headers)
  {
    if (!this.header)
      return true;

    let value;
    let name;
    let separatorIndex = this.header.indexOf("=");
    if (separatorIndex >= 0)
    {
      value = this.header.substring(separatorIndex + 1);
      name = this.header.substring(0, separatorIndex).toLowerCase();
    }
    else
    {
      name = this.header;
    }

    for (let header of headers)
    {
      if (header.name.toLowerCase() == name)
      {
        if (value)
        {
          if (header.value.includes(value))
            return true;
        }
        else
        {
          return true;
        }
      }
    }

    return false;
  }
};

let AllowingFilter =
/**
 * Class for allowing (allowlisting) filters
 */
exports.AllowingFilter = class AllowingFilter extends URLFilter
{
  /**
   * @param {string} text see {@link module:filterClasses.Filter Filter()}
   * @param {string} regexpSource see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {number} [contentType] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {boolean} [matchCase] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {string} [domains] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {boolean} [thirdParty] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {string} [sitekeys] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {?string} [header] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   *
   * @private
   */
  constructor(text, regexpSource, contentType, matchCase, domains, thirdParty,
              sitekeys, header)
  {
    super(text, regexpSource, contentType, matchCase, domains, thirdParty,
          sitekeys, header);
  }

  get type()
  {
    return "allowing";
  }
};

let ContentFilter =
/**
 * Base class for content filters
 */
exports.ContentFilter = class ContentFilter extends ActiveFilter
{
  /**
   * @param {string} text see {@link module:filterClasses.Filter Filter()}
   * @param {string} [domains] Host names or domains the filter should be
   *                           restricted to
   * @param {string} body      The body of the filter
   *
   * @private
   */
  constructor(text, domains, body)
  {
    super(text, domains || null);

    this._body = body;

    /**
     * @see ActiveFilter.domainSeparator
     */
    this.domainSeparator = ",";
  }

  /**
   * The body of the filter
   * @type {string}
   */
  get body()
  {
    return this._body;
  }
};

/**
 * Creates a content filter from a pre-parsed text representation
 *
 * @param {string} text         same as in Filter()
 * @param {string} [domains]
 *   domains part of the text representation
 * @param {string} [type]
 *   rule type, either:
 *     * "" for an element hiding filter
 *     * "@" for an element hiding exception filter
 *     * "?" for an element hiding emulation filter
 *     * "$" for a snippet filter
 * @param {string} body
 *   body part of the text representation, either a CSS selector or a snippet
 *   script
 * @return {module:filterClasses.ElemHideFilter|
 *          module:filterClasses.ElemHideException|
 *          module:filterClasses.ElemHideEmulationFilter|
 *          module:filterClasses.SnippetFilter|
 *          module:filterClasses.InvalidFilter}
 */
ContentFilter.fromText = function(text, domains, type, body)
{
  // We don't allow content filters which have any empty domains.
  // Note: The ContentFilter.prototype.domainSeparator is duplicated here, if
  // that changes this must be changed too.
  if (domains && /(^|,)~?(,|$)/.test(domains))
    return new InvalidFilter(text, "filter_invalid_domain");

  if (type == "@")
    return new ElemHideException(text, domains, body);

  if (type == "?" || type == "$")
  {
    // Element hiding emulation and snippet filters are inefficient so we need
    // to make sure that they're only applied if they specify active domains
    if (!(/,[^~][^,.]*\.[^,]/.test("," + domains) ||
          ("," + domains + ",").includes(",localhost,")))
    {
      return new InvalidFilter(text, type == "?" ?
                                       "filter_elemhideemulation_nodomain" :
                                       "filter_snippet_nodomain");
    }

    if (type == "?")
      return new ElemHideEmulationFilter(text, domains, body);

    return new SnippetFilter(text, domains, body);
  }

  return new ElemHideFilter(text, domains, body);
};

let ElemHideBase =
/**
 * Base class for element hiding filters
 */
exports.ElemHideBase = class ElemHideBase extends ContentFilter
{
  /**
   * @param {string} text see {@link module:filterClasses.Filter Filter()}
   * @param {string} [domains] see
   *   {@link module:filterClasses.ContentFilter ContentFilter()}
   * @param {string} selector  CSS selector for the HTML elements that should be
   *                           hidden
   *
   * @private
   */
  constructor(text, domains, selector)
  {
    super(text, domains, selector);
  }

  /**
   * CSS selector for the HTML elements that should be hidden
   * @type {string}
   */
  get selector()
  {
    return this.body;
  }
};

let ElemHideFilter =
/**
 * Class for element hiding filters
 */
exports.ElemHideFilter = class ElemHideFilter extends ElemHideBase
{
  /**
   * @param {string} text see {@link module:filterClasses.Filter Filter()}
   * @param {string} [domains]  see
   *   {@link module:filterClasses.ElemHideBase ElemHideBase()}
   * @param {string} selector see
   *   {@link module:filterClasses.ElemHideBase ElemHideBase()}
   *
   * @private
   */
  constructor(text, domains, selector)
  {
    super(text, domains, selector);
  }

  get type()
  {
    return "elemhide";
  }
};

let ElemHideException =
/**
 * Class for element hiding exceptions
 */
exports.ElemHideException = class ElemHideException extends ElemHideBase
{
  /**
   * @param {string} text see {@link module:filterClasses.Filter Filter()}
   * @param {string} [domains]  see
   *   {@link module:filterClasses.ElemHideBase ElemHideBase()}
   * @param {string} selector see
   *   {@link module:filterClasses.ElemHideBase ElemHideBase()}
   *
   * @private
   */
  constructor(text, domains, selector)
  {
    super(text, domains, selector);
  }

  get type()
  {
    return "elemhideexception";
  }
};

let ElemHideEmulationFilter =
/**
 * Class for element hiding emulation filters
 */
exports.ElemHideEmulationFilter =
class ElemHideEmulationFilter extends ElemHideBase
{
  /**
   * @param {string} text    see {@link module:filterClasses.Filter Filter()}
   * @param {string} domains see
   *   {@link module:filterClasses.ElemHideBase ElemHideBase()}
   * @param {string} selector see
   *   {@link module:filterClasses.ElemHideBase ElemHideBase()}
   * @constructor
   * @augments module:filterClasses.ElemHideBase
   *
   * @private
   */
  constructor(text, domains, selector)
  {
    super(text, domains, selector);
  }

  get type()
  {
    return "elemhideemulation";
  }
};

let SnippetFilter =
/**
 * Class for snippet filters
 */
exports.SnippetFilter = class SnippetFilter extends ContentFilter
{
  /**
   * @param {string} text see Filter()
   * @param {string} [domains] see ContentFilter()
   * @param {string} script    Script that should be executed
   * @constructor
   * @augments module:filterClasses.ContentFilter
   *
   * @private
   */
  constructor(text, domains, script)
  {
    super(text, domains, script);
  }

  get type()
  {
    return "snippet";
  }

  /**
   * Script that should be executed
   * @type {string}
   */
  get script()
  {
    return this.body;
  }
};


/***/ }),

/***/ 5165:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



__webpack_require__(8823);
const {parseURL} = __webpack_require__(5622);
const {Filter} = __webpack_require__(3217);
const {defaultMatcher} = __webpack_require__(6240);
const {elemHide} = __webpack_require__(5093);
const {elemHideEmulation} = __webpack_require__(5363);
const {elemHideExceptions} = __webpack_require__(8580);
const {snippets} = __webpack_require__(7938);
const {profiler} = __webpack_require__(7345);

/**
 * Selects the appropriate module for the given filter type.
 *
 * @param {string} type The type of a filter. This must be one of
 *   `"blocking"`, `"allowing"`, `"elemhide"`, `"elemhideemulation"`,
 *   `"elemhideexception"`, and `"snippet"`; otherwise the function returns
 *   `null`.
 *
 * @returns {?object} The appropriate module for the given filter type.
 */
function selectModule(type)
{
  switch (type)
  {
    case "blocking":
    case "allowing":
      return defaultMatcher;
    case "elemhide":
      return elemHide;
    case "elemhideemulation":
      return elemHideEmulation;
    case "elemhideexception":
      return elemHideExceptions;
    case "snippet":
      return snippets;
  }

  return null;
}

/**
 * `{@link module:filterEngine.filterEngine filterEngine}` implementation.
 */
class FilterEngine
{
  /**
   * Creates the `{@link module:filterEngine.filterEngine filterEngine}`
   * object.
   * @private
   */
  constructor()
  {
    this.p = profiler("FilterEngine");
    this.p.start();
    /**
     * The promise returned by
     * `{@link module:filterEngine~FilterEngine#initialize}`.
     * @type {?Promise}
     * @private
     */
    this._initializationPromise = null;
  }

  /**
   * Initializes the `{@link module:filterEngine.filterEngine filterEngine}`
   * object with the given filters or filters loaded from disk.
   *
   * @param {Iterable.<string>} [filterSource] An iterable object that yields
   *   the text of the filters with which to initialize the
   *   `{@link module:filterEngine.filterEngine filterEngine}` object. If
   *   omitted, filters are loaded from disk.
   *
   * @returns {Promise} A promise that is fulfilled when the initialization is
   *   complete.
   *
   * @public
   */
  initialize(filterSource)
  {
    this.p.mark("initialize");
    if (!this._initializationPromise)
    {
      if (typeof filterSource == "undefined")
      {
        // Note: filterListener.js must be loaded conditionally here in local
        // scope in order for the engine to be able to work in standalone mode
        // with no disk and network I/O.
        const {filterListener} = __webpack_require__(6675);
        this._initializationPromise = filterListener.initialize(this);
      }
      else
      {
        this._initializationPromise = Promise.resolve().then(() =>
        {
          for (let text of filterSource)
            this.add(Filter.fromText(Filter.normalize(text)));
        }).finally(() =>
        {
          this.p.mark("download_done");
        });
      }
    }

    return this._initializationPromise;
  }

  /**
   * Adds a new filter.
   * @param {module:filterClasses.ActiveFilter} filter
   * @package
   */
  add(filter)
  {
    let module = selectModule(filter.type);
    if (module)
      module.add(filter);
  }

  /**
   * Removes an existing filter.
   * @param {module:filterClasses.ActiveFilter} filter
   * @package
   */
  remove(filter)
  {
    let module = selectModule(filter.type);
    if (module)
      module.remove(filter);
  }

  /**
   * Checks whether a filter exists.
   * @param {module:filterClasses.ActiveFilter} filter
   * @returns {boolean}
   * @package
   */
  has(filter)
  {
    let module = selectModule(filter.type);
    if (module)
      return module.has(filter);
    return false;
  }

  /**
   * Clears all filters.
   * @package
   */
  clear()
  {
    defaultMatcher.clear();
    elemHide.clear();
    elemHideEmulation.clear();
    elemHideExceptions.clear();
    snippets.clear();
  }

  /**
   * Matches existing URL filters against a web resource
   * (HTML document, CSS style sheet, PNG image, etc.) and returns the matching
   * filter if there's a match.
   *
   * @param {string|URL|module:url~URLInfo} url The URL of the resource.
   * @param {number} typeMask The
   *   {@link module:contentTypes.contentTypes content types} associated with
   *   the resource.
   * @param {string} documentHostname The hostname of the document of the
   *   resource.
   * @param {?string} [sitekey] An optional public key associated with the
   *   document of the resource.
   * @param {boolean} [specificOnly] Whether to ignore any generic filters.
   *
   * @returns {?string} A URL filter if there's a match; otherwise `null`.
   *
   * @public
   */
  match(url, typeMask, documentHostname, sitekey = null, specificOnly = false)
  {
    if (typeof url == "string")
      url = parseURL(url);

    let filter = defaultMatcher.match(url, typeMask, documentHostname, sitekey,
                                      specificOnly);
    return filter ? filter.text : null;
  }
}

/**
 * The `filterEngine` object maintains filters for request blocking, element
 * hiding, and snippets.
 *
 * @type {module:filterEngine~FilterEngine}
 *
 * @public
 *
 * @example
 *
 * let {contentTypes, filterEngine} = require("adblockpluscore");
 *
 * await filterEngine.initialize(
 *   [
 *     "/annoying-ad^$image",
 *     "||example.com/social-widget.html^"
 *   ]
 * );
 *
 * let resource = {
 *   url: "https://ad-server.example.net/annoying-ad.png",
 *   documentURL: "https://news.example.com/world.html"
 * };
 *
 * let filter = filterEngine.match(resource.url, contentTypes.IMAGE,
 *                                 new URL(resource.documentURL).hostname);
 * console.log(filter); // prints "/annoying-ad^$image"
 */
exports.c = new FilterEngine();


/***/ }),

/***/ 6675:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @fileOverview Synchronization between filter storage and the filter engine.
 */

const {filterStorage} = __webpack_require__(9302);
const {filterNotifier} = __webpack_require__(3326);
const {isActiveFilter, Filter} = __webpack_require__(3217);
const {SpecialSubscription} = __webpack_require__(1883);
const {filterState} = __webpack_require__(9970);
const {contentTypes} = __webpack_require__(298);

/**
 * Checks whether filters from a given subscription should be deployed to the
 * filter engine.
 *
 * If the subscription is both valid and enabled, the function returns `true`;
 * otherwise, it returns `false`.
 *
 * @param {module:subscriptionClasses.Subscription} subscription
 *   The subscription.
 *
 * @returns {boolean} Whether filters from the subscription should be deployed
 *   to the filter engine.
 */
function shouldDeployFilters(subscription)
{
  return subscription.valid && !subscription.disabled;
}

/**
 * Deploys a filter to the filter engine.
 *
 * The filter is deployed only if it belongs to at least one subscription that
 * is both valid and enabled.
 *
 * If the filter is a snippet filter, or a block filter with the `$header`
 * options, it is deployed only if it belongs to at
 * least one subscription that is valid, enabled, and of
 * {@link module:subscriptionClasses.Subscription#type type}
 * `circumvention` or a
 * {@link module:subscriptionClasses.SpecialSubscription special subscription}
 * that keeps user-defined filters.
 *
 * @param {module:filterEngine~FilterEngine} engine A reference to the
 *   filter engine.
 * @param {Filter} filter The filter.
 * @param {?Array.<module:subscriptionClasses.Subscription>} [subscriptions]
 *   A list of subscriptions to which the filter belongs. If omitted or `null`,
 *   the information is looked up from
 *   {@link module:filterStorage.filterStorage filter storage}.
 */
function deployFilter(engine, filter, subscriptions = null)
{
  if (!isActiveFilter(filter) || !filterState.isEnabled(filter.text))
    return;

  let deploy = false;
  let allowPrivileged = false;

  for (let subscription of subscriptions ||
                           filterStorage.subscriptions(filter.text))
  {
    if (shouldDeployFilters(subscription))
    {
      deploy = true;

      // Allow snippets to be executed only by the circumvention lists or the
      // user's own filters.
      if (subscription.type == "circumvention" ||
          subscription instanceof SpecialSubscription)
      {
        allowPrivileged = true;
        break;
      }
    }
  }

  if (!deploy)
    return;

  if (!allowPrivileged && (filter.type == "snippet" ||
                           (filter.type == "blocking" &&
                            filter.contentType == contentTypes.HEADER)))
    return;

  engine.add(filter);
}

/**
 * Undeploys a filter from the filter engine.
 *
 * The filter is undeployed only if it does not belong to at least one
 * subscription that is both valid and enabled.
 *
 * @param {module:filterEngine~FilterEngine} engine A reference to the
 *   filter engine.
 * @param {module:filterClasses.Filter} filter The filter.
 */
function undeployFilter(engine, filter)
{
  if (!isActiveFilter(filter))
    return;

  if (filterState.isEnabled(filter.text))
  {
    let keep = false;
    for (let subscription of filterStorage.subscriptions(filter.text))
    {
      if (shouldDeployFilters(subscription))
      {
        keep = true;
        break;
      }
    }

    if (keep)
      return;
  }

  engine.remove(filter);
}

/**
 * `{@link module:filterListener.filterListener filterListener}`
 * implementation.
 */
class FilterListener
{
  /**
   * Initializes filter listener on startup, registers the necessary hooks.
   *
   * Initialization is asynchronous; once complete,
   * `{@link module:filterNotifier.filterNotifier filterNotifier}` emits the
   * `ready` event.
   *
   * @hideconstructor
   */
  constructor()
  {
    /**
     * A reference to the filter engine.
     * @type {?module:filterEngine~FilterEngine}
     * @private
     */
    this._engine = null;

    /**
     * Increases on filter changes, filters will be saved if it exceeds 1.
     * @type {number}
     * @private
     */
    this._isDirty = 0;
  }

  /**
   * Initializes filter listener.
   * @param {module:filterEngine~FilterEngine} engine A reference to the
   *   filter engine.
   * @returns {Promise} A promise that is fulfilled when the initialization is
   *   complete.
   * @package
   */
  async initialize(engine)
  {
    if (engine == null || typeof engine != "object")
      throw new Error("engine must be a non-null object.");

    if (this._engine != null)
      throw new Error("Filter listener already initialized.");

    this._engine = engine;

    await filterStorage.loadFromDisk();

    let promise = Promise.resolve();

    // Initialize filters from each subscription asynchronously on startup by
    // setting up a chain of promises.
    for (let subscription of filterStorage.subscriptions())
    {
      if (shouldDeployFilters(subscription))
      {
        promise = promise.then(() =>
        {
          for (let text of subscription.filterText())
            deployFilter(this._engine, Filter.fromText(text), [subscription]);
        });
      }
    }

    await promise;

    filterNotifier.on("filter.added", this._onFilterAdded.bind(this));
    filterNotifier.on("filter.removed", this._onFilterRemoved.bind(this));
    filterNotifier.on("filter.moved", this._onGenericChange.bind(this));

    filterNotifier.on("filterState.enabled",
                      this._onFilterStateEnabled.bind(this));
    filterNotifier.on("filterState.hitCount",
                      this._onFilterStateHitCount.bind(this));
    filterNotifier.on("filterState.lastHit",
                      this._onFilterStateLastHit.bind(this));

    filterNotifier.on("subscription.added",
                      this._onSubscriptionAdded.bind(this));
    filterNotifier.on("subscription.removed",
                      this._onSubscriptionRemoved.bind(this));
    filterNotifier.on("subscription.disabled",
                      this._onSubscriptionDisabled.bind(this));
    filterNotifier.on("subscription.updated",
                      this._onSubscriptionUpdated.bind(this));
    filterNotifier.on("subscription.title", this._onGenericChange.bind(this));
    filterNotifier.on("subscription.fixedTitle",
                      this._onGenericChange.bind(this));
    filterNotifier.on("subscription.homepage",
                      this._onGenericChange.bind(this));
    filterNotifier.on("subscription.downloadStatus",
                      this._onGenericChange.bind(this));
    filterNotifier.on("subscription.lastCheck",
                      this._onGenericChange.bind(this));
    filterNotifier.on("subscription.errors",
                      this._onGenericChange.bind(this));

    filterNotifier.on("load", this._onLoad.bind(this));
    filterNotifier.on("save", this._onSave.bind(this));

    // Indicate that all filters are ready for use.
    filterNotifier.emit("ready");
  }

  /**
   * Increases "dirty factor" of the filters and calls
   * filterStorage.saveToDisk() if it becomes 1 or more.
   *
   * Save is executed delayed to prevent multiple subsequent calls. If the
   * parameter is 0 it forces saving filters if any changes were recorded after
   * the previous save.
   *
   * @param {number} factor
   *
   * @private
   */
  _setDirty(factor)
  {
    if (factor == 0 && this._isDirty > 0)
      this._isDirty = 1;
    else
      this._isDirty += factor;
    if (this._isDirty >= 1)
    {
      this._isDirty = 0;
      filterStorage.saveToDisk();
    }
  }

  _onSubscriptionAdded(subscription)
  {
    this._setDirty(1);

    if (shouldDeployFilters(subscription))
    {
      for (let text of subscription.filterText())
        deployFilter(this._engine, Filter.fromText(text), [subscription]);
    }
  }

  _onSubscriptionRemoved(subscription)
  {
    this._setDirty(1);

    if (shouldDeployFilters(subscription))
    {
      for (let text of subscription.filterText())
        undeployFilter(this._engine, Filter.fromText(text));
    }
  }

  _onSubscriptionDisabled(subscription, newValue)
  {
    this._setDirty(1);

    if (filterStorage.hasSubscription(subscription))
    {
      if (newValue == false)
      {
        for (let text of subscription.filterText())
          deployFilter(this._engine, Filter.fromText(text), [subscription]);
      }
      else
      {
        for (let text of subscription.filterText())
          undeployFilter(this._engine, Filter.fromText(text));
      }
    }
  }

  _onSubscriptionUpdated(subscription, textDelta)
  {
    this._setDirty(1);

    if (shouldDeployFilters(subscription) &&
        filterStorage.hasSubscription(subscription))
    {
      for (let text of textDelta.removed)
        undeployFilter(this._engine, Filter.fromText(text));

      for (let text of textDelta.added)
        deployFilter(this._engine, Filter.fromText(text), [subscription]);
    }
  }

  _onFilterAdded(filter)
  {
    this._setDirty(1);

    if (filterState.isEnabled(filter.text))
      deployFilter(this._engine, filter);
  }

  _onFilterRemoved(filter)
  {
    this._setDirty(1);

    if (filterState.isEnabled(filter.text))
      undeployFilter(this._engine, filter);
  }

  _onFilterStateEnabled(text, newValue)
  {
    this._setDirty(1);

    if (newValue == false)
      undeployFilter(this._engine, Filter.fromText(text));
    else
      deployFilter(this._engine, Filter.fromText(text));
  }

  _onFilterStateHitCount(text, newValue)
  {
    if (newValue == 0)
      this._setDirty(0);
    else
      this._setDirty(0.002);
  }

  _onFilterStateLastHit()
  {
    this._setDirty(0.002);
  }

  _onGenericChange()
  {
    this._setDirty(1);
  }

  _onLoad()
  {
    this._isDirty = 0;

    this._engine.clear();

    for (let subscription of filterStorage.subscriptions())
    {
      if (shouldDeployFilters(subscription))
      {
        for (let text of subscription.filterText())
          deployFilter(this._engine, Filter.fromText(text), [subscription]);
      }
    }
  }

  _onSave()
  {
    this._isDirty = 0;
  }
}

/**
 * Component synchronizing filter storage with the filter engine.
 * @type {module:filterListener~FilterListener}
 * @package
 */
exports.filterListener = new FilterListener();


/***/ }),

/***/ 3326:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @fileOverview This component manages listeners and calls them to distribute
 * messages about filter changes.
 */

const {EventEmitter} = __webpack_require__(8450);

/**
 * This object allows registering and triggering listeners for filter events.
 * @type {module:events.EventEmitter}
 */
exports.filterNotifier = new EventEmitter();


/***/ }),

/***/ 9970:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



const {filterNotifier} = __webpack_require__(3326);

/**
 * Internal map containing filter state.
 * @type {Map.<string, object>}
 * @private
 */
const map = new Map();

/**
 * `{@link module:filterState.filterState filterState}` implementation.
 */

/**
 * Maintains filter state.
 * @type {module:filterState~FilterState}
 */
exports.filterState = {
  /**
   * Checks whether a filter is enabled.
   * @param {string} filterText The text of the filter.
   * @returns {boolean} Whether the filter is enabled.
   */
  isEnabled(filterText)
  {
    let state = map.size > 0 ? map.get(filterText) : void 0;
    if (state)
      return !state.disabled;

    return true;
  },

  /**
   * Sets the enabled state of a filter.
   * @param {string} filterText The text of the filter.
   * @param {boolean} enabled The new enabled state of the filter.
   */
  setEnabled(filterText, enabled)
  {
    setEnabledWithState(filterText, enabled, map.size > 0 ?
                                             map.get(filterText) :
                                             void 0);
  },

  /**
   * Toggles the enabled state of a filter.
   * @param {string} filterText The text of the filter.
   */
  toggleEnabled(filterText)
  {
    let state = map.size > 0 ? map.get(filterText) : void 0;

    setEnabledWithState(filterText, state ? state.disabled : false, state);
  },

  /**
   * Resets the enabled state of a filter.
   * @param {string} filterText The text of the filter.
   */
  resetEnabled(filterText)
  {
    this.setEnabled(filterText, true);
  },

  /**
   * Returns the hit count of a filter.
   * @param {string} filterText The text of the filter.
   * @returns {number} The hit count of the filter.
   */
  getHitCount(filterText)
  {
    let state = map.size > 0 ? map.get(filterText) : void 0;
    if (state)
      return state.hitCount;

    return 0;
  },

  /**
   * Sets the hit count of a filter.
   * @param {string} filterText The text of the filter.
   * @param {number} hitCount The new hit count of the filter.
   */
  setHitCount(filterText, hitCount)
  {
    let state = map.size > 0 ? map.get(filterText) : void 0;
    if (state)
    {
      let oldHitCount = state.hitCount;

      if (hitCount == 0 && !state.disabled && state.lastHit == 0)
        map.delete(filterText);
      else
        state.hitCount = hitCount;

      if (hitCount != oldHitCount)
      {
        filterNotifier.emit("filterState.hitCount", filterText, hitCount,
                            oldHitCount);
      }
    }
    else if (hitCount != 0)
    {
      map.set(filterText, {disabled: false, hitCount, lastHit: 0});

      filterNotifier.emit("filterState.hitCount", filterText, hitCount, 0);
    }
  },

  /**
   * Resets the hit count of a filter.
   * @param {string} filterText The text of the filter.
   */
  resetHitCount(filterText)
  {
    this.setHitCount(filterText, 0);
  },

  /**
   * Returns the last hit time of a filter.
   * @param {string} filterText The text of the filter.
   * @returns {number} The last hit time of the filter in milliseconds since
   *   the Unix epoch.
   */
  getLastHit(filterText)
  {
    let state = map.size > 0 ? map.get(filterText) : void 0;
    if (state)
      return state.lastHit;

    return 0;
  },

  /**
   * Sets the last hit time of a filter.
   * @param {string} filterText The text of the filter.
   * @param {number} lastHit The new last hit time of the filter in
   *   milliseconds since the Unix epoch.
   */
  setLastHit(filterText, lastHit)
  {
    let state = map.size > 0 ? map.get(filterText) : void 0;
    if (state)
    {
      let oldLastHit = state.lastHit;

      if (lastHit == 0 && !state.disabled && state.hitCount == 0)
        map.delete(filterText);
      else
        state.lastHit = lastHit;

      if (lastHit != oldLastHit)
      {
        filterNotifier.emit("filterState.lastHit", filterText, lastHit,
                            oldLastHit);
      }
    }
    else if (lastHit != 0)
    {
      map.set(filterText, {disabled: false, hitCount: 0, lastHit});

      filterNotifier.emit("filterState.lastHit", filterText, lastHit, 0);
    }
  },

  /**
   * Resets the last hit time of a filter.
   * @param {string} filterText The text of the filter.
   */
  resetLastHit(filterText)
  {
    this.setLastHit(filterText, 0);
  },

  /**
   * Registers a filter hit by incrementing the hit count of the filter and
   * setting the last hit time of the filter to the current time.
   * @param {string} filterText The text of the filter.
   */
  registerHit(filterText)
  {
    let now = Date.now();

    let state = map.size > 0 ? map.get(filterText) : void 0;
    if (state)
    {
      let oldHitCount = state.hitCount;
      let oldLastHit = state.lastHit;

      state.hitCount++;
      state.lastHit = now;

      if (state.hitCount != oldHitCount)
      {
        filterNotifier.emit("filterState.hitCount", filterText, state.hitCount,
                            oldHitCount);
      }

      if (state.lastHit != oldLastHit)
      {
        filterNotifier.emit("filterState.lastHit", filterText, state.lastHit,
                            oldLastHit);
      }
    }
    else
    {
      map.set(filterText, {disabled: false, hitCount: 1, lastHit: now});

      filterNotifier.emit("filterState.hitCount", filterText, 1, 0);
      filterNotifier.emit("filterState.lastHit", filterText, now, 0);
    }
  },

  /**
   * Resets the hit count and last hit time of a filter.
   * @param {string} filterText The text of the filter.
   */
  resetHits(filterText)
  {
    let state = map.size > 0 ? map.get(filterText) : void 0;
    if (!state)
      return;

    let oldHitCount = state.hitCount;
    let oldLastHit = state.lastHit;

    if (state.disabled)
    {
      state.hitCount = 0;
      state.lastHit = 0;
    }
    else
    {
      map.delete(filterText);
    }

    if (oldHitCount != 0)
      filterNotifier.emit("filterState.hitCount", filterText, 0, oldHitCount);

    if (oldLastHit != 0)
      filterNotifier.emit("filterState.lastHit", filterText, 0, oldLastHit);
  },

  /**
   * Resets the enabled state, hit count, and last hit time of a filter.
   * @param {string} filterText The text of the filter.
   */
  reset(filterText)
  {
    let state = map.size > 0 ? map.get(filterText) : void 0;
    if (!state)
      return;

    let oldDisabled = state.disabled;
    let oldHitCount = state.hitCount;
    let oldLastHit = state.lastHit;

    map.delete(filterText);

    if (oldDisabled)
      filterNotifier.emit("filterState.disabled", filterText, false, true);

    if (oldHitCount != 0)
      filterNotifier.emit("filterState.hitCount", filterText, 0, oldHitCount);

    if (oldLastHit != 0)
      filterNotifier.emit("filterState.lastHit", filterText, 0, oldLastHit);
  },

  /**
   * Serializes the state of a filter.
   * @param {string} filterText The text of the filter.
   * @yields {string} The next line in the serialized representation of the
   *   state of the filter.
   * @see module:filterState~FilterState#fromObject
   * @package
   */
  *serialize(filterText)
  {
    let state = map.size > 0 ? map.get(filterText) : void 0;
    if (!state)
      return;

    yield "[Filter]";
    yield "text=" + filterText;

    if (state.disabled)
      yield "disabled=true";
    if (state.hitCount != 0)
      yield "hitCount=" + state.hitCount;
    if (state.lastHit != 0)
      yield "lastHit=" + state.lastHit;
  },

  /**
   * Reads the state of a filter from an object representation.
   * @param {string} filterText The text of the filter.
   * @param {object} object An object containing at least one of `disabled`,
   *   `hitCount`, and `lastHit` properties and their appropriate values.
   * @see module:filterState~FilterState#serialize
   * @package
   */
  fromObject(filterText, object)
  {
    if (!("disabled" in object || "hitCount" in object || "lastHit" in object))
      return;

    let state = {
      disabled: String(object.disabled) == "true",
      hitCount: parseInt(object.hitCount, 10) || 0,
      lastHit: parseInt(object.lastHit, 10) || 0
    };

    if (!state.disabled && state.hitCount == 0 && state.lastHit == 0)
      map.delete(filterText);
    else
      map.set(filterText, state);
  }
};

function setEnabledWithState(filterText, enabled, state)
{
  let oldEnabled = state ? !state.disabled : true;

  if (enabled)
  {
    if (state)
    {
      state.disabled = false;

      if (state.hitCount == 0 && state.lastHit == 0)
        map.delete(filterText);
    }
  }
  else if (state)
  {
    state.disabled = true;
  }
  else
  {
    map.set(filterText, {disabled: true, hitCount: 0, lastHit: 0});
  }

  if (enabled != oldEnabled)
  {
    filterNotifier.emit("filterState.enabled", filterText, enabled,
                        oldEnabled);
  }
}


/***/ }),

/***/ 9302:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @fileOverview `filterStorage` object responsible for managing the user's
 * subscriptions and filters.
 */

const {IO} = __webpack_require__(4656);
const {Prefs} = __webpack_require__(4776);
const {isActiveFilter, Filter} = __webpack_require__(3217);
const {Subscription, SpecialSubscription} = __webpack_require__(1883);
const {filterNotifier} = __webpack_require__(3326);
const {INIParser} = __webpack_require__(8414);
const {filterState} = __webpack_require__(9970);

/**
 * @typedef {{exists: boolean, lastModified: number}} Stats
 */

/**
 * A cache for all source files and backup stats.
 * @type {Map<string, Stats>}
 * @private
 */
let stats = new Map();

/**
 * An asynchronous guard for multiple backups renmaing operations. It gets
 * reassigned to a new Promise that rename all backups one more time.
 * @type {Promise<void>}
 * @private
 */
let backupQueue = Promise.resolve();

/**
 * Version number of the filter storage file format.
 * @type {number}
 */
const FORMAT_VERSION = 5;

/**
 * `{@link module:filterStorage.filterStorage filterStorage}` implementation.
 */
class FilterStorage
{
  /**
   * @hideconstructor
   */
  constructor()
  {
    /**
     * Will be set to `true` after the initial
     * `{@link module:filterStorage~FilterStorage#loadFromDisk loadFromDisk()}`
     * call completes.
     * @type {boolean}
     */
    this.initialized = false;

    /**
     * Will be set to `true` if no `patterns.ini` file exists.
     * @type {boolean}
     */
    this.firstRun = false;

    /**
     * Map of properties listed in the filter storage file before the sections
     * start. Right now this should be only the format version.
     * @type {object}
     */
    this.fileProperties = Object.create(null);

    /**
     * Map of subscriptions already on the list, by their URL/identifier.
     * @type {Map.<string,module:subscriptionClasses.Subscription>}
     * @private
     */
    this._knownSubscriptions = new Map();

    /**
     * Will be set to `true` if
     * `{@link module:filterStorage~FilterStorage#saveToDisk saveToDisk()}`
     * is running (reentrance protection).
     * @type {boolean}
     * @private
     */
    this._saving = false;

    /**
     * Will be set to `true` if a
     * `{@link module:filterStorage~FilterStorage#saveToDisk saveToDisk()}`
     * call arrives while
     * `{@link module:filterStorage~FilterStorage#saveToDisk saveToDisk()}`
     * is already running (delayed execution).
     * @type {boolean}
     * @private
     */
    this._needsSave = false;

    /**
     * This property is for testing purpose only and it should never be used
     * directly via code.
     * @type {Map<string, Stats>}
     * @private
     */
    this._stats = stats;
  }

  /**
   * The version number of the `patterns.ini` format used.
   * @type {number}
   */
  get formatVersion()
  {
    return FORMAT_VERSION;
  }

  /**
   * The file containing the subscriptions.
   * @type {string}
   */
  get sourceFile()
  {
    return "patterns.ini";
  }

  /**
   * Yields subscriptions in the storage.
   * @param {?string} [filterText] The filter text for which to look. If
   *   specified, the function yields only those subscriptions that contain the
   *   given filter text. By default the function yields all subscriptions.
   * @yields {module:subscriptionClasses.Subscription}
   */
  *subscriptions(filterText = null)
  {
    if (filterText == null)
    {
      yield* this._knownSubscriptions.values();
    }
    else
    {
      for (let subscription of this._knownSubscriptions.values())
      {
        if (subscription.hasFilterText(filterText))
          yield subscription;
      }
    }
  }

  /**
   * Returns the number of subscriptions in the storage.
   * @param {?string} [filterText] The filter text for which to look. If
   *   specified, the function counts only those subscriptions that contain the
   *   given filter text. By default the function counts all subscriptions.
   * @returns {number}
   */
  getSubscriptionCount(filterText = null)
  {
    if (filterText == null)
      return this._knownSubscriptions.size;

    let count = 0;
    for (let subscription of this._knownSubscriptions.values())
    {
      if (subscription.hasFilterText(filterText))
        count++;
    }
    return count;
  }

  /**
   * Finds the filter group that a filter should be added to by default. Will
   * return `null` if this group doesn't exist yet.
   * @param {Filter} filter
   * @returns {?module:subscriptionClasses.SpecialSubscription}
   */
  getGroupForFilter(filter)
  {
    let generalSubscription = null;
    for (let subscription of this._knownSubscriptions.values())
    {
      if (subscription instanceof SpecialSubscription && !subscription.disabled)
      {
        // Always prefer specialized subscriptions
        if (subscription.isDefaultFor(filter))
          return subscription;

        // If this is a general subscription - store it as fallback
        if (!generalSubscription &&
            (!subscription.defaults || !subscription.defaults.length))
          generalSubscription = subscription;
      }
    }
    return generalSubscription;
  }

  /**
   * Checks whether a given subscription is in the storage.
   * @param {module:subscriptionClasses.Subscription} subscription
   * @returns {boolean}
   */
  hasSubscription(subscription)
  {
    return this._knownSubscriptions.has(subscription.url);
  }

  /**
   * Adds a subscription to the storage.
   * @param {module:subscriptionClasses.Subscription} subscription The
   *   subscription to be added.
   */
  addSubscription(subscription)
  {
    if (this._knownSubscriptions.has(subscription.url))
      return;

    this._knownSubscriptions.set(subscription.url, subscription);

    filterNotifier.emit("subscription.added", subscription);
  }

  /**
   * Removes a subscription from the storage.
   * @param {module:subscriptionClasses.Subscription} subscription The
   *   subscription to be removed.
   */
  removeSubscription(subscription)
  {
    if (!this._knownSubscriptions.has(subscription.url))
      return;

    this._knownSubscriptions.delete(subscription.url);

    // This should be the last remaining reference to the Subscription
    // object.
    Subscription.knownSubscriptions.delete(subscription.url);

    filterNotifier.emit("subscription.removed", subscription);
  }

  /**
   * Replaces the list of filters in a subscription with a new list.
   * @param {module:subscriptionClasses.Subscription} subscription The
   *   subscription to be updated.
   * @param {Array.<string>} filterText The new filter text.
   */
  updateSubscriptionFilters(subscription, filterText)
  {
    filterNotifier.emit("subscription.updated", subscription,
                        subscription.updateFilterText(filterText));
  }

  /**
   * Adds a user-defined filter to the storage.
   * @param {Filter} filter
   * @param {?module:subscriptionClasses.SpecialSubscription} [subscription]
   *   The subscription that the filter should be added to.
   * @param {number} [position] The position within the subscription at which
   *   the filter should be added. If not specified, the filter is added at the
   *   end of the subscription.
   */
  addFilter(filter, subscription, position)
  {
    if (!subscription)
    {
      for (let currentSubscription of this._knownSubscriptions.values())
      {
        if (currentSubscription instanceof SpecialSubscription &&
            !currentSubscription.disabled &&
            currentSubscription.hasFilterText(filter.text))
          return;   // No need to add
      }
      subscription = this.getGroupForFilter(filter);
    }
    if (!subscription)
    {
      // No group for this filter exists, create one
      subscription = SpecialSubscription.createForFilter(filter);
      this.addSubscription(subscription);
      return;
    }

    if (typeof position == "undefined")
      position = subscription.filterCount;

    subscription.insertFilterAt(filter, position);
    filterNotifier.emit("filter.added", filter, subscription, position);
  }

  /**
   * Removes a user-defined filter from the storage.
   * @param {module:filterClasses.Filter} filter
   * @param {?module:subscriptionClasses.SpecialSubscription} [subscription]
   *   The subscription that the filter should be removed from. If not
   *   specified, the filter will be removed from all subscriptions.
   * @param {number} [position] The position within the subscription at which
   *   the filter should be removed. If not specified, all instances of the
   *   filter will be removed.
   */
  removeFilter(filter, subscription, position)
  {
    let subscriptions = (
      subscription ? [subscription] : this._knownSubscriptions.values()
    );
    for (let currentSubscription of subscriptions)
    {
      if (currentSubscription instanceof SpecialSubscription &&
          (currentSubscription == subscription ||
           currentSubscription.hasFilterText(filter.text)))
      {
        let positions = [];
        if (typeof position == "undefined")
        {
          let index = -1;
          do
          {
            index = currentSubscription.findFilterIndex(filter, index + 1);
            if (index >= 0)
              positions.push(index);
          } while (index >= 0);
        }
        else
        {
          positions.push(position);
        }

        for (let j = positions.length - 1; j >= 0; j--)
        {
          let currentPosition = positions[j];
          let currentFilterText =
            currentSubscription.filterTextAt(currentPosition);
          if (currentFilterText && currentFilterText == filter.text)
          {
            currentSubscription.deleteFilterAt(currentPosition);
            filterNotifier.emit("filter.removed", filter, currentSubscription,
                                currentPosition);
          }
        }
      }
    }
  }

  /**
   * Moves a user-defined filter to a new position.
   * @param {module:filterClasses.Filter} filter
   * @param {module:subscriptionClasses.SpecialSubscription} subscription The
   *   subscription where the filter is located.
   * @param {number} oldPosition The current position of the filter.
   * @param {number} newPosition The new position of the filter.
   */
  moveFilter(filter, subscription, oldPosition, newPosition)
  {
    if (!(subscription instanceof SpecialSubscription))
      return;

    let currentFilterText = subscription.filterTextAt(oldPosition);
    if (!currentFilterText || currentFilterText != filter.text)
      return;

    newPosition = Math.min(Math.max(newPosition, 0),
                           subscription.filterCount - 1);
    if (oldPosition == newPosition)
      return;

    subscription.deleteFilterAt(oldPosition);
    subscription.insertFilterAt(filter, newPosition);
    filterNotifier.emit("filter.moved", filter, subscription, oldPosition,
                        newPosition);
  }

  /**
   * Increases the hit count for a filter by one.
   * @param {Filter} filter
   */
  increaseHitCount(filter)
  {
    if (!Prefs.savestats || !isActiveFilter(filter))
      return;

    filterState.registerHit(filter.text);
  }

  /**
   * Resets hit count for some filters.
   * @param {?Array.<Filter>} [filters] The filters to be reset. If not
   *   specified, all filters will be reset.
   */
  resetHitCounts(filters)
  {
    if (!filters)
      filters = Filter.knownFilters.values();

    for (let filter of filters)
      filterState.resetHits(filter.text);
  }

  /**
   * @callback TextSink
   * @param {string?} line
   */

  /**
   * Allows importing previously serialized filter data.
   * @param {boolean} silent If `true`, no "load" notification will be sent
   *   out.
   * @returns {TextSink} The function to be called for each line of data.
   *   Calling it with `null` as the argument finalizes the import and replaces
   *   existing data. No changes will be applied before finalization, so import
   *   can be "aborted" by forgetting this callback.
   * @package
   */
  importData(silent)
  {
    let parser = new INIParser();
    return line =>
    {
      parser.process(line);
      if (line === null)
      {
        let knownSubscriptions = new Map();
        for (let subscription of parser.subscriptions)
        {
          // Convert to the new terminology when loading.
          if (Array.isArray(subscription.defaults))
          {
            subscription.defaults.forEach((type, i, arr) =>
            {
              if (type == "whitelist")
                arr[i] = "allowing";
            });
          }
          knownSubscriptions.set(subscription.url, subscription);
        }

        this.fileProperties = parser.fileProperties;
        this._knownSubscriptions = knownSubscriptions;

        if (!silent)
          filterNotifier.emit("load");
      }
    };
  }

  /**
   * Loads all subscriptions from disk.
   * @returns {Promise} A promise resolved or rejected when loading is complete.
   * @package
   */
  async loadFromDisk()
  {
    let tryBackup = async backupIndex =>
    {
      try
      {
        await this.restoreBackup(backupIndex, true);

        if (this._knownSubscriptions.size == 0)
          return tryBackup(backupIndex + 1);
      }
      catch (error)
      {
        // Give up
      }
    };

    try
    {
      let statData = await statFile(this.sourceFile);

      if (!statData.exists)
      {
        this.firstRun = true;
        return;
      }

      let parser = this.importData(true);
      await IO.readFromFile(this.sourceFile, parser);
      parser(null);

      if (this._knownSubscriptions.size == 0)
      {
        // No filter subscriptions in the file, this isn't right.
        throw new Error("No data in the file");
      }
    }
    catch (error)
    {
      console.warn(error);
      await tryBackup(1);
    }

    this.initialized = true;
    filterNotifier.emit("load");
  }

  /**
   * Constructs the file name for a `patterns.ini` backup.
   * @param {number} backupIndex Number of the backup file (1 being the most
   *   recent).
   * @returns {string} Backup file name.
   * @package
   */
  getBackupName(backupIndex)
  {
    let [name, extension] = this.sourceFile.split(".", 2);
    return (name + "-backup" + backupIndex + "." + extension);
  }

  /**
   * Restores an automatically created backup.
   * @param {number} backupIndex Number of the backup to restore (1 being the
   *   most recent).
   * @param {boolean} silent If `true`, no "load" notification will be sent
   *   out.
   * @returns {Promise} A promise resolved or rejected when restoration is
   *   complete.
   * @package
   */
  async restoreBackup(backupIndex, silent)
  {
    let backupFile = this.getBackupName(backupIndex);
    let parser = this.importData(silent);
    await IO.readFromFile(backupFile, parser);
    parser(null);
    return this.saveToDisk();
  }

  /**
   * Generator serializing filter data and yielding it line by line.
   * @yields {string}
   */
  *exportData()
  {
    // Do not persist external subscriptions
    let subscriptions = [];
    for (let subscription of this._knownSubscriptions.values())
    {
      if (!(subscription instanceof SpecialSubscription &&
            subscription.filterCount == 0))
        subscriptions.push(subscription);
    }

    yield "# Adblock Plus preferences";
    yield "version=" + this.formatVersion;

    let saved = new Set();

    // Save subscriptions
    for (let subscription of subscriptions)
    {
      yield* subscription.serialize();
      yield* subscription.serializeFilters();
    }

    // Save filter data
    for (let subscription of subscriptions)
    {
      for (let text of subscription.filterText())
      {
        if (!saved.has(text))
        {
          yield* filterState.serialize(text);
          saved.add(text);
        }
      }
    }
  }

  /**
   * Saves all subscriptions back to disk.
   * @returns {Promise} A promise resolved or rejected when saving is complete.
   * @package
   */
  async saveToDisk()
  {
    if (this._saving)
    {
      this._needsSave = true;
      return;
    }

    this._saving = true;

    try
    {
      let {patternsbackups} = Prefs;
      let isBackupRequired = async() =>
      {
        // First check whether we need to create a backup
        if (patternsbackups <= 0)
          return false;

        let statData = await statFile(this.sourceFile);
        if (!statData.exists)
          return false;

        let backupStatData = await statFile(this.getBackupName(1));
        if (backupStatData.exists &&
            (Date.now() - backupStatData.lastModified) / 3600000 <
              Prefs.patternsbackupinterval)
          return false;

        return true;
      };

      if (await isBackupRequired())
      {
        try
        {
          // if patternsbackups is 1 just create it, otherwise create a
          // backup-0 that will be shifted among others later on
          let i = patternsbackups > 1 ? 0 : 1;
          await renameFile(this.sourceFile, this.getBackupName(i));

          // if there is more than a backup, backup-0 up to backup-X need to be
          // renamed but without blocking this callback
          if (patternsbackups > 1)
          {
            // keep queueing backups as these come, considering backup1 and
            // backup 0 are always safe thanks to the this._saving flag
            backupQueue = backupQueue.then(() => new Promise(resolve =>
            {
              let renameAll = async index =>
              {
                if (index > 0)
                {
                  try
                  {
                    let source = this.getBackupName(index - 1);
                    let dest = this.getBackupName(index);
                    await renameFile(source, dest);
                  }
                  catch (error)
                  {
                    // Expected error, backup file doesn't exist.
                  }
                  renameAll(index - 1);
                }
                else
                {
                  resolve();
                }
              };
              renameAll(patternsbackups);
            }));
          }
        }
        catch (error)
        {
          // This is actually an unexpected error that could happen only if
          // the disk had issues in renaming the source file.
          console.warn(error);
        }
      }
    }
    catch (error)
    {
      // Errors during backup creation shouldn't prevent writing filters.
      console.warn(error);
    }

    try
    {
      await IO.writeToFile(this.sourceFile, this.exportData());
      stats.set(this.sourceFile, {exists: true, lastModified: Date.now()});
      filterNotifier.emit("save");
    }
    catch (error)
    {
      // If saving failed, report error but continue - we still have to process
      // flags.
      console.warn(error);
      stats.delete(this.sourceFile);
    }

    this._saving = false;
    if (this._needsSave)
    {
      this._needsSave = false;
      this.saveToDisk();
    }
  }

  /**
   * @typedef FileInfo
   * @type {object}
   * @property {number} index
   * @property {number} lastModified
   */

  /**
   * Returns a promise resolving in a list of existing backup files.
   * @returns {Promise.<Array.<FileInfo>>}
   * @package
   */
  async getBackupFiles()
  {
    let backups = [];

    let checkBackupFile = async index =>
    {
      try
      {
        let statData = await statFile(this.getBackupName(index));
        if (!statData.exists)
          return backups;

        backups.push({
          index,
          lastModified: statData.lastModified
        });

        return checkBackupFile(index + 1);
      }
      catch (error)
      {
        // Something went wrong, return whatever data we got so far.
        console.warn(error);
        return backups;
      }
    };

    return checkBackupFile(1);
  }
}

/**
 * Reads the user's filters from disk, manages them in memory, and writes them
 * back to disk.
 * @type {module:filterStorage~FilterStorage}
 */
exports.filterStorage = new FilterStorage();

/**
 * Given a path, return its stats, if known, or a Stats object with properties
 * exists = false and lastModified = 0.
 * @param {string} path
 * @returns {Stats}
 */
async function statFile(path)
{
  let known = stats.get(path);
  if (known)
    return known;

  try
  {
    known = await IO.statFile(path);
  }
  catch (error)
  {
    known = {exists: false, lastModified: 0};
  }
  stats.set(path, known);
  return known;
}

/**
 * Given a source path and a destination path, tries to rename the source and,
 * if it succeed, remove the source from the stats and set stats for dest.
 * @param {string} source
 * @param {string} dest
 */
async function renameFile(source, dest)
{
  await IO.renameFile(source, dest);
  stats.delete(source);
  stats.set(dest, {exists: true, lastModified: Date.now()});
}


/***/ }),

/***/ 9613:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * Map to be used instead when a filter has a blank `domains` property.
 * @type {Map.<string, boolean>}
 */
let defaultDomains = new Map([["", true]]);

let FilterMap =
/**
 * A `FilterMap` object contains a set of filters, each mapped to a boolean
 * value indicating whether the filter should be applied.
 *
 * It is used by
 * `{@link module:filtersByDomain.FiltersByDomain FiltersByDomain}`.
 *
 * @package
 */
exports.FilterMap = class FilterMap extends Map {};

/**
 * A `FiltersByDomain` object contains a set of domains, each mapped to a set
 * of filters along with a boolean value for each filter indicating whether the
 * filter should be applied to the domain.
 *
 * @package
 */
exports.FiltersByDomain = class FiltersByDomain extends Map
{
  /**
   * Adds a filter and all of its domains to the object.
   *
   * @param {module:filterClasses.ActiveFilter} filter The filter.
   * @param {Map.<string, boolean>} [domains] The filter's domains. If not
   *   given, the `{@link module:filterClasses.ActiveFilter#domains domains}`
   *   property of `filter` is used.
   */
  add(filter, domains = filter.domains)
  {
    for (let [domain, include] of domains || defaultDomains)
    {
      if (!include && domain == "")
        continue;

      let map = this.get(domain);
      if (!map)
      {
        this.set(domain, include ? filter : new FilterMap([[filter, false]]));
      }
      else if (map.size == 1 && !(map instanceof FilterMap))
      {
        if (filter != map)
          this.set(domain, new FilterMap([[map, true], [filter, include]]));
      }
      else
      {
        map.set(filter, include);
      }
    }
  }

  /**
   * Removes a filter and all of its domains from the object.
   *
   * @param {module:filterClasses.ActiveFilter} filter The filter.
   * @param {Map.<string, boolean>} [domains] The filter's domains. If not
   *   given, the `{@link module:filterClasses.ActiveFilter#domains domains}`
   *   property of `filter` is used.
   */
  remove(filter, domains = filter.domains)
  {
    for (let domain of (domains || defaultDomains).keys())
    {
      let map = this.get(domain);
      if (map)
      {
        if (map.size > 1 || map instanceof FilterMap)
        {
          map.delete(filter);

          if (map.size == 0)
          {
            this.delete(domain);
          }
          else if (map.size == 1)
          {
            for (let [lastFilter, include] of map.entries())
            {
              // Reduce Map { "example.com" => Map { filter => true } } to
              // Map { "example.com" => filter }
              if (include)
                this.set(domain, lastFilter);

              break;
            }
          }
        }
        else if (filter == map)
        {
          this.delete(domain);
        }
      }
    }
  }
};


/***/ }),

/***/ 8414:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @fileOverview INI parsing.
 */

const {isActiveFilter, Filter} = __webpack_require__(3217);
const {Subscription} = __webpack_require__(1883);
const {filterState} = __webpack_require__(9970);

/**
 * Parses filter data.
 * @package
 */
exports.INIParser = class INIParser
{
  constructor()
  {
    /**
     * Properties of the filter data.
     * @type {object}
     */
    this.fileProperties = {};

    /**
     * The list of subscriptions in the filter data.
     * @type {Array.<module:subscriptionClasses.Subscription>}
     */
    this.subscriptions = [];

    this._wantObj = true;
    this._curObj = this.fileProperties;
    this._curSection = null;
  }

  /**
   * Processes a line of filter data.
   *
   * @param {string?} line The line of filter data to process. This may be
   *   `null`, which indicates the end of the filter data.
   */
  process(line)
  {
    let match = null;
    if (this._wantObj === true && (match = /^(\w+)=(.*)$/.exec(line)))
    {
      this._curObj[match[1]] = match[2];
    }
    else if (line === null || (match = /^\s*\[(.+)\]\s*$/.exec(line)))
    {
      if (this._curObj)
      {
        // Process current object before going to next section
        switch (this._curSection)
        {
          case "filter":
            if ("text" in this._curObj)
            {
              let {text} = this._curObj;
              if (isActiveFilter(Filter.fromText(text)))
                filterState.fromObject(text, this._curObj);
            }
            break;

          case "subscription":
            let subscription = Subscription.fromObject(this._curObj);
            if (subscription)
              this.subscriptions.push(subscription);
            break;

          case "subscription filters":
            if (this.subscriptions.length)
            {
              let currentSubscription = this.subscriptions[
                this.subscriptions.length - 1
              ];
              currentSubscription.updateFilterText(this._curObj);
            }
            break;
        }
      }

      if (line === null)
        return;

      this._curSection = match[1].toLowerCase();
      switch (this._curSection)
      {
        case "filter":
        case "subscription":
          this._wantObj = true;
          this._curObj = {};
          break;
        case "subscription filters":
          this._wantObj = false;
          this._curObj = [];
          break;
        default:
          this._wantObj = null;
          this._curObj = null;
      }
    }
    else if (this._wantObj === false && line)
    {
      this._curObj.push(line.replace(/\\\[/g, "["));
    }
  }
};


/***/ }),

/***/ 6016:
/***/ ((__unused_webpack_module, exports) => {

/*
 * Copyright (c) 2003-2005  Tom Wu
 * All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 */

// Basic JavaScript BN library - subset useful for RSA encryption.

// Bits per digit
var dbits;

// JavaScript engine analysis
var canary = 0xdeadbeefcafe;
var j_lm = ((canary&0xffffff)==0xefcafe);

// (public) Constructor
let BigInteger = exports.BigInteger = function BigInteger(a,b,c) {
  if(a != null)
    if("number" == typeof a) this.fromNumber(a,b,c);
    else if(b == null && "string" != typeof a) this.fromString(a,256);
    else this.fromString(a,b);
};

// return new, unset BigInteger
function nbi() { return new BigInteger(null); }

// am: Compute w_j += (x*this_i), propagate carries,
// c is initial carry, returns final carry.
// c < 3*dvalue, x < 2*dvalue, this_i < dvalue
// We need to select the fastest one that works in this environment.

// am1: use a single mult and divide to get the high bits,
// max digit bits should be 26 because
// max internal value = 2*dvalue^2-2*dvalue (< 2^53)
function am1(i,x,w,j,c,n) {
  while(--n >= 0) {
    var v = x*this[i++]+w[j]+c;
    c = Math.floor(v/0x4000000);
    w[j++] = v&0x3ffffff;
  }
  return c;
}
// am2 avoids a big mult-and-extract completely.
// Max digit bits should be <= 30 because we do bitwise ops
// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)
function am2(i,x,w,j,c,n) {
  var xl = x&0x7fff, xh = x>>15;
  while(--n >= 0) {
    var l = this[i]&0x7fff;
    var h = this[i++]>>15;
    var m = xh*l+h*xl;
    l = xl*l+((m&0x7fff)<<15)+w[j]+(c&0x3fffffff);
    c = (l>>>30)+(m>>>15)+xh*h+(c>>>30);
    w[j++] = l&0x3fffffff;
  }
  return c;
}
// Alternately, set max digit bits to 28 since some
// browsers slow down when dealing with 32-bit numbers.
function am3(i,x,w,j,c,n) {
  var xl = x&0x3fff, xh = x>>14;
  while(--n >= 0) {
    var l = this[i]&0x3fff;
    var h = this[i++]>>14;
    var m = xh*l+h*xl;
    l = xl*l+((m&0x3fff)<<14)+w[j]+c;
    c = (l>>28)+(m>>14)+xh*h;
    w[j++] = l&0xfffffff;
  }
  return c;
}
if(j_lm && (navigator.appName == "Microsoft Internet Explorer")) {
  BigInteger.prototype.am = am2;
  dbits = 30;
}
else if(j_lm && (navigator.appName != "Netscape")) {
  BigInteger.prototype.am = am1;
  dbits = 26;
}
else { // Mozilla/Netscape seems to prefer am3
  BigInteger.prototype.am = am3;
  dbits = 28;
}

BigInteger.prototype.DB = dbits;
BigInteger.prototype.DM = ((1<<dbits)-1);
BigInteger.prototype.DV = (1<<dbits);

var BI_FP = 52;
BigInteger.prototype.FV = Math.pow(2,BI_FP);
BigInteger.prototype.F1 = BI_FP-dbits;
BigInteger.prototype.F2 = 2*dbits-BI_FP;

// Digit conversions
var BI_RM = "0123456789abcdefghijklmnopqrstuvwxyz";
var BI_RC = new Array();
var rr,vv;
rr = "0".charCodeAt(0);
for(vv = 0; vv <= 9; ++vv) BI_RC[rr++] = vv;
rr = "a".charCodeAt(0);
for(vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;
rr = "A".charCodeAt(0);
for(vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;

function int2char(n) { return BI_RM.charAt(n); }
function intAt(s,i) {
  var c = BI_RC[s.charCodeAt(i)];
  return (c==null)?-1:c;
}

// (protected) copy this to r
function bnpCopyTo(r) {
  for(var i = this.t-1; i >= 0; --i) r[i] = this[i];
  r.t = this.t;
  r.s = this.s;
}

// (protected) set from integer value x, -DV <= x < DV
function bnpFromInt(x) {
  this.t = 1;
  this.s = (x<0)?-1:0;
  if(x > 0) this[0] = x;
  else if(x < -1) this[0] = x+DV;
  else this.t = 0;
}

// return bigint initialized to value
function nbv(i) { var r = nbi(); r.fromInt(i); return r; }

// (protected) set from string and radix
function bnpFromString(s,b) {
  var k;
  if(b == 16) k = 4;
  else if(b == 8) k = 3;
  else if(b == 256) k = 8; // byte array
  else if(b == 2) k = 1;
  else if(b == 32) k = 5;
  else if(b == 4) k = 2;
  else { this.fromRadix(s,b); return; }
  this.t = 0;
  this.s = 0;
  var i = s.length, mi = false, sh = 0;
  while(--i >= 0) {
    var x = (k==8)?s.charCodeAt(i)&0xff:intAt(s,i);   /** MODIFIED **/
    if(x < 0) {
      if(s.charAt(i) == "-") mi = true;
      continue;
    }
    mi = false;
    if(sh == 0)
      this[this.t++] = x;
    else if(sh+k > this.DB) {
      this[this.t-1] |= (x&((1<<(this.DB-sh))-1))<<sh;
      this[this.t++] = (x>>(this.DB-sh));
    }
    else
      this[this.t-1] |= x<<sh;
    sh += k;
    if(sh >= this.DB) sh -= this.DB;
  }
  if(k == 8 && (s[0]&0x80) != 0) {
    this.s = -1;
    if(sh > 0) this[this.t-1] |= ((1<<(this.DB-sh))-1)<<sh;
  }
  this.clamp();
  if(mi) BigInteger.ZERO.subTo(this,this);
}

// (protected) clamp off excess high words
function bnpClamp() {
  var c = this.s&this.DM;
  while(this.t > 0 && this[this.t-1] == c) --this.t;
}

// (public) return string representation in given radix
function bnToString(b) {
  if(this.s < 0) return "-"+this.negate().toString(b);
  var k;
  if(b == 16) k = 4;
  else if(b == 8) k = 3;
  else if(b == 256) k = 8; // byte array      /** MODIFIED **/
  else if(b == 2) k = 1;
  else if(b == 32) k = 5;
  else if(b == 4) k = 2;
  else return this.toRadix(b);
  var km = (1<<k)-1, d, m = false, r = "", i = this.t;
  var p = this.DB-(i*this.DB)%k;
  if(i-- > 0) {
    if(p < this.DB && (d = this[i]>>p) > 0) { m = true; r = (k==8)?String.fromCharCode(d):int2char(d); }   /** MODIFIED **/
    while(i >= 0) {
      if(p < k) {
        d = (this[i]&((1<<p)-1))<<(k-p);
        d |= this[--i]>>(p+=this.DB-k);
      }
      else {
        d = (this[i]>>(p-=k))&km;
        if(p <= 0) { p += this.DB; --i; }
      }
      if(d > 0) m = true;
      if(m) r += (k==8)?String.fromCharCode(d):int2char(d);    /** MODIFIED **/
    }
  }
  return m?r:"0";
}

// (public) -this
function bnNegate() { var r = nbi(); BigInteger.ZERO.subTo(this,r); return r; }

// (public) |this|
function bnAbs() { return (this.s<0)?this.negate():this; }

// (public) return + if this > a, - if this < a, 0 if equal
function bnCompareTo(a) {
  var r = this.s-a.s;
  if(r != 0) return r;
  var i = this.t;
  r = i-a.t;
  if(r != 0) return r;
  while(--i >= 0) if((r=this[i]-a[i]) != 0) return r;
  return 0;
}

// returns bit length of the integer x
function nbits(x) {
  var r = 1, t;
  if((t=x>>>16) != 0) { x = t; r += 16; }
  if((t=x>>8) != 0) { x = t; r += 8; }
  if((t=x>>4) != 0) { x = t; r += 4; }
  if((t=x>>2) != 0) { x = t; r += 2; }
  if((t=x>>1) != 0) { x = t; r += 1; }
  return r;
}

// (public) return the number of bits in "this"
function bnBitLength() {
  if(this.t <= 0) return 0;
  return this.DB*(this.t-1)+nbits(this[this.t-1]^(this.s&this.DM));
}

// (protected) r = this << n*DB
function bnpDLShiftTo(n,r) {
  var i;
  for(i = this.t-1; i >= 0; --i) r[i+n] = this[i];
  for(i = n-1; i >= 0; --i) r[i] = 0;
  r.t = this.t+n;
  r.s = this.s;
}

// (protected) r = this >> n*DB
function bnpDRShiftTo(n,r) {
  for(var i = n; i < this.t; ++i) r[i-n] = this[i];
  r.t = Math.max(this.t-n,0);
  r.s = this.s;
}

// (protected) r = this << n
function bnpLShiftTo(n,r) {
  var bs = n%this.DB;
  var cbs = this.DB-bs;
  var bm = (1<<cbs)-1;
  var ds = Math.floor(n/this.DB), c = (this.s<<bs)&this.DM, i;
  for(i = this.t-1; i >= 0; --i) {
    r[i+ds+1] = (this[i]>>cbs)|c;
    c = (this[i]&bm)<<bs;
  }
  for(i = ds-1; i >= 0; --i) r[i] = 0;
  r[ds] = c;
  r.t = this.t+ds+1;
  r.s = this.s;
  r.clamp();
}

// (protected) r = this >> n
function bnpRShiftTo(n,r) {
  r.s = this.s;
  var ds = Math.floor(n/this.DB);
  if(ds >= this.t) { r.t = 0; return; }
  var bs = n%this.DB;
  var cbs = this.DB-bs;
  var bm = (1<<bs)-1;
  r[0] = this[ds]>>bs;
  for(var i = ds+1; i < this.t; ++i) {
    r[i-ds-1] |= (this[i]&bm)<<cbs;
    r[i-ds] = this[i]>>bs;
  }
  if(bs > 0) r[this.t-ds-1] |= (this.s&bm)<<cbs;
  r.t = this.t-ds;
  r.clamp();
}

// (protected) r = this - a
function bnpSubTo(a,r) {
  var i = 0, c = 0, m = Math.min(a.t,this.t);
  while(i < m) {
    c += this[i]-a[i];
    r[i++] = c&this.DM;
    c >>= this.DB;
  }
  if(a.t < this.t) {
    c -= a.s;
    while(i < this.t) {
      c += this[i];
      r[i++] = c&this.DM;
      c >>= this.DB;
    }
    c += this.s;
  }
  else {
    c += this.s;
    while(i < a.t) {
      c -= a[i];
      r[i++] = c&this.DM;
      c >>= this.DB;
    }
    c -= a.s;
  }
  r.s = (c<0)?-1:0;
  if(c < -1) r[i++] = this.DV+c;
  else if(c > 0) r[i++] = c;
  r.t = i;
  r.clamp();
}

// (protected) r = this * a, r != this,a (HAC 14.12)
// "this" should be the larger one if appropriate.
function bnpMultiplyTo(a,r) {
  var x = this.abs(), y = a.abs();
  var i = x.t;
  r.t = i+y.t;
  while(--i >= 0) r[i] = 0;
  for(i = 0; i < y.t; ++i) r[i+x.t] = x.am(0,y[i],r,i,0,x.t);
  r.s = 0;
  r.clamp();
  if(this.s != a.s) BigInteger.ZERO.subTo(r,r);
}

// (protected) r = this^2, r != this (HAC 14.16)
function bnpSquareTo(r) {
  var x = this.abs();
  var i = r.t = 2*x.t;
  while(--i >= 0) r[i] = 0;
  for(i = 0; i < x.t-1; ++i) {
    var c = x.am(i,x[i],r,2*i,0,1);
    if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1)) >= x.DV) {
      r[i+x.t] -= x.DV;
      r[i+x.t+1] = 1;
    }
  }
  if(r.t > 0) r[r.t-1] += x.am(i,x[i],r,2*i,0,1);
  r.s = 0;
  r.clamp();
}

// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)
// r != q, this != m.  q or r may be null.
function bnpDivRemTo(m,q,r) {
  var pm = m.abs();
  if(pm.t <= 0) return;
  var pt = this.abs();
  if(pt.t < pm.t) {
    if(q != null) q.fromInt(0);
    if(r != null) this.copyTo(r);
    return;
  }
  if(r == null) r = nbi();
  var y = nbi(), ts = this.s, ms = m.s;
  var nsh = this.DB-nbits(pm[pm.t-1]);	// normalize modulus
  if(nsh > 0) { pm.lShiftTo(nsh,y); pt.lShiftTo(nsh,r); }
  else { pm.copyTo(y); pt.copyTo(r); }
  var ys = y.t;
  var y0 = y[ys-1];
  if(y0 == 0) return;
  var yt = y0*(1<<this.F1)+((ys>1)?y[ys-2]>>this.F2:0);
  var d1 = this.FV/yt, d2 = (1<<this.F1)/yt, e = 1<<this.F2;
  var i = r.t, j = i-ys, t = (q==null)?nbi():q;
  y.dlShiftTo(j,t);
  if(r.compareTo(t) >= 0) {
    r[r.t++] = 1;
    r.subTo(t,r);
  }
  BigInteger.ONE.dlShiftTo(ys,t);
  t.subTo(y,y);	// "negative" y so we can replace sub with am later
  while(y.t < ys) y[y.t++] = 0;
  while(--j >= 0) {
    // Estimate quotient digit
    var qd = (r[--i]==y0)?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);
    if((r[i]+=y.am(0,qd,r,j,0,ys)) < qd) {	// Try it out
      y.dlShiftTo(j,t);
      r.subTo(t,r);
      while(r[i] < --qd) r.subTo(t,r);
    }
  }
  if(q != null) {
    r.drShiftTo(ys,q);
    if(ts != ms) BigInteger.ZERO.subTo(q,q);
  }
  r.t = ys;
  r.clamp();
  if(nsh > 0) r.rShiftTo(nsh,r);	// Denormalize remainder
  if(ts < 0) BigInteger.ZERO.subTo(r,r);
}

// (public) this mod a
function bnMod(a) {
  var r = nbi();
  this.abs().divRemTo(a,null,r);
  if(this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r,r);
  return r;
}

// Modular reduction using "classic" algorithm
function Classic(m) { this.m = m; }
function cConvert(x) {
  if(x.s < 0 || x.compareTo(this.m) >= 0) return x.mod(this.m);
  else return x;
}
function cRevert(x) { return x; }
function cReduce(x) { x.divRemTo(this.m,null,x); }
function cMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }
function cSqrTo(x,r) { x.squareTo(r); this.reduce(r); }

Classic.prototype.convert = cConvert;
Classic.prototype.revert = cRevert;
Classic.prototype.reduce = cReduce;
Classic.prototype.mulTo = cMulTo;
Classic.prototype.sqrTo = cSqrTo;

// (protected) return "-1/this % 2^DB"; useful for Mont. reduction
// justification:
//         xy == 1 (mod m)
//         xy =  1+km
//   xy(2-xy) = (1+km)(1-km)
// x[y(2-xy)] = 1-k^2m^2
// x[y(2-xy)] == 1 (mod m^2)
// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2
// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.
// JS multiply "overflows" differently from C/C++, so care is needed here.
function bnpInvDigit() {
  if(this.t < 1) return 0;
  var x = this[0];
  if((x&1) == 0) return 0;
  var y = x&3;		// y == 1/x mod 2^2
  y = (y*(2-(x&0xf)*y))&0xf;	// y == 1/x mod 2^4
  y = (y*(2-(x&0xff)*y))&0xff;	// y == 1/x mod 2^8
  y = (y*(2-(((x&0xffff)*y)&0xffff)))&0xffff;	// y == 1/x mod 2^16
  // last step - calculate inverse mod DV directly;
  // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints
  y = (y*(2-x*y%this.DV))%this.DV;		// y == 1/x mod 2^dbits
  // we really want the negative inverse, and -DV < y < DV
  return (y>0)?this.DV-y:-y;
}

// Montgomery reduction
function Montgomery(m) {
  this.m = m;
  this.mp = m.invDigit();
  this.mpl = this.mp&0x7fff;
  this.mph = this.mp>>15;
  this.um = (1<<(m.DB-15))-1;
  this.mt2 = 2*m.t;
}

// xR mod m
function montConvert(x) {
  var r = nbi();
  x.abs().dlShiftTo(this.m.t,r);
  r.divRemTo(this.m,null,r);
  if(x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r,r);
  return r;
}

// x/R mod m
function montRevert(x) {
  var r = nbi();
  x.copyTo(r);
  this.reduce(r);
  return r;
}

// x = x/R mod m (HAC 14.32)
function montReduce(x) {
  while(x.t <= this.mt2)	// pad x so am has enough room later
    x[x.t++] = 0;
  for(var i = 0; i < this.m.t; ++i) {
    // faster way of calculating u0 = x[i]*mp mod DV
    var j = x[i]&0x7fff;
    var u0 = (j*this.mpl+(((j*this.mph+(x[i]>>15)*this.mpl)&this.um)<<15))&x.DM;
    // use am to combine the multiply-shift-add into one call
    j = i+this.m.t;
    x[j] += this.m.am(0,u0,x,i,0,this.m.t);
    // propagate carry
    while(x[j] >= x.DV) { x[j] -= x.DV; x[++j]++; }
  }
  x.clamp();
  x.drShiftTo(this.m.t,x);
  if(x.compareTo(this.m) >= 0) x.subTo(this.m,x);
}

// r = "x^2/R mod m"; x != r
function montSqrTo(x,r) { x.squareTo(r); this.reduce(r); }

// r = "xy/R mod m"; x,y != r
function montMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }

Montgomery.prototype.convert = montConvert;
Montgomery.prototype.revert = montRevert;
Montgomery.prototype.reduce = montReduce;
Montgomery.prototype.mulTo = montMulTo;
Montgomery.prototype.sqrTo = montSqrTo;

// (protected) true iff this is even
function bnpIsEven() { return ((this.t>0)?(this[0]&1):this.s) == 0; }

// (protected) this^e, e < 2^32, doing sqr and mul with "r" (HAC 14.79)
function bnpExp(e,z) {
  if(e > 0xffffffff || e < 1) return BigInteger.ONE;
  var r = nbi(), r2 = nbi(), g = z.convert(this), i = nbits(e)-1;
  g.copyTo(r);
  while(--i >= 0) {
    z.sqrTo(r,r2);
    if((e&(1<<i)) > 0) z.mulTo(r2,g,r);
    else { var t = r; r = r2; r2 = t; }
  }
  return z.revert(r);
}

// (public) this^e % m, 0 <= e < 2^32
function bnModPowInt(e,m) {
  var z;
  if(e < 256 || m.isEven()) z = new Classic(m); else z = new Montgomery(m);
  return this.exp(e,z);
}

// protected
BigInteger.prototype.copyTo = bnpCopyTo;
BigInteger.prototype.fromInt = bnpFromInt;
BigInteger.prototype.fromString = bnpFromString;
BigInteger.prototype.clamp = bnpClamp;
BigInteger.prototype.dlShiftTo = bnpDLShiftTo;
BigInteger.prototype.drShiftTo = bnpDRShiftTo;
BigInteger.prototype.lShiftTo = bnpLShiftTo;
BigInteger.prototype.rShiftTo = bnpRShiftTo;
BigInteger.prototype.subTo = bnpSubTo;
BigInteger.prototype.multiplyTo = bnpMultiplyTo;
BigInteger.prototype.squareTo = bnpSquareTo;
BigInteger.prototype.divRemTo = bnpDivRemTo;
BigInteger.prototype.invDigit = bnpInvDigit;
BigInteger.prototype.isEven = bnpIsEven;
BigInteger.prototype.exp = bnpExp;

// public
BigInteger.prototype.toString = bnToString;
BigInteger.prototype.negate = bnNegate;
BigInteger.prototype.abs = bnAbs;
BigInteger.prototype.compareTo = bnCompareTo;
BigInteger.prototype.bitLength = bnBitLength;
BigInteger.prototype.mod = bnMod;
BigInteger.prototype.modPowInt = bnModPowInt;

// "constants"
BigInteger.ZERO = nbv(0);
BigInteger.ONE = nbv(1);


/***/ }),

/***/ 6240:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @fileOverview Matcher class implementing matching addresses against
 *               a list of filters.
 */

const {RESOURCE_TYPES, SPECIAL_TYPES, ALLOWING_TYPES,
       enumerateTypes} = __webpack_require__(298);
const {compilePatterns} = __webpack_require__(7887);
const {domainSuffixes, URLRequest} = __webpack_require__(5622);
const {FiltersByDomain, FilterMap} = __webpack_require__(9613);
const {Cache} = __webpack_require__(5889);

/**
 * Regular expression for matching a keyword in a filter.
 * @type {RegExp}
 */
let keywordRegExp = /[^a-z0-9%*][a-z0-9%]{2,}(?=[^a-z0-9%*])/;

/**
 * Regular expression for matching all keywords in a filter.
 * @type {RegExp}
 */
let allKeywordsRegExp = new RegExp(keywordRegExp, "g");

/**
 * Checks if the keyword is bad for use.
 * @param {string} keyword
 * @returns {boolean}
 */
function isBadKeyword(keyword)
{
  return keyword == "https" || keyword == "http" || keyword == "com" ||
         keyword == "js";
}

/**
 * Adds a filter by a given keyword to a map.
 * @param {module:filterClasses.URLFilter} filter
 * @param {string} keyword
 * @param {Map.<string,(module:filterClasses.URLFilter|
 *                      Set.<module:filterClasses.URLFilter>)>} map
 */
function addFilterByKeyword(filter, keyword, map)
{
  let set = map.get(keyword);
  if (typeof set == "undefined")
  {
    map.set(keyword, filter);
  }
  else if (set.size == 1)
  {
    if (filter != set)
      map.set(keyword, new Set([set, filter]));
  }
  else
  {
    set.add(filter);
  }
}

/**
 * Removes a filter by a given keyword from a map.
 * @param {module:filterClasses.URLFilter} filter
 * @param {string} keyword
 * @param {Map.<string,(module:filterClasses.URLFilter|
 *                      Set.<module:filterClasses.URLFilter>)>} map
 */
function removeFilterByKeyword(filter, keyword, map)
{
  let set = map.get(keyword);
  if (typeof set == "undefined")
    return;

  if (set.size == 1)
  {
    if (filter == set)
      map.delete(keyword);
  }
  else
  {
    set.delete(filter);

    if (set.size == 1)
      map.set(keyword, [...set][0]);
  }
}

/**
 * Checks whether a filter matches a given URL request.
 *
 * @param {module:filterClasses.URLFilter} filter The filter.
 * @param {module:url.URLRequest} request The URL request.
 * @param {number} typeMask A mask specifying the content type of the URL
 *   request.
 * @param {?string} [sitekey] An optional public key associated with the
 *   URL request.
 * @param {?Array} [collection] An optional list to which to append the filter
 *   if it matches. If omitted, the function directly returns the filter if it
 *   matches.
 *
 * @returns {?module:filterClasses.URLFilter} The filter if it matches and
 *   `collection` is omitted; otherwise `null`.
 */
function matchFilter(filter, request, typeMask, sitekey, collection)
{
  if (filter.matches(request, typeMask, sitekey))
  {
    if (!collection)
      return filter;

    collection.push(filter);
  }

  return null;
}

/**
 * Checks whether a particular filter is slow.
 * @param {module:filterClasses.URLFilter} filter
 * @returns {boolean}
 */
exports.isSlowFilter = function isSlowFilter(filter)
{
  return !filter.pattern || !keywordRegExp.test(filter.pattern);
};

let Matcher =
/**
 * Blocking/allowing filter matching
 */
exports.Matcher = class Matcher
{
  constructor()
  {
    /**
     * Lookup table for keywords by their associated filter
     * @type {Map.<module:filterClasses.URLFilter,string>}
     * @private
     */
    this._keywordByFilter = new Map();

    /**
     * Lookup table for simple filters by their associated keyword
     * @type {Map.<string,(module:filterClasses.URLFilter|
     *                     Set.<module:filterClasses.URLFilter>)>}
     * @private
     */
    this._simpleFiltersByKeyword = new Map();

    /**
     * Lookup table for complex filters by their associated keyword
     * @type {Map.<string,(module:filterClasses.URLFilter|
     *                     Set.<module:filterClasses.URLFilter>)>}
     * @private
     */
    this._complexFiltersByKeyword = new Map();

    /**
     * Lookup table of compiled patterns for simple filters by their associated
     * keyword
     * @type {Map.<string,?module:patterns~CompiledPatterns>}
     * @private
     */
    this._compiledPatternsByKeyword = new Map();

    /**
     * Compiled patterns for generic complex filters with no associated
     * keyword.
     * @type {?module:patterns~CompiledPatterns|boolean}
     * @private
     */
    this._keywordlessCompiledPatterns = false;

    /**
     * Lookup table of domain maps for complex filters by their associated
     * keyword
     * @type {Map.<string,
     *             Map.<string,
     *                  (module:filterClasses.URLFilter|
     *                   Map.<module:filterClasses.URLFilter,boolean>)>>}
     * @private
     */
    this._filterDomainMapsByKeyword = new Map();

    /**
     * Lookup table of type-specific lookup tables for complex filters by their
     * associated keyword
     * @type {Map.<string,
     *             Map.<string,
     *                  (module:filterClasses.URLFilter|
     *                   Set.<module:filterClasses.URLFilter>)>>}
     * @private
     */
    this._filterMapsByType = new Map();
  }

  /**
   * Removes all known filters
   */
  clear()
  {
    this._keywordByFilter.clear();
    this._simpleFiltersByKeyword.clear();
    this._complexFiltersByKeyword.clear();
    this._compiledPatternsByKeyword.clear();
    this._keywordlessCompiledPatterns = false;
    this._filterDomainMapsByKeyword.clear();
    this._filterMapsByType.clear();
  }

  /**
   * Adds a filter to the matcher
   * @param {module:filterClasses.URLFilter} filter
   */
  add(filter)
  {
    if (this._keywordByFilter.has(filter))
      return;

    // Look for a suitable keyword
    let keyword = this.findKeyword(filter);
    let simple = filter.contentType == RESOURCE_TYPES && filter.isGeneric();

    addFilterByKeyword(filter, keyword,
                       simple ? this._simpleFiltersByKeyword :
                         this._complexFiltersByKeyword);

    this._keywordByFilter.set(filter, keyword);

    if (simple)
    {
      if (this._compiledPatternsByKeyword.size > 0)
        this._compiledPatternsByKeyword.delete(keyword);

      return;
    }

    if (keyword == "")
      this._keywordlessCompiledPatterns = false;

    for (let type of enumerateTypes(filter.contentType, SPECIAL_TYPES))
    {
      let map = this._filterMapsByType.get(type);
      if (!map)
        this._filterMapsByType.set(type, map = new Map());

      addFilterByKeyword(filter, keyword, map);
    }

    let {domains} = filter;

    let filtersByDomain = this._filterDomainMapsByKeyword.get(keyword);
    if (!filtersByDomain)
    {
      // In most cases, there is only one pure generic filter to a keyword.
      // Instead of Map { "foo" => Map { "" => Map { filter => true } } }, we
      // can just reduce it to Map { "foo" => filter } and save a lot of
      // memory.
      if (!domains)
      {
        this._filterDomainMapsByKeyword.set(keyword, filter);
        return;
      }

      filtersByDomain = new FiltersByDomain();
      this._filterDomainMapsByKeyword.set(keyword, filtersByDomain);
    }
    else if (!(filtersByDomain instanceof FiltersByDomain))
    {
      filtersByDomain = new FiltersByDomain([["", filtersByDomain]]);
      this._filterDomainMapsByKeyword.set(keyword, filtersByDomain);
    }

    filtersByDomain.add(filter, domains);
  }

  /**
   * Removes a filter from the matcher
   * @param {module:filterClasses.URLFilter} filter
   */
  remove(filter)
  {
    let keyword = this._keywordByFilter.get(filter);
    if (typeof keyword == "undefined")
      return;

    let simple = filter.contentType == RESOURCE_TYPES && filter.isGeneric();

    removeFilterByKeyword(filter, keyword,
                          simple ? this._simpleFiltersByKeyword :
                            this._complexFiltersByKeyword);

    this._keywordByFilter.delete(filter);

    if (simple)
    {
      if (this._compiledPatternsByKeyword.size > 0)
        this._compiledPatternsByKeyword.delete(keyword);

      return;
    }

    if (keyword == "")
      this._keywordlessCompiledPatterns = false;

    for (let type of enumerateTypes(filter.contentType, SPECIAL_TYPES))
    {
      let map = this._filterMapsByType.get(type);
      if (map)
        removeFilterByKeyword(filter, keyword, map);
    }

    let filtersByDomain = this._filterDomainMapsByKeyword.get(keyword);
    if (filtersByDomain)
    {
      // Because of the memory optimization in the add function, most of the
      // time this will be a filter rather than a map.
      if (!(filtersByDomain instanceof FiltersByDomain))
      {
        this._filterDomainMapsByKeyword.delete(keyword);
        return;
      }

      filtersByDomain.remove(filter);

      if (filtersByDomain.size == 0)
      {
        this._filterDomainMapsByKeyword.delete(keyword);
      }
      else if (filtersByDomain.size == 1)
      {
        for (let [lastDomain, map] of filtersByDomain.entries())
        {
          // Reduce Map { "foo" => Map { "" => filter } } to
          // Map { "foo" => filter }
          if (lastDomain == "" && !(map instanceof FilterMap))
            this._filterDomainMapsByKeyword.set(keyword, map);

          break;
        }
      }
    }
  }

  /**
   * Checks whether a filter exists in the matcher
   * @param {module:filterClasses.URLFilter} filter
   * @returns {boolean}
   */
  has(filter)
  {
    return this._keywordByFilter.has(filter);
  }

  /**
   * Chooses a keyword to be associated with the filter.
   *
   * Because it will perform some internal optimizations, there is no
   * guarantee that this function will always return the same result when
   * called with the same filter.
   *
   * @param {module:filterClasses.Filter} filter
   * @returns {string} keyword or an empty string if no keyword could be found
   * @protected
   */
  findKeyword(filter)
  {
    let result = "";

    let {pattern} = filter;
    if (pattern == null)
      return result;

    let candidates = pattern.toLowerCase().match(allKeywordsRegExp);
    if (!candidates)
      return result;

    let resultCount = 0xFFFFFF;
    let resultLength = 0;

    for (let i = 0, l = candidates.length; i < l; i++)
    {
      let candidate = candidates[i].substring(1);

      if (isBadKeyword(candidate))
        continue;

      let simpleFilters = this._simpleFiltersByKeyword.get(candidate);
      let complexFilters = this._complexFiltersByKeyword.get(candidate);

      let count = (typeof simpleFilters != "undefined" ?
                     simpleFilters.size : 0) +
                  (typeof complexFilters != "undefined" ?
                     complexFilters.size : 0);

      if (count < resultCount ||
          (count == resultCount && candidate.length > resultLength))
      {
        result = candidate;
        resultCount = count;
        resultLength = candidate.length;
      }
    }

    return result;
  }

  _matchFiltersByDomain(filtersByDomain, request, typeMask, sitekey,
                        specificOnly, collection)
  {
    let excluded = null;

    let domain = request.documentHostname || "";
    for (let suffix of domainSuffixes(domain, !specificOnly))
    {
      let map = filtersByDomain.get(suffix);
      if (map)
      {
        if (map instanceof FilterMap)
        {
          for (let [filter, include] of map.entries())
          {
            if (!include)
            {
              if (excluded)
                excluded.add(filter);
              else
                excluded = new Set([filter]);
            }
            else if ((!excluded || !excluded.has(filter)) &&
                     matchFilter(filter, request, typeMask, sitekey,
                                 collection))
            {
              return filter;
            }
          }
        }
        else if ((!excluded || !excluded.has(map)) &&
                 matchFilter(map, request, typeMask, sitekey, collection))
        {
          return map;
        }
      }
    }

    return null;
  }

  _checkEntryMatchSimpleQuickCheck(keyword, request, filters)
  {
    let compiled = this._compiledPatternsByKeyword.get(keyword);
    if (typeof compiled == "undefined")
    {
      compiled = compilePatterns(filters);
      this._compiledPatternsByKeyword.set(keyword, compiled);
    }

    // If compilation failed (e.g. too many filters), return true because this
    // is only a pre-check.
    return !compiled || compiled.test(request);
  }

  _checkEntryMatchSimple(keyword, request, collection)
  {
    let filters = this._simpleFiltersByKeyword.get(keyword);

    // For simple filters where there's more than one filter to the keyword, we
    // do a quick check using a single compiled pattern that combines all the
    // patterns. This is a lot faster for requests that are not going to be
    // blocked (i.e. most requests).
    if (filters && (filters.size == 1 ||
                    this._checkEntryMatchSimpleQuickCheck(keyword, request,
                                                          filters)))
    {
      for (let filter of filters)
      {
        // Simple filters match any resource type.
        if (matchFilter(filter, request, RESOURCE_TYPES, null, collection))
          return filter;
      }
    }

    return null;
  }

  _checkEntryMatchForType(keyword, request, typeMask, sitekey, specificOnly,
                          collection)
  {
    let filtersForType = this._filterMapsByType.get(typeMask);
    if (filtersForType)
    {
      let filters = filtersForType.get(keyword);
      if (filters)
      {
        for (let filter of filters)
        {
          if (specificOnly && filter.isGeneric())
            continue;

          if (matchFilter(filter, request, typeMask, sitekey, collection))
            return filter;
        }
      }
    }

    return null;
  }

  _checkEntryMatchByDomain(keyword, request, typeMask, sitekey, specificOnly,
                           collection)
  {
    let filtersByDomain = this._filterDomainMapsByKeyword.get(keyword);
    if (filtersByDomain)
    {
      if (filtersByDomain instanceof FiltersByDomain)
      {
        if (keyword == "" && !specificOnly)
        {
          let compiled = this._keywordlessCompiledPatterns;

          // If the value is false, it indicates that we need to initialize it
          // to either a CompiledPatterns object or null.
          if (compiled == false)
          {
            // Compile all the patterns from the generic filters into a single
            // object. It is worth doing this for the keywordless generic
            // complex filters because they must be checked against every
            // single URL request that has not already been blocked by one of
            // the simple filters (i.e. most URL requests).
            let map = filtersByDomain.get("");
            if (map instanceof FilterMap)
              compiled = compilePatterns(new Set(map.keys()));

            this._keywordlessCompiledPatterns = compiled || null;
          }

          // We can skip the generic filters if none of them pass the test.
          if (compiled && !compiled.test(request))
            specificOnly = true;
        }

        return this._matchFiltersByDomain(filtersByDomain, request, typeMask,
                                          sitekey, specificOnly, collection);
      }

      // Because of the memory optimization in the add function, most of the
      // time this will be a filter rather than a map.

      // Also see #7312: If it's a single filter, it's always the equivalent of
      // Map { "" => Map { filter => true } } (i.e. applies to any domain). If
      // the specific-only flag is set, we skip it.
      if (!specificOnly)
      {
        return matchFilter(filtersByDomain, request, typeMask, sitekey,
                           collection);
      }
    }

    return null;
  }

  /**
   * Checks whether the entries for a particular keyword match a URL
   * @param {string} keyword
   * @param {module:url.URLRequest} request
   * @param {number} typeMask
   * @param {?string} [sitekey]
   * @param {boolean} [specificOnly]
   * @param {?Array.<module:filterClasses.Filter>} [collection] An optional
   *   list of filters to which to append any results. If specified, the
   *   function adds *all* matching filters to the list; if omitted,
   *   the function directly returns the first matching filter.
   * @returns {?module:filterClasses.Filter}
   * @protected
   */
  checkEntryMatch(keyword, request, typeMask, sitekey, specificOnly,
                  collection)
  {
    // We need to skip the simple (location-only) filters if the type mask does
    // not contain any resource types.
    if (!specificOnly && (typeMask & RESOURCE_TYPES) != 0)
    {
      let filter = this._checkEntryMatchSimple(keyword, request, collection);
      if (filter)
        return filter;
    }

    // If the type mask contains a special type (first condition) and it is
    // the only type in the mask (second condition), we can use the
    // type-specific map, which typically contains a lot fewer filters. This
    // enables faster lookups for allowing types like $document, $elemhide,
    // and so on, as well as other special types like $csp.
    if ((typeMask & SPECIAL_TYPES) != 0 && (typeMask & typeMask - 1) == 0)
    {
      return this._checkEntryMatchForType(keyword, request, typeMask,
                                          sitekey, specificOnly, collection);
    }

    return this._checkEntryMatchByDomain(keyword, request, typeMask,
                                         sitekey, specificOnly, collection);
  }

  /**
   * @see #match
   * @deprecated
   * @inheritdoc
   */
  matchesAny(url, typeMask, docDomain, sitekey, specificOnly)
  {
    return this.match(url, typeMask, docDomain, sitekey, specificOnly);
  }

  /**
   * Tests whether the URL matches any of the known filters
   * @param {URL|module:url~URLInfo|string} url
   *   URL to be tested
   * @param {number} typeMask
   *   bitmask of content / request types to match
   * @param {?string} [docDomain]
   *   domain name of the document that loads the URL
   * @param {?string} [sitekey]
   *   public key provided by the document
   * @param {boolean} [specificOnly]
   *   should be `true` if generic matches should be ignored
   * @returns {?module:filterClasses.URLFilter}
   *   matching filter or `null`
   */
  match(url, typeMask, docDomain, sitekey, specificOnly)
  {
    let request = URLRequest.from(url, docDomain);
    let candidates = request.lowerCaseHref.match(/[a-z0-9%]{2,}|$/g);

    for (let i = 0, l = candidates.length; i < l; i++)
    {
      if (isBadKeyword(candidates[i]))
        continue;

      let result = this.checkEntryMatch(candidates[i], request, typeMask,
                                        sitekey, specificOnly);
      if (result)
        return result;
    }

    return null;
  }
};

let CombinedMatcher =
/**
 * Combines a matcher for blocking and exception rules, automatically sorts
 * rules into two `{@link module:matcher.Matcher Matcher}` instances.
 */
exports.CombinedMatcher = class CombinedMatcher
{
  constructor()
  {
    /**
     * Matcher for blocking rules.
     * @type {module:matcher.Matcher}
     * @private
     */
    this._blocking = new Matcher();

    /**
     * Matcher for exception rules.
     * @type {module:matcher.Matcher}
     * @private
     */
    this._allowing = new Matcher();

    /**
     * Lookup table of previous match results
     * @type {module:caching.Cache.<string, ?(module:filterClasses.URLFilter|
     *                                        MatcherSearchResults)>}
     * @private
     */
    this._resultCache = new Cache(10000);
  }

  /**
   * @see module:matcher.Matcher#clear
   */
  clear()
  {
    this._blocking.clear();
    this._allowing.clear();
    this._resultCache.clear();
  }

  /**
   * @see module:matcher.Matcher#add
   * @param {module:filterClasses.Filter} filter
   */
  add(filter)
  {
    if (filter.type == "allowing")
      this._allowing.add(filter);
    else
      this._blocking.add(filter);

    this._resultCache.clear();
  }

  /**
   * @see module:matcher.Matcher#remove
   * @param {module:filterClasses.Filter} filter
   */
  remove(filter)
  {
    if (filter.type == "allowing")
      this._allowing.remove(filter);
    else
      this._blocking.remove(filter);

    this._resultCache.clear();
  }

  /**
   * @see module:matcher.Matcher#has
   * @param {module:filterClasses.Filter} filter
   * @returns {boolean}
   */
  has(filter)
  {
    if (filter.type == "allowing")
      return this._allowing.has(filter);
    return this._blocking.has(filter);
  }

  /**
   * @see module:matcher.Matcher#findKeyword
   * @param {module:filterClasses.Filter} filter
   * @returns {string} keyword
   * @protected
   */
  findKeyword(filter)
  {
    if (filter.type == "allowing")
      return this._allowing.findKeyword(filter);
    return this._blocking.findKeyword(filter);
  }

  _matchInternal(url, typeMask, docDomain, sitekey, specificOnly)
  {
    let request = URLRequest.from(url, docDomain);
    let candidates = request.lowerCaseHref.match(/[a-z0-9%]{2,}|$/g);

    let allowingHit = null;
    let blockingHit = null;

    // If the type mask includes no types other than allowing types, we
    // can skip the blocking filters.
    if ((typeMask & ~ALLOWING_TYPES) != 0)
    {
      for (let i = 0, l = candidates.length; !blockingHit && i < l; i++)
      {
        if (isBadKeyword(candidates[i]))
          continue;

        blockingHit = this._blocking.checkEntryMatch(candidates[i], request,
                                                     typeMask, sitekey,
                                                     specificOnly);
      }
    }

    // If the type mask includes any allowing types, we need to check the
    // allowing filters.
    if (blockingHit || (typeMask & ALLOWING_TYPES) != 0)
    {
      for (let i = 0, l = candidates.length; !allowingHit && i < l; i++)
      {
        if (isBadKeyword(candidates[i]))
          continue;

        allowingHit = this._allowing.checkEntryMatch(candidates[i], request,
                                                     typeMask, sitekey);
      }
    }

    return allowingHit || blockingHit;
  }

  _searchInternal(url, typeMask, docDomain, sitekey, specificOnly, filterType)
  {
    let hits = {};

    let searchBlocking = filterType == "blocking" || filterType == "all";
    let searchAllowing = filterType == "allowing" || filterType == "all";

    if (searchBlocking)
      hits.blocking = [];

    if (searchAllowing)
      hits.allowing = [];

    // If the type mask includes no types other than allowing types, we
    // can skip the blocking filters.
    if ((typeMask & ~ALLOWING_TYPES) == 0)
      searchBlocking = false;

    let request = URLRequest.from(url, docDomain);
    let candidates = request.lowerCaseHref.match(/[a-z0-9%]{2,}|$/g);

    for (let i = 0, l = candidates.length; i < l; i++)
    {
      if (isBadKeyword(candidates[i]))
        continue;

      if (searchBlocking)
      {
        this._blocking.checkEntryMatch(candidates[i], request, typeMask,
                                       sitekey, specificOnly, hits.blocking);
      }

      if (searchAllowing)
      {
        this._allowing.checkEntryMatch(candidates[i], request, typeMask,
                                       sitekey, false, hits.allowing);
      }
    }

    return hits;
  }

  /**
   * @see #match
   * @deprecated
   * @inheritdoc
   */
  matchesAny(url, typeMask, docDomain, sitekey, specificOnly)
  {
    return this.match(url, typeMask, docDomain, sitekey, specificOnly);
  }

  /**
   * @see module:matcher.Matcher#match
   * @inheritdoc
   */
  match(url, typeMask, docDomain, sitekey, specificOnly)
  {
    let key = `${url} ${typeMask} ${docDomain} ${sitekey} ${specificOnly}`;
    let result = this._resultCache.get(key);
    if (typeof result != "undefined")
      return result;

    result = this._matchInternal(url, typeMask, docDomain, sitekey,
                                 specificOnly);

    this._resultCache.set(key, result);

    return result;
  }

  /**
   * @typedef {object} MatcherSearchResults
   * @property {Array.<module:filterClasses.BlockingFilter>} [blocking] List of
   *   blocking filters found.
   * @property {Array.<module:filterClasses.AllowingFilter>} [allowing] List
   *   of allowing filters found.
   */

  /**
   * Searches all blocking and allowing filters and returns results matching
   * the given parameters.
   *
   * @param {URL|module:url~URLInfo|string} url
   * @param {number} typeMask
   * @param {?string} [docDomain]
   * @param {?string} [sitekey]
   * @param {boolean} [specificOnly]
   * @param {string} [filterType] The types of filters to look for. This can be
   *   `"blocking"`, `"allowing"`, or `"all"` (default).
   *
   * @returns {MatcherSearchResults}
   */
  search(url, typeMask, docDomain, sitekey, specificOnly, filterType = "all")
  {
    let key = `* ${url} ${typeMask} ${docDomain} ${sitekey} ` +
              `${specificOnly} ${filterType}`;

    let result = this._resultCache.get(key);
    if (typeof result != "undefined")
      return result;

    result = this._searchInternal(url, typeMask, docDomain, sitekey,
                                  specificOnly, filterType);

    this._resultCache.set(key, result);

    return result;
  }

  /**
   * Tests whether the URL is allowlisted
   * @see module:matcher.Matcher#match
   * @inheritdoc
   * @returns {boolean}
   */
  isAllowlisted(url, typeMask, docDomain, sitekey)
  {
    return !!this._allowing.match(url, typeMask, docDomain, sitekey);
  }
};

/**
 * Shared `{@link module:matcher.CombinedMatcher CombinedMatcher}` instance
 * that should usually be used.
 * @type {module:matcher.CombinedMatcher}
 */
exports.defaultMatcher = new CombinedMatcher();


/***/ }),

/***/ 5430:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @fileOverview Handles notifications.
 */

const {Prefs} = __webpack_require__(4776);

const {MILLIS_IN_MINUTE, MILLIS_IN_HOUR, MILLIS_IN_DAY} = __webpack_require__(6936);
const {Downloader, Downloadable} = __webpack_require__(9709);
const {compareVersions} = __webpack_require__(3844);
const {analytics} = __webpack_require__(8671);

const INITIAL_DELAY = 1 * MILLIS_IN_MINUTE;
const CHECK_INTERVAL = 1 * MILLIS_IN_HOUR;
const EXPIRATION_INTERVAL = 1 * MILLIS_IN_DAY;

/**
 * The default locale for the localization of notification texts.
 * @type {string}
 * @default
 */
const DEFAULT_LOCALE = "en-US";

/**
 * Returns the numerical severity of a notification.
 * @param {object} notification The notification.
 * @returns {number} The numerical severity of the notification.
 */
function getNumericalSeverity(notification)
{
  switch (notification.type)
  {
    case "information":
      return 0;
    case "newtab":
    case "relentless":
      return 1;
    case "critical":
      return 2;
  }

  return 0;
}

/**
 * Saves notification data to preferences.
 * @param {string} [key] The key to save.
 */
function saveNotificationData(key = "notificationdata")
{
  // JSON values aren't saved unless they are assigned a different object.
  Prefs[key] = JSON.parse(JSON.stringify(Prefs[key]));
}

/**
 * Localizes a notification text.
 *
 * @param {object} translations The set of translations from which to select
 *   the localization.
 * @param {string} locale The locale string to use for the selection. If no
 *   localized version is found in the `translations` object for the given
 *   locale, the
 *   {@link module:notifications~DEFAULT_LOCALE default locale} is used.
 *
 * @returns {*} The localized text; `undefined` if no localized version is
 *   found in the `translations` object.
 */
function localize(translations, locale)
{
  if (locale in translations)
    return translations[locale];

  let languagePart = locale.substring(0, locale.indexOf("-"));
  if (languagePart && languagePart in translations)
    return translations[languagePart];

  return translations[DEFAULT_LOCALE];
}

function isValidNotification(notification)
{
  // Only notifications that are meant to be opened in a new tab must
  // contain at least one URL to open.
  if (notification.type == "newtab" &&
      !(notification.links && notification.links.length > 0))
    return false;

  return true;
}

/**
 * `{@link module:notifications.notifications}` implementation.
 */
class Notifications
{
  /**
   * @hideconstructor
   */
  constructor()
  {
    /**
     * Whether the fetching of notifications has been started.
     * @private
     */
    this._started = false;

    /**
     * Whether all ignorable notifications should be ignored.
     * @type {boolean}
     */
    this.ignored = false;

    /**
     * The locale for the localization of notification texts.
     * @type {string}
     * @default {@link module:notifications~DEFAULT_LOCALE}
     */
    this.locale = DEFAULT_LOCALE;

    /**
     * Listeners for notifications to be shown.
     * @type {Set.<function>}
     * @private
     */
    this._showListeners = new Set();

    /**
     * Local notifications added via
     * `{@link module:notifications~Notifications#addNotification
     *         addNotification()}`.
     * @type {Set.<object>}
     * @private
     */
    this._localNotifications = new Set();

    /**
     * The object providing actual downloading functionality.
     * @type {module:downloader.Downloader}
     * @private
     */
    this._downloader = new Downloader(this._getDownloadables.bind(this));

    this._downloader.onExpirationChange = this._onExpirationChange.bind(this);
    this._downloader.onDownloadSuccess = this._onDownloadSuccess.bind(this);
    this._downloader.onDownloadError = this._onDownloadError.bind(this);
    this._onBlockedTotal = this._onBlockedTotal.bind(this);
  }

  /**
   * Starts fetching notifications.
   *
   * No notifications are fetched until this function has been called at least
   * once.
   */
  start()
  {
    if (this._started)
      return;

    Prefs.on("blocked_total", this._onBlockedTotal);

    this._downloader.scheduleChecks(CHECK_INTERVAL, INITIAL_DELAY);
    this._started = true;
  }

  /**
   * Stops fetching notifications.
   */
  stop()
  {
    this._started = false;
    this._downloader.unscheduleChecks();

    Prefs.off("blocked_total", this._onBlockedTotal);
  }

  /**
   * Yields a `{@link module:downloader.Downloadable Downloadable}` instance
   * for the notifications download.
   * @yields {module:downloader.Downloadable}
   * @private
   */
  *_getDownloadables()
  {
    let {notificationurl: url, notificationdata} = Prefs;

    let downloadable = new Downloadable(url);

    if (analytics.isTrusted(url))
      downloadable.firstVersion = analytics.getFirstVersion();

    if (typeof notificationdata.lastError == "number")
      downloadable.lastError = notificationdata.lastError;
    if (typeof notificationdata.lastCheck == "number")
      downloadable.lastCheck = notificationdata.lastCheck;

    if (typeof notificationdata.data == "object" &&
        "version" in notificationdata.data)
      downloadable.lastVersion = notificationdata.data.version;

    if (typeof notificationdata.softExpiration == "number")
      downloadable.softExpiration = notificationdata.softExpiration;
    if (typeof notificationdata.hardExpiration == "number")
      downloadable.hardExpiration = notificationdata.hardExpiration;
    if (typeof notificationdata.downloadCount == "number")
      downloadable.downloadCount = notificationdata.downloadCount;

    yield downloadable;
  }

  _onExpirationChange(downloadable)
  {
    Prefs.notificationdata.lastCheck = downloadable.lastCheck;
    Prefs.notificationdata.softExpiration = downloadable.softExpiration;
    Prefs.notificationdata.hardExpiration = downloadable.hardExpiration;

    saveNotificationData();
  }

  _onDownloadSuccess(downloadable, responseText, errorCallback,
                     redirectCallback)
  {
    try
    {
      let data = JSON.parse(responseText);

      if (typeof data.version == "string" &&
          analytics.isTrusted(downloadable.redirectURL || downloadable.url))
        analytics.recordVersion(data.version);

      let notifications = [];
      for (let notification of data.notifications)
      {
        if (!isValidNotification(notification))
        {
          console.warn(`Invalid notification with ID "${notification.id}"`);
          continue;
        }

        if ("severity" in notification)
        {
          if (!("type" in notification))
            notification.type = notification.severity;
          delete notification.severity;
        }

        notifications.push(notification);
      }
      data.notifications = notifications;

      Prefs.notificationdata.data = data;
    }
    catch (error)
    {
      console.warn(error);
      errorCallback("synchronize_invalid_data");
      return;
    }

    Prefs.notificationdata.lastError = 0;
    Prefs.notificationdata.downloadStatus = "synchronize_ok";
    [
      Prefs.notificationdata.softExpiration,
      Prefs.notificationdata.hardExpiration
    ] = this._downloader.processExpirationInterval(EXPIRATION_INTERVAL);
    Prefs.notificationdata.downloadCount = downloadable.downloadCount;

    saveNotificationData();

    this.showNext();
  }

  _onDownloadError(downloadable, downloadURL, error, responseStatus,
                   redirectCallback)
  {
    Prefs.notificationdata.lastError = Date.now();
    Prefs.notificationdata.downloadStatus = error;

    saveNotificationData();
  }

  _onBlockedTotal()
  {
    this.showNext();
  }

  /**
   * Adds a listener for notifications to be shown.
   * @param {function} listener Listener to be invoked when a notification is
   *   to be shown.
   */
  addShowListener(listener)
  {
    this._showListeners.add(listener);
  }

  /**
   * Removes the supplied listener.
   * @param {function} listener Listener that was added via
   *   `{@link module:notifications~Notifications#addShowListener
   *           addShowListener()}`.
   */
  removeShowListener(listener)
  {
    this._showListeners.delete(listener);
  }

  /**
   * Returns whether user preferences indicate that notifications
   * should be ignored.
   * @return {boolean}
   */
  shouldIgnoreNotifications()
  {
    return this.ignored ||
      Prefs.notifications_ignoredcategories.includes("*");
  }

  /**
   * Returns all local and remote notifications.
   * @returns {Array.<object>} All local and remote notifications.
   * @private
   */
  _getNotifications()
  {
    let remoteNotifications = [];
    if (typeof Prefs.notificationdata.data == "object" &&
        Prefs.notificationdata.data.notifications instanceof Array)
      remoteNotifications = Prefs.notificationdata.data.notifications;

    return [...this._localNotifications, ...remoteNotifications];
  }

  /**
   * Determines which notification is to be shown next.
   * @returns {?object} The notification to be shown, or `null` if there is
   *   none.
   * @private
   */
  _getNextToShow()
  {
    let notifications = this._getNotifications();
    if (notifications.length == 0)
      return null;

    const {addonName, addonVersion, application, applicationVersion,
           platform, platformVersion} = __webpack_require__(187);

    let targetChecks = {
      extension: v => v == addonName,
      extensionMinVersion:
        v => compareVersions(addonVersion, v) >= 0,
      extensionMaxVersion:
        v => compareVersions(addonVersion, v) <= 0,
      application: v => v == application,
      applicationMinVersion:
        v => compareVersions(applicationVersion, v) >= 0,
      applicationMaxVersion:
        v => compareVersions(applicationVersion, v) <= 0,
      platform: v => v == platform,
      platformMinVersion:
        v => compareVersions(platformVersion, v) >= 0,
      platformMaxVersion:
        v => compareVersions(platformVersion, v) <= 0,
      blockedTotalMin: v => Prefs.show_statsinpopup &&
        Prefs.blocked_total >= v,
      blockedTotalMax: v => Prefs.show_statsinpopup &&
        Prefs.blocked_total <= v,
      locales: v => v.includes(this.locale)
    };

    let notificationToShow = null;
    for (let notification of notifications)
    {
      if (notification.type != "critical")
      {
        let shown;
        if (typeof Prefs.notificationdata.shown == "object")
          shown = Prefs.notificationdata.shown[notification.id];

        if (typeof shown != "undefined")
        {
          if (typeof notification.interval == "number")
          {
            if (shown + notification.interval > Date.now())
              continue;
          }
          else if (shown)
          {
            continue;
          }
        }

        if (notification.type != "relentless" &&
            this.shouldIgnoreNotifications())
          continue;
      }

      if (notification.targets instanceof Array)
      {
        let match = false;

        for (let target of notification.targets)
        {
          let keys = Object.keys(target);
          if (keys.every(
            key => Object.prototype.hasOwnProperty.call(targetChecks, key) &&
                   targetChecks[key](target[key]))
          )
          {
            match = true;
            break;
          }
        }

        if (!match)
          continue;
      }

      if (!notificationToShow || getNumericalSeverity(notification) >
                                 getNumericalSeverity(notificationToShow))
        notificationToShow = notification;
    }

    return notificationToShow;
  }

  /**
   * Shows a notification once.
   * @param {object} notification The notification to show.
   * @param {object} [options]
   * @param {boolean} [options.ignorable=false] If true, user preference will
   *   be considered to determine whether notification should be shown.
   */
  showNotification(notification, options = {})
  {
    if (options.ignorable && this.shouldIgnoreNotifications())
      return;

    for (let showListener of this._showListeners)
      showListener(notification);
  }

  /**
   * Invokes the listeners added via
   * `{@link module:notifications~Notifications#addShowListener
   *         addShowListener()}` with the next notification to be shown.
   */
  showNext()
  {
    let notification = this._getNextToShow();
    if (notification)
    {
      for (let showListener of this._showListeners)
        showListener(notification);
    }
  }

  /**
   * Marks a notification as shown.
   * @param {string} id The ID of the notification to be marked as shown.
   */
  markAsShown(id)
  {
    let notifications = this._getNotifications();

    // Ignore if there's no notification with the given ID.
    if (!notifications.some(notification => notification.id == id))
      return;

    let now = Date.now();
    let data = Prefs.notificationdata;

    if (data.shown instanceof Array)
    {
      let newShown = {};
      for (let oldId of data.shown)
        newShown[oldId] = now;
      data.shown = newShown;
    }

    if (typeof data.shown != "object")
      data.shown = {};

    data.shown[id] = now;

    saveNotificationData();
  }

  /**
   * Localizes the texts of the given notification based on the
   * {@link module:notifications~Notifications#locale locale}.
   * @param {object} notification The notification.
   * @returns {object} The localized texts.
   */
  getLocalizedTexts(notification)
  {
    let textKeys = ["title", "message"];
    let localizedTexts = {};

    for (let key of textKeys)
    {
      if (key in notification)
      {
        if (typeof notification[key] == "string")
          localizedTexts[key] = notification[key];
        else
          localizedTexts[key] = localize(notification[key], this.locale);
      }
    }

    return localizedTexts;
  }

  /**
   * Adds a local notification.
   * @param {object} notification The notification to add.
   */
  addNotification(notification)
  {
    if (!isValidNotification(notification))
      throw new Error(`Invalid notification with ID "${notification.id}"`);

    this._localNotifications.add(notification);
  }

  /**
   * Removes an existing local notification.
   * @param {object} notification The notification to remove.
   */
  removeNotification(notification)
  {
    this._localNotifications.delete(notification);
  }

  /**
   * Toggles whether notifications of a specific category should be ignored.
   * @param {string} category The notification category identifier.
   * @param {boolean} [forceValue] Whether to force the specified value.
   */
  toggleIgnoreCategory(category, forceValue)
  {
    let categories = Prefs.notifications_ignoredcategories;
    let index = categories.indexOf(category);
    if (index == -1 && forceValue != false)
      categories.push(category);
    else if (index != -1 && forceValue != true)
      categories.splice(index, 1);

    saveNotificationData("notifications_ignoredcategories");
  }
}

/**
 * Regularly fetches notifications and decides which notification to show.
 * @type {module:notifications~Notifications}
 */
exports.notifications = new Notifications();


/***/ }),

/***/ 7887:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



const {filterToRegExp} = __webpack_require__(9173);

/**
 * The maximum number of patterns that
 * `{@link module:patterns.compilePatterns compilePatterns()}` will compile
 * into regular expressions.
 * @type {number}
 */
const COMPILE_PATTERNS_MAX = 100;

/**
 * A `CompiledPatterns` object represents the compiled version of multiple URL
 * request patterns. It is returned by
 * `{@link module:patterns.compilePatterns compilePatterns()}`.
 */
class CompiledPatterns
{
  /**
   * Creates an object with the given regular expressions for case-sensitive
   * and case-insensitive matching respectively.
   * @param {?RegExp} [caseSensitive]
   * @param {?RegExp} [caseInsensitive]
   * @private
   */
  constructor(caseSensitive, caseInsensitive)
  {
    this._caseSensitive = caseSensitive;
    this._caseInsensitive = caseInsensitive;
  }

  /**
   * Tests whether the given URL request matches the patterns used to create
   * this object.
   * @param {module:url.URLRequest} request
   * @returns {boolean}
   */
  test(request)
  {
    return ((this._caseSensitive &&
             this._caseSensitive.test(request.href)) ||
            (this._caseInsensitive &&
             this._caseInsensitive.test(request.lowerCaseHref)));
  }
}

/**
 * Compiles patterns from the given filters into a single
 * `{@link module:patterns~CompiledPatterns CompiledPatterns}` object.
 *
 * @param {module:filterClasses.URLFilter|
 *         Set.<module:filterClasses.URLFilter>} filters
 *   The filters. If the number of filters exceeds
 *   `{@link module:patterns~COMPILE_PATTERNS_MAX COMPILE_PATTERNS_MAX}`, the
 *   function returns `null`.
 *
 * @returns {?module:patterns~CompiledPatterns}
 *
 * @package
 */
exports.compilePatterns = function compilePatterns(filters)
{
  // If the number of filters is too large, it may choke especially on low-end
  // platforms. As a precaution, we refuse to compile. Ideally we would check
  // the length of the regular expression source rather than the number of
  // filters, but this is far more straightforward and practical.
  if (filters.size > COMPILE_PATTERNS_MAX)
    return null;

  let caseSensitive = "";
  let caseInsensitive = "";

  for (let filter of filters)
  {
    let source = filter.pattern != null ? filterToRegExp(filter.pattern) :
                   filter.regexp.source;

    if (filter.matchCase)
      caseSensitive += source + "|";
    else
      caseInsensitive += source + "|";
  }

  let caseSensitiveRegExp = null;
  let caseInsensitiveRegExp = null;

  try
  {
    if (caseSensitive)
      caseSensitiveRegExp = new RegExp(caseSensitive.slice(0, -1));

    if (caseInsensitive)
      caseInsensitiveRegExp = new RegExp(caseInsensitive.slice(0, -1));
  }
  catch (error)
  {
    // It is possible in theory for the regular expression to be too large
    // despite COMPILE_PATTERNS_MAX
    return null;
  }

  return new CompiledPatterns(caseSensitiveRegExp, caseInsensitiveRegExp);
};


/***/ }),

/***/ 8823:
/***/ (() => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */



// Promise.prototype.finally is not supported in Firefox < 58
if (!Promise.prototype.finally)
{
  Promise.prototype.finally = function(fn)
  {
    return this.then(fn, fn);
  };
}


/***/ }),

/***/ 7345:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/* eslint no-console: "off" */
/* global self */

/** @module */



const {performance, PerformanceObserver} = __webpack_require__(6243);

/**
 * Default profiler("...") returned object when profile mode is disabled.
 * @type {Profiler}
 * @private
 */
let noopProfiler = {
  start() {},
  mark() {},
  end() {},
  toString()
  {
    return "{start(){},mark(){},end(){}}";
  }
};

let inactiveProfiling = true;
let obs = null;

/** Enable or disable profiling
 *
 * @param {bool} enable the profiling is enabled. If true it will
 * create a PerformanceObserver and start observing, profiler() will then
 * create a proper profiler object. If false, observing is cancelled and
 * the profiler object will be a noop.
 * @param {?Function} reporter The reporter function called by the observer.
 * If falsy, the default reporter will be used.
 * @param {boolean} isAsyncCallback reporter callback behaviour.
 * If true, the notification callback will be called using setImmediate()
 * and multiple instance notifications will be buffered internally.
 * If false, notifications will be immediate and synchronous.
 */
function enableProfiling(enable, reporter, isAsyncCallback = true)
{
  inactiveProfiling = !enable;
  if (enable)
  {
    performance.mark("start_profile");
    if (!reporter)
    {
      reporter = list =>
      {
        for (let entry of list.getEntriesByType("measure"))
          console.log(`${entry.name}: ${entry.duration}ms`);
      };
    }
    obs = new PerformanceObserver(reporter);

    obs.observe({entryTypes: ["measure"], buffered: isAsyncCallback});
  }
  else if (obs)
  {
    obs.disconnect();
    obs = null;
  }
}

/**
 * Create a profiler object with `start()` `mark()` and `end()` methods to
 * either start, keep marking a specific profiled name, or ending it.
 *
 * @example
 * let {mark, end} = profiler('console.log');
 * mark();
 * console.log(1, 2, 3);
 * end();
 *
 * @param {string} id the unique ID to profile.
 * @returns {Profiler} The profiler with `start()`, `mark()` and
 * `end(clear = false)` methods.
 * @private
 */
function profiler(id)
{
  if (inactiveProfiling)
    return noopProfiler;

  return {
    id,
    start()
    {
      performance.mark(`${id}:start`);
      performance.measure(`${id}:startup`, "start_profile",
                          `${id}:start`);
    },
    mark(event)
    {
      performance.mark(`${id}:${event}`);
      performance.measure(`${id}:${event}_measure`, "start_profile",
                          `${id}:${event}`);
    },
    end()
    {
      performance.mark(`${id}:end`);
      performance.measure(id, "start_profile", `${id}:end`);
    }
  };
}

function isProfilingEnabled()
{
  return !inactiveProfiling;
}

exports.profiler = profiler;
exports.enable = enableProfiling;
exports.isEnabled = isProfilingEnabled;


/***/ }),

/***/ 3376:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * A `Recommendation` object represents a recommended filter subscription.
 */
class Recommendation
{
  /**
   * Creates a `Recommendation` object from the given source object.
   * @param {object} source The source object.
   * @private
   */
  constructor(source)
  {
    this._source = source;
  }

  /**
   * The type of the recommended filter subscription.
   * @type {string}
   */
  get type()
  {
    return this._source.type;
  }

  /**
   * The languages of the recommended filter subscription.
   * @type {Array.<string>}
   */
  get languages()
  {
    return this._source.languages ? [...this._source.languages] : [];
  }

  /**
   * The title of the recommended filter subscription.
   * @type {string}
   */
  get title()
  {
    return this._source.title;
  }

  /**
   * The URL of the recommended filter subscription.
   * @type {string}
   */
  get url()
  {
    return this._source.url;
  }

  /**
   * The home page of the recommended filter subscription.
   * @type {string}
   */
  get homepage()
  {
    return this._source.homepage;
  }
}

/**
 * Yields `{@link module:recommendations~Recommendation Recommendation}` objects
 * representing recommended filter subscriptions.
 *
 * @generator
 * @yields {module:recommendations~Recommendation} An object representing a
 *   recommended filter subscription.
 */
exports.recommendations = function* recommendations()
{
  for (let source of __webpack_require__(7543))
    yield new Recommendation(source);
};


/***/ }),

/***/ 9021:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @fileOverview This is a specialized RSA library meant only to
 * verify SHA1-based signatures.
 */

const {BigInteger} = __webpack_require__(6016);
const Rusha = __webpack_require__(8161);

let rusha = new Rusha();

// Define ASN.1 templates for the data structures used
function seq(...args)
{
  return {type: 0x30, children: args};
}
function obj(id)
{
  return {type: 0x06, content: id};
}
function bitStr(contents)
{
  return {type: 0x03, encapsulates: contents};
}
function intResult(id)
{
  return {type: 0x02, out: id};
}
function octetResult(id)
{
  return {type: 0x04, out: id};
}

// See http://www.cryptopp.com/wiki/Keys_and_Formats#RSA_PublicKey
// 2A 86 48 86 F7 0D 01 01 01 means 1.2.840.113549.1.1.1
let publicKeyTemplate = seq(
  seq(obj("\x2A\x86\x48\x86\xF7\x0D\x01\x01\x01"), {}),
  bitStr(seq(intResult("n"), intResult("e")))
);

// See http://tools.ietf.org/html/rfc3447#section-9.2 step 2
// 2B 0E 03 02 1A means 1.3.14.3.2.26
let signatureTemplate = seq(
  seq(obj("\x2B\x0E\x03\x02\x1A"), {}),
  octetResult("sha1")
);

/**
 * Reads ASN.1 data matching the template passed in. This will throw an
 * exception if the data format doesn't match the template. On success an
 * object containing result properties is returned.
 * @see http://luca.ntop.org/Teaching/Appunti/asn1.html for info on the format.
 * @param {string} data
 * @param {Object} templ
 * @returns {Object}
 */
function readASN1(data, templ)
{
  let pos = 0;
  function next()
  {
    return data.charCodeAt(pos++);
  }

  function readLength()
  {
    let len = next();
    if (len & 0x80)
    {
      let cnt = len & 0x7F;
      if (cnt > 2 || cnt == 0)
        throw "Unsupported length";

      len = 0;
      for (let i = 0; i < cnt; i++)
        len += next() << (cnt - 1 - i) * 8;
      return len;
    }
    return len;
  }

  function readNode(curTempl)
  {
    let type = next();
    let len = readLength();
    if ("type" in curTempl && curTempl.type != type)
      throw "Unexpected type";
    if ("content" in curTempl &&
        curTempl.content != data.substring(pos, pos + len))
      throw "Unexpected content";
    if ("out" in curTempl)
      out[curTempl.out] = new BigInteger(data.substring(pos, pos + len), 256);
    if ("children" in curTempl)
    {
      let i;
      let end;
      for (i = 0, end = pos + len; pos < end; i++)
      {
        if (i >= curTempl.children.length)
          throw "Too many children";
        readNode(curTempl.children[i]);
      }
      if (i < curTempl.children.length)
        throw "Too few children";
      if (pos > end)
        throw "Children too large";
    }
    else if ("encapsulates" in curTempl)
    {
      if (next() != 0)
        throw "Encapsulation expected";
      readNode(curTempl.encapsulates);
    }
    else
    {
      pos += len;
    }
  }

  let out = {};
  readNode(templ);
  if (pos != data.length)
    throw "Too much data";
  return out;
}

/**
 * Reads a BER-encoded RSA public key. On success returns an object with the
 * properties n and e (the components of the key), otherwise null.
 * @param {string} key
 * @return {?Object}
 */
function readPublicKey(key)
{
  try
  {
    return readASN1(atob(key), publicKeyTemplate);
  }
  catch (e)
  {
    console.warn("Invalid RSA public key: " + e);
    return null;
  }
}

/**
 * Checks whether the signature is valid for the given public key and data.
 * @param {string} key
 * @param {string} signature
 * @param {string} data
 * @returns {boolean}
 */
exports.u = function verifySignature(key, signature, data)
{
  let keyData = readPublicKey(key);
  if (!keyData)
    return false;

  // We need the exponent as regular number
  keyData.e = parseInt(keyData.e.toString(16), 16);

  // Decrypt signature data using RSA algorithm
  let sigInt = new BigInteger(atob(signature), 256);
  let digest = sigInt.modPowInt(keyData.e, keyData.n).toString(256);

  try
  {
    let pos = 0;
    let next = () => digest.charCodeAt(pos++);

    // Skip padding, see http://tools.ietf.org/html/rfc3447#section-9.2 step 5
    if (next() != 1)
      throw "Wrong padding in signature digest";
    while (next() == 255) {}
    if (digest.charCodeAt(pos - 1) != 0)
      throw "Wrong padding in signature digest";

    // Rest is an ASN.1 structure, get the SHA1 hash from it and compare to
    // the real one
    let {sha1} = readASN1(digest.substring(pos), signatureTemplate);
    let expected = new BigInteger(rusha.digest(data), 16);
    return (sha1.compareTo(expected) == 0);
  }
  catch (e)
  {
    console.warn("Invalid encrypted signature: " + e);
    return false;
  }
};


/***/ }),

/***/ 8161:
/***/ ((module, exports) => {

(function () {
    var /*
 * Rusha, a JavaScript implementation of the Secure Hash Algorithm, SHA-1,
 * as defined in FIPS PUB 180-1, tuned for high performance with large inputs.
 * (http://github.com/srijs/rusha)
 *
 * Inspired by Paul Johnstons implementation (http://pajhome.org.uk/crypt/md5).
 *
 * Copyright (c) 2013 Sam Rijs (http://awesam.de).
 * Released under the terms of the MIT license as follows:
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 */
    util = {
        getDataType: function (data) {
            if (typeof data === 'string') {
                return 'string';
            }
            if (data instanceof Array) {
                return 'array';
            }
            if (typeof global !== 'undefined' && global.Buffer && global.Buffer.isBuffer(data)) {
                return 'buffer';
            }
            if (data instanceof ArrayBuffer) {
                return 'arraybuffer';
            }
            if (data.buffer instanceof ArrayBuffer) {
                return 'view';
            }
            if (data instanceof Blob) {
                return 'blob';
            }
            throw new Error('Unsupported data type.');
        }
    };
    function Rusha(chunkSize) {
        'use strict';
        var // Private object structure.
        self$2 = { fill: 0 };
        var // Calculate the length of buffer that the sha1 routine uses
        // including the padding.
        padlen = function (len) {
            for (len += 9; len % 64 > 0; len += 1);
            return len;
        };
        var padZeroes = function (bin, len) {
            for (var i$2 = len >> 2; i$2 < bin.length; i$2++)
                bin[i$2] = 0;
        };
        var padData = function (bin, chunkLen, msgLen) {
            bin[chunkLen >> 2] |= 128 << 24 - (chunkLen % 4 << 3);
            // To support msgLen >= 2 GiB, use a float division when computing the
            // high 32-bits of the big-endian message length in bits.
            bin[((chunkLen >> 2) + 2 & ~15) + 14] = msgLen / (1 << 29) | 0;
            bin[((chunkLen >> 2) + 2 & ~15) + 15] = msgLen << 3;
        };
        var // Convert a binary string and write it to the heap.
        // A binary string is expected to only contain char codes < 256.
        convStr = function (H8, H32, start, len, off) {
            var str = this, i$2, om = off % 4, lm = len % 4, j = len - lm;
            if (j > 0) {
                switch (om) {
                case 0:
                    H8[off + 3 | 0] = str.charCodeAt(start);
                case 1:
                    H8[off + 2 | 0] = str.charCodeAt(start + 1);
                case 2:
                    H8[off + 1 | 0] = str.charCodeAt(start + 2);
                case 3:
                    H8[off | 0] = str.charCodeAt(start + 3);
                }
            }
            for (i$2 = om; i$2 < j; i$2 = i$2 + 4 | 0) {
                H32[off + i$2 >> 2] = str.charCodeAt(start + i$2) << 24 | str.charCodeAt(start + i$2 + 1) << 16 | str.charCodeAt(start + i$2 + 2) << 8 | str.charCodeAt(start + i$2 + 3);
            }
            switch (lm) {
            case 3:
                H8[off + j + 1 | 0] = str.charCodeAt(start + j + 2);
            case 2:
                H8[off + j + 2 | 0] = str.charCodeAt(start + j + 1);
            case 1:
                H8[off + j + 3 | 0] = str.charCodeAt(start + j);
            }
        };
        var // Convert a buffer or array and write it to the heap.
        // The buffer or array is expected to only contain elements < 256.
        convBuf = function (H8, H32, start, len, off) {
            var buf = this, i$2, om = off % 4, lm = len % 4, j = len - lm;
            if (j > 0) {
                switch (om) {
                case 0:
                    H8[off + 3 | 0] = buf[start];
                case 1:
                    H8[off + 2 | 0] = buf[start + 1];
                case 2:
                    H8[off + 1 | 0] = buf[start + 2];
                case 3:
                    H8[off | 0] = buf[start + 3];
                }
            }
            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 += 4 | 0) {
                H32[off + i$2 >> 2] = buf[start + i$2] << 24 | buf[start + i$2 + 1] << 16 | buf[start + i$2 + 2] << 8 | buf[start + i$2 + 3];
            }
            switch (lm) {
            case 3:
                H8[off + j + 1 | 0] = buf[start + j + 2];
            case 2:
                H8[off + j + 2 | 0] = buf[start + j + 1];
            case 1:
                H8[off + j + 3 | 0] = buf[start + j];
            }
        };
        var convBlob = function (H8, H32, start, len, off) {
            var blob = this, i$2, om = off % 4, lm = len % 4, j = len - lm;
            var buf = new Uint8Array(reader.readAsArrayBuffer(blob.slice(start, start + len)));
            if (j > 0) {
                switch (om) {
                case 0:
                    H8[off + 3 | 0] = buf[0];
                case 1:
                    H8[off + 2 | 0] = buf[1];
                case 2:
                    H8[off + 1 | 0] = buf[2];
                case 3:
                    H8[off | 0] = buf[3];
                }
            }
            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 += 4 | 0) {
                H32[off + i$2 >> 2] = buf[i$2] << 24 | buf[i$2 + 1] << 16 | buf[i$2 + 2] << 8 | buf[i$2 + 3];
            }
            switch (lm) {
            case 3:
                H8[off + j + 1 | 0] = buf[j + 2];
            case 2:
                H8[off + j + 2 | 0] = buf[j + 1];
            case 1:
                H8[off + j + 3 | 0] = buf[j];
            }
        };
        var convFn = function (data) {
            switch (util.getDataType(data)) {
            case 'string':
                return convStr.bind(data);
            case 'array':
                return convBuf.bind(data);
            case 'buffer':
                return convBuf.bind(data);
            case 'arraybuffer':
                return convBuf.bind(new Uint8Array(data));
            case 'view':
                return convBuf.bind(new Uint8Array(data.buffer, data.byteOffset, data.byteLength));
            case 'blob':
                return convBlob.bind(data);
            }
        };
        var slice = function (data, offset) {
            switch (util.getDataType(data)) {
            case 'string':
                return data.slice(offset);
            case 'array':
                return data.slice(offset);
            case 'buffer':
                return data.slice(offset);
            case 'arraybuffer':
                return data.slice(offset);
            case 'view':
                return data.buffer.slice(offset);
            }
        };
        var // Precompute 00 - ff strings
        precomputedHex = new Array(256);
        for (var i = 0; i < 256; i++) {
            precomputedHex[i] = (i < 16 ? '0' : '') + i.toString(16);
        }
        var // Convert an ArrayBuffer into its hexadecimal string representation.
        hex = function (arrayBuffer) {
            var binarray = new Uint8Array(arrayBuffer);
            var res = new Array(arrayBuffer.byteLength);
            for (var i$2 = 0; i$2 < res.length; i$2++) {
                res[i$2] = precomputedHex[binarray[i$2]];
            }
            return res.join('');
        };
        var ceilHeapSize = function (v) {
            // The asm.js spec says:
            // The heap object's byteLength must be either
            // 2^n for n in [12, 24) or 2^24 * n for n ≥ 1.
            // Also, byteLengths smaller than 2^16 are deprecated.
            var p;
            if (// If v is smaller than 2^16, the smallest possible solution
                // is 2^16.
                v <= 65536)
                return 65536;
            if (// If v < 2^24, we round up to 2^n,
                // otherwise we round up to 2^24 * n.
                v < 16777216) {
                for (p = 1; p < v; p = p << 1);
            } else {
                for (p = 16777216; p < v; p += 16777216);
            }
            return p;
        };
        var // Initialize the internal data structures to a new capacity.
        init = function (size) {
            if (size % 64 > 0) {
                throw new Error('Chunk size must be a multiple of 128 bit');
            }
            self$2.maxChunkLen = size;
            self$2.padMaxChunkLen = padlen(size);
            // The size of the heap is the sum of:
            // 1. The padded input message size
            // 2. The extended space the algorithm needs (320 byte)
            // 3. The 160 bit state the algoritm uses
            self$2.heap = new ArrayBuffer(ceilHeapSize(self$2.padMaxChunkLen + 320 + 20));
            self$2.h32 = new Int32Array(self$2.heap);
            self$2.h8 = new Int8Array(self$2.heap);
            self$2.core = new Rusha._core({
                Int32Array: Int32Array,
                DataView: DataView
            }, {}, self$2.heap);
            self$2.buffer = null;
        };
        // Initialize the data structures according
        // to a chunk size.
        init(chunkSize || 64 * 1024);
        var initState = function (heap, padMsgLen) {
            var io = new Int32Array(heap, padMsgLen + 320, 5);
            io[0] = 1732584193;
            io[1] = -271733879;
            io[2] = -1732584194;
            io[3] = 271733878;
            io[4] = -1009589776;
        };
        var padChunk = function (chunkLen, msgLen) {
            var padChunkLen = padlen(chunkLen);
            var view = new Int32Array(self$2.heap, 0, padChunkLen >> 2);
            padZeroes(view, chunkLen);
            padData(view, chunkLen, msgLen);
            return padChunkLen;
        };
        var // Write data to the heap.
        write = function (data, chunkOffset, chunkLen) {
            convFn(data)(self$2.h8, self$2.h32, chunkOffset, chunkLen, 0);
        };
        var // Initialize and call the RushaCore,
        // assuming an input buffer of length len * 4.
        coreCall = function (data, chunkOffset, chunkLen, msgLen, finalize) {
            var padChunkLen = chunkLen;
            if (finalize) {
                padChunkLen = padChunk(chunkLen, msgLen);
            }
            write(data, chunkOffset, chunkLen);
            self$2.core.hash(padChunkLen, self$2.padMaxChunkLen);
        };
        var getRawDigest = function (heap, padMaxChunkLen) {
            var io = new Int32Array(heap, padMaxChunkLen + 320, 5);
            var out = new Int32Array(5);
            var arr = new DataView(out.buffer);
            arr.setInt32(0, io[0], false);
            arr.setInt32(4, io[1], false);
            arr.setInt32(8, io[2], false);
            arr.setInt32(12, io[3], false);
            arr.setInt32(16, io[4], false);
            return out;
        };
        var // Calculate the hash digest as an array of 5 32bit integers.
        rawDigest = this.rawDigest = function (str) {
            var msgLen = str.byteLength || str.length || str.size || 0;
            initState(self$2.heap, self$2.padMaxChunkLen);
            var chunkOffset = 0, chunkLen = self$2.maxChunkLen, last;
            for (chunkOffset = 0; msgLen > chunkOffset + chunkLen; chunkOffset += chunkLen) {
                coreCall(str, chunkOffset, chunkLen, msgLen, false);
            }
            coreCall(str, chunkOffset, msgLen - chunkOffset, msgLen, true);
            return getRawDigest(self$2.heap, self$2.padMaxChunkLen);
        };
        // The digest and digestFrom* interface returns the hash digest
        // as a hex string.
        this.digest = this.digestFromString = this.digestFromBuffer = this.digestFromArrayBuffer = function (str) {
            return hex(rawDigest(str).buffer);
        };
    }
    ;
    // The low-level RushCore module provides the heart of Rusha,
    // a high-speed sha1 implementation working on an Int32Array heap.
    // At first glance, the implementation seems complicated, however
    // with the SHA1 spec at hand, it is obvious this almost a textbook
    // implementation that has a few functions hand-inlined and a few loops
    // hand-unrolled.
    Rusha._core = function RushaCore(stdlib, foreign, heap) {
        'use asm';
        var H = new stdlib.Int32Array(heap);
        function hash(k, x) {
            // k in bytes
            k = k | 0;
            x = x | 0;
            var i = 0, j = 0, y0 = 0, z0 = 0, y1 = 0, z1 = 0, y2 = 0, z2 = 0, y3 = 0, z3 = 0, y4 = 0, z4 = 0, t0 = 0, t1 = 0;
            y0 = H[x + 320 >> 2] | 0;
            y1 = H[x + 324 >> 2] | 0;
            y2 = H[x + 328 >> 2] | 0;
            y3 = H[x + 332 >> 2] | 0;
            y4 = H[x + 336 >> 2] | 0;
            for (i = 0; (i | 0) < (k | 0); i = i + 64 | 0) {
                z0 = y0;
                z1 = y1;
                z2 = y2;
                z3 = y3;
                z4 = y4;
                for (j = 0; (j | 0) < 64; j = j + 4 | 0) {
                    t1 = H[i + j >> 2] | 0;
                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | ~y1 & y3) | 0) + ((t1 + y4 | 0) + 1518500249 | 0) | 0;
                    y4 = y3;
                    y3 = y2;
                    y2 = y1 << 30 | y1 >>> 2;
                    y1 = y0;
                    y0 = t0;
                    H[k + j >> 2] = t1;
                }
                for (j = k + 64 | 0; (j | 0) < (k + 80 | 0); j = j + 4 | 0) {
                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;
                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | ~y1 & y3) | 0) + ((t1 + y4 | 0) + 1518500249 | 0) | 0;
                    y4 = y3;
                    y3 = y2;
                    y2 = y1 << 30 | y1 >>> 2;
                    y1 = y0;
                    y0 = t0;
                    H[j >> 2] = t1;
                }
                for (j = k + 80 | 0; (j | 0) < (k + 160 | 0); j = j + 4 | 0) {
                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;
                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 ^ y2 ^ y3) | 0) + ((t1 + y4 | 0) + 1859775393 | 0) | 0;
                    y4 = y3;
                    y3 = y2;
                    y2 = y1 << 30 | y1 >>> 2;
                    y1 = y0;
                    y0 = t0;
                    H[j >> 2] = t1;
                }
                for (j = k + 160 | 0; (j | 0) < (k + 240 | 0); j = j + 4 | 0) {
                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;
                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | y1 & y3 | y2 & y3) | 0) + ((t1 + y4 | 0) - 1894007588 | 0) | 0;
                    y4 = y3;
                    y3 = y2;
                    y2 = y1 << 30 | y1 >>> 2;
                    y1 = y0;
                    y0 = t0;
                    H[j >> 2] = t1;
                }
                for (j = k + 240 | 0; (j | 0) < (k + 320 | 0); j = j + 4 | 0) {
                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;
                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 ^ y2 ^ y3) | 0) + ((t1 + y4 | 0) - 899497514 | 0) | 0;
                    y4 = y3;
                    y3 = y2;
                    y2 = y1 << 30 | y1 >>> 2;
                    y1 = y0;
                    y0 = t0;
                    H[j >> 2] = t1;
                }
                y0 = y0 + z0 | 0;
                y1 = y1 + z1 | 0;
                y2 = y2 + z2 | 0;
                y3 = y3 + z3 | 0;
                y4 = y4 + z4 | 0;
            }
            H[x + 320 >> 2] = y0;
            H[x + 324 >> 2] = y1;
            H[x + 328 >> 2] = y2;
            H[x + 332 >> 2] = y3;
            H[x + 336 >> 2] = y4;
        }
        return { hash: hash };
    };
    exports = Rusha;
    if (// If we'e running in Node.JS, export a module.
        true) {
        module.exports = Rusha;
    } else {}
    if (// If we're running in a webworker, accept
        // messages containing a jobid and a buffer
        // or blob object, and return the hash result.
        typeof FileReaderSync !== 'undefined') {
        var reader = new FileReaderSync(), hasher = new Rusha(4 * 1024 * 1024);
        self.onmessage = function onMessage(event) {
            var hash, data = event.data.data;
            try {
                hash = hasher.digest(data);
                self.postMessage({
                    id: event.data.id,
                    hash: hash
                });
            } catch (e) {
                self.postMessage({
                    id: event.data.id,
                    error: e.name
                });
            }
        };
    }
}());


/***/ }),

/***/ 7938:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @fileOverview Snippets implementation.
 */

const {EventEmitter} = __webpack_require__(8450);

let singleCharacterEscapes = new Map([
  ["n", "\n"], ["r", "\r"], ["t", "\t"]
]);

/**
 * `{@link module:snippets.snippets snippets}` implementation.
 */
class Snippets extends EventEmitter
{
  /**
   * @hideconstructor
   */
  constructor()
  {
    super();

    /**
     * All known snippet filters.
     * @type {Set.<module:filterClasses.SnippetFilter>}
     * @private
     */
    this._filters = new Set();
  }

  /**
   * Removes all known snippet filters.
   */
  clear()
  {
    let {_filters} = this;

    if (_filters.size == 0)
      return;

    _filters.clear();

    this.emit("snippets.filtersCleared");
  }

  /**
   * Adds a new snippet filter.
   * @param {module:filterClasses.SnippetFilter} filter
   */
  add(filter)
  {
    let {_filters} = this;
    let {size} = _filters;

    _filters.add(filter);

    if (size != _filters.size)
      this.emit("snippets.filterAdded", filter);
  }

  /**
   * Removes an existing snippet filter.
   * @param {module:filterClasses.SnippetFilter} filter
   */
  remove(filter)
  {
    let {_filters} = this;
    let {size} = _filters;

    _filters.delete(filter);

    if (size != _filters.size)
      this.emit("snippets.filterRemoved", filter);
  }

  /**
   * Checks whether a snippet filter exists.
   * @param {module:filterClasses.SnippetFilter} filter
   * @returns {boolean}
   */
  has(filter)
  {
    return this._filters.has(filter);
  }

  /**
   * Returns a list of all snippet filters active on the given domain.
   * @param {string} domain The domain.
   * @returns {Array.<module:filterClasses.SnippetFilter>} A list of snippet
   *   filters.
   */
  getFilters(domain)
  {
    let result = [];

    for (let filter of this._filters)
    {
      if (filter.isActiveOnDomain(domain))
        result.push(filter);
    }

    return result;
  }

  /**
   * Returns a list of all snippet filters active on the given domain.
   * @param {string} domain The domain.
   * @returns {Array.<module:filterClasses.SnippetFilter>} A list of snippet
   *   filters.
   *
   * @deprecated Use <code>{@link module:snippets~Snippets#getFilters}</code>
   *   instead.
   * @see module:snippets~Snippets#getFilters
   */
  getFiltersForDomain(domain)
  {
    return this.getFilters(domain);
  }
}

/**
 * Container for snippet filters.
 * @type {module:snippets~Snippets}
 */
exports.snippets = new Snippets();

let parseScript =
/**
 * Parses a script and returns a list of all its commands and their arguments.
 * @param {string} script The script.
 * @returns {Array.<string[]>} A list of commands and their arguments.
 * @package
 */
exports.parseScript = function parseScript(script)
{
  let tree = [];

  let escape = false;
  let withinQuotes = false;

  let unicodeEscape = null;

  let quotesClosed = false;

  let call = [];
  let argument = "";

  for (let character of script.trim() + ";")
  {
    let afterQuotesClosed = quotesClosed;
    quotesClosed = false;

    if (unicodeEscape != null)
    {
      unicodeEscape += character;

      if (unicodeEscape.length == 4)
      {
        let codePoint = parseInt(unicodeEscape, 16);
        if (!isNaN(codePoint))
          argument += String.fromCodePoint(codePoint);

        unicodeEscape = null;
      }
    }
    else if (escape)
    {
      escape = false;

      if (character == "u")
        unicodeEscape = "";
      else
        argument += singleCharacterEscapes.get(character) || character;
    }
    else if (character == "\\")
    {
      escape = true;
    }
    else if (character == "'")
    {
      withinQuotes = !withinQuotes;

      if (!withinQuotes)
        quotesClosed = true;
    }
    else if (withinQuotes || character != ";" && !/\s/.test(character))
    {
      argument += character;
    }
    else
    {
      if (argument || afterQuotesClosed)
      {
        call.push(argument);
        argument = "";
      }

      if (character == ";" && call.length > 0)
      {
        tree.push(call);
        call = [];
      }
    }
  }

  return tree;
};

/**
 * Compiles a script against a given list of libraries into executable code.
 * @param {string|Array.<string>} scripts One or more scripts to convert into
 *  executable code.
 * @param {Array.<string>} libraries A list of libraries.
 * @param {object} [environment] An object containing environment variables.
 * @returns {string} Executable code.
 */
exports.compileScript = function compileScript(scripts,
                                               libraries,
                                               environment = {})
{
  return `
    "use strict";
    {
      let libraries = ${JSON.stringify(libraries)};

      let scripts = ${JSON.stringify([].concat(scripts).map(parseScript))};

      let imports = Object.create(null);
      for (let library of libraries)
      {
        let loadLibrary = new Function("exports", "environment", library);
        loadLibrary(imports, ${JSON.stringify(environment)});
      }

      let {hasOwnProperty} = Object.prototype;

      if (hasOwnProperty.call(imports, "prepareInjection"))
        imports.prepareInjection();

      for (let script of scripts)
      {
        for (let [name, ...args] of script)
        {
          if (hasOwnProperty.call(imports, name))
          {
            let value = imports[name];
            if (typeof value == "function")
              value(...args);
          }
        }
      }

      if (hasOwnProperty.call(imports, "commitInjection"))
        imports.commitInjection();
    }
  `;
};


/***/ }),

/***/ 1883:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @fileOverview Definition of Subscription class and its subclasses.
 */

const {recommendations} = __webpack_require__(3376);
const {isActiveFilter} = __webpack_require__(3217);
const {filterNotifier} = __webpack_require__(3326);
const {Downloader} = __webpack_require__(9709);
const {profiler} = __webpack_require__(7345);

/**
 * Subscription types by URL.
 *
 * @type {Map.<string, string>}
 */
let typesByURL = new Map(
  (function*()
  {
    for (let {type, url} of recommendations())
      yield [url, type];
  })()
);

let Subscription =
/**
 * The `Subscription` class represents a filter subscription.
 * @abstract
 */
exports.Subscription = class Subscription
{
  /**
   * Creates a `Subscription` object.
   * @param {string} url The URL of the subscription.
   * @param {string} [title] The title of the subscription.
   * @private
   */
  constructor(url, title)
  {
    /**
     * The URL of the subscription.
     * @type {string}
     * @see module:subscriptionClasses.Subscription#url
     * @private
     */
    this._url = url;

    /**
     * Whether the URL of the subscription is a valid subscription URL.
     * @type {boolean}
     * @private
     * @see module:subscriptionClasses.Subscription#valid
     */
    this._urlValid = Subscription.isValidURL(url);

    /**
     * The type of the subscription.
     * @type {?string}
     * @default <code>null</code>
     * @private
     * @see module:subscriptionClasses.Subscription#type
     */
    this._type = null;

    /**
     * Filter text contained in the subscription.
     * @type {Array.<string>}
     * @private
     */
    this._filterText = [];

    /**
     * A searchable index of filter text in the subscription.
     * @type {Set.<string>}
     * @private
     */
    this._filterTextIndex = new Set();

    /**
     * The title of the subscription.
     * @type {?string}
     * @default <code>null</code>
     * @private
     * @see module:subscriptionClasses.Subscription#title
     */
    this._title = null;

    if (title)
      this._title = title;

    /**
     * Whether the title of the subscription is non-editable.
     * @type {boolean}
     * @default <code>false</code>
     * @private
     * @see module:subscriptionClasses.Subscription#fixedTitle
     */
    this._fixedTitle = false;

    /**
     * Whether the subscription is disabled.
     * @type {boolean}
     * @default <code>false</code>
     * @private
     * @see module:subscriptionClasses.Subscription#disabled
     */
    this._disabled = false;

    Subscription.knownSubscriptions.set(url, this);
  }

  /**
   * The URL of the subscription.
   * @type {string}
   */
  get url()
  {
    return this._url;
  }

  /**
   * Whether the subscription is valid.
   * @type {boolean}
   * @package
   */
  get valid()
  {
    // This should return a value based on Subscription#_urlValid after
    // https://gitlab.com/eyeo/adblockplus/abpui/adblockplusui/-/issues/753
    return true;
  }

  /**
   * The type of the subscription.
   * @type {?string}
   * @default <code>null</code>
   */
  get type()
  {
    return this._type;
  }

  /**
   * The title of the subscription.
   * @type {string}
   */
  get title()
  {
    return this._title;
  }

  set title(value)
  {
    if (value != this._title)
    {
      let oldValue = this._title;
      this._title = value;
      filterNotifier.emit("subscription.title", this, value, oldValue);
    }
  }

  /**
   * Whether the title of the subscription is non-editable.
   * @type {boolean}
   * @default <code>false</code>
   */
  get fixedTitle()
  {
    return this._fixedTitle;
  }

  set fixedTitle(value)
  {
    if (value != this._fixedTitle)
    {
      let oldValue = this._fixedTitle;
      this._fixedTitle = value;
      filterNotifier.emit("subscription.fixedTitle", this, value, oldValue);
    }
  }

  /**
   * Whether the subscription is disabled.
   * @type {boolean}
   * @default <code>false</code>
   */
  get disabled()
  {
    return this._disabled;
  }

  set disabled(value)
  {
    if (value != this._disabled)
    {
      let oldValue = this._disabled;
      this._disabled = value;
      filterNotifier.emit("subscription.disabled", this, value, oldValue);
    }
  }

  /**
   * The number of filters in the subscription.
   * @type {number}
   * @default <code>0</code>
   */
  get filterCount()
  {
    return this._filterText.length;
  }

  /**
   * Returns an iterator that yields the text for each filter in the
   * subscription.
   * @returns {Iterator.<string>}
   */
  filterText()
  {
    return this._filterText[Symbol.iterator]();
  }

  /**
   * Checks whether the subscription has the given filter text.
   * @param {string} filterText The filter text.
   * @returns {boolean} Whether the subscription has the filter text.
   * @package
   */
  hasFilterText(filterText)
  {
    return this._filterTextIndex.has(filterText);
  }

  /**
   * Returns the filter text at the given `0`-based index.
   * @param {number} index The `0`-based index. If the index is out of bounds,
   *   the return value is `null`.
   * @returns {?module:filterClasses.Filter} The filter text.
   */
  filterTextAt(index)
  {
    return this._filterText[index] || null;
  }

  /**
   * Returns the `0`-based index of the given filter.
   *
   * @param {module:filterClasses.Filter} filter The filter.
   * @param {number} [fromIndex] The `0`-based index from which to start the
   *   search.
   *
   * @returns {number} The `0`-based index at which the filter is found. If the
   *   filter is not found in the subscription, the return value is `-1`.
   */
  findFilterIndex(filter, fromIndex = 0)
  {
    return this._filterText.indexOf(filter.text, fromIndex);
  }

  /**
   * Removes all filters from the subscription.
   */
  clearFilters()
  {
    this._filterText = [];
    this._filterTextIndex.clear();
  }

  /**
   * Adds a filter to the subscription.
   * @param {Filter} filter The filter.
   */
  addFilter(filter)
  {
    this._filterText.push(filter.text);
    this._filterTextIndex.add(filter.text);
  }

  /**
   * Inserts a filter into the subscription at the given `0`-based index.
   *
   * @param {module:filterClasses.Filter} filter The filter.
   * @param {number} index The `0`-based index. If the index is out of bounds,
   *   the filter is inserted at the beginning or at the end accordingly.
   */
  insertFilterAt(filter, index)
  {
    this._filterText.splice(index, 0, filter.text);
    this._filterTextIndex.add(filter.text);
  }

  /**
   * Deletes a filter from the subscription at the given `0`-based index.
   * @param {number} index The `0`-based index. If the index is out of bounds,
   *   no filter is deleted.
   */
  deleteFilterAt(index)
  {
    // Ignore index if out of bounds on the negative side, for consistency.
    if (index < 0)
      return;

    let [filterText] = this._filterText.splice(index, 1);
    if (!this._filterText.includes(filterText))
      this._filterTextIndex.delete(filterText);
  }

  /**
   * Updates the filter text of the subscription.
   * @param {Array.<string>} filterText The new filter text.
   * @returns {{added: Array.<string>, removed: Array.<string>}} An object
   *   containing two lists of the text of added and removed filters
   *   respectively.
   * @package
   */
  updateFilterText(filterText)
  {
    let added = [];
    let removed = [];

    if (this._filterText.length == 0)
    {
      added = [...filterText];
    }
    else if (filterText.length > 0)
    {
      for (let text of filterText)
      {
        if (!this._filterTextIndex.has(text))
          added.push(text);
      }
    }

    this._filterTextIndex = new Set(filterText);

    if (filterText.length == 0)
    {
      removed = [...this._filterText];
    }
    else if (this._filterText.length > 0)
    {
      for (let text of this._filterText)
      {
        if (!this._filterTextIndex.has(text))
          removed.push(text);
      }
    }

    this._filterText = [...filterText];

    return {added, removed};
  }

  /**
   * Serializes the subscription for writing out on disk.
   * @yields {string}
   * @package
   */
  *serialize()
  {
    let {url, _title, _fixedTitle, _disabled} = this;

    yield "[Subscription]";
    yield "url=" + url;

    if (_title)
      yield "title=" + _title;
    if (_fixedTitle)
      yield "fixedTitle=true";
    if (_disabled)
      yield "disabled=true";
  }

  /**
   * Serializes the subscription's filter text for writing out on disk.
   * @yields {string}
   * @package
   */
  *serializeFilters()
  {
    let {_filterText} = this;

    yield "[Subscription filters]";

    for (let text of _filterText)
      yield text.replace(/\[/g, "\\[");
  }

  /**
   * Returns a string representing the subscription.
   * @returns {string}
   */
  toString()
  {
    return [...this.serialize()].join("\n");
  }
};

/**
 * Cache for known filter subscriptions that maps subscription URLs to
 * subscription objects.
 * @type {Map.<string, module:subscriptionClasses.Subscription>}
 * @package
 */
exports.Subscription.knownSubscriptions = new Map();

/**
 * Returns the subscription object for a subscription URL.
 *
 * Every subscription URL maps to its own unique object. If no such object
 * exists, a new one is created internally; otherwise the existing object is
 * used.
 *
 * @param {string} url The subscription URL.
 *
 * @returns {module:subscriptionClasses.Subscription} A subscription object.
 */
exports.Subscription.fromURL = function(url)
{
  let subscription = Subscription.knownSubscriptions.get(url);
  if (subscription)
    return subscription;

  if (url[0] != "~")
  {
    subscription = new DownloadableSubscription(url, null);

    let type = typesByURL.get(url);
    if (typeof type != "undefined")
      subscription._type = type;

    return subscription;
  }

  return new SpecialSubscription(url);
};

/**
 * Deserializes a subscription.
 * @param {object} obj A map of serialized properties and their values.
 * @returns {module:subscriptionClasses.Subscription} A subscription object.
 * @package
 */
exports.Subscription.fromObject = function(obj)
{
  let result;
  if (obj.url[0] != "~")
  {
    // URL is valid - this is a downloadable subscription
    result = new DownloadableSubscription(obj.url, obj.title);
    if ("downloadStatus" in obj)
      result._downloadStatus = obj.downloadStatus;
    if ("lastSuccess" in obj)
      result.lastSuccess = parseInt(obj.lastSuccess, 10) || 0;
    if ("lastCheck" in obj)
      result._lastCheck = parseInt(obj.lastCheck, 10) || 0;
    if ("expires" in obj)
      result.expires = parseInt(obj.expires, 10) || 0;
    if ("softExpiration" in obj)
      result.softExpiration = parseInt(obj.softExpiration, 10) || 0;
    if ("errors" in obj)
      result._errors = parseInt(obj.errors, 10) || 0;
    if ("version" in obj)
      result.version = parseInt(obj.version, 10) || 0;
    if ("requiredVersion" in obj)
      result.requiredVersion = obj.requiredVersion;
    if ("homepage" in obj)
      result._homepage = obj.homepage;
    if ("lastDownload" in obj)
      result._lastDownload = parseInt(obj.lastDownload, 10) || 0;
    if ("downloadCount" in obj)
      result.downloadCount = parseInt(obj.downloadCount, 10) || 0;

    let type = typesByURL.get(obj.url);
    if (typeof type != "undefined")
      result._type = type;
  }
  else
  {
    result = new SpecialSubscription(obj.url, obj.title);
    if ("defaults" in obj)
      result.defaults = obj.defaults.split(" ");
  }
  if ("fixedTitle" in obj)
    result._fixedTitle = (obj.fixedTitle == "true");
  if ("disabled" in obj)
    result._disabled = (obj.disabled == "true");

  return result;
};

/**
 * Checks whether a URL is a valid subscription URL.
 * @param {string} url The URL.
 * @returns {boolean} Whether the URL is a valid subscription URL.
 */
exports.Subscription.isValidURL = function isValidURL(url)
{
  return url.startsWith("~user~") || Downloader.isValidURL(url);
};

let SpecialSubscription =
/**
 * The `SpecialSubscription` class represents a special filter subscription.
 *
 * This type of subscription is used for keeping user-defined filters.
 */
exports.SpecialSubscription = class SpecialSubscription extends Subscription
{
  /**
   * Creates a `SpecialSubscription` object.
   * @param {string} url The URL of the subscription.
   * @param {string} [title] The title of the subscription.
   * @private
   */
  constructor(url, title)
  {
    super(url, title);

    /**
     * Filter types that should be added to this subscription by default.
     *
     * Entries should correspond to keys in
     * `{@link module:subscriptionClasses.SpecialSubscription.defaultsMap}`.
     *
     * @type {?Array.<string>}
     *
     * @package
     */
    this.defaults = null;
  }

  /**
   * Checks whether the given filter should be added to this subscription by
   * default.
   * @param {Filter} filter The filter.
   * @returns {boolean} Whether the filter should be added to this subscription
   *   by default.
   * @package
   */
  isDefaultFor(filter)
  {
    if (this.defaults && this.defaults.length)
    {
      for (let type of this.defaults)
      {
        if (SpecialSubscription.defaultsMap.get(type).includes(filter.type))
          return true;
        if (!isActiveFilter(filter) && type == "blocking")
          return true;
      }
    }

    return false;
  }

  /**
   * Serializes the subscription for writing out on disk.
   * @yields {string}
   * @package
   */
  *serialize()
  {
    let {defaults, _lastDownload} = this;

    yield* super.serialize();

    if (defaults)
    {
      yield "defaults=" +
            defaults.map(
              // remap for the stored format.
              type => type == "allowing" ? "whitelist" : type
            ).filter(
              type => SpecialSubscription.defaultsMap.has(type)
            ).join(" ");
    }
    if (_lastDownload)
      yield "lastDownload=" + _lastDownload;
  }
};

/**
 * A map of filter types.
 * @type {Map.<string, Array.<string>>}
 * @package
 */
exports.SpecialSubscription.defaultsMap = new Map([
  ["allowing", ["allowing"]],
  // deprecated terminology
  ["whitelist", ["allowing"]],
  ["blocking", ["blocking"]],
  ["elemhide", ["elemhide", "elemhideexception", "elemhideemulation"]]
]);

/**
 * Creates a new special subscription.
 * @param {string} [title] The title of the subscription.
 * @returns {module:subscriptionClasses.SpecialSubscription} A new special
 *   subscription.
 * @package
 */
exports.SpecialSubscription.create = function(title)
{
  let url;
  do
    url = "~user~" + Math.round(Math.random() * 1000000);
  while (Subscription.knownSubscriptions.has(url));
  return new SpecialSubscription(url, title);
};

/**
 * Creates a new special subscription and adds the given filter to it.
 *
 * Once created, the subscription acts as the default for all filters of the
 * {@link module:filterClasses.Filter#type type}.
 *
 * @param {module:filterClasses.Filter} filter The filter.
 *
 * @returns {module:subscriptionClasses.SpecialSubscription} A new special
 *   subscription.
 *
 * @package
 */
exports.SpecialSubscription.createForFilter = function(filter)
{
  let subscription = SpecialSubscription.create();
  subscription.addFilter(filter);
  for (let [type, mappedTypes] of SpecialSubscription.defaultsMap)
  {
    if (mappedTypes.includes(filter.type))
      subscription.defaults = [type];
  }
  if (!subscription.defaults)
    subscription.defaults = ["blocking"];
  return subscription;
};

let RegularSubscription =
/**
 * The `RegularSubscription` class represents a regular filter subscription.
 * @abstract
 */
exports.RegularSubscription = class RegularSubscription extends Subscription
{
  /**
   * Creates a `RegularSubscription` object.
   * @param {string} url The URL of the subscription.
   * @param {string} [title] The title of the subscription.
   * @private
   */
  constructor(url, title)
  {
    super(url, title || url);

    /**
     * The homepage of the subscription.
     * @type {?string}
     * @default <code>null</code>
     * @private
     * @see module:subscriptionClasses.RegularSubscription#homepage
     */
    this._homepage = null;

    /**
     * The last time the subscription was downloaded, in seconds since the
     * beginning of the Unix epoch.
     * @type {number}
     * @default <code>0</code>
     * @private
     * @see module:subscriptionClasses.RegularSubscription#lastDownload
     */
    this._lastDownload = 0;
  }

  /**
   * The homepage of the subscription.
   * @type {?string}
   * @default <code>null</code>
   */
  get homepage()
  {
    return this._homepage;
  }

  set homepage(value)
  {
    if (value != this._homepage)
    {
      let oldValue = this._homepage;
      this._homepage = value;
      filterNotifier.emit("subscription.homepage", this, value, oldValue);
    }
  }

  /**
   * The last time the subscription was downloaded, in seconds since the
   * beginning of the Unix epoch.
   * @type {number}
   * @default <code>0</code>
   */
  get lastDownload()
  {
    return this._lastDownload;
  }

  set lastDownload(value)
  {
    if (value != this._lastDownload)
    {
      let oldValue = this._lastDownload;
      this._lastDownload = value;
      filterNotifier.emit("subscription.lastDownload", this, value, oldValue);
    }
  }

  /**
   * Serializes the subscription for writing out on disk.
   * @yields {string}
   * @package
   */
  *serialize()
  {
    let {_homepage, _lastDownload} = this;

    yield* super.serialize();

    if (_homepage)
      yield "homepage=" + _homepage;
    if (_lastDownload)
      yield "lastDownload=" + _lastDownload;
  }
};

/**
 * Once initialized, the shared Synchronizer singleton will be stored in here.
 * @type {module:synchronizer~Synchronizer}
 */
let synchronizer = null;

let DownloadableSubscription =
/**
 * The `DownloadableSubscription` class represents a regular filter
 * subscription that is downloaded by Adblock Plus.
 */
exports.DownloadableSubscription =
class DownloadableSubscription extends RegularSubscription
{
  /**
   * Allows downloadable subscriptions to update themselves once re-enabled,
   * via receiving the Synchronizer singleton.
   * @param {module:synchronizer~Synchronizer} reference the Synchronizer
   */
  static useSynchronizer(reference)
  {
    synchronizer = reference;
  }

  /**
   * Creates a `DownloadableSubscription` object.
   * @param {string} url The URL of the subscription.
   * @param {string} [title] The title of the subscription.
   * @private
   */
  constructor(url, title)
  {
    super(url, title);

    /**
     * The status of the last download.
     * @type {?string}
     * @default <code>null</code>
     * @private
     * @see module:subscriptionClasses.DownloadableSubscription#downloadStatus
     */
    this._downloadStatus = null;

    /**
     * The last time the subscription was considered for an update, in seconds
     * since the beginning of the Unix epoch.
     * @type {number}
     * @default <code>0</code>
     * @private
     * @see module:subscriptionClasses.DownloadableSubscription#lastCheck
     */
    this._lastCheck = 0;

    /**
     * The number of download failures since the last successful download.
     * @type {number}
     * @default <code>0</code>
     * @private
     * @see module:subscriptionClasses.DownloadableSubscription#errors
     */
    this._errors = 0;

    /**
     * The last time the subscription was successfully downloaded, in seconds
     * since the beginning of the Unix epoch.
     * @type {number}
     * @default <code>0</code>
     */
    this.lastSuccess = 0;

    /**
     * The hard expiration time of the subscription, in seconds since the
     * beginning of the Unix epoch.
     * @type {number}
     * @default <code>0</code>
     */
    this.expires = 0;

    /**
     * The soft expiration time of the subscription, in seconds since the
     * beginning of the Unix epoch.
     * @type {number}
     * @default <code>0</code>
     */
    this.softExpiration = 0;

    /**
     * The version of the subscription data that was retrieved on last
     * successful download.
     * @type {number}
     * @default <code>0</code>
     */
    this.version = 0;

    /**
     * The minimal Adblock Plus version required for the subscription.
     * @type {?string}
     * @default <code>null</code>
     */
    this.requiredVersion = null;

    /**
     * The number of times the subscription has been downloaded.
     * @type {number}
     * @default <code>0</code>
     */
    this.downloadCount = 0;

    this._p = profiler(`DownloadableSubscription@${url}`);
    this._p.start();
  }

  /**
   * Whether the subscription is disabled. Once re-enabled, it ensures the
   * synchronizer downloads latest version of this subscription.
   * @type {boolean}
   * @default <code>false</code>
   */
  get disabled()
  {
    return super.disabled;
  }

  set disabled(value)
  {
    let {_disabled} = this;
    super.disabled = value;
    if (synchronizer && _disabled && !value)
      synchronizer.execute(this);
  }

  /**
   * The status of the last download.
   *
   * This is a message ID like `synchronize_ok` or
   * `synchronize_connection_error`.
   *
   * @type {?string}
   * @default <code>null</code>
   */
  get downloadStatus()
  {
    return this._downloadStatus;
  }

  set downloadStatus(value)
  {
    let oldValue = this._downloadStatus;
    this._downloadStatus = value;
    filterNotifier.emit("subscription.downloadStatus", this, value, oldValue);
  }

  /**
   * The last time the subscription was considered for an update, in seconds
   * since the beginning of the Unix epoch.
   *
   * This is used to increase the soft expiration time if the user doesn't use
   * Adblock Plus for some time.
   *
   * @type {number}
   * @default <code>0</code>
   */
  get lastCheck()
  {
    return this._lastCheck;
  }

  set lastCheck(value)
  {
    if (value != this._lastCheck)
    {
      let oldValue = this._lastCheck;
      this._lastCheck = value;
      filterNotifier.emit("subscription.lastCheck", this, value, oldValue);
    }
  }

  /**
   * The number of download failures since the last successful download.
   * @type {number}
   * @default <code>0</code>
   */
  get errors()
  {
    return this._errors;
  }

  set errors(value)
  {
    if (value != this._errors)
    {
      let oldValue = this._errors;
      this._errors = value;
      filterNotifier.emit("subscription.errors", this, value, oldValue);
    }
  }

  /**
   * Serializes the subscription for writing out on disk.
   * @yields {string}
   * @package
   */
  *serialize()
  {
    let {downloadStatus, lastSuccess, lastCheck, expires,
         softExpiration, errors, version, requiredVersion,
         downloadCount} = this;

    yield* super.serialize();

    if (downloadStatus)
      yield "downloadStatus=" + downloadStatus;
    if (lastSuccess)
      yield "lastSuccess=" + lastSuccess;
    if (lastCheck)
      yield "lastCheck=" + lastCheck;
    if (expires)
      yield "expires=" + expires;
    if (softExpiration)
      yield "softExpiration=" + softExpiration;
    if (errors)
      yield "errors=" + errors;
    if (version)
      yield "version=" + version;
    if (requiredVersion)
      yield "requiredVersion=" + requiredVersion;
    if (downloadCount)
      yield "downloadCount=" + downloadCount;
  }

  /**
   * Put a benchmarking event
   * @param {string} event benchmarking event
   */
  mark(event)
  {
    this._p.mark(event);
  }
};


/***/ }),

/***/ 802:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var __webpack_unused_export__;
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @fileOverview Manages synchronization of filter subscriptions.
 */

const {Prefs} = __webpack_require__(4776);

const {MILLIS_IN_SECOND, MILLIS_IN_MINUTE, MILLIS_IN_HOUR,
       MILLIS_IN_DAY} = __webpack_require__(6936);
const {Downloader, Downloadable} = __webpack_require__(9709);
const {Filter} = __webpack_require__(3217);
const {filterStorage} = __webpack_require__(9302);
const {filterNotifier} = __webpack_require__(3326);
const {Subscription,
       DownloadableSubscription} = __webpack_require__(1883);
const {analytics} = __webpack_require__(8671);

const INITIAL_DELAY = 1 * MILLIS_IN_MINUTE;
const CHECK_INTERVAL = 1 * MILLIS_IN_HOUR;
const DEFAULT_EXPIRATION_INTERVAL = 5 * MILLIS_IN_DAY;

/**
 * Downloads filter subscriptions whenever necessary.
 */
class Synchronizer
{
  /**
   * @hideconstructor
   */
  constructor()
  {
    /**
     * Whether the downloading of subscriptions has been started.
     * @private
     */
    this._started = false;

    /**
     * The object providing actual downloading functionality.
     * @type {module:downloader.Downloader}
     */
    this._downloader = new Downloader(this._getDownloadables.bind(this));

    this._downloader.onExpirationChange = this._onExpirationChange.bind(this);
    this._downloader.onDownloadStarted = this._onDownloadStarted.bind(this);
    this._downloader.onDownloadSuccess = this._onDownloadSuccess.bind(this);
    this._downloader.onDownloadError = this._onDownloadError.bind(this);
  }

  /**
   * Starts downloading subscriptions.
   *
   * No subscriptions are downloaded until this function has been called at
   * least once.
   */
  start()
  {
    if (this._started)
      return;

    this._downloader.scheduleChecks(CHECK_INTERVAL, INITIAL_DELAY);
    this._started = true;
  }

  /**
   * Clear any further downloader scheduled check and set its internal state
   * as not started.
   */
  stop()
  {
    this._started = false;
    this._downloader.unscheduleChecks();
  }

  /**
   * Checks whether a subscription is currently being downloaded.
   * @param {string} url  URL of the subscription
   * @returns {boolean}
   */
  isExecuting(url)
  {
    return this._downloader.isDownloading(url);
  }

  /**
   * Starts the download of a subscription.
   * @param {module:subscriptionClasses.DownloadableSubscription} subscription
   *   Subscription to be downloaded
   * @param {boolean} manual
   *   `true` for a manually started download (should not trigger fallback
   *   requests)
   */
  execute(subscription, manual)
  {
    this._downloader.download(this._getDownloadable(subscription, manual));
  }

  /**
   * Yields `{@link module:downloader.Downloadable Downloadable}` instances for
   * all subscriptions that can be downloaded.
   * @yields {module:downloader.Downloadable}
   */
  *_getDownloadables()
  {
    if (!Prefs.subscriptions_autoupdate)
      return;

    for (let subscription of filterStorage.subscriptions())
    {
      if (subscription instanceof DownloadableSubscription)
        yield this._getDownloadable(subscription, false);
    }
  }

  /**
   * Creates a `{@link module:downloader.Downloadable Downloadable}` instance
   * for a subscription.
   * @param {module:subscriptionClasses.Subscription} subscription
   * @param {boolean} manual
   * @returns {module:downloader.Downloadable}
   */
  _getDownloadable(subscription, manual)
  {
    let {url, lastDownload, lastSuccess, lastCheck, version, softExpiration,
         expires, downloadCount, disabled} = subscription;

    let result = new Downloadable(url);

    if (analytics.isTrusted(url))
      result.firstVersion = analytics.getFirstVersion();

    if (lastDownload != lastSuccess)
      result.lastError = lastDownload * MILLIS_IN_SECOND;

    result.lastCheck = lastCheck * MILLIS_IN_SECOND;
    result.lastVersion = version;
    result.softExpiration = softExpiration * MILLIS_IN_SECOND;
    result.hardExpiration = expires * MILLIS_IN_SECOND;
    result.manual = manual;
    result.downloadCount = downloadCount;
    if (disabled)
      result.method = "HEAD";

    return result;
  }

  _onExpirationChange(downloadable)
  {
    let subscription = Subscription.fromURL(downloadable.url);
    subscription.lastCheck = Math.round(
      downloadable.lastCheck / MILLIS_IN_SECOND
    );
    subscription.softExpiration = Math.round(
      downloadable.softExpiration / MILLIS_IN_SECOND
    );
    subscription.expires = Math.round(
      downloadable.hardExpiration / MILLIS_IN_SECOND
    );
  }

  _onDownloadStarted(downloadable)
  {
    let subscription = Subscription.fromURL(downloadable.url);
    filterNotifier.emit("subscription.downloading", subscription);
    subscription.mark("downloading.started");
  }

  _onDownloadSuccess(downloadable, responseText, errorCallback,
                     redirectCallback)
  {
    let subscription = Subscription.fromURL(downloadable.redirectURL ||
                                            downloadable.url);
    subscription.mark("downloading.finished");
    subscription.mark("parsing.started");

    let isHEAD = downloadable.method === "HEAD";

    let {error, lines, params,
         minVersion} = isHEAD ? {params: {}} : parseFilters(responseText);

    if (error)
      return errorCallback(error);

    if (params.redirect)
      return redirectCallback(params.redirect);

    subscription.mark("parsing.finished");

    // Handle redirects
    if (downloadable.redirectURL &&
        downloadable.redirectURL != downloadable.url)
    {
      let oldSubscription = Subscription.fromURL(downloadable.url);
      subscription.title = oldSubscription.title;
      subscription.disabled = oldSubscription.disabled;
      subscription.lastCheck = oldSubscription.lastCheck;

      let listed = filterStorage.hasSubscription(oldSubscription);
      if (listed)
        filterStorage.removeSubscription(oldSubscription);

      Subscription.knownSubscriptions.delete(oldSubscription.url);

      if (listed)
        filterStorage.addSubscription(subscription);
    }

    // The download actually succeeded
    subscription.lastSuccess = subscription.lastDownload = Math.round(
      Date.now() / MILLIS_IN_SECOND
    );
    subscription.downloadStatus = "synchronize_ok";
    subscription.downloadCount = downloadable.downloadCount;
    subscription.errors = 0;

    // Process parameters
    if (params.homepage)
    {
      let url;
      try
      {
        url = new URL(params.homepage);
      }
      catch (e)
      {
        url = null;
      }

      if (url && (url.protocol == "http:" || url.protocol == "https:"))
        subscription.homepage = url.href;
    }

    if (params.title)
    {
      subscription.title = params.title;
      subscription.fixedTitle = true;
    }
    else
    {
      subscription.fixedTitle = false;
    }

    if (params.version)
    {
      subscription.version = parseInt(params.version, 10);

      if (analytics.isTrusted(downloadable.redirectURL || downloadable.url))
        analytics.recordVersion(params.version);
    }
    else
    {
      subscription.version = isHEAD ? downloadable.lastVersion : 0;
    }

    let expirationInterval = isHEAD ?
                              MILLIS_IN_DAY : DEFAULT_EXPIRATION_INTERVAL;
    if (params.expires)
    {
      let match = /^(\d+)\s*(h)?/.exec(params.expires);
      if (match)
      {
        let interval = parseInt(match[1], 10);
        if (match[2])
          expirationInterval = interval * MILLIS_IN_HOUR;
        else
          expirationInterval = interval * MILLIS_IN_DAY;
      }
    }

    let [
      softExpiration,
      hardExpiration
    ] = this._downloader.processExpirationInterval(expirationInterval);
    subscription.softExpiration = Math.round(softExpiration / MILLIS_IN_SECOND);
    subscription.expires = Math.round(hardExpiration / MILLIS_IN_SECOND);

    if (minVersion)
      subscription.requiredVersion = minVersion;
    else
      delete subscription.requiredVersion;

    // In case of HEAD request (disabled subscription) notify an update so that
    // the last version of the subscription will be stored for the next time.
    if (isHEAD)
      filterNotifier.emit("subscription.updated", subscription);
    else
      processFilters(subscription, lines);
  }

  _onDownloadError(downloadable, downloadURL, error, responseStatus,
                   redirectCallback)
  {
    let subscription = Subscription.fromURL(downloadable.url);
    subscription.mark("downloading.finished");
    subscription.lastDownload = Math.round(Date.now() / MILLIS_IN_SECOND);
    subscription.downloadStatus = error;

    // Request fallback URL if necessary - for automatic updates only
    if (!downloadable.manual)
    {
      subscription.errors++;

      if (redirectCallback &&
          subscription.errors >= Prefs.subscriptions_fallbackerrors &&
          /^https?:\/\//i.test(subscription.url))
      {
        subscription.errors = 0;

        let fallbackURL = Prefs.subscriptions_fallbackurl;
        const {addonVersion} = __webpack_require__(187);
        fallbackURL = fallbackURL.replace(/%VERSION%/g,
                                          encodeURIComponent(addonVersion));
        fallbackURL = fallbackURL.replace(/%SUBSCRIPTION%/g,
                                          encodeURIComponent(subscription.url));
        fallbackURL = fallbackURL.replace(/%URL%/g,
                                          encodeURIComponent(downloadURL));
        fallbackURL = fallbackURL.replace(/%ERROR%/g,
                                          encodeURIComponent(error));
        fallbackURL = fallbackURL.replace(/%RESPONSESTATUS%/g,
                                          encodeURIComponent(responseStatus));

        let initObj = {
          cache: "no-store",
          credentials: "omit",
          referrer: "no-referrer",
          method: downloadable.method
        };

        fetch(fallbackURL, initObj).then(response => response.text())
        .then(responseText =>
        {
          if (!filterStorage.hasSubscription(subscription))
            return;

          let match = /^(\d+)(?:\s+(\S+))?$/.exec(responseText);
          if (match && match[1] == "301" &&    // Moved permanently
              match[2] && /^https?:\/\//i.test(match[2]))
          {
            redirectCallback(match[2]);
          }
          else if (match && match[1] == "410") // Gone
          {
            let data = "[Adblock]\n" +
              [...subscription.filterText()].join("\n");
            redirectCallback("data:text/plain," + encodeURIComponent(data));
          }
        });
      }
    }
  }
}

let synchronizer =
/**
 * This object is responsible for downloading filter subscriptions whenever
 * necessary.
 * @type {module:synchronizer~Synchronizer}
 */
exports.k3 = new Synchronizer();

// allow DownloadableSubscription to update themselves once re-enabled
DownloadableSubscription.useSynchronizer(synchronizer);

/**
 * Given a valid subscription and some text, it parses all filters and add
 * these in bulk to the specified subscription.
 * @param {module:subscriptionClasses.Subscription} subscription The
 *  Subscription to use as reference for manually added filters.
 * @param {string} filters The filters file/text to add.
 * @param {function} errorCallback A callback invoked if errors occur.
 */
__webpack_unused_export__ = function(subscription, filters,
                                          errorCallback)
{
  let {error, lines} = parseFilters(filters);
  if (error)
    errorCallback(error);
  else
    processFilters(subscription, lines);
};

/**
 * Given some text containing filters, parse each line and return all details.
 * @param {string} filters The filters file/text to parse.
 * @returns {Object.<error?, lines?, params?, minVersion?>} All parsed details,
 *  if available.
 */
function parseFilters(filters)
{
  let lines = filters.split(/[\r\n]+/);
  let headerMatch = /\[Adblock(?:\s*Plus\s*([\d.]+)?)?\]/i.exec(lines[0]);

  if (!headerMatch)
    return {error: "synchronize_invalid_data"};

  let minVersion = headerMatch[1];

  let params = {
    redirect: null,
    homepage: null,
    title: null,
    version: null,
    expires: null
  };

  for (let {hasOwnProperty} = Object.prototype, i = 1; i < lines.length; i++)
  {
    let match = /^\s*!\s*(.*?)\s*:\s*(.*)/.exec(lines[i]);
    if (!match)
      break;

    let keyword = match[1].toLowerCase();
    if (hasOwnProperty.call(params, keyword))
    {
      params[keyword] = match[2];
      lines.splice(i--, 1);
    }
  }

  return {lines, params, minVersion};
}

__webpack_unused_export__ = parseFilters;

/**
 * Given a list of parsed filters, normalize each line and update the
 * subscription.
 * @private
 * @param {module:subscriptionClasses.Subscription} subscription The
 *  Subscription to use as reference for manually added filters.
 * @param {string[]} lines The parsed filters lines.
 */
function processFilters(subscription, lines)
{
  subscription.mark("processing.started");

  lines.shift();
  let filterText = [];
  for (let line of lines)
  {
    line = Filter.normalize(line);
    if (line)
      filterText.push(line);
  }

  filterStorage.updateSubscriptionFilters(subscription, filterText);

  subscription.mark("processing.finished");
}


/***/ }),

/***/ 6936:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * Number of milliseconds in a second.
 * @const {number}
 * @default 1000
 * @package
 */
exports.MILLIS_IN_SECOND = 1000;

/**
 * Number of milliseconds in a minute.
 * @const {number}
 * @default 60000
 * @package
 */
exports.MILLIS_IN_MINUTE = 60000;

/**
 * Number of milliseconds in an hour.
 * @const {number}
 * @default 3600000
 * @package
 */
exports.MILLIS_IN_HOUR = 3600000;

/**
 * Number of milliseconds in a day.
 * @const {number}
 * @default 86400000
 * @package
 */
exports.MILLIS_IN_DAY = 86400000;


/***/ }),

/***/ 5622:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



const {Cache} = __webpack_require__(5889);

const publicSuffixes = __webpack_require__(9979);

/**
 * Map of public suffixes to their offsets.
 * @type {Map.<string,number>}
 */
let publicSuffixMap = buildPublicSuffixMap();

/**
 * Cache of domain maps.
 *
 * The domains part of filter text (e.g. `example.com,~mail.example.com`) is
 * often repeated across filters. This cache enables deduplication of the
 * `Map` objects that specify on which domains the filter does and does not
 * apply, which reduces memory usage and improves performance.
 *
 * @type {Map.<string, Map.<string, boolean>>}
 */
let domainsCache = new Cache(1000);

/**
 * Builds a map of public suffixes to their offsets.
 * @returns {Map.<string,number>}
 */
function buildPublicSuffixMap()
{
  let map = new Map();

  for (let key in publicSuffixes)
    map.set(key, publicSuffixes[key]);

  return map;
}

/**
 * A `URLInfo` object represents information about a URL.
 *
 * It is returned by `{@link module:url.parseURL parseURL()}`.
 */
class URLInfo
{
  /**
   * Creates a `URLInfo` object.
   *
   * @param {string} href The entire URL.
   * @param {string} protocol The protocol scheme of the URL, including the
   *   final `:`.
   * @param {string} [hostname] The hostname of the URL.
   *
   * @private
   */
  constructor(href, protocol, hostname = "")
  {
    this._href = href;
    this._protocol = protocol;
    this._hostname = hostname;
  }

  /**
   * The entire URL.
   * @type {string}
   */
  get href()
  {
    return this._href;
  }

  /**
   * The protocol scheme of the URL, including the final `:`.
   * @type {string}
   */
  get protocol()
  {
    return this._protocol;
  }

  /**
   * The hostname of the URL.
   * @type {string}
   */
  get hostname()
  {
    return this._hostname;
  }

  /**
   * Returns the entire URL.
   * @returns {string} The entire URL.
   */
  toString()
  {
    return this._href;
  }
}

let parseURL =
/**
 * Parses a URL to extract the protocol and the hostname.
 *
 * __This is a lightweight alternative to the native `URL` object intended for
 * use primarily within Adblock Plus. Unlike the `URL` object, the `parseURL()`
 * function is not robust and will give incorrect results for invalid URLs. Use
 * this function with valid,
 * [normalized](https://url.spec.whatwg.org/#concept-basic-url-parser),
 * properly encoded (IDNA, etc.) URLs only.__
 *
 * @param {string} url The URL.
 *
 * @returns {module:url~URLInfo} Information about the URL.
 *
 * @public
 */
exports.parseURL = function parseURL(url)
{
  let match = /^([^:]+:)(?:\/\/(?:[^/]*@)?(\[[^\]]*\]|[^:/]+))?/.exec(url);
  return new URLInfo(url, match[1], match[2]);
};

let domainSuffixes =
/**
 * Yields all suffixes for a domain.
 *
 * For example, given the domain `www.example.com`, this function yields
 * `www.example.com`, `example.com`, and `com`, in that order.
 *
 * If the domain ends with a dot, the dot is ignored.
 *
 * @param {string} domain The domain.
 * @param {boolean} [includeBlank] Whether to include the blank suffix at the
 *   end.
 *
 * @generator
 * @yields {string} The next suffix for the domain.
 *
 * @package
 */
exports.domainSuffixes = function* domainSuffixes(domain, includeBlank = false)
{
  // Since any IP address is already expected to be normalized, there's no need
  // to validate it.
  if (isIPAddress(domain))
  {
    yield domain;
  }
  else
  {
    if (domain[domain.length - 1] == ".")
      domain = domain.substring(0, domain.length - 1);

    while (domain != "")
    {
      yield domain;

      let dotIndex = domain.indexOf(".");
      domain = dotIndex == -1 ? "" : domain.substr(dotIndex + 1);
    }
  }

  if (includeBlank)
    yield "";
};

/**
 * Checks whether the given hostname refers to
 * {@link https://en.wikipedia.org/wiki/Localhost localhost}.
 *
 * If the hostname is `localhost`, `127.0.0.1`, or `[::1]`, the function
 * returns `true`; otherwise, it returns `false`.
 *
 * @param {string} hostname The hostname.
 *
 * @returns {boolean} Whether the hostname refers to localhost.
 *
 * @package
 */
exports.isLocalhost = function isLocalhost(hostname)
{
  return hostname == "localhost" || hostname == "127.0.0.1" ||
         hostname == "[::1]";
};

/**
 * Checks whether the given hostname is an IP address.
 *
 * Unlike `{@link module:url~isValidIPv4Address isValidIPv4Address()}`, this
 * function only checks whether the hostname _looks like_ an IP address. Use
 * this function with valid, normalized, properly encoded (IDNA) hostnames
 * only.
 *
 * @param {string} hostname An IDNA-encoded hostname.
 *
 * @returns {boolean} Whether the hostname is an IP address.
 */
function isIPAddress(hostname)
{
  // Does it look like an IPv6 address?
  if (hostname[0] == "[" && hostname[hostname.length - 1] == "]")
    return true;

  // Note: The first condition helps us avoid the more expensive regular
  // expression match for most hostnames.
  return hostname[hostname.length - 1] >= 0 &&
         /^\d+\.\d+\.\d+\.\d+$/.test(hostname);
}

/**
 * Checks whether a given address is a valid IPv4 address.
 *
 * Only a normalized IPv4 address is considered valid. e.g. `0x7f.0x0.0x0.0x1`
 * is invalid, whereas `127.0.0.1` is valid.
 *
 * @param {string} address The address to check.
 *
 * @returns {boolean} Whether the address is a valid IPv4 address.
 */
function isValidIPv4Address(address)
{
  return /^(((2[0-4]|1[0-9]|[1-9])?[0-9]|25[0-5])\.){4}$/.test(address + ".");
}

/**
 * Checks whether a given hostname is valid.
 *
 * This function is used for filter validation.
 *
 * A hostname occurring in a filter must be normalized. For example,
 * <code>&#x1f642;</code> (slightly smiling face) should be normalized to
 * `xn--938h`; otherwise this function returns `false` for such a hostname.
 * Similarly, IP addresses should be normalized.
 *
 * @param {string} hostname The hostname to check.
 *
 * @returns {boolean} Whether the hostname is valid.
 */
exports.isValidHostname = function isValidHostname(hostname)
{
  if (isValidIPv4Address(hostname))
    return true;

  // This does not in fact validate the IPv6 address but it's alright for now.
  if (hostname[0] == "[" && hostname[hostname.length - 1] == "]")
    return true;

  // Based on
  // https://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_hostnames
  if (hostname[hostname.length - 1] == ".")
    hostname = hostname.substring(0, hostname.length - 1);

  if (hostname.length > 253)
    return false;

  let labels = hostname.split(".");

  for (let label of labels)
  {
    if (!/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(label))
      return false;
  }

  // Based on https://tools.ietf.org/html/rfc3696#section-2
  if (!/\D/.test(labels[labels.length - 1]))
    return false;

  return true;
};

let getBaseDomain =
/**
 * Gets the base domain for the given hostname.
 *
 * @param {string} hostname
 *
 * @returns {string}
 *
 * @package
 */
exports.getBaseDomain = function getBaseDomain(hostname)
{
  let slices = [];
  let cutoff = NaN;

  for (let suffix of domainSuffixes(hostname))
  {
    slices.push(suffix);

    let offset = publicSuffixMap.get(suffix);

    if (typeof offset != "undefined")
    {
      cutoff = slices.length - 1 - offset;
      break;
    }
  }

  if (isNaN(cutoff))
    return slices.length > 2 ? slices[slices.length - 2] : hostname;

  if (cutoff <= 0)
    return hostname;

  return slices[cutoff];
};

/**
 * Checks whether a request's origin is different from its document's origin.
 *
 * @param {string} requestHostname The IDNA-encoded hostname of the request.
 * @param {string} documentHostname The IDNA-encoded hostname of the document.
 *
 * @returns {boolean}
 */
function isThirdParty(requestHostname, documentHostname)
{
  if (requestHostname[requestHostname.length - 1] == ".")
    requestHostname = requestHostname.substring(0, requestHostname.length - 1);

  if (documentHostname[documentHostname.length - 1] == ".")
  {
    documentHostname =
      documentHostname.substring(0, documentHostname.length - 1);
  }

  if (requestHostname == documentHostname)
    return false;

  if (!requestHostname || !documentHostname)
    return true;

  if (isIPAddress(requestHostname) || isIPAddress(documentHostname))
    return true;

  return getBaseDomain(requestHostname) != getBaseDomain(documentHostname);
}

let URLRequest =
/**
 * The `URLRequest` class represents a URL request.
 */
exports.URLRequest = class URLRequest
{
  /**
   * @private
   */
  constructor() {}

  /**
   * The URL of the request.
   * @type {string}
   */
  get href()
  {
    return this._href;
  }

  /**
   * Information about the URL of the request.
   * @type {module:url~URLInfo}
   * @package
   */
  get urlInfo()
  {
    if (!this._urlInfo)
      this._urlInfo = parseURL(this._href);

    return this._urlInfo;
  }

  /**
   * The hostname of the document making the request.
   * @type {?string}
   */
  get documentHostname()
  {
    return this._documentHostname == null ? null : this._documentHostname;
  }

  /**
   * Whether this is a third-party request.
   * @type {boolean}
   */
  get thirdParty()
  {
    if (typeof this._thirdParty == "undefined")
    {
      this._thirdParty = this._documentHostname == null ? false :
                           isThirdParty(this.urlInfo.hostname,
                                        this._documentHostname);
    }

    return this._thirdParty;
  }

  /**
   * Returns the URL of the request.
   * @returns {string}
   */
  toString()
  {
    return this._href;
  }

  /**
   * The lower-case version of the URL of the request.
   * @type {string}
   * @package
   */
  get lowerCaseHref()
  {
    if (this._lowerCaseHref == null)
      this._lowerCaseHref = this._href.toLowerCase();

    return this._lowerCaseHref;
  }
};

/**
 * Returns a `{@link module:url.URLRequest URLRequest}` object for the given
 * URL.
 *
 * @param {string|module:url~URLInfo|URL} url The URL. If this is a `string`,
 *   it must be a canonicalized URL (see
 *   `{@link module:url.parseURL parseURL()}`).
 * @param {?string} [documentHostname] The IDNA-encoded hostname of the
 *   document making the request.
 *
 * @returns {module:url.URLRequest}
 */
exports.URLRequest.from = function(url, documentHostname = null)
{
  let request = new URLRequest();

  if (typeof url == "string")
  {
    request._href = url;
  }
  else
  {
    request._urlInfo = url instanceof URLInfo ? url :
                         new URLInfo(url.href, url.protocol, url.hostname);
    request._href = url.href;
  }

  if (documentHostname != null)
    request._documentHostname = documentHostname;

  return request;
};

/**
 * Parses the domains part of a filter text
 * (e.g. `example.com,~mail.example.com`) into a `Map` object.
 *
 * @param {string} source The domains part of a filter text.
 * @param {string} separator The string used to separate two or more domains in
 *   the domains part of a filter text.
 *
 * @returns {?Map.<string, boolean>}
 *
 * @package
 */
exports.parseDomains = function parseDomains(source, separator)
{
  let domains = domainsCache.get(source);
  if (typeof domains != "undefined")
    return domains;

  if (source[0] != "~" && !source.includes(separator))
  {
    // Fast track for the common one-domain scenario.
    domains = new Map([["", false], [source, true]]);
  }
  else
  {
    domains = null;

    let hasIncludes = false;
    for (let domain of source.split(separator))
    {
      if (domain == "")
        continue;

      let include;
      if (domain[0] == "~")
      {
        include = false;
        domain = domain.substring(1);
      }
      else
      {
        include = true;
        hasIncludes = true;
      }

      if (!domains)
        domains = new Map();

      domains.set(domain, include);
    }

    if (domains)
      domains.set("", !hasIncludes);
  }

  domainsCache.set(source, domains);

  return domains;
};


/***/ }),

/***/ 3844:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



function parseVersionComponent(comp)
{
  if (comp == "*")
    return Infinity;
  return parseInt(comp, 10) || 0;
}

/**
 * Compares two versions.
 *
 * @param {string} v1 The first version.
 * @param {string} v2 The second version.
 *
 * @returns {number} `-1` if `v1` is older than `v2`; `1` if `v1` is newer than
 *   `v2`; otherwise `0`.
 *
 * @package
 */
exports.compareVersions = function compareVersions(v1, v2)
{
  let regexp = /^(.*?)([a-z].*)?$/i;
  let [, head1, tail1] = regexp.exec(v1);
  let [, head2, tail2] = regexp.exec(v2);
  let components1 = head1.split(".");
  let components2 = head2.split(".");

  for (let i = 0; i < components1.length ||
                  i < components2.length; i++)
  {
    let result = parseVersionComponent(components1[i]) -
                 parseVersionComponent(components2[i]) || 0;

    if (result < 0)
      return -1;
    else if (result > 0)
      return 1;
  }

  // Compare version suffix (e.g. 0.1alpha < 0.1b1 < 01.b2 < 0.1).
  // However, note that this is a simple string comparision, meaning: b10 < b2
  if (tail1 == tail2)
    return 0;
  if (!tail1 || tail2 && tail1 > tail2)
    return 1;
  return -1;
};


/***/ }),

/***/ 187:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "addonName": () => /* binding */ addonName,
/* harmony export */   "addonVersion": () => /* binding */ addonVersion,
/* harmony export */   "application": () => /* binding */ application,
/* harmony export */   "applicationVersion": () => /* binding */ applicationVersion,
/* harmony export */   "platform": () => /* binding */ platform,
/* harmony export */   "platformVersion": () => /* binding */ platformVersion
/* harmony export */ });
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

let addonName = "adblockpluschrome";
let addonVersion = "3.11.2";
let application = null;
let applicationVersion;
let platform = "chromium";
let platformVersion = null;

let regexp = /(\S+)\/(\S+)(?:\s*\(.*?\))?/g;
let match;

while (match = regexp.exec(navigator.userAgent))
{
  let app = match[1];
  let ver = match[2];

  if (app == "Chrome")
  {
    platformVersion = ver;
  }
  else if (app != "Mozilla" && app != "AppleWebKit" && app != "Safari")
  {
    // For compatibility with legacy websites, Chrome's UA
    // also includes a Mozilla, AppleWebKit and Safari token.
    // Any further name/version pair indicates a fork.
    application = app == "OPR" ? "opera" : app.toLowerCase();
    applicationVersion = ver;
  }
}

// not a Chromium-based UA, probably modifed by the user
if (!platformVersion)
{
  application = "unknown";
  applicationVersion = platformVersion = "0";
}

// no additional name/version, so this is upstream Chrome
if (!application)
{
  application = "chrome";
  applicationVersion = platformVersion;
}


/***/ }),

/***/ 8717:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "nk": () => /* binding */ checkAllowlisted,
  "km": () => /* binding */ getKey
});

// UNUSED EXPORTS: allowlistedDomainRegexp, listAllowlistingFilters

// EXTERNAL MODULE: ./adblockpluscore/lib/matcher.js
var matcher = __webpack_require__(6240);
// EXTERNAL MODULE: ./adblockpluscore/lib/filterClasses.js
var filterClasses = __webpack_require__(3217);
// EXTERNAL MODULE: ./adblockpluscore/lib/contentTypes.js
var contentTypes = __webpack_require__(298);
// EXTERNAL MODULE: ./adblockpluscore/lib/filterNotifier.js
var filterNotifier = __webpack_require__(3326);
// EXTERNAL MODULE: ./adblockpluscore/lib/filterState.js
var filterState = __webpack_require__(9970);
// EXTERNAL MODULE: ./adblockpluscore/lib/filterStorage.js
var filterStorage = __webpack_require__(9302);
// EXTERNAL MODULE: ./lib/url.js
var url = __webpack_require__(2315);
// EXTERNAL MODULE: ./lib/messaging.js
var messaging = __webpack_require__(8198);
// EXTERNAL MODULE: ./adblockpluscore/lib/events.js
var events = __webpack_require__(8450);
// CONCATENATED MODULE: ./lib/hitLogger.js
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module hitLogger */

;







let nonRequestTypes = [
  "DOCUMENT", "ELEMHIDE", "SNIPPET", "GENERICBLOCK", "GENERICHIDE", "CSP"
];

let eventEmitter = new events.EventEmitter();

/**
 * @namespace
 * @static
 */
let HitLogger = {
  /**
   * Adds a listener for requests, filter hits etc related to the tab.
   *
   * Note: Calling code is responsible for removing the listener again,
   *       it will not be automatically removed when the tab is closed.
   *
   * @param {number} tabId
   * @param {function} listener
   */
  addListener: eventEmitter.on.bind(eventEmitter),

  /**
   * Removes a listener for the tab.
   *
   * @param {number} tabId
   * @param {function} listener
   */
  removeListener: eventEmitter.off.bind(eventEmitter),

  /**
   * Checks whether a tab is being inspected by anything.
   *
   * @param {number} tabId
   * @return {boolean}
   */
  hasListener: eventEmitter.hasListeners.bind(eventEmitter)
};

/**
 * Logs a request associated with a tab or multiple tabs.
 *
 * @param {number[]} tabIds
 *   The tabIds associated with the request
 * @param {Object} request
 *   The request to log
 * @param {string} request.url
 *   The URL of the request
 * @param {string} request.type
 *  The request type
 * @param {string} request.docDomain
 *  The hostname of the document
 * @param {boolean} request.thirdParty
 *   Whether the origin of the request and document differs
 * @param {?string} request.sitekey
 *   The active sitekey if there is any
 * @param {?boolean} request.specificOnly
 *   Whether generic filters should be ignored
 * @param {?BlockingFilter} filter
 *  The matched filter or null if there is no match
 */
function logRequest(tabIds, request, filter)
{
  for (let tabId of tabIds)
    eventEmitter.emit(tabId, request, filter);
}

function logHiddenElements(page, frame, selectors, filters, docDomain)
{
  if (HitLogger.hasListener(page.id))
  {
    for (let subscription of filterStorage.filterStorage.subscriptions())
    {
      if (subscription.disabled)
        continue;

      for (let text of subscription.filterText())
      {
        let filter = filterClasses.Filter.fromText(text);

        // We only know the exact filter in case of element hiding emulation.
        // For regular element hiding filters, the content script only knows
        // the selector, so we have to find a filter that has an identical
        // selector and is active on the domain the match was reported from.
        let isActiveElemHideFilter = filter instanceof filterClasses.ElemHideFilter &&
                                     selectors.includes(filter.selector) &&
                                     filter.isActiveOnDomain(docDomain);

        if (isActiveElemHideFilter || filters.includes(text))
        {
          // For generic filters we need to additionally check whether
          // they were not applied to the page due to an exception rule.
          if (filter.isGeneric())
          {
            let specificOnly = checkAllowlisted(
              page, frame, null,
              contentTypes.contentTypes.GENERICHIDE
            );
            if (specificOnly)
              continue;
          }

          eventEmitter.emit(page.id, {type: "ELEMHIDE", docDomain}, filter);
        }
      }
    }
  }
}

/**
 * Logs an allowing filter that disables (some kind of)
 * blocking for a particular document.
 *
 * @param {number}       tabId     The tabId the allowlisting is active for
 * @param {string}       url       The url of the allowlisted document
 * @param {number}       typeMask  The bit mask of allowing types checked
 *                                 for
 * @param {string}       docDomain The hostname of the parent document
 * @param {AllowingFilter} filter  The matched allowing filter
 */
function logAllowlistedDocument(tabId, url, typeMask, docDomain, filter)
{
  if (HitLogger.hasListener(tabId))
  {
    for (let type of nonRequestTypes)
    {
      if (typeMask & filter.contentType & contentTypes.contentTypes[type])
        eventEmitter.emit(tabId, {url, type, docDomain}, filter);
    }
  }
}

/**
 * Logs active element hiding filters for a tab.
 *
 * @event "hitLogger.traceElemHide"
 * @property {string[]} selectors  The selectors of applied ElemHideFilters
 * @property {string[]} filters    The text of applied ElemHideEmulationFilters
 */
messaging/* port.on */.N.on("hitLogger.traceElemHide", (message, sender) =>
{
  logHiddenElements(
    sender.page, sender.frame, message.selectors, message.filters,
    (0,url/* extractHostFromFrame */.I)(sender.frame)
  );
});

// EXTERNAL MODULE: ./adblockpluscore/lib/rsa.js
var rsa = __webpack_require__(9021);
// CONCATENATED MODULE: ./lib/allowlisting.js
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module allowlisting */

;










let sitekeys = new ext.PageMap();
let allowlistedDomainRegexp = /^@@\|\|([^/:]+)\^\$document$/;

function match(page, url, typeMask, docDomain, sitekey)
{
  let filter = matcher.defaultMatcher.match(url, typeMask, docDomain, sitekey);

  if (filter && page)
    logAllowlistedDocument(page.id, url.href, typeMask, docDomain, filter);

  return filter;
}

function* frameDetails(page, frame, originUrl, typeMask)
{
  if (frame || originUrl)
  {
    while (frame)
    {
      let parentFrame = frame.parent;

      yield [frame.url, typeMask,
             (0,url/* extractHostFromFrame */.I)(parentFrame, originUrl) || frame.url.hostname,
             getKey(page, frame, originUrl)];

      frame = parentFrame;
    }

    if (originUrl)
    {
      yield [originUrl, typeMask, originUrl.hostname,
             getKey(null, null, originUrl)];
    }
  }
  else if (page)
  {
    yield [page.url, typeMask, page.url.hostname, null];
  }
}

/**
 * Gets the active allowing filter for the document associated
 * with the given page/frame, or null if it's not allowlisted.
 *
 * @param {?Page}   page
 * @param {?Frame} [frame]
 * @param {?URL}   [originUrl]
 * @param {number} [typeMask=contentTypes.DOCUMENT]
 * @return {?AllowingFilter}
 */
function checkAllowlisted(page, frame, originUrl,
                                 typeMask = contentTypes.contentTypes.DOCUMENT)
{
  for (let details of frameDetails(page, frame, originUrl, typeMask))
  {
    let filter = match(page, ...details);
    if (filter)
      return filter;
  }
}

/**
 * Returns all allowing filters that apply the document associated
 * with the given page/frame.
 *
 * @param {?Page}   page
 * @param {?Frame} [frame]
 * @param {?URL}   [originUrl]
 * @param {number} [typeMask=contentTypes.DOCUMENT]
 * @return {Array.<AllowingFilter>}
 */
function listAllowlistingFilters(page, frame, originUrl,
                                        typeMask = contentTypes.contentTypes.DOCUMENT)
{
  let filters = new Set([]);

  for (let details of frameDetails(page, frame, originUrl, typeMask))
  {
    let {allowing} = matcher.defaultMatcher.search(...details, false, "allowing");
    for (let filter of allowing)
      filters.add(filter);
  }

  return Array.from(filters);
}

/**
 * @typedef {object} filtersIsAllowlistedResult
 * @property {boolean} hostname
 *   True if an allowing filter for an entire domain matches the given page.
 * @property {boolean} page
 *   True if an allowing filter _not_ for an entire domain matches the given
 *   page.
 */

/**
 * Checks if the given page is allowlisted.
 *
 * @event "filters.isWhitelisted"
 * @returns {filtersIsAllowlistedResult}
 */
messaging/* port.on */.N.on("filters.isWhitelisted", message =>
{
  let pageAllowlisted = false;
  let hostnameAllowlisted = false;

  for (let filter of listAllowlistingFilters(new ext.Page(message.tab)))
  {
    if (allowlistedDomainRegexp.test(filter.text))
      hostnameAllowlisted = true;
    else
      pageAllowlisted = true;

    if (pageAllowlisted && hostnameAllowlisted)
      break;
  }

  return {hostname: hostnameAllowlisted, page: pageAllowlisted};
});

/**
 * Adds an allowing filter for the given page's hostname, if it is not
 * already allowlisted. Note: If a disabled allowing filter exists, we
 * enable that instead.
 *
 * @event "filters.whitelist"
 * @property {boolean} [singlePage=false]
 *   If true we add an allowing filter for the given page's URL instead.
 */
messaging/* port.on */.N.on("filters.whitelist", message =>
{
  let page = new ext.Page(message.tab);
  let filter;
  if (!message.singlePage)
  {
    let host = page.url.hostname.replace(/^www\./, "");
    filter = filterClasses.Filter.fromText("@@||" + host + "^$document");
  }
  else
  {
    // We generate a filter which only applies to the same protocol (e.g. http)
    // and subdomain, but one which doesn't consider the exact query string or
    // fragment.
    // Our logic here is taken from the legacy Firefox extension.
    // See https://hg.adblockplus.org/adblockplus/file/tip/lib/ui.js#l1517
    let ending = "|";
    page.url.hash = "";
    if (page.url.search && page.url.search.includes("&"))
    {
      page.url.search = "";
      ending = "?";
    }
    filter = filterClasses.Filter.fromText("@@|" + page.url.href + ending + "$document");
  }

  filterState.filterState.setEnabled(filter.text, true);
  if (filterStorage.filterStorage.getSubscriptionCount(filter.text) == 0)
    filterStorage.filterStorage.addFilter(filter);
});

/**
 * Remove any allowing filters which apply to the given page's URL.
 *
 * @event "filters.unwhitelist"
 * @property {boolean} [singlePage=false]
 *   If true we only remove allowing filters which are not for an entire
 *   domain.
 */
messaging/* port.on */.N.on("filters.unwhitelist", message =>
{
  let page = new ext.Page(message.tab);
  for (let filter of listAllowlistingFilters(page))
  {
    if (message.singlePage && allowlistedDomainRegexp.test(filter.text))
      continue;

    filterStorage.filterStorage.removeFilter(filter);
    if (filterStorage.filterStorage.getSubscriptionCount(filter.text) != 0)
      filterState.filterState.setEnabled(filter.text, false);
  }
});

function revalidateAllowlistingState(page)
{
  filterNotifier.filterNotifier.emit(
    "page.AllowlistingStateRevalidate",
    page, checkAllowlisted(page)
  );
}

filterNotifier.filterNotifier.on("filter.behaviorChanged", async() =>
{
  let tabs = await browser.tabs.query({});
  for (let tab of tabs)
    revalidateAllowlistingState(new ext.Page(tab));
});

ext.pages.onLoading.addListener(revalidateAllowlistingState);

/**
 * Gets the public key, previously recorded for the given page
 * and frame, to be considered for the $sitekey filter option.
 *
 * @param {?Page}   page
 * @param {?Frame}  frame
 * @param {URL}    [originUrl]
 * @return {string}
 */
function getKey(page, frame, originUrl)
{
  if (page)
  {
    let keys = sitekeys.get(page);
    if (keys)
    {
      for (; frame; frame = frame.parent)
      {
        let key = keys.get(frame.url.href);
        if (key)
          return key;
      }
    }
  }

  if (originUrl)
  {
    for (let keys of sitekeys._map.values())
    {
      let key = keys.get(originUrl.href);
      if (key)
        return key;
    }
  }

  return null;
}

function checkKey(token, url)
{
  let parts = token.split("_");
  if (parts.length < 2)
    return false;

  let key = parts[0].replace(/=/g, "");
  let signature = parts[1];
  let data = url.pathname + url.search + "\0" +
             url.host + "\0" +
             self.navigator.userAgent;
  if (!(0,rsa/* verifySignature */.u)(key, signature, data))
    return false;

  return key;
}

function recordKey(key, page, url)
{
  let keys = sitekeys.get(page);
  if (!keys)
  {
    keys = new Map();
    sitekeys.set(page, keys);
  }
  keys.set(url.href, key);
}

/**
 * Record the given sitekey if it is valid.
 *
 * @event "filters.addKey"
 * @property {string} token - The sitekey token found in the document element's
 *                            data-adblockkey attribute.
 */
messaging/* port.on */.N.on("filters.addKey", (message, sender) =>
{
  let key = checkKey(message.token, sender.frame.url);
  if (key)
    recordKey(key, sender.page, sender.frame.url);
});

function onHeadersReceived(details)
{
  let page = new ext.Page({id: details.tabId});

  for (let header of details.responseHeaders)
  {
    if (header.name.toLowerCase() == "x-adblock-key" && header.value)
    {
      let url = new URL(details.url);
      let key = checkKey(header.value, url);
      if (key)
      {
        recordKey(key, page, url);
        break;
      }
    }
  }
}

if (typeof browser == "object")
{
  browser.webRequest.onHeadersReceived.addListener(
    onHeadersReceived,
    {
      urls: ["http://*/*", "https://*/*"],
      types: ["main_frame", "sub_frame"]
    },
    ["responseHeaders"]
  );
}


/***/ }),

/***/ 3772:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "q_": () => /* binding */ setBadge,
/* harmony export */   "k8": () => /* binding */ setIconImageData,
/* harmony export */   "c4": () => /* binding */ setIconPath,
/* harmony export */   "qp": () => /* binding */ toggleBadge
/* harmony export */ });
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module browserAction */

let changesByTabId = new Map();
let badgeStateByPage = new ext.PageMap();

function setBadgeState(tabId, key, value)
{
  let page = new ext.Page(tabId);
  let badgeState = badgeStateByPage.get(page);

  if (!badgeState)
  {
    badgeState = {
      hiddenState: "visible",
      text: ""
    };
    badgeStateByPage.set(page, badgeState);
  }

  // We need to ignore any text changes while we're hiding the badge
  if (!(badgeState.hiddenState == "hiding" && key == "text"))
    badgeState[key] = value;

  return badgeState;
}

function applyChanges(tabId, changes)
{
  return Promise.all(Object.keys(changes).map(change =>
  {
    // Firefox for Android displays the browser action not as an icon but
    // as a menu item. There is no icon, but such an option may be added
    // in the future.
    // https://bugzilla.mozilla.org/show_bug.cgi?id=1331746
    if (change == "iconPath" && "setIcon" in browser.browserAction)
    {
      return browser.browserAction.setIcon({
        tabId,
        path: {
          16: changes.iconPath.replace("$size", "16"),
          20: changes.iconPath.replace("$size", "20"),
          32: changes.iconPath.replace("$size", "32"),
          40: changes.iconPath.replace("$size", "40")
        }
      });
    }

    if (change == "iconImageData" && "setIcon" in browser.browserAction)
    {
      return browser.browserAction.setIcon({
        tabId,
        imageData: changes.iconImageData
      });
    }

    // There is no badge on Firefox for Android; the browser action is
    // simply a menu item.
    if (change == "badgeText" && "setBadgeText" in browser.browserAction)
    {
      // Remember changes to the badge text but don't apply them yet
      // as long as the badge is hidden.
      let badgeState = setBadgeState(tabId, "text", changes.badgeText);
      if (badgeState.hiddenState == "hidden")
        return;

      return browser.browserAction.setBadgeText({
        tabId,
        text: changes.badgeText
      });
    }

    // There is no badge on Firefox for Android; the browser action is
    // simply a menu item.
    if (change == "badgeColor" &&
        "setBadgeBackgroundColor" in browser.browserAction)
    {
      return browser.browserAction.setBadgeBackgroundColor({
        tabId,
        color: changes.badgeColor
      });
    }
  }));
}

async function addChange(tabId, name, value)
{
  let changes = changesByTabId.get(tabId);
  if (!changes)
  {
    changes = {};
    changesByTabId.set(tabId, changes);
  }
  changes[name] = value;

  function cleanup()
  {
    changesByTabId.delete(tabId);
  }

  async function onReplaced(addedTabId, removedTabId)
  {
    if (addedTabId == tabId)
    {
      browser.tabs.onReplaced.removeListener(onReplaced);
      try
      {
        await applyChanges(tabId, changes);
        cleanup();
      }
      catch (e)
      {
        cleanup();
      }
    }
  }

  if (!browser.tabs.onReplaced.hasListener(onReplaced))
  {
    try
    {
      await applyChanges(tabId, changes);
      cleanup();
    }
    catch (e)
    {
      // If the tab is prerendered, browser.browserAction.set* fails
      // and we have to delay our changes until the currently visible tab
      // is replaced with the prerendered tab.
      browser.tabs.onReplaced.addListener(onReplaced);
    }
  }
}

/**
 * Sets icon badge for given tab.
 *
 * @param {number} tabId
 * @param {object} badge
 * @param {string} badge.color
 * @param {string} badge.number
 */
function setBadge(tabId, badge)
{
  if (!badge)
  {
    addChange(tabId, "badgeText", "");
  }
  else
  {
    if ("number" in badge)
      addChange(tabId, "badgeText", badge.number.toString());

    if ("color" in badge)
      addChange(tabId, "badgeColor", badge.color);
  }
}

/**
 * Sets icon image for given tab using image data.
 *
 * @param  {number} tabId
 * @param  {object} imageData
 */
function setIconImageData(tabId, imageData)
{
  addChange(tabId, "iconImageData", imageData);
}

/**
 * Sets icon image for given tab using file path.
 *
 * @param  {number} tabId
 * @param  {string} path - expected to include "$size" placeholder
 */
function setIconPath(tabId, path)
{
  addChange(tabId, "iconPath", path);
}

/**
 * Toggles icon badge for given tab.
 *
 * @param  {number} tabId
 * @param  {boolean} shouldHide
 */
async function toggleBadge(tabId, shouldHide)
{
  if (shouldHide)
  {
    setBadgeState(tabId, "hiddenState", "hiding");
    addChange(tabId, "badgeText", "");
    setBadgeState(tabId, "hiddenState", "hidden");
  }
  else
  {
    let badgeState = setBadgeState(tabId, "hiddenState", "visible");
    addChange(tabId, "badgeText", badgeState.text);
  }
}


/***/ }),

/***/ 4656:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IO": () => /* binding */ IO
/* harmony export */ });
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

const keyPrefix = "file:";

function fileToKey(fileName)
{
  return keyPrefix + fileName;
}

async function loadFile(fileName)
{
  let key = fileToKey(fileName);
  let items = await browser.storage.local.get(key);
  let entry = items[key];
  if (entry)
    return entry;
  throw {type: "NoSuchFile"};
}

function saveFile(fileName, data)
{
  return browser.storage.local.set({
    [fileToKey(fileName)]: {
      content: Array.from(data),
      lastModified: Date.now()
    }
  });
}

let IO =
{
  /**
   * Reads text lines from a file.
   * @param {string} fileName
   *    Name of the file to be read
   * @param {TextSink} listener
   *    Function that will be called for each line in the file
   * @return {Promise}
   *    Promise to be resolved or rejected once the operation is completed
   */
  async readFromFile(fileName, listener)
  {
    let entry = await loadFile(fileName);
    for (let line of entry.content)
      listener(line);
  },

  /**
   * Writes text lines to a file.
   * @param {string} fileName
   *    Name of the file to be written
   * @param {Iterable.<string>} data
   *    An array-like or iterable object containing the lines (without line
   *    endings)
   * @return {Promise}
   *    Promise to be resolved or rejected once the operation is completed
   */
  writeToFile(fileName, data)
  {
    return saveFile(fileName, data);
  },

  /**
   * Renames a file.
   * @param {string} fromFile
   *    Name of the file to be renamed
   * @param {string} newName
   *    New file name, will be overwritten if exists
   * @return {Promise}
   *    Promise to be resolved or rejected once the operation is completed
   */
  async renameFile(fromFile, newName)
  {
    let entry = await loadFile(fromFile);
    await browser.storage.local.set({[fileToKey(newName)]: entry});
    await browser.storage.local.remove(fileToKey(fromFile));
  },

  /**
   * Retrieves file metadata.
   * @param {string} fileName
   *    Name of the file to be looked up
   * @return {Promise.<StatData>}
   *    Promise to be resolved with file metadata once the operation is
   *    completed
   */
  async statFile(fileName)
  {
    try
    {
      let entry = await loadFile(fileName);
      return {
        exists: true,
        lastModified: entry.lastModified
      };
    }
    catch (error)
    {
      if (error.type == "NoSuchFile")
        return {exists: false};
      throw error;
    }
  }
};


/***/ }),

/***/ 8198:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "N": () => /* binding */ port
/* harmony export */ });
/* harmony import */ var _adblockpluscore_lib_events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8450);
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module messaging */

;

/**
 * Communication port wrapping ext.onMessage to receive messages.
 *
 * @constructor
 */
class Port
{
  constructor()
  {
    this._eventEmitter = new _adblockpluscore_lib_events_js__WEBPACK_IMPORTED_MODULE_0__.EventEmitter();
    this._onMessage = this._onMessage.bind(this);
    ext.onMessage.addListener(this._onMessage);
  }

  _onMessage(message, sender, sendResponse)
  {
    let async = false;
    let callbacks = this._eventEmitter.listeners(message.type);

    for (let callback of callbacks)
    {
      let response = callback(message, sender);

      if (response && typeof response.then == "function")
      {
        response.then(
          sendResponse,
          reason =>
          {
            console.error(reason);
            sendResponse();
          }
        );
        async = true;
      }
      else
      {
        sendResponse(response);
      }
    }

    return async;
  }

  /**
   * Function to be called when a particular message is received.
   *
   * @callback Port~messageCallback
   * @param {object} message
   * @param {object} sender
   * @return The callback can return undefined (no response),
   *         a value (response to be sent to sender immediately)
   *         or a promise (asynchronous response).
   */

  /**
   * Adds a callback for the specified message.
   *
   * The return value of the callback (if not undefined) is sent as response.
   * @param {string}   name
   * @param {Port~messageCallback} callback
   */
  on(name, callback)
  {
    this._eventEmitter.on(name, callback);
  }

  /**
   * Removes a callback for the specified message.
   *
   * @param {string}   name
   * @param {Port~messageCallback} callback
   */
  off(name, callback)
  {
    this._eventEmitter.off(name, callback);
  }

  /**
   * Disables the port and makes it stop listening to incoming messages.
   */
  disconnect()
  {
    ext.onMessage.removeListener(this._onMessage);
  }
}

/**
 * The default port to receive messages.
 *
 * @type {Port}
 */
let port = new Port();


/***/ }),

/***/ 4776:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Prefs": () => /* binding */ Prefs
/* harmony export */ });
/* harmony import */ var info__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(187);
/* harmony import */ var _adblockpluscore_lib_events_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8450);
/* harmony import */ var _messaging_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8198);
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module prefs */

;



const keyPrefix = "pref:";

let eventEmitter = new _adblockpluscore_lib_events_js__WEBPACK_IMPORTED_MODULE_1__.EventEmitter();
let overrides = Object.create(null);

/** @lends module:prefs.Prefs */
let defaults = Object.create(null);

/**
 * @see https://adblockplus.org/en/preferences#analytics
 * @type {object}
 */
defaults.analytics = {
  trustedHosts: ["adblockplus.org", "notification.adblockplus.org",
                 "easylist-downloads.adblockplus.org"]
};
/**
 * The application version as set during initialization. Used to detect updates.
 *
 * @type {string}
 */
defaults.currentVersion = "";
/**
 * @see https://adblockplus.org/en/preferences#patternsbackups
 * @type {number}
 */
defaults.patternsbackups = 0;
/**
 * @see https://adblockplus.org/en/preferences#patternsbackupinterval
 * @type {number}
 */
defaults.patternsbackupinterval = 24;
/**
 * Only for compatibility with core code. Please do not change!
 *
 * @type {boolean}
 */
defaults.savestats = false;
/**
 * @see https://adblockplus.org/en/preferences#subscriptions_fallbackerrors
 * @type {number}
 */
defaults.subscriptions_fallbackerrors = 5;
/**
 * @see https://adblockplus.org/en/preferences#subscriptions_fallbackurl
 * @type {string}
 */
defaults.subscriptions_fallbackurl = "https://adblockplus.org/getSubscription?version=%VERSION%&url=%SUBSCRIPTION%&downloadURL=%URL%&error=%ERROR%&responseStatus=%RESPONSESTATUS%";
/**
 * @see https://adblockplus.org/en/preferences#subscriptions_autoupdate
 * @type {boolean}
 */
defaults.subscriptions_autoupdate = true;
/**
 * @see https://adblockplus.org/en/preferences#subscriptions_exceptionsurl
 * @type {string}
 */
defaults.subscriptions_exceptionsurl = "https://easylist-downloads.adblockplus.org/exceptionrules.txt";
/**
 * @see https://adblockplus.org/en/preferences#subscriptions_exceptionsurl_privacy
 * @type {string}
 */
defaults.subscriptions_exceptionsurl_privacy = "https://easylist-downloads.adblockplus.org/exceptionrules-privacy-friendly.txt";
/**
 * Used to ensure the anti-circumvention subscription is opted in by default.
 * @type {boolean}
 */
defaults.subscriptions_addedanticv = false;
/**
 * @see https://adblockplus.org/en/preferences#documentation_link
 * @type {string}
 */
defaults.documentation_link = "https://adblockplus.org/redirect?link=%LINK%&lang=%LANG%";
/**
 * @see https://adblockplus.org/en/preferences#notificationdata
 * @type {object}
 */
defaults.notificationdata = {};
/**
 * @see https://adblockplus.org/en/preferences#notificationurl
 * @type {string}
 */
defaults.notificationurl = "https://notification.adblockplus.org/notification.json";
/**
 * The total number of requests blocked by the extension.
 *
 * @type {number}
 */
defaults.blocked_total = 0;
/**
 * Whether to show a badge in the toolbar icon indicating the number
 * of blocked ads.
 *
 * @type {boolean}
 */
defaults.show_statsinicon = true;
/**
 * Whether to show the number of blocked ads in the popup.
 *
 * @type {boolean}
 */
defaults.show_statsinpopup = true;
/**
 * Whether to show the "Block element" context menu entry.
 *
 * @type {boolean}
 */
defaults.shouldShowBlockElementMenu = true;

/**
 * Whether to show tracking warning in options page when both
 * Acceptable Ads and subscription of type "Privacy" are enabled.
 *
 * @type {boolean}
 */
defaults.ui_warn_tracking = true;

/**
 * Notification categories to be ignored.
 *
 * @type {string[]}
 */
defaults.notifications_ignoredcategories = [];

/**
 * Whether to show the developer tools panel.
 *
 * @type {boolean}
 */
defaults.show_devtools_panel = true;

/**
 * Prevents unsolicited UI elements from showing up after installation. This
 * preference isn't set by the extension but can be pre-configured externally.
 *
 * @see https://adblockplus.org/development-builds/suppressing-the-first-run-page-on-chrome
 * @type {boolean}
 */
defaults.suppress_first_run_page = false;

/**
 * Additonal subscriptions to be automatically added when the extension is
 * loaded. This preference isn't set by the extension but can be pre-configured
 * externally.
 *
 * @type {string[]}
 */
defaults.additional_subscriptions = [];

/**
 * The version of major updates that the user is aware of. If it's too low,
 * the updates page will be shown to inform the user about intermediate changes.
 *
 * @type {number}
 */
defaults.last_updates_page_displayed = 0;

/**
 * Causes elements targeted by element hiding (and element hiding emulation)
 * to be highlighted instead of hidden.
 *
 * @type {boolean}
 */
defaults.elemhide_debug = false;

/**
 * Address of page to open on first run.
 *
 * @type {string}
 */
defaults.remote_first_run_page_url = "https://welcome.adblockplus.org/%LANG%/installed?an=%ADDON_NAME%&av=%ADDON_VERSION%&ap=%APPLICATION_NAME%&apv=%APPLICATION_VERSION%&p=%PLATFORM_NAME%&pv=%PLATFORM_VERSION%";

/**
  * @namespace
  * @static
  */
let Prefs = {
  /**
   * Sets the given preference.
   *
   * @param {string} preference
   * @param {any}    value
   * @return {Promise} A promise that resolves when the underlying
                       browser.storage.local.set/remove() operation completes
   */
  set(preference, value)
  {
    let defaultValue = defaults[preference];

    if (typeof value != typeof defaultValue)
      throw new Error("Attempt to change preference type");

    if (value == defaultValue)
    {
      let oldValue = overrides[preference];
      delete overrides[preference];

      // Firefox 66 fails to emit storage.local.onChanged events for falsey
      // values. https://bugzilla.mozilla.org/show_bug.cgi?id=1541449
      if (!oldValue &&
          info__WEBPACK_IMPORTED_MODULE_0__.platform == "gecko" && parseInt(info__WEBPACK_IMPORTED_MODULE_0__.platformVersion, 10) == 66)
        onChanged({[prefToKey(preference)]: {oldValue}}, "local");

      return browser.storage.local.remove(prefToKey(preference));
    }

    overrides[preference] = value;
    return (customSave.get(preference) || savePref)(preference);
  },

  /**
   * Adds a callback that is called when the
   * value of a specified preference changed.
   *
   * @param {string}   preference
   * @param {function} callback
   */
  on(preference, callback)
  {
    eventEmitter.on(preference, callback);
  },

  /**
   * Removes a callback for the specified preference.
   *
   * @param {string}   preference
   * @param {function} callback
   */
  off(preference, callback)
  {
    eventEmitter.off(preference, callback);
  },

  /**
   * Reads the documentation_link preference and substitutes placeholders.
   *
   * @param {string} linkID
   * @return {string}
   */
  getDocLink(linkID)
  {
    return this.documentation_link
      .replace(/%LINK%/g, linkID)
      .replace(/%LANG%/g, browser.i18n.getUILanguage());
  },

  /**
   * A promise that is fullfilled when all preferences have been loaded.
   * Wait for this promise to be fulfilled before using preferences during
   * extension initialization.
   *
   * @type {Promise}
   */
  untilLoaded: null
};

function keyToPref(key)
{
  if (key.indexOf(keyPrefix) != 0)
    return null;

  return key.substr(keyPrefix.length);
}

function prefToKey(pref)
{
  return keyPrefix + pref;
}

function savePref(pref)
{
  return browser.storage.local.set({[prefToKey(pref)]: overrides[pref]});
}

let customSave = new Map();
if (info__WEBPACK_IMPORTED_MODULE_0__.platform == "gecko" && parseInt(info__WEBPACK_IMPORTED_MODULE_0__.platformVersion, 10) < 66)
{
  // Saving one storage value causes all others to be saved as well for
  // Firefox versions <66. Make sure that updating ad counter doesn't cause
  // the filters data to be saved frequently as a side-effect.
  let promise = null;
  customSave.set("blocked_total", pref =>
  {
    if (!promise)
    {
      promise = new Promise((resolve, reject) =>
      {
        setTimeout(
          () =>
          {
            promise = null;
            savePref(pref).then(resolve, reject);
          },
          60 * 1000
        );
      });
    }
    return promise;
  });
}

function addPreference(pref)
{
  Object.defineProperty(Prefs, pref, {
    get() { return (pref in overrides ? overrides : defaults)[pref]; },
    set(value)
    {
      Prefs.set(pref, value);
    },
    enumerable: true
  });
}

function onChanged(changes)
{
  for (let key in changes)
  {
    let pref = keyToPref(key);
    if (pref && pref in defaults)
    {
      let change = changes[key];
      if ("newValue" in change && change.newValue != defaults[pref])
        overrides[pref] = change.newValue;
      else
        delete overrides[pref];

      eventEmitter.emit(pref);
    }
  }
}

async function init()
{
  let prefs = Object.keys(defaults);
  prefs.forEach(addPreference);

  let isEdgeChromium = info__WEBPACK_IMPORTED_MODULE_0__.application == "edge" &&
                       info__WEBPACK_IMPORTED_MODULE_0__.platform == "chromium";

  // When upgrading from EdgeHTML to Edge Chromium (v79) data stored in
  // browser.storage.local gets corrupted.
  // To fix it, we have to call JSON.parse twice.
  // See: https://gitlab.com/eyeo/adblockplus/adblockpluschrome/issues/152
  if (isEdgeChromium)
  {
    let items = await browser.storage.local.get(null);

    let fixedItems = {};
    for (let key in items)
    {
      if (typeof items[key] == "string")
      {
        try
        {
          fixedItems[key] = JSON.parse(JSON.parse(items[key]));
        }
        catch (e) {}
      }
    }

    await browser.storage.local.set(fixedItems);
  }

  {
    let items = await browser.storage.local.get(prefs.map(prefToKey));
    for (let key in items)
      overrides[keyToPref(key)] = items[key];
  }

  if ("managed" in browser.storage)
  {
    try
    {
      let items = await browser.storage.managed.get(null);
      for (let key in items)
        defaults[key] = items[key];
    }
    catch (e)
    {
      // Opera doesn't support browser.storage.managed, but instead of simply
      // removing the API, it gives an asynchronous error which we ignore here.
    }
  }

  browser.storage.onChanged.addListener(onChanged);

  // Migrate the first and current version from notificationdata over to the
  // new analytics preference for existing users. The analytics module takes
  // care of new users.
  if (!("data" in Prefs.analytics) &&
      "firstVersion" in Prefs.notificationdata &&
      Prefs.notificationdata.firstVersion != "0")
  {
    // JSON values aren't saved unless they are assigned a different object
    // and we don't want to mutate the default value of Prefs.analytics.
    let notificationdata = JSON.parse(JSON.stringify(Prefs.notificationdata));
    let analytics = JSON.parse(JSON.stringify(Prefs.analytics));

    // Migrate the version data.
    analytics.data = {
      firstVersion: notificationdata.firstVersion,
      currentVersion: notificationdata.data.version
    };
    delete notificationdata.firstVersion;

    // Write the changes back to Prefs and storage.
    Prefs.notificationdata = notificationdata;
    Prefs.analytics = analytics;
  }
}

Prefs.untilLoaded = init();

/**
 * Returns the value of the given preference key.
 *
 * @event "prefs.get"
 * @property {string} key - The preference key.
 * @returns {string|string[]|number|boolean}
 */
_messaging_js__WEBPACK_IMPORTED_MODULE_2__/* .port.on */ .N.on("prefs.get", (message, sender) => Prefs[message.key]);

/**
 * Sets the value of the given preference key to the given value.
 *
 * @event "prefs.set"
 * @property {string} key - The preference key.
 * @property {string} key - The value to set.
 * @returns {string|string[]|number|boolean|undefined}
 */
_messaging_js__WEBPACK_IMPORTED_MODULE_2__/* .port.on */ .N.on("prefs.set", async(message, sender) =>
{
  if (message.key == "notifications_ignoredcategories")
  {
    let {notifications} =
      await Promise.resolve(/* import() */).then(__webpack_require__.t.bind(__webpack_require__, 5430, 3));
    return notifications.toggleIgnoreCategory("*", !!message.value);
  }

  return Prefs[message.key] = message.value;
});

/**
 * Toggles the value of the given preference key.
 *
 * @event "prefs.toggle"
 * @property {string} key - The preference key
 * @returns {?boolean}
 */
_messaging_js__WEBPACK_IMPORTED_MODULE_2__/* .port.on */ .N.on("prefs.toggle", async(message, sender) =>
{
  if (message.key == "notifications_ignoredcategories")
  {
    let {notifications} =
      await Promise.resolve(/* import() */).then(__webpack_require__.t.bind(__webpack_require__, 5430, 3));
    return notifications.toggleIgnoreCategory("*");
  }

  return Prefs[message.key] = !Prefs[message.key];
});

/**
 * Returns a link to a page on our website, in the user's locale if possible.
 *
 * @event "prefs.getDocLink"
 * @property {string} link
 *   The link ID to generate the doc link for.
 * @returns {string}
 */
_messaging_js__WEBPACK_IMPORTED_MODULE_2__/* .port.on */ .N.on("prefs.getDocLink", (message, sender) =>
{
  let {application, platform} = info__WEBPACK_IMPORTED_MODULE_0__;
  if (platform == "chromium" && application != "opera" && application != "edge")
    application = "chrome";
  else if (platform == "gecko")
    application = "firefox";

  return Prefs.getDocLink(message.link.replace("{browser}", application));
});


/***/ }),

/***/ 5747:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getBlockedPerPage": () => /* binding */ getBlockedPerPage,
/* harmony export */   "recordBlockedRequest": () => /* binding */ recordBlockedRequest,
/* harmony export */   "Stats": () => /* binding */ Stats
/* harmony export */ });
/* harmony import */ var _adblockpluscore_lib_events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8450);
/* harmony import */ var _adblockpluscore_lib_filterClasses_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3217);
/* harmony import */ var _browserAction_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3772);
/* harmony import */ var _messaging_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(8198);
/* harmony import */ var _prefs_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(4776);
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module stats */

;





const badgeColor = "#646464";
const badgeRefreshRate = 4;

let eventEmitter = new _adblockpluscore_lib_events_js__WEBPACK_IMPORTED_MODULE_0__.EventEmitter();
let blockedPerPage = new ext.PageMap();

/**
 * Gets the number of requests blocked on the given page.
 *
 * @param  {Page} page
 * @return {Number}
 */
function getBlockedPerPage(page)
{
  return blockedPerPage.get(page) || 0;
}

let activeTabIds = new Set();
let activeTabIdByWindowId = new Map();

let badgeUpdateScheduled = false;

function updateBadge(tabId)
{
  if (!_prefs_js__WEBPACK_IMPORTED_MODULE_4__.Prefs.show_statsinicon)
    return;

  for (let id of (typeof tabId == "undefined" ? activeTabIds : [tabId]))
  {
    let page = new ext.Page({id});
    let blockedCount = blockedPerPage.get(page);

    (0,_browserAction_js__WEBPACK_IMPORTED_MODULE_2__/* .setBadge */ .q_)(page.id, blockedCount && {
      color: badgeColor,
      number: blockedCount
    });
  }
}

function scheduleBadgeUpdate(tabId)
{
  if (!badgeUpdateScheduled && _prefs_js__WEBPACK_IMPORTED_MODULE_4__.Prefs.show_statsinicon &&
      (typeof tabId == "undefined" || activeTabIds.has(tabId)))
  {
    setTimeout(() => { badgeUpdateScheduled = false; updateBadge(); },
               1000 / badgeRefreshRate);
    badgeUpdateScheduled = true;
  }
}

// Once nagivation for the tab has been committed to (e.g. it's no longer
// being prerendered) we clear its badge, or if some requests were already
// blocked beforehand we display those on the badge now.
browser.webNavigation.onCommitted.addListener(details =>
{
  if (details.frameId == 0)
    updateBadge(details.tabId);
});

/**
 * Records a blocked request.
 *
 * @param {Filter} filter
 * @param {Array.<number>} tabIds
 */
async function recordBlockedRequest(filter, tabIds)
{
  if (!(filter instanceof _adblockpluscore_lib_filterClasses_js__WEBPACK_IMPORTED_MODULE_1__.BlockingFilter))
    return;

  for (let tabId of tabIds)
  {
    let page = new ext.Page({id: tabId});
    let blocked = blockedPerPage.get(page) || 0;
    ++blocked;

    blockedPerPage.set(page, blocked);
    scheduleBadgeUpdate(tabId);

    eventEmitter.emit("blocked_per_page", {tabId, blocked});
  }

  // Don't update the total for incognito tabs.
  let tabs = await Promise.all(tabIds.map(id => browser.tabs.get(id)));
  if (tabs.some(tab => tab.incognito))
    return;

  // Make sure blocked_total is only read after the storage was loaded.
  await _prefs_js__WEBPACK_IMPORTED_MODULE_4__.Prefs.untilLoaded;

  _prefs_js__WEBPACK_IMPORTED_MODULE_4__.Prefs.blocked_total++;
  eventEmitter.emit("blocked_total", _prefs_js__WEBPACK_IMPORTED_MODULE_4__.Prefs.blocked_total);
}

/**
  * @namespace
  * @static
  */
let Stats = {
  /**
   * Adds a callback that is called when the
   * value of a specified stat changed.
   *
   * @param {string}   stat
   * @param {function} callback
   */
  on(stat, callback)
  {
    eventEmitter.on(stat, callback);
  },

  /**
   * Removes a callback for the specified stat.
   *
   * @param {string}   stat
   * @param {function} callback
   */
  off(stat, callback)
  {
    eventEmitter.off(stat, callback);
  },

  /**
   * The total number of blocked requests on non-incognito pages.
   *
   * @type {number}
   */
  get blocked_total()
  {
    return _prefs_js__WEBPACK_IMPORTED_MODULE_4__.Prefs.blocked_total;
  }
};

_prefs_js__WEBPACK_IMPORTED_MODULE_4__.Prefs.on("show_statsinicon", async() =>
{
  let tabs = await browser.tabs.query({});
  for (let tab of tabs)
  {
    if (_prefs_js__WEBPACK_IMPORTED_MODULE_4__.Prefs.show_statsinicon)
      updateBadge(tab.id);
    else
      (0,_browserAction_js__WEBPACK_IMPORTED_MODULE_2__/* .setBadge */ .q_)(tab.id, null);
  }
});

/**
 * Returns the number of blocked requests for the sender's page.
 *
 * @event "stats.getBlockedPerPage"
 * @returns {number}
 */
_messaging_js__WEBPACK_IMPORTED_MODULE_3__/* .port.on */ .N.on("stats.getBlockedPerPage",
        message => getBlockedPerPage(new ext.Page(message.tab)));

/**
 * Returns the total number of blocked requests on non-incognito pages.
 *
 * @event "stats.getBlockedTotal"
 * @returns {number}
 */
_messaging_js__WEBPACK_IMPORTED_MODULE_3__/* .port.on */ .N.on("stats.getBlockedTotal", () => Stats.blocked_total);

browser.tabs.query({active: true}).then(tabs =>
{
  for (let tab of tabs)
  {
    activeTabIds.add(tab.id);
    activeTabIdByWindowId.set(tab.windowId, tab.id);
  }

  scheduleBadgeUpdate();
});

browser.tabs.onActivated.addListener(tab =>
{
  let lastActiveTabId = activeTabIdByWindowId.get(tab.windowId);
  if (typeof lastActiveTabId != "undefined")
    activeTabIds.delete(lastActiveTabId);

  activeTabIds.add(tab.tabId);
  activeTabIdByWindowId.set(tab.windowId, tab.tabId);

  scheduleBadgeUpdate();
});

if ("windows" in browser)
{
  browser.windows.onRemoved.addListener(windowId =>
  {
    activeTabIds.delete(activeTabIdByWindowId.get(windowId));
    activeTabIdByWindowId.delete(windowId);
  });
}


/***/ }),

/***/ 5728:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "gj": () => /* binding */ chooseFilterSubscriptions,
  "Y3": () => /* binding */ isDataCorrupted
});

// UNUSED EXPORTS: setNotifyUserCallback, setSubscriptionsCallback

// EXTERNAL MODULE: ./adblockpluscore/lib/subscriptionClasses.js
var subscriptionClasses = __webpack_require__(1883);
// EXTERNAL MODULE: ./adblockpluscore/lib/filterStorage.js
var filterStorage = __webpack_require__(9302);
// EXTERNAL MODULE: ./adblockpluscore/lib/filterEngine.js
var filterEngine = __webpack_require__(5165);
// EXTERNAL MODULE: ./adblockpluscore/lib/recommendations.js
var recommendations = __webpack_require__(3376);
// EXTERNAL MODULE: ./adblockpluscore/lib/notifications.js
var notifications = __webpack_require__(5430);
// EXTERNAL MODULE: ./adblockpluscore/lib/synchronizer.js
var synchronizer = __webpack_require__(802);
// EXTERNAL MODULE: ./build/templates/info.chrome.js.tmpl
var info_chrome_js = __webpack_require__(187);
// EXTERNAL MODULE: ./lib/messaging.js
var messaging = __webpack_require__(8198);
// EXTERNAL MODULE: ./lib/prefs.js
var prefs = __webpack_require__(4776);
// EXTERNAL MODULE: ./adblockpluscore/lib/filterNotifier.js
var filterNotifier = __webpack_require__(3326);
// EXTERNAL MODULE: ./lib/browserAction.js
var browserAction = __webpack_require__(3772);
// CONCATENATED MODULE: ./lib/icon.js
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module icon */

;



const ANIMATION_LOOPS = 3;
const FRAME_IN_MS = 100;

let frameOpacities = calculateFrameOpacities(9, 7);
let frameOpacitiesCritical = calculateFrameOpacities(5, 3);

let stopRequested = false;
let canUpdateIcon = true;
let notRunning = Promise.resolve();
let allowlistedState = new ext.PageMap();

let icons = [null, null];

function easeOut(progress)
{
  // This is merely an approximation to the built-in ease-out timing function
  // https://css-tricks.com/emulating-css-timing-functions-javascript/
  return 1 - Math.pow(1 - progress, 1.675);
}

function calculateFrameOpacities(keyframeFrames, transitionFrames)
{
  let opacities = [];

  // Show second half of first keyframe
  // Omit first frame because it's only shown after the first timeout
  for (let i = 0; i < keyframeFrames / 2 - 1; i++)
    opacities.push(0);
  // Transition from first to second keyframe
  for (let i = 0; i < transitionFrames; i++)
    opacities.push(easeOut((i + 1) / (transitionFrames + 1)));
  // Show second keyframe
  for (let i = 0; i < keyframeFrames; i++)
    opacities.push(1);
  // Transition from second to first keyframe
  for (let i = 0; i < transitionFrames; i++)
    opacities.push(easeOut((transitionFrames - i) / (transitionFrames + 1)));
  // Show first half of first keyframe
  // Omit last frame due to an additional timeout that resets the icon
  for (let i = 0; i < keyframeFrames / 2 - 1; i++)
    opacities.push(0);

  return opacities;
}

async function loadImage(url)
{
  let response = await fetch(url);
  let blob = await response.blob();
  return createImageBitmap(blob);
}

async function renderIcons()
{
  let paths = [
    "icons/abp-16.png", "icons/abp-16-allowlisted.png",
    "icons/abp-32.png", "icons/abp-32-allowlisted.png"
  ];

  for (let path of paths)
  {
    let image = await loadImage(path);
    let [, size, allowlisted] = /\/abp-(16|32)(-allowlisted)?\./.exec(path);

    let canvas = new OffscreenCanvas(size, size);
    let context = canvas.getContext("2d");
    let imageData = icons[!!allowlisted | 0] || {};

    context.globalAlpha = 1;
    context.drawImage(image, 0, 0);
    imageData[size] = context.getImageData(0, 0, size, size);

    icons[!!allowlisted | 0] = imageData;
  }
}

function setIcon(page, opacity, frames)
{
  opacity = opacity || 0;
  let allowlisted = !!allowlistedState.get(page);

  if (!frames)
  {
    if (opacity > 0.5)
    {
      (0,browserAction/* setIconPath */.c4)(
        page.id,
        "/icons/abp-$size-notification.png"
      );
    }
    else if (icons[allowlisted | 0])
    {
      (0,browserAction/* setIconImageData */.k8)(page.id, icons[allowlisted | 0]);
    }
    else
    {
      (0,browserAction/* setIconPath */.c4)(
        page.id,
        "/icons/abp-$size" + (allowlisted ? "-allowlisted" : "") + ".png"
      );
    }
  }
  else
  {
    browser.browserAction.setIcon({
      tabId: page.id,
      imageData: frames["" + opacity + allowlisted]
    });
  }
}

filterNotifier.filterNotifier.on("page.AllowlistingStateRevalidate", (page, filter) =>
{
  allowlistedState.set(page, !!filter);
  if (canUpdateIcon)
    setIcon(page);
});

async function renderFrames(opacities)
{
  let images = await Promise.all([
    loadImage("icons/abp-16.png"),
    loadImage("icons/abp-16-allowlisted.png"),
    loadImage("icons/abp-16-notification.png"),
    loadImage("icons/abp-20.png"),
    loadImage("icons/abp-20-allowlisted.png"),
    loadImage("icons/abp-20-notification.png"),
    loadImage("icons/abp-32.png"),
    loadImage("icons/abp-32-allowlisted.png"),
    loadImage("icons/abp-32-notification.png"),
    loadImage("icons/abp-40.png"),
    loadImage("icons/abp-40-allowlisted.png"),
    loadImage("icons/abp-40-notification.png")
  ]);

  opacities = new Set(opacities);
  let imageMap = {
    16: {base: [images[0], images[1]], overlay: images[2]},
    20: {base: [images[3], images[4]], overlay: images[5]},
    32: {base: [images[6], images[7]], overlay: images[8]},
    40: {base: [images[9], images[10]], overlay: images[11]}
  };

  let frames = {};
  let canvas = new OffscreenCanvas(0, 0);
  let context = canvas.getContext("2d");

  for (let allowlisted of [false, true])
  {
    for (let opacity of opacities)
    {
      let imageData = {};
      let sizes = [16, 20, 32, 40];
      for (let size of sizes)
      {
        canvas.width = size;
        canvas.height = size;
        context.globalAlpha = 1;
        context.drawImage(imageMap[size]["base"][allowlisted | 0], 0, 0);
        context.globalAlpha = opacity;
        context.drawImage(imageMap[size]["overlay"], 0, 0);
        imageData[size] = context.getImageData(0, 0, size, size);
      }
      frames["" + opacity + allowlisted] = imageData;
    }
  }

  return frames;
}

async function animateIcon(opacities, frames)
{
  let tabs = await browser.tabs.query({active: true});
  let pages = tabs.map(tab => new ext.Page(tab));

  let animationLoop = 0;
  let animationStep = 0;
  let numberOfFrames = opacities.length;
  let opacity = 0;

  let onActivated = page =>
  {
    pages.push(page);
    setIcon(page, opacity, frames);
    (0,browserAction/* toggleBadge */.qp)(page.id, true);
  };
  ext.pages.onActivated.addListener(onActivated);

  canUpdateIcon = false;
  for (let page of pages)
    (0,browserAction/* toggleBadge */.qp)(page.id, true);
  return new Promise((resolve, reject) =>
  {
    let interval = setInterval(() =>
    {
      let oldOpacity = opacity;
      opacity = opacities[animationStep++];

      if (opacity != oldOpacity)
      {
        for (let page of pages)
        {
          if (allowlistedState.has(page))
            setIcon(page, opacity, frames);
        }
      }

      if (animationStep > numberOfFrames)
      {
        if (++animationLoop > ANIMATION_LOOPS - 1 || stopRequested)
        {
          clearInterval(interval);
          ext.pages.onActivated.removeListener(onActivated);
          for (let page of pages)
            (0,browserAction/* toggleBadge */.qp)(page.id, false);
          canUpdateIcon = true;
          resolve();
        }
        else
        {
          animationStep = 0;
        }
      }
    }, FRAME_IN_MS);
  });
}

/**
 * Stops to animate the browser action icon
 * after the current interval has been finished.
 *
 * @return {Promise} A promise that is fullfilled when
 *                   the icon animation has been stopped.
 */
async function stopIconAnimation()
{
  stopRequested = true;
  await notRunning;
  stopRequested = false;
}

/**
 * Starts to animate the browser action icon to indicate a pending notifcation.
 * If the icon is already animated, it replaces the previous
 * animation as soon as the current interval has been finished.
 *
 * @param {string} type  The notification type (i.e: "information" or
 *                       "critical".)
 */
function startIconAnimation(type)
{
  let opacities = frameOpacities;
  if (type == "critical")
    opacities = frameOpacitiesCritical;

  notRunning = Promise.all([renderFrames(opacities), stopIconAnimation()])
    .then(results =>
    {
      if (stopRequested)
        return;

      let frames = results[0];
      return animateIcon(opacities, frames);
    });
}


// Pre-render icons on Chromium (#7253).
if (info_chrome_js.platform == "chromium")
  renderIcons();

// EXTERNAL MODULE: ./lib/stats.js
var stats = __webpack_require__(5747);
// EXTERNAL MODULE: ../lib/notifications.js
var lib_notifications = __webpack_require__(9136);
// EXTERNAL MODULE: ./lib/allowlisting.js + 1 modules
var allowlisting = __webpack_require__(8717);
// CONCATENATED MODULE: ./lib/options.js
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module options */

;



const optionsUrl = browser.runtime.getManifest().options_ui.page;

const openOptionsPageAPISupported = (
  // Some versions of Firefox for Android before version 57 do have a
  // runtime.openOptionsPage but it doesn't do anything.
  // https://bugzilla.mozilla.org/show_bug.cgi?id=1364945
  (info_chrome_js.application != "fennec" ||
   parseInt(info_chrome_js.applicationVersion, 10) >= 57)
);

async function findOptionsPage()
{
  let tabs = await browser.tabs.query({});
  // Firefox won't let us query for moz-extension:// pages, though
  // starting with Firefox 56 an extension can query for its own URLs:
  // https://bugzilla.mozilla.org/show_bug.cgi?id=1271354
  let fullOptionsUrl = browser.runtime.getURL(optionsUrl);
  let optionsTab = tabs.find(tab => tab.url == fullOptionsUrl);
  if (optionsTab)
    return optionsTab;

  // Newly created tabs might have about:blank as their URL in Firefox or
  // an empty string on Chrome (80) rather than the final options page URL,
  // we need to wait for those to finish loading.
  let potentialOptionTabIds = new Set(
    tabs.filter(tab => (tab.url == "about:blank" || !tab.url) &&
                       tab.status == "loading").map(tab => tab.id)
  );
  if (potentialOptionTabIds.size == 0)
    return;

  let removeListener;
  let updateListener = (tabId, changeInfo, tab) =>
  {
    if (potentialOptionTabIds.has(tabId) &&
        changeInfo.status == "complete")
    {
      potentialOptionTabIds.delete(tabId);
      let urlMatch = tab.url == fullOptionsUrl;
      if (urlMatch || potentialOptionTabIds.size == 0)
      {
        browser.tabs.onUpdated.removeListener(updateListener);
        browser.tabs.onRemoved.removeListener(removeListener);
        return urlMatch ? tab : null;
      }
    }
  };
  browser.tabs.onUpdated.addListener(updateListener);
  removeListener = removedTabId =>
  {
    potentialOptionTabIds.delete(removedTabId);
    if (potentialOptionTabIds.size == 0)
    {
      browser.tabs.onUpdated.removeListener(updateListener);
      browser.tabs.onRemoved.removeListener(removeListener);
    }
  };
  browser.tabs.onRemoved.addListener(removeListener);
}

async function openOptionsPage()
{
  let opened = new Promise(resolve =>
  {
    function onMessage(message, optionsPort)
    {
      if (message.type != "app.listen")
        return;
      optionsPort.onMessage.removeListener(onMessage);
      resolve([optionsPort.sender.tab, optionsPort]);
    }

    function onConnect(optionsPort)
    {
      if (optionsPort.name != "ui")
        return;
      browser.runtime.onConnect.removeListener(onConnect);
      optionsPort.onMessage.addListener(onMessage);
    }

    browser.runtime.onConnect.addListener(onConnect);
  });

  if (openOptionsPageAPISupported)
    await browser.runtime.openOptionsPage();
  else
    await browser.tabs.create({url: optionsUrl});

  return opened;
}

async function focusOptionsPage(tab)
{
  if (openOptionsPageAPISupported)
    return browser.runtime.openOptionsPage();

  let focusTab = () => browser.tabs.update(tab.id, {active: true});

  if ("windows" in browser)
  {
    await browser.windows.update(tab.windowId, {focused: true});
    return focusTab();
  }

  // Firefox for Android before version 57 does not support
  // runtime.openOptionsPage, nor does it support the windows API.
  // Since there is effectively only one window on the mobile browser,
  // we can just bring the tab to focus instead.
  return focusTab();
}

/**
 * Opens the options page, or switches to its existing tab.
 * @returns {Promise.<Array>}
 *   Promise resolving to an Array containg the tab Object of the options page
 *   and sometimes (when the page was just opened) a messaging port.
 */
async function showOptions()
{
  let existingTab = await findOptionsPage();
  if (existingTab)
    return focusOptionsPage(existingTab);
  return openOptionsPage();
}

// We need to clear the popup URL on Firefox for Android in order for the
// options page to open instead of the bubble. Unfortunately there's a bug[1]
// which prevents us from doing that, so we must avoid setting the URL on
// Firefox from the manifest at all, instead setting it here only for
// non-mobile.
// [1] - https://bugzilla.mozilla.org/show_bug.cgi?id=1414613
Promise.all([browser.browserAction.getPopup({}),
             browser.runtime.getPlatformInfo()]).then(
  ([popup, platformInfo]) =>
  {
    if (!popup && platformInfo.os != "android")
      browser.browserAction.setPopup({popup: "popup.html"});
  }
);

// On Firefox for Android, open the options page directly when the browser
// action is clicked.
browser.browserAction.onClicked.addListener(async() =>
{
  let [tab] = await browser.tabs.query({active: true});
  let currentPage = new ext.Page(tab);

  let [, optionsPort] = await showOptions();
  if (!/^https?:$/.test(currentPage.url.protocol))
    return;

  optionsPort.postMessage({
    type: "app.respond",
    action: "showPageOptions",
    args: [
      {
        host: currentPage.url.hostname.replace(/^www\./, ""),
        whitelisted: !!(0,allowlisting/* checkAllowlisted */.nk)(currentPage)
      }
    ]
  });
});

/**
 * Opens the options page in a new tab and waits for it to load, or switches to
 * the existing tab if the options page is already open.
 *
 * @event "options.open"
 * @returns {object} optionsTab
 */
messaging/* port.on */.N.on("options.open", async(message, sender) =>
{
  let [optionsTab] = await showOptions();
  return optionsTab;
});

// CONCATENATED MODULE: ./lib/notificationHelper.js
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module notificationHelper */

;








const displayMethods = new Map([
  ["critical", ["icon", "notification", "popup"]],
  ["newtab", ["newtab"]],
  ["normal", ["notification"]],
  ["relentless", ["notification"]],
  ["information", ["icon", "popup"]]
]);
const defaultDisplayMethods = ["popup"];

const linkPlaceholders = [
  ["LANG", () => browser.i18n.getUILanguage().replace("-", "_")],
  ["ADDON_NAME", () => info_chrome_js.addonName],
  ["ADDON_VERSION", () => info_chrome_js.addonVersion],
  ["APPLICATION_NAME", () => info_chrome_js.application],
  ["APPLICATION_VERSION", () => info_chrome_js.applicationVersion],
  ["PLATFORM_NAME", () => info_chrome_js.platform],
  ["PLATFORM_VERSION", () => info_chrome_js.platformVersion]
];

// We must hard code any "abp:" prefixed notification links here, otherwise
// notifications linking to them will not be displayed at all.
const localNotificationPages = new Map([
  ["abp:day1", "/day1.html"],
  ["abp:problem", "/problem.html"],
  ["abp:updates", "/updates.html"]
]);

// The active notification is (if any) the most recent currently displayed
// notification. Once a notification is clicked or is superceeded by another
// notification we no longer consider it active.
let activeNotification = null;

// We animate the ABP icon while some kinds of notifications are active, to help
// catch the user's attention.
let notificationIconAnimationPlaying = false;

// When a notification button is clicked we need to look up what should happen.
// This can be both for the active notification, and also for notifications
// stashed in the notification center.
let buttonsByNotificationId = new Map();

// Opera < 57 and Firefox (tested up to 68.0.1) do not support notifications
// being created with buttons. Opera added button support with >= 57, however
// the button click handlers have broken with >= 60 (tested up to 62). Until
// Opera fixes that bug (reference DNAWIZ-70332) we unfortunately can't use
// feature detection when deciding if notification buttons should be displayed.
const browserNotificationButtonsSupported = info_chrome_js.platform == "chromium" &&
                                            info_chrome_js.application != "opera";

// As of August 2019, only Chrome supports this flag and, since Firefox
// throws on unsupported options (tested with version 69), we need to
// explicitly set it only for supported browsers.
const browserNotificationRequireInteractionSupported = (
  info_chrome_js.platform == "chromium" && parseInt(info_chrome_js.platformVersion, 10) >= 50
);

notifications.notifications.locale = browser.i18n.getUILanguage();

function matchesDisplayMethod(method, {type})
{
  let methods = displayMethods.get(type) || defaultDisplayMethods;
  return methods.includes(method);
}

function playNotificationIconAnimation(notification)
{
  if (matchesDisplayMethod("icon", notification))
  {
    startIconAnimation(notification.type);
    notificationIconAnimationPlaying = true;
  }
}

function getNotificationButtons({type: notificationType, links}, message)
{
  let buttons = [];
  let linkCount = 0;
  let regex = /<a>(.*?)<\/a>/g;
  let match;
  while (match = regex.exec(message))
  {
    buttons.push({
      type: "link",
      title: match[1],
      link: links[linkCount++]
    });
  }

  // We allow the user to disable non-essential notifications, and we add a
  // button to those notifications to make that easier to do.
  let addConfigureButton = isOptional(notificationType);

  // Chrome only allows two notification buttons so we need to fall back
  // to a single button to open all links if there are more than two.
  let maxButtons = addConfigureButton ? 1 : 2;
  if (buttons.length > maxButtons)
  {
    buttons = [
      {
        type: "open-all",
        title: browser.i18n.getMessage("notification_open_all"),
        links
      }
    ];
  }
  if (addConfigureButton)
  {
    buttons.push({
      type: "configure",
      title: browser.i18n.getMessage("notification_configure")
    });
  }

  return buttons;
}

function openNotificationLink(link)
{
  let url;

  if (link.startsWith("abp:"))
    url = localNotificationPages.get(link);
  else
    url = prefs.Prefs.getDocLink(link);

  browser.tabs.create({url});
}

function getButtonLinks(buttons)
{
  let links = [];

  for (let button of buttons)
  {
    if (button.type == "link" && button.link)
      links.push(button.link);
    else if (button.type == "open-all" && button.links)
      links = links.concat(button.links);
  }
  return links;
}

function openNotificationLinks(notificationId)
{
  let buttons = buttonsByNotificationId.get(notificationId) || [];
  for (let link of getButtonLinks(buttons))
    openNotificationLink(link);
}

async function notificationButtonClick(notificationId, buttonIndex)
{
  let buttons = buttonsByNotificationId.get(notificationId);

  if (!(buttons && buttonIndex in buttons))
    return;

  let button = buttons[buttonIndex];

  switch (button.type)
  {
    case "link":
      openNotificationLink(button.link);
      break;
    case "open-all":
      openNotificationLinks(notificationId);
      break;
    case "configure":
      let [, optionsPort] = await showOptions();
      optionsPort.postMessage({
        type: "app.respond",
        action: "focusSection",
        args: ["notifications"]
      });
      break;
  }
}

/**
 * Tidy up after a notification has been dismissed.
 *
 * @param {string} notificationId
 * @param {bool} stashedInNotificationCenter
 *   If the given notification is (or might be) stashed in the notification
 *   center, we must take care to remember what its buttons do. Leave as true
 *   unless you're sure!
 */
function notificationDismissed(notificationId, stashedInNotificationCenter)
{
  if (activeNotification && activeNotification.id == notificationId)
  {
    activeNotification = null;

    if (notificationIconAnimationPlaying)
    {
      stopIconAnimation();
      notificationIconAnimationPlaying = false;
    }
  }

  if (!stashedInNotificationCenter)
    buttonsByNotificationId.delete(notificationId);
}

function openNotificationInNewTab(notification)
{
  let tabIds = new Set();
  let [url] = notification.links;
  for (let [key, getValue] of linkPlaceholders)
    url = url.replace(`%${key}%`, encodeURIComponent(getValue()));

  function openNotificationTab()
  {
    browser.tabs.onCreated.removeListener(onCreated);
    browser.tabs.onRemoved.removeListener(onRemoved);
    browser.tabs.onUpdated.removeListener(onUpdated);

    browser.tabs.create({url});
    notifications.notifications.markAsShown(notification.id);
  }

  let onCreated = tab =>
  {
    // Firefox loads its New Tab Page immediately and doesn't notify us
    // when it's complete so we need to open our new tab already here.
    if (tab.url == "about:newtab")
    {
      openNotificationTab();
      return;
    }

    tabIds.add(tab.id);
  };

  let onRemoved = tabId =>
  {
    tabIds.delete(tabId);
  };

  let onUpdated = (tabId, changeInfo, tab) =>
  {
    // Only look at tabs that have been opened since we started listening
    // and that have completed loading.
    if (!tabIds.has(tabId) || !("status" in changeInfo) ||
        changeInfo.status != "complete")
      return;

    tabIds.delete(tabId);

    // Open our own new tab only when a new tab gets opened
    // that isn't part of the user browsing the web.
    if (/^https?:/.test(tab.url))
      return;

    openNotificationTab();
  };

  browser.tabs.onCreated.addListener(onCreated);
  browser.tabs.onRemoved.addListener(onRemoved);
  browser.tabs.onUpdated.addListener(onUpdated);
}

async function showNotification(notification)
{
  if (activeNotification && activeNotification.id == notification.id)
    return;

  let texts = notifications.notifications.getLocalizedTexts(notification);
  let buttons = getNotificationButtons(notification, texts.message);

  // Don't display notifications at all if they contain a link to a local
  // notification page which we don't have.
  for (let link of getButtonLinks(buttons))
  {
    if (link.startsWith("abp:") && !localNotificationPages.has(link))
      return;
  }

  // We take a note of the notification's buttons even if notification buttons
  // are not supported by this browser. That way, if the user clicks the
  // (buttonless) notification we can still open all the links.
  buttonsByNotificationId.set(notification.id, buttons);

  activeNotification = notification;
  if (matchesDisplayMethod("notification", notification))
  {
    let notificationTitle = texts.title || "";
    let message = (texts.message || "").replace(/<\/?(a|strong)>/g, "");
    let iconUrl = browser.runtime.getURL("icons/logo/abp-128.png");

    let notificationOptions = {
      type: "basic",
      title: notificationTitle,
      iconUrl,
      message,
      // We use the highest priority to prevent the notification
      // from closing automatically, for browsers that don't support the
      // requireInteraction flag.
      priority: 2
    };

    if (browserNotificationButtonsSupported)
      notificationOptions.buttons = buttons.map(({title}) => ({title}));

    if (browserNotificationRequireInteractionSupported)
      notificationOptions.requireInteraction = true;

    browser.notifications.create(notification.id, notificationOptions);
  }

  playNotificationIconAnimation(notification);

  // Unlike other notifications, we cannot mark newtab-type notifications
  // as shown right away because they're not shown immediately.
  if (matchesDisplayMethod("newtab", notification))
  {
    let {installType} = await browser.management.getSelf();
    // Newtab notifications can be quite obtrusive and managed users may
    // see them more frequently than others so we shouldn't show such
    // notifications to them.
    if (installType == "admin")
    {
      notifications.notifications.markAsShown(notification.id);
      return;
    }

    openNotificationInNewTab(notification);
  }
  else
  {
    notifications.notifications.markAsShown(notification.id);
  }
}

/**
 * Initializes the notification system.
 *
 * @param {bool} firstRun
 */
function initNotifications(firstRun)
{
  let onClick = async(notificationId, buttonIndex) =>
  {
    if (typeof buttonIndex == "number")
      await notificationButtonClick(notificationId, buttonIndex);
    else if (!browserNotificationButtonsSupported)
      openNotificationLinks(notificationId);

    // Chrome hides notifications in the notification center when clicked,
    // so we need to clear them.
    browser.notifications.clear(notificationId);

    // But onClosed isn't triggered when we clear the notification, so we need
    // to take care to clear our record of it here too.
    notificationDismissed(notificationId, false);
  };
  browser.notifications.onButtonClicked.addListener(onClick);
  browser.notifications.onClicked.addListener(onClick);

  let onClosed = (notificationId, byUser) =>
  {
    // Despite using the highest priority for our notifications, Windows 10
    // will still hide them after a few seconds and stash them in the
    // notification center. We still consider the notification active when
    // this happens, in order to continue animating the ABP icon and/or
    // displaying the notification details in our popup window.
    // Note: Even if the notification was closed by the user, it still might
    //       be stashed in the notification center.
    if (byUser)
      notificationDismissed(notificationId, true);
  };
  browser.notifications.onClosed.addListener(onClosed);

  notifications.notifications.start();

  if (firstRun)
    (0,lib_notifications/* initDay1Notification */.iB)();
}

/**
 * If the given notification type is of vital importance return false,
 * true otherwise.
 *
 * @param {string} notificationType
 * @return {boolean}
 */
function isOptional(notificationType)
{
  return !["critical", "relentless"].includes(notificationType);
}

/**
 * Sent when a popup notification is clicked. If link is specified, that is
 * opened, otherwise the notification is dismissed.
 *
 * @event "notifications.clicked"
 * @property {number} id - ID of the clicked notification
 * @property {string} [link] - Notification link to open
 */
messaging/* port.on */.N.on("notifications.clicked", (message, sender) =>
{
  if (message.link)
  {
    openNotificationLink(message.link);
  }
  // While clicking on a desktop notification's button dismisses the
  // notification, clicking on a popup window notification's link does not.
  else
  {
    browser.notifications.clear(message.id);
    notificationDismissed(message.id, true);
  }
});

/**
 * Returns the active notification if there is one and if it applies to the
 * given url and/or display method.
 *
 * @event "notifications.get"
 * @property {string} [displayMethod]
 *   Display method to check that the active notification matches.
 *   For example "popup" or "icon".
 * @returns {?object}
 */
messaging/* port.on */.N.on("notifications.get", (message, sender) =>
{
  if (!activeNotification)
    return;

  if ("displayMethod" in message &&
      !matchesDisplayMethod(message.displayMethod, activeNotification))
    return;

  let texts = notifications.notifications.getLocalizedTexts(activeNotification);
  return Object.assign({texts}, activeNotification);
});

/**
 * Sent when a popup notification was shown to the user. Stops icon animation.
 *
 * @event "notifications.seen"
 */
messaging/* port.on */.N.on("notifications.seen", (message, sender) =>
{
  if (!activeNotification)
    return;

  if (matchesDisplayMethod("popup", activeNotification) &&
      matchesDisplayMethod("icon", activeNotification))
    stopIconAnimation();
});

ext.pages.onLoading.addListener(page =>
{
  notifications.notifications.showNext(page.url.href);
});

stats.Stats.on("blocked_total", () =>
{
  notifications.notifications.showNext();
});

notifications.notifications.addShowListener(showNotification);

// CONCATENATED MODULE: ./lib/subscriptionInit.js
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module subscriptionInit */

;










let firstRun;
let subscriptionsCallback = null;
let userNotificationCallback = null;
let reinitialized = false;
let dataCorrupted = false;

/**
 * If there aren't any filters, the default subscriptions are added.
 * However, if patterns.ini already did exist and/or any preference
 * is set to a non-default value, this indicates that this isn't the
 * first run, but something went wrong.
 *
 * This function detects the first run, and makes sure that the user
 * gets notified (on the first run page) if the data appears incomplete
 * and therefore will be reinitialized.
 */
function detectFirstRun()
{
  firstRun = filterStorage.filterStorage.getSubscriptionCount() == 0;

  if (firstRun && (!filterStorage.filterStorage.firstRun || prefs.Prefs.currentVersion))
    reinitialized = true;

  prefs.Prefs.currentVersion = info_chrome_js.addonVersion;
}

/**
 * In case of data corruption, we don't want to show users
 * any non-essential notifications so we need to instruct
 * the notification manager to ignore them.
 *
 * @param {boolean} value
 */
function setDataCorrupted(value)
{
  dataCorrupted = value;
  notifications.notifications.ignored = value;
}

/**
 * Determines whether to add the default ad blocking subscriptions.
 * Returns true, if there are no filter subscriptions besides those
 * other subscriptions added automatically, and no custom filters.
 *
 * On first run, this logic should always result in true since there
 * is no data and therefore no subscriptions. But it also causes the
 * default ad blocking subscriptions to be added again after some
 * data corruption or misconfiguration.
 *
 * @return {boolean}
 */
function shouldAddDefaultSubscriptions()
{
  for (let subscription of filterStorage.filterStorage.subscriptions())
  {
    if (subscription instanceof subscriptionClasses.DownloadableSubscription &&
        subscription.url != prefs.Prefs.subscriptions_exceptionsurl &&
        subscription.type != "circumvention")
      return false;

    if (subscription instanceof subscriptionClasses.SpecialSubscription &&
        subscription.filterCount > 0)
      return false;
  }

  return true;
}

/**
 * Finds the default filter subscriptions.
 *
 * Returns an array that includes one subscription of the type "ads" for the
 * current UI language, and any subscriptions of the type "circumvention".
 *
 * @param {Array.<object>} subscriptions
 * @return {Array.<object>}
 */
function chooseFilterSubscriptions(subscriptions)
{
  let currentLang = browser.i18n.getUILanguage().split("-")[0];
  let defaultLang = browser.runtime.getManifest().default_locale.split("_")[0];

  let adSubscriptions = [];
  let adSubscriptionsDefaultLang = [];
  let chosenSubscriptions = [];

  for (let subscription of subscriptions)
  {
    switch (subscription.type)
    {
      case "ads":
        if (subscription.languages.includes(currentLang))
          adSubscriptions.push(subscription);
        if (subscription.languages.includes(defaultLang))
          adSubscriptionsDefaultLang.push(subscription);
        break;

      case "circumvention":
        chosenSubscriptions.push(subscription);
        break;
    }
  }

  if (adSubscriptions.length > 0 || (adSubscriptions =
                                     adSubscriptionsDefaultLang).length > 0)
  {
    let randomIndex = Math.floor(Math.random() * adSubscriptions.length);
    chosenSubscriptions.unshift(adSubscriptions[randomIndex]);
  }

  return chosenSubscriptions;
}

/**
 * Gets the filter subscriptions to be added when the extnesion is loaded.
 *
 * @return {Promise|Subscription[]}
 */
function getSubscriptions()
{
  let subscriptions = [];

  // Add pre-configured subscriptions
  for (let url of prefs.Prefs.additional_subscriptions)
    subscriptions.push(subscriptionClasses.Subscription.fromURL(url));

  // Add the "acceptable ads" subscription
  if (firstRun)
  {
    let acceptableAdsSubscription = subscriptionClasses.Subscription.fromURL(
      prefs.Prefs.subscriptions_exceptionsurl
    );
    acceptableAdsSubscription.title = "Allow non-intrusive advertising";
    subscriptions.push(acceptableAdsSubscription);
  }

  // Add default ad blocking subscriptions (e.g. EasyList, Anti-Circumvention)
  let addDefaultSubscription = shouldAddDefaultSubscriptions();
  if (addDefaultSubscription || !prefs.Prefs.subscriptions_addedanticv)
  {
    for (let {url, type,
              title, homepage} of chooseFilterSubscriptions((0,recommendations.recommendations)()))
    {
      // Make sure that we don't add Easylist again if we want
      // to just add the Anti-Circumvention subscription.
      if (!addDefaultSubscription && type != "circumvention")
        continue;

      let subscription = subscriptionClasses.Subscription.fromURL(url);
      subscription.disabled = false;
      subscription.title = title;
      subscription.homepage = homepage;
      subscriptions.push(subscription);

      if (subscription.type == "circumvention")
        prefs.Prefs.subscriptions_addedanticv = true;
    }

    return subscriptions;
  }

  return subscriptions;
}

function addSubscriptionsAndNotifyUser(subscriptions)
{
  if (subscriptionsCallback)
    subscriptions = subscriptionsCallback(subscriptions);

  for (let subscription of subscriptions)
  {
    filterStorage.filterStorage.addSubscription(subscription);
    if (subscription instanceof subscriptionClasses.DownloadableSubscription &&
        !subscription.lastDownload)
      synchronizer/* synchronizer.execute */.k3.execute(subscription);
  }

  if (userNotificationCallback)
    userNotificationCallback({dataCorrupted, firstRun, reinitialized});
}

/**
 * We need to check whether we can safely write to/read from storage
 * before we start relying on it for storing preferences.
 */
async function testStorage()
{
  let testKey = "readwrite_test";
  let testValue = Math.random();

  try
  {
    await browser.storage.local.set({[testKey]: testValue});
    let result = await browser.storage.local.get(testKey);
    if (result[testKey] != testValue)
      throw new Error("Storage test: Failed to read and write value");
  }
  finally
  {
    await browser.storage.local.remove(testKey);
  }
}

(async() =>
{
  await Promise.all([
    filterEngine/* filterEngine.initialize */.c.initialize().then(() => synchronizer/* synchronizer.start */.k3.start()),
    prefs.Prefs.untilLoaded.catch(() => { setDataCorrupted(true); }),
    testStorage().catch(() => { setDataCorrupted(true); })
  ]);
  detectFirstRun();
  let subscriptions = await getSubscriptions();
  addSubscriptionsAndNotifyUser(subscriptions);
  // We have to require the "uninstall" module on demand,
  // as the "uninstall" module in turn requires this module.
  (await Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 5529))).setUninstallURL();
  initNotifications(firstRun);
})();

/**
 * Gets a value indicating whether a data corruption was detected.
 *
 * @return {boolean}
 */
function isDataCorrupted()
{
  return dataCorrupted;
}

/**
 * Sets a callback that is called with an array of subscriptions to be added
 * during initialization. The callback must return an array of subscriptions
 * that will effectively be added.
 *
 * @param {function} callback
 */
function setSubscriptionsCallback(callback)
{
  subscriptionsCallback = callback;
}

/**
 * Sets a callback that is called with environment information after
 * initialization to notify users.
 *
 * @param {function} callback
 */
function setNotifyUserCallback(callback)
{
  userNotificationCallback = callback;
}

/**
 * @typedef {object} subscriptionsGetInitIssuesResult
 * @property {boolean} dataCorrupted
 *   true if it appears that the user's extension data was corrupted.
 * @property {boolean} reinitialized
 *   true if we have reset the user's settings due to data corruption.
 */

/**
 * Returns an Object with boolean flags for any subscription initialization
 * issues.
 *
 * @event "subscriptions.getInitIssues"
 * @returns {subscriptionsGetInitIssuesResult}
 */
messaging/* port.on */.N.on("subscriptions.getInitIssues",
        (message, sender) => ({dataCorrupted, reinitialized}));


/***/ }),

/***/ 5529:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "setUninstallURL": () => /* binding */ setUninstallURL
/* harmony export */ });
/* harmony import */ var info__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(187);
/* harmony import */ var _adblockpluscore_lib_analytics_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8671);
/* harmony import */ var _adblockpluscore_lib_filterNotifier_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3326);
/* harmony import */ var _adblockpluscore_lib_filterStorage_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(9302);
/* harmony import */ var _adblockpluscore_lib_recommendations_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(3376);
/* harmony import */ var _subscriptionInit_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(5728);
/* harmony import */ var _prefs_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(4776);
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module uninstall */

;







const abbreviations = [
  ["an", "addonName"], ["av", "addonVersion"],
  ["ap", "application"], ["apv", "applicationVersion"],
  ["p", "platform"], ["fv", "firstVersion"], ["pv", "platformVersion"],
  ["ndc", "notificationDownloadCount"], ["c", "corrupted"],
  ["s", "subscriptions"]
];

/**
 * Retrieves set of URLs of recommended ad blocking filter lists
 *
 * @return {Set}
 */
function getAdsSubscriptions()
{
  let subscriptions = new Set();
  for (let subscription of (0,_adblockpluscore_lib_recommendations_js__WEBPACK_IMPORTED_MODULE_4__.recommendations)())
  {
    if (subscription.type == "ads")
      subscriptions.add(subscription.url);
  }
  return subscriptions;
}

/**
 * Determines whether any of the given subscriptions are installed and enabled
 *
 * @param {Set} urls
 *
 * @return {boolean}
 */
function isAnySubscriptionActive(urls)
{
  for (let subscription of _adblockpluscore_lib_filterStorage_js__WEBPACK_IMPORTED_MODULE_3__.filterStorage.subscriptions())
  {
    if (!subscription.disabled && urls.has(subscription.url))
      return true;
  }

  return false;
}

/**
 * Sets (or updates) the URL that is openend when the extension is uninstalled.
 *
 * Must be called after prefs got initialized and a data corruption
 * if any was detected, as well when notification data change.
 */
function setUninstallURL()
{
  let search = [];
  let params = Object.create(info__WEBPACK_IMPORTED_MODULE_0__);

  params.corrupted = (0,_subscriptionInit_js__WEBPACK_IMPORTED_MODULE_5__/* .isDataCorrupted */ .Y3)() ? "1" : "0";
  params.firstVersion = _adblockpluscore_lib_analytics_js__WEBPACK_IMPORTED_MODULE_1__.analytics.getFirstVersion();

  let notificationDownloadCount = _prefs_js__WEBPACK_IMPORTED_MODULE_6__.Prefs.notificationdata.downloadCount || 0;
  if (notificationDownloadCount < 5)
    params.notificationDownloadCount = notificationDownloadCount;
  else if (notificationDownloadCount < 8)
    params.notificationDownloadCount = "5-7";
  else if (notificationDownloadCount < 30)
    params.notificationDownloadCount = "8-29";
  else if (notificationDownloadCount < 90)
    params.notificationDownloadCount = "30-89";
  else if (notificationDownloadCount < 180)
    params.notificationDownloadCount = "90-179";
  else
    params.notificationDownloadCount = "180+";

  let aaSubscriptions = new Set([_prefs_js__WEBPACK_IMPORTED_MODULE_6__.Prefs.subscriptions_exceptionsurl]);
  let adsSubscriptions = getAdsSubscriptions();
  let isAcceptableAdsActive = isAnySubscriptionActive(aaSubscriptions);
  let isAdBlockingActive = isAnySubscriptionActive(adsSubscriptions);
  params.subscriptions = (isAcceptableAdsActive << 1) | isAdBlockingActive;

  for (let [abbreviation, key] of abbreviations)
    search.push(abbreviation + "=" + encodeURIComponent(params[key]));

  browser.runtime.setUninstallURL(_prefs_js__WEBPACK_IMPORTED_MODULE_6__.Prefs.getDocLink("uninstalled") + "&" +
                                  search.join("&"));
}

_adblockpluscore_lib_filterNotifier_js__WEBPACK_IMPORTED_MODULE_2__.filterNotifier.on("subscription.added", setUninstallURL);
_adblockpluscore_lib_filterNotifier_js__WEBPACK_IMPORTED_MODULE_2__.filterNotifier.on("subscription.disabled", setUninstallURL);
_adblockpluscore_lib_filterNotifier_js__WEBPACK_IMPORTED_MODULE_2__.filterNotifier.on("subscription.removed", setUninstallURL);
_prefs_js__WEBPACK_IMPORTED_MODULE_6__.Prefs.on("notificationdata", setUninstallURL);


/***/ }),

/***/ 2315:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "I": () => /* binding */ extractHostFromFrame
/* harmony export */ });
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module url */

/**
 * Gets the IDN-decoded hostname from the URL of a frame.
 * If the URL don't have host information (like "about:blank"
 * and "data:" URLs) it falls back to the parent frame.
 *
 * @param {?Frame}  frame
 * @param {URL}    [originUrl]
 * @return {string}
 */
function extractHostFromFrame(frame, originUrl)
{
  for (; frame; frame = frame.parent)
  {
    let {hostname} = frame.url;
    if (hostname)
      return hostname;
  }

  return originUrl ? originUrl.hostname : "";
}


/***/ }),

/***/ 8583:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";


var objectAssign = __webpack_require__(7418);

// compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js
// original notice:

/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function compare(a, b) {
  if (a === b) {
    return 0;
  }

  var x = a.length;
  var y = b.length;

  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i];
      y = b[i];
      break;
    }
  }

  if (x < y) {
    return -1;
  }
  if (y < x) {
    return 1;
  }
  return 0;
}
function isBuffer(b) {
  if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {
    return global.Buffer.isBuffer(b);
  }
  return !!(b != null && b._isBuffer);
}

// based on node assert, original notice:
// NB: The URL to the CommonJS spec is kept just for tradition.
//     node-assert has evolved a lot since then, both in API and behavior.

// http://wiki.commonjs.org/wiki/Unit_Testing/1.0
//
// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!
//
// Originally from narwhal.js (http://narwhaljs.org)
// Copyright (c) 2009 Thomas Robinson <280north.com>
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the 'Software'), to
// deal in the Software without restriction, including without limitation the
// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
// sell copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

var util = __webpack_require__(69);
var hasOwn = Object.prototype.hasOwnProperty;
var pSlice = Array.prototype.slice;
var functionsHaveNames = (function () {
  return function foo() {}.name === 'foo';
}());
function pToString (obj) {
  return Object.prototype.toString.call(obj);
}
function isView(arrbuf) {
  if (isBuffer(arrbuf)) {
    return false;
  }
  if (typeof global.ArrayBuffer !== 'function') {
    return false;
  }
  if (typeof ArrayBuffer.isView === 'function') {
    return ArrayBuffer.isView(arrbuf);
  }
  if (!arrbuf) {
    return false;
  }
  if (arrbuf instanceof DataView) {
    return true;
  }
  if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {
    return true;
  }
  return false;
}
// 1. The assert module provides functions that throw
// AssertionError's when particular conditions are not met. The
// assert module must conform to the following interface.

var assert = module.exports = ok;

// 2. The AssertionError is defined in assert.
// new assert.AssertionError({ message: message,
//                             actual: actual,
//                             expected: expected })

var regex = /\s*function\s+([^\(\s]*)\s*/;
// based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js
function getName(func) {
  if (!util.isFunction(func)) {
    return;
  }
  if (functionsHaveNames) {
    return func.name;
  }
  var str = func.toString();
  var match = str.match(regex);
  return match && match[1];
}
assert.AssertionError = function AssertionError(options) {
  this.name = 'AssertionError';
  this.actual = options.actual;
  this.expected = options.expected;
  this.operator = options.operator;
  if (options.message) {
    this.message = options.message;
    this.generatedMessage = false;
  } else {
    this.message = getMessage(this);
    this.generatedMessage = true;
  }
  var stackStartFunction = options.stackStartFunction || fail;
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, stackStartFunction);
  } else {
    // non v8 browsers so we can have a stacktrace
    var err = new Error();
    if (err.stack) {
      var out = err.stack;

      // try to strip useless frames
      var fn_name = getName(stackStartFunction);
      var idx = out.indexOf('\n' + fn_name);
      if (idx >= 0) {
        // once we have located the function frame
        // we need to strip out everything before it (and its line)
        var next_line = out.indexOf('\n', idx + 1);
        out = out.substring(next_line + 1);
      }

      this.stack = out;
    }
  }
};

// assert.AssertionError instanceof Error
util.inherits(assert.AssertionError, Error);

function truncate(s, n) {
  if (typeof s === 'string') {
    return s.length < n ? s : s.slice(0, n);
  } else {
    return s;
  }
}
function inspect(something) {
  if (functionsHaveNames || !util.isFunction(something)) {
    return util.inspect(something);
  }
  var rawname = getName(something);
  var name = rawname ? ': ' + rawname : '';
  return '[Function' +  name + ']';
}
function getMessage(self) {
  return truncate(inspect(self.actual), 128) + ' ' +
         self.operator + ' ' +
         truncate(inspect(self.expected), 128);
}

// At present only the three keys mentioned above are used and
// understood by the spec. Implementations or sub modules can pass
// other keys to the AssertionError's constructor - they will be
// ignored.

// 3. All of the following functions must throw an AssertionError
// when a corresponding condition is not met, with a message that
// may be undefined if not provided.  All assertion methods provide
// both the actual and expected values to the assertion error for
// display purposes.

function fail(actual, expected, message, operator, stackStartFunction) {
  throw new assert.AssertionError({
    message: message,
    actual: actual,
    expected: expected,
    operator: operator,
    stackStartFunction: stackStartFunction
  });
}

// EXTENSION! allows for well behaved errors defined elsewhere.
assert.fail = fail;

// 4. Pure assertion tests whether a value is truthy, as determined
// by !!guard.
// assert.ok(guard, message_opt);
// This statement is equivalent to assert.equal(true, !!guard,
// message_opt);. To test strictly for the value true, use
// assert.strictEqual(true, guard, message_opt);.

function ok(value, message) {
  if (!value) fail(value, true, message, '==', assert.ok);
}
assert.ok = ok;

// 5. The equality assertion tests shallow, coercive equality with
// ==.
// assert.equal(actual, expected, message_opt);

assert.equal = function equal(actual, expected, message) {
  if (actual != expected) fail(actual, expected, message, '==', assert.equal);
};

// 6. The non-equality assertion tests for whether two objects are not equal
// with != assert.notEqual(actual, expected, message_opt);

assert.notEqual = function notEqual(actual, expected, message) {
  if (actual == expected) {
    fail(actual, expected, message, '!=', assert.notEqual);
  }
};

// 7. The equivalence assertion tests a deep equality relation.
// assert.deepEqual(actual, expected, message_opt);

assert.deepEqual = function deepEqual(actual, expected, message) {
  if (!_deepEqual(actual, expected, false)) {
    fail(actual, expected, message, 'deepEqual', assert.deepEqual);
  }
};

assert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {
  if (!_deepEqual(actual, expected, true)) {
    fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);
  }
};

function _deepEqual(actual, expected, strict, memos) {
  // 7.1. All identical values are equivalent, as determined by ===.
  if (actual === expected) {
    return true;
  } else if (isBuffer(actual) && isBuffer(expected)) {
    return compare(actual, expected) === 0;

  // 7.2. If the expected value is a Date object, the actual value is
  // equivalent if it is also a Date object that refers to the same time.
  } else if (util.isDate(actual) && util.isDate(expected)) {
    return actual.getTime() === expected.getTime();

  // 7.3 If the expected value is a RegExp object, the actual value is
  // equivalent if it is also a RegExp object with the same source and
  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).
  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {
    return actual.source === expected.source &&
           actual.global === expected.global &&
           actual.multiline === expected.multiline &&
           actual.lastIndex === expected.lastIndex &&
           actual.ignoreCase === expected.ignoreCase;

  // 7.4. Other pairs that do not both pass typeof value == 'object',
  // equivalence is determined by ==.
  } else if ((actual === null || typeof actual !== 'object') &&
             (expected === null || typeof expected !== 'object')) {
    return strict ? actual === expected : actual == expected;

  // If both values are instances of typed arrays, wrap their underlying
  // ArrayBuffers in a Buffer each to increase performance
  // This optimization requires the arrays to have the same type as checked by
  // Object.prototype.toString (aka pToString). Never perform binary
  // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their
  // bit patterns are not identical.
  } else if (isView(actual) && isView(expected) &&
             pToString(actual) === pToString(expected) &&
             !(actual instanceof Float32Array ||
               actual instanceof Float64Array)) {
    return compare(new Uint8Array(actual.buffer),
                   new Uint8Array(expected.buffer)) === 0;

  // 7.5 For all other Object pairs, including Array objects, equivalence is
  // determined by having the same number of owned properties (as verified
  // with Object.prototype.hasOwnProperty.call), the same set of keys
  // (although not necessarily the same order), equivalent values for every
  // corresponding key, and an identical 'prototype' property. Note: this
  // accounts for both named and indexed properties on Arrays.
  } else if (isBuffer(actual) !== isBuffer(expected)) {
    return false;
  } else {
    memos = memos || {actual: [], expected: []};

    var actualIndex = memos.actual.indexOf(actual);
    if (actualIndex !== -1) {
      if (actualIndex === memos.expected.indexOf(expected)) {
        return true;
      }
    }

    memos.actual.push(actual);
    memos.expected.push(expected);

    return objEquiv(actual, expected, strict, memos);
  }
}

function isArguments(object) {
  return Object.prototype.toString.call(object) == '[object Arguments]';
}

function objEquiv(a, b, strict, actualVisitedObjects) {
  if (a === null || a === undefined || b === null || b === undefined)
    return false;
  // if one is a primitive, the other must be same
  if (util.isPrimitive(a) || util.isPrimitive(b))
    return a === b;
  if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b))
    return false;
  var aIsArgs = isArguments(a);
  var bIsArgs = isArguments(b);
  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))
    return false;
  if (aIsArgs) {
    a = pSlice.call(a);
    b = pSlice.call(b);
    return _deepEqual(a, b, strict);
  }
  var ka = objectKeys(a);
  var kb = objectKeys(b);
  var key, i;
  // having the same number of owned properties (keys incorporates
  // hasOwnProperty)
  if (ka.length !== kb.length)
    return false;
  //the same set of keys (although not necessarily the same order),
  ka.sort();
  kb.sort();
  //~~~cheap key test
  for (i = ka.length - 1; i >= 0; i--) {
    if (ka[i] !== kb[i])
      return false;
  }
  //equivalent values for every corresponding key, and
  //~~~possibly expensive deep test
  for (i = ka.length - 1; i >= 0; i--) {
    key = ka[i];
    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))
      return false;
  }
  return true;
}

// 8. The non-equivalence assertion tests for any deep inequality.
// assert.notDeepEqual(actual, expected, message_opt);

assert.notDeepEqual = function notDeepEqual(actual, expected, message) {
  if (_deepEqual(actual, expected, false)) {
    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);
  }
};

assert.notDeepStrictEqual = notDeepStrictEqual;
function notDeepStrictEqual(actual, expected, message) {
  if (_deepEqual(actual, expected, true)) {
    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);
  }
}


// 9. The strict equality assertion tests strict equality, as determined by ===.
// assert.strictEqual(actual, expected, message_opt);

assert.strictEqual = function strictEqual(actual, expected, message) {
  if (actual !== expected) {
    fail(actual, expected, message, '===', assert.strictEqual);
  }
};

// 10. The strict non-equality assertion tests for strict inequality, as
// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);

assert.notStrictEqual = function notStrictEqual(actual, expected, message) {
  if (actual === expected) {
    fail(actual, expected, message, '!==', assert.notStrictEqual);
  }
};

function expectedException(actual, expected) {
  if (!actual || !expected) {
    return false;
  }

  if (Object.prototype.toString.call(expected) == '[object RegExp]') {
    return expected.test(actual);
  }

  try {
    if (actual instanceof expected) {
      return true;
    }
  } catch (e) {
    // Ignore.  The instanceof check doesn't work for arrow functions.
  }

  if (Error.isPrototypeOf(expected)) {
    return false;
  }

  return expected.call({}, actual) === true;
}

function _tryBlock(block) {
  var error;
  try {
    block();
  } catch (e) {
    error = e;
  }
  return error;
}

function _throws(shouldThrow, block, expected, message) {
  var actual;

  if (typeof block !== 'function') {
    throw new TypeError('"block" argument must be a function');
  }

  if (typeof expected === 'string') {
    message = expected;
    expected = null;
  }

  actual = _tryBlock(block);

  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +
            (message ? ' ' + message : '.');

  if (shouldThrow && !actual) {
    fail(actual, expected, 'Missing expected exception' + message);
  }

  var userProvidedMessage = typeof message === 'string';
  var isUnwantedException = !shouldThrow && util.isError(actual);
  var isUnexpectedException = !shouldThrow && actual && !expected;

  if ((isUnwantedException &&
      userProvidedMessage &&
      expectedException(actual, expected)) ||
      isUnexpectedException) {
    fail(actual, expected, 'Got unwanted exception' + message);
  }

  if ((shouldThrow && actual && expected &&
      !expectedException(actual, expected)) || (!shouldThrow && actual)) {
    throw actual;
  }
}

// 11. Expected to throw an error:
// assert.throws(block, Error_opt, message_opt);

assert.throws = function(block, /*optional*/error, /*optional*/message) {
  _throws(true, block, error, message);
};

// EXTENSION! This is annoying to write outside this module.
assert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {
  _throws(false, block, error, message);
};

assert.ifError = function(err) { if (err) throw err; };

// Expose a strict only variant of assert
function strict(value, message) {
  if (!value) fail(value, true, message, '==', strict);
}
assert.strict = objectAssign(strict, assert, {
  equal: assert.strictEqual,
  deepEqual: assert.deepStrictEqual,
  notEqual: assert.notStrictEqual,
  notDeepEqual: assert.notDeepStrictEqual
});
assert.strict.strict = assert.strict;

var objectKeys = Object.keys || function (obj) {
  var keys = [];
  for (var key in obj) {
    if (hasOwn.call(obj, key)) keys.push(key);
  }
  return keys;
};


/***/ }),

/***/ 6076:
/***/ ((module) => {

if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}


/***/ }),

/***/ 2014:
/***/ ((module) => {

module.exports = function isBuffer(arg) {
  return arg && typeof arg === 'object'
    && typeof arg.copy === 'function'
    && typeof arg.fill === 'function'
    && typeof arg.readUInt8 === 'function';
}

/***/ }),

/***/ 69:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

var formatRegExp = /%[sdj%]/g;
exports.format = function(f) {
  if (!isString(f)) {
    var objects = [];
    for (var i = 0; i < arguments.length; i++) {
      objects.push(inspect(arguments[i]));
    }
    return objects.join(' ');
  }

  var i = 1;
  var args = arguments;
  var len = args.length;
  var str = String(f).replace(formatRegExp, function(x) {
    if (x === '%%') return '%';
    if (i >= len) return x;
    switch (x) {
      case '%s': return String(args[i++]);
      case '%d': return Number(args[i++]);
      case '%j':
        try {
          return JSON.stringify(args[i++]);
        } catch (_) {
          return '[Circular]';
        }
      default:
        return x;
    }
  });
  for (var x = args[i]; i < len; x = args[++i]) {
    if (isNull(x) || !isObject(x)) {
      str += ' ' + x;
    } else {
      str += ' ' + inspect(x);
    }
  }
  return str;
};


// Mark that a method should not be used.
// Returns a modified function which warns once by default.
// If --no-deprecation is set, then it is a no-op.
exports.deprecate = function(fn, msg) {
  // Allow for deprecating things in the process of starting up.
  if (isUndefined(global.process)) {
    return function() {
      return exports.deprecate(fn, msg).apply(this, arguments);
    };
  }

  if (process.noDeprecation === true) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (process.throwDeprecation) {
        throw new Error(msg);
      } else if (process.traceDeprecation) {
        console.trace(msg);
      } else {
        console.error(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
};


var debugs = {};
var debugEnviron;
exports.debuglog = function(set) {
  if (isUndefined(debugEnviron))
    debugEnviron = process.env.NODE_DEBUG || '';
  set = set.toUpperCase();
  if (!debugs[set]) {
    if (new RegExp('\\b' + set + '\\b', 'i').test(debugEnviron)) {
      var pid = process.pid;
      debugs[set] = function() {
        var msg = exports.format.apply(exports, arguments);
        console.error('%s %d: %s', set, pid, msg);
      };
    } else {
      debugs[set] = function() {};
    }
  }
  return debugs[set];
};


/**
 * Echos the value of a value. Trys to print the value out
 * in the best way possible given the different types.
 *
 * @param {Object} obj The object to print out.
 * @param {Object} opts Optional options object that alters the output.
 */
/* legacy: obj, showHidden, depth, colors*/
function inspect(obj, opts) {
  // default options
  var ctx = {
    seen: [],
    stylize: stylizeNoColor
  };
  // legacy...
  if (arguments.length >= 3) ctx.depth = arguments[2];
  if (arguments.length >= 4) ctx.colors = arguments[3];
  if (isBoolean(opts)) {
    // legacy...
    ctx.showHidden = opts;
  } else if (opts) {
    // got an "options" object
    exports._extend(ctx, opts);
  }
  // set default options
  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;
  if (isUndefined(ctx.depth)) ctx.depth = 2;
  if (isUndefined(ctx.colors)) ctx.colors = false;
  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;
  if (ctx.colors) ctx.stylize = stylizeWithColor;
  return formatValue(ctx, obj, ctx.depth);
}
exports.inspect = inspect;


// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics
inspect.colors = {
  'bold' : [1, 22],
  'italic' : [3, 23],
  'underline' : [4, 24],
  'inverse' : [7, 27],
  'white' : [37, 39],
  'grey' : [90, 39],
  'black' : [30, 39],
  'blue' : [34, 39],
  'cyan' : [36, 39],
  'green' : [32, 39],
  'magenta' : [35, 39],
  'red' : [31, 39],
  'yellow' : [33, 39]
};

// Don't use 'blue' not visible on cmd.exe
inspect.styles = {
  'special': 'cyan',
  'number': 'yellow',
  'boolean': 'yellow',
  'undefined': 'grey',
  'null': 'bold',
  'string': 'green',
  'date': 'magenta',
  // "name": intentionally not styling
  'regexp': 'red'
};


function stylizeWithColor(str, styleType) {
  var style = inspect.styles[styleType];

  if (style) {
    return '\u001b[' + inspect.colors[style][0] + 'm' + str +
           '\u001b[' + inspect.colors[style][1] + 'm';
  } else {
    return str;
  }
}


function stylizeNoColor(str, styleType) {
  return str;
}


function arrayToHash(array) {
  var hash = {};

  array.forEach(function(val, idx) {
    hash[val] = true;
  });

  return hash;
}


function formatValue(ctx, value, recurseTimes) {
  // Provide a hook for user-specified inspect functions.
  // Check that value is an object with an inspect function on it
  if (ctx.customInspect &&
      value &&
      isFunction(value.inspect) &&
      // Filter out the util module, it's inspect function is special
      value.inspect !== exports.inspect &&
      // Also filter out any prototype objects using the circular check.
      !(value.constructor && value.constructor.prototype === value)) {
    var ret = value.inspect(recurseTimes, ctx);
    if (!isString(ret)) {
      ret = formatValue(ctx, ret, recurseTimes);
    }
    return ret;
  }

  // Primitive types cannot have properties
  var primitive = formatPrimitive(ctx, value);
  if (primitive) {
    return primitive;
  }

  // Look up the keys of the object.
  var keys = Object.keys(value);
  var visibleKeys = arrayToHash(keys);

  if (ctx.showHidden) {
    keys = Object.getOwnPropertyNames(value);
  }

  // IE doesn't make error fields non-enumerable
  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx
  if (isError(value)
      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {
    return formatError(value);
  }

  // Some type of object without properties can be shortcutted.
  if (keys.length === 0) {
    if (isFunction(value)) {
      var name = value.name ? ': ' + value.name : '';
      return ctx.stylize('[Function' + name + ']', 'special');
    }
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    }
    if (isDate(value)) {
      return ctx.stylize(Date.prototype.toString.call(value), 'date');
    }
    if (isError(value)) {
      return formatError(value);
    }
  }

  var base = '', array = false, braces = ['{', '}'];

  // Make Array say that they are Array
  if (isArray(value)) {
    array = true;
    braces = ['[', ']'];
  }

  // Make functions say that they are functions
  if (isFunction(value)) {
    var n = value.name ? ': ' + value.name : '';
    base = ' [Function' + n + ']';
  }

  // Make RegExps say that they are RegExps
  if (isRegExp(value)) {
    base = ' ' + RegExp.prototype.toString.call(value);
  }

  // Make dates with properties first say the date
  if (isDate(value)) {
    base = ' ' + Date.prototype.toUTCString.call(value);
  }

  // Make error with message first say the error
  if (isError(value)) {
    base = ' ' + formatError(value);
  }

  if (keys.length === 0 && (!array || value.length == 0)) {
    return braces[0] + base + braces[1];
  }

  if (recurseTimes < 0) {
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    } else {
      return ctx.stylize('[Object]', 'special');
    }
  }

  ctx.seen.push(value);

  var output;
  if (array) {
    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);
  } else {
    output = keys.map(function(key) {
      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
    });
  }

  ctx.seen.pop();

  return reduceToSingleString(output, base, braces);
}


function formatPrimitive(ctx, value) {
  if (isUndefined(value))
    return ctx.stylize('undefined', 'undefined');
  if (isString(value)) {
    var simple = '\'' + JSON.stringify(value).replace(/^"|"$/g, '')
                                             .replace(/'/g, "\\'")
                                             .replace(/\\"/g, '"') + '\'';
    return ctx.stylize(simple, 'string');
  }
  if (isNumber(value))
    return ctx.stylize('' + value, 'number');
  if (isBoolean(value))
    return ctx.stylize('' + value, 'boolean');
  // For some reason typeof null is "object", so special case here.
  if (isNull(value))
    return ctx.stylize('null', 'null');
}


function formatError(value) {
  return '[' + Error.prototype.toString.call(value) + ']';
}


function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {
  var output = [];
  for (var i = 0, l = value.length; i < l; ++i) {
    if (hasOwnProperty(value, String(i))) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          String(i), true));
    } else {
      output.push('');
    }
  }
  keys.forEach(function(key) {
    if (!key.match(/^\d+$/)) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          key, true));
    }
  });
  return output;
}


function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {
  var name, str, desc;
  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };
  if (desc.get) {
    if (desc.set) {
      str = ctx.stylize('[Getter/Setter]', 'special');
    } else {
      str = ctx.stylize('[Getter]', 'special');
    }
  } else {
    if (desc.set) {
      str = ctx.stylize('[Setter]', 'special');
    }
  }
  if (!hasOwnProperty(visibleKeys, key)) {
    name = '[' + key + ']';
  }
  if (!str) {
    if (ctx.seen.indexOf(desc.value) < 0) {
      if (isNull(recurseTimes)) {
        str = formatValue(ctx, desc.value, null);
      } else {
        str = formatValue(ctx, desc.value, recurseTimes - 1);
      }
      if (str.indexOf('\n') > -1) {
        if (array) {
          str = str.split('\n').map(function(line) {
            return '  ' + line;
          }).join('\n').substr(2);
        } else {
          str = '\n' + str.split('\n').map(function(line) {
            return '   ' + line;
          }).join('\n');
        }
      }
    } else {
      str = ctx.stylize('[Circular]', 'special');
    }
  }
  if (isUndefined(name)) {
    if (array && key.match(/^\d+$/)) {
      return str;
    }
    name = JSON.stringify('' + key);
    if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
      name = name.substr(1, name.length - 2);
      name = ctx.stylize(name, 'name');
    } else {
      name = name.replace(/'/g, "\\'")
                 .replace(/\\"/g, '"')
                 .replace(/(^"|"$)/g, "'");
      name = ctx.stylize(name, 'string');
    }
  }

  return name + ': ' + str;
}


function reduceToSingleString(output, base, braces) {
  var numLinesEst = 0;
  var length = output.reduce(function(prev, cur) {
    numLinesEst++;
    if (cur.indexOf('\n') >= 0) numLinesEst++;
    return prev + cur.replace(/\u001b\[\d\d?m/g, '').length + 1;
  }, 0);

  if (length > 60) {
    return braces[0] +
           (base === '' ? '' : base + '\n ') +
           ' ' +
           output.join(',\n  ') +
           ' ' +
           braces[1];
  }

  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];
}


// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.
function isArray(ar) {
  return Array.isArray(ar);
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return isObject(re) && objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return isObject(d) && objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return isObject(e) &&
      (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = __webpack_require__(2014);

function objectToString(o) {
  return Object.prototype.toString.call(o);
}


function pad(n) {
  return n < 10 ? '0' + n.toString(10) : n.toString(10);
}


var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',
              'Oct', 'Nov', 'Dec'];

// 26 Feb 16:19:34
function timestamp() {
  var d = new Date();
  var time = [pad(d.getHours()),
              pad(d.getMinutes()),
              pad(d.getSeconds())].join(':');
  return [d.getDate(), months[d.getMonth()], time].join(' ');
}


// log is just a thin wrapper to console.log that prepends a timestamp
exports.log = function() {
  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));
};


/**
 * Inherit the prototype methods from one constructor into another.
 *
 * The Function.prototype.inherits from lang.js rewritten as a standalone
 * function (not on Function.prototype). NOTE: If this file is to be loaded
 * during bootstrapping this function needs to be rewritten using some native
 * functions as prototype setup using normal JavaScript does not work as
 * expected during bootstrapping (see mirror.js in r114903).
 *
 * @param {function} ctor Constructor function which needs to inherit the
 *     prototype.
 * @param {function} superCtor Constructor function to inherit prototype from.
 */
exports.inherits = __webpack_require__(6076);

exports._extend = function(origin, add) {
  // Don't do anything if add isn't an object
  if (!add || !isObject(add)) return origin;

  var keys = Object.keys(add);
  var i = keys.length;
  while (i--) {
    origin[keys[i]] = add[keys[i]];
  }
  return origin;
};

function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}


/***/ }),

/***/ 7418:
/***/ ((module) => {

"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/


/* eslint-disable no-unused-vars */
var getOwnPropertySymbols = Object.getOwnPropertySymbols;
var hasOwnProperty = Object.prototype.hasOwnProperty;
var propIsEnumerable = Object.prototype.propertyIsEnumerable;

function toObject(val) {
	if (val === null || val === undefined) {
		throw new TypeError('Object.assign cannot be called with null or undefined');
	}

	return Object(val);
}

function shouldUseNative() {
	try {
		if (!Object.assign) {
			return false;
		}

		// Detect buggy property enumeration order in older V8 versions.

		// https://bugs.chromium.org/p/v8/issues/detail?id=4118
		var test1 = new String('abc');  // eslint-disable-line no-new-wrappers
		test1[5] = 'de';
		if (Object.getOwnPropertyNames(test1)[0] === '5') {
			return false;
		}

		// https://bugs.chromium.org/p/v8/issues/detail?id=3056
		var test2 = {};
		for (var i = 0; i < 10; i++) {
			test2['_' + String.fromCharCode(i)] = i;
		}
		var order2 = Object.getOwnPropertyNames(test2).map(function (n) {
			return test2[n];
		});
		if (order2.join('') !== '0123456789') {
			return false;
		}

		// https://bugs.chromium.org/p/v8/issues/detail?id=3056
		var test3 = {};
		'abcdefghijklmnopqrst'.split('').forEach(function (letter) {
			test3[letter] = letter;
		});
		if (Object.keys(Object.assign({}, test3)).join('') !==
				'abcdefghijklmnopqrst') {
			return false;
		}

		return true;
	} catch (err) {
		// We don't expect any of the above to throw, but better to be safe.
		return false;
	}
}

module.exports = shouldUseNative() ? Object.assign : function (target, source) {
	var from;
	var to = toObject(target);
	var symbols;

	for (var s = 1; s < arguments.length; s++) {
		from = Object(arguments[s]);

		for (var key in from) {
			if (hasOwnProperty.call(from, key)) {
				to[key] = from[key];
			}
		}

		if (getOwnPropertySymbols) {
			symbols = getOwnPropertySymbols(from);
			for (var i = 0; i < symbols.length; i++) {
				if (propIsEnumerable.call(from, symbols[i])) {
					to[symbols[i]] = from[symbols[i]];
				}
			}
		}
	}

	return to;
};


/***/ }),

/***/ 568:
/***/ ((module) => {

"use strict";
module.exports = JSON.parse("{\"coreLocales\":[\"ar\",\"de\",\"el\",\"en\",\"es\",\"fr\",\"hu\",\"it\",\"ja\",\"ko\",\"nl\",\"pl\",\"pt-BR\",\"ru\",\"tr\",\"zh-CN\"],\"nativeNames\":{\"af\":\"Afrikaans\",\"am\":\"ኣማርኛ\",\"ar\":\"العربية\",\"as\":\"অসমীয়া\",\"ast\":\"Asturianu\",\"az\":\"Azərbaycan\",\"be\":\"Беларуская мова\",\"bg\":\"български\",\"bn\":\"বাংলা (ভারত)\",\"br\":\"ar brezhoneg\",\"bs\":\"bosanski\",\"ca\":\"català\",\"cs\":\"čeština\",\"cy\":\"Cymraeg\",\"da\":\"dansk\",\"de\":\"Deutsch\",\"dsb\":\"dolnoserbski\",\"el\":\"ελληνικά\",\"en\":\"English\",\"eo\":\"Esperanto\",\"es\":\"español\",\"et\":\"eesti keel\",\"eu\":\"euskara\",\"fa\":\"فارسى\",\"fi\":\"suomi\",\"fil\":\"Filipino\",\"fo\":\"føroyskt\",\"fr\":\"français\",\"fy\":\"Frysk\",\"gl\":\"Galego\",\"gu\":\"ગુજરાતી (ભારત)\",\"he\":\"עברית\",\"hi\":\"भारतीय\",\"hr\":\"Hrvatski\",\"hsb\":\"hornjoserbsce\",\"hu\":\"magyar\",\"hy\":\"Հայերեն\",\"id\":\"Bahasa Indonesia\",\"is\":\"íslenska\",\"it\":\"italiano\",\"ja\":\"日本語\",\"ka\":\"ქართული\",\"kab\":\"Taqbaylit\",\"kk\":\"Қазақ тілі\",\"kl\":\"kalaallisut\",\"kn\":\"ಕನ್ನಡ\",\"ko\":\"한국어\",\"lt\":\"lietuvių kalba\",\"lv\":\"latviešu valoda\",\"mg\":\"Malagasy\",\"mk\":\"македонски\",\"ml\":\"മലയാളം\",\"mr\":\"मराठी\",\"ms\":\"Melayu\",\"nb\":\"norsk\",\"ne\":\"नेपाली\",\"nl\":\"Nederlands\",\"nn\":\"norsk\",\"no\":\"norsk\",\"or\":\"ଓଡ଼ିଆ\",\"pa\":\"ਪੰਜਾਬੀ (ਭਾਰਤ)\",\"pl\":\"polski\",\"pt\":\"português\",\"rm\":\"rumantsch\",\"ro\":\"română\",\"ru\":\"Русский\",\"si\":\"සිංහල\",\"sk\":\"slovenčina\",\"sl\":\"slovenščina\",\"sq\":\"shqip\",\"sr\":\"српски\",\"sv\":\"svenska\",\"sw\":\"Kiswahili\",\"ta\":\"தமிழ்\",\"te\":\"తెలుగు\",\"th\":\"ภาษาไทย\",\"tr\":\"Türkçe\",\"uk\":\"українська\",\"ur\":\"اردو\",\"uz\":\"o’zbek\",\"vi\":\"Tiếng Việt\",\"zh\":\"中文\"}}");

/***/ }),

/***/ 9136:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var __webpack_unused_export__;
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */



const {notifications} = __webpack_require__(5430);
const {Prefs} = __webpack_require__(4776);
const {Stats} = __webpack_require__(5747);

const {coreLocales} = __webpack_require__(568);

const DELAY_IN_MS = 30 * 60 * 1000;
const MIN_BLOCKED = 55;

async function isAndroid()
{
  const platformInfo = await browser.runtime.getPlatformInfo();
  return platformInfo.os == "android";
}

exports.iB = async function initDay1Notification()
{
  if ((await isAndroid()) || Prefs.suppress_first_run_page)
    return;

  setTimeout(() =>
  {
    // We don't know what exactly the blocked count will be when
    // the notification will be shown but we expect it to be shown
    // immediately after it surpasses the threshold
    let blockedCount = Stats.blocked_total;
    if (blockedCount < MIN_BLOCKED)
    {
      blockedCount = MIN_BLOCKED;
    }

    const notification = {
      id: "day1",
      type: "normal",
      title: browser.i18n.getMessage("notification_day1_title", [blockedCount]),
      message: browser.i18n.getMessage("notification_day1_message"),
      links: ["abp:day1"],
      targets: [
        {blockedTotalMin: MIN_BLOCKED}
      ]
    };

    notifications.addNotification(notification);
    notifications.showNext();
  }, DELAY_IN_MS);
};

__webpack_unused_export__ = async() =>
{
  if (await isAndroid())
    return;

  const locale = browser.i18n.getUILanguage();

  // Due to a race condition, we cannot reliably target the notification to
  // only certain locales. Therefore we have to implement this check ourselves.
  // https://gitlab.com/eyeo/adblockplus/adblockpluschrome/issues/135
  notifications.showNotification({
    id: "problem",
    type: /^(?:de|fr)\b/.test(locale) ? "information" : null,
    message: browser.i18n.getMessage("notification_problem_message"),
    links: ["abp:problem"]
  });
};

__webpack_unused_export__ = async() =>
{
  if (await isAndroid())
    return;

  const locale = browser.i18n.getUILanguage();
  // Due to a race condition, we cannot reliably target the notification to
  // only certain locales. Therefore we have to implement this check ourselves.
  // https://gitlab.com/eyeo/adblockplus/adblockpluschrome/issues/135
  if (!coreLocales.includes(locale))
  {
    // That specific locale may not be part of our core languages. However,
    // the language it belongs to may be. Therefore we are able to show the
    // updates page with those translations instead.
    const [language] = locale.split("-");
    if (!coreLocales.includes(language))
      return;
  }

  notifications.showNotification({
    id: "updates",
    type: "information",
    title: browser.i18n.getMessage("notification_updates_title"),
    message: browser.i18n.getMessage("notification_updates_message"),
    links: ["abp:updates"]
  }, {ignorable: true});
};


/***/ }),

/***/ 6243:
/***/ ((module) => {

"use strict";
module.exports = self;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/create fake namespace object */
/******/ 	(() => {
/******/ 		// create a fake namespace object
/******/ 		// mode & 1: value is a module id, require it
/******/ 		// mode & 2: merge all properties of value into the ns
/******/ 		// mode & 4: return value when already ns object
/******/ 		// mode & 8|1: behave like require
/******/ 		__webpack_require__.t = function(value, mode) {
/******/ 			if(mode & 1) value = this(value);
/******/ 			if(mode & 8) return value;
/******/ 			if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 			var ns = Object.create(null);
/******/ 			__webpack_require__.r(ns);
/******/ 			var def = {};
/******/ 			if(mode & 2 && typeof value == 'object' && value) {
/******/ 				for(const key in value) def[key] = () => value[key];
/******/ 			}
/******/ 			def['default'] = () => value;
/******/ 			__webpack_require__.d(ns, def);
/******/ 			return ns;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
(() => {
"use strict";

// EXTERNAL MODULE: ./node_modules/assert/assert.js
var assert = __webpack_require__(8583);
// EXTERNAL MODULE: ./adblockpluscore/lib/filterClasses.js
var filterClasses = __webpack_require__(3217);
// EXTERNAL MODULE: ./adblockpluscore/lib/matcher.js
var matcher = __webpack_require__(6240);
// EXTERNAL MODULE: ./adblockpluscore/lib/contentTypes.js
var contentTypes = __webpack_require__(298);
// EXTERNAL MODULE: ./adblockpluscore/lib/filterNotifier.js
var filterNotifier = __webpack_require__(3326);
// EXTERNAL MODULE: ./lib/prefs.js
var prefs = __webpack_require__(4776);
// EXTERNAL MODULE: ./lib/url.js
var url = __webpack_require__(2315);
// EXTERNAL MODULE: ./lib/allowlisting.js + 1 modules
var allowlisting = __webpack_require__(8717);
// EXTERNAL MODULE: ./lib/messaging.js
var messaging = __webpack_require__(8198);
// EXTERNAL MODULE: ./build/templates/info.chrome.js.tmpl
var info_chrome_js = __webpack_require__(187);
// CONCATENATED MODULE: ./lib/filterComposer.js
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module filterComposer */

;








function isValidString(s)
{
  return s && s.indexOf("\0") == -1;
}

function escapeChar(chr)
{
  let code = chr.charCodeAt(0);

  // Control characters and leading digits must be escaped based on
  // their char code in CSS. Moreover, curly brackets aren't allowed
  // in elemhide filters, and therefore must be escaped based on their
  // char code as well.
  if (code <= 0x1F || code == 0x7F || /[\d{}]/.test(chr))
    return "\\" + code.toString(16) + " ";

  return "\\" + chr;
}

/**
 * Escapes a token (e.g. tag, id, class or attribute) to be used in
 * CSS selectors.
 *
 * @param {string} s
 * @return {string}
 * @static
 */
function escapeCSS(s)
{
  return s.replace(/^[\d-]|[^\w\-\u0080-\uFFFF]/g, escapeChar);
}

/**
 * Quotes a string to be used as attribute value in CSS selectors.
 *
 * @param {string} value
 * @return {string}
 * @static
 */
function quoteCSS(value)
{
  return '"' + value.replace(/["\\{}\x00-\x1F\x7F]/g, escapeChar) + '"';
}

function composeFilters(details)
{
  let {page, frame} = details;
  let filters = [];
  let selectors = [];

  if (!(0,allowlisting/* checkAllowlisted */.nk)(page, frame))
  {
    let docDomain = (0,url/* extractHostFromFrame */.I)(frame);

    // Add a blocking filter for each URL of the element that can be blocked
    if (details.url)
    {
      let typeMask;
      switch (details.tagName)
      {
        case "img":
        case "input":
          typeMask = contentTypes.contentTypes.IMAGE;
          break;
        case "audio":
        case "video":
          typeMask = contentTypes.contentTypes.MEDIA;
          break;
        case "frame":
        case "iframe":
          typeMask = contentTypes.contentTypes.SUBDOCUMENT;
          break;
        case "object":
        case "embed":
          typeMask = contentTypes.contentTypes.OBJECT;
          break;
      }

      let specificOnly = (0,allowlisting/* checkAllowlisted */.nk)(
        page, frame, null, contentTypes.contentTypes.GENERICBLOCK
      );
      let allowlisted = matcher.defaultMatcher.isAllowlisted(
        details.url, typeMask, docDomain,
        (0,allowlisting/* getKey */.km)(page, frame), specificOnly
      );

      if (!allowlisted)
      {
        let filterText = details.url.replace(/^[\w-]+:\/+(?:www\.)?/, "||");

        if (specificOnly)
          filterText += "$domain=" + docDomain;

        if (!filters.includes(filterText))
          filters.push(filterText);
      }
    }

    // If we couldn't generate any blocking filters, fallback to element hiding
    if (filters.length == 0 && !(0,allowlisting/* checkAllowlisted */.nk)(page, frame, null,
                                                 contentTypes.contentTypes.ELEMHIDE))
    {
      // Generate CSS selectors based on the element's "id" and
      // "class" attribute.
      if (isValidString(details.id))
        selectors.push("#" + escapeCSS(details.id));

      let classes = details.classes.filter(isValidString);
      if (classes.length > 0)
        selectors.push(classes.map(c => "." + escapeCSS(c)).join(""));

      // If there is a "src" attribute, specifiying a URL that we can't block,
      // generate a CSS selector matching the "src" attribute
      if (isValidString(details.src))
      {
        selectors.push(
          escapeCSS(details.tagName) + "[src=" + quoteCSS(details.src) + "]"
        );
      }

      // As last resort, if there is a "style" attribute, and we
      // couldn't generate any filters so far, generate a CSS selector
      // matching the "style" attribute
      if (isValidString(details.style) && selectors.length == 0 &&
          filters.length == 0)
      {
        selectors.push(
          escapeCSS(details.tagName) + "[style=" + quoteCSS(details.style) + "]"
        );
      }

      // Add an element hiding filter for each generated CSS selector
      for (let selector of selectors)
        filters.push(docDomain.replace(/^www\./, "") + "##" + selector);
    }
  }

  return {filters, selectors};
}

/**
 * Opens the "block element" dialog.
 *
 * @event "composer.openDialog"
 * @property {string[]} filters - The suggested filters to populate the dialog
 *                                with.
 * @returns {?number} dialog window's page ID
 */
messaging/* port.on */.N.on("composer.openDialog", async(message, sender) =>
{
  let newWindow = await browser.windows.create({
    url: browser.runtime.getURL("composer.html"),
    left: 50,
    top: 50,
    width: 600,
    height: 300,
    type: "popup"
  });
  let popupPageId = newWindow.tabs[0].id;

  let doInitAttempt = 0;
  let doInit = async() =>
  {
    doInitAttempt += 1;
    if (doInitAttempt > 30)
      return;

    try
    {
      let response = await browser.tabs.sendMessage(popupPageId, {
        type: "composer.dialog.init",
        sender: sender.page.id,
        filters: message.filters,
        highlights: message.highlights
      });

      // Sometimes sendMessage incorrectly reports a success on Firefox, so
      // we must check the response too.
      if (!response)
        throw new Error();

      // Sometimes Firefox <63 doesn't draw the window's contents[1]
      // initially, so we resize the window slightly as a workaround.
      // [1] - https://bugzilla.mozilla.org/show_bug.cgi?id=1408446
      if (info_chrome_js.application == "firefox")
      {
        await browser.windows.update(newWindow.id,
                                     {width: newWindow.width + 2});
      }
    }
    catch (e)
    {
      // Firefox sometimes sets the status for a window to "complete" before
      // it is ready to receive messages[1]. As a workaround we'll try again a
      // few times with a second delay.
      // [1] - https://bugzilla.mozilla.org/show_bug.cgi?id=1418655
      setTimeout(doInit, 100);
    }
  };

  if (newWindow.tabs[0].status != "complete")
  {
    let updateListener = async(tabId, changeInfo, tab) =>
    {
      if (tabId == popupPageId && changeInfo.status == "complete")
      {
        await browser.tabs.onUpdated.removeListener(updateListener);
        await doInit();
      }
    };
    await browser.tabs.onUpdated.addListener(updateListener);
  }
  else
  {
    await doInit();
  }

  let onRemoved = removedTabId =>
  {
    if (removedTabId == popupPageId)
    {
      browser.tabs.sendMessage(sender.page.id, {
        type: "composer.content.dialogClosed",
        popupId: popupPageId
      });
      browser.tabs.onRemoved.removeListener(onRemoved);
    }
  };
  browser.tabs.onRemoved.addListener(onRemoved);

  return popupPageId;
});

/**
 * @typedef {object} composerGetFiltersResult
 * @property {string[]} filters
 *   Array of blocking filters which should block the element.
 * @property {string[]} selectors
 *   Array of CSS selectors which should hide the element, a fallback if
 *   blocking wasn't possible.
 */

/**
 * Given the details of an element, return suggested filters or CSS selectors
 * to block or hide that element.
 *
 * @event "composer.getFilters"
 * @property {string} tagName - The element's tag name e.g. "a".
 * @property {string} id - The element's id attribute.
 * @property {string} [src] - The element's src attribute.
 * @property {string} [style] - The element's style attribute.
 * @property {string[]} classes - The element's class list.
 * @property {string?} url - The URL associated with the element.
 * @returns {composerGetFiltersResult}
 */
messaging/* port.on */.N.on("composer.getFilters", (message, sender) =>
{
  return composeFilters({
    tagName: message.tagName,
    id: message.id,
    src: message.src,
    style: message.style,
    classes: message.classes,
    url: message.url,
    page: sender.page,
    frame: sender.frame
  });
});

/**
 * Forwards the given message payload to the given page ID, allowing a content
 * script to send a message to another page's content script.
 *
 * @event "composer.forward"
 * @property {number} targetPageId The ID of the page to forward the message.
 * @property {object} payload The contents of the message to forward.
 * @returns The response from the forwarded message's recipient.
 */
messaging/* port.on */.N.on("composer.forward", (msg, sender) =>
{
  let targetPage;
  if (msg.targetPageId)
    targetPage = ext.getPage(msg.targetPageId);
  else
    targetPage = sender.page;
  if (targetPage)
  {
    msg.payload.sender = sender.page.id;
    return browser.tabs.sendMessage(targetPage.id, msg.payload);
  }
});

ext.pages.onLoading.addListener(page =>
{
  // When tabs start loading we send them a message to ensure that the state
  // of the "block element" tool is reset. This is necessary since Firefox will
  // sometimes cache the state of a tab when the user navigates back / forward,
  // which includes the state of the "block element" tool.
  // Since sending this message will often fail (e.g. for new tabs which have
  // just been opened) we catch and ignore any exception thrown.
  browser.tabs.sendMessage(
    page.id, {type: "composer.content.finished"}
  ).catch(() => {});
});


/* Context menu and popup button */

let readyActivePages = new ext.PageMap();
let showingContextMenu = false;

if ("contextMenus" in browser)
{
  browser.contextMenus.onClicked.addListener((itemInfo, tab) =>
  {
    if (itemInfo.menuItemId == "block_element")
    {
      browser.tabs.sendMessage(
        tab.id, {type: "composer.content.contextMenuClicked"}
      );
    }
  });
}

function showOrHideContextMenu(activePage)
{
  // Firefox for Android does not support browser.contextMenus.
  // https://bugzilla.mozilla.org/show_bug.cgi?id=1269062
  if (!("contextMenus" in browser))
    return;

  let shouldShowContextMenu = prefs.Prefs.shouldShowBlockElementMenu &&
                                readyActivePages.get(activePage);

  if (shouldShowContextMenu && !showingContextMenu)
  {
    browser.contextMenus.create({
      id: "block_element",
      title: browser.i18n.getMessage("block_element"),
      contexts: ["image", "video", "audio"]
    });
    showingContextMenu = true;
  }
  else if (!shouldShowContextMenu && showingContextMenu)
  {
    browser.contextMenus.remove("block_element");
    showingContextMenu = false;
  }
}

async function updateContextMenu(updatedPage)
{
  let tabs = await browser.tabs.query({active: true, lastFocusedWindow: true});
  if (tabs.length > 0 && (!updatedPage || updatedPage.id == tabs[0].id))
    showOrHideContextMenu(updatedPage || new ext.Page(tabs[0]));
}

browser.tabs.onActivated.addListener(activeInfo =>
{
  showOrHideContextMenu(new ext.Page({id: activeInfo.tabId}));
});

// Firefox for Android does not support browser.windows.
// https://issues.adblockplus.org/ticket/5347
if ("windows" in browser)
{
  browser.windows.onFocusChanged.addListener(windowId =>
  {
    if (windowId != browser.windows.WINDOW_ID_NONE)
      updateContextMenu();
  });
}

filterNotifier.filterNotifier.on("page.AllowlistingStateRevalidate", (page, filter) =>
{
  if (readyActivePages.has(page))
  {
    readyActivePages.set(page, !filter);
    updateContextMenu(page);
  }
});

prefs.Prefs.on("shouldShowBlockElementMenu", () =>
{
  updateContextMenu();
});

/**
 * Returns true if the given page is ready for the "block element" tool, false
 * otherwise.
 *
 * @event "composer.isPageReady"
 * @property {number} pageId
 * @returns {boolean}
 */
messaging/* port.on */.N.on("composer.isPageReady", (message, sender) =>
{
  return readyActivePages.has(new ext.Page({id: message.pageId}));
});

/**
 * Marks the page which sent this message as being ready for the
 * "block element" tool, but only if the page isn't allowlisted.
 *
 * @event "composer.ready"
 * @returns {boolean}
 */
messaging/* port.on */.N.on("composer.ready", (message, sender) =>
{
  readyActivePages.set(sender.page, !(0,allowlisting/* checkAllowlisted */.nk)(sender.page));
  updateContextMenu(sender.page);
});

// CONCATENATED MODULE: ./test/unit-tests/cssEscaping.js
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

;



describe("CSS escaping", () =>
{
  it("escapes CSS", () =>
  {
    function testSelector(opts)
    {
      let mustMatch = opts.mustMatch !== false;
      let doc = document.implementation.createHTMLDocument();

      let style = doc.createElement("style");
      doc.documentElement.appendChild(style);
      style.sheet.insertRule(opts.selector + " {}", 0);

      let element;
      try
      {
        element = doc.createElement(opts.tagName || "div");
      }
      catch (e)
      {
        // Some characters we are going to test can not occur in tag names,
        // but we still have to make sure that no exception is thrown when
        // calling .querySelector() and .insertRule()
        element = null;
        mustMatch = false;
      }

      if (element)
      {
        for (let attr in opts.attributes)
          element.setAttribute(attr, opts.attributes[attr]);

        doc.documentElement.appendChild(element);
      }

      let foundElement = doc.querySelector(opts.selector);
      let filter = filterClasses.Filter.fromText("##" + opts.selector);

      if (!(filter instanceof filterClasses.ElemHideFilter))
        assert.ok(false, opts.selector + " (not allowed in elemhide filters)");
      else if (mustMatch)
        assert.equal(foundElement, element, opts.selector);
      else
        assert.ok(true, opts.selector);
    }

    function testEscape(s)
    {
      testSelector({
        selector: escapeCSS(s),
        tagName: s
      });

      testSelector({
        selector: "#" + escapeCSS(s),
        attributes: {id: s}
      });

      testSelector({
        selector: "." + escapeCSS(s),
        attributes: {class: s},

        // Whitespace characters split the class name, hence the selector
        // won't match. But we still have to make sure that no exception
        // is thrown when calling .querySelector() and .insertRule()
        mustMatch: !/\s/.test(s)
      });

      testSelector({
        selector: "[foo=" + quoteCSS(s) + "]",
        attributes: {foo: s}
      });
    }

    for (let i = 1; i < 0x80; i++)
    {
      let chr = String.fromCharCode(i);

      // Make sure that all ASCII characters are correctly escaped.
      testEscape(chr);

      // Some characters are only escaped when in the first positon,
      // so we still have to make sure that everything is correctly escaped
      // in subsequent positions.
      testEscape("x" + chr);

      // Leading dashes must be escaped, when followed by certain characters.
      testEscape("-" + chr);
    }

    // Test some non-ASCII characters. However, those shouldn't
    // require escaping.
    testEscape("\uD83D\uDE3B\u2665\u00E4");
  });
});

})();

(() => {
"use strict";
/* harmony import */ var assert__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8583);
/* harmony import */ var _lib_prefs_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4776);
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

;


describe("Preferences", () =>
{
  function afterWrite(prefKey)
  {
    return Promise.race([
      new Promise((resolve, reject) =>
      {
        let onChange = (changes, area) =>
        {
          if (area == "local" && prefKey in changes)
          {
            browser.storage.onChanged.removeListener(onChange);
            resolve();
          }
        };
        browser.storage.onChanged.addListener(onChange);
      }),
      // We sleep 500ms in case the onChange event doesn't fire when expected.
      // Firefox 66 has a bug whereby the event doesn't fire for falsey values.
      // https://bugzilla.mozilla.org/show_bug.cgi?id=1541449
      new Promise(r => setTimeout(r, 500))
    ]);
  }

  async function performStorageTests(prefName, prefKey, defaultValue, newValue,
                                     tests)
  {
    let [method, whichValue] = tests.shift();
    let value = whichValue == "default" ? defaultValue : newValue;

    let items = await browser.storage.local.get(prefKey);
    let expectingWrite = typeof defaultValue == "object" ||
                         prefKey in items ||
                         whichValue == "new";
    if (expectingWrite)
      afterWrite(prefKey);

    if (method == "property")
      _lib_prefs_js__WEBPACK_IMPORTED_MODULE_1__.Prefs[prefName] = value;
    else
      _lib_prefs_js__WEBPACK_IMPORTED_MODULE_1__.Prefs.set(prefName, value);

    assert__WEBPACK_IMPORTED_MODULE_0__.deepEqual(_lib_prefs_js__WEBPACK_IMPORTED_MODULE_1__.Prefs[prefName], value,
                     `Assigned Prefs['${prefName}'] ${whichValue} value`);

    items = await browser.storage.local.get(prefKey);
    if (whichValue == "default" && typeof defaultValue != "object")
    {
      assert__WEBPACK_IMPORTED_MODULE_0__.equal(prefKey in items, false,
                   `${prefKey} shouldn't be present in stoage.local`);
    }
    else
    {
      assert__WEBPACK_IMPORTED_MODULE_0__.equal(prefKey in items, true,
                   `${prefKey} should be present in stoage.local`);

      assert__WEBPACK_IMPORTED_MODULE_0__.deepEqual(items[prefKey], value,
                       `${prefKey} in storage.local should have the value
                        ${JSON.stringify(value)}`);
    }

    if (tests.length)
    {
      await performStorageTests(prefName, prefKey, defaultValue, newValue,
                                tests);
    }
  }

  async function testPrefStorage(prefName, defaultValue, newValue)
  {
    let prefKey = `pref:${prefName}`;
    let tests = [["property", "default"],
                 ["property", "new"],
                 ["property", "default"],
                 ["set", "new"],
                 ["set", "default"]];

    let backupValue = _lib_prefs_js__WEBPACK_IMPORTED_MODULE_1__.Prefs[prefName];
    try
    {
      await performStorageTests(prefName, prefKey, defaultValue, newValue,
                                tests);
    }
    finally
    {
      _lib_prefs_js__WEBPACK_IMPORTED_MODULE_1__.Prefs.set(prefName, backupValue);
    }
  }

  it("stores numerical preferences", async() =>
  {
    await testPrefStorage("patternsbackups", 0, 12);
  });

  it("stores boolean preferences", async() =>
  {
    await testPrefStorage("savestats", false, true);
  });

  it("stores string preferences", async() =>
  {
    let defaultValue = "https://notification.adblockplus.org/notification.json";
    let newValue = "https://notification.adblockplus.org/foo\u1234bar.json";

    await testPrefStorage("notificationurl", defaultValue, newValue);
  });

  it("stores object preferences", async() =>
  {
    await testPrefStorage("notificationdata", {}, {foo: 1, bar: 2});
  });
});

})();

(() => {
"use strict";

// EXTERNAL MODULE: ./node_modules/assert/assert.js
var assert = __webpack_require__(8583);
// EXTERNAL MODULE: ./lib/subscriptionInit.js + 3 modules
var subscriptionInit = __webpack_require__(5728);
// CONCATENATED MODULE: ./test/unit-tests/resources/subscriptions.js
/* harmony default export */ const subscriptions = ([
  {
    title: "EasyList Czech and Slovak+EasyList",
    url: "https://easylist-downloads.adblockplus.org/easylistczechslovak+easylist.txt",
    homepage: "https://adblock.sk/",
    languages: [
      "cs",
      "sk"
    ],
    type: "ads"
  },
  {
    title: "EasyList",
    url: "https://easylist-downloads.adblockplus.org/easylist.txt",
    homepage: "https://easylist.to/",
    languages: [
      "en"
    ],
    type: "ads"
  },
  {
    title: "EasyList Dutch+EasyList",
    url: "https://easylist-downloads.adblockplus.org/easylistdutch+easylist.txt",
    homepage: "https://easylist.to/",
    languages: [
      "nl"
    ],
    type: "ads"
  },
  {
    title: "EasyList Germany+EasyList",
    url: "https://easylist-downloads.adblockplus.org/easylistgermany+easylist.txt",
    homepage: "https://easylist.to/",
    languages: [
      "de"
    ],
    type: "ads"
  },
  {
    title: "EasyList Italy+EasyList",
    url: "https://easylist-downloads.adblockplus.org/easylistitaly+easylist.txt",
    homepage: "https://easylist.to/",
    languages: [
      "it"
    ],
    type: "ads"
  },
  {
    title: "Liste FR+EasyList",
    url: "https://easylist-downloads.adblockplus.org/liste_fr+easylist.txt",
    homepage: "https://forums.lanik.us/viewforum.php?f=91",
    languages: [
      "fr"
    ],
    type: "ads"
  },
  {
    title: "RuAdList+EasyList",
    url: "https://easylist-downloads.adblockplus.org/ruadlist+easylist.txt",
    homepage: "https://forums.lanik.us/viewforum.php?f=102",
    languages: [
      "ru",
      "uk"
    ],
    type: "ads"
  },
  {
    title: "ABP filters",
    url: "https://easylist-downloads.adblockplus.org/abp-filters-anti-cv.txt",
    homepage: "https://github.com/abp-filters/abp-filters-anti-cv",
    languages: [
      "de",
      "en"
    ],
    type: "circumvention"
  },
  {
    title: "ABP Anti-Circumvention list Fr",
    url: "https://easylist-downloads.adblockplus.org/abp-filters-anti-cv-fr.txt",
    homepage: "https://github.com/abp-filters/abp-filters-anti-cv",
    languages: [
      "fr"
    ],
    type: "circumvention"
  },
  {
    title: "EasyPrivacy",
    url: "https://easylist-downloads.adblockplus.org/easyprivacy.txt",
    homepage: "https://easylist.to/",
    type: "privacy"
  },
  {
    title: "Fanboy's Social Blocking List",
    url: "https://easylist-downloads.adblockplus.org/fanboy-social.txt",
    homepage: "https://easylist.to/",
    type: "social"
  }
]);

// CONCATENATED MODULE: ./test/unit-tests/subscriptionInit.js
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

;



describe("Subscription initialization", () =>
{
  let origGetUILanguage;
  let language;

  before(() =>
  {
    origGetUILanguage = browser.i18n.getUILanguage;
    browser.i18n.getUILanguage = () => language;
  });

  after(() =>
  {
    browser.i18n.getUILanguage = origGetUILanguage;
  });

  it("chooses default filter subscriptions", () =>
  {
    language = "en";

    let subs = (0,subscriptionInit/* chooseFilterSubscriptions */.gj)(subscriptions);
    assert.ok(subs);

    let sub1 = subs.find(sub => sub.type == "circumvention");
    assert.ok(sub1);
    let sub2 = subs.find(sub => sub.type == "ads");
    assert.ok(sub1);

    assert.deepEqual(sub1.languages, ["de", "en"]);
    assert.deepEqual(sub2.languages, ["en"]);
  });

  it("falls back to default language", () =>
  {
    language = "sl";

    let subs = (0,subscriptionInit/* chooseFilterSubscriptions */.gj)(subscriptions);
    assert.ok(subs);
    let sub1 = subs.find(sub => sub.type == "ads");
    assert.ok(sub1);
    assert.deepEqual(sub1.languages, ["en"]);
  });
});

})();

(() => {
"use strict";
/* harmony import */ var assert__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8583);
/* harmony import */ var _adblockpluscore_lib_analytics_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8671);
/* harmony import */ var _adblockpluscore_lib_filterStorage_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(9302);
/* harmony import */ var _lib_prefs_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(4776);
/* harmony import */ var _lib_uninstall_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(5529);
/* harmony import */ var info__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(187);
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

;






const realSetUninstallURL = browser.runtime.setUninstallURL;

let uninstallURL;
let urlParams = () => new URL(uninstallURL).search.substr(1).split("&");

describe("Uninstall URL", () =>
{
  beforeEach(() =>
  {
    browser.runtime.setUninstallURL = url => uninstallURL = url;
  });
  afterEach(() =>
  {
    browser.runtime.setUninstalLURL = realSetUninstallURL;
  });

  it("adds parameters to uninstall URL", () =>
  {
    const expectedParams = [
      ["an", info__WEBPACK_IMPORTED_MODULE_5__.addonName],
      ["av", info__WEBPACK_IMPORTED_MODULE_5__.addonVersion],
      ["ap", info__WEBPACK_IMPORTED_MODULE_5__.application],
      ["apv", info__WEBPACK_IMPORTED_MODULE_5__.applicationVersion],
      ["p", info__WEBPACK_IMPORTED_MODULE_5__.platform],
      ["fv", _adblockpluscore_lib_analytics_js__WEBPACK_IMPORTED_MODULE_1__.analytics.getFirstVersion()],
      ["pv", info__WEBPACK_IMPORTED_MODULE_5__.platformVersion],
      ["ndc", "0"],
      ["c", "0"],
      ["s", "3"]
    ];
    (0,_lib_uninstall_js__WEBPACK_IMPORTED_MODULE_4__.setUninstallURL)();

    let params = urlParams();
    for (let [name, value] of expectedParams)
    {
      value = encodeURIComponent(value);
      assert__WEBPACK_IMPORTED_MODULE_0__.ok(
        params.includes(`${name}=${value}`),
        `The parameter '${name}' has the expected value '${value}'`
      );
    }
  });

  it("limits uninstall URL length", () =>
  {
    const maxLength = 255;
    (0,_lib_uninstall_js__WEBPACK_IMPORTED_MODULE_4__.setUninstallURL)();
    assert__WEBPACK_IMPORTED_MODULE_0__.ok(
      uninstallURL.length <= maxLength,
      `uninstall URL is not longer than ${maxLength} characters`
    );
  });

  describe("Subscription parameter", () =>
  {
    let initialSubscriptions;

    beforeEach(() =>
    {
      browser.runtime.setUninstallURL = url => uninstallURL = url;
      initialSubscriptions = Array.from(_adblockpluscore_lib_filterStorage_js__WEBPACK_IMPORTED_MODULE_2__.filterStorage.subscriptions());
    });
    afterEach(() =>
    {
      for (let subscription of initialSubscriptions)
        _adblockpluscore_lib_filterStorage_js__WEBPACK_IMPORTED_MODULE_2__.filterStorage.addSubscription(subscription);
      browser.runtime.setUninstalLURL = realSetUninstallURL;
    });

    it("produces parameter s=0", () =>
    {
      for (let subscription of initialSubscriptions)
        _adblockpluscore_lib_filterStorage_js__WEBPACK_IMPORTED_MODULE_2__.filterStorage.removeSubscription(subscription);
      (0,_lib_uninstall_js__WEBPACK_IMPORTED_MODULE_4__.setUninstallURL)();
      assert__WEBPACK_IMPORTED_MODULE_0__.ok(
        urlParams().includes("s=0"),
        "subscription parameter 's' has the expected value '0'"
      );
    });

    it("produces parameter s=1", () =>
    {
      for (let subscription of initialSubscriptions)
      {
        if (subscription.type != "ads")
          _adblockpluscore_lib_filterStorage_js__WEBPACK_IMPORTED_MODULE_2__.filterStorage.removeSubscription(subscription);
      }
      (0,_lib_uninstall_js__WEBPACK_IMPORTED_MODULE_4__.setUninstallURL)();
      assert__WEBPACK_IMPORTED_MODULE_0__.ok(
        urlParams().includes("s=1"),
        "subscription parameter 's' has the expected value '1'" + urlParams()
      );
    });

    it("produces parameter s=2", () =>
    {
      for (let subscription of initialSubscriptions)
      {
        if (subscription.url != _lib_prefs_js__WEBPACK_IMPORTED_MODULE_3__.Prefs.subscriptions_exceptionsurl)
          _adblockpluscore_lib_filterStorage_js__WEBPACK_IMPORTED_MODULE_2__.filterStorage.removeSubscription(subscription);
      }
      (0,_lib_uninstall_js__WEBPACK_IMPORTED_MODULE_4__.setUninstallURL)();
      assert__WEBPACK_IMPORTED_MODULE_0__.ok(
        urlParams().includes("s=2"),
        "subscription parameter 's' has the expected value '2'" + urlParams()
      );
    });
  });
});

})();

(() => {
"use strict";
/* harmony import */ var assert__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8583);
/* harmony import */ var _lib_url_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2315);
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

;


describe("URL/host tools", () =>
{
  it("extracts hostname from frame", () =>
  {
    function testFrameHostname(hierarchy, expectedHostname, message)
    {
      let frame = null;

      for (let url of hierarchy)
        frame = {parent: frame, url: new URL(url)};

      assert__WEBPACK_IMPORTED_MODULE_0__.equal((0,_lib_url_js__WEBPACK_IMPORTED_MODULE_1__/* .extractHostFromFrame */ .I)(frame), expectedHostname, message);
    }

    testFrameHostname(["http://example.com/"], "example.com", "single frame");
    testFrameHostname(["http://example.com/", "http://example.org/"],
                      "example.org", "with parent frame");
    testFrameHostname(["http://example.com/", "data:text/plain,foo"],
                      "example.com", "data: URL, hostname in parent");
    testFrameHostname(["http://example.com/", "about:blank", "about:blank"],
                      "example.com", "about:blank, hostname in ancestor");
    testFrameHostname(["about:blank", "about:blank"], "",
                      "about:blank, no hostname");
    testFrameHostname(["http://xn--f-1gaa.com/"], "xn--f-1gaa.com",
                      "with punycode");
    testFrameHostname(["http://user:password@example.com/"], "example.com",
                      "with auth credentials");
  });
});

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdHMvdW5pdC10ZXN0cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vYWRibG9ja3BsdXNjb3JlL2xpYi9hbmFseXRpY3MuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9hZGJsb2NrcGx1c2NvcmUvbGliL2NhY2hpbmcuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9hZGJsb2NrcGx1c2NvcmUvbGliL2NvbW1vbi5qcyIsIndlYnBhY2s6Ly9hZGJsb2NrcGx1c2Nocm9tZS8uL2FkYmxvY2twbHVzY29yZS9saWIvY29udGVudFR5cGVzLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vYWRibG9ja3BsdXNjb3JlL2xpYi9kb3dubG9hZGVyLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vYWRibG9ja3BsdXNjb3JlL2xpYi9lbGVtSGlkZS5qcyIsIndlYnBhY2s6Ly9hZGJsb2NrcGx1c2Nocm9tZS8uL2FkYmxvY2twbHVzY29yZS9saWIvZWxlbUhpZGVFbXVsYXRpb24uanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9hZGJsb2NrcGx1c2NvcmUvbGliL2VsZW1IaWRlRXhjZXB0aW9ucy5qcyIsIndlYnBhY2s6Ly9hZGJsb2NrcGx1c2Nocm9tZS8uL2FkYmxvY2twbHVzY29yZS9saWIvZXZlbnRzLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vYWRibG9ja3BsdXNjb3JlL2xpYi9maWx0ZXJDbGFzc2VzLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vYWRibG9ja3BsdXNjb3JlL2xpYi9maWx0ZXJFbmdpbmUuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9hZGJsb2NrcGx1c2NvcmUvbGliL2ZpbHRlckxpc3RlbmVyLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vYWRibG9ja3BsdXNjb3JlL2xpYi9maWx0ZXJOb3RpZmllci5qcyIsIndlYnBhY2s6Ly9hZGJsb2NrcGx1c2Nocm9tZS8uL2FkYmxvY2twbHVzY29yZS9saWIvZmlsdGVyU3RhdGUuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9hZGJsb2NrcGx1c2NvcmUvbGliL2ZpbHRlclN0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9hZGJsb2NrcGx1c2NvcmUvbGliL2ZpbHRlcnNCeURvbWFpbi5qcyIsIndlYnBhY2s6Ly9hZGJsb2NrcGx1c2Nocm9tZS8uL2FkYmxvY2twbHVzY29yZS9saWIvaW5pUGFyc2VyLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vYWRibG9ja3BsdXNjb3JlL2xpYi9qc2JuLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vYWRibG9ja3BsdXNjb3JlL2xpYi9tYXRjaGVyLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vYWRibG9ja3BsdXNjb3JlL2xpYi9ub3RpZmljYXRpb25zLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vYWRibG9ja3BsdXNjb3JlL2xpYi9wYXR0ZXJucy5qcyIsIndlYnBhY2s6Ly9hZGJsb2NrcGx1c2Nocm9tZS8uL2FkYmxvY2twbHVzY29yZS9saWIvcG9seWZpbGwuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9hZGJsb2NrcGx1c2NvcmUvbGliL3Byb2ZpbGVyLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vYWRibG9ja3BsdXNjb3JlL2xpYi9yZWNvbW1lbmRhdGlvbnMuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9hZGJsb2NrcGx1c2NvcmUvbGliL3JzYS5qcyIsIndlYnBhY2s6Ly9hZGJsb2NrcGx1c2Nocm9tZS8uL2FkYmxvY2twbHVzY29yZS9saWIvcnVzaGEuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9hZGJsb2NrcGx1c2NvcmUvbGliL3NuaXBwZXRzLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vYWRibG9ja3BsdXNjb3JlL2xpYi9zdWJzY3JpcHRpb25DbGFzc2VzLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vYWRibG9ja3BsdXNjb3JlL2xpYi9zeW5jaHJvbml6ZXIuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9hZGJsb2NrcGx1c2NvcmUvbGliL3RpbWUuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9hZGJsb2NrcGx1c2NvcmUvbGliL3VybC5qcyIsIndlYnBhY2s6Ly9hZGJsb2NrcGx1c2Nocm9tZS8uL2FkYmxvY2twbHVzY29yZS9saWIvdmVyc2lvbnMuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9idWlsZC90ZW1wbGF0ZXMvaW5mby5jaHJvbWUuanMudG1wbCIsIndlYnBhY2s6Ly9hZGJsb2NrcGx1c2Nocm9tZS8uL2xpYi9oaXRMb2dnZXIuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9saWIvYWxsb3dsaXN0aW5nLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vbGliL2Jyb3dzZXJBY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9saWIvaW8uanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9saWIvbWVzc2FnaW5nLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vbGliL3ByZWZzLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vbGliL3N0YXRzLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vbGliL2ljb24uanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9saWIvb3B0aW9ucy5qcyIsIndlYnBhY2s6Ly9hZGJsb2NrcGx1c2Nocm9tZS8uL2xpYi9ub3RpZmljYXRpb25IZWxwZXIuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9saWIvc3Vic2NyaXB0aW9uSW5pdC5qcyIsIndlYnBhY2s6Ly9hZGJsb2NrcGx1c2Nocm9tZS8uL2xpYi91bmluc3RhbGwuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9saWIvdXJsLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vbm9kZV9tb2R1bGVzL2Fzc2VydC9hc3NlcnQuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9ub2RlX21vZHVsZXMvYXNzZXJ0L25vZGVfbW9kdWxlcy9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4vbm9kZV9tb2R1bGVzL2Fzc2VydC9ub2RlX21vZHVsZXMvdXRpbC9zdXBwb3J0L2lzQnVmZmVyQnJvd3Nlci5qcyIsIndlYnBhY2s6Ly9hZGJsb2NrcGx1c2Nocm9tZS8uL25vZGVfbW9kdWxlcy9hc3NlcnQvbm9kZV9tb2R1bGVzL3V0aWwvdXRpbC5qcyIsIndlYnBhY2s6Ly9hZGJsb2NrcGx1c2Nocm9tZS8uL25vZGVfbW9kdWxlcy9vYmplY3QtYXNzaWduL2luZGV4LmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lLy4uL2xpYi9ub3RpZmljYXRpb25zLmpzIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lL2V4dGVybmFsIFwic2VsZlwiIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lL3dlYnBhY2svcnVudGltZS9jcmVhdGUgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9hZGJsb2NrcGx1c2Nocm9tZS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2FkYmxvY2twbHVzY2hyb21lL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi9saWIvZmlsdGVyQ29tcG9zZXIuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi90ZXN0L3VuaXQtdGVzdHMvY3NzRXNjYXBpbmcuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi90ZXN0L3VuaXQtdGVzdHMvcHJlZnMuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi90ZXN0L3VuaXQtdGVzdHMvcmVzb3VyY2VzL3N1YnNjcmlwdGlvbnMuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi90ZXN0L3VuaXQtdGVzdHMvc3Vic2NyaXB0aW9uSW5pdC5qcyIsIndlYnBhY2s6Ly9hZGJsb2NrcGx1c2Nocm9tZS8uL3Rlc3QvdW5pdC10ZXN0cy91bmluc3RhbGwuanMiLCJ3ZWJwYWNrOi8vYWRibG9ja3BsdXNjaHJvbWUvLi90ZXN0L3VuaXQtdGVzdHMvdXJsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIEFkYmxvY2sgUGx1cyA8aHR0cHM6Ly9hZGJsb2NrcGx1cy5vcmcvPixcclxuICogQ29weXJpZ2h0IChDKSAyMDA2LXByZXNlbnQgZXllbyBHbWJIXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XHJcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIGFzXHJcbiAqIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLlxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcclxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcclxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxyXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKlxyXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxyXG4gKiBhbG9uZyB3aXRoIEFkYmxvY2sgUGx1cy4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cclxuICovXHJcblxyXG4vKiogQG1vZHVsZSAqL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5jb25zdCB7UHJlZnN9ID0gcmVxdWlyZShcInByZWZzXCIpO1xyXG5cclxuY29uc3Qge01JTExJU19JTl9EQVl9ID0gcmVxdWlyZShcIi4vdGltZVwiKTtcclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBhIHZlcnNpb24gc3RyaW5nIGludG8gYSBgRGF0ZWAgb2JqZWN0IHdpdGggbWludXRlLWxldmVsIHByZWNpc2lvbi5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHZlcnNpb24gVGhlIHZlcnNpb24gc3RyaW5nIGluIGBZWVlZTU1ERFtISFtNTV1dYCBmb3JtYXQgb3JcclxuICogICBqdXN0IHRoZSB2YWx1ZSBgXCIwXCJgLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7RGF0ZX0gQSBgRGF0ZWAgb2JqZWN0LiBJZiB0aGUgdmFsdWUgb2YgYHZlcnNpb25gIGlzIGBcIjBcImAsIHRoZVxyXG4gKiAgIHJldHVybmVkIHZhbHVlIHJlcHJlc2VudHMgdGhlIFVuaXggZXBvY2guXHJcbiAqL1xyXG5mdW5jdGlvbiB2ZXJzaW9uVG9EYXRlKHZlcnNpb24pXHJcbntcclxuICBpZiAodmVyc2lvbiA9PSBcIjBcIilcclxuICAgIHJldHVybiBuZXcgRGF0ZSgwKTtcclxuXHJcbiAgbGV0IHllYXIgPSB2ZXJzaW9uLnN1YnN0cmluZygwLCA0KTtcclxuICBsZXQgbW9udGggPSB2ZXJzaW9uLnN1YnN0cmluZyg0LCA2KTtcclxuICBsZXQgZGF0ZSA9IHZlcnNpb24uc3Vic3RyaW5nKDYsIDgpO1xyXG5cclxuICBsZXQgaG91cnMgPSB2ZXJzaW9uLnN1YnN0cmluZyg4LCAxMCkgfHwgXCIwMFwiO1xyXG4gIGxldCBtaW51dGVzID0gdmVyc2lvbi5zdWJzdHJpbmcoMTAsIDEyKSB8fCBcIjAwXCI7XHJcblxyXG4gIC8vIFRoZSBpbnB1dCBpcyBuZWFybHkgYSB2YWxpZCBJU08gODYwMSB0aW1lc3RhbXAsIGV4Y2VwdCBmb3IgdGhlIGh5cGhlbnMsXHJcbiAgLy8gdGhlIGNvbG9uLCBhbmQgdGhlIHNwZWNpYWwgY2hhcmFjdGVycyBUIGFuZCBaLiBXZSBjYW4gdXNlIHRoZSB0aW1lc3RhbXBcclxuICAvLyBzdHJpbmcgdmVyc2lvbiBvZiB0aGUgRGF0ZSBjb25zdHJ1Y3RvciBkaXJlY3RseS4gQWx0ZXJuYXRpdmVseSwgd2UgY291bGRcclxuICAvLyB1c2UgRGF0ZS5VVEMoKSwgYnV0IHRoYXQgd291bGQgcmVxdWlyZSBzb21lIGFkanVzdG1lbnQgdG8gdGhlIHZhbHVlc1xyXG4gIC8vIChlLmcuIHRoZSBtb250aCBtdXN0IGJlIDAtYmFzZWQpLlxyXG4gIHJldHVybiBuZXcgRGF0ZShgJHt5ZWFyfS0ke21vbnRofS0ke2RhdGV9VCR7aG91cnN9OiR7bWludXRlc31aYCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdHJpcHMgdGhlIHZhbHVlIG9mIHRoZSBgZmlyc3RWZXJzaW9uYCBwYXJhbWV0ZXIgZG93biB0byBlaXRoZXIgYFlZWVlNTUREYCxcclxuICogYFlZWVlNTWAsIG9yIGBZWVlZYCBkZXBlbmRpbmcgb24gaXRzIGRpc3RhbmNlIGZyb20gdGhlIHZhbHVlIG9mIHRoZVxyXG4gKiBgY3VycmVudFZlcnNpb25gIHBhcmFtZXRlci5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpcnN0VmVyc2lvbiBBIHZlcnNpb24gc3RyaW5nIGluIGBZWVlZTU1ERFtISFtNTV1dYCBmb3JtYXRcclxuICogICB3aXRoIGFuIG9wdGlvbmFsIGBcIi1FXCJgIHN1ZmZpeCBvciBqdXN0IGBcIjBcImAgb3IgYFwiMC1FXCJgLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gY3VycmVudFZlcnNpb24gQSB2ZXJzaW9uIHN0cmluZyBpbiBgWVlZWU1NRERbSEhbTU1dXWAgZm9ybWF0XHJcbiAqICAgb3IganVzdCBgXCIwXCJgLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7P3N0cmluZ31cclxuICovXHJcbmZ1bmN0aW9uIHN0cmlwRmlyc3RWZXJzaW9uKGZpcnN0VmVyc2lvbiwgY3VycmVudFZlcnNpb24pXHJcbntcclxuICBsZXQgZUZsYWcgPSBmaXJzdFZlcnNpb24uZW5kc1dpdGgoXCItRVwiKTtcclxuICBpZiAoZUZsYWcpXHJcbiAgICBmaXJzdFZlcnNpb24gPSBmaXJzdFZlcnNpb24uc2xpY2UoMCwgLTIpO1xyXG5cclxuICB0cnlcclxuICB7XHJcbiAgICBsZXQgZmlyc3REYXRlID0gdmVyc2lvblRvRGF0ZShmaXJzdFZlcnNpb24pO1xyXG4gICAgbGV0IGN1cnJlbnREYXRlID0gdmVyc2lvblRvRGF0ZShjdXJyZW50VmVyc2lvbik7XHJcblxyXG4gICAgaWYgKGN1cnJlbnREYXRlIC0gZmlyc3REYXRlID4gMzY1ICogTUlMTElTX0lOX0RBWSlcclxuICAgICAgZmlyc3RWZXJzaW9uID0gZmlyc3RWZXJzaW9uLnN1YnN0cmluZygwLCA0KTtcclxuICAgIGVsc2UgaWYgKGN1cnJlbnREYXRlIC0gZmlyc3REYXRlID4gMzAgKiBNSUxMSVNfSU5fREFZKVxyXG4gICAgICBmaXJzdFZlcnNpb24gPSBmaXJzdFZlcnNpb24uc3Vic3RyaW5nKDAsIDYpO1xyXG4gICAgZWxzZVxyXG4gICAgICBmaXJzdFZlcnNpb24gPSBmaXJzdFZlcnNpb24uc3Vic3RyaW5nKDAsIDgpO1xyXG4gIH1cclxuICBjYXRjaCAoZXJyb3IpXHJcbiAge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBpZiAoZUZsYWcpXHJcbiAgICBmaXJzdFZlcnNpb24gKz0gXCItRVwiO1xyXG5cclxuICByZXR1cm4gZmlyc3RWZXJzaW9uO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIHdoZXRoZXIgdGhpcyBpcyBhIGZyZXNoIGluc3RhbGxhdGlvbi5cclxuICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0ZyZXNoSW5zdGFsbCgpXHJcbntcclxuICByZXR1cm4gIShcImRhdGFcIiBpbiBQcmVmcy5ub3RpZmljYXRpb25kYXRhKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIGB7QGxpbmsgbW9kdWxlOmFuYWx5dGljcy5hbmFseXRpY3MgYW5hbHl0aWNzfWAgaW1wbGVtZW50YXRpb24uXHJcbiAqL1xyXG5jbGFzcyBBbmFseXRpY3Ncclxue1xyXG4gIC8qKlxyXG4gICAqIEBoaWRlY29uc3RydWN0b3JcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcigpXHJcbiAge1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIGdpdmVuIFVSTCBpcyB0cnVzdGVkIGZvciBhbmFseXRpY3MgcHVycG9zZXMgYmFzZWQgb25cclxuICAgKiB0aGUgdmFsdWUgb2YgdGhlIGBhbmFseXRpY3MudHJ1c3RlZEhvc3RzYCBwcmVmZXJlbmNlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIFVSTCBpcyB0cnVzdGVkLlxyXG4gICAqL1xyXG4gIGlzVHJ1c3RlZCh1cmwpXHJcbiAge1xyXG4gICAgbGV0IHt0cnVzdGVkSG9zdHN9ID0gUHJlZnMuYW5hbHl0aWNzIHx8IHt9O1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodHJ1c3RlZEhvc3RzKSlcclxuICAgIHtcclxuICAgICAgdHJ5XHJcbiAgICAgIHtcclxuICAgICAgICByZXR1cm4gdHJ1c3RlZEhvc3RzLmluY2x1ZGVzKG5ldyBVUkwodXJsKS5ob3N0KTtcclxuICAgICAgfVxyXG4gICAgICBjYXRjaCAoZXJyb3IpXHJcbiAgICAgIHtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBzdHJpbmcgaW5kaWNhdGluZyB0aGUgdmVyc2lvbiBvZiB0aGUgZmlyc3QgZXZlciBkb3dubG9hZGVkXHJcbiAgICogcmVzb3VyY2UgKGFzIHJlY29yZGVkIGJ5XHJcbiAgICogYHtAbGluayBtb2R1bGU6YW5hbHl0aWNzfkFuYWx5dGljcyNyZWNvcmRWZXJzaW9uIHJlY29yZFZlcnNpb24oKX1gKSwgZm9yXHJcbiAgICogdGhlIHB1cnBvc2Ugb2YgY29ob3J0IGFuYWx5c2lzLlxyXG4gICAqXHJcbiAgICogRm9yIHByaXZhY3kgcmVhc29ucywgdGhlIG9yaWdpbmFsIHZhbHVlIGlzIHN0cmlwcGVkIGRvd24gdG8gZWl0aGVyXHJcbiAgICogYFlZWVlNTUREYCwgYFlZWVlNTWAsIG9yIGBZWVlZYCBkZXBlbmRpbmcgb24gaXRzIGFnZS4gQW4gYC1FYCBzdWZmaXggaXNcclxuICAgKiBhcHBlbmRlZCB0byB0aGUgb3JpZ2luYWwgdmFsdWUgaWYgaXQgd2FzIHJlY29yZGVkIG9uIGFuIGV4aXN0aW5nXHJcbiAgICogaW5zdGFsbGF0aW9uLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMgez9zdHJpbmd9IEEgc3RyaW5nIGluZGljYXRpbmcgdGhlIHZlcnNpb24gb2YgdGhlIGZpcnN0IGV2ZXJcclxuICAgKiAgIGRvd25sb2FkZWQgcmVzb3VyY2UsIG9yIGBcIjBcImAgb3IgYFwiMC1FXCJgIGlmIHRoZXJlIGlzIG5vIGRhdGEsIG9yIGBudWxsYFxyXG4gICAqICAgaW4gY2FzZSBvZiBhIHBhcnNpbmcgZXJyb3IuXHJcbiAgICovXHJcbiAgZ2V0Rmlyc3RWZXJzaW9uKClcclxuICB7XHJcbiAgICBsZXQge2FuYWx5dGljc30gPSBQcmVmcztcclxuICAgIGlmIChhbmFseXRpY3MpXHJcbiAgICB7XHJcbiAgICAgIGxldCB7Zmlyc3RWZXJzaW9uID0gXCIwXCIsIGN1cnJlbnRWZXJzaW9uID0gXCIwXCJ9ID0gYW5hbHl0aWNzLmRhdGEgfHwge307XHJcbiAgICAgIGxldCBzdHJpcHBlZEZpcnN0VmVyc2lvbiA9IHN0cmlwRmlyc3RWZXJzaW9uKGZpcnN0VmVyc2lvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFZlcnNpb24pO1xyXG4gICAgICBpZiAoc3RyaXBwZWRGaXJzdFZlcnNpb24pXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAoc3RyaXBwZWRGaXJzdFZlcnNpb24gPT0gXCIwXCIgJiYgIWlzRnJlc2hJbnN0YWxsKCkpXHJcbiAgICAgICAgICBzdHJpcHBlZEZpcnN0VmVyc2lvbiA9IFwiMC1FXCI7XHJcblxyXG4gICAgICAgIHJldHVybiBzdHJpcHBlZEZpcnN0VmVyc2lvbjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVjb3JkcyB0aGUgdmVyc2lvbiBvZiBhIGRvd25sb2FkZWQgcmVzb3VyY2UgZm9yIHRoZSBwdXJwb3NlIG9mIGNvaG9ydFxyXG4gICAqIGFuYWx5c2lzLlxyXG4gICAqXHJcbiAgICogVGhlIHZhbHVlIG9mIHRoZSBgYW5hbHl0aWNzYCBwcmVmZXJlbmNlIG11c3QgYmUgc2V0IGF0IGxlYXN0IHRvIGFuXHJcbiAgICogZW1wdHkgb2JqZWN0LCBvdGhlcndpc2Ugbm90aGluZyBpcyBldmVyIHJlY29yZGVkIGFuZFxyXG4gICAqIGB7QGxpbmsgbW9kdWxlOmFuYWx5dGljc35BbmFseXRpY3MjZ2V0Rmlyc3RWZXJzaW9uIGdldEZpcnN0VmVyc2lvbigpfWBcclxuICAgKiBhbHdheXMgcmV0dXJucyBgbnVsbGAuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmVyc2lvbiBUaGUgdmVyc2lvbiwgaW4gYFlZWVlNTUREW0hIW01NXV1gIGZvcm1hdC5cclxuICAgKi9cclxuICByZWNvcmRWZXJzaW9uKHZlcnNpb24pXHJcbiAge1xyXG4gICAgaWYgKCEvXihcXGR7OH18XFxkezEwfXxcXGR7MTJ9KSQvLnRlc3QodmVyc2lvbikpXHJcbiAgICAgIHJldHVybjtcclxuXHJcbiAgICBsZXQge2FuYWx5dGljc30gPSBQcmVmcztcclxuICAgIGlmIChhbmFseXRpY3MpXHJcbiAgICB7XHJcbiAgICAgIGlmICghYW5hbHl0aWNzLmRhdGEpXHJcbiAgICAgICAgYW5hbHl0aWNzLmRhdGEgPSB7fTtcclxuXHJcbiAgICAgIGxldCB7ZGF0YX0gPSBhbmFseXRpY3M7XHJcblxyXG4gICAgICBkYXRhLmN1cnJlbnRWZXJzaW9uID0gdmVyc2lvbjtcclxuXHJcbiAgICAgIGlmICh0eXBlb2YgZGF0YS5maXJzdFZlcnNpb24gPT0gXCJ1bmRlZmluZWRcIilcclxuICAgICAge1xyXG4gICAgICAgIC8vIElmIHRoaXMgaXMgbm90IGEgbmV3IGluc3RhbGxhdGlvbiwgc2V0IHRoZSAtRSBmbGFnLlxyXG4gICAgICAgIGlmICghaXNGcmVzaEluc3RhbGwoKSlcclxuICAgICAgICAgIHZlcnNpb24gKz0gXCItRVwiO1xyXG5cclxuICAgICAgICBkYXRhLmZpcnN0VmVyc2lvbiA9IHZlcnNpb247XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEpTT04gdmFsdWVzIGFyZW4ndCBzYXZlZCB1bmxlc3MgdGhleSBhcmUgYXNzaWduZWQgYSBkaWZmZXJlbnQgb2JqZWN0LlxyXG4gICAgICBQcmVmcy5hbmFseXRpY3MgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGFuYWx5dGljcykpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEltcGxlbWVudHMgZGF0YSBhbmFseXRpY3MgZnVuY3Rpb25zLlxyXG4gKiBAdHlwZSB7bW9kdWxlOmFuYWx5dGljc35BbmFseXRpY3N9XHJcbiAqL1xyXG5leHBvcnRzLmFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3MoKTtcclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlICovXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbi8qKlxyXG4gKiBBIGBDYWNoZWAgb2JqZWN0IHJlcHJlc2VudHMgYSBjYWNoZSBvZiBhcmJpdHJhcnkgZGF0YS5cclxuICogQHBhY2thZ2VcclxuICovXHJcbmV4cG9ydHMuQ2FjaGUgPSBjbGFzcyBDYWNoZSBleHRlbmRzIE1hcFxyXG57XHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhIGNhY2hlLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjYXBhY2l0eSBUaGUgbWF4aW11bSBudW1iZXIgb2YgZW50cmllcyB0aGF0IGNhbiBleGlzdCBpblxyXG4gICAqICAgdGhlIGNhY2hlLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKGNhcGFjaXR5KVxyXG4gIHtcclxuICAgIC8vIE5vdGU6IFRoaXMgY2hlY2sgd29ya3MgZm9yIG5vbi1udW1iZXIgdmFsdWVzLlxyXG4gICAgaWYgKCEoY2FwYWNpdHkgPj0gMSkpXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImNhcGFjaXR5IG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXIuXCIpO1xyXG5cclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLl9jYXBhY2l0eSA9IGNhcGFjaXR5O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogV3JpdGVzIGFuIGVudHJ5IHRvIHRoZSBjYWNoZS5cclxuICAgKlxyXG4gICAqIElmIHRoZSBjYWNoZSBoYXMgcmVhY2hlZCB0aGUgc3BlY2lmaWVkIG1heGltdW0gbnVtYmVyIG9mIGVudHJpZXMsIGFsbCB0aGVcclxuICAgKiBvbGQgZW50cmllcyBhcmUgY2xlYXJlZCBmaXJzdC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7Pyp9IGtleSBUaGUga2V5IGZvciB0aGUgZW50cnkuXHJcbiAgICogQHBhcmFtIHs/Kn0gdmFsdWUgVGhlIHZhbHVlIG9mIHRoZSBlbnRyeS5cclxuICAgKi9cclxuICBzZXQoa2V5LCB2YWx1ZSlcclxuICB7XHJcbiAgICAvLyBUbyBwcmV2ZW50IGxvZ2ljYWwgZXJyb3JzLCBuZWl0aGVyIGtleSBub3IgdmFsdWUgaXMgYWxsb3dlZCB0byBiZVxyXG4gICAgLy8gdW5kZWZpbmVkLlxyXG4gICAgaWYgKHR5cGVvZiBrZXkgPT0gXCJ1bmRlZmluZWRcIilcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwia2V5IG11c3Qgbm90IGJlIHVuZGVmaW5lZC5cIik7XHJcblxyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ2YWx1ZSBtdXN0IG5vdCBiZSB1bmRlZmluZWQuXCIpO1xyXG5cclxuICAgIGlmICh0aGlzLnNpemUgPT0gdGhpcy5fY2FwYWNpdHkgJiYgIXRoaXMuaGFzKGtleSkpXHJcbiAgICAgIHRoaXMuY2xlYXIoKTtcclxuXHJcbiAgICBzdXBlci5zZXQoa2V5LCB2YWx1ZSk7XHJcbiAgfVxyXG59O1xyXG4iLCIvKlxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBBZGJsb2NrIFBsdXMgPGh0dHBzOi8vYWRibG9ja3BsdXMub3JnLz4sXHJcbiAqIENvcHlyaWdodCAoQykgMjAwNi1wcmVzZW50IGV5ZW8gR21iSFxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBhc1xyXG4gKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICpcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCBBZGJsb2NrIFBsdXMuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqL1xyXG5cclxuLyoqIEBtb2R1bGUgKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuLyoqXHJcbiAqIENvbnZlcnRzIHJhdyB0ZXh0IGludG8gYSByZWd1bGFyIGV4cHJlc3Npb24gc3RyaW5nXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IHRoZSBzdHJpbmcgdG8gY29udmVydFxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHJlZ3VsYXIgZXhwcmVzc2lvbiByZXByZXNlbnRhdGlvbiBvZiB0aGUgdGV4dFxyXG4gKiBAcGFja2FnZVxyXG4gKi9cclxuZXhwb3J0cy50ZXh0VG9SZWdFeHAgPSBmdW5jdGlvbiB0ZXh0VG9SZWdFeHAodGV4dClcclxue1xyXG4gIHJldHVybiB0ZXh0LnJlcGxhY2UoL1stL1xcXFxeJCorPy4oKXxbXFxde31dL2csIFwiXFxcXCQmXCIpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENvbnZlcnRzIGZpbHRlciB0ZXh0IGludG8gcmVndWxhciBleHByZXNzaW9uIHN0cmluZ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBhcyBpbiBGaWx0ZXIoKVxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHJlZ3VsYXIgZXhwcmVzc2lvbiByZXByZXNlbnRhdGlvbiBvZiBmaWx0ZXIgdGV4dFxyXG4gKiBAcGFja2FnZVxyXG4gKi9cclxuZXhwb3J0cy5maWx0ZXJUb1JlZ0V4cCA9IGZ1bmN0aW9uIGZpbHRlclRvUmVnRXhwKHRleHQpXHJcbntcclxuICAvLyByZW1vdmUgbXVsdGlwbGUgd2lsZGNhcmRzXHJcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvXFwqKy9nLCBcIipcIik7XHJcblxyXG4gIC8vIHJlbW92ZSBsZWFkaW5nIHdpbGRjYXJkXHJcbiAgaWYgKHRleHRbMF0gPT0gXCIqXCIpXHJcbiAgICB0ZXh0ID0gdGV4dC5zdWJzdHJpbmcoMSk7XHJcblxyXG4gIC8vIHJlbW92ZSB0cmFpbGluZyB3aWxkY2FyZFxyXG4gIGlmICh0ZXh0W3RleHQubGVuZ3RoIC0gMV0gPT0gXCIqXCIpXHJcbiAgICB0ZXh0ID0gdGV4dC5zdWJzdHJpbmcoMCwgdGV4dC5sZW5ndGggLSAxKTtcclxuXHJcbiAgcmV0dXJuIHRleHRcclxuICAgIC8vIHJlbW92ZSBhbmNob3JzIGZvbGxvd2luZyBzZXBhcmF0b3IgcGxhY2Vob2xkZXJcclxuICAgIC5yZXBsYWNlKC9cXF5cXHwkLywgXCJeXCIpXHJcbiAgICAvLyBlc2NhcGUgc3BlY2lhbCBzeW1ib2xzXHJcbiAgICAucmVwbGFjZSgvXFxXL2csIFwiXFxcXCQmXCIpXHJcbiAgICAvLyByZXBsYWNlIHdpbGRjYXJkcyBieSAuKlxyXG4gICAgLnJlcGxhY2UoL1xcXFxcXCovZywgXCIuKlwiKVxyXG4gICAgLy8gcHJvY2VzcyBzZXBhcmF0b3IgcGxhY2Vob2xkZXJzIChhbGwgQU5TSSBjaGFyYWN0ZXJzIGJ1dCBhbHBoYW51bWVyaWNcclxuICAgIC8vIGNoYXJhY3RlcnMgYW5kIF8lLi0pXHJcbiAgICAucmVwbGFjZSgvXFxcXFxcXi9nLCBcIig/OltcXFxceDAwLVxcXFx4MjRcXFxceDI2LVxcXFx4MkNcXFxceDJGXFxcXHgzQS1cXFxceDQwXFxcXHg1Qi1cXFxceDVFXFxcXHg2MFxcXFx4N0ItXFxcXHg3Rl18JClcIilcclxuICAgIC8vIHByb2Nlc3MgZXh0ZW5kZWQgYW5jaG9yIGF0IGV4cHJlc3Npb24gc3RhcnRcclxuICAgIC5yZXBsYWNlKC9eXFxcXFxcfFxcXFxcXHwvLCBcIl5bXFxcXHdcXFxcLV0rOlxcXFwvKyg/IVxcXFwvKSg/OlteXFxcXC9dK1xcXFwuKT9cIilcclxuICAgIC8vIHByb2Nlc3MgYW5jaG9yIGF0IGV4cHJlc3Npb24gc3RhcnRcclxuICAgIC5yZXBsYWNlKC9eXFxcXFxcfC8sIFwiXlwiKVxyXG4gICAgLy8gcHJvY2VzcyBhbmNob3IgYXQgZXhwcmVzc2lvbiBlbmRcclxuICAgIC5yZXBsYWNlKC9cXFxcXFx8JC8sIFwiJFwiKTtcclxufTtcclxuXHJcbmxldCBzcGxpdFNlbGVjdG9yID0gZXhwb3J0cy5zcGxpdFNlbGVjdG9yID0gZnVuY3Rpb24gc3BsaXRTZWxlY3RvcihzZWxlY3Rvcilcclxue1xyXG4gIGlmICghc2VsZWN0b3IuaW5jbHVkZXMoXCIsXCIpKVxyXG4gICAgcmV0dXJuIFtzZWxlY3Rvcl07XHJcblxyXG4gIGxldCBzZWxlY3RvcnMgPSBbXTtcclxuICBsZXQgc3RhcnQgPSAwO1xyXG4gIGxldCBsZXZlbCA9IDA7XHJcbiAgbGV0IHNlcCA9IFwiXCI7XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0b3IubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgbGV0IGNociA9IHNlbGVjdG9yW2ldO1xyXG5cclxuICAgIGlmIChjaHIgPT0gXCJcXFxcXCIpICAgICAgICAvLyBpZ25vcmUgZXNjYXBlZCBjaGFyYWN0ZXJzXHJcbiAgICB7XHJcbiAgICAgIGkrKztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGNociA9PSBzZXApICAgIC8vIGRvbid0IHNwbGl0IHdpdGhpbiBxdW90ZWQgdGV4dFxyXG4gICAge1xyXG4gICAgICBzZXAgPSBcIlwiOyAgICAgICAgICAgICAvLyBlLmcuIFthdHRyPVwiLFwiXVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoc2VwID09IFwiXCIpXHJcbiAgICB7XHJcbiAgICAgIGlmIChjaHIgPT0gJ1wiJyB8fCBjaHIgPT0gXCInXCIpXHJcbiAgICAgIHtcclxuICAgICAgICBzZXAgPSBjaHI7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoY2hyID09IFwiKFwiKSAgLy8gZG9uJ3Qgc3BsaXQgYmV0d2VlbiBwYXJlbnRoZXNlc1xyXG4gICAgICB7XHJcbiAgICAgICAgbGV2ZWwrKzsgICAgICAgICAgICAvLyBlLmcuIDptYXRjaGVzKGRpdixzcGFuKVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGNociA9PSBcIilcIilcclxuICAgICAge1xyXG4gICAgICAgIGxldmVsID0gTWF0aC5tYXgoMCwgbGV2ZWwgLSAxKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChjaHIgPT0gXCIsXCIgJiYgbGV2ZWwgPT0gMClcclxuICAgICAge1xyXG4gICAgICAgIHNlbGVjdG9ycy5wdXNoKHNlbGVjdG9yLnN1YnN0cmluZyhzdGFydCwgaSkpO1xyXG4gICAgICAgIHN0YXJ0ID0gaSArIDE7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNlbGVjdG9ycy5wdXNoKHNlbGVjdG9yLnN1YnN0cmluZyhzdGFydCkpO1xyXG4gIHJldHVybiBzZWxlY3RvcnM7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBmaW5kVGFyZ2V0U2VsZWN0b3JJbmRleChzZWxlY3Rvcilcclxue1xyXG4gIGxldCBpbmRleCA9IDA7XHJcbiAgbGV0IHdoaXRlc3BhY2UgPSAwO1xyXG4gIGxldCBzY29wZSA9IFtdO1xyXG5cclxuICAvLyBTdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIHN0cmluZyBhbmQgZ28gY2hhcmFjdGVyIGJ5IGNoYXJhY3Rlciwgd2hlcmUgZWFjaFxyXG4gIC8vIGNoYXJhY3RlciBpcyBhIFVuaWNvZGUgY29kZSBwb2ludC5cclxuICBmb3IgKGxldCBjaGFyYWN0ZXIgb2YgWy4uLnNlbGVjdG9yXS5yZXZlcnNlKCkpXHJcbiAge1xyXG4gICAgbGV0IGN1cnJlbnRTY29wZSA9IHNjb3BlW3Njb3BlLmxlbmd0aCAtIDFdO1xyXG5cclxuICAgIGlmIChjaGFyYWN0ZXIgPT0gXCInXCIgfHwgY2hhcmFjdGVyID09IFwiXFxcIlwiKVxyXG4gICAge1xyXG4gICAgICAvLyBJZiB3ZSdyZSBhbHJlYWR5IHdpdGhpbiB0aGUgc2FtZSB0eXBlIG9mIHF1b3RlLCBjbG9zZSB0aGUgc2NvcGU7XHJcbiAgICAgIC8vIG90aGVyd2lzZSBvcGVuIGEgbmV3IHNjb3BlLlxyXG4gICAgICBpZiAoY3VycmVudFNjb3BlID09IGNoYXJhY3RlcilcclxuICAgICAgICBzY29wZS5wb3AoKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHNjb3BlLnB1c2goY2hhcmFjdGVyKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGNoYXJhY3RlciA9PSBcIl1cIiB8fCBjaGFyYWN0ZXIgPT0gXCIpXCIpXHJcbiAgICB7XHJcbiAgICAgIC8vIEZvciBjbG9zaW5nIGJyYWNrZXRzIGFuZCBwYXJlbnRoZXNlcywgb3BlbiBhIG5ldyBzY29wZSBvbmx5IGlmIHdlJ3JlXHJcbiAgICAgIC8vIG5vdCB3aXRoaW4gYSBxdW90ZS4gV2l0aGluIHF1b3RlcyB0aGVzZSBjaGFyYWN0ZXJzIHNob3VsZCBoYXZlIG5vXHJcbiAgICAgIC8vIG1lYW5pbmcuXHJcbiAgICAgIGlmIChjdXJyZW50U2NvcGUgIT0gXCInXCIgJiYgY3VycmVudFNjb3BlICE9IFwiXFxcIlwiKVxyXG4gICAgICAgIHNjb3BlLnB1c2goY2hhcmFjdGVyKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGNoYXJhY3RlciA9PSBcIltcIilcclxuICAgIHtcclxuICAgICAgLy8gSWYgd2UncmUgYWxyZWFkeSB3aXRoaW4gYSBicmFja2V0LCBjbG9zZSB0aGUgc2NvcGUuXHJcbiAgICAgIGlmIChjdXJyZW50U2NvcGUgPT0gXCJdXCIpXHJcbiAgICAgICAgc2NvcGUucG9wKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChjaGFyYWN0ZXIgPT0gXCIoXCIpXHJcbiAgICB7XHJcbiAgICAgIC8vIElmIHdlJ3JlIGFscmVhZHkgd2l0aGluIGEgcGFyZW50aGVzaXMsIGNsb3NlIHRoZSBzY29wZS5cclxuICAgICAgaWYgKGN1cnJlbnRTY29wZSA9PSBcIilcIilcclxuICAgICAgICBzY29wZS5wb3AoKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCFjdXJyZW50U2NvcGUpXHJcbiAgICB7XHJcbiAgICAgIC8vIEF0IHRoZSB0b3AgbGV2ZWwgKG5vdCB3aXRoaW4gYW55IHNjb3BlKSwgY291bnQgdGhlIHdoaXRlc3BhY2UgaWYgd2UndmVcclxuICAgICAgLy8gZW5jb3VudGVyZWQgaXQuIE90aGVyd2lzZSBpZiB3ZSd2ZSBoaXQgb25lIG9mIHRoZSBjb21iaW5hdG9ycyxcclxuICAgICAgLy8gdGVybWluYXRlIGhlcmU7IG90aGVyd2lzZSBpZiB3ZSd2ZSBoaXQgYSBub24tY29sb24gY2hhcmFjdGVyLFxyXG4gICAgICAvLyB0ZXJtaW5hdGUgaGVyZS5cclxuICAgICAgaWYgKC9cXHMvLnRlc3QoY2hhcmFjdGVyKSlcclxuICAgICAgICB3aGl0ZXNwYWNlKys7XHJcbiAgICAgIGVsc2UgaWYgKChjaGFyYWN0ZXIgPT0gXCI+XCIgfHwgY2hhcmFjdGVyID09IFwiK1wiIHx8IGNoYXJhY3RlciA9PSBcIn5cIikgfHxcclxuICAgICAgICAgICAgICAgKHdoaXRlc3BhY2UgPiAwICYmIGNoYXJhY3RlciAhPSBcIjpcIikpXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gWmVybyBvdXQgdGhlIHdoaXRlc3BhY2UgY291bnQgaWYgd2UndmUgZW50ZXJlZCBhIHNjb3BlLlxyXG4gICAgaWYgKHNjb3BlLmxlbmd0aCA+IDApXHJcbiAgICAgIHdoaXRlc3BhY2UgPSAwO1xyXG5cclxuICAgIC8vIEluY3JlbWVudCB0aGUgaW5kZXggYnkgdGhlIHNpemUgb2YgdGhlIGNoYXJhY3Rlci4gTm90ZSB0aGF0IGZvciBVbmljb2RlXHJcbiAgICAvLyBjb21wb3NpdGUgY2hhcmFjdGVycyAobGlrZSBlbW9qaSkgdGhpcyB3aWxsIGJlIG1vcmUgdGhhbiBvbmUuXHJcbiAgICBpbmRleCArPSBjaGFyYWN0ZXIubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHNlbGVjdG9yLmxlbmd0aCAtIGluZGV4ICsgd2hpdGVzcGFjZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFF1YWxpZmllcyBhIENTUyBzZWxlY3RvciB3aXRoIGEgcXVhbGlmaWVyLCB3aGljaCBtYXkgYmUgYW5vdGhlciBDU1Mgc2VsZWN0b3JcclxuICogb3IgYW4gZW1wdHkgc3RyaW5nLiBGb3IgZXhhbXBsZSwgZ2l2ZW4gdGhlIHNlbGVjdG9yIFwiZGl2LmJhclwiIGFuZCB0aGVcclxuICogcXVhbGlmaWVyIFwiI2Zvb1wiLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgXCJkaXYjZm9vLmJhclwiLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgVGhlIHNlbGVjdG9yIHRvIHF1YWxpZnkuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBxdWFsaWZpZXIgVGhlIHF1YWxpZmllciB3aXRoIHdoaWNoIHRvIHF1YWxpZnkgdGhlIHNlbGVjdG9yLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgcXVhbGlmaWVkIHNlbGVjdG9yLlxyXG4gKiBAcGFja2FnZVxyXG4gKi9cclxuZXhwb3J0cy5xdWFsaWZ5U2VsZWN0b3IgPSBmdW5jdGlvbiBxdWFsaWZ5U2VsZWN0b3Ioc2VsZWN0b3IsIHF1YWxpZmllcilcclxue1xyXG4gIGxldCBxdWFsaWZpZWRTZWxlY3RvciA9IFwiXCI7XHJcblxyXG4gIGxldCBxdWFsaWZpZXJUYXJnZXRTZWxlY3RvckluZGV4ID0gZmluZFRhcmdldFNlbGVjdG9ySW5kZXgocXVhbGlmaWVyKTtcclxuICBsZXQgWywgcXVhbGlmaWVyVHlwZSA9IFwiXCJdID1cclxuICAgIC9eKFthLXpdW2Etei1dKik/L2kuZXhlYyhxdWFsaWZpZXIuc3Vic3RyaW5nKHF1YWxpZmllclRhcmdldFNlbGVjdG9ySW5kZXgpKTtcclxuXHJcbiAgZm9yIChsZXQgc3ViIG9mIHNwbGl0U2VsZWN0b3Ioc2VsZWN0b3IpKVxyXG4gIHtcclxuICAgIHN1YiA9IHN1Yi50cmltKCk7XHJcblxyXG4gICAgcXVhbGlmaWVkU2VsZWN0b3IgKz0gXCIsIFwiO1xyXG5cclxuICAgIGxldCBpbmRleCA9IGZpbmRUYXJnZXRTZWxlY3RvckluZGV4KHN1Yik7XHJcblxyXG4gICAgLy8gTm90ZSB0aGF0IHRoZSBmaXJzdCBncm91cCBpbiB0aGUgcmVndWxhciBleHByZXNzaW9uIGlzIG9wdGlvbmFsLiBJZiBpdFxyXG4gICAgLy8gZG9lc24ndCBtYXRjaCAoZS5nLiBcIiNmb286Om50aC1jaGlsZCgxKVwiKSwgdHlwZSB3aWxsIGJlIGFuIGVtcHR5IHN0cmluZy5cclxuICAgIGxldCBbLCB0eXBlID0gXCJcIiwgcmVzdF0gPVxyXG4gICAgICAvXihbYS16XVthLXotXSopP1xcKj8oLiopL2kuZXhlYyhzdWIuc3Vic3RyaW5nKGluZGV4KSk7XHJcblxyXG4gICAgaWYgKHR5cGUgPT0gcXVhbGlmaWVyVHlwZSlcclxuICAgICAgdHlwZSA9IFwiXCI7XHJcblxyXG4gICAgLy8gSWYgdGhlIHF1YWxpZmllciBlbmRzIGluIGEgY29tYmluYXRvciAoZS5nLiBcImJvZHkgI2Zvbz5cIiksIHdlIHB1dCB0aGVcclxuICAgIC8vIHR5cGUgYW5kIHRoZSByZXN0IG9mIHRoZSBzZWxlY3RvciBhZnRlciB0aGUgcXVhbGlmaWVyXHJcbiAgICAvLyAoZS5nLiBcImJvZHkgI2Zvbz5kaXYuYmFyXCIpOyBvdGhlcndpc2UgKGUuZy4gXCJib2R5ICNmb29cIikgd2UgbWVyZ2UgdGhlXHJcbiAgICAvLyB0eXBlIGludG8gdGhlIHF1YWxpZmllciAoZS5nLiBcImJvZHkgZGl2I2Zvby5iYXJcIikuXHJcbiAgICBpZiAoL1tcXHM+K35dJC8udGVzdChxdWFsaWZpZXIpKVxyXG4gICAgICBxdWFsaWZpZWRTZWxlY3RvciArPSBzdWIuc3Vic3RyaW5nKDAsIGluZGV4KSArIHF1YWxpZmllciArIHR5cGUgKyByZXN0O1xyXG4gICAgZWxzZVxyXG4gICAgICBxdWFsaWZpZWRTZWxlY3RvciArPSBzdWIuc3Vic3RyaW5nKDAsIGluZGV4KSArIHR5cGUgKyBxdWFsaWZpZXIgKyByZXN0O1xyXG4gIH1cclxuXHJcbiAgLy8gUmVtb3ZlIHRoZSBpbml0aWFsIGNvbW1hIGFuZCBzcGFjZS5cclxuICByZXR1cm4gcXVhbGlmaWVkU2VsZWN0b3Iuc3Vic3RyaW5nKDIpO1xyXG59O1xyXG4iLCIvKlxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBBZGJsb2NrIFBsdXMgPGh0dHBzOi8vYWRibG9ja3BsdXMub3JnLz4sXHJcbiAqIENvcHlyaWdodCAoQykgMjAwNi1wcmVzZW50IGV5ZW8gR21iSFxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBhc1xyXG4gKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICpcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCBBZGJsb2NrIFBsdXMuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqL1xyXG5cclxuLyoqIEBtb2R1bGUgKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxubGV0IGNvbnRlbnRUeXBlcyA9XHJcbi8qKlxyXG4gKiBDb250ZW50IHR5cGVzIGZvciByZXF1ZXN0IGJsb2NraW5nIGFuZCBhbGxvd2luZyAoYWxsb3dsaXN0aW5nKS5cclxuICpcclxuICogVGhlcmUgYXJlIHR3byBraW5kcyBvZiBjb250ZW50IHR5cGVzOiByZXNvdXJjZSB0eXBlcywgYW5kIHNwZWNpYWxcclxuICogKG5vbi1yZXNvdXJjZSkgdHlwZXMuXHJcbiAqXHJcbiAqIFJlc291cmNlIHR5cGVzIGluY2x1ZGUgd2ViIHJlc291cmNlcyBsaWtlIHNjcmlwdHMsIGltYWdlcywgYW5kIHNvIG9uLlxyXG4gKlxyXG4gKiBTcGVjaWFsIHR5cGVzIGluY2x1ZGUgZmlsdGVyIG9wdGlvbnMgZm9yIHBvcHVwIGJsb2NraW5nIGFuZCBDU1AgaGVhZGVyXHJcbiAqIGluamVjdGlvbiBhcyB3ZWxsIGFzIGZsYWdzIGZvciBhbGxvd2luZyBkb2N1bWVudHMuXHJcbiAqXHJcbiAqIEJ5IGRlZmF1bHQgYSBmaWx0ZXIgbWF0Y2hlcyBhbnkgcmVzb3VyY2UgdHlwZSwgYnV0IGlmIGEgZmlsdGVyIGhhcyBhblxyXG4gKiBleHBsaWNpdCByZXNvdXJjZSB0eXBlLCBzcGVjaWFsIG9wdGlvbiwgb3IgYWxsb3dpbmcgZmxhZywgbGlrZVxyXG4gKiBgJHNjcmlwdGAsIGAkcG9wdXBgLCBvciBgJGVsZW1oaWRlYCwgdGhlbiBpdCBtYXRjaGVzIG9ubHkgdGhlIGdpdmVuIHR5cGUsXHJcbiAqIG9wdGlvbiwgb3IgZmxhZy5cclxuICpcclxuICogQHR5cGUge29iamVjdH1cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0cy5jb250ZW50VHlwZXMgPSB7XHJcbiAgLy8gVHlwZXMgb2Ygd2ViIHJlc291cmNlcy5cclxuICBPVEhFUjogMSxcclxuICBTQ1JJUFQ6IDIsXHJcbiAgSU1BR0U6IDQsXHJcbiAgU1RZTEVTSEVFVDogOCxcclxuICBPQkpFQ1Q6IDE2LFxyXG4gIFNVQkRPQ1VNRU5UOiAzMixcclxuICBXRUJTT0NLRVQ6IDEyOCxcclxuICBXRUJSVEM6IDI1NixcclxuICBQSU5HOiAxMDI0LFxyXG4gIFhNTEhUVFBSRVFVRVNUOiAyMDQ4LCAvLyAxIDw8IDExXHJcblxyXG4gIE1FRElBOiAxNjM4NCxcclxuICBGT05UOiAzMjc2OCwgLy8gMSA8PCAxNVxyXG5cclxuICAvLyBTcGVjaWFsIGZpbHRlciBvcHRpb25zLlxyXG4gIFBPUFVQOiAxIDw8IDI0LFxyXG4gIENTUDogMSA8PCAyNSxcclxuICBIRUFERVI6IDEgPDwgMjYsXHJcblxyXG4gIC8vIEFsbG93aW5nIGZsYWdzLlxyXG4gIERPQ1VNRU5UOiAxIDw8IDI3LFxyXG4gIEdFTkVSSUNCTE9DSzogMSA8PCAyOCxcclxuICBFTEVNSElERTogMSA8PCAyOSxcclxuICBHRU5FUklDSElERTogMSA8PCAzMFxyXG59O1xyXG5cclxuLy8gQmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXHJcbmNvbnRlbnRUeXBlcy5CQUNLR1JPVU5EID0gY29udGVudFR5cGVzLklNQUdFO1xyXG5jb250ZW50VHlwZXMuWEJMID0gY29udGVudFR5cGVzLk9USEVSO1xyXG5jb250ZW50VHlwZXMuRFREID0gY29udGVudFR5cGVzLk9USEVSO1xyXG5cclxuY29uc3QgUkVTT1VSQ0VfVFlQRVMgPVxyXG4vKipcclxuICogQml0bWFzayBmb3IgcmVzb3VyY2UgdHlwZXMgbGlrZSBgJHNjcmlwdGAsIGAkaW1hZ2VgLCBgJHN0eWxlc2hlZXRgLCBhbmQgc29cclxuICogb24uXHJcbiAqXHJcbiAqIElmIGEgZmlsdGVyIGhhcyBubyBleHBsaWNpdCBjb250ZW50IHR5cGUsIGl0IGFwcGxpZXMgdG8gYWxsIHJlc291cmNlIHR5cGVzXHJcbiAqIChidXQgbm90IHRvIGFueSB7QGxpbmsgbW9kdWxlOmNvbnRlbnRUeXBlcy5TUEVDSUFMX1RZUEVTIHNwZWNpYWwgdHlwZXN9KS5cclxuICpcclxuICogQGNvbnN0IHtudW1iZXJ9XHJcbiAqXHJcbiAqIEBwYWNrYWdlXHJcbiAqL1xyXG4vLyBUaGUgZmlyc3QgMjQgYml0cyBhcmUgcmVzZXJ2ZWQgZm9yIHJlc291cmNlIHR5cGVzIGxpa2UgXCJzY3JpcHRcIiwgXCJpbWFnZVwiLFxyXG4vLyBhbmQgc28gb24uXHJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvTW96aWxsYS9BZGQtb25zL1dlYkV4dGVuc2lvbnMvQVBJL3dlYlJlcXVlc3QvUmVzb3VyY2VUeXBlXHJcbmV4cG9ydHMuUkVTT1VSQ0VfVFlQRVMgPSAoMSA8PCAyNCkgLSAxO1xyXG5cclxuY29uc3QgU1BFQ0lBTF9UWVBFUyA9IH5SRVNPVVJDRV9UWVBFUyAmICgxIDw8IDMxKSAtIDE7XHJcbi8qKlxyXG4gKiBCaXRtYXNrIGZvciBzcGVjaWFsIFwidHlwZXNcIiAob3B0aW9ucyBhbmQgZmxhZ3MpIGxpa2UgYCRjc3BgLCBgJGVsZW1oaWRlYCxcclxuICogYW5kIHNvIG9uLlxyXG4gKlxyXG4gKiBAY29uc3Qge251bWJlcn1cclxuICpcclxuICogQHBhY2thZ2VcclxuICovXHJcbmV4cG9ydHMuU1BFQ0lBTF9UWVBFUyA9IFNQRUNJQUxfVFlQRVM7XHJcblxyXG4vKipcclxuICogQml0bWFzayBmb3IgXCJ0eXBlc1wiIChmbGFncykgdGhhdCBhcmUgZm9yIGV4Y2VwdGlvbiBydWxlcyBvbmx5LCBsaWtlXHJcbiAqIGAkZG9jdW1lbnRgLCBgJGVsZW1oaWRlYCwgYW5kIHNvIG9uLlxyXG4gKlxyXG4gKiBAY29uc3Qge251bWJlcn1cclxuICpcclxuICogQHBhY2thZ2VcclxuICovXHJcbmV4cG9ydHMuQUxMT1dJTkdfVFlQRVMgPSBjb250ZW50VHlwZXMuRE9DVU1FTlQgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGVzLkdFTkVSSUNCTE9DSyB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZXMuRUxFTUhJREUgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGVzLkdFTkVSSUNISURFO1xyXG5cclxuLyoqXHJcbiAqIFlpZWxkcyBpbmRpdmlkdWFsIHR5cGVzIGZyb20gYSBmaWx0ZXIncyB0eXBlIG1hc2suXHJcbiAqXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb250ZW50VHlwZSBBIGZpbHRlcidzIHR5cGUgbWFzay5cclxuICogQHBhcmFtIHtudW1iZXJ9IFtzZWxlY3Rpb25dIFdoaWNoIHR5cGVzIHRvIHlpZWxkLlxyXG4gKlxyXG4gKiBAZ2VuZXJhdG9yXHJcbiAqIEB5aWVsZHMge251bWJlcn1cclxuICpcclxuICogQHBhY2thZ2VcclxuICovXHJcbmV4cG9ydHMuZW51bWVyYXRlVHlwZXMgPSBmdW5jdGlvbiogZW51bWVyYXRlVHlwZXMoY29udGVudFR5cGUsIHNlbGVjdGlvbiA9IH4wKVxyXG57XHJcbiAgZm9yIChsZXQgbWFzayA9IGNvbnRlbnRUeXBlICYgc2VsZWN0aW9uLCBiaXRJbmRleCA9IDA7XHJcbiAgICAgICBtYXNrICE9IDA7IG1hc2sgPj4+PSAxLCBiaXRJbmRleCsrKVxyXG4gIHtcclxuICAgIGlmICgobWFzayAmIDEpICE9IDApXHJcbiAgICB7XHJcbiAgICAgIC8vIE5vdGU6IFRoZSB6ZXJvLWZpbGwgcmlnaHQgc2hpZnQgYnkgemVybyBpcyBuZWNlc3NhcnkgZm9yIGRyb3BwaW5nIHRoZVxyXG4gICAgICAvLyBzaWduLlxyXG4gICAgICB5aWVsZCAxIDw8IGJpdEluZGV4ID4+PiAwO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlICovXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbi8qKlxyXG4gKiBAZmlsZU92ZXJ2aWV3IERvd25sb2FkcyBhIHNldCBvZiBVUkxzIGluIHJlZ3VsYXIgdGltZSBpbnRlcnZhbHMuXHJcbiAqL1xyXG5cclxuY29uc3Qge01JTExJU19JTl9EQVl9ID0gcmVxdWlyZShcIi4vdGltZVwiKTtcclxuY29uc3Qge2lzTG9jYWxob3N0fSA9IHJlcXVpcmUoXCIuL3VybFwiKTtcclxuXHJcbi8qKlxyXG4gKiBBIHR5cGUgb2YgZnVuY3Rpb24gdGhhdCB5aWVsZHMgYHtAbGluayBtb2R1bGU6ZG93bmxvYWRlci5Eb3dubG9hZGFibGV9YFxyXG4gKiBvYmplY3RzIHRvIGEgYHtAbGluayBtb2R1bGU6ZG93bmxvYWRlci5Eb3dubG9hZGVyfWAuXHJcbiAqXHJcbiAqICoqTm90ZSoqOiBUaGUgaW1wbGVtZW50YXRpb24gbXVzdCB5aWVsZCBhIG5ld1xyXG4gKiBge0BsaW5rIG1vZHVsZTpkb3dubG9hZGVyLkRvd25sb2FkYWJsZX1gIGluc3RhbmNlIG9uIGVhY2ggY2FsbCB3aXRoXHJcbiAqIHVwLXRvLWRhdGUgdmFsdWVzIGZvciBwcm9wZXJ0aWVzIGxpa2VcclxuICogYHtAbGluayBtb2R1bGU6ZG93bmxvYWRlci5Eb3dubG9hZGFibGUjbGFzdENoZWNrfWAsXHJcbiAqIGB7QGxpbmsgbW9kdWxlOmRvd25sb2FkZXIuRG93bmxvYWRhYmxlI2xhc3RWZXJzaW9ufWAsXHJcbiAqIGB7QGxpbmsgbW9kdWxlOmRvd25sb2FkZXIuRG93bmxvYWRhYmxlI2Rvd25sb2FkQ291bnR9YCwgYW5kIG90aGVycy4gSWYgYVxyXG4gKiB2YWx1ZSBpcyBvdXRkYXRlZCwgaXQgbWF5IHJlc3VsdCBpbiB1bmV4cGVjdGVkIGJlaGF2aW9yLlxyXG4gKlxyXG4gKiBAY2FsbGJhY2sgRGF0YVNvdXJjZVxyXG4gKlxyXG4gKiBAeWllbGRzIHttb2R1bGU6ZG93bmxvYWRlci5Eb3dubG9hZGFibGV9XHJcbiAqIEBnZW5lcmF0b3JcclxuICpcclxuICogQHNlZSBtb2R1bGU6ZG93bmxvYWRlci5Eb3dubG9hZGVyXHJcbiAqIEBzZWUgbW9kdWxlOmRvd25sb2FkZXIuRG93bmxvYWRlciNkYXRhU291cmNlXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFVzZSBhIGBEb3dubG9hZGVyYCBvYmplY3QgdG8gZG93bmxvYWQgYSBzZXQgb2YgVVJMcyBhdCByZWd1bGFyIHRpbWVcclxuICogaW50ZXJ2YWxzLlxyXG4gKlxyXG4gKiBUaGlzIGNsYXNzIGlzIHVzZWQgYnkgYHtAbGluayBtb2R1bGU6c3luY2hyb25pemVyLnN5bmNocm9uaXplcn1gIGFuZFxyXG4gKiBge0BsaW5rIG1vZHVsZTpub3RpZmljYXRpb25zLm5vdGlmaWNhdGlvbnN9YC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICpcclxuICogZnVuY3Rpb24qIGRhdGFTb3VyY2UoKVxyXG4gKiB7XHJcbiAqICAgeWllbGQgbmV3IERvd25sb2FkYWJsZShcImh0dHBzOi8vZXhhbXBsZS5jb20vZmlsdGVycy50eHRcIik7XHJcbiAqIH1cclxuICpcclxuICogbGV0IGluaXRpYWxEZWxheSA9IDEwMDA7XHJcbiAqIGxldCBjaGVja0ludGVydmFsID0gNjAwMDA7XHJcbiAqXHJcbiAqIGxldCBkb3dubG9hZGVyID0gbmV3IERvd25sb2FkZXIoZGF0YVNvdXJjZSk7XHJcbiAqIGRvd25sb2FkZXIuc2NoZWR1bGVDaGVja3MoY2hlY2tJbnRlcnZhbCwgaW5pdGlhbERlbGF5KTtcclxuICpcclxuICogZG93bmxvYWRlci5vbkRvd25sb2FkU3RhcnRlZCA9IGZ1bmN0aW9uKGRvd25sb2FkYWJsZSlcclxuICoge1xyXG4gKiAgIGNvbnNvbGUubG9nKGBEb3dubG9hZGluZyAke2Rvd25sb2FkYWJsZS51cmx9IC4uLmApO1xyXG4gKiB9XHJcbiAqXHJcbiAqIEBwYWNrYWdlXHJcbiAqL1xyXG5leHBvcnRzLkRvd25sb2FkZXIgPSBjbGFzcyBEb3dubG9hZGVyXHJcbntcclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgbmV3IGRvd25sb2FkZXIgaW5zdGFuY2UuXHJcbiAgICogQHBhcmFtIHttb2R1bGU6ZG93bmxvYWRlcn5EYXRhU291cmNlfSBkYXRhU291cmNlXHJcbiAgICogICBBIGZ1bmN0aW9uIHRoYXQgeWllbGRzIGB7QGxpbmsgbW9kdWxlOmRvd25sb2FkZXIuRG93bmxvYWRhYmxlfWAgb2JqZWN0c1xyXG4gICAqICAgb24gZWFjaCB7QGxpbmsgbW9kdWxlOmRvd25sb2FkZXIuRG93bmxvYWRlciNzY2hlZHVsZUNoZWNrcyBjaGVja30uXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoZGF0YVNvdXJjZSlcclxuICB7XHJcbiAgICAvKipcclxuICAgICAqIE1heGltYWwgdGltZSBpbnRlcnZhbCB0aGF0IHRoZSBjaGVja3MgY2FuIGJlIGxlZnQgb3V0IHVudGlsIHRoZSBzb2Z0XHJcbiAgICAgKiBleHBpcmF0aW9uIGludGVydmFsIGluY3JlYXNlcy5cclxuICAgICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIHRoaXMubWF4QWJzZW5jZUludGVydmFsID0gMSAqIE1JTExJU19JTl9EQVk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNaW5pbWFsIHRpbWUgaW50ZXJ2YWwgYmVmb3JlIHJldHJ5aW5nIGEgZG93bmxvYWQgYWZ0ZXIgYW4gZXJyb3IuXHJcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICB0aGlzLm1pblJldHJ5SW50ZXJ2YWwgPSAxICogTUlMTElTX0lOX0RBWTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE1heGltYWwgYWxsb3dlZCBleHBpcmF0aW9uIGludGVydmFsOyBsYXJnZXIgZXhwaXJhdGlvbiBpbnRlcnZhbHMgd2lsbCBiZVxyXG4gICAgICogY29ycmVjdGVkLlxyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgdGhpcy5tYXhFeHBpcmF0aW9uSW50ZXJ2YWwgPSAxNCAqIE1JTExJU19JTl9EQVk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXhpbWFsIG51bWJlciBvZiByZWRpcmVjdHMgYmVmb3JlIHRoZSBkb3dubG9hZCBpcyBjb25zaWRlcmVkIGFzIGZhaWxlZC5cclxuICAgICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIHRoaXMubWF4UmVkaXJlY3RzID0gNTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCB3aGVuZXZlciBleHBpcmF0aW9uIGludGVydmFscyBmb3IgYW4gb2JqZWN0IG5lZWQgdG8gYmUgYWRhcHRlZC5cclxuICAgICAqIEB0eXBlIHtmdW5jdGlvbj99XHJcbiAgICAgKi9cclxuICAgIHRoaXMub25FeHBpcmF0aW9uQ2hhbmdlID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGxiYWNrIHRvIGJlIHRyaWdnZXJlZCB3aGVuZXZlciBhIGRvd25sb2FkIHN0YXJ0cy5cclxuICAgICAqIEB0eXBlIHtmdW5jdGlvbj99XHJcbiAgICAgKi9cclxuICAgIHRoaXMub25Eb3dubG9hZFN0YXJ0ZWQgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGJhY2sgdG8gYmUgdHJpZ2dlcmVkIHdoZW5ldmVyIGEgZG93bmxvYWQgZmluaXNoZXMgc3VjY2Vzc2Z1bGx5LlxyXG4gICAgICpcclxuICAgICAqIFRoZSBjYWxsYmFjayBjYW4gcmV0dXJuIGFuIGVycm9yIGNvZGUgdG8gaW5kaWNhdGUgdGhhdCB0aGUgZGF0YSBpc1xyXG4gICAgICogd3JvbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHR5cGUge2Z1bmN0aW9uP31cclxuICAgICAqL1xyXG4gICAgdGhpcy5vbkRvd25sb2FkU3VjY2VzcyA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsYmFjayB0byBiZSB0cmlnZ2VyZWQgd2hlbmV2ZXIgYSBkb3dubG9hZCBmYWlscy5cclxuICAgICAqIEB0eXBlIHtmdW5jdGlvbj99XHJcbiAgICAgKi9cclxuICAgIHRoaXMub25Eb3dubG9hZEVycm9yID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCB5aWVsZHMgYHtAbGluayBtb2R1bGU6ZG93bmxvYWRlci5Eb3dubG9hZGFibGV9YCBvYmplY3RzXHJcbiAgICAgKiBvbiBlYWNoIHtAbGluayBtb2R1bGU6ZG93bmxvYWRlci5Eb3dubG9hZGVyI3NjaGVkdWxlQ2hlY2tzIGNoZWNrfS5cclxuICAgICAqIEB0eXBlIHttb2R1bGU6ZG93bmxvYWRlcn5EYXRhU291cmNlfVxyXG4gICAgICovXHJcbiAgICB0aGlzLmRhdGFTb3VyY2UgPSBkYXRhU291cmNlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IGNvbnRhaW5pbmcgdGhlIFVSTHMgb2Ygb2JqZWN0cyBjdXJyZW50bHkgYmVpbmcgZG93bmxvYWRlZC5cclxuICAgICAqIEB0eXBlIHtTZXQuPHN0cmluZz59XHJcbiAgICAgKi9cclxuICAgIHRoaXMuX2Rvd25sb2FkaW5nID0gbmV3IFNldCgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RvcmUgdGhlIHRpbWVvdXQgSUQgZm9yIHNjaGVkdWxlZCBjaGVja3MuXHJcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICB0aGlzLl90aW1lb3V0ID0gMDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNjaGVkdWxlcyBjaGVja3MgYXQgcmVndWxhciB0aW1lIGludGVydmFscy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbnRlcnZhbCBUaGUgaW50ZXJ2YWwgYmV0d2VlbiBjaGVja3MgaW4gbWlsbGlzZWNvbmRzLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheSBUaGUgZGVsYXkgYmVmb3JlIHRoZSBpbml0aWFsIGNoZWNrIGluIG1pbGxpc2Vjb25kcy5cclxuICAgKi9cclxuICBzY2hlZHVsZUNoZWNrcyhpbnRlcnZhbCwgZGVsYXkpXHJcbiAge1xyXG4gICAgLy8gY2xlYXIgcHJldmlvdXMgdGltZW91dHMgaWYgY2FsbGVkIHRvbyBtYW55IHRpbWVzXHJcbiAgICB0aGlzLnVuc2NoZWR1bGVDaGVja3MoKTtcclxuXHJcbiAgICBsZXQgY2hlY2sgPSAoKSA9PlxyXG4gICAge1xyXG4gICAgICB0cnlcclxuICAgICAge1xyXG4gICAgICAgIHRoaXMuX2RvQ2hlY2soKTtcclxuICAgICAgfVxyXG4gICAgICBmaW5hbGx5XHJcbiAgICAgIHtcclxuICAgICAgICAvLyBTY2hlZHVsZSB0aGUgbmV4dCBjaGVjayBvbmx5IGFmdGVyIHRoZSBjYWxsYmFjayBoYXMgZmluaXNoZWQgd2l0aFxyXG4gICAgICAgIC8vIHRoZSBjdXJyZW50IGNoZWNrLlxyXG4gICAgICAgIHRoaXMuX3RpbWVvdXQgPVxyXG4gICAgICAgICAgc2V0VGltZW91dChjaGVjaywgaW50ZXJ2YWwpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gTm90ZTogdGVzdC9fY29tbW9uLmpzIG92ZXJyaWRlcyBzZXRUaW1lb3V0KCkgZm9yIHRoZSB0ZXN0czsgaWYgdGhpc1xyXG4gICAgLy8gZ2xvYmFsIGZ1bmN0aW9uIGlzIHVzZWQgYW55d2hlcmUgZWxzZSwgaXQgbWF5IGdpdmUgaW5jb3JyZWN0IHJlc3VsdHMuXHJcbiAgICAvLyBUaGlzIGlzIHdoeSB3ZSBkaXNhYmxlIEVTTGludCdzIG5vLXVuZGVmIHJ1bGUgbG9jYWxseS5cclxuICAgIC8vIGh0dHBzOi8vZ2l0bGFiLmNvbS9leWVvL2FkYmxvY2twbHVzL2FkYmxvY2twbHVzY29yZS9pc3N1ZXMvNDNcclxuICAgIHRoaXMuX3RpbWVvdXQgPSBzZXRUaW1lb3V0KGNoZWNrLCBkZWxheSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENsZWFyIHByZXZpb3VzbHkgc2NoZWR1bGVkIGNoZWNrcywgaWYgYW55LlxyXG4gICAqL1xyXG4gIHVuc2NoZWR1bGVDaGVja3MoKVxyXG4gIHtcclxuICAgIGlmICh0aGlzLl90aW1lb3V0KVxyXG4gICAge1xyXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcclxuICAgICAgdGhpcy5fdGltZW91dCA9IDA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVja3Mgd2hldGhlciBhbnl0aGluZyBuZWVkcyBkb3dubG9hZGluZy5cclxuICAgKi9cclxuICBfZG9DaGVjaygpXHJcbiAge1xyXG4gICAgbGV0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICBmb3IgKGxldCBkb3dubG9hZGFibGUgb2YgdGhpcy5kYXRhU291cmNlKCkpXHJcbiAgICB7XHJcbiAgICAgIGlmIChkb3dubG9hZGFibGUubGFzdENoZWNrICYmXHJcbiAgICAgICAgICBub3cgLSBkb3dubG9hZGFibGUubGFzdENoZWNrID4gdGhpcy5tYXhBYnNlbmNlSW50ZXJ2YWwpXHJcbiAgICAgIHtcclxuICAgICAgICAvLyBObyBjaGVja3MgZm9yIGEgbG9uZyB0aW1lIGludGVydmFsIC0gdXNlciBtdXN0IGhhdmUgYmVlbiBvZmZsaW5lLFxyXG4gICAgICAgIC8vIGUuZy4gIGR1cmluZyBhIHdlZWtlbmQuIEluY3JlYXNlIHNvZnQgZXhwaXJhdGlvbiB0byBwcmV2ZW50IGxvYWRcclxuICAgICAgICAvLyBwZWFrcyBvbiB0aGUgc2VydmVyLlxyXG4gICAgICAgIGRvd25sb2FkYWJsZS5zb2Z0RXhwaXJhdGlvbiArPSBub3cgLSBkb3dubG9hZGFibGUubGFzdENoZWNrO1xyXG4gICAgICB9XHJcbiAgICAgIGRvd25sb2FkYWJsZS5sYXN0Q2hlY2sgPSBub3c7XHJcblxyXG4gICAgICAvLyBTYW5pdHkgY2hlY2s6IGRvIGV4cGlyYXRpb24gdGltZXMgbWFrZSBzZW5zZT8gTWFrZSBzdXJlIHBlb3BsZSBjaGFuZ2luZ1xyXG4gICAgICAvLyBzeXN0ZW0gY2xvY2sgZG9uJ3QgZ2V0IHN0dWNrIHdpdGggb3V0ZGF0ZWQgc3Vic2NyaXB0aW9ucy5cclxuICAgICAgaWYgKGRvd25sb2FkYWJsZS5oYXJkRXhwaXJhdGlvbiAtIG5vdyA+IHRoaXMubWF4RXhwaXJhdGlvbkludGVydmFsKVxyXG4gICAgICAgIGRvd25sb2FkYWJsZS5oYXJkRXhwaXJhdGlvbiA9IG5vdyArIHRoaXMubWF4RXhwaXJhdGlvbkludGVydmFsO1xyXG4gICAgICBpZiAoZG93bmxvYWRhYmxlLnNvZnRFeHBpcmF0aW9uIC0gbm93ID4gdGhpcy5tYXhFeHBpcmF0aW9uSW50ZXJ2YWwpXHJcbiAgICAgICAgZG93bmxvYWRhYmxlLnNvZnRFeHBpcmF0aW9uID0gbm93ICsgdGhpcy5tYXhFeHBpcmF0aW9uSW50ZXJ2YWw7XHJcblxyXG4gICAgICAvLyBOb3RpZnkgdGhlIGNhbGxlciBhYm91dCBjaGFuZ2VzIHRvIGV4cGlyYXRpb24gcGFyYW1ldGVyc1xyXG4gICAgICBpZiAodGhpcy5vbkV4cGlyYXRpb25DaGFuZ2UpXHJcbiAgICAgICAgdGhpcy5vbkV4cGlyYXRpb25DaGFuZ2UoZG93bmxvYWRhYmxlKTtcclxuXHJcbiAgICAgIC8vIERvZXMgdGhhdCBvYmplY3QgbmVlZCBkb3dubG9hZGluZz9cclxuICAgICAgaWYgKGRvd25sb2FkYWJsZS5zb2Z0RXhwaXJhdGlvbiA+IG5vdyAmJlxyXG4gICAgICAgICAgZG93bmxvYWRhYmxlLmhhcmRFeHBpcmF0aW9uID4gbm93KVxyXG4gICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgLy8gRG8gbm90IHJldHJ5IGRvd25sb2FkcyB0b28gb2Z0ZW5cclxuICAgICAgaWYgKGRvd25sb2FkYWJsZS5sYXN0RXJyb3IgJiZcclxuICAgICAgICAgIG5vdyAtIGRvd25sb2FkYWJsZS5sYXN0RXJyb3IgPCB0aGlzLm1pblJldHJ5SW50ZXJ2YWwpXHJcbiAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICB0aGlzLl9kb3dubG9hZChkb3dubG9hZGFibGUsIDApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIHdoZXRoZXIgYW4gYWRkcmVzcyBpcyBjdXJyZW50bHkgYmVpbmcgZG93bmxvYWRlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICovXHJcbiAgaXNEb3dubG9hZGluZyh1cmwpXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Rvd25sb2FkaW5nLmhhcyh1cmwpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RhcnRzIGRvd25sb2FkaW5nIGZvciBhbiBvYmplY3QuXHJcbiAgICogQHBhcmFtIHtEb3dubG9hZGFibGV9IGRvd25sb2FkYWJsZVxyXG4gICAqL1xyXG4gIGRvd25sb2FkKGRvd25sb2FkYWJsZSlcclxuICB7XHJcbiAgICB0aGlzLl9kb3dubG9hZChkb3dubG9hZGFibGUsIDApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2VuZXJhdGVzIHRoZSByZWFsIGRvd25sb2FkIFVSTCBmb3IgYW4gb2JqZWN0IGJ5IGFwcGVuZGluZyB2YXJpb3VzXHJcbiAgICogcGFyYW1ldGVycy5cclxuICAgKiBAcGFyYW0ge0Rvd25sb2FkYWJsZX0gZG93bmxvYWRhYmxlXHJcbiAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgKi9cclxuICBnZXREb3dubG9hZFVybChkb3dubG9hZGFibGUpXHJcbiAge1xyXG4gICAgY29uc3Qge2FkZG9uTmFtZSwgYWRkb25WZXJzaW9uLCBhcHBsaWNhdGlvbiwgYXBwbGljYXRpb25WZXJzaW9uLFxyXG4gICAgICAgICAgIHBsYXRmb3JtLCBwbGF0Zm9ybVZlcnNpb259ID0gcmVxdWlyZShcImluZm9cIik7XHJcblxyXG4gICAgbGV0IHVybCA9IGRvd25sb2FkYWJsZS5yZWRpcmVjdFVSTCB8fCBkb3dubG9hZGFibGUudXJsO1xyXG4gICAgaWYgKHVybC5pbmNsdWRlcyhcIj9cIikpXHJcbiAgICAgIHVybCArPSBcIiZcIjtcclxuICAgIGVsc2VcclxuICAgICAgdXJsICs9IFwiP1wiO1xyXG5cclxuICAgIC8vIFdlIGxpbWl0IHRoZSBkb3dubG9hZCBjb3VudCB0byA0KyB0byBrZWVwIHRoZSByZXF1ZXN0IGFub255bWl6ZWQuXHJcbiAgICBsZXQge2Rvd25sb2FkQ291bnQsIG1ldGhvZH0gPSBkb3dubG9hZGFibGU7XHJcbiAgICBpZiAoZG93bmxvYWRDb3VudCA+IDQpXHJcbiAgICAgIGRvd25sb2FkQ291bnQgPSBcIjQrXCI7XHJcblxyXG4gICAgdXJsICs9IFwiYWRkb25OYW1lPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGFkZG9uTmFtZSkgK1xyXG4gICAgICAgICAgIFwiJmFkZG9uVmVyc2lvbj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChhZGRvblZlcnNpb24pICtcclxuICAgICAgICAgICBcIiZhcHBsaWNhdGlvbj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChhcHBsaWNhdGlvbikgK1xyXG4gICAgICAgICAgIFwiJmFwcGxpY2F0aW9uVmVyc2lvbj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChhcHBsaWNhdGlvblZlcnNpb24pICtcclxuICAgICAgICAgICBcIiZwbGF0Zm9ybT1cIiArIGVuY29kZVVSSUNvbXBvbmVudChwbGF0Zm9ybSkgK1xyXG4gICAgICAgICAgIFwiJnBsYXRmb3JtVmVyc2lvbj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChwbGF0Zm9ybVZlcnNpb24pICtcclxuICAgICAgICAgICBcIiZsYXN0VmVyc2lvbj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChkb3dubG9hZGFibGUubGFzdFZlcnNpb24pICtcclxuICAgICAgICAgICBcIiZkb3dubG9hZENvdW50PVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGRvd25sb2FkQ291bnQpICtcclxuICAgICAgICAgICBcIiZkaXNhYmxlZD1cIiArIFN0cmluZyhtZXRob2QgPT09IFwiSEVBRFwiKTtcclxuXHJcbiAgICBpZiAoZG93bmxvYWRhYmxlLmZpcnN0VmVyc2lvbiAmJiAhZG93bmxvYWRhYmxlLnJlZGlyZWN0VVJMKVxyXG4gICAgICB1cmwgKz0gXCImZmlyc3RWZXJzaW9uPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGRvd25sb2FkYWJsZS5maXJzdFZlcnNpb24pO1xyXG5cclxuICAgIHJldHVybiB1cmw7XHJcbiAgfVxyXG5cclxuICBfZG93bmxvYWQoZG93bmxvYWRhYmxlLCByZWRpcmVjdHMpXHJcbiAge1xyXG4gICAgaWYgKHRoaXMuaXNEb3dubG9hZGluZyhkb3dubG9hZGFibGUudXJsKSlcclxuICAgICAgcmV0dXJuO1xyXG5cclxuICAgIGxldCBkb3dubG9hZFVybCA9IHRoaXMuZ2V0RG93bmxvYWRVcmwoZG93bmxvYWRhYmxlKTtcclxuICAgIGxldCByZXNwb25zZVN0YXR1cyA9IDA7XHJcblxyXG4gICAgbGV0IGVycm9yQ2FsbGJhY2sgPSBlcnJvciA9PlxyXG4gICAge1xyXG4gICAgICBjb25zb2xlLndhcm4oXCJBZGJsb2NrIFBsdXM6IERvd25sb2FkaW5nIFVSTCBcIiArIGRvd25sb2FkYWJsZS51cmwgK1xyXG4gICAgICAgICAgICAgICAgICAgXCIgZmFpbGVkIChcIiArIGVycm9yICsgXCIpXFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgXCJEb3dubG9hZCBhZGRyZXNzOiBcIiArIGRvd25sb2FkVXJsICsgXCJcXG5cIiArXHJcbiAgICAgICAgICAgICAgICAgICBcIlNlcnZlciByZXNwb25zZTogXCIgKyByZXNwb25zZVN0YXR1cyk7XHJcblxyXG4gICAgICBpZiAodGhpcy5vbkRvd25sb2FkRXJyb3IpXHJcbiAgICAgIHtcclxuICAgICAgICAvLyBBbGxvdyBvbmUgZXh0cmEgcmVkaXJlY3QgaWYgdGhlIGVycm9yIGhhbmRsZXIgZ2l2ZXMgdXMgYSByZWRpcmVjdCBVUkxcclxuICAgICAgICBsZXQgcmVkaXJlY3RDYWxsYmFjayA9IG51bGw7XHJcbiAgICAgICAgaWYgKHJlZGlyZWN0cyA8PSB0aGlzLm1heFJlZGlyZWN0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICByZWRpcmVjdENhbGxiYWNrID0gdXJsID0+XHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGRvd25sb2FkYWJsZS5yZWRpcmVjdFVSTCA9IHVybDtcclxuICAgICAgICAgICAgdGhpcy5fZG93bmxvYWQoZG93bmxvYWRhYmxlLCByZWRpcmVjdHMgKyAxKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm9uRG93bmxvYWRFcnJvcihkb3dubG9hZGFibGUsIGRvd25sb2FkVXJsLCBlcnJvciwgcmVzcG9uc2VTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RDYWxsYmFjayk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgaWYgKCFEb3dubG9hZGVyLmlzVmFsaWRVUkwoZG93bmxvYWRVcmwpKVxyXG4gICAge1xyXG4gICAgICBlcnJvckNhbGxiYWNrKFwic3luY2hyb25pemVfaW52YWxpZF91cmxcIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcmVxdWVzdFVSTCA9IG5ldyBVUkwoZG93bmxvYWRVcmwpO1xyXG5cclxuICAgIGxldCBpbml0T2JqID0ge1xyXG4gICAgICBjYWNoZTogXCJuby1zdG9yZVwiLFxyXG4gICAgICBjcmVkZW50aWFsczogXCJvbWl0XCIsXHJcbiAgICAgIHJlZmVycmVyOiBcIm5vLXJlZmVycmVyXCIsXHJcbiAgICAgIG1ldGhvZDogZG93bmxvYWRhYmxlLm1ldGhvZFxyXG4gICAgfTtcclxuXHJcbiAgICBsZXQgaGFuZGxlRXJyb3IgPSAoKSA9PlxyXG4gICAge1xyXG4gICAgICB0aGlzLl9kb3dubG9hZGluZy5kZWxldGUoZG93bmxvYWRhYmxlLnVybCk7XHJcbiAgICAgIGVycm9yQ2FsbGJhY2soXCJzeW5jaHJvbml6ZV9jb25uZWN0aW9uX2Vycm9yXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICBsZXQgaGFuZGxlUmVzcG9uc2UgPSByZXNwb25zZSA9PlxyXG4gICAge1xyXG4gICAgICB0aGlzLl9kb3dubG9hZGluZy5kZWxldGUoZG93bmxvYWRhYmxlLnVybCk7XHJcblxyXG4gICAgICAvLyBJZiB0aGUgUmVzcG9uc2UudXJsIHByb3BlcnR5IGlzIGF2YWlsYWJsZSBbMV0sIGRpc2FsbG93IHJlZGlyZWN0aW9uXHJcbiAgICAgIC8vIGZyb20gSFRUUFMgdG8gYW55IG90aGVyIHByb3RvY29sLlxyXG4gICAgICAvLyBbMV06IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9SZXNwb25zZS91cmwjQnJvd3Nlcl9jb21wYXRpYmlsaXR5XHJcbiAgICAgIGlmICh0eXBlb2YgcmVzcG9uc2UudXJsID09IFwic3RyaW5nXCIgJiYgcmVxdWVzdFVSTC5wcm90b2NvbCA9PSBcImh0dHBzOlwiICYmXHJcbiAgICAgICAgICBuZXcgVVJMKHJlc3BvbnNlLnVybCkucHJvdG9jb2wgIT0gcmVxdWVzdFVSTC5wcm90b2NvbClcclxuICAgICAge1xyXG4gICAgICAgIGVycm9yQ2FsbGJhY2soXCJzeW5jaHJvbml6ZV9jb25uZWN0aW9uX2Vycm9yXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVzcG9uc2VTdGF0dXMgPSByZXNwb25zZS5zdGF0dXM7XHJcblxyXG4gICAgICBpZiAocmVzcG9uc2VTdGF0dXMgIT0gMjAwKVxyXG4gICAgICB7XHJcbiAgICAgICAgZXJyb3JDYWxsYmFjayhcInN5bmNocm9uaXplX2Nvbm5lY3Rpb25fZXJyb3JcIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBXZSBuZWVkIHRvIGtlZXAgdXBkYXRlZCB0aGUgc3Vic2NyaXB0aW9uIHZlcnNpb24gZXZlbiB2aWEgSEVBRC5cclxuICAgICAgaWYgKGRvd25sb2FkYWJsZS5tZXRob2QgPT09IFwiSEVBRFwiKVxyXG4gICAgICB7XHJcbiAgICAgICAgLy8gSG93ZXZlciwgYXMgd2UgZG9uJ3Qga25vdyBpZiB0aGUgc2VydmVyIHdvdWxkIHJlc3BvbmQgd2l0aCBzdWNoXHJcbiAgICAgICAgLy8gZGV0YWlsLCB3ZSBuZWVkIHRvIGJlIHN1cmUgdGhlcmUgaXMgc3VjaCBgRGF0ZWAgb3IgYGRhdGVgIGZpZWxkLlxyXG4gICAgICAgIGxldCBkYXRlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoXCJEYXRlXCIpIHx8IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KFwiZGF0ZVwiKTtcclxuICAgICAgICBpZiAoZGF0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAvLyBpZiB0aGF0J3MgdGhlIGNhc2UsIHdlIHdhbnQgaXQgdG8gYmUgZm9ybWF0dGVkIGFzIFlZWVlNTURESEhNTS5cclxuICAgICAgICAgIGRvd25sb2FkYWJsZS5sYXN0VmVyc2lvbiA9XHJcbiAgICAgICAgICAgIG5ldyBEYXRlKGRhdGUpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvXFxEL2csIFwiXCIpLnNsaWNlKDAsIDEyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgZG93bmxvYWRhYmxlLmRvd25sb2FkQ291bnQrKztcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVzcG9uc2UudGV4dCgpLnRoZW4oXHJcbiAgICAgICAgcmVzcG9uc2VUZXh0ID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdGhpcy5vbkRvd25sb2FkU3VjY2VzcyhcclxuICAgICAgICAgICAgZG93bmxvYWRhYmxlLCByZXNwb25zZVRleHQsIGVycm9yQ2FsbGJhY2ssIHVybCA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgaWYgKHJlZGlyZWN0cyA+PSB0aGlzLm1heFJlZGlyZWN0cylcclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrKFwic3luY2hyb25pemVfY29ubmVjdGlvbl9lcnJvclwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGRvd25sb2FkYWJsZS5yZWRpcmVjdFVSTCA9IHVybDtcclxuICAgICAgICAgICAgICB0aGlzLl9kb3dubG9hZChkb3dubG9hZGFibGUsIHJlZGlyZWN0cyArIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgKCkgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICBlcnJvckNhbGxiYWNrKFwic3luY2hyb25pemVfY29ubmVjdGlvbl9lcnJvclwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIGZldGNoKHJlcXVlc3RVUkwuaHJlZiwgaW5pdE9iaikudGhlbihoYW5kbGVSZXNwb25zZSwgaGFuZGxlRXJyb3IpO1xyXG5cclxuICAgIHRoaXMuX2Rvd25sb2FkaW5nLmFkZChkb3dubG9hZGFibGUudXJsKTtcclxuXHJcbiAgICBpZiAodGhpcy5vbkRvd25sb2FkU3RhcnRlZClcclxuICAgICAgdGhpcy5vbkRvd25sb2FkU3RhcnRlZChkb3dubG9hZGFibGUpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUHJvZHVjZXMgYSBzb2Z0IGFuZCBhIGhhcmQgZXhwaXJhdGlvbiBpbnRlcnZhbCBmb3IgYSBnaXZlbiBzdXBwbGllZFxyXG4gICAqIGV4cGlyYXRpb24gaW50ZXJ2YWwuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGludGVydmFsXHJcbiAgICogQHJldHVybnMge0FycmF5LjxudW1iZXI+fSBzb2Z0IGFuZCBoYXJkIGV4cGlyYXRpb24gaW50ZXJ2YWxcclxuICAgKi9cclxuICBwcm9jZXNzRXhwaXJhdGlvbkludGVydmFsKGludGVydmFsKVxyXG4gIHtcclxuICAgIGludGVydmFsID0gTWF0aC5taW4oTWF0aC5tYXgoaW50ZXJ2YWwsIDApLCB0aGlzLm1heEV4cGlyYXRpb25JbnRlcnZhbCk7XHJcbiAgICBsZXQgc29mdCA9IE1hdGgucm91bmQoaW50ZXJ2YWwgKiAoTWF0aC5yYW5kb20oKSAqIDAuNCArIDAuOCkpO1xyXG4gICAgbGV0IGhhcmQgPSBpbnRlcnZhbCAqIDI7XHJcbiAgICBsZXQgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIHJldHVybiBbbm93ICsgc29mdCwgbm93ICsgaGFyZF07XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIENoZWNrcyB3aGV0aGVyIGEgVVJMIGlzIGEgdmFsaWQgZG93bmxvYWQgVVJMLlxyXG4gKlxyXG4gKiBGb3IgYSBVUkwgdG8gYmUgYSB2YWxpZCBkb3dubG9hZCBVUkwsIGl0cyBzY2hlbWUgbXVzdCBiZSBgaHR0cHNgIG9yIGBkYXRhYC5cclxuICogSWYgdGhlIGhvc3QgY29tcG9uZW50IG9mIHRoZSBVUkwgaXMgYGxvY2FsaG9zdGAsIGAxMjcuMC4wLjFgLCBvciBgWzo6MV1gLFxyXG4gKiBob3dldmVyLCBidXQgaXRzIHNjaGVtZSBpcyBub3QgYGh0dHBzYCBvciBgZGF0YWAsIHRoZSBVUkwgaXMgc3RpbGxcclxuICogY29uc2lkZXJlZCB0byBiZSBhIHZhbGlkIGRvd25sb2FkIFVSTC5cclxuICpcclxuICogYGh0dHBzOi8vZXhhbXBsZS5jb20vYCwgYGRhdGE6LEhlbGxvJTJDJTIwV29ybGQhYCwgYW5kXHJcbiAqIGBodHRwOi8vMTI3LjAuMC4xL2V4YW1wbGUudHh0YCBhcmUgYWxsIGV4YW1wbGVzIG9mIHZhbGlkIGRvd25sb2FkIFVSTHMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTC5cclxuICpcclxuICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIFVSTCBpcyBhIHZhbGlkIGRvd25sb2FkIFVSTC5cclxuICpcclxuICogQHBhY2thZ2VcclxuICovXHJcbmV4cG9ydHMuRG93bmxvYWRlci5pc1ZhbGlkVVJMID0gZnVuY3Rpb24gaXNWYWxpZFVSTCh1cmwpXHJcbntcclxuICB0cnlcclxuICB7XHJcbiAgICB1cmwgPSBuZXcgVVJMKHVybCk7XHJcbiAgfVxyXG4gIGNhdGNoIChlcnJvcilcclxuICB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBpZiAoIVtcImh0dHBzOlwiLCBcImRhdGE6XCJdLmluY2x1ZGVzKHVybC5wcm90b2NvbCkgJiZcclxuICAgICAgIWlzTG9jYWxob3N0KHVybC5ob3N0bmFtZSkpXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEEgYERvd25sb2FkYWJsZWAgb2JqZWN0IHJlcHJlc2VudHMgYSBkb3dubG9hZGFibGUgcmVzb3VyY2UuXHJcbiAqIEBwYWNrYWdlXHJcbiAqL1xyXG5leHBvcnRzLkRvd25sb2FkYWJsZSA9IGNsYXNzIERvd25sb2FkYWJsZVxyXG57XHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhbiBvYmplY3QgdGhhdCBjYW4gYmUgZG93bmxvYWRlZCBieSB0aGUgZG93bmxvYWRlci5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsICBVUkwgdGhhdCBoYXMgdG8gYmUgcmVxdWVzdGVkIGZvciB0aGUgb2JqZWN0XHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IodXJsKVxyXG4gIHtcclxuICAgIC8qKlxyXG4gICAgICogVVJMIHRoYXQgdGhlIGRvd25sb2FkIHdhcyByZWRpcmVjdGVkIHRvIGlmIGFueS5cclxuICAgICAqIEB0eXBlIHtzdHJpbmc/fVxyXG4gICAgICovXHJcbiAgICB0aGlzLnJlZGlyZWN0VVJMID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRpbWUgb2YgbGFzdCBkb3dubG9hZCBlcnJvciBvciAwIGlmIHRoZSBsYXN0IGRvd25sb2FkIHdhcyBzdWNjZXNzZnVsLlxyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgdGhpcy5sYXN0RXJyb3IgPSAwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGltZSBvZiBsYXN0IGNoZWNrIHdoZXRoZXIgdGhlIG9iamVjdCBuZWVkcyBkb3dubG9hZGluZy5cclxuICAgICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIHRoaXMubGFzdENoZWNrID0gMDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE9iamVjdCB2ZXJzaW9uIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGxhc3Qgc3VjY2Vzc2Z1bCBkb3dubG9hZC5cclxuICAgICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIHRoaXMubGFzdFZlcnNpb24gPSAwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSBzdHJpbmcgaW5kaWNhdGluZyB0aGUgdmVyc2lvbiBvZiB0aGUgZmlyc3QgZXZlciBkb3dubG9hZGVkIHJlc291cmNlLFxyXG4gICAgICogaW4gYFlZWVlbTU1bRERdXVstRV1gIGZvcm1hdCBvciBqdXN0IGBcIjBcImAgb3IgYFwiMC1FXCJgLlxyXG4gICAgICpcclxuICAgICAqIE5vdGUgdGhhdCB1bmxpa2UgYHtAbGluayBtb2R1bGU6ZG93bmxvYWRlci5Eb3dubG9hZGFibGUjbGFzdFZlcnNpb259YFxyXG4gICAgICogdGhpcyBwcm9wZXJ0eSBpcyByZWxhdGVkIHRvIGFuYWx5dGljcyBhbmQgaXRzIHZhbHVlIGlzIGNvbW1vbiBhY3Jvc3MgYWxsXHJcbiAgICAgKiBkb3dubG9hZGFibGUgcmVzb3VyY2VzLlxyXG4gICAgICpcclxuICAgICAqIElmIGB7QGxpbmsgbW9kdWxlOmRvd25sb2FkZXIuRG93bmxvYWRhYmxlI3VybH1gIGlzIG5vdCBhIHRydXN0ZWQgVVJMLFxyXG4gICAgICogdGhlIHZhbHVlIG9mIHRoaXMgcHJvcGVydHkgc2hvdWxkIGJlIHNldCB0byBgbnVsbGAuXHJcbiAgICAgKlxyXG4gICAgICogQHNlZSBtb2R1bGU6YW5hbHl0aWNzfkFuYWx5dGljcyNnZXRGaXJzdFZlcnNpb25cclxuICAgICAqIEBzZWUgbW9kdWxlOmFuYWx5dGljc35BbmFseXRpY3MjaXNUcnVzdGVkXHJcbiAgICAgKlxyXG4gICAgICogQHR5cGUgez9zdHJpbmd9XHJcbiAgICAgKlxyXG4gICAgICogQHBhY2thZ2VcclxuICAgICAqL1xyXG4gICAgdGhpcy5maXJzdFZlcnNpb24gPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU29mdCBleHBpcmF0aW9uIGludGVydmFsOyB3aWxsIGluY3JlYXNlIGlmIG5vIGNoZWNrcyBhcmUgcGVyZm9ybWVkIGZvciBhXHJcbiAgICAgKiB3aGlsZS5cclxuICAgICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIHRoaXMuc29mdEV4cGlyYXRpb24gPSAwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFyZCBleHBpcmF0aW9uIGludGVydmFsOyB0aGlzIGlzIGZpeGVkLlxyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgdGhpcy5oYXJkRXhwaXJhdGlvbiA9IDA7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOdW1iZXIgaW5kaWNhdGluZyBob3cgb2Z0ZW4gdGhlIG9iamVjdCB3YXMgZG93bmxvYWRlZC5cclxuICAgICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIHRoaXMuZG93bmxvYWRDb3VudCA9IDA7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXF1ZXN0IG1ldGhvZCB0byB1c2UsIHdoaWNoIGlzIGVpdGhlciBcIkdFVFwiIG9yIFwiSEVBRFwiLlxyXG4gICAgICogQHR5cGUge3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgdGhpcy5tZXRob2QgPSBcIkdFVFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVVJMIHRoYXQgaGFzIHRvIGJlIHJlcXVlc3RlZCBmb3IgdGhlIG9iamVjdC5cclxuICAgICAqIEB0eXBlIHtzdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIHRoaXMudXJsID0gdXJsO1xyXG4gIH1cclxufTtcclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlICovXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbi8qKlxyXG4gKiBAZmlsZU92ZXJ2aWV3IEVsZW1lbnQgaGlkaW5nIGltcGxlbWVudGF0aW9uLlxyXG4gKi9cclxuXHJcbmNvbnN0IHtlbGVtSGlkZUV4Y2VwdGlvbnN9ID0gcmVxdWlyZShcIi4vZWxlbUhpZGVFeGNlcHRpb25zXCIpO1xyXG5jb25zdCB7ZG9tYWluU3VmZml4ZXN9ID0gcmVxdWlyZShcIi4vdXJsXCIpO1xyXG5jb25zdCB7RmlsdGVyc0J5RG9tYWluLCBGaWx0ZXJNYXB9ID0gcmVxdWlyZShcIi4vZmlsdGVyc0J5RG9tYWluXCIpO1xyXG5jb25zdCB7Q2FjaGV9ID0gcmVxdWlyZShcIi4vY2FjaGluZ1wiKTtcclxuXHJcbi8qKlxyXG4gKiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygc2VsZWN0b3JzIGluIGEgQ1NTIHJ1bGUuXHJcbiAqXHJcbiAqIFRoaXMgaXMgdXNlZCBieVxyXG4gKiBge0BsaW5rIG1vZHVsZTplbGVtSGlkZS5jcmVhdGVTdHlsZVNoZWV0IGNyZWF0ZVN0eWxlU2hlZXQoKX1gIHRvIHNwbGl0IHVwIGFcclxuICogbG9uZyBsaXN0IG9mIHNlbGVjdG9ycyBpbnRvIG11bHRpcGxlIHJ1bGVzLlxyXG4gKlxyXG4gKiBAY29uc3Qge251bWJlcn1cclxuICogQGRlZmF1bHRcclxuICovXHJcbmNvbnN0IFNFTEVDVE9SX0dST1VQX1NJWkUgPSAxMDI0O1xyXG5cclxuLyoqXHJcbiAqIGB7QGxpbmsgbW9kdWxlOmVsZW1IaWRlLmVsZW1IaWRlIGVsZW1IaWRlfWAgaW1wbGVtZW50YXRpb24uXHJcbiAqL1xyXG5jbGFzcyBFbGVtSGlkZVxyXG57XHJcbiAgLyoqXHJcbiAgICogQGhpZGVjb25zdHJ1Y3RvclxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKClcclxuICB7XHJcbiAgICAvKipcclxuICAgICAqIExvb2t1cCB0YWJsZSwgYWN0aXZlIGZsYWcsIGJ5IGZpbHRlciBieSBkb21haW4uXHJcbiAgICAgKlxyXG4gICAgICogKE9ubHkgY29udGFpbnMgZmlsdGVycyB0aGF0IGFyZW4ndCB1bmNvbmRpdGlvbmFsbHkgbWF0Y2hlZCBmb3IgYWxsXHJcbiAgICAgKiBkb21haW5zLilcclxuICAgICAqXHJcbiAgICAgKiBAdHlwZSB7RmlsdGVyc0J5RG9tYWlufVxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHRoaXMuX2ZpbHRlcnNCeURvbWFpbiA9IG5ldyBGaWx0ZXJzQnlEb21haW4oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIExvb2t1cCB0YWJsZSwgZmlsdGVyIGJ5IHNlbGVjdG9yLlxyXG4gICAgICpcclxuICAgICAqIChPbmx5IHVzZWQgZm9yIHNlbGVjdG9ycyB0aGF0IGFyZSB1bmNvbmRpdGlvbmFsbHkgbWF0Y2hlZCBmb3IgYWxsXHJcbiAgICAgKiBkb21haW5zLilcclxuICAgICAqXHJcbiAgICAgKiBAdHlwZSB7TWFwLjxzdHJpbmcsIEZpbHRlcj59XHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdGhpcy5fZmlsdGVyQnlTZWxlY3RvciA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYXJyYXkgY2FjaGVzIHRoZSBrZXlzIG9mXHJcbiAgICAgKiBge0BsaW5rIG1vZHVsZTplbGVtSGlkZX5FbGVtSGlkZSNfZmlsdGVyQnlTZWxlY3RvciBfZmlsdGVyQnlTZWxlY3Rvcn1gXHJcbiAgICAgKiAoc2VsZWN0b3JzIHdoaWNoIHVuY29uZGl0aW9uYWxseSBhcHBseSBvbiBhbGwgZG9tYWlucykuXHJcbiAgICAgKlxyXG4gICAgICogSXQgd2lsbCBiZSBgbnVsbGAgaWYgdGhlIGNhY2hlIG5lZWRzIHRvIGJlIHJlYnVpbHQuXHJcbiAgICAgKlxyXG4gICAgICogQHR5cGUgez9BcnJheS48c3RyaW5nPn1cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICB0aGlzLl91bmNvbmRpdGlvbmFsU2VsZWN0b3JzID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBkZWZhdWx0IHN0eWxlIHNoZWV0IHRoYXQgYXBwbGllcyBvbiBhbGwgZG9tYWlucy5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGlzIGJhc2VkIG9uIHRoZSB2YWx1ZSBvZlxyXG4gICAgICogYHtAbGluayBtb2R1bGU6ZWxlbUhpZGV+RWxlbUhpZGUjX3VuY29uZGl0aW9uYWxTZWxlY3RvcnNcclxuICAgICAqICAgICAgICAgX3VuY29uZGl0aW9uYWxTZWxlY3RvcnN9YC5cclxuICAgICAqXHJcbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICB0aGlzLl9kZWZhdWx0U3R5bGVTaGVldCA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY29tbW9uIHN0eWxlIHNoZWV0IHRoYXQgYXBwbGllcyBvbiBhbGwgdW5rbm93biBkb21haW5zLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgaXMgYSBjb25jYXRlbmF0aW9uIG9mIHRoZSBkZWZhdWx0IHN0eWxlIHNoZWV0IGFuZCBhbiBhZGRpdGlvbmFsXHJcbiAgICAgKiBzdHlsZSBzaGVldCBiYXNlZCBvbiBzZWxlY3RvcnMgZnJvbSBhbGwgZ2VuZXJpYyBmaWx0ZXJzIHRoYXQgYXJlIG5vdCBpblxyXG4gICAgICogdGhlIGB7QGxpbmsgbW9kdWxlOmVsZW1IaWRlfkVsZW1IaWRlI191bmNvbmRpdGlvbmFsU2VsZWN0b3JzXHJcbiAgICAgKiAgICAgICAgICAgICBfdW5jb25kaXRpb25hbFNlbGVjdG9yc31gIGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHR5cGUgez9zdHJpbmd9XHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdGhpcy5fY29tbW9uU3R5bGVTaGVldCA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWNoZSBvZiBnZW5lcmF0ZWQgZG9tYWluLXNwZWNpZmljIHN0eWxlIHNoZWV0cy5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGNvbnRhaW5zIGVudHJpZXMgZm9yIG9ubHkga25vd24gZG9tYWlucy4gSWYgYSBkb21haW4gaXMgdW5rbm93biwgaXRcclxuICAgICAqIGdldHMgYHtAbGluayBtb2R1bGU6ZWxlbUhpZGV+RWxlbUhpZGUjX2NvbW1vblN0eWxlU2hlZXRcclxuICAgICAqICAgICAgICAgICAgICBfY29tbW9uU3R5bGVTaGVldH1gLlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtDYWNoZS48c3RyaW5nLCBzdHJpbmc+fVxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHRoaXMuX3N0eWxlU2hlZXRDYWNoZSA9IG5ldyBDYWNoZSgxMDApO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IGNvbnRhaW5pbmcga25vd24gZWxlbWVudCBoaWRpbmcgZmlsdGVyc1xyXG4gICAgICogQHR5cGUge1NldC48bW9kdWxlOmZpbHRlckNsYXNzZXMuRWxlbUhpZGVGaWx0ZXI+fVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdGhpcy5fZmlsdGVycyA9IG5ldyBTZXQoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFsbCBkb21haW5zIGtub3duIHRvIG9jY3VyIGluIGV4Y2VwdGlvbnNcclxuICAgICAqIEB0eXBlIHtTZXQuPHN0cmluZz59XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICB0aGlzLl9leGNlcHRpb25Eb21haW5zID0gbmV3IFNldCgpO1xyXG5cclxuICAgIGVsZW1IaWRlRXhjZXB0aW9ucy5vbihcImFkZGVkXCIsIHRoaXMuX29uRXhjZXB0aW9uQWRkZWQuYmluZCh0aGlzKSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGFsbCBrbm93biBlbGVtZW50IGhpZGluZyBmaWx0ZXJzLlxyXG4gICAqL1xyXG4gIGNsZWFyKClcclxuICB7XHJcbiAgICB0aGlzLl9jb21tb25TdHlsZVNoZWV0ID0gbnVsbDtcclxuXHJcbiAgICBmb3IgKGxldCBjb2xsZWN0aW9uIG9mIFt0aGlzLl9zdHlsZVNoZWV0Q2FjaGUsIHRoaXMuX2ZpbHRlcnNCeURvbWFpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZpbHRlckJ5U2VsZWN0b3IsIHRoaXMuX2ZpbHRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9leGNlcHRpb25Eb21haW5zXSlcclxuICAgICAgY29sbGVjdGlvbi5jbGVhcigpO1xyXG5cclxuICAgIHRoaXMuX3VuY29uZGl0aW9uYWxTZWxlY3RvcnMgPSBudWxsO1xyXG4gICAgdGhpcy5fZGVmYXVsdFN0eWxlU2hlZXQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGEgbmV3IGVsZW1lbnQgaGlkaW5nIGZpbHRlci5cclxuICAgKiBAcGFyYW0ge21vZHVsZTpmaWx0ZXJDbGFzc2VzLkVsZW1IaWRlRmlsdGVyfSBmaWx0ZXJcclxuICAgKi9cclxuICBhZGQoZmlsdGVyKVxyXG4gIHtcclxuICAgIGlmICh0aGlzLl9maWx0ZXJzLmhhcyhmaWx0ZXIpKVxyXG4gICAgICByZXR1cm47XHJcblxyXG4gICAgdGhpcy5fc3R5bGVTaGVldENhY2hlLmNsZWFyKCk7XHJcbiAgICB0aGlzLl9jb21tb25TdHlsZVNoZWV0ID0gbnVsbDtcclxuXHJcbiAgICBsZXQge2RvbWFpbnMsIHNlbGVjdG9yfSA9IGZpbHRlcjtcclxuXHJcbiAgICBpZiAoIShkb21haW5zIHx8IGVsZW1IaWRlRXhjZXB0aW9ucy5oYXNFeGNlcHRpb25zKHNlbGVjdG9yKSkpXHJcbiAgICB7XHJcbiAgICAgIC8vIFRoZSBuZXcgZmlsdGVyJ3Mgc2VsZWN0b3IgaXMgdW5jb25kaXRpb25hbGx5IGFwcGxpZWQgdG8gYWxsIGRvbWFpbnNcclxuICAgICAgdGhpcy5fZmlsdGVyQnlTZWxlY3Rvci5zZXQoc2VsZWN0b3IsIGZpbHRlcik7XHJcbiAgICAgIHRoaXMuX3VuY29uZGl0aW9uYWxTZWxlY3RvcnMgPSBudWxsO1xyXG4gICAgICB0aGlzLl9kZWZhdWx0U3R5bGVTaGVldCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIC8vIFRoZSBuZXcgZmlsdGVyJ3Mgc2VsZWN0b3Igb25seSBhcHBsaWVzIHRvIHNvbWUgZG9tYWluc1xyXG4gICAgICB0aGlzLl9maWx0ZXJzQnlEb21haW4uYWRkKGZpbHRlciwgZG9tYWlucyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fZmlsdGVycy5hZGQoZmlsdGVyKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgYW4gZXhpc3RpbmcgZWxlbWVudCBoaWRpbmcgZmlsdGVyLlxyXG4gICAqIEBwYXJhbSB7bW9kdWxlOmZpbHRlckNsYXNzZXMuRWxlbUhpZGVGaWx0ZXJ9IGZpbHRlclxyXG4gICAqL1xyXG4gIHJlbW92ZShmaWx0ZXIpXHJcbiAge1xyXG4gICAgaWYgKCF0aGlzLl9maWx0ZXJzLmhhcyhmaWx0ZXIpKVxyXG4gICAgICByZXR1cm47XHJcblxyXG4gICAgdGhpcy5fc3R5bGVTaGVldENhY2hlLmNsZWFyKCk7XHJcbiAgICB0aGlzLl9jb21tb25TdHlsZVNoZWV0ID0gbnVsbDtcclxuXHJcbiAgICBsZXQge3NlbGVjdG9yfSA9IGZpbHRlcjtcclxuXHJcbiAgICAvLyBVbmNvbmRpdGlhbGx5IGFwcGxpZWQgZWxlbWVudCBoaWRpbmcgZmlsdGVyc1xyXG4gICAgaWYgKHRoaXMuX2ZpbHRlckJ5U2VsZWN0b3IuZ2V0KHNlbGVjdG9yKSA9PSBmaWx0ZXIpXHJcbiAgICB7XHJcbiAgICAgIHRoaXMuX2ZpbHRlckJ5U2VsZWN0b3IuZGVsZXRlKHNlbGVjdG9yKTtcclxuICAgICAgdGhpcy5fdW5jb25kaXRpb25hbFNlbGVjdG9ycyA9IG51bGw7XHJcbiAgICAgIHRoaXMuX2RlZmF1bHRTdHlsZVNoZWV0ID0gbnVsbDtcclxuICAgIH1cclxuICAgIC8vIENvbmRpdGlvbmFsbHkgYXBwbGllZCBlbGVtZW50IGhpZGluZyBmaWx0ZXJzXHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIHRoaXMuX2ZpbHRlcnNCeURvbWFpbi5yZW1vdmUoZmlsdGVyKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9maWx0ZXJzLmRlbGV0ZShmaWx0ZXIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIHdoZXRoZXIgYW4gZWxlbWVudCBoaWRpbmcgZmlsdGVyIGV4aXN0cy5cclxuICAgKiBAcGFyYW0ge21vZHVsZTpmaWx0ZXJDbGFzc2VzLkVsZW1IaWRlRmlsdGVyfSBmaWx0ZXJcclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgKi9cclxuICBoYXMoZmlsdGVyKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLl9maWx0ZXJzLmhhcyhmaWx0ZXIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHR5cGVkZWYge29iamVjdH0gRWxlbUhpZGVTdHlsZVNoZWV0XHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IGNvZGUgQ1NTIGNvZGUuXHJcbiAgICogQHByb3BlcnR5IHs/QXJyYXkuPHN0cmluZz59IHNlbGVjdG9ycyBMaXN0IG9mIHNlbGVjdG9ycy5cclxuICAgKiBAcHJvcGVydHkgez9BcnJheS48c3RyaW5nPn0gZXhjZXB0aW9ucyBMaXN0IG9mIGV4Y2VwdGlvbnMuXHJcbiAgICovXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBzdHlsZSBzaGVldCBmb3IgYSBnaXZlbiBkb21haW4gYmFzZWQgb24gdGhlIGN1cnJlbnQgc2V0IG9mXHJcbiAgICogZmlsdGVycy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbi5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzcGVjaWZpY09ubHk9ZmFsc2VdIFdoZXRoZXIgc2VsZWN0b3JzIGZyb20gZ2VuZXJpY1xyXG4gICAqICAgZmlsdGVycyBzaG91bGQgYmUgaW5jbHVkZWQuXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbaW5jbHVkZVNlbGVjdG9ycz1mYWxzZV0gV2hldGhlciB0aGUgcmV0dXJuIHZhbHVlIHNob3VsZFxyXG4gICAqICAgaW5jbHVkZSBhIHNlcGFyYXRlIGxpc3Qgb2Ygc2VsZWN0b3JzLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2luY2x1ZGVFeGNlcHRpb25zPWZhbHNlXSBXaGV0aGVyIHRoZSByZXR1cm4gdmFsdWUgc2hvdWxkXHJcbiAgICogICBpbmNsdWRlIGEgc2VwYXJhdGUgbGlzdCBvZiBleGNlcHRpb25zLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge21vZHVsZTplbGVtSGlkZX5FbGVtSGlkZVN0eWxlU2hlZXR9IEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBDU1NcclxuICAgKiAgIGNvZGUgYW5kIHRoZSBsaXN0IG9mIHNlbGVjdG9ycy5cclxuICAgKi9cclxuICBnZXRTdHlsZVNoZWV0KGRvbWFpbiwgc3BlY2lmaWNPbmx5ID0gZmFsc2UsIGluY2x1ZGVTZWxlY3RvcnMgPSBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGluY2x1ZGVFeGNlcHRpb25zID0gZmFsc2UpXHJcbiAge1xyXG4gICAgbGV0IGNvZGUgPSBudWxsO1xyXG4gICAgbGV0IHNlbGVjdG9ycyA9IG51bGw7XHJcbiAgICBsZXQgZXhjZXB0aW9ucyA9IG51bGw7XHJcblxyXG4gICAgaWYgKHNwZWNpZmljT25seSlcclxuICAgIHtcclxuICAgICAgaWYgKGluY2x1ZGVFeGNlcHRpb25zKVxyXG4gICAgICB7XHJcbiAgICAgICAgbGV0IHNlbGVjdG9yc0FuZEV4Y2VwdGlvbnMgPVxyXG4gICAgICAgICAgdGhpcy5fZ2V0Q29uZGl0aW9uYWxTZWxlY3RvcnNXaXRoRXhjZXB0aW9ucyhkb21haW4sIHRydWUpO1xyXG5cclxuICAgICAgICBzZWxlY3RvcnMgPSBzZWxlY3RvcnNBbmRFeGNlcHRpb25zLnNlbGVjdG9ycztcclxuICAgICAgICBleGNlcHRpb25zID0gc2VsZWN0b3JzQW5kRXhjZXB0aW9ucy5leGNlcHRpb25zO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAge1xyXG4gICAgICAgIHNlbGVjdG9ycyA9IHRoaXMuX2dldENvbmRpdGlvbmFsU2VsZWN0b3JzKGRvbWFpbiwgdHJ1ZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvZGUgPSBjcmVhdGVTdHlsZVNoZWV0KHNlbGVjdG9ycyk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIGxldCBrbm93blN1ZmZpeCA9IHRoaXMuX2dldEtub3duU3VmZml4KGRvbWFpbik7XHJcblxyXG4gICAgICBpZiAoaW5jbHVkZVNlbGVjdG9ycyB8fCBpbmNsdWRlRXhjZXB0aW9ucylcclxuICAgICAge1xyXG4gICAgICAgIGxldCBzZWxlY3RvcnNBbmRFeGNlcHRpb25zID1cclxuICAgICAgICAgIHRoaXMuX2dldENvbmRpdGlvbmFsU2VsZWN0b3JzV2l0aEV4Y2VwdGlvbnMoa25vd25TdWZmaXgsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgc2VsZWN0b3JzID0gc2VsZWN0b3JzQW5kRXhjZXB0aW9ucy5zZWxlY3RvcnM7XHJcbiAgICAgICAgZXhjZXB0aW9ucyA9IHNlbGVjdG9yc0FuZEV4Y2VwdGlvbnMuZXhjZXB0aW9ucztcclxuICAgICAgICBjb2RlID0ga25vd25TdWZmaXggPT0gXCJcIiA/IHRoaXMuX2dldENvbW1vblN0eWxlU2hlZXQoKSA6XHJcbiAgICAgICAgICAgICAgICAgdGhpcy5fZ2V0RGVmYXVsdFN0eWxlU2hlZXQoKSArIGNyZWF0ZVN0eWxlU2hlZXQoc2VsZWN0b3JzKTtcclxuXHJcbiAgICAgICAgc2VsZWN0b3JzID0gdGhpcy5fZ2V0VW5jb25kaXRpb25hbFNlbGVjdG9ycygpLmNvbmNhdChzZWxlY3RvcnMpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAge1xyXG4gICAgICAgIGNvZGUgPSBrbm93blN1ZmZpeCA9PSBcIlwiID8gdGhpcy5fZ2V0Q29tbW9uU3R5bGVTaGVldCgpIDpcclxuICAgICAgICAgICAgICAgICB0aGlzLl9nZXREZWZhdWx0U3R5bGVTaGVldCgpICtcclxuICAgICAgICAgICAgICAgICB0aGlzLl9nZXREb21haW5TcGVjaWZpY1N0eWxlU2hlZXQoa25vd25TdWZmaXgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY29kZSxcclxuICAgICAgc2VsZWN0b3JzOiBpbmNsdWRlU2VsZWN0b3JzID8gc2VsZWN0b3JzIDogbnVsbCxcclxuICAgICAgZXhjZXB0aW9uczogaW5jbHVkZUV4Y2VwdGlvbnMgPyBleGNlcHRpb25zIDogbnVsbFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBzdHlsZSBzaGVldCBmb3IgYSBnaXZlbiBkb21haW4gYmFzZWQgb24gdGhlIGN1cnJlbnQgc2V0IG9mXHJcbiAgICogZmlsdGVycy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbi5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzcGVjaWZpY09ubHk9ZmFsc2VdIFdoZXRoZXIgc2VsZWN0b3JzIGZyb20gZ2VuZXJpY1xyXG4gICAqICAgZmlsdGVycyBzaG91bGQgYmUgaW5jbHVkZWQuXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbaW5jbHVkZVNlbGVjdG9ycz1mYWxzZV0gV2hldGhlciB0aGUgcmV0dXJuIHZhbHVlIHNob3VsZFxyXG4gICAqICAgaW5jbHVkZSBhIHNlcGFyYXRlIGxpc3Qgb2Ygc2VsZWN0b3JzLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2luY2x1ZGVFeGNlcHRpb25zPWZhbHNlXSBXaGV0aGVyIHRoZSByZXR1cm4gdmFsdWUgc2hvdWxkXHJcbiAgICogICBpbmNsdWRlIGEgc2VwYXJhdGUgbGlzdCBvZiBleGNlcHRpb25zLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge21vZHVsZTplbGVtSGlkZX5FbGVtSGlkZVN0eWxlU2hlZXR9IEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBDU1NcclxuICAgKiAgIGNvZGUgYW5kIHRoZSBsaXN0IG9mIHNlbGVjdG9ycy5cclxuICAgKlxyXG4gICAqIEBkZXByZWNhdGVkIFVzZVxyXG4gICAqICAgPGNvZGU+e0BsaW5rIG1vZHVsZTplbGVtSGlkZX5FbGVtSGlkZSNnZXRTdHlsZVNoZWV0fTwvY29kZT4gaW5zdGVhZC5cclxuICAgKiBAc2VlIG1vZHVsZTplbGVtSGlkZX5FbGVtSGlkZSNnZXRTdHlsZVNoZWV0XHJcbiAgICovXHJcbiAgZ2VuZXJhdGVTdHlsZVNoZWV0Rm9yRG9tYWluKGRvbWFpbiwgc3BlY2lmaWNPbmx5ID0gZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVTZWxlY3RvcnMgPSBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZUV4Y2VwdGlvbnMgPSBmYWxzZSlcclxuICB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRTdHlsZVNoZWV0KGRvbWFpbiwgc3BlY2lmaWNPbmx5LCBpbmNsdWRlU2VsZWN0b3JzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlRXhjZXB0aW9ucyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSBzdWZmaXggb2YgdGhlIGdpdmVuIGRvbWFpbiB0aGF0IGlzIGtub3duLlxyXG4gICAqXHJcbiAgICogSWYgbm8gc3VmZml4IGlzIGtub3duLCBhbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gez9zdHJpbmd9IGRvbWFpblxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgKlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgX2dldEtub3duU3VmZml4KGRvbWFpbilcclxuICB7XHJcbiAgICBmb3IgKGxldCBzdWZmaXggb2YgZG9tYWluU3VmZml4ZXMoZG9tYWluKSlcclxuICAgIHtcclxuICAgICAgaWYgKHRoaXMuX2ZpbHRlcnNCeURvbWFpbi5oYXMoc3VmZml4KSB8fFxyXG4gICAgICAgICAgdGhpcy5fZXhjZXB0aW9uRG9tYWlucy5oYXMoc3VmZml4KSlcclxuICAgICAgICByZXR1cm4gc3VmZml4O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBcIlwiO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhIGxpc3Qgb2Ygc2VsZWN0b3JzIHRoYXQgYXBwbHkgb24gZWFjaCB3ZWJzaXRlIHVuY29uZGl0aW9uYWxseS5cclxuICAgKiBAcmV0dXJucyB7c3RyaW5nW119XHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBfZ2V0VW5jb25kaXRpb25hbFNlbGVjdG9ycygpXHJcbiAge1xyXG4gICAgaWYgKCF0aGlzLl91bmNvbmRpdGlvbmFsU2VsZWN0b3JzKVxyXG4gICAgICB0aGlzLl91bmNvbmRpdGlvbmFsU2VsZWN0b3JzID0gWy4uLnRoaXMuX2ZpbHRlckJ5U2VsZWN0b3Iua2V5cygpXTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fdW5jb25kaXRpb25hbFNlbGVjdG9ycztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIGxpc3Qgb2Ygc2VsZWN0b3JzIHRoYXQgYXBwbHkgb24gYSBnaXZlbiBkb21haW4gZnJvbSB0aGUgc3Vic2V0XHJcbiAgICogb2YgZmlsdGVycyB0aGF0IGRvIG5vdCBhcHBseSB1bmNvbmRpdGlvbmFsbHkgb24gYWxsIGRvbWFpbnMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZG9tYWluIFRoZSBkb21haW4uXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzcGVjaWZpY09ubHkgV2hldGhlciBzZWxlY3RvcnMgZnJvbSBnZW5lcmljIGZpbHRlcnMgc2hvdWxkXHJcbiAgICogICBiZSBpbmNsdWRlZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtBcnJheS48c3RyaW5nPn0gVGhlIGxpc3Qgb2Ygc2VsZWN0b3JzLlxyXG4gICAqXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBfZ2V0Q29uZGl0aW9uYWxTZWxlY3RvcnMoZG9tYWluLCBzcGVjaWZpY09ubHkpXHJcbiAge1xyXG4gICAgbGV0IHNlbGVjdG9ycyA9IFtdO1xyXG5cclxuICAgIGxldCBleGNsdWRlZCA9IG5ldyBTZXQoKTtcclxuXHJcbiAgICBmb3IgKGxldCBjdXJyZW50RG9tYWluIG9mIGRvbWFpblN1ZmZpeGVzKGRvbWFpbiwgIXNwZWNpZmljT25seSkpXHJcbiAgICB7XHJcbiAgICAgIGxldCBtYXAgPSB0aGlzLl9maWx0ZXJzQnlEb21haW4uZ2V0KGN1cnJlbnREb21haW4pO1xyXG4gICAgICBpZiAobWFwKVxyXG4gICAgICB7XHJcbiAgICAgICAgZm9yIChsZXQgW2ZpbHRlciwgaW5jbHVkZV0gb2YgKG1hcCBpbnN0YW5jZW9mIEZpbHRlck1hcCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmVudHJpZXMoKSA6IFtbbWFwLCB0cnVlXV0pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmICghaW5jbHVkZSlcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZXhjbHVkZWQuYWRkKGZpbHRlcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCB7c2VsZWN0b3J9ID0gZmlsdGVyO1xyXG4gICAgICAgICAgICBpZiAoKGV4Y2x1ZGVkLnNpemUgPT0gMCB8fCAhZXhjbHVkZWQuaGFzKGZpbHRlcikpICYmXHJcbiAgICAgICAgICAgICAgICAhZWxlbUhpZGVFeGNlcHRpb25zLmdldEV4Y2VwdGlvbihzZWxlY3RvciwgZG9tYWluKSlcclxuICAgICAgICAgICAgICBzZWxlY3RvcnMucHVzaChzZWxlY3Rvcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHNlbGVjdG9ycztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIGxpc3Qgb2Ygc2VsZWN0b3JzIGFuZCB0aGUgbGlzdCBvZiBleGNlcHRpb25zIHRoYXQgYXBwbHkgb24gYVxyXG4gICAqIGdpdmVuIGRvbWFpbiBmcm9tIHRoZSBzdWJzZXQgb2YgZmlsdGVycyB0aGF0IGRvIG5vdCBhcHBseSB1bmNvbmRpdGlvbmFsbHlcclxuICAgKiBvbiBhbGwgZG9tYWlucy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbi5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNwZWNpZmljT25seSBXaGV0aGVyIHNlbGVjdG9ycyBmcm9tIGdlbmVyaWMgZmlsdGVycyBzaG91bGRcclxuICAgKiAgIGJlIGluY2x1ZGVkLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge3tzZWxlY3RvcnM6IEFycmF5LjxzdHJpbmc+LFxyXG4gICAqICAgICAgICAgICAgZXhjZXB0aW9uczogQXJyYXkuPG1vZHVsZTpmaWx0ZXJDbGFzc2VzLkVsZW1IaWRlRXhjZXB0aW9uPn19XHJcbiAgICogICBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgbGlzdHMgb2Ygc2VsZWN0b3JzIGFuZCBleGNlcHRpb25zLlxyXG4gICAqXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBfZ2V0Q29uZGl0aW9uYWxTZWxlY3RvcnNXaXRoRXhjZXB0aW9ucyhkb21haW4sIHNwZWNpZmljT25seSlcclxuICB7XHJcbiAgICBsZXQgc2VsZWN0b3JzID0gW107XHJcbiAgICBsZXQgZXhjZXB0aW9ucyA9IFtdO1xyXG5cclxuICAgIGxldCBleGNsdWRlZCA9IG5ldyBTZXQoKTtcclxuXHJcbiAgICBmb3IgKGxldCBjdXJyZW50RG9tYWluIG9mIGRvbWFpblN1ZmZpeGVzKGRvbWFpbiwgIXNwZWNpZmljT25seSkpXHJcbiAgICB7XHJcbiAgICAgIGxldCBtYXAgPSB0aGlzLl9maWx0ZXJzQnlEb21haW4uZ2V0KGN1cnJlbnREb21haW4pO1xyXG4gICAgICBpZiAobWFwKVxyXG4gICAgICB7XHJcbiAgICAgICAgZm9yIChsZXQgW2ZpbHRlciwgaW5jbHVkZV0gb2YgKG1hcCBpbnN0YW5jZW9mIEZpbHRlck1hcCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmVudHJpZXMoKSA6IFtbbWFwLCB0cnVlXV0pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmICghaW5jbHVkZSlcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZXhjbHVkZWQuYWRkKGZpbHRlcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmIChleGNsdWRlZC5zaXplID09IDAgfHwgIWV4Y2x1ZGVkLmhhcyhmaWx0ZXIpKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQge3NlbGVjdG9yfSA9IGZpbHRlcjtcclxuICAgICAgICAgICAgbGV0IGV4Y2VwdGlvbiA9IGVsZW1IaWRlRXhjZXB0aW9ucy5nZXRFeGNlcHRpb24oc2VsZWN0b3IsIGRvbWFpbik7XHJcblxyXG4gICAgICAgICAgICBpZiAoZXhjZXB0aW9uKVxyXG4gICAgICAgICAgICAgIGV4Y2VwdGlvbnMucHVzaChleGNlcHRpb24pO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgc2VsZWN0b3JzLnB1c2goc2VsZWN0b3IpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7c2VsZWN0b3JzLCBleGNlcHRpb25zfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIGRlZmF1bHQgc3R5bGUgc2hlZXQgdGhhdCBhcHBsaWVzIG9uIGFsbCBkb21haW5zLlxyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBfZ2V0RGVmYXVsdFN0eWxlU2hlZXQoKVxyXG4gIHtcclxuICAgIGlmICghdGhpcy5fZGVmYXVsdFN0eWxlU2hlZXQpXHJcbiAgICB7XHJcbiAgICAgIHRoaXMuX2RlZmF1bHRTdHlsZVNoZWV0ID1cclxuICAgICAgICBjcmVhdGVTdHlsZVNoZWV0KHRoaXMuX2dldFVuY29uZGl0aW9uYWxTZWxlY3RvcnMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2RlZmF1bHRTdHlsZVNoZWV0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyB0aGUgY29tbW9uIHN0eWxlIHNoZWV0IHRoYXQgYXBwbGllcyBvbiBhbGwgdW5rbm93biBkb21haW5zLlxyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBfZ2V0Q29tbW9uU3R5bGVTaGVldCgpXHJcbiAge1xyXG4gICAgaWYgKCF0aGlzLl9jb21tb25TdHlsZVNoZWV0KVxyXG4gICAge1xyXG4gICAgICB0aGlzLl9jb21tb25TdHlsZVNoZWV0ID1cclxuICAgICAgICB0aGlzLl9nZXREZWZhdWx0U3R5bGVTaGVldCgpICtcclxuICAgICAgICBjcmVhdGVTdHlsZVNoZWV0KHRoaXMuX2dldENvbmRpdGlvbmFsU2VsZWN0b3JzKFwiXCIsIGZhbHNlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NvbW1vblN0eWxlU2hlZXQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSBkb21haW4tc3BlY2lmaWMgc3R5bGUgc2hlZXQgdGhhdCBhcHBsaWVzIG9uIGEgZ2l2ZW4gZG9tYWluLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkb21haW5cclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgX2dldERvbWFpblNwZWNpZmljU3R5bGVTaGVldChkb21haW4pXHJcbiAge1xyXG4gICAgbGV0IHN0eWxlU2hlZXQgPSB0aGlzLl9zdHlsZVNoZWV0Q2FjaGUuZ2V0KGRvbWFpbik7XHJcblxyXG4gICAgaWYgKHR5cGVvZiBzdHlsZVNoZWV0ID09IFwidW5kZWZpbmVkXCIpXHJcbiAgICB7XHJcbiAgICAgIHN0eWxlU2hlZXQgPVxyXG4gICAgICAgIGNyZWF0ZVN0eWxlU2hlZXQodGhpcy5fZ2V0Q29uZGl0aW9uYWxTZWxlY3RvcnMoZG9tYWluLCBmYWxzZSkpO1xyXG4gICAgICB0aGlzLl9zdHlsZVNoZWV0Q2FjaGUuc2V0KGRvbWFpbiwgc3R5bGVTaGVldCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHN0eWxlU2hlZXQ7XHJcbiAgfVxyXG5cclxuICBfb25FeGNlcHRpb25BZGRlZChleGNlcHRpb24pXHJcbiAge1xyXG4gICAgbGV0IHtkb21haW5zLCBzZWxlY3Rvcn0gPSBleGNlcHRpb247XHJcblxyXG4gICAgdGhpcy5fc3R5bGVTaGVldENhY2hlLmNsZWFyKCk7XHJcbiAgICB0aGlzLl9jb21tb25TdHlsZVNoZWV0ID0gbnVsbDtcclxuXHJcbiAgICBpZiAoZG9tYWlucylcclxuICAgIHtcclxuICAgICAgZm9yIChsZXQgZG9tYWluIG9mIGRvbWFpbnMua2V5cygpKVxyXG4gICAgICB7XHJcbiAgICAgICAgLy8gTm90ZTogT25jZSBhbiBleGNlcHRpb24gZG9tYWluIGlzIGtub3duIGl0IG5ldmVyIGJlY29tZXMgdW5rbm93bixcclxuICAgICAgICAvLyBldmVuIHdoZW4gYWxsIHRoZSBleGNlcHRpb25zIGNvbnRhaW5pbmcgdGhhdCBkb21haW4gYXJlIHJlbW92ZWQuXHJcbiAgICAgICAgLy8gVGhpcyBpcyBhIGJlc3QtY2FzZSBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgaWYgKGRvbWFpbiAhPSBcIlwiKVxyXG4gICAgICAgICAgdGhpcy5fZXhjZXB0aW9uRG9tYWlucy5hZGQoZG9tYWluKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IGV4Y2VwdGlvbiBmb3IgYSBwcmV2aW91c2x5IHVuY29uZGl0aW9uYWxseSBhcHBsaWVkXHJcbiAgICAvLyBlbGVtZW50IGhpZGluZyBzZWxlY3RvciB3ZSBuZWVkIHRvIHRha2UgY2FyZSB0byB1cGRhdGUgdGhlIGxvb2t1cHMuXHJcbiAgICBsZXQgdW5jb25kaXRpb25hbEZpbHRlckZvclNlbGVjdG9yID0gdGhpcy5fZmlsdGVyQnlTZWxlY3Rvci5nZXQoc2VsZWN0b3IpO1xyXG4gICAgaWYgKHVuY29uZGl0aW9uYWxGaWx0ZXJGb3JTZWxlY3RvcilcclxuICAgIHtcclxuICAgICAgdGhpcy5fZmlsdGVyc0J5RG9tYWluLmFkZCh1bmNvbmRpdGlvbmFsRmlsdGVyRm9yU2VsZWN0b3IpO1xyXG4gICAgICB0aGlzLl9maWx0ZXJCeVNlbGVjdG9yLmRlbGV0ZShzZWxlY3Rvcik7XHJcbiAgICAgIHRoaXMuX3VuY29uZGl0aW9uYWxTZWxlY3RvcnMgPSBudWxsO1xyXG4gICAgICB0aGlzLl9kZWZhdWx0U3R5bGVTaGVldCA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ29udGFpbmVyIGZvciBlbGVtZW50IGhpZGluZyBmaWx0ZXJzLlxyXG4gKiBAdHlwZSB7bW9kdWxlOmVsZW1IaWRlfkVsZW1IaWRlfVxyXG4gKi9cclxuZXhwb3J0cy5lbGVtSGlkZSA9IG5ldyBFbGVtSGlkZSgpO1xyXG5cclxuLyoqXHJcbiAqIFlpZWxkcyBydWxlcyBmcm9tIGEgc3R5bGUgc2hlZXQgcmV0dXJuZWQgYnlcclxuICogYHtAbGluayBtb2R1bGU6ZWxlbUhpZGUuY3JlYXRlU3R5bGVTaGVldCBjcmVhdGVTdHlsZVNoZWV0KCl9YC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0eWxlU2hlZXQgQSBzdHlsZSBzaGVldCByZXR1cm5lZCBieVxyXG4gKiAgIGB7QGxpbmsgbW9kdWxlOmVsZW1IaWRlLmNyZWF0ZVN0eWxlU2hlZXQgY3JlYXRlU3R5bGVTaGVldCgpfWAuIElmIHRoZVxyXG4gKiAgIGdpdmVuIHN0eWxlIHNoZWV0IGlzICpub3QqIGEgdmFsdWUgcHJldmlvdXNseSByZXR1cm5lZCBieSBhIGNhbGwgdG9cclxuICogICBge0BsaW5rIG1vZHVsZTplbGVtSGlkZS5jcmVhdGVTdHlsZVNoZWV0IGNyZWF0ZVN0eWxlU2hlZXQoKX1gLCB0aGVcclxuICogICBiZWhhdmlvciBpcyB1bmRlZmluZWQuXHJcbiAqXHJcbiAqIEBnZW5lcmF0b3JcclxuICogQHlpZWxkcyB7c3RyaW5nfSBBIHJ1bGUgZnJvbSB0aGUgZ2l2ZW4gc3R5bGUgc2hlZXQuXHJcbiAqL1xyXG5leHBvcnRzLnJ1bGVzRnJvbVN0eWxlU2hlZXQgPSBmdW5jdGlvbiogcnVsZXNGcm9tU3R5bGVTaGVldChzdHlsZVNoZWV0KVxyXG57XHJcbiAgbGV0IHN0YXJ0SW5kZXggPSAwO1xyXG4gIHdoaWxlIChzdGFydEluZGV4IDwgc3R5bGVTaGVldC5sZW5ndGgpXHJcbiAge1xyXG4gICAgbGV0IHJ1bGVUZXJtaW5hdG9ySW5kZXggPSBzdHlsZVNoZWV0LmluZGV4T2YoXCJcXG5cIiwgc3RhcnRJbmRleCk7XHJcbiAgICB5aWVsZCBzdHlsZVNoZWV0LnN1YnN0cmluZyhzdGFydEluZGV4LCBydWxlVGVybWluYXRvckluZGV4KTtcclxuICAgIHN0YXJ0SW5kZXggPSBydWxlVGVybWluYXRvckluZGV4ICsgMTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogU3BsaXRzIGEgbGlzdCBvZiBzZWxlY3RvcnMgaW50byBncm91cHMgZGV0ZXJtaW5lZCBieSB0aGUgdmFsdWUgb2ZcclxuICogYHtAbGluayBtb2R1bGU6ZWxlbUhpZGV+U0VMRUNUT1JfR1JPVVBfU0laRX1gLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0FycmF5LjxzdHJpbmc+fSBzZWxlY3RvcnNcclxuICpcclxuICogQHlpZWxkcyB7QXJyYXkuPHN0cmluZz59XHJcbiAqL1xyXG5mdW5jdGlvbiogc3BsaXRTZWxlY3RvcnMoc2VsZWN0b3JzKVxyXG57XHJcbiAgLy8gQ2hyb21pdW0ncyBCbGluayBlbmdpbmUgc3VwcG9ydHMgb25seSB1cCB0byA4LDE5MiBzaW1wbGUgc2VsZWN0b3JzLCBhbmRcclxuICAvLyBldmVuIGZld2VyIGNvbXBvdW5kIHNlbGVjdG9ycywgaW4gYSBydWxlLiBUaGUgZXhhY3QgbnVtYmVyIG9mIHNlbGVjdG9yc1xyXG4gIC8vIHRoYXQgd291bGQgd29yayBkZXBlbmRzIG9uIHRoZWlyIHNpemVzIChlLmcuIFwiI2ZvbyAuYmFyXCIgaGFzIGEgc2l6ZSBvZiAyKS5cclxuICAvLyBTaW5jZSB3ZSBkb24ndCBrbm93IHRoZSBzaXplcyBvZiB0aGUgc2VsZWN0b3JzIGhlcmUsIHdlIHNpbXBseSBzcGxpdCB0aGVtXHJcbiAgLy8gaW50byBncm91cHMgb2YgMSwwMjQsIGJhc2VkIG9uIHRoZSByZWFzb25hYmxlIGFzc3VtcHRpb24gdGhhdCB0aGUgYXZlcmFnZVxyXG4gIC8vIHNlbGVjdG9yIHdvbid0IGhhdmUgYSBzaXplIGdyZWF0ZXIgdGhhbiA4LiBUaGUgYWx0ZXJuYXRpdmUgd291bGQgYmUgdG9cclxuICAvLyBjYWxjdWxhdGUgdGhlIHNpemVzIG9mIHRoZSBzZWxlY3RvcnMgYW5kIGRpdmlkZSB0aGVtIHVwIGFjY29yZGluZ2x5LCBidXRcclxuICAvLyB0aGlzIGFwcHJvYWNoIGlzIG1vcmUgZWZmaWNpZW50IGFuZCBoYXMgd29ya2VkIHdlbGwgaW4gcHJhY3RpY2UuIEluIHRoZW9yeVxyXG4gIC8vIHRoaXMgY291bGQgc3RpbGwgbGVhZCB0byBzb21lIHNlbGVjdG9ycyBub3Qgd29ya2luZyBvbiBDaHJvbWl1bSwgYnV0IGl0IGlzXHJcbiAgLy8gaGlnaGx5IHVubGlrZWx5LlxyXG4gIC8vIFNlZSBpc3N1ZSAjNjI5OCBhbmQgaHR0cHM6Ly9jcmJ1Zy5jb20vODA0MTc5XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3RvcnMubGVuZ3RoOyBpICs9IFNFTEVDVE9SX0dST1VQX1NJWkUpXHJcbiAgICB5aWVsZCBzZWxlY3RvcnMuc2xpY2UoaSwgaSArIFNFTEVDVE9SX0dST1VQX1NJWkUpO1xyXG59XHJcblxyXG4vKipcclxuICogRXNjYXBlcyBjdXJseSBicmFjZXMgdG8gcHJldmVudCBDU1MgcnVsZSBpbmplY3Rpb24uXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvclxyXG4gKlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gKi9cclxuZnVuY3Rpb24gZXNjYXBlU2VsZWN0b3Ioc2VsZWN0b3IpXHJcbntcclxuICByZXR1cm4gc2VsZWN0b3IucmVwbGFjZShcIntcIiwgXCJcXFxcN0IgXCIpLnJlcGxhY2UoXCJ9XCIsIFwiXFxcXDdEIFwiKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYW4gZWxlbWVudCBoaWRpbmcgQ1NTIHJ1bGUgZm9yIGEgZ2l2ZW4gbGlzdCBvZiBzZWxlY3RvcnMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZz59IHNlbGVjdG9ycyBUaGUgbGlzdCBvZiBzZWxlY3RvcnMuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBbZGVjbGFyYXRpb25CbG9ja10gT3B0aW9uYWwgQ1NTIGNvZGUgdG8gdXNlIGFzIHRoZVxyXG4gKiAgIGRlY2xhcmF0aW9uIGJsb2NrLiBCeSBkZWZhdWx0LCB0aGUgY29kZSBge2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9YCBpc1xyXG4gKiAgIHVzZWQuIElmIHNwZWNpZmllZCwgdGhlIHZhbHVlIGlzIGluamVjdGVkIGFzLWlzIGludG8gdGhlIHJ1bGUuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEEgQ1NTIHJ1bGUuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVSdWxlKHNlbGVjdG9ycywgZGVjbGFyYXRpb25CbG9jayA9IFwie2Rpc3BsYXk6IG5vbmUgIWltcG9ydGFudDt9XCIpXHJcbntcclxuICBsZXQgcnVsZSA9IFwiXCI7XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0b3JzLmxlbmd0aCAtIDE7IGkrKylcclxuICAgIHJ1bGUgKz0gZXNjYXBlU2VsZWN0b3Ioc2VsZWN0b3JzW2ldKSArIFwiLCBcIjtcclxuXHJcbiAgcnVsZSArPSBlc2NhcGVTZWxlY3RvcihzZWxlY3RvcnNbc2VsZWN0b3JzLmxlbmd0aCAtIDFdKSArIFwiIFwiICtcclxuICAgICAgICAgIGRlY2xhcmF0aW9uQmxvY2sgKyBcIlxcblwiO1xyXG5cclxuICByZXR1cm4gcnVsZTtcclxufVxyXG5cclxubGV0IGNyZWF0ZVN0eWxlU2hlZXQgPVxyXG4vKipcclxuICogQ3JlYXRlcyBhbiBlbGVtZW50IGhpZGluZyBDU1Mgc3R5bGUgc2hlZXQgZnJvbSBhIGdpdmVuIGxpc3Qgb2Ygc2VsZWN0b3JzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0FycmF5LjxzdHJpbmc+fSBzZWxlY3RvcnMgVGhlIGxpc3Qgb2Ygc2VsZWN0b3JzLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW2RlY2xhcmF0aW9uQmxvY2tdIE9wdGlvbmFsIENTUyBjb2RlIHRvIHVzZSBhcyB0aGVcclxuICogICBkZWNsYXJhdGlvbiBibG9jay4gQnkgZGVmYXVsdCwgdGhlIGNvZGUgYHtkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7fWAgaXNcclxuICogICB1c2VkLiBJZiBzcGVjaWZpZWQsIHRoZSB2YWx1ZSBpcyBpbmplY3RlZCBhcy1pcyBpbnRvIHRoZSBzdHlsZSBzaGVldC5cclxuICpcclxuICogQHJldHVybnMge3N0cmluZ30gQSBDU1Mgc3R5bGUgc2hlZXQuXHJcbiAqL1xyXG5leHBvcnRzLmNyZWF0ZVN0eWxlU2hlZXQgPSBmdW5jdGlvbiBjcmVhdGVTdHlsZVNoZWV0KHNlbGVjdG9ycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbkJsb2NrKVxyXG57XHJcbiAgbGV0IHN0eWxlU2hlZXQgPSBcIlwiO1xyXG5cclxuICBmb3IgKGxldCBzZWxlY3Rvckdyb3VwIG9mIHNwbGl0U2VsZWN0b3JzKHNlbGVjdG9ycykpXHJcbiAgICBzdHlsZVNoZWV0ICs9IGNyZWF0ZVJ1bGUoc2VsZWN0b3JHcm91cCwgZGVjbGFyYXRpb25CbG9jayk7XHJcblxyXG4gIHJldHVybiBzdHlsZVNoZWV0O1xyXG59O1xyXG4iLCIvKlxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBBZGJsb2NrIFBsdXMgPGh0dHBzOi8vYWRibG9ja3BsdXMub3JnLz4sXHJcbiAqIENvcHlyaWdodCAoQykgMjAwNi1wcmVzZW50IGV5ZW8gR21iSFxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBhc1xyXG4gKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICpcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCBBZGJsb2NrIFBsdXMuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqL1xyXG5cclxuLyoqIEBtb2R1bGUgKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuLyoqXHJcbiAqIEBmaWxlT3ZlcnZpZXcgRWxlbWVudCBoaWRpbmcgZW11bGF0aW9uIGltcGxlbWVudGF0aW9uLlxyXG4gKi9cclxuXHJcbmNvbnN0IHtlbGVtSGlkZUV4Y2VwdGlvbnN9ID0gcmVxdWlyZShcIi4vZWxlbUhpZGVFeGNlcHRpb25zXCIpO1xyXG5cclxuLyoqXHJcbiAqIGB7QGxpbmsgbW9kdWxlOmVsZW1IaWRlRW11bGF0aW9uLmVsZW1IaWRlRW11bGF0aW9uIGVsZW1IaWRlRW11bGF0aW9ufWBcclxuICogaW1wbGVtZW50YXRpb24uXHJcbiAqL1xyXG5jbGFzcyBFbGVtSGlkZUVtdWxhdGlvbiBleHRlbmRzIFNldFxyXG57XHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyBhbiBleGlzdGluZyBlbGVtZW50IGhpZGluZyBlbXVsYXRpb24gZmlsdGVyLlxyXG4gICAqIEBwYXJhbSB7bW9kdWxlOmZpbHRlckNsYXNzZXMuRWxlbUhpZGVFbXVsYXRpb25GaWx0ZXJ9IGZpbHRlclxyXG4gICAqXHJcbiAgICogQGRlcHJlY2F0ZWQgVXNlXHJcbiAgICogICA8Y29kZT5FbGVtSGlkZUVtdWxhdGlvbiNkZWxldGU8L2NvZGU+XHJcbiAgICogICBpbnN0ZWFkLlxyXG4gICAqL1xyXG4gIHJlbW92ZShmaWx0ZXIpXHJcbiAge1xyXG4gICAgdGhpcy5kZWxldGUoZmlsdGVyKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIGFsbCBlbGVtZW50IGhpZGluZyBlbXVsYXRpb24gZmlsdGVycyBhY3RpdmUgb24gdGhlIGdpdmVuXHJcbiAgICogZG9tYWluLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbi5cclxuICAgKiBAcmV0dXJucyB7QXJyYXkuPG1vZHVsZTpmaWx0ZXJDbGFzc2VzLkVsZW1IaWRlRW11bGF0aW9uRmlsdGVyPn0gQSBsaXN0IG9mXHJcbiAgICogICBlbGVtZW50IGhpZGluZyBlbXVsYXRpb24gZmlsdGVycy5cclxuICAgKi9cclxuICBnZXRGaWx0ZXJzKGRvbWFpbilcclxuICB7XHJcbiAgICBsZXQgcmVzdWx0ID0gW107XHJcblxyXG4gICAgZm9yIChsZXQgZmlsdGVyIG9mIHRoaXMpXHJcbiAgICB7XHJcbiAgICAgIGlmIChmaWx0ZXIuaXNBY3RpdmVPbkRvbWFpbihkb21haW4pICYmXHJcbiAgICAgICAgICAhZWxlbUhpZGVFeGNlcHRpb25zLmdldEV4Y2VwdGlvbihmaWx0ZXIuc2VsZWN0b3IsIGRvbWFpbikpXHJcbiAgICAgICAgcmVzdWx0LnB1c2goZmlsdGVyKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhIGxpc3Qgb2YgYWxsIGVsZW1lbnQgaGlkaW5nIGVtdWxhdGlvbiBmaWx0ZXJzIGFjdGl2ZSBvbiB0aGUgZ2l2ZW5cclxuICAgKiBkb21haW4uXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluLlxyXG4gICAqIEByZXR1cm5zIHtBcnJheS48bW9kdWxlOmZpbHRlckNsYXNzZXMuRWxlbUhpZGVFbXVsYXRpb25GaWx0ZXI+fSBBIGxpc3Qgb2ZcclxuICAgKiAgIGVsZW1lbnQgaGlkaW5nIGVtdWxhdGlvbiBmaWx0ZXJzLlxyXG4gICAqXHJcbiAgICogQGRlcHJlY2F0ZWQgVXNlXHJcbiAgICogICA8Y29kZT57QGxpbmtcclxuICAgKiAgICAgICAgICBtb2R1bGU6ZWxlbUhpZGVFbXVsYXRpb25+RWxlbUhpZGVFbXVsYXRpb24jZ2V0RmlsdGVyc308L2NvZGU+XHJcbiAgICogICBpbnN0ZWFkLlxyXG4gICAqIEBzZWUgbW9kdWxlOmVsZW1IaWRlRW11bGF0aW9ufkVsZW1IaWRlRW11bGF0aW9uI2dldEZpbHRlcnNcclxuICAgKi9cclxuICBnZXRSdWxlc0ZvckRvbWFpbihkb21haW4pXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0RmlsdGVycyhkb21haW4pO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENvbnRhaW5lciBmb3IgZWxlbWVudCBoaWRpbmcgZW11bGF0aW9uIGZpbHRlcnMuXHJcbiAqIEB0eXBlIHttb2R1bGU6ZWxlbUhpZGVFbXVsYXRpb25+RWxlbUhpZGVFbXVsYXRpb259XHJcbiAqL1xyXG5leHBvcnRzLmVsZW1IaWRlRW11bGF0aW9uID0gbmV3IEVsZW1IaWRlRW11bGF0aW9uKCk7XHJcbiIsIi8qXHJcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIEFkYmxvY2sgUGx1cyA8aHR0cHM6Ly9hZGJsb2NrcGx1cy5vcmcvPixcclxuICogQ29weXJpZ2h0IChDKSAyMDA2LXByZXNlbnQgZXllbyBHbWJIXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XHJcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIGFzXHJcbiAqIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLlxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcclxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcclxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxyXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKlxyXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxyXG4gKiBhbG9uZyB3aXRoIEFkYmxvY2sgUGx1cy4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cclxuICovXHJcblxyXG4vKiogQG1vZHVsZSAqL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4vKipcclxuICogQGZpbGVPdmVydmlldyBFbGVtZW50IGhpZGluZyBleGNlcHRpb25zIGltcGxlbWVudGF0aW9uLlxyXG4gKi9cclxuXHJcbmNvbnN0IHtFdmVudEVtaXR0ZXJ9ID0gcmVxdWlyZShcIi4vZXZlbnRzXCIpO1xyXG5cclxuLyoqXHJcbiAqIGB7QGxpbmsgbW9kdWxlOmVsZW1IaWRlRXhjZXB0aW9ucy5lbGVtSGlkZUV4Y2VwdGlvbnMgZWxlbUhpZGVFeGNlcHRpb25zfWBcclxuICogaW1wbGVtZW50YXRpb24uXHJcbiAqL1xyXG5jbGFzcyBFbGVtSGlkZUV4Y2VwdGlvbnMgZXh0ZW5kcyBFdmVudEVtaXR0ZXJcclxue1xyXG4gIC8qKlxyXG4gICAqIEBoaWRlY29uc3RydWN0b3JcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcigpXHJcbiAge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIExvb2t1cCB0YWJsZSwgbGlzdHMgb2YgZWxlbWVudCBoaWRpbmcgZXhjZXB0aW9ucyBieSBzZWxlY3RvclxyXG4gICAgICogQHR5cGUge01hcC48c3RyaW5nLCBTZXQuPG1vZHVsZTpmaWx0ZXJDbGFzc2VzLkVsZW1IaWRlRXhjZXB0aW9uPj59XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICB0aGlzLl9leGNlcHRpb25zQnlTZWxlY3RvciA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCBjb250YWluaW5nIGtub3duIGVsZW1lbnQgaGlkaW5nIGV4Y2VwdGlvbnNcclxuICAgICAqIEB0eXBlIHtTZXQuPG1vZHVsZTpmaWx0ZXJDbGFzc2VzLkVsZW1IaWRlRXhjZXB0aW9uPn1cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHRoaXMuX2V4Y2VwdGlvbnMgPSBuZXcgU2V0KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGFsbCBrbm93biBlbGVtZW50IGhpZGluZyBleGNlcHRpb25zLlxyXG4gICAqL1xyXG4gIGNsZWFyKClcclxuICB7XHJcbiAgICB0aGlzLl9leGNlcHRpb25zQnlTZWxlY3Rvci5jbGVhcigpO1xyXG4gICAgdGhpcy5fZXhjZXB0aW9ucy5jbGVhcigpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyBhIG5ldyBlbGVtZW50IGhpZGluZyBleGNlcHRpb24uXHJcbiAgICogQHBhcmFtIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5FbGVtSGlkZUV4Y2VwdGlvbn0gZXhjZXB0aW9uXHJcbiAgICovXHJcbiAgYWRkKGV4Y2VwdGlvbilcclxuICB7XHJcbiAgICBpZiAodGhpcy5fZXhjZXB0aW9ucy5oYXMoZXhjZXB0aW9uKSlcclxuICAgICAgcmV0dXJuO1xyXG5cclxuICAgIGxldCB7c2VsZWN0b3J9ID0gZXhjZXB0aW9uO1xyXG4gICAgbGV0IHNldCA9IHRoaXMuX2V4Y2VwdGlvbnNCeVNlbGVjdG9yLmdldChzZWxlY3Rvcik7XHJcbiAgICBpZiAoc2V0KVxyXG4gICAgICBzZXQuYWRkKGV4Y2VwdGlvbik7XHJcbiAgICBlbHNlXHJcbiAgICAgIHRoaXMuX2V4Y2VwdGlvbnNCeVNlbGVjdG9yLnNldChzZWxlY3RvciwgbmV3IFNldChbZXhjZXB0aW9uXSkpO1xyXG5cclxuICAgIHRoaXMuX2V4Y2VwdGlvbnMuYWRkKGV4Y2VwdGlvbik7XHJcblxyXG4gICAgdGhpcy5lbWl0KFwiYWRkZWRcIiwgZXhjZXB0aW9uKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgYW4gZXhpc3RpbmcgZWxlbWVudCBoaWRpbmcgZXhjZXB0aW9uLlxyXG4gICAqIEBwYXJhbSB7bW9kdWxlOmZpbHRlckNsYXNzZXMuRWxlbUhpZGVFeGNlcHRpb259IGV4Y2VwdGlvblxyXG4gICAqL1xyXG4gIHJlbW92ZShleGNlcHRpb24pXHJcbiAge1xyXG4gICAgaWYgKCF0aGlzLl9leGNlcHRpb25zLmhhcyhleGNlcHRpb24pKVxyXG4gICAgICByZXR1cm47XHJcblxyXG4gICAgbGV0IHtzZWxlY3Rvcn0gPSBleGNlcHRpb247XHJcbiAgICBsZXQgc2V0ID0gdGhpcy5fZXhjZXB0aW9uc0J5U2VsZWN0b3IuZ2V0KHNlbGVjdG9yKTtcclxuICAgIHNldC5kZWxldGUoZXhjZXB0aW9uKTtcclxuICAgIGlmIChzZXQuc2l6ZSA9PSAwKVxyXG4gICAgICB0aGlzLl9leGNlcHRpb25zQnlTZWxlY3Rvci5kZWxldGUoc2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMuX2V4Y2VwdGlvbnMuZGVsZXRlKGV4Y2VwdGlvbik7XHJcblxyXG4gICAgdGhpcy5lbWl0KFwicmVtb3ZlZFwiLCBleGNlcHRpb24pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIHdoZXRoZXIgYW4gZWxlbWVudCBoaWRpbmcgZXhjZXB0aW9uIGV4aXN0cy5cclxuICAgKiBAcGFyYW0ge21vZHVsZTpmaWx0ZXJDbGFzc2VzLkVsZW1IaWRlRXhjZXB0aW9ufSBleGNlcHRpb25cclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgKi9cclxuICBoYXMoZXhjZXB0aW9uKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLl9leGNlcHRpb25zLmhhcyhleGNlcHRpb24pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIHdoZXRoZXIgYW55IGV4Y2VwdGlvbiBydWxlcyBhcmUgcmVnaXN0ZXJlZCBmb3IgYSBzZWxlY3Rvci5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3JcclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgKi9cclxuICBoYXNFeGNlcHRpb25zKHNlbGVjdG9yKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLl9leGNlcHRpb25zQnlTZWxlY3Rvci5oYXMoc2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIHdoZXRoZXIgYW4gZXhjZXB0aW9uIHJ1bGUgaXMgcmVnaXN0ZXJlZCBmb3IgYSBzZWxlY3RvciBvbiBhXHJcbiAgICogcGFydGljdWxhciBkb21haW4uXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yXHJcbiAgICogQHBhcmFtIHs/c3RyaW5nfSBbZG9tYWluXVxyXG4gICAqIEByZXR1cm5zIHs/bW9kdWxlOmZpbHRlckNsYXNzZXMuRWxlbUhpZGVFeGNlcHRpb259XHJcbiAgICovXHJcbiAgZ2V0RXhjZXB0aW9uKHNlbGVjdG9yLCBkb21haW4pXHJcbiAge1xyXG4gICAgbGV0IGV4Y2VwdGlvbnMgPSB0aGlzLl9leGNlcHRpb25zQnlTZWxlY3Rvci5nZXQoc2VsZWN0b3IpO1xyXG4gICAgaWYgKGV4Y2VwdGlvbnMpXHJcbiAgICB7XHJcbiAgICAgIGZvciAobGV0IGV4Y2VwdGlvbiBvZiBleGNlcHRpb25zKVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKGV4Y2VwdGlvbi5pc0FjdGl2ZU9uRG9tYWluKGRvbWFpbikpXHJcbiAgICAgICAgICByZXR1cm4gZXhjZXB0aW9uO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ29udGFpbmVyIGZvciBlbGVtZW50IGhpZGluZyBleGNlcHRpb25zLlxyXG4gKiBAdHlwZSB7bW9kdWxlOmVsZW1IaWRlRXhjZXB0aW9uc35FbGVtSGlkZUV4Y2VwdGlvbnN9XHJcbiAqL1xyXG5leHBvcnRzLmVsZW1IaWRlRXhjZXB0aW9ucyA9IG5ldyBFbGVtSGlkZUV4Y2VwdGlvbnMoKTtcclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlICovXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbi8qKlxyXG4gKiBSZWdpc3RlcnMgYW5kIGVtaXRzIG5hbWVkIGV2ZW50cy5cclxuICovXHJcbmV4cG9ydHMuRXZlbnRFbWl0dGVyID0gY2xhc3MgRXZlbnRFbWl0dGVyXHJcbntcclxuICBjb25zdHJ1Y3RvcigpXHJcbiAge1xyXG4gICAgdGhpcy5fbGlzdGVuZXJzID0gbmV3IE1hcCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyBhIGxpc3RlbmVyIGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50IG5hbWUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gICBuYW1lXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gbGlzdGVuZXJcclxuICAgKi9cclxuICBvbihuYW1lLCBsaXN0ZW5lcilcclxuICB7XHJcbiAgICBsZXQgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzLmdldChuYW1lKTtcclxuICAgIGlmIChsaXN0ZW5lcnMpXHJcbiAgICAgIGxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgIGVsc2VcclxuICAgICAgdGhpcy5fbGlzdGVuZXJzLnNldChuYW1lLCBbbGlzdGVuZXJdKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgYSBsaXN0ZW5lciBmb3IgdGhlIHNwZWNpZmllZCBldmVudCBuYW1lLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9ICAgbmFtZVxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGxpc3RlbmVyXHJcbiAgICovXHJcbiAgb2ZmKG5hbWUsIGxpc3RlbmVyKVxyXG4gIHtcclxuICAgIGxldCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnMuZ2V0KG5hbWUpO1xyXG4gICAgaWYgKGxpc3RlbmVycylcclxuICAgIHtcclxuICAgICAgaWYgKGxpc3RlbmVycy5sZW5ndGggPiAxKVxyXG4gICAgICB7XHJcbiAgICAgICAgbGV0IGlkeCA9IGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcclxuICAgICAgICBpZiAoaWR4ICE9IC0xKVxyXG4gICAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGxpc3RlbmVyc1swXSA9PT0gbGlzdGVuZXIpXHJcbiAgICAgIHtcclxuICAgICAgICAvLyBXZSBtdXN0IHVzZSBzdHJpY3QgZXF1YWxpdHkgYWJvdmUgZm9yIGNvbXBhdGliaWxpdHkgd2l0aFxyXG4gICAgICAgIC8vIEFycmF5LnByb3RvdHlwZS5pbmRleE9mXHJcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzLmRlbGV0ZShuYW1lKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhlIGFycmF5IG9mIGxpc3RlbmVycyBmb3IgdGhlIHNwZWNpZmllZCBldmVudC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7QXJyYXkuPGZ1bmN0aW9uPn1cclxuICAgKi9cclxuICBsaXN0ZW5lcnMobmFtZSlcclxuICB7XHJcbiAgICBsZXQgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzLnNpemUgPiAwID8gdGhpcy5fbGlzdGVuZXJzLmdldChuYW1lKSA6IG51bGw7XHJcbiAgICByZXR1cm4gbGlzdGVuZXJzID8gbGlzdGVuZXJzLnNsaWNlKCkgOiBbXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrcyB3aGV0aGVyIHRoZXJlIGFyZSBhbnkgbGlzdGVuZXJzIGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtuYW1lXSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQuIElmIG9taXR0ZWQsIGNoZWNrcyB3aGV0aGVyXHJcbiAgICogICB0aGVyZSBhcmUgYW55IGxpc3RlbmVycyBmb3IgYW55IGV2ZW50LlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICovXHJcbiAgaGFzTGlzdGVuZXJzKG5hbWUpXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuX2xpc3RlbmVycy5zaXplID4gMCAmJlxyXG4gICAgICAgICAgICh0eXBlb2YgbmFtZSA9PSBcInVuZGVmaW5lZFwiIHx8IHRoaXMuX2xpc3RlbmVycy5oYXMobmFtZSkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2FsbHMgYWxsIHByZXZpb3VzbHkgYWRkZWQgbGlzdGVuZXJzIGZvciB0aGUgZ2l2ZW4gZXZlbnQgbmFtZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXHJcbiAgICogQHBhcmFtIHsuLi4qfSAgIFthcmdzXVxyXG4gICAqL1xyXG4gIGVtaXQobmFtZSwgLi4uYXJncylcclxuICB7XHJcbiAgICBsZXQgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzLnNpemUgPiAwID8gdGhpcy5fbGlzdGVuZXJzLmdldChuYW1lKSA6IG51bGw7XHJcbiAgICBpZiAobGlzdGVuZXJzKVxyXG4gICAge1xyXG4gICAgICBmb3IgKGxldCBsaXN0ZW5lciBvZiBsaXN0ZW5lcnMuc2xpY2UoKSlcclxuICAgICAgICBsaXN0ZW5lciguLi5hcmdzKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcbiIsIi8qXHJcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIEFkYmxvY2sgUGx1cyA8aHR0cHM6Ly9hZGJsb2NrcGx1cy5vcmcvPixcclxuICogQ29weXJpZ2h0IChDKSAyMDA2LXByZXNlbnQgZXllbyBHbWJIXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XHJcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIGFzXHJcbiAqIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLlxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcclxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcclxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxyXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKlxyXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxyXG4gKiBhbG9uZyB3aXRoIEFkYmxvY2sgUGx1cy4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cclxuICovXHJcblxyXG4vKiogQG1vZHVsZSAqL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4vKipcclxuICogQGZpbGVPdmVydmlldyBEZWZpbml0aW9uIG9mIEZpbHRlciBjbGFzcyBhbmQgaXRzIHN1YmNsYXNzZXMuXHJcbiAqL1xyXG5cclxuY29uc3Qge2NvbnRlbnRUeXBlcywgUkVTT1VSQ0VfVFlQRVN9ID0gcmVxdWlyZShcIi4vY29udGVudFR5cGVzXCIpO1xyXG5jb25zdCB7ZmlsdGVyVG9SZWdFeHB9ID0gcmVxdWlyZShcIi4vY29tbW9uXCIpO1xyXG5jb25zdCB7cGFyc2VEb21haW5zLCBkb21haW5TdWZmaXhlc30gPSByZXF1aXJlKFwiLi91cmxcIik7XHJcbmNvbnN0IHtmaWx0ZXJTdGF0ZX0gPSByZXF1aXJlKFwiLi9maWx0ZXJTdGF0ZVwiKTtcclxuXHJcbmNvbnN0IHJlc291cmNlcyA9IHJlcXVpcmUoXCIuLi9kYXRhL3Jlc291cmNlcy5qc29uXCIpO1xyXG5cclxuLyoqXHJcbiAqIE1hcCBvZiBpbnRlcm5hbCByZXNvdXJjZXMgZm9yIFVSTCByZXdyaXRpbmcuXHJcbiAqIEB0eXBlIHtNYXAuPHN0cmluZyxzdHJpbmc+fVxyXG4gKi9cclxubGV0IHJlc291cmNlTWFwID0gbmV3IE1hcChcclxuICBPYmplY3Qua2V5cyhyZXNvdXJjZXMpLm1hcChrZXkgPT4gW2tleSwgcmVzb3VyY2VzW2tleV1dKVxyXG4pO1xyXG5cclxuLyoqXHJcbiAqIFJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIHRvIG1hdGNoIHRoZSBgfHxgIHByZWZpeCBpbiBhbiBvdGhlcndpc2UgbGl0ZXJhbFxyXG4gKiBwYXR0ZXJuLlxyXG4gKiBAdHlwZSB7UmVnRXhwfVxyXG4gKi9cclxubGV0IGV4dGVuZGVkQW5jaG9yUmVnRXhwID0gbmV3IFJlZ0V4cChmaWx0ZXJUb1JlZ0V4cChcInx8XCIpICsgXCIkXCIpO1xyXG5cclxuLyoqXHJcbiAqIFJlZ3VsYXIgZXhwcmVzc2lvbiB1c2VkIHRvIG1hdGNoIHRoZSBgXmAgc3VmZml4IGluIGFuIG90aGVyd2lzZSBsaXRlcmFsXHJcbiAqIHBhdHRlcm4uXHJcbiAqIEB0eXBlIHtSZWdFeHB9XHJcbiAqL1xyXG4vLyBOb3RlOiBUaGlzIHNob3VsZCBtYXRjaCB0aGUgcGF0dGVybiBpbiBsaWIvY29tbW9uLmpzXHJcbmxldCBzZXBhcmF0b3JSZWdFeHAgPSAvW1xceDAwLVxceDI0XFx4MjYtXFx4MkNcXHgyRlxceDNBLVxceDQwXFx4NUItXFx4NUVcXHg2MFxceDdCLVxceDdGXS87XHJcblxyXG4vKipcclxuICogQ2hlY2tzIHdoZXRoZXIgdGhlIGdpdmVuIHBhdHRlcm4gaXMgYSBzdHJpbmcgb2YgbGl0ZXJhbCBjaGFyYWN0ZXJzIHdpdGggbm9cclxuICogd2lsZGNhcmRzIG9yIGFueSBvdGhlciBzcGVjaWFsIGNoYXJhY3RlcnMuXHJcbiAqXHJcbiAqIElmIHRoZSBwYXR0ZXJuIGlzIHByZWZpeGVkIHdpdGggYSBgfHxgIG9yIHN1ZmZpeGVkIHdpdGggYSBgXmAgYnV0IG90aGVyd2lzZVxyXG4gKiBjb250YWlucyBubyBzcGVjaWFsIGNoYXJhY3RlcnMsIGl0IGlzIHN0aWxsIGNvbnNpZGVyZWQgdG8gYmUgYSBsaXRlcmFsXHJcbiAqIHBhdHRlcm4uXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXR0ZXJuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gKi9cclxuZnVuY3Rpb24gaXNMaXRlcmFsUGF0dGVybihwYXR0ZXJuKVxyXG57XHJcbiAgcmV0dXJuICEvWypefF0vLnRlc3QocGF0dGVybi5yZXBsYWNlKC9eXFx8ezEsMn0vLCBcIlwiKS5yZXBsYWNlKC9bfF5dJC8sIFwiXCIpKTtcclxufVxyXG5cclxubGV0IGlzQWN0aXZlRmlsdGVyID1cclxuLyoqXHJcbiAqIENoZWNrcyB3aGV0aGVyIHRoZSBnaXZlbiBmaWx0ZXIgaXMgYW4gYWN0aXZlIGZpbHRlci5cclxuICpcclxuICogRmlsdGVycyBvZiB0eXBlIGBibG9ja2luZ2AsIGBhbGxvd2luZ2AsIGBlbGVtaGlkZWAsIGBlbGVtaGlkZWV4Y2VwdGlvbmAsXHJcbiAqIGBlbGVtaGlkZWVtdWxhdGlvbmAsIGFuZCBgc25pcHBldGAgYXJlIGNvbnNpZGVyZWQgYWN0aXZlOyBmaWx0ZXJzIG9mIHR5cGVcclxuICogYGludmFsaWRgIGFuZCBgY29tbWVudGAgYXJlIG5vdCBjb25zaWRlcmVkIGFjdGl2ZS5cclxuICpcclxuICogQHBhcmFtIHs/RmlsdGVyfSBmaWx0ZXIgVGhlIGZpbHRlci5cclxuICpcclxuICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGZpbHRlciBpcyBhY3RpdmUuXHJcbiAqL1xyXG5leHBvcnRzLmlzQWN0aXZlRmlsdGVyID0gZnVuY3Rpb24gaXNBY3RpdmVGaWx0ZXIoZmlsdGVyKVxyXG57XHJcbiAgcmV0dXJuIGZpbHRlciBpbnN0YW5jZW9mIEFjdGl2ZUZpbHRlcjtcclxufTtcclxuXHJcbmxldCBGaWx0ZXIgPVxyXG4vKipcclxuICogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgZmlsdGVyc1xyXG4gKi9cclxuZXhwb3J0cy5GaWx0ZXIgPSBjbGFzcyBGaWx0ZXJcclxue1xyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0ICAgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBmaWx0ZXJcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHRleHQpXHJcbiAge1xyXG4gICAgdGhpcy5fdGV4dCA9IHRleHQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGZpbHRlclxyXG4gICAqIEB0eXBlIHtzdHJpbmd9XHJcbiAgICovXHJcbiAgZ2V0IHRleHQoKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLl90ZXh0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmlsdGVyIHR5cGUgYXMgYSBzdHJpbmcsIGUuZy4gXCJibG9ja2luZ1wiLlxyXG4gICAqIEB0eXBlIHtzdHJpbmd9XHJcbiAgICovXHJcbiAgZ2V0IHR5cGUoKVxyXG4gIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBkZWZpbmUgZmlsdGVyIHR5cGUgaW4gdGhlIHN1YmNsYXNzXCIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2VyaWFsaXplcyB0aGUgZmlsdGVyIGZvciB3cml0aW5nIG91dCBvbiBkaXNrLlxyXG4gICAqIEB5aWVsZHMge3N0cmluZ31cclxuICAgKi9cclxuICAqc2VyaWFsaXplKClcclxuICB7XHJcbiAgICBsZXQge3RleHR9ID0gdGhpcztcclxuXHJcbiAgICB5aWVsZCBcIltGaWx0ZXJdXCI7XHJcbiAgICB5aWVsZCBcInRleHQ9XCIgKyB0ZXh0O1xyXG4gIH1cclxuXHJcbiAgdG9TdHJpbmcoKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLnRleHQ7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIENhY2hlIGZvciBrbm93biBmaWx0ZXJzLCBtYXBzIHN0cmluZyByZXByZXNlbnRhdGlvbiB0byBmaWx0ZXIgb2JqZWN0cy5cclxuICogQHR5cGUge01hcC48c3RyaW5nLG1vZHVsZTpmaWx0ZXJDbGFzc2VzLkZpbHRlcj59XHJcbiAqL1xyXG5GaWx0ZXIua25vd25GaWx0ZXJzID0gbmV3IE1hcCgpO1xyXG5cclxuLyoqXHJcbiAqIFJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGNvbnRlbnQgZmlsdGVycyBzaG91bGQgbWF0Y2hcclxuICogQHR5cGUge1JlZ0V4cH1cclxuICovXHJcbkZpbHRlci5jb250ZW50UmVnRXhwID0gL14oW14vfEBcIiFdKj8pIyhbQD8kXSk/IyguKykkLztcclxuLyoqXHJcbiAqIFJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IG9wdGlvbnMgb24gYSBSZWdFeHAgZmlsdGVyIHNob3VsZCBtYXRjaFxyXG4gKiBAdHlwZSB7UmVnRXhwfVxyXG4gKi9cclxuRmlsdGVyLm9wdGlvbnNSZWdFeHAgPSAvXFwkKH4/W1xcdy1dKyg/Oj1bXixdKik/KD86LH4/W1xcdy1dKyg/Oj1bXixdKik/KSopJC87XHJcbi8qKlxyXG4gKiBSZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBtYXRjaGVzIGFuIGludmFsaWQgQ29udGVudCBTZWN1cml0eSBQb2xpY3lcclxuICogQHR5cGUge1JlZ0V4cH1cclxuICovXHJcbkZpbHRlci5pbnZhbGlkQ1NQUmVnRXhwID0gLyg7fF4pID8oYmFzZS11cml8cmVmZXJyZXJ8cmVwb3J0LXRvfHJlcG9ydC11cml8dXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cylcXGIvaTtcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgZmlsdGVyIG9mIGNvcnJlY3QgdHlwZSBmcm9tIGl0cyB0ZXh0IHJlcHJlc2VudGF0aW9uIC0gZG9lcyB0aGVcclxuICogYmFzaWMgcGFyc2luZyBhbmQgY2FsbHMgdGhlIHJpZ2h0IGNvbnN0cnVjdG9yIHRoZW4uXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0ICAgYXMgaW4gRmlsdGVyKClcclxuICogQHJldHVybiB7bW9kdWxlOmZpbHRlckNsYXNzZXMuRmlsdGVyfVxyXG4gKi9cclxuRmlsdGVyLmZyb21UZXh0ID0gZnVuY3Rpb24odGV4dClcclxue1xyXG4gIGxldCBmaWx0ZXIgPSBGaWx0ZXIua25vd25GaWx0ZXJzLmdldCh0ZXh0KTtcclxuICBpZiAoZmlsdGVyKVxyXG4gICAgcmV0dXJuIGZpbHRlcjtcclxuXHJcbiAgaWYgKHRleHRbMF0gPT0gXCIhXCIpXHJcbiAge1xyXG4gICAgZmlsdGVyID0gbmV3IENvbW1lbnRGaWx0ZXIodGV4dCk7XHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICBsZXQgbWF0Y2ggPSB0ZXh0LmluY2x1ZGVzKFwiI1wiKSA/IEZpbHRlci5jb250ZW50UmVnRXhwLmV4ZWModGV4dCkgOiBudWxsO1xyXG4gICAgaWYgKG1hdGNoKVxyXG4gICAgICBmaWx0ZXIgPSBDb250ZW50RmlsdGVyLmZyb21UZXh0KHRleHQsIG1hdGNoWzFdLCBtYXRjaFsyXSwgbWF0Y2hbM10pO1xyXG4gICAgZWxzZVxyXG4gICAgICBmaWx0ZXIgPSBVUkxGaWx0ZXIuZnJvbVRleHQodGV4dCk7XHJcbiAgfVxyXG5cclxuICBGaWx0ZXIua25vd25GaWx0ZXJzLnNldChmaWx0ZXIudGV4dCwgZmlsdGVyKTtcclxuICByZXR1cm4gZmlsdGVyO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIERlc2VyaWFsaXplcyBhIGZpbHRlclxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gIG9iaiBtYXAgb2Ygc2VyaWFsaXplZCBwcm9wZXJ0aWVzIGFuZCB0aGVpciB2YWx1ZXNcclxuICogQHJldHVybiB7bW9kdWxlOmZpbHRlckNsYXNzZXMuRmlsdGVyfSBmaWx0ZXIgb3IgbnVsbCBpZiB0aGUgZmlsdGVyIGNvdWxkbid0XHJcbiAqICAgYmUgY3JlYXRlZFxyXG4gKi9cclxuRmlsdGVyLmZyb21PYmplY3QgPSBmdW5jdGlvbihvYmopXHJcbntcclxuICBsZXQgZmlsdGVyID0gRmlsdGVyLmZyb21UZXh0KG9iai50ZXh0KTtcclxuICBpZiAoaXNBY3RpdmVGaWx0ZXIoZmlsdGVyKSlcclxuICAgIGZpbHRlclN0YXRlLmZyb21PYmplY3QoZmlsdGVyLnRleHQsIG9iaik7XHJcbiAgcmV0dXJuIGZpbHRlcjtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZW1vdmVzIHVubmVjZXNzYXJ5IHdoaXRlc3BhY2VzIGZyb20gZmlsdGVyIHRleHQsIHdpbGwgb25seSByZXR1cm4gbnVsbCBpZlxyXG4gKiB0aGUgaW5wdXQgcGFyYW1ldGVyIGlzIG51bGwuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XHJcbiAqIEByZXR1cm4ge3N0cmluZ31cclxuICovXHJcbkZpbHRlci5ub3JtYWxpemUgPSBmdW5jdGlvbih0ZXh0KVxyXG57XHJcbiAgaWYgKCF0ZXh0KVxyXG4gICAgcmV0dXJuIHRleHQ7XHJcblxyXG4gIC8vIFJlbW92ZSBsaW5lIGJyZWFrcywgdGFicyBldGNcclxuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9bXlxcUyBdKy9nLCBcIlwiKTtcclxuXHJcbiAgaWYgKCF0ZXh0LmluY2x1ZGVzKFwiIFwiKSlcclxuICAgIHJldHVybiB0ZXh0O1xyXG5cclxuICAvLyBEb24ndCByZW1vdmUgc3BhY2VzIGluc2lkZSBjb21tZW50c1xyXG4gIGlmICgvXiAqIS8udGVzdCh0ZXh0KSlcclxuICAgIHJldHVybiB0ZXh0LnRyaW0oKTtcclxuXHJcbiAgLy8gU3BlY2lhbCB0cmVhdG1lbnQgZm9yIGNvbnRlbnQgZmlsdGVycywgcmlnaHQgc2lkZSBpcyBhbGxvd2VkIHRvIGNvbnRhaW5cclxuICAvLyBzcGFjZXNcclxuICBpZiAoRmlsdGVyLmNvbnRlbnRSZWdFeHAudGVzdCh0ZXh0KSlcclxuICB7XHJcbiAgICBsZXQgWywgZG9tYWlucywgc2VwYXJhdG9yLCBib2R5XSA9IC9eKC4qPykoI1tAPyRdPyM/KSguKikkLy5leGVjKHRleHQpO1xyXG4gICAgcmV0dXJuIGRvbWFpbnMucmVwbGFjZSgvICsvZywgXCJcIikgKyBzZXBhcmF0b3IgKyBib2R5LnRyaW0oKTtcclxuICB9XHJcblxyXG4gIC8vIEZvciBtb3N0IHJlZ2V4cCBmaWx0ZXJzIHdlIHN0cmlwIGFsbCBzcGFjZXMsIGJ1dCAkY3NwIGZpbHRlciBvcHRpb25zXHJcbiAgLy8gYXJlIGFsbG93ZWQgdG8gY29udGFpbiBzaW5nbGUgKG5vbiB0cmFpbGluZykgc3BhY2VzLlxyXG4gIGxldCBzdHJpcHBlZFRleHQgPSB0ZXh0LnJlcGxhY2UoLyArL2csIFwiXCIpO1xyXG4gIGlmICghc3RyaXBwZWRUZXh0LmluY2x1ZGVzKFwiJFwiKSB8fCAhL1xcYihjc3B8aGVhZGVyKT0vaS50ZXN0KHN0cmlwcGVkVGV4dCkpXHJcbiAgICByZXR1cm4gc3RyaXBwZWRUZXh0O1xyXG5cclxuICBsZXQgb3B0aW9uc01hdGNoID0gRmlsdGVyLm9wdGlvbnNSZWdFeHAuZXhlYyhzdHJpcHBlZFRleHQpO1xyXG4gIGlmICghb3B0aW9uc01hdGNoKVxyXG4gICAgcmV0dXJuIHN0cmlwcGVkVGV4dDtcclxuXHJcbiAgLy8gRm9yICRjc3AgZmlsdGVycyB3ZSBtdXN0IGZpcnN0IHNlcGFyYXRlIG91dCB0aGUgb3B0aW9ucyBwYXJ0IG9mIHRoZVxyXG4gIC8vIHRleHQsIGJlaW5nIGNhcmVmdWwgdG8gcHJlc2VydmUgaXRzIHNwYWNlcy5cclxuICBsZXQgYmVmb3JlT3B0aW9ucyA9IHN0cmlwcGVkVGV4dC5zdWJzdHJpbmcoMCwgb3B0aW9uc01hdGNoLmluZGV4KTtcclxuICBsZXQgc3RyaXBwZWREb2xsYXJJbmRleCA9IC0xO1xyXG4gIGxldCBkb2xsYXJJbmRleCA9IC0xO1xyXG4gIGRvXHJcbiAge1xyXG4gICAgc3RyaXBwZWREb2xsYXJJbmRleCA9IGJlZm9yZU9wdGlvbnMuaW5kZXhPZihcIiRcIiwgc3RyaXBwZWREb2xsYXJJbmRleCArIDEpO1xyXG4gICAgZG9sbGFySW5kZXggPSB0ZXh0LmluZGV4T2YoXCIkXCIsIGRvbGxhckluZGV4ICsgMSk7XHJcbiAgfVxyXG4gIHdoaWxlIChzdHJpcHBlZERvbGxhckluZGV4ICE9IC0xKTtcclxuICBsZXQgb3B0aW9uc1RleHQgPSB0ZXh0LnN1YnN0cmluZyhkb2xsYXJJbmRleCArIDEpO1xyXG5cclxuICAvLyBUaGVuIHdlIGNhbiBub3JtYWxpemUgc3BhY2VzIGluIHRoZSBvcHRpb25zIHBhcnQgc2FmZWx5XHJcbiAgbGV0IG9wdGlvbnMgPSBvcHRpb25zVGV4dC5zcGxpdChcIixcIik7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKVxyXG4gIHtcclxuICAgIGxldCBvcHRpb24gPSBvcHRpb25zW2ldO1xyXG4gICAgbGV0IG9wdGlvbk1hdGNoID0gL14gKihjICpzICpwfGggKmUgKmEgKmQgKmUgKnIpICo9L2kuZXhlYyhvcHRpb24pO1xyXG4gICAgaWYgKG9wdGlvbk1hdGNoKVxyXG4gICAge1xyXG4gICAgICBvcHRpb25zW2ldID0gb3B0aW9uTWF0Y2hbMF0ucmVwbGFjZSgvICsvZywgXCJcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgb3B0aW9uLnN1YnN0cmluZyhvcHRpb25NYXRjaFswXS5sZW5ndGgpLnRyaW0oKS5yZXBsYWNlKC8gKy9nLCBcIiBcIik7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIG9wdGlvbnNbaV0gPSBvcHRpb24ucmVwbGFjZSgvICsvZywgXCJcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gYmVmb3JlT3B0aW9ucyArIFwiJFwiICsgb3B0aW9ucy5qb2luKCk7XHJcbn07XHJcblxyXG5sZXQgSW52YWxpZEZpbHRlciA9XHJcbi8qKlxyXG4gKiBDbGFzcyBmb3IgaW52YWxpZCBmaWx0ZXJzXHJcbiAqL1xyXG5leHBvcnRzLkludmFsaWRGaWx0ZXIgPSBjbGFzcyBJbnZhbGlkRmlsdGVyIGV4dGVuZHMgRmlsdGVyXHJcbntcclxuICAvKipcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBzZWUge0BsaW5rIG1vZHVsZTpmaWx0ZXJDbGFzc2VzLkZpbHRlciBGaWx0ZXIoKX1cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVhc29uIFJlYXNvbiB3aHkgdGhpcyBmaWx0ZXIgaXMgaW52YWxpZFxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IodGV4dCwgcmVhc29uKVxyXG4gIHtcclxuICAgIHN1cGVyKHRleHQpO1xyXG5cclxuICAgIHRoaXMuX3JlYXNvbiA9IHJlYXNvbjtcclxuICB9XHJcblxyXG4gIGdldCB0eXBlKClcclxuICB7XHJcbiAgICByZXR1cm4gXCJpbnZhbGlkXCI7XHJcbiAgfVxyXG5cclxuICAqc2VyaWFsaXplKCkge31cclxuXHJcbiAgLyoqXHJcbiAgICogUmVhc29uIHdoeSB0aGlzIGZpbHRlciBpcyBpbnZhbGlkXHJcbiAgICogQHR5cGUge3N0cmluZ31cclxuICAgKi9cclxuICBnZXQgcmVhc29uKClcclxuICB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVhc29uO1xyXG4gIH1cclxufTtcclxuXHJcbmxldCBDb21tZW50RmlsdGVyID1cclxuLyoqXHJcbiAqIENsYXNzIGZvciBjb21tZW50c1xyXG4gKi9cclxuZXhwb3J0cy5Db21tZW50RmlsdGVyID0gY2xhc3MgQ29tbWVudEZpbHRlciBleHRlbmRzIEZpbHRlclxyXG57XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgc2VlIHtAbGluayBtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5GaWx0ZXIgRmlsdGVyKCl9XHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcih0ZXh0KVxyXG4gIHtcclxuICAgIHN1cGVyKHRleHQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHR5cGUoKVxyXG4gIHtcclxuICAgIHJldHVybiBcImNvbW1lbnRcIjtcclxuICB9XHJcblxyXG4gICpzZXJpYWxpemUoKSB7fVxyXG59O1xyXG5cclxubGV0IEFjdGl2ZUZpbHRlciA9XHJcbi8qKlxyXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBmaWx0ZXJzIHRoYXQgY2FuIGdldCBoaXRzXHJcbiAqL1xyXG5leHBvcnRzLkFjdGl2ZUZpbHRlciA9IGNsYXNzIEFjdGl2ZUZpbHRlciBleHRlbmRzIEZpbHRlclxyXG57XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRcclxuICAgKiAgIHNlZSB7QGxpbmsgbW9kdWxlOmZpbHRlckNsYXNzZXMuRmlsdGVyIEZpbHRlcigpfVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZG9tYWluc11cclxuICAgKiAgIERvbWFpbnMgdGhhdCB0aGUgZmlsdGVyIGlzIHJlc3RyaWN0ZWQgdG8gc2VwYXJhdGVkIGJ5IGRvbWFpblNlcGFyYXRvclxyXG4gICAqICAgZS5nLiBcImZvby5jb218YmFyLmNvbXx+YmF6LmNvbVwiXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcih0ZXh0LCBkb21haW5zKVxyXG4gIHtcclxuICAgIHN1cGVyKHRleHQpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RyaW5nIHRoYXQgdGhlIGRvbWFpbnMgcHJvcGVydHkgc2hvdWxkIGJlIGdlbmVyYXRlZCBmcm9tXHJcbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgdGhpcy5kb21haW5Tb3VyY2UgPSBkb21haW5zID8gZG9tYWlucy50b0xvd2VyQ2FzZSgpIDogbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlcGFyYXRvciBjaGFyYWN0ZXIgdXNlZCBpbiBkb21haW5Tb3VyY2UgcHJvcGVydHksIG11c3QgYmVcclxuICAgICAqIG92ZXJyaWRkZW4gYnkgc3ViY2xhc3Nlc1xyXG4gICAgICogQHR5cGUge3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgdGhpcy5kb21haW5TZXBhcmF0b3IgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RyaW5nIHRoYXQgdGhlIHNpdGVrZXkgcHJvcGVydHkgc2hvdWxkIGJlIGdlbmVyYXRlZCBmcm9tXHJcbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgdGhpcy5zaXRla2V5U291cmNlID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE51bWJlciBvZiBmaWx0ZXJzIGNvbnRhaW5lZCwgd2lsbCBhbHdheXMgYmUgMSAocmVxdWlyZWQgdG9cclxuICAgICAqIG9wdGltaXplIHtAbGluayBtb2R1bGU6bWF0Y2hlci5NYXRjaGVyIE1hdGNoZXJ9KS5cclxuICAgICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICAgKiBAcGFja2FnZVxyXG4gICAgICovXHJcbiAgICB0aGlzLnNpemUgPSAxO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2VlIEZpbHRlci5zZXJpYWxpemUoKVxyXG4gICAqIEBpbmhlcml0ZG9jXHJcbiAgICovXHJcbiAgKnNlcmlhbGl6ZSgpXHJcbiAge1xyXG4gICAgeWllbGQqIGZpbHRlclN0YXRlLnNlcmlhbGl6ZSh0aGlzLnRleHQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGVmaW5lcyB3aGV0aGVyIHRoZSBmaWx0ZXIgaXMgZGlzYWJsZWRcclxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cclxuICAgKi9cclxuICBnZXQgZGlzYWJsZWQoKVxyXG4gIHtcclxuICAgIHJldHVybiAhZmlsdGVyU3RhdGUuaXNFbmFibGVkKHRoaXMudGV4dCk7XHJcbiAgfVxyXG4gIHNldCBkaXNhYmxlZCh2YWx1ZSlcclxuICB7XHJcbiAgICBmaWx0ZXJTdGF0ZS5zZXRFbmFibGVkKHRoaXMudGV4dCwgIXZhbHVlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE51bWJlciBvZiBoaXRzIG9uIHRoZSBmaWx0ZXIgc2luY2UgdGhlIGxhc3QgcmVzZXRcclxuICAgKiBAdHlwZSB7bnVtYmVyfVxyXG4gICAqL1xyXG4gIGdldCBoaXRDb3VudCgpXHJcbiAge1xyXG4gICAgcmV0dXJuIGZpbHRlclN0YXRlLmdldEhpdENvdW50KHRoaXMudGV4dCk7XHJcbiAgfVxyXG4gIHNldCBoaXRDb3VudCh2YWx1ZSlcclxuICB7XHJcbiAgICBmaWx0ZXJTdGF0ZS5zZXRIaXRDb3VudCh0aGlzLnRleHQsIHZhbHVlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIExhc3QgdGltZSB0aGUgZmlsdGVyIGhhZCBhIGhpdCAoaW4gbWlsbGlzZWNvbmRzIHNpbmNlIHRoZSBiZWdpbm5pbmcgb2YgdGhlXHJcbiAgICogZXBvY2gpXHJcbiAgICogQHR5cGUge251bWJlcn1cclxuICAgKi9cclxuICBnZXQgbGFzdEhpdCgpXHJcbiAge1xyXG4gICAgcmV0dXJuIGZpbHRlclN0YXRlLmdldExhc3RIaXQodGhpcy50ZXh0KTtcclxuICB9XHJcbiAgc2V0IGxhc3RIaXQodmFsdWUpXHJcbiAge1xyXG4gICAgZmlsdGVyU3RhdGUuc2V0TGFzdEhpdCh0aGlzLnRleHQsIHZhbHVlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1hcCBjb250YWluaW5nIGRvbWFpbnMgdGhhdCB0aGlzIGZpbHRlciBzaG91bGQgbWF0Y2ggb24vbm90IG1hdGNoXHJcbiAgICogb24gb3IgbnVsbCBpZiB0aGUgZmlsdGVyIHNob3VsZCBtYXRjaCBvbiBhbGwgZG9tYWluc1xyXG4gICAqIEB0eXBlIHs/TWFwLjxzdHJpbmcsYm9vbGVhbj59XHJcbiAgICovXHJcbiAgZ2V0IGRvbWFpbnMoKVxyXG4gIHtcclxuICAgIGxldCB7ZG9tYWluU291cmNlfSA9IHRoaXM7XHJcbiAgICBpZiAoIWRvbWFpblNvdXJjZSlcclxuICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgbGV0IHZhbHVlID0gcGFyc2VEb21haW5zKGRvbWFpblNvdXJjZSwgdGhpcy5kb21haW5TZXBhcmF0b3IpO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZG9tYWluc1wiLCB7dmFsdWV9KTtcclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFycmF5IGNvbnRhaW5pbmcgcHVibGljIGtleXMgb2Ygd2Vic2l0ZXMgdGhhdCB0aGlzIGZpbHRlciBzaG91bGQgYXBwbHkgdG9cclxuICAgKiBAdHlwZSB7P0FycmF5LjxzdHJpbmc+fVxyXG4gICAqL1xyXG4gIGdldCBzaXRla2V5cygpXHJcbiAge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVja3Mgd2hldGhlciB0aGlzIGZpbHRlciBpcyBhY3RpdmUgb24gYSBkb21haW4uXHJcbiAgICogQHBhcmFtIHs/c3RyaW5nfSBbZG9jRG9tYWluXSBkb21haW4gbmFtZSBvZiB0aGUgZG9jdW1lbnQgdGhhdCBsb2FkcyB0aGUgVVJMXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtzaXRla2V5XSBwdWJsaWMga2V5IHByb3ZpZGVkIGJ5IHRoZSBkb2N1bWVudFxyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaW4gY2FzZSBvZiB0aGUgZmlsdGVyIGJlaW5nIGFjdGl2ZVxyXG4gICAqL1xyXG4gIGlzQWN0aXZlT25Eb21haW4oZG9jRG9tYWluLCBzaXRla2V5KVxyXG4gIHtcclxuICAgIC8vIFNpdGVrZXlzIGFyZSBjYXNlLXNlbnNpdGl2ZSBzbyB3ZSBzaG91bGRuJ3QgY29udmVydCB0aGVtIHRvXHJcbiAgICAvLyB1cHBlci1jYXNlIHRvIGF2b2lkIGZhbHNlIHBvc2l0aXZlcyBoZXJlLiBJbnN0ZWFkIHdlIG5lZWQgdG9cclxuICAgIC8vIGNoYW5nZSB0aGUgd2F5IGZpbHRlciBvcHRpb25zIGFyZSBwYXJzZWQuXHJcbiAgICBpZiAodGhpcy5zaXRla2V5cyAmJlxyXG4gICAgICAgICghc2l0ZWtleSB8fCAhdGhpcy5zaXRla2V5cy5pbmNsdWRlcyhzaXRla2V5LnRvVXBwZXJDYXNlKCkpKSlcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIGxldCB7ZG9tYWluc30gPSB0aGlzO1xyXG5cclxuICAgIC8vIElmIG5vIGRvbWFpbnMgYXJlIHNldCB0aGUgcnVsZSBtYXRjaGVzIGV2ZXJ5d2hlcmVcclxuICAgIGlmICghZG9tYWlucylcclxuICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgaWYgKGRvY0RvbWFpbiA9PSBudWxsKVxyXG4gICAgICBkb2NEb21haW4gPSBcIlwiO1xyXG4gICAgZWxzZSBpZiAoZG9jRG9tYWluW2RvY0RvbWFpbi5sZW5ndGggLSAxXSA9PSBcIi5cIilcclxuICAgICAgZG9jRG9tYWluID0gZG9jRG9tYWluLnN1YnN0cmluZygwLCBkb2NEb21haW4ubGVuZ3RoIC0gMSk7XHJcblxyXG4gICAgLy8gSWYgdGhlIGRvY3VtZW50IGhhcyBubyBob3N0IG5hbWUsIG1hdGNoIG9ubHkgaWYgdGhlIGZpbHRlclxyXG4gICAgLy8gaXNuJ3QgcmVzdHJpY3RlZCB0byBzcGVjaWZpYyBkb21haW5zXHJcbiAgICBpZiAoIWRvY0RvbWFpbilcclxuICAgICAgcmV0dXJuIGRvbWFpbnMuZ2V0KFwiXCIpO1xyXG5cclxuICAgIGZvciAoZG9jRG9tYWluIG9mIGRvbWFpblN1ZmZpeGVzKGRvY0RvbWFpbikpXHJcbiAgICB7XHJcbiAgICAgIGxldCBpc0RvbWFpbkluY2x1ZGVkID0gZG9tYWlucy5nZXQoZG9jRG9tYWluKTtcclxuICAgICAgaWYgKHR5cGVvZiBpc0RvbWFpbkluY2x1ZGVkICE9IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgICAgcmV0dXJuIGlzRG9tYWluSW5jbHVkZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRvbWFpbnMuZ2V0KFwiXCIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIHdoZXRoZXIgdGhpcyBmaWx0ZXIgaXMgYWN0aXZlIG9ubHkgb24gYSBkb21haW4gYW5kIGl0cyBzdWJkb21haW5zLlxyXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gW2RvY0RvbWFpbl1cclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxyXG4gICAqL1xyXG4gIGlzQWN0aXZlT25seU9uRG9tYWluKGRvY0RvbWFpbilcclxuICB7XHJcbiAgICBsZXQge2RvbWFpbnN9ID0gdGhpcztcclxuXHJcbiAgICBpZiAoIWRvbWFpbnMgfHwgZG9tYWlucy5nZXQoXCJcIikpXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICBpZiAoZG9jRG9tYWluID09IG51bGwpXHJcbiAgICAgIGRvY0RvbWFpbiA9IFwiXCI7XHJcbiAgICBlbHNlIGlmIChkb2NEb21haW5bZG9jRG9tYWluLmxlbmd0aCAtIDFdID09IFwiLlwiKVxyXG4gICAgICBkb2NEb21haW4gPSBkb2NEb21haW4uc3Vic3RyaW5nKDAsIGRvY0RvbWFpbi5sZW5ndGggLSAxKTtcclxuXHJcbiAgICBpZiAoIWRvY0RvbWFpbilcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIGZvciAobGV0IFtkb21haW4sIGlzSW5jbHVkZWRdIG9mIGRvbWFpbnMpXHJcbiAgICB7XHJcbiAgICAgIGlmIChpc0luY2x1ZGVkICYmIGRvbWFpbiAhPSBkb2NEb21haW4pXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAoZG9tYWluLmxlbmd0aCA8PSBkb2NEb21haW4ubGVuZ3RoKVxyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAoIWRvbWFpbi5lbmRzV2l0aChcIi5cIiArIGRvY0RvbWFpbikpXHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrcyB3aGV0aGVyIHRoaXMgZmlsdGVyIGlzIGdlbmVyaWMgb3Igc3BlY2lmaWNcclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxyXG4gICAqL1xyXG4gIGlzR2VuZXJpYygpXHJcbiAge1xyXG4gICAgbGV0IHtzaXRla2V5cywgZG9tYWluc30gPSB0aGlzO1xyXG5cclxuICAgIHJldHVybiAhKHNpdGVrZXlzICYmIHNpdGVrZXlzLmxlbmd0aCkgJiYgKCFkb21haW5zIHx8IGRvbWFpbnMuZ2V0KFwiXCIpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFlpZWxkcyB0aGUgZmlsdGVyIGl0c2VsZiAocmVxdWlyZWQgdG8gb3B0aW1pemVcclxuICAgKiAgIHtAbGluayBtb2R1bGU6bWF0Y2hlci5NYXRjaGVyIE1hdGNoZXJ9KS5cclxuICAgKiBAeWllbGRzIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5BY3RpdmVGaWx0ZXJ9XHJcbiAgICogQHBhY2thZ2VcclxuICAgKi9cclxuICAqW1N5bWJvbC5pdGVyYXRvcl0oKVxyXG4gIHtcclxuICAgIHlpZWxkIHRoaXM7XHJcbiAgfVxyXG59O1xyXG5cclxubGV0IFVSTEZpbHRlciA9XHJcbi8qKlxyXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBVUkwgZmlsdGVyc1xyXG4gKi9cclxuZXhwb3J0cy5VUkxGaWx0ZXIgPSBjbGFzcyBVUkxGaWx0ZXIgZXh0ZW5kcyBBY3RpdmVGaWx0ZXJcclxue1xyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IHNlZSB7QGxpbmsgbW9kdWxlOmZpbHRlckNsYXNzZXMuRmlsdGVyIEZpbHRlcigpfVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWdleHBTb3VyY2VcclxuICAgKiAgIGZpbHRlciBwYXJ0IHRoYXQgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBzaG91bGQgYmUgYnVpbGQgZnJvbVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbY29udGVudFR5cGVdXHJcbiAgICogICBDb250ZW50IHR5cGVzIHRoZSBmaWx0ZXIgYXBwbGllcyB0bywgY29tYmluYXRpb24gb2YgdmFsdWVzIGZyb21cclxuICAgKiAgIGB7QGxpbmsgbW9kdWxlOmNvbnRlbnRUeXBlcy5jb250ZW50VHlwZXN9YFxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW21hdGNoQ2FzZV1cclxuICAgKiAgIERlZmluZXMgd2hldGhlciB0aGUgZmlsdGVyIHNob3VsZCBkaXN0aW5ndWlzaCBiZXR3ZWVuIGxvd2VyIGFuZCB1cHBlclxyXG4gICAqICAgY2FzZSBsZXR0ZXJzXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtkb21haW5zXVxyXG4gICAqICAgRG9tYWlucyB0aGF0IHRoZSBmaWx0ZXIgaXMgcmVzdHJpY3RlZCB0bywgZS5nLiBcImZvby5jb218YmFyLmNvbXx+YmF6LmNvbVwiXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbdGhpcmRQYXJ0eV1cclxuICAgKiAgIERlZmluZXMgd2hldGhlciB0aGUgZmlsdGVyIHNob3VsZCBhcHBseSB0byB0aGlyZC1wYXJ0eSBvciBmaXJzdC1wYXJ0eVxyXG4gICAqICAgY29udGVudCBvbmx5XHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtzaXRla2V5c11cclxuICAgKiAgIFB1YmxpYyBrZXlzIG9mIHdlYnNpdGVzIHRoYXQgdGhpcyBmaWx0ZXIgc2hvdWxkIGFwcGx5IHRvXHJcbiAgICogQHBhcmFtIHs/c3RyaW5nfSBbaGVhZGVyXVxyXG4gICAqICAgSGVhZGVyLWJhc2VkIGZpbHRlcmluZy5cclxuICAgKiBAcGFyYW0gez9zdHJpbmd9IFtyZXdyaXRlXVxyXG4gICAqICAgVGhlIG5hbWUgb2YgdGhlIGludGVybmFsIHJlc291cmNlIHRvIHdoaWNoIHRvIHJld3JpdGUgdGhlXHJcbiAgICogICBVUkwuIGUuZy4gaWYgdGhlIHZhbHVlIG9mIHRoZSBgJHJld3JpdGVgIG9wdGlvbiBpc1xyXG4gICAqICAgYGFicC1yZXNvdXJjZTpibGFuay1odG1sYCwgdGhpcyBzaG91bGQgYmUgYGJsYW5rLWh0bWxgLlxyXG4gICAqXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcih0ZXh0LCByZWdleHBTb3VyY2UsIGNvbnRlbnRUeXBlLCBtYXRjaENhc2UsIGRvbWFpbnMsIHRoaXJkUGFydHksXHJcbiAgICAgICAgICAgICAgc2l0ZWtleXMsIGhlYWRlciwgcmV3cml0ZSlcclxuICB7XHJcbiAgICBzdXBlcih0ZXh0LCBkb21haW5zKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBzZWUgQWN0aXZlRmlsdGVyLmRvbWFpblNlcGFyYXRvclxyXG4gICAgICovXHJcbiAgICB0aGlzLmRvbWFpblNlcGFyYXRvciA9IFwifFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXhwcmVzc2lvbiBmcm9tIHdoaWNoIGEgcmVndWxhciBleHByZXNzaW9uIHNob3VsZCBiZSBnZW5lcmF0ZWQgLVxyXG4gICAgICogZm9yIGRlbGF5ZWQgY3JlYXRpb24gb2YgdGhlIHJlZ2V4cCBwcm9wZXJ0eVxyXG4gICAgICogQHR5cGUgez9zdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIHRoaXMucGF0dGVybiA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb250ZW50IHR5cGVzIHRoZSBmaWx0ZXIgYXBwbGllcyB0bywgY29tYmluYXRpb24gb2YgdmFsdWVzIGZyb21cclxuICAgICAqIGB7QGxpbmsgbW9kdWxlOmNvbnRlbnRUeXBlcy5jb250ZW50VHlwZXN9YFxyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgdGhpcy5jb250ZW50VHlwZSA9IGNvbnRlbnRUeXBlICE9IG51bGwgPyBjb250ZW50VHlwZSA6IFJFU09VUkNFX1RZUEVTO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVmaW5lcyB3aGV0aGVyIHRoZSBmaWx0ZXIgc2hvdWxkIGRpc3Rpbmd1aXNoIGJldHdlZW4gbG93ZXIgYW5kXHJcbiAgICAgKiB1cHBlciBjYXNlIGxldHRlcnNcclxuICAgICAqIEB0eXBlIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICB0aGlzLm1hdGNoQ2FzZSA9IG1hdGNoQ2FzZSB8fCBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERlZmluZXMgd2hldGhlciB0aGUgZmlsdGVyIHNob3VsZCBhcHBseSB0byB0aGlyZC1wYXJ0eSBvclxyXG4gICAgICogZmlyc3QtcGFydHkgY29udGVudCBvbmx5LiBDYW4gYmUgbnVsbCAoYXBwbHkgdG8gYWxsIGNvbnRlbnQpLlxyXG4gICAgICogQHR5cGUgez9ib29sZWFufVxyXG4gICAgICovXHJcbiAgICB0aGlzLnRoaXJkUGFydHkgPSB0aGlyZFBhcnR5ICE9IG51bGwgPyB0aGlyZFBhcnR5IDogbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEhlYWRlci1iYXNlZCBmaWx0ZXJpbmcgZXhwcmVzc2lvbi4gUmVmZXIgdG8gdGhlIGZpbHRlclxyXG4gICAgICogZG9jdW1lbnRhdGlvbiByZWZlcmVuY2UgZm9yIHRoZSBzeW50YXgsIG9yXHJcbiAgICAgKiBge0BsaW5rIEJsb2NraW5nRmlsdGVyLmZpbHRlckhlYWRlcnN9YCBmb3IgdGhlIHJlZmVyZW5jZVxyXG4gICAgICogaW1wbGVtZW50YXRpb24uXHJcbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgdGhpcy5oZWFkZXIgPSBoZWFkZXIgIT0gbnVsbCA/IGhlYWRlciA6IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgaW50ZXJuYWwgcmVzb3VyY2UgdG8gd2hpY2ggdG8gcmV3cml0ZSB0aGVcclxuICAgICAqIFVSTC4gZS5nLiBpZiB0aGUgdmFsdWUgb2YgdGhlIGAkcmV3cml0ZWAgb3B0aW9uIGlzXHJcbiAgICAgKiBgYWJwLXJlc291cmNlOmJsYW5rLWh0bWxgLCB0aGlzIHNob3VsZCBiZSBgYmxhbmstaHRtbGAuXHJcbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgdGhpcy5yZXdyaXRlID0gcmV3cml0ZSAhPSBudWxsID8gcmV3cml0ZSA6IG51bGw7XHJcblxyXG4gICAgaWYgKHNpdGVrZXlzICE9IG51bGwpXHJcbiAgICAgIHRoaXMuc2l0ZWtleVNvdXJjZSA9IHNpdGVrZXlzO1xyXG5cclxuICAgIGlmICghdGhpcy5tYXRjaENhc2UpXHJcbiAgICAgIHJlZ2V4cFNvdXJjZSA9IHJlZ2V4cFNvdXJjZS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgIGlmIChyZWdleHBTb3VyY2UubGVuZ3RoID49IDIgJiZcclxuICAgICAgICByZWdleHBTb3VyY2VbMF0gPT0gXCIvXCIgJiZcclxuICAgICAgICByZWdleHBTb3VyY2VbcmVnZXhwU291cmNlLmxlbmd0aCAtIDFdID09IFwiL1wiKVxyXG4gICAge1xyXG4gICAgICAvLyBUaGUgZmlsdGVyIGlzIGEgcmVndWxhciBleHByZXNzaW9uIC0gY29udmVydCBpdCBpbW1lZGlhdGVseSB0b1xyXG4gICAgICAvLyBjYXRjaCBzeW50YXggZXJyb3JzXHJcbiAgICAgIGxldCByZWdleHAgPVxyXG4gICAgICAgIG5ldyBSZWdFeHAocmVnZXhwU291cmNlLnN1YnN0cmluZygxLCByZWdleHBTb3VyY2UubGVuZ3RoIC0gMSkpO1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZWdleHBcIiwge3ZhbHVlOiByZWdleHB9KTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgLy8gUGF0dGVybnMgbGlrZSAvZm9vL2Jhci8qIGV4aXN0IHNvIHRoYXQgdGhleSBhcmUgbm90IHRyZWF0ZWQgYXMgcmVndWxhclxyXG4gICAgICAvLyBleHByZXNzaW9ucy4gV2UgZHJvcCBhbnkgc3VwZXJmbHVvdXMgd2lsZGNhcmRzIGhlcmUgc28gb3VyXHJcbiAgICAgIC8vIG9wdGltaXphdGlvbnMgY2FuIGtpY2sgaW4uXHJcbiAgICAgIHJlZ2V4cFNvdXJjZSA9IHJlZ2V4cFNvdXJjZS5yZXBsYWNlKC9eXFwqKy8sIFwiXCIpLnJlcGxhY2UoL1xcKiskLywgXCJcIik7XHJcblxyXG4gICAgICAvLyBObyBuZWVkIHRvIGNvbnZlcnQgdGhpcyBmaWx0ZXIgdG8gcmVndWxhciBleHByZXNzaW9uIHlldCwgZG8gaXQgb25cclxuICAgICAgLy8gZGVtYW5kXHJcbiAgICAgIHRoaXMucGF0dGVybiA9IHJlZ2V4cFNvdXJjZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSB1c2VkIHdoZW4gdGVzdGluZyBhZ2FpbnN0IHRoaXMgZmlsdGVyXHJcbiAgICogQHR5cGUge1JlZ0V4cH1cclxuICAgKi9cclxuICBnZXQgcmVnZXhwKClcclxuICB7XHJcbiAgICBsZXQgdmFsdWUgPSBudWxsO1xyXG5cclxuICAgIGxldCB7cGF0dGVybn0gPSB0aGlzO1xyXG4gICAgaWYgKCFpc0xpdGVyYWxQYXR0ZXJuKHBhdHRlcm4pKVxyXG4gICAgICB2YWx1ZSA9IG5ldyBSZWdFeHAoZmlsdGVyVG9SZWdFeHAocGF0dGVybikpO1xyXG5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlZ2V4cFwiLCB7dmFsdWV9KTtcclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBzZWUgQWN0aXZlRmlsdGVyLnNpdGVrZXlzXHJcbiAgICovXHJcbiAgZ2V0IHNpdGVrZXlzKClcclxuICB7XHJcbiAgICBsZXQge3NpdGVrZXlTb3VyY2V9ID0gdGhpcztcclxuICAgIGlmICghc2l0ZWtleVNvdXJjZSlcclxuICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgbGV0IHZhbHVlID0gc2l0ZWtleVNvdXJjZS5zcGxpdChcInxcIik7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzaXRla2V5c1wiLCB7dmFsdWV9KTtcclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRlc3RzIHdoZXRoZXIgdGhlIFVSTCByZXF1ZXN0IG1hdGNoZXMgdGhpcyBmaWx0ZXJcclxuICAgKiBAcGFyYW0ge21vZHVsZTp1cmwuVVJMUmVxdWVzdH0gcmVxdWVzdCBVUkwgcmVxdWVzdCB0byBiZSB0ZXN0ZWRcclxuICAgKiBAcGFyYW0ge251bWJlcn0gdHlwZU1hc2sgYml0bWFzayBvZiBjb250ZW50IC8gcmVxdWVzdCB0eXBlcyB0byBtYXRjaFxyXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gW3NpdGVrZXldIHB1YmxpYyBrZXkgcHJvdmlkZWQgYnkgdGhlIGRvY3VtZW50XHJcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpbiBjYXNlIG9mIGEgbWF0Y2hcclxuICAgKi9cclxuICBtYXRjaGVzKHJlcXVlc3QsIHR5cGVNYXNrLCBzaXRla2V5KVxyXG4gIHtcclxuICAgIHJldHVybiAodGhpcy5jb250ZW50VHlwZSAmIHR5cGVNYXNrKSAhPSAwICYmXHJcbiAgICAgICAgICAgKHRoaXMudGhpcmRQYXJ0eSA9PSBudWxsIHx8IHRoaXMudGhpcmRQYXJ0eSA9PSByZXF1ZXN0LnRoaXJkUGFydHkpICYmXHJcbiAgICAgICAgICAgKHRoaXMucmVnZXhwID9cclxuICAgICAgICAgICAgICB0aGlzLmlzQWN0aXZlT25Eb21haW4ocmVxdWVzdC5kb2N1bWVudEhvc3RuYW1lLCBzaXRla2V5KSAmJlxyXG4gICAgICAgICAgICAgIHRoaXMuX21hdGNoZXNMb2NhdGlvbihyZXF1ZXN0KSA6XHJcbiAgICAgICAgICAgICAgdGhpcy5fbWF0Y2hlc0xvY2F0aW9uKHJlcXVlc3QpICYmXHJcbiAgICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZU9uRG9tYWluKHJlcXVlc3QuZG9jdW1lbnRIb3N0bmFtZSwgc2l0ZWtleSkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIGdpdmVuIFVSTCByZXF1ZXN0IG1hdGNoZXMgdGhpcyBmaWx0ZXIncyBwYXR0ZXJuLlxyXG4gICAqIEBwYXJhbSB7bW9kdWxlOnVybC5VUkxSZXF1ZXN0fSByZXF1ZXN0IFRoZSBVUkwgcmVxdWVzdCB0byBjaGVjay5cclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBVUkwgcmVxdWVzdCBtYXRjaGVzLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgX21hdGNoZXNMb2NhdGlvbihyZXF1ZXN0KVxyXG4gIHtcclxuICAgIGxldCBsb2NhdGlvbiA9IHRoaXMubWF0Y2hDYXNlID8gcmVxdWVzdC5ocmVmIDogcmVxdWVzdC5sb3dlckNhc2VIcmVmO1xyXG5cclxuICAgIGxldCB7cmVnZXhwfSA9IHRoaXM7XHJcblxyXG4gICAgaWYgKHJlZ2V4cClcclxuICAgICAgcmV0dXJuIHJlZ2V4cC50ZXN0KGxvY2F0aW9uKTtcclxuXHJcbiAgICBsZXQge3BhdHRlcm59ID0gdGhpcztcclxuXHJcbiAgICBsZXQgc3RhcnRzV2l0aEFuY2hvciA9IHBhdHRlcm5bMF0gPT0gXCJ8XCI7XHJcbiAgICBsZXQgc3RhcnRzV2l0aEV4dGVuZGVkQW5jaG9yID0gc3RhcnRzV2l0aEFuY2hvciAmJiBwYXR0ZXJuWzFdID09IFwifFwiO1xyXG4gICAgbGV0IGVuZHNXaXRoU2VwYXJhdG9yID0gcGF0dGVybltwYXR0ZXJuLmxlbmd0aCAtIDFdID09IFwiXlwiO1xyXG4gICAgbGV0IGVuZHNXaXRoQW5jaG9yID0gIWVuZHNXaXRoU2VwYXJhdG9yICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuW3BhdHRlcm4ubGVuZ3RoIC0gMV0gPT0gXCJ8XCI7XHJcblxyXG4gICAgaWYgKHN0YXJ0c1dpdGhFeHRlbmRlZEFuY2hvcilcclxuICAgICAgcGF0dGVybiA9IHBhdHRlcm4uc3Vic3RyKDIpO1xyXG4gICAgZWxzZSBpZiAoc3RhcnRzV2l0aEFuY2hvcilcclxuICAgICAgcGF0dGVybiA9IHBhdHRlcm4uc3Vic3RyKDEpO1xyXG5cclxuICAgIGlmIChlbmRzV2l0aFNlcGFyYXRvciB8fCBlbmRzV2l0aEFuY2hvcilcclxuICAgICAgcGF0dGVybiA9IHBhdHRlcm4uc2xpY2UoMCwgLTEpO1xyXG5cclxuICAgIGxldCBpbmRleCA9IGxvY2F0aW9uLmluZGV4T2YocGF0dGVybik7XHJcblxyXG4gICAgd2hpbGUgKGluZGV4ICE9IC0xKVxyXG4gICAge1xyXG4gICAgICAvLyBUaGUgXCJ8fFwiIHByZWZpeCByZXF1aXJlcyB0aGF0IHRoZSB0ZXh0IHRoYXQgZm9sbG93cyBkb2VzIG5vdCBzdGFydFxyXG4gICAgICAvLyB3aXRoIGEgZm9yd2FyZCBzbGFzaC5cclxuICAgICAgaWYgKChzdGFydHNXaXRoRXh0ZW5kZWRBbmNob3IgP1xyXG4gICAgICAgICAgICAgbG9jYXRpb25baW5kZXhdICE9IFwiL1wiICYmXHJcbiAgICAgICAgICAgICBleHRlbmRlZEFuY2hvclJlZ0V4cC50ZXN0KGxvY2F0aW9uLnN1YnN0cmluZygwLCBpbmRleCkpIDpcclxuICAgICAgICAgICAgIHN0YXJ0c1dpdGhBbmNob3IgP1xyXG4gICAgICAgICAgICAgICBpbmRleCA9PSAwIDpcclxuICAgICAgICAgICAgICAgdHJ1ZSkgJiZcclxuICAgICAgICAgIChlbmRzV2l0aFNlcGFyYXRvciA/XHJcbiAgICAgICAgICAgICAhbG9jYXRpb25baW5kZXggKyBwYXR0ZXJuLmxlbmd0aF0gfHxcclxuICAgICAgICAgICAgIHNlcGFyYXRvclJlZ0V4cC50ZXN0KGxvY2F0aW9uW2luZGV4ICsgcGF0dGVybi5sZW5ndGhdKSA6XHJcbiAgICAgICAgICAgICBlbmRzV2l0aEFuY2hvciA/XHJcbiAgICAgICAgICAgICAgIGluZGV4ID09IGxvY2F0aW9uLmxlbmd0aCAtIHBhdHRlcm4ubGVuZ3RoIDpcclxuICAgICAgICAgICAgICAgdHJ1ZSkpXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICBpZiAocGF0dGVybiA9PSBcIlwiKVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgaW5kZXggPSBsb2NhdGlvbi5pbmRleE9mKHBhdHRlcm4sIGluZGV4ICsgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgVVJMIGZpbHRlciBmcm9tIGl0cyB0ZXh0IHJlcHJlc2VudGF0aW9uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0ICAgc2FtZSBhcyBpbiBGaWx0ZXIoKVxyXG4gKiBAcmV0dXJuIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5GaWx0ZXJ9XHJcbiAqL1xyXG5VUkxGaWx0ZXIuZnJvbVRleHQgPSBmdW5jdGlvbih0ZXh0KVxyXG57XHJcbiAgbGV0IGJsb2NraW5nID0gdHJ1ZTtcclxuICBsZXQgb3JpZ1RleHQgPSB0ZXh0O1xyXG4gIGlmICh0ZXh0WzBdID09IFwiQFwiICYmIHRleHRbMV0gPT0gXCJAXCIpXHJcbiAge1xyXG4gICAgYmxvY2tpbmcgPSBmYWxzZTtcclxuICAgIHRleHQgPSB0ZXh0LnN1YnN0cmluZygyKTtcclxuICB9XHJcblxyXG4gIGxldCBjb250ZW50VHlwZSA9IG51bGw7XHJcbiAgbGV0IG1hdGNoQ2FzZSA9IG51bGw7XHJcbiAgbGV0IGRvbWFpbnMgPSBudWxsO1xyXG4gIGxldCBzaXRla2V5cyA9IG51bGw7XHJcbiAgbGV0IHRoaXJkUGFydHkgPSBudWxsO1xyXG4gIGxldCBjc3AgPSBudWxsO1xyXG4gIGxldCByZXdyaXRlID0gbnVsbDtcclxuICBsZXQgaGVhZGVyID0gbnVsbDtcclxuICBsZXQgb3B0aW9ucztcclxuICBsZXQgbWF0Y2ggPSB0ZXh0LmluY2x1ZGVzKFwiJFwiKSA/IEZpbHRlci5vcHRpb25zUmVnRXhwLmV4ZWModGV4dCkgOiBudWxsO1xyXG4gIGlmIChtYXRjaClcclxuICB7XHJcbiAgICBvcHRpb25zID0gbWF0Y2hbMV0uc3BsaXQoXCIsXCIpO1xyXG4gICAgdGV4dCA9IG1hdGNoLmlucHV0LnN1YnN0cmluZygwLCBtYXRjaC5pbmRleCk7XHJcbiAgICBmb3IgKGxldCBvcHRpb24gb2Ygb3B0aW9ucylcclxuICAgIHtcclxuICAgICAgbGV0IHZhbHVlID0gbnVsbDtcclxuICAgICAgbGV0IHNlcGFyYXRvckluZGV4ID0gb3B0aW9uLmluZGV4T2YoXCI9XCIpO1xyXG4gICAgICBpZiAoc2VwYXJhdG9ySW5kZXggPj0gMClcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlID0gb3B0aW9uLnN1YnN0cmluZyhzZXBhcmF0b3JJbmRleCArIDEpO1xyXG4gICAgICAgIG9wdGlvbiA9IG9wdGlvbi5zdWJzdHJpbmcoMCwgc2VwYXJhdG9ySW5kZXgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgaW52ZXJzZSA9IG9wdGlvblswXSA9PSBcIn5cIjtcclxuICAgICAgaWYgKGludmVyc2UpXHJcbiAgICAgICAgb3B0aW9uID0gb3B0aW9uLnN1YnN0cmluZygxKTtcclxuXHJcbiAgICAgIGxldCB0eXBlID0gY29udGVudFR5cGVzW29wdGlvbi5yZXBsYWNlKC8tLywgXCJfXCIpLnRvVXBwZXJDYXNlKCldO1xyXG4gICAgICBpZiAodHlwZSlcclxuICAgICAge1xyXG4gICAgICAgIGlmIChpbnZlcnNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmIChjb250ZW50VHlwZSA9PSBudWxsKVxyXG4gICAgICAgICAgICBjb250ZW50VHlwZSA9IFJFU09VUkNFX1RZUEVTO1xyXG4gICAgICAgICAgY29udGVudFR5cGUgJj0gfnR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb250ZW50VHlwZSB8PSB0eXBlO1xyXG5cclxuICAgICAgICAgIHN3aXRjaCAodHlwZSlcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgY2FzZSBjb250ZW50VHlwZXMuQ1NQOlxyXG4gICAgICAgICAgICAgIGlmIChibG9ja2luZyAmJiAhdmFsdWUpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEludmFsaWRGaWx0ZXIob3JpZ1RleHQsIFwiZmlsdGVyX2ludmFsaWRfY3NwXCIpO1xyXG4gICAgICAgICAgICAgIGNzcCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIGNvbnRlbnRUeXBlcy5IRUFERVI6XHJcbiAgICAgICAgICAgICAgaWYgKGJsb2NraW5nICYmICF2YWx1ZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW52YWxpZEZpbHRlcihvcmlnVGV4dCwgXCJmaWx0ZXJfaW52YWxpZF9oZWFkZXJcIik7XHJcbiAgICAgICAgICAgICAgaWYgKHZhbHVlKVxyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCBlcXVhbCA9IHZhbHVlLmluZGV4T2YoXCI9XCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVxdWFsID09IDApXHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW52YWxpZEZpbHRlcihvcmlnVGV4dCwgXCJmaWx0ZXJfaW52YWxpZF9oZWFkZXJcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXF1YWwgIT0gLTEgJiYgdmFsdWUubGVuZ3RoID49IGVxdWFsICsgMyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlW2VxdWFsICsgMV0gPT0gXCIvXCIgJiYgdmFsdWVbdmFsdWUubGVuZ3RoIC0gMV0gPT0gXCIvXCIpXHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW52YWxpZEZpbHRlcihvcmlnVGV4dCwgXCJmaWx0ZXJfaW52YWxpZF9oZWFkZXJcIik7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXIgPSB2YWx1ZS5yZXBsYWNlKC8oW15cXFxcXSlcXFxceDJjLywgXCIkMSxcIik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlXHJcbiAgICAgIHtcclxuICAgICAgICBzd2l0Y2ggKG9wdGlvbi50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNhc2UgXCJtYXRjaC1jYXNlXCI6XHJcbiAgICAgICAgICAgIG1hdGNoQ2FzZSA9ICFpbnZlcnNlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJkb21haW5cIjpcclxuICAgICAgICAgICAgaWYgKCF2YWx1ZSlcclxuICAgICAgICAgICAgICByZXR1cm4gbmV3IEludmFsaWRGaWx0ZXIob3JpZ1RleHQsIFwiZmlsdGVyX3Vua25vd25fb3B0aW9uXCIpO1xyXG4gICAgICAgICAgICBkb21haW5zID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBcInRoaXJkLXBhcnR5XCI6XHJcbiAgICAgICAgICAgIHRoaXJkUGFydHkgPSAhaW52ZXJzZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwic2l0ZWtleVwiOlxyXG4gICAgICAgICAgICBpZiAoIXZhbHVlKVxyXG4gICAgICAgICAgICAgIHJldHVybiBuZXcgSW52YWxpZEZpbHRlcihvcmlnVGV4dCwgXCJmaWx0ZXJfdW5rbm93bl9vcHRpb25cIik7XHJcbiAgICAgICAgICAgIHNpdGVrZXlzID0gdmFsdWUudG9VcHBlckNhc2UoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwicmV3cml0ZVwiOlxyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbClcclxuICAgICAgICAgICAgICByZXR1cm4gbmV3IEludmFsaWRGaWx0ZXIob3JpZ1RleHQsIFwiZmlsdGVyX3Vua25vd25fb3B0aW9uXCIpO1xyXG4gICAgICAgICAgICBpZiAoIXZhbHVlLnN0YXJ0c1dpdGgoXCJhYnAtcmVzb3VyY2U6XCIpKVxyXG4gICAgICAgICAgICAgIHJldHVybiBuZXcgSW52YWxpZEZpbHRlcihvcmlnVGV4dCwgXCJmaWx0ZXJfaW52YWxpZF9yZXdyaXRlXCIpO1xyXG4gICAgICAgICAgICByZXdyaXRlID0gdmFsdWUuc3Vic3RyaW5nKFwiYWJwLXJlc291cmNlOlwiLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnZhbGlkRmlsdGVyKG9yaWdUZXh0LCBcImZpbHRlcl91bmtub3duX29wdGlvblwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRyeVxyXG4gIHtcclxuICAgIGlmIChibG9ja2luZylcclxuICAgIHtcclxuICAgICAgaWYgKGNzcCAmJiBGaWx0ZXIuaW52YWxpZENTUFJlZ0V4cC50ZXN0KGNzcCkpXHJcbiAgICAgICAgcmV0dXJuIG5ldyBJbnZhbGlkRmlsdGVyKG9yaWdUZXh0LCBcImZpbHRlcl9pbnZhbGlkX2NzcFwiKTtcclxuXHJcbiAgICAgIGlmIChyZXdyaXRlKVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKHRleHRbMF0gPT0gXCJ8XCIgJiYgdGV4dFsxXSA9PSBcInxcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAoIWRvbWFpbnMgJiYgdGhpcmRQYXJ0eSAhPSBmYWxzZSlcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnZhbGlkRmlsdGVyKG9yaWdUZXh0LCBcImZpbHRlcl9pbnZhbGlkX3Jld3JpdGVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRleHRbMF0gPT0gXCIqXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWYgKCFkb21haW5zKVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEludmFsaWRGaWx0ZXIob3JpZ1RleHQsIFwiZmlsdGVyX2ludmFsaWRfcmV3cml0ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHJldHVybiBuZXcgSW52YWxpZEZpbHRlcihvcmlnVGV4dCwgXCJmaWx0ZXJfaW52YWxpZF9yZXdyaXRlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG5ldyBCbG9ja2luZ0ZpbHRlcihvcmlnVGV4dCwgdGV4dCwgY29udGVudFR5cGUsIG1hdGNoQ2FzZSwgZG9tYWlucyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlyZFBhcnR5LCBzaXRla2V5cywgaGVhZGVyLCByZXdyaXRlLCBjc3ApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBBbGxvd2luZ0ZpbHRlcihvcmlnVGV4dCwgdGV4dCwgY29udGVudFR5cGUsIG1hdGNoQ2FzZSwgZG9tYWlucyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcmRQYXJ0eSwgc2l0ZWtleXMsIGhlYWRlcik7XHJcbiAgfVxyXG4gIGNhdGNoIChlKVxyXG4gIHtcclxuICAgIHJldHVybiBuZXcgSW52YWxpZEZpbHRlcihvcmlnVGV4dCwgXCJmaWx0ZXJfaW52YWxpZF9yZWdleHBcIik7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEBkZXByZWNhdGVkIFVzZSA8Y29kZT57QGxpbmsgY29udGVudFR5cGVzfTwvY29kZT4gaW5zdGVhZC5cclxuICogQHNlZSBjb250ZW50VHlwZXNcclxuICovXHJcbi8vIEZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cclxuVVJMRmlsdGVyLnR5cGVNYXAgPSBjb250ZW50VHlwZXM7XHJcblxyXG5sZXQgQmxvY2tpbmdGaWx0ZXIgPVxyXG4vKipcclxuICogQ2xhc3MgZm9yIGJsb2NraW5nIGZpbHRlcnNcclxuICovXHJcbmV4cG9ydHMuQmxvY2tpbmdGaWx0ZXIgPSBjbGFzcyBCbG9ja2luZ0ZpbHRlciBleHRlbmRzIFVSTEZpbHRlclxyXG57XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgc2VlIHtAbGluayBtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5GaWx0ZXIgRmlsdGVyKCl9XHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2V4cFNvdXJjZSBzZWVcclxuICAgKiAgIHtAbGluayBtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5VUkxGaWx0ZXIgVVJMRmlsdGVyKCl9XHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtjb250ZW50VHlwZV0gc2VlXHJcbiAgICogICB7QGxpbmsgbW9kdWxlOmZpbHRlckNsYXNzZXMuVVJMRmlsdGVyIFVSTEZpbHRlcigpfVxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW21hdGNoQ2FzZV0gc2VlXHJcbiAgICogICB7QGxpbmsgbW9kdWxlOmZpbHRlckNsYXNzZXMuVVJMRmlsdGVyIFVSTEZpbHRlcigpfVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZG9tYWluc10gc2VlXHJcbiAgICogICB7QGxpbmsgbW9kdWxlOmZpbHRlckNsYXNzZXMuVVJMRmlsdGVyIFVSTEZpbHRlcigpfVxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3RoaXJkUGFydHldIHNlZVxyXG4gICAqICAge0BsaW5rIG1vZHVsZTpmaWx0ZXJDbGFzc2VzLlVSTEZpbHRlciBVUkxGaWx0ZXIoKX1cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gW3NpdGVrZXlzXSBzZWVcclxuICAgKiAgIHtAbGluayBtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5VUkxGaWx0ZXIgVVJMRmlsdGVyKCl9XHJcbiAgICogQHBhcmFtIHs/c3RyaW5nfSBbaGVhZGVyXSBzZWVcclxuICAgKiAgIHtAbGluayBtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5VUkxGaWx0ZXIgVVJMRmlsdGVyKCl9XHJcbiAgICogQHBhcmFtIHs/c3RyaW5nfSBbcmV3cml0ZV1cclxuICAgKiAgIFRoZSBuYW1lIG9mIHRoZSBpbnRlcm5hbCByZXNvdXJjZSB0byB3aGljaCB0byByZXdyaXRlIHRoZVxyXG4gICAqICAgVVJMLiBlLmcuIGlmIHRoZSB2YWx1ZSBvZiB0aGUgYCRyZXdyaXRlYCBvcHRpb24gaXNcclxuICAgKiAgIGBhYnAtcmVzb3VyY2U6YmxhbmstaHRtbGAsIHRoaXMgc2hvdWxkIGJlIGBibGFuay1odG1sYC5cclxuICAgKiBAcGFyYW0gez9zdHJpbmd9IFtjc3BdXHJcbiAgICogICBDb250ZW50IFNlY3VyaXR5IFBvbGljeSB0byBpbmplY3Qgd2hlbiB0aGUgZmlsdGVyIG1hdGNoZXNcclxuICAgKlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IodGV4dCwgcmVnZXhwU291cmNlLCBjb250ZW50VHlwZSwgbWF0Y2hDYXNlLCBkb21haW5zLCB0aGlyZFBhcnR5LFxyXG4gICAgICAgICAgICAgIHNpdGVrZXlzLCBoZWFkZXIsIHJld3JpdGUsIGNzcClcclxuICB7XHJcbiAgICBzdXBlcih0ZXh0LCByZWdleHBTb3VyY2UsIGNvbnRlbnRUeXBlLCBtYXRjaENhc2UsIGRvbWFpbnMsIHRoaXJkUGFydHksXHJcbiAgICAgICAgICBzaXRla2V5cywgaGVhZGVyLCByZXdyaXRlKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IHRvIGluamVjdCBmb3IgbWF0Y2hpbmcgcmVxdWVzdHMuXHJcbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgdGhpcy5jc3AgPSBjc3AgIT0gbnVsbCA/IGNzcCA6IG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXQgdHlwZSgpXHJcbiAge1xyXG4gICAgcmV0dXJuIFwiYmxvY2tpbmdcIjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJld3JpdGVzIGFuIFVSTC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIHRoZSBVUkwgdG8gcmV3cml0ZVxyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gdGhlIHJld3JpdHRlbiBVUkwsIG9yIHRoZSBvcmlnaW5hbCBpbiBjYXNlIG9mIGZhaWx1cmVcclxuICAgKi9cclxuICByZXdyaXRlVXJsKHVybClcclxuICB7XHJcbiAgICByZXR1cm4gcmVzb3VyY2VNYXAuZ2V0KHRoaXMucmV3cml0ZSkgfHwgdXJsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmlsdGVyIGhlYWRlcnMuXHJcbiAgICpcclxuICAgKiBUaGlzIGZ1bmN0aW9uIHdvdWxkIGJlIGNhbGxlZCBieSB0aGUgcmVxdWVzdCBibG9ja2VyIGNvZGUgYWZ0ZXJcclxuICAgKiBtYXRjaGluZyB0aGUgcmVxdWVzdC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7d2ViUmVxdWVzdC5IdHRwSGVhZGVyc30gaGVhZGVycyB0aGUgSFRUUCByZXNwb25zZSBoZWFkZXJzXHJcbiAgICogICB0byBtYXRjaCwgYXMgdGhleSBhcmUgcmV0dXJuZWQgYnkgdGhlIHJlcXVlc3QgYmxvY2tlci4gVGhleVxyXG4gICAqICAgZm9sbG93IHRoZSB7QGxpbmsgd2ViUmVxdWVzdCBBUElcclxuICAgKiAgIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS93ZWJSZXF1ZXN0L0h0dHBIZWFkZXJzfS5cclxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBoZWFkZXJzIG1hdGNoLiBXaWxsIHJldHVybiB0cnVlIGlmXHJcbiAgICogICB0aGVyZSBpcyBub3RoaW5nIHRvIG1hdGNoIGFnYWluc3QsIG9yIGlmIHRoZSBoZWFkZXIgaXMgcHJlc2VudFxyXG4gICAqICAgYnV0IG5vIHZhbHVlLlxyXG4gICAqL1xyXG4gIGZpbHRlckhlYWRlcnMoaGVhZGVycylcclxuICB7XHJcbiAgICBpZiAoIXRoaXMuaGVhZGVyKVxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICBsZXQgdmFsdWU7XHJcbiAgICBsZXQgbmFtZTtcclxuICAgIGxldCBzZXBhcmF0b3JJbmRleCA9IHRoaXMuaGVhZGVyLmluZGV4T2YoXCI9XCIpO1xyXG4gICAgaWYgKHNlcGFyYXRvckluZGV4ID49IDApXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlID0gdGhpcy5oZWFkZXIuc3Vic3RyaW5nKHNlcGFyYXRvckluZGV4ICsgMSk7XHJcbiAgICAgIG5hbWUgPSB0aGlzLmhlYWRlci5zdWJzdHJpbmcoMCwgc2VwYXJhdG9ySW5kZXgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIG5hbWUgPSB0aGlzLmhlYWRlcjtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGxldCBoZWFkZXIgb2YgaGVhZGVycylcclxuICAgIHtcclxuICAgICAgaWYgKGhlYWRlci5uYW1lLnRvTG93ZXJDYXNlKCkgPT0gbmFtZSlcclxuICAgICAge1xyXG4gICAgICAgIGlmICh2YWx1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAoaGVhZGVyLnZhbHVlLmluY2x1ZGVzKHZhbHVlKSlcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59O1xyXG5cclxubGV0IEFsbG93aW5nRmlsdGVyID1cclxuLyoqXHJcbiAqIENsYXNzIGZvciBhbGxvd2luZyAoYWxsb3dsaXN0aW5nKSBmaWx0ZXJzXHJcbiAqL1xyXG5leHBvcnRzLkFsbG93aW5nRmlsdGVyID0gY2xhc3MgQWxsb3dpbmdGaWx0ZXIgZXh0ZW5kcyBVUkxGaWx0ZXJcclxue1xyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IHNlZSB7QGxpbmsgbW9kdWxlOmZpbHRlckNsYXNzZXMuRmlsdGVyIEZpbHRlcigpfVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWdleHBTb3VyY2Ugc2VlXHJcbiAgICogICB7QGxpbmsgbW9kdWxlOmZpbHRlckNsYXNzZXMuVVJMRmlsdGVyIFVSTEZpbHRlcigpfVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbY29udGVudFR5cGVdIHNlZVxyXG4gICAqICAge0BsaW5rIG1vZHVsZTpmaWx0ZXJDbGFzc2VzLlVSTEZpbHRlciBVUkxGaWx0ZXIoKX1cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFttYXRjaENhc2VdIHNlZVxyXG4gICAqICAge0BsaW5rIG1vZHVsZTpmaWx0ZXJDbGFzc2VzLlVSTEZpbHRlciBVUkxGaWx0ZXIoKX1cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2RvbWFpbnNdIHNlZVxyXG4gICAqICAge0BsaW5rIG1vZHVsZTpmaWx0ZXJDbGFzc2VzLlVSTEZpbHRlciBVUkxGaWx0ZXIoKX1cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFt0aGlyZFBhcnR5XSBzZWVcclxuICAgKiAgIHtAbGluayBtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5VUkxGaWx0ZXIgVVJMRmlsdGVyKCl9XHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtzaXRla2V5c10gc2VlXHJcbiAgICogICB7QGxpbmsgbW9kdWxlOmZpbHRlckNsYXNzZXMuVVJMRmlsdGVyIFVSTEZpbHRlcigpfVxyXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gW2hlYWRlcl0gc2VlXHJcbiAgICogICB7QGxpbmsgbW9kdWxlOmZpbHRlckNsYXNzZXMuVVJMRmlsdGVyIFVSTEZpbHRlcigpfVxyXG4gICAqXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcih0ZXh0LCByZWdleHBTb3VyY2UsIGNvbnRlbnRUeXBlLCBtYXRjaENhc2UsIGRvbWFpbnMsIHRoaXJkUGFydHksXHJcbiAgICAgICAgICAgICAgc2l0ZWtleXMsIGhlYWRlcilcclxuICB7XHJcbiAgICBzdXBlcih0ZXh0LCByZWdleHBTb3VyY2UsIGNvbnRlbnRUeXBlLCBtYXRjaENhc2UsIGRvbWFpbnMsIHRoaXJkUGFydHksXHJcbiAgICAgICAgICBzaXRla2V5cywgaGVhZGVyKTtcclxuICB9XHJcblxyXG4gIGdldCB0eXBlKClcclxuICB7XHJcbiAgICByZXR1cm4gXCJhbGxvd2luZ1wiO1xyXG4gIH1cclxufTtcclxuXHJcbmxldCBDb250ZW50RmlsdGVyID1cclxuLyoqXHJcbiAqIEJhc2UgY2xhc3MgZm9yIGNvbnRlbnQgZmlsdGVyc1xyXG4gKi9cclxuZXhwb3J0cy5Db250ZW50RmlsdGVyID0gY2xhc3MgQ29udGVudEZpbHRlciBleHRlbmRzIEFjdGl2ZUZpbHRlclxyXG57XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgc2VlIHtAbGluayBtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5GaWx0ZXIgRmlsdGVyKCl9XHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtkb21haW5zXSBIb3N0IG5hbWVzIG9yIGRvbWFpbnMgdGhlIGZpbHRlciBzaG91bGQgYmVcclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3RyaWN0ZWQgdG9cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gYm9keSAgICAgIFRoZSBib2R5IG9mIHRoZSBmaWx0ZXJcclxuICAgKlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IodGV4dCwgZG9tYWlucywgYm9keSlcclxuICB7XHJcbiAgICBzdXBlcih0ZXh0LCBkb21haW5zIHx8IG51bGwpO1xyXG5cclxuICAgIHRoaXMuX2JvZHkgPSBib2R5O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHNlZSBBY3RpdmVGaWx0ZXIuZG9tYWluU2VwYXJhdG9yXHJcbiAgICAgKi9cclxuICAgIHRoaXMuZG9tYWluU2VwYXJhdG9yID0gXCIsXCI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGUgYm9keSBvZiB0aGUgZmlsdGVyXHJcbiAgICogQHR5cGUge3N0cmluZ31cclxuICAgKi9cclxuICBnZXQgYm9keSgpXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuX2JvZHk7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBjb250ZW50IGZpbHRlciBmcm9tIGEgcHJlLXBhcnNlZCB0ZXh0IHJlcHJlc2VudGF0aW9uXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0ICAgICAgICAgc2FtZSBhcyBpbiBGaWx0ZXIoKVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW2RvbWFpbnNdXHJcbiAqICAgZG9tYWlucyBwYXJ0IG9mIHRoZSB0ZXh0IHJlcHJlc2VudGF0aW9uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBbdHlwZV1cclxuICogICBydWxlIHR5cGUsIGVpdGhlcjpcclxuICogICAgICogXCJcIiBmb3IgYW4gZWxlbWVudCBoaWRpbmcgZmlsdGVyXHJcbiAqICAgICAqIFwiQFwiIGZvciBhbiBlbGVtZW50IGhpZGluZyBleGNlcHRpb24gZmlsdGVyXHJcbiAqICAgICAqIFwiP1wiIGZvciBhbiBlbGVtZW50IGhpZGluZyBlbXVsYXRpb24gZmlsdGVyXHJcbiAqICAgICAqIFwiJFwiIGZvciBhIHNuaXBwZXQgZmlsdGVyXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBib2R5XHJcbiAqICAgYm9keSBwYXJ0IG9mIHRoZSB0ZXh0IHJlcHJlc2VudGF0aW9uLCBlaXRoZXIgYSBDU1Mgc2VsZWN0b3Igb3IgYSBzbmlwcGV0XHJcbiAqICAgc2NyaXB0XHJcbiAqIEByZXR1cm4ge21vZHVsZTpmaWx0ZXJDbGFzc2VzLkVsZW1IaWRlRmlsdGVyfFxyXG4gKiAgICAgICAgICBtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5FbGVtSGlkZUV4Y2VwdGlvbnxcclxuICogICAgICAgICAgbW9kdWxlOmZpbHRlckNsYXNzZXMuRWxlbUhpZGVFbXVsYXRpb25GaWx0ZXJ8XHJcbiAqICAgICAgICAgIG1vZHVsZTpmaWx0ZXJDbGFzc2VzLlNuaXBwZXRGaWx0ZXJ8XHJcbiAqICAgICAgICAgIG1vZHVsZTpmaWx0ZXJDbGFzc2VzLkludmFsaWRGaWx0ZXJ9XHJcbiAqL1xyXG5Db250ZW50RmlsdGVyLmZyb21UZXh0ID0gZnVuY3Rpb24odGV4dCwgZG9tYWlucywgdHlwZSwgYm9keSlcclxue1xyXG4gIC8vIFdlIGRvbid0IGFsbG93IGNvbnRlbnQgZmlsdGVycyB3aGljaCBoYXZlIGFueSBlbXB0eSBkb21haW5zLlxyXG4gIC8vIE5vdGU6IFRoZSBDb250ZW50RmlsdGVyLnByb3RvdHlwZS5kb21haW5TZXBhcmF0b3IgaXMgZHVwbGljYXRlZCBoZXJlLCBpZlxyXG4gIC8vIHRoYXQgY2hhbmdlcyB0aGlzIG11c3QgYmUgY2hhbmdlZCB0b28uXHJcbiAgaWYgKGRvbWFpbnMgJiYgLyhefCwpfj8oLHwkKS8udGVzdChkb21haW5zKSlcclxuICAgIHJldHVybiBuZXcgSW52YWxpZEZpbHRlcih0ZXh0LCBcImZpbHRlcl9pbnZhbGlkX2RvbWFpblwiKTtcclxuXHJcbiAgaWYgKHR5cGUgPT0gXCJAXCIpXHJcbiAgICByZXR1cm4gbmV3IEVsZW1IaWRlRXhjZXB0aW9uKHRleHQsIGRvbWFpbnMsIGJvZHkpO1xyXG5cclxuICBpZiAodHlwZSA9PSBcIj9cIiB8fCB0eXBlID09IFwiJFwiKVxyXG4gIHtcclxuICAgIC8vIEVsZW1lbnQgaGlkaW5nIGVtdWxhdGlvbiBhbmQgc25pcHBldCBmaWx0ZXJzIGFyZSBpbmVmZmljaWVudCBzbyB3ZSBuZWVkXHJcbiAgICAvLyB0byBtYWtlIHN1cmUgdGhhdCB0aGV5J3JlIG9ubHkgYXBwbGllZCBpZiB0aGV5IHNwZWNpZnkgYWN0aXZlIGRvbWFpbnNcclxuICAgIGlmICghKC8sW15+XVteLC5dKlxcLlteLF0vLnRlc3QoXCIsXCIgKyBkb21haW5zKSB8fFxyXG4gICAgICAgICAgKFwiLFwiICsgZG9tYWlucyArIFwiLFwiKS5pbmNsdWRlcyhcIixsb2NhbGhvc3QsXCIpKSlcclxuICAgIHtcclxuICAgICAgcmV0dXJuIG5ldyBJbnZhbGlkRmlsdGVyKHRleHQsIHR5cGUgPT0gXCI/XCIgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImZpbHRlcl9lbGVtaGlkZWVtdWxhdGlvbl9ub2RvbWFpblwiIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJmaWx0ZXJfc25pcHBldF9ub2RvbWFpblwiKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZSA9PSBcIj9cIilcclxuICAgICAgcmV0dXJuIG5ldyBFbGVtSGlkZUVtdWxhdGlvbkZpbHRlcih0ZXh0LCBkb21haW5zLCBib2R5KTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFNuaXBwZXRGaWx0ZXIodGV4dCwgZG9tYWlucywgYm9keSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbmV3IEVsZW1IaWRlRmlsdGVyKHRleHQsIGRvbWFpbnMsIGJvZHkpO1xyXG59O1xyXG5cclxubGV0IEVsZW1IaWRlQmFzZSA9XHJcbi8qKlxyXG4gKiBCYXNlIGNsYXNzIGZvciBlbGVtZW50IGhpZGluZyBmaWx0ZXJzXHJcbiAqL1xyXG5leHBvcnRzLkVsZW1IaWRlQmFzZSA9IGNsYXNzIEVsZW1IaWRlQmFzZSBleHRlbmRzIENvbnRlbnRGaWx0ZXJcclxue1xyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IHNlZSB7QGxpbmsgbW9kdWxlOmZpbHRlckNsYXNzZXMuRmlsdGVyIEZpbHRlcigpfVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZG9tYWluc10gc2VlXHJcbiAgICogICB7QGxpbmsgbW9kdWxlOmZpbHRlckNsYXNzZXMuQ29udGVudEZpbHRlciBDb250ZW50RmlsdGVyKCl9XHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yICBDU1Mgc2VsZWN0b3IgZm9yIHRoZSBIVE1MIGVsZW1lbnRzIHRoYXQgc2hvdWxkIGJlXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRkZW5cclxuICAgKlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IodGV4dCwgZG9tYWlucywgc2VsZWN0b3IpXHJcbiAge1xyXG4gICAgc3VwZXIodGV4dCwgZG9tYWlucywgc2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ1NTIHNlbGVjdG9yIGZvciB0aGUgSFRNTCBlbGVtZW50cyB0aGF0IHNob3VsZCBiZSBoaWRkZW5cclxuICAgKiBAdHlwZSB7c3RyaW5nfVxyXG4gICAqL1xyXG4gIGdldCBzZWxlY3RvcigpXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuYm9keTtcclxuICB9XHJcbn07XHJcblxyXG5sZXQgRWxlbUhpZGVGaWx0ZXIgPVxyXG4vKipcclxuICogQ2xhc3MgZm9yIGVsZW1lbnQgaGlkaW5nIGZpbHRlcnNcclxuICovXHJcbmV4cG9ydHMuRWxlbUhpZGVGaWx0ZXIgPSBjbGFzcyBFbGVtSGlkZUZpbHRlciBleHRlbmRzIEVsZW1IaWRlQmFzZVxyXG57XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgc2VlIHtAbGluayBtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5GaWx0ZXIgRmlsdGVyKCl9XHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtkb21haW5zXSAgc2VlXHJcbiAgICogICB7QGxpbmsgbW9kdWxlOmZpbHRlckNsYXNzZXMuRWxlbUhpZGVCYXNlIEVsZW1IaWRlQmFzZSgpfVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvciBzZWVcclxuICAgKiAgIHtAbGluayBtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5FbGVtSGlkZUJhc2UgRWxlbUhpZGVCYXNlKCl9XHJcbiAgICpcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHRleHQsIGRvbWFpbnMsIHNlbGVjdG9yKVxyXG4gIHtcclxuICAgIHN1cGVyKHRleHQsIGRvbWFpbnMsIHNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldCB0eXBlKClcclxuICB7XHJcbiAgICByZXR1cm4gXCJlbGVtaGlkZVwiO1xyXG4gIH1cclxufTtcclxuXHJcbmxldCBFbGVtSGlkZUV4Y2VwdGlvbiA9XHJcbi8qKlxyXG4gKiBDbGFzcyBmb3IgZWxlbWVudCBoaWRpbmcgZXhjZXB0aW9uc1xyXG4gKi9cclxuZXhwb3J0cy5FbGVtSGlkZUV4Y2VwdGlvbiA9IGNsYXNzIEVsZW1IaWRlRXhjZXB0aW9uIGV4dGVuZHMgRWxlbUhpZGVCYXNlXHJcbntcclxuICAvKipcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBzZWUge0BsaW5rIG1vZHVsZTpmaWx0ZXJDbGFzc2VzLkZpbHRlciBGaWx0ZXIoKX1cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2RvbWFpbnNdICBzZWVcclxuICAgKiAgIHtAbGluayBtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5FbGVtSGlkZUJhc2UgRWxlbUhpZGVCYXNlKCl9XHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yIHNlZVxyXG4gICAqICAge0BsaW5rIG1vZHVsZTpmaWx0ZXJDbGFzc2VzLkVsZW1IaWRlQmFzZSBFbGVtSGlkZUJhc2UoKX1cclxuICAgKlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IodGV4dCwgZG9tYWlucywgc2VsZWN0b3IpXHJcbiAge1xyXG4gICAgc3VwZXIodGV4dCwgZG9tYWlucywgc2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHR5cGUoKVxyXG4gIHtcclxuICAgIHJldHVybiBcImVsZW1oaWRlZXhjZXB0aW9uXCI7XHJcbiAgfVxyXG59O1xyXG5cclxubGV0IEVsZW1IaWRlRW11bGF0aW9uRmlsdGVyID1cclxuLyoqXHJcbiAqIENsYXNzIGZvciBlbGVtZW50IGhpZGluZyBlbXVsYXRpb24gZmlsdGVyc1xyXG4gKi9cclxuZXhwb3J0cy5FbGVtSGlkZUVtdWxhdGlvbkZpbHRlciA9XHJcbmNsYXNzIEVsZW1IaWRlRW11bGF0aW9uRmlsdGVyIGV4dGVuZHMgRWxlbUhpZGVCYXNlXHJcbntcclxuICAvKipcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAgICBzZWUge0BsaW5rIG1vZHVsZTpmaWx0ZXJDbGFzc2VzLkZpbHRlciBGaWx0ZXIoKX1cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZG9tYWlucyBzZWVcclxuICAgKiAgIHtAbGluayBtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5FbGVtSGlkZUJhc2UgRWxlbUhpZGVCYXNlKCl9XHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yIHNlZVxyXG4gICAqICAge0BsaW5rIG1vZHVsZTpmaWx0ZXJDbGFzc2VzLkVsZW1IaWRlQmFzZSBFbGVtSGlkZUJhc2UoKX1cclxuICAgKiBAY29uc3RydWN0b3JcclxuICAgKiBAYXVnbWVudHMgbW9kdWxlOmZpbHRlckNsYXNzZXMuRWxlbUhpZGVCYXNlXHJcbiAgICpcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHRleHQsIGRvbWFpbnMsIHNlbGVjdG9yKVxyXG4gIHtcclxuICAgIHN1cGVyKHRleHQsIGRvbWFpbnMsIHNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldCB0eXBlKClcclxuICB7XHJcbiAgICByZXR1cm4gXCJlbGVtaGlkZWVtdWxhdGlvblwiO1xyXG4gIH1cclxufTtcclxuXHJcbmxldCBTbmlwcGV0RmlsdGVyID1cclxuLyoqXHJcbiAqIENsYXNzIGZvciBzbmlwcGV0IGZpbHRlcnNcclxuICovXHJcbmV4cG9ydHMuU25pcHBldEZpbHRlciA9IGNsYXNzIFNuaXBwZXRGaWx0ZXIgZXh0ZW5kcyBDb250ZW50RmlsdGVyXHJcbntcclxuICAvKipcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBzZWUgRmlsdGVyKClcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2RvbWFpbnNdIHNlZSBDb250ZW50RmlsdGVyKClcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2NyaXB0ICAgIFNjcmlwdCB0aGF0IHNob3VsZCBiZSBleGVjdXRlZFxyXG4gICAqIEBjb25zdHJ1Y3RvclxyXG4gICAqIEBhdWdtZW50cyBtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5Db250ZW50RmlsdGVyXHJcbiAgICpcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHRleHQsIGRvbWFpbnMsIHNjcmlwdClcclxuICB7XHJcbiAgICBzdXBlcih0ZXh0LCBkb21haW5zLCBzY3JpcHQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHR5cGUoKVxyXG4gIHtcclxuICAgIHJldHVybiBcInNuaXBwZXRcIjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNjcmlwdCB0aGF0IHNob3VsZCBiZSBleGVjdXRlZFxyXG4gICAqIEB0eXBlIHtzdHJpbmd9XHJcbiAgICovXHJcbiAgZ2V0IHNjcmlwdCgpXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuYm9keTtcclxuICB9XHJcbn07XHJcbiIsIi8qXHJcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIEFkYmxvY2sgUGx1cyA8aHR0cHM6Ly9hZGJsb2NrcGx1cy5vcmcvPixcclxuICogQ29weXJpZ2h0IChDKSAyMDA2LXByZXNlbnQgZXllbyBHbWJIXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XHJcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIGFzXHJcbiAqIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLlxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcclxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcclxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxyXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKlxyXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxyXG4gKiBhbG9uZyB3aXRoIEFkYmxvY2sgUGx1cy4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cclxuICovXHJcblxyXG4vKiogQG1vZHVsZSAqL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5yZXF1aXJlKFwiLi9wb2x5ZmlsbFwiKTtcclxuY29uc3Qge3BhcnNlVVJMfSA9IHJlcXVpcmUoXCIuL3VybFwiKTtcclxuY29uc3Qge0ZpbHRlcn0gPSByZXF1aXJlKFwiLi9maWx0ZXJDbGFzc2VzXCIpO1xyXG5jb25zdCB7ZGVmYXVsdE1hdGNoZXJ9ID0gcmVxdWlyZShcIi4vbWF0Y2hlclwiKTtcclxuY29uc3Qge2VsZW1IaWRlfSA9IHJlcXVpcmUoXCIuL2VsZW1IaWRlXCIpO1xyXG5jb25zdCB7ZWxlbUhpZGVFbXVsYXRpb259ID0gcmVxdWlyZShcIi4vZWxlbUhpZGVFbXVsYXRpb25cIik7XHJcbmNvbnN0IHtlbGVtSGlkZUV4Y2VwdGlvbnN9ID0gcmVxdWlyZShcIi4vZWxlbUhpZGVFeGNlcHRpb25zXCIpO1xyXG5jb25zdCB7c25pcHBldHN9ID0gcmVxdWlyZShcIi4vc25pcHBldHNcIik7XHJcbmNvbnN0IHtwcm9maWxlcn0gPSByZXF1aXJlKFwiLi9wcm9maWxlclwiKTtcclxuXHJcbi8qKlxyXG4gKiBTZWxlY3RzIHRoZSBhcHByb3ByaWF0ZSBtb2R1bGUgZm9yIHRoZSBnaXZlbiBmaWx0ZXIgdHlwZS5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIHR5cGUgb2YgYSBmaWx0ZXIuIFRoaXMgbXVzdCBiZSBvbmUgb2ZcclxuICogICBgXCJibG9ja2luZ1wiYCwgYFwiYWxsb3dpbmdcImAsIGBcImVsZW1oaWRlXCJgLCBgXCJlbGVtaGlkZWVtdWxhdGlvblwiYCxcclxuICogICBgXCJlbGVtaGlkZWV4Y2VwdGlvblwiYCwgYW5kIGBcInNuaXBwZXRcImA7IG90aGVyd2lzZSB0aGUgZnVuY3Rpb24gcmV0dXJuc1xyXG4gKiAgIGBudWxsYC5cclxuICpcclxuICogQHJldHVybnMgez9vYmplY3R9IFRoZSBhcHByb3ByaWF0ZSBtb2R1bGUgZm9yIHRoZSBnaXZlbiBmaWx0ZXIgdHlwZS5cclxuICovXHJcbmZ1bmN0aW9uIHNlbGVjdE1vZHVsZSh0eXBlKVxyXG57XHJcbiAgc3dpdGNoICh0eXBlKVxyXG4gIHtcclxuICAgIGNhc2UgXCJibG9ja2luZ1wiOlxyXG4gICAgY2FzZSBcImFsbG93aW5nXCI6XHJcbiAgICAgIHJldHVybiBkZWZhdWx0TWF0Y2hlcjtcclxuICAgIGNhc2UgXCJlbGVtaGlkZVwiOlxyXG4gICAgICByZXR1cm4gZWxlbUhpZGU7XHJcbiAgICBjYXNlIFwiZWxlbWhpZGVlbXVsYXRpb25cIjpcclxuICAgICAgcmV0dXJuIGVsZW1IaWRlRW11bGF0aW9uO1xyXG4gICAgY2FzZSBcImVsZW1oaWRlZXhjZXB0aW9uXCI6XHJcbiAgICAgIHJldHVybiBlbGVtSGlkZUV4Y2VwdGlvbnM7XHJcbiAgICBjYXNlIFwic25pcHBldFwiOlxyXG4gICAgICByZXR1cm4gc25pcHBldHM7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIGB7QGxpbmsgbW9kdWxlOmZpbHRlckVuZ2luZS5maWx0ZXJFbmdpbmUgZmlsdGVyRW5naW5lfWAgaW1wbGVtZW50YXRpb24uXHJcbiAqL1xyXG5jbGFzcyBGaWx0ZXJFbmdpbmVcclxue1xyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIGB7QGxpbmsgbW9kdWxlOmZpbHRlckVuZ2luZS5maWx0ZXJFbmdpbmUgZmlsdGVyRW5naW5lfWBcclxuICAgKiBvYmplY3QuXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcigpXHJcbiAge1xyXG4gICAgdGhpcy5wID0gcHJvZmlsZXIoXCJGaWx0ZXJFbmdpbmVcIik7XHJcbiAgICB0aGlzLnAuc3RhcnQoKTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHByb21pc2UgcmV0dXJuZWQgYnlcclxuICAgICAqIGB7QGxpbmsgbW9kdWxlOmZpbHRlckVuZ2luZX5GaWx0ZXJFbmdpbmUjaW5pdGlhbGl6ZX1gLlxyXG4gICAgICogQHR5cGUgez9Qcm9taXNlfVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdGhpcy5faW5pdGlhbGl6YXRpb25Qcm9taXNlID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluaXRpYWxpemVzIHRoZSBge0BsaW5rIG1vZHVsZTpmaWx0ZXJFbmdpbmUuZmlsdGVyRW5naW5lIGZpbHRlckVuZ2luZX1gXHJcbiAgICogb2JqZWN0IHdpdGggdGhlIGdpdmVuIGZpbHRlcnMgb3IgZmlsdGVycyBsb2FkZWQgZnJvbSBkaXNrLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtJdGVyYWJsZS48c3RyaW5nPn0gW2ZpbHRlclNvdXJjZV0gQW4gaXRlcmFibGUgb2JqZWN0IHRoYXQgeWllbGRzXHJcbiAgICogICB0aGUgdGV4dCBvZiB0aGUgZmlsdGVycyB3aXRoIHdoaWNoIHRvIGluaXRpYWxpemUgdGhlXHJcbiAgICogICBge0BsaW5rIG1vZHVsZTpmaWx0ZXJFbmdpbmUuZmlsdGVyRW5naW5lIGZpbHRlckVuZ2luZX1gIG9iamVjdC4gSWZcclxuICAgKiAgIG9taXR0ZWQsIGZpbHRlcnMgYXJlIGxvYWRlZCBmcm9tIGRpc2suXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gdGhlIGluaXRpYWxpemF0aW9uIGlzXHJcbiAgICogICBjb21wbGV0ZS5cclxuICAgKlxyXG4gICAqIEBwdWJsaWNcclxuICAgKi9cclxuICBpbml0aWFsaXplKGZpbHRlclNvdXJjZSlcclxuICB7XHJcbiAgICB0aGlzLnAubWFyayhcImluaXRpYWxpemVcIik7XHJcbiAgICBpZiAoIXRoaXMuX2luaXRpYWxpemF0aW9uUHJvbWlzZSlcclxuICAgIHtcclxuICAgICAgaWYgKHR5cGVvZiBmaWx0ZXJTb3VyY2UgPT0gXCJ1bmRlZmluZWRcIilcclxuICAgICAge1xyXG4gICAgICAgIC8vIE5vdGU6IGZpbHRlckxpc3RlbmVyLmpzIG11c3QgYmUgbG9hZGVkIGNvbmRpdGlvbmFsbHkgaGVyZSBpbiBsb2NhbFxyXG4gICAgICAgIC8vIHNjb3BlIGluIG9yZGVyIGZvciB0aGUgZW5naW5lIHRvIGJlIGFibGUgdG8gd29yayBpbiBzdGFuZGFsb25lIG1vZGVcclxuICAgICAgICAvLyB3aXRoIG5vIGRpc2sgYW5kIG5ldHdvcmsgSS9PLlxyXG4gICAgICAgIGNvbnN0IHtmaWx0ZXJMaXN0ZW5lcn0gPSByZXF1aXJlKFwiLi9maWx0ZXJMaXN0ZW5lclwiKTtcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXphdGlvblByb21pc2UgPSBmaWx0ZXJMaXN0ZW5lci5pbml0aWFsaXplKHRoaXMpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAge1xyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemF0aW9uUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICBmb3IgKGxldCB0ZXh0IG9mIGZpbHRlclNvdXJjZSlcclxuICAgICAgICAgICAgdGhpcy5hZGQoRmlsdGVyLmZyb21UZXh0KEZpbHRlci5ub3JtYWxpemUodGV4dCkpKTtcclxuICAgICAgICB9KS5maW5hbGx5KCgpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdGhpcy5wLm1hcmsoXCJkb3dubG9hZF9kb25lXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgYSBuZXcgZmlsdGVyLlxyXG4gICAqIEBwYXJhbSB7bW9kdWxlOmZpbHRlckNsYXNzZXMuQWN0aXZlRmlsdGVyfSBmaWx0ZXJcclxuICAgKiBAcGFja2FnZVxyXG4gICAqL1xyXG4gIGFkZChmaWx0ZXIpXHJcbiAge1xyXG4gICAgbGV0IG1vZHVsZSA9IHNlbGVjdE1vZHVsZShmaWx0ZXIudHlwZSk7XHJcbiAgICBpZiAobW9kdWxlKVxyXG4gICAgICBtb2R1bGUuYWRkKGZpbHRlcik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGFuIGV4aXN0aW5nIGZpbHRlci5cclxuICAgKiBAcGFyYW0ge21vZHVsZTpmaWx0ZXJDbGFzc2VzLkFjdGl2ZUZpbHRlcn0gZmlsdGVyXHJcbiAgICogQHBhY2thZ2VcclxuICAgKi9cclxuICByZW1vdmUoZmlsdGVyKVxyXG4gIHtcclxuICAgIGxldCBtb2R1bGUgPSBzZWxlY3RNb2R1bGUoZmlsdGVyLnR5cGUpO1xyXG4gICAgaWYgKG1vZHVsZSlcclxuICAgICAgbW9kdWxlLnJlbW92ZShmaWx0ZXIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIHdoZXRoZXIgYSBmaWx0ZXIgZXhpc3RzLlxyXG4gICAqIEBwYXJhbSB7bW9kdWxlOmZpbHRlckNsYXNzZXMuQWN0aXZlRmlsdGVyfSBmaWx0ZXJcclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgKiBAcGFja2FnZVxyXG4gICAqL1xyXG4gIGhhcyhmaWx0ZXIpXHJcbiAge1xyXG4gICAgbGV0IG1vZHVsZSA9IHNlbGVjdE1vZHVsZShmaWx0ZXIudHlwZSk7XHJcbiAgICBpZiAobW9kdWxlKVxyXG4gICAgICByZXR1cm4gbW9kdWxlLmhhcyhmaWx0ZXIpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xlYXJzIGFsbCBmaWx0ZXJzLlxyXG4gICAqIEBwYWNrYWdlXHJcbiAgICovXHJcbiAgY2xlYXIoKVxyXG4gIHtcclxuICAgIGRlZmF1bHRNYXRjaGVyLmNsZWFyKCk7XHJcbiAgICBlbGVtSGlkZS5jbGVhcigpO1xyXG4gICAgZWxlbUhpZGVFbXVsYXRpb24uY2xlYXIoKTtcclxuICAgIGVsZW1IaWRlRXhjZXB0aW9ucy5jbGVhcigpO1xyXG4gICAgc25pcHBldHMuY2xlYXIoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1hdGNoZXMgZXhpc3RpbmcgVVJMIGZpbHRlcnMgYWdhaW5zdCBhIHdlYiByZXNvdXJjZVxyXG4gICAqIChIVE1MIGRvY3VtZW50LCBDU1Mgc3R5bGUgc2hlZXQsIFBORyBpbWFnZSwgZXRjLikgYW5kIHJldHVybnMgdGhlIG1hdGNoaW5nXHJcbiAgICogZmlsdGVyIGlmIHRoZXJlJ3MgYSBtYXRjaC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfFVSTHxtb2R1bGU6dXJsflVSTEluZm99IHVybCBUaGUgVVJMIG9mIHRoZSByZXNvdXJjZS5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gdHlwZU1hc2sgVGhlXHJcbiAgICogICB7QGxpbmsgbW9kdWxlOmNvbnRlbnRUeXBlcy5jb250ZW50VHlwZXMgY29udGVudCB0eXBlc30gYXNzb2NpYXRlZCB3aXRoXHJcbiAgICogICB0aGUgcmVzb3VyY2UuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRvY3VtZW50SG9zdG5hbWUgVGhlIGhvc3RuYW1lIG9mIHRoZSBkb2N1bWVudCBvZiB0aGVcclxuICAgKiAgIHJlc291cmNlLlxyXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gW3NpdGVrZXldIEFuIG9wdGlvbmFsIHB1YmxpYyBrZXkgYXNzb2NpYXRlZCB3aXRoIHRoZVxyXG4gICAqICAgZG9jdW1lbnQgb2YgdGhlIHJlc291cmNlLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3NwZWNpZmljT25seV0gV2hldGhlciB0byBpZ25vcmUgYW55IGdlbmVyaWMgZmlsdGVycy5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHs/c3RyaW5nfSBBIFVSTCBmaWx0ZXIgaWYgdGhlcmUncyBhIG1hdGNoOyBvdGhlcndpc2UgYG51bGxgLlxyXG4gICAqXHJcbiAgICogQHB1YmxpY1xyXG4gICAqL1xyXG4gIG1hdGNoKHVybCwgdHlwZU1hc2ssIGRvY3VtZW50SG9zdG5hbWUsIHNpdGVrZXkgPSBudWxsLCBzcGVjaWZpY09ubHkgPSBmYWxzZSlcclxuICB7XHJcbiAgICBpZiAodHlwZW9mIHVybCA9PSBcInN0cmluZ1wiKVxyXG4gICAgICB1cmwgPSBwYXJzZVVSTCh1cmwpO1xyXG5cclxuICAgIGxldCBmaWx0ZXIgPSBkZWZhdWx0TWF0Y2hlci5tYXRjaCh1cmwsIHR5cGVNYXNrLCBkb2N1bWVudEhvc3RuYW1lLCBzaXRla2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWNpZmljT25seSk7XHJcbiAgICByZXR1cm4gZmlsdGVyID8gZmlsdGVyLnRleHQgOiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBgZmlsdGVyRW5naW5lYCBvYmplY3QgbWFpbnRhaW5zIGZpbHRlcnMgZm9yIHJlcXVlc3QgYmxvY2tpbmcsIGVsZW1lbnRcclxuICogaGlkaW5nLCBhbmQgc25pcHBldHMuXHJcbiAqXHJcbiAqIEB0eXBlIHttb2R1bGU6ZmlsdGVyRW5naW5lfkZpbHRlckVuZ2luZX1cclxuICpcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKlxyXG4gKiBsZXQge2NvbnRlbnRUeXBlcywgZmlsdGVyRW5naW5lfSA9IHJlcXVpcmUoXCJhZGJsb2NrcGx1c2NvcmVcIik7XHJcbiAqXHJcbiAqIGF3YWl0IGZpbHRlckVuZ2luZS5pbml0aWFsaXplKFxyXG4gKiAgIFtcclxuICogICAgIFwiL2Fubm95aW5nLWFkXiRpbWFnZVwiLFxyXG4gKiAgICAgXCJ8fGV4YW1wbGUuY29tL3NvY2lhbC13aWRnZXQuaHRtbF5cIlxyXG4gKiAgIF1cclxuICogKTtcclxuICpcclxuICogbGV0IHJlc291cmNlID0ge1xyXG4gKiAgIHVybDogXCJodHRwczovL2FkLXNlcnZlci5leGFtcGxlLm5ldC9hbm5veWluZy1hZC5wbmdcIixcclxuICogICBkb2N1bWVudFVSTDogXCJodHRwczovL25ld3MuZXhhbXBsZS5jb20vd29ybGQuaHRtbFwiXHJcbiAqIH07XHJcbiAqXHJcbiAqIGxldCBmaWx0ZXIgPSBmaWx0ZXJFbmdpbmUubWF0Y2gocmVzb3VyY2UudXJsLCBjb250ZW50VHlwZXMuSU1BR0UsXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFVSTChyZXNvdXJjZS5kb2N1bWVudFVSTCkuaG9zdG5hbWUpO1xyXG4gKiBjb25zb2xlLmxvZyhmaWx0ZXIpOyAvLyBwcmludHMgXCIvYW5ub3lpbmctYWReJGltYWdlXCJcclxuICovXHJcbmV4cG9ydHMuZmlsdGVyRW5naW5lID0gbmV3IEZpbHRlckVuZ2luZSgpO1xyXG4iLCIvKlxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBBZGJsb2NrIFBsdXMgPGh0dHBzOi8vYWRibG9ja3BsdXMub3JnLz4sXHJcbiAqIENvcHlyaWdodCAoQykgMjAwNi1wcmVzZW50IGV5ZW8gR21iSFxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBhc1xyXG4gKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICpcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCBBZGJsb2NrIFBsdXMuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqL1xyXG5cclxuLyoqIEBtb2R1bGUgKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuLyoqXHJcbiAqIEBmaWxlT3ZlcnZpZXcgU3luY2hyb25pemF0aW9uIGJldHdlZW4gZmlsdGVyIHN0b3JhZ2UgYW5kIHRoZSBmaWx0ZXIgZW5naW5lLlxyXG4gKi9cclxuXHJcbmNvbnN0IHtmaWx0ZXJTdG9yYWdlfSA9IHJlcXVpcmUoXCIuL2ZpbHRlclN0b3JhZ2VcIik7XHJcbmNvbnN0IHtmaWx0ZXJOb3RpZmllcn0gPSByZXF1aXJlKFwiLi9maWx0ZXJOb3RpZmllclwiKTtcclxuY29uc3Qge2lzQWN0aXZlRmlsdGVyLCBGaWx0ZXJ9ID0gcmVxdWlyZShcIi4vZmlsdGVyQ2xhc3Nlc1wiKTtcclxuY29uc3Qge1NwZWNpYWxTdWJzY3JpcHRpb259ID0gcmVxdWlyZShcIi4vc3Vic2NyaXB0aW9uQ2xhc3Nlc1wiKTtcclxuY29uc3Qge2ZpbHRlclN0YXRlfSA9IHJlcXVpcmUoXCIuL2ZpbHRlclN0YXRlXCIpO1xyXG5jb25zdCB7Y29udGVudFR5cGVzfSA9IHJlcXVpcmUoXCIuL2NvbnRlbnRUeXBlc1wiKTtcclxuXHJcbi8qKlxyXG4gKiBDaGVja3Mgd2hldGhlciBmaWx0ZXJzIGZyb20gYSBnaXZlbiBzdWJzY3JpcHRpb24gc2hvdWxkIGJlIGRlcGxveWVkIHRvIHRoZVxyXG4gKiBmaWx0ZXIgZW5naW5lLlxyXG4gKlxyXG4gKiBJZiB0aGUgc3Vic2NyaXB0aW9uIGlzIGJvdGggdmFsaWQgYW5kIGVuYWJsZWQsIHRoZSBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYDtcclxuICogb3RoZXJ3aXNlLCBpdCByZXR1cm5zIGBmYWxzZWAuXHJcbiAqXHJcbiAqIEBwYXJhbSB7bW9kdWxlOnN1YnNjcmlwdGlvbkNsYXNzZXMuU3Vic2NyaXB0aW9ufSBzdWJzY3JpcHRpb25cclxuICogICBUaGUgc3Vic2NyaXB0aW9uLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciBmaWx0ZXJzIGZyb20gdGhlIHN1YnNjcmlwdGlvbiBzaG91bGQgYmUgZGVwbG95ZWRcclxuICogICB0byB0aGUgZmlsdGVyIGVuZ2luZS5cclxuICovXHJcbmZ1bmN0aW9uIHNob3VsZERlcGxveUZpbHRlcnMoc3Vic2NyaXB0aW9uKVxyXG57XHJcbiAgcmV0dXJuIHN1YnNjcmlwdGlvbi52YWxpZCAmJiAhc3Vic2NyaXB0aW9uLmRpc2FibGVkO1xyXG59XHJcblxyXG4vKipcclxuICogRGVwbG95cyBhIGZpbHRlciB0byB0aGUgZmlsdGVyIGVuZ2luZS5cclxuICpcclxuICogVGhlIGZpbHRlciBpcyBkZXBsb3llZCBvbmx5IGlmIGl0IGJlbG9uZ3MgdG8gYXQgbGVhc3Qgb25lIHN1YnNjcmlwdGlvbiB0aGF0XHJcbiAqIGlzIGJvdGggdmFsaWQgYW5kIGVuYWJsZWQuXHJcbiAqXHJcbiAqIElmIHRoZSBmaWx0ZXIgaXMgYSBzbmlwcGV0IGZpbHRlciwgb3IgYSBibG9jayBmaWx0ZXIgd2l0aCB0aGUgYCRoZWFkZXJgXHJcbiAqIG9wdGlvbnMsIGl0IGlzIGRlcGxveWVkIG9ubHkgaWYgaXQgYmVsb25ncyB0byBhdFxyXG4gKiBsZWFzdCBvbmUgc3Vic2NyaXB0aW9uIHRoYXQgaXMgdmFsaWQsIGVuYWJsZWQsIGFuZCBvZlxyXG4gKiB7QGxpbmsgbW9kdWxlOnN1YnNjcmlwdGlvbkNsYXNzZXMuU3Vic2NyaXB0aW9uI3R5cGUgdHlwZX1cclxuICogYGNpcmN1bXZlbnRpb25gIG9yIGFcclxuICoge0BsaW5rIG1vZHVsZTpzdWJzY3JpcHRpb25DbGFzc2VzLlNwZWNpYWxTdWJzY3JpcHRpb24gc3BlY2lhbCBzdWJzY3JpcHRpb259XHJcbiAqIHRoYXQga2VlcHMgdXNlci1kZWZpbmVkIGZpbHRlcnMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7bW9kdWxlOmZpbHRlckVuZ2luZX5GaWx0ZXJFbmdpbmV9IGVuZ2luZSBBIHJlZmVyZW5jZSB0byB0aGVcclxuICogICBmaWx0ZXIgZW5naW5lLlxyXG4gKiBAcGFyYW0ge0ZpbHRlcn0gZmlsdGVyIFRoZSBmaWx0ZXIuXHJcbiAqIEBwYXJhbSB7P0FycmF5Ljxtb2R1bGU6c3Vic2NyaXB0aW9uQ2xhc3Nlcy5TdWJzY3JpcHRpb24+fSBbc3Vic2NyaXB0aW9uc11cclxuICogICBBIGxpc3Qgb2Ygc3Vic2NyaXB0aW9ucyB0byB3aGljaCB0aGUgZmlsdGVyIGJlbG9uZ3MuIElmIG9taXR0ZWQgb3IgYG51bGxgLFxyXG4gKiAgIHRoZSBpbmZvcm1hdGlvbiBpcyBsb29rZWQgdXAgZnJvbVxyXG4gKiAgIHtAbGluayBtb2R1bGU6ZmlsdGVyU3RvcmFnZS5maWx0ZXJTdG9yYWdlIGZpbHRlciBzdG9yYWdlfS5cclxuICovXHJcbmZ1bmN0aW9uIGRlcGxveUZpbHRlcihlbmdpbmUsIGZpbHRlciwgc3Vic2NyaXB0aW9ucyA9IG51bGwpXHJcbntcclxuICBpZiAoIWlzQWN0aXZlRmlsdGVyKGZpbHRlcikgfHwgIWZpbHRlclN0YXRlLmlzRW5hYmxlZChmaWx0ZXIudGV4dCkpXHJcbiAgICByZXR1cm47XHJcblxyXG4gIGxldCBkZXBsb3kgPSBmYWxzZTtcclxuICBsZXQgYWxsb3dQcml2aWxlZ2VkID0gZmFsc2U7XHJcblxyXG4gIGZvciAobGV0IHN1YnNjcmlwdGlvbiBvZiBzdWJzY3JpcHRpb25zIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlclN0b3JhZ2Uuc3Vic2NyaXB0aW9ucyhmaWx0ZXIudGV4dCkpXHJcbiAge1xyXG4gICAgaWYgKHNob3VsZERlcGxveUZpbHRlcnMoc3Vic2NyaXB0aW9uKSlcclxuICAgIHtcclxuICAgICAgZGVwbG95ID0gdHJ1ZTtcclxuXHJcbiAgICAgIC8vIEFsbG93IHNuaXBwZXRzIHRvIGJlIGV4ZWN1dGVkIG9ubHkgYnkgdGhlIGNpcmN1bXZlbnRpb24gbGlzdHMgb3IgdGhlXHJcbiAgICAgIC8vIHVzZXIncyBvd24gZmlsdGVycy5cclxuICAgICAgaWYgKHN1YnNjcmlwdGlvbi50eXBlID09IFwiY2lyY3VtdmVudGlvblwiIHx8XHJcbiAgICAgICAgICBzdWJzY3JpcHRpb24gaW5zdGFuY2VvZiBTcGVjaWFsU3Vic2NyaXB0aW9uKVxyXG4gICAgICB7XHJcbiAgICAgICAgYWxsb3dQcml2aWxlZ2VkID0gdHJ1ZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKCFkZXBsb3kpXHJcbiAgICByZXR1cm47XHJcblxyXG4gIGlmICghYWxsb3dQcml2aWxlZ2VkICYmIChmaWx0ZXIudHlwZSA9PSBcInNuaXBwZXRcIiB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoZmlsdGVyLnR5cGUgPT0gXCJibG9ja2luZ1wiICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXIuY29udGVudFR5cGUgPT0gY29udGVudFR5cGVzLkhFQURFUikpKVxyXG4gICAgcmV0dXJuO1xyXG5cclxuICBlbmdpbmUuYWRkKGZpbHRlcik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVbmRlcGxveXMgYSBmaWx0ZXIgZnJvbSB0aGUgZmlsdGVyIGVuZ2luZS5cclxuICpcclxuICogVGhlIGZpbHRlciBpcyB1bmRlcGxveWVkIG9ubHkgaWYgaXQgZG9lcyBub3QgYmVsb25nIHRvIGF0IGxlYXN0IG9uZVxyXG4gKiBzdWJzY3JpcHRpb24gdGhhdCBpcyBib3RoIHZhbGlkIGFuZCBlbmFibGVkLlxyXG4gKlxyXG4gKiBAcGFyYW0ge21vZHVsZTpmaWx0ZXJFbmdpbmV+RmlsdGVyRW5naW5lfSBlbmdpbmUgQSByZWZlcmVuY2UgdG8gdGhlXHJcbiAqICAgZmlsdGVyIGVuZ2luZS5cclxuICogQHBhcmFtIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5GaWx0ZXJ9IGZpbHRlciBUaGUgZmlsdGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gdW5kZXBsb3lGaWx0ZXIoZW5naW5lLCBmaWx0ZXIpXHJcbntcclxuICBpZiAoIWlzQWN0aXZlRmlsdGVyKGZpbHRlcikpXHJcbiAgICByZXR1cm47XHJcblxyXG4gIGlmIChmaWx0ZXJTdGF0ZS5pc0VuYWJsZWQoZmlsdGVyLnRleHQpKVxyXG4gIHtcclxuICAgIGxldCBrZWVwID0gZmFsc2U7XHJcbiAgICBmb3IgKGxldCBzdWJzY3JpcHRpb24gb2YgZmlsdGVyU3RvcmFnZS5zdWJzY3JpcHRpb25zKGZpbHRlci50ZXh0KSlcclxuICAgIHtcclxuICAgICAgaWYgKHNob3VsZERlcGxveUZpbHRlcnMoc3Vic2NyaXB0aW9uKSlcclxuICAgICAge1xyXG4gICAgICAgIGtlZXAgPSB0cnVlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGtlZXApXHJcbiAgICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGVuZ2luZS5yZW1vdmUoZmlsdGVyKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIGB7QGxpbmsgbW9kdWxlOmZpbHRlckxpc3RlbmVyLmZpbHRlckxpc3RlbmVyIGZpbHRlckxpc3RlbmVyfWBcclxuICogaW1wbGVtZW50YXRpb24uXHJcbiAqL1xyXG5jbGFzcyBGaWx0ZXJMaXN0ZW5lclxyXG57XHJcbiAgLyoqXHJcbiAgICogSW5pdGlhbGl6ZXMgZmlsdGVyIGxpc3RlbmVyIG9uIHN0YXJ0dXAsIHJlZ2lzdGVycyB0aGUgbmVjZXNzYXJ5IGhvb2tzLlxyXG4gICAqXHJcbiAgICogSW5pdGlhbGl6YXRpb24gaXMgYXN5bmNocm9ub3VzOyBvbmNlIGNvbXBsZXRlLFxyXG4gICAqIGB7QGxpbmsgbW9kdWxlOmZpbHRlck5vdGlmaWVyLmZpbHRlck5vdGlmaWVyIGZpbHRlck5vdGlmaWVyfWAgZW1pdHMgdGhlXHJcbiAgICogYHJlYWR5YCBldmVudC5cclxuICAgKlxyXG4gICAqIEBoaWRlY29uc3RydWN0b3JcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcigpXHJcbiAge1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgZmlsdGVyIGVuZ2luZS5cclxuICAgICAqIEB0eXBlIHs/bW9kdWxlOmZpbHRlckVuZ2luZX5GaWx0ZXJFbmdpbmV9XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICB0aGlzLl9lbmdpbmUgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5jcmVhc2VzIG9uIGZpbHRlciBjaGFuZ2VzLCBmaWx0ZXJzIHdpbGwgYmUgc2F2ZWQgaWYgaXQgZXhjZWVkcyAxLlxyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHRoaXMuX2lzRGlydHkgPSAwO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5pdGlhbGl6ZXMgZmlsdGVyIGxpc3RlbmVyLlxyXG4gICAqIEBwYXJhbSB7bW9kdWxlOmZpbHRlckVuZ2luZX5GaWx0ZXJFbmdpbmV9IGVuZ2luZSBBIHJlZmVyZW5jZSB0byB0aGVcclxuICAgKiAgIGZpbHRlciBlbmdpbmUuXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9IEEgcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIHRoZSBpbml0aWFsaXphdGlvbiBpc1xyXG4gICAqICAgY29tcGxldGUuXHJcbiAgICogQHBhY2thZ2VcclxuICAgKi9cclxuICBhc3luYyBpbml0aWFsaXplKGVuZ2luZSlcclxuICB7XHJcbiAgICBpZiAoZW5naW5lID09IG51bGwgfHwgdHlwZW9mIGVuZ2luZSAhPSBcIm9iamVjdFwiKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJlbmdpbmUgbXVzdCBiZSBhIG5vbi1udWxsIG9iamVjdC5cIik7XHJcblxyXG4gICAgaWYgKHRoaXMuX2VuZ2luZSAhPSBudWxsKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGaWx0ZXIgbGlzdGVuZXIgYWxyZWFkeSBpbml0aWFsaXplZC5cIik7XHJcblxyXG4gICAgdGhpcy5fZW5naW5lID0gZW5naW5lO1xyXG5cclxuICAgIGF3YWl0IGZpbHRlclN0b3JhZ2UubG9hZEZyb21EaXNrKCk7XHJcblxyXG4gICAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuXHJcbiAgICAvLyBJbml0aWFsaXplIGZpbHRlcnMgZnJvbSBlYWNoIHN1YnNjcmlwdGlvbiBhc3luY2hyb25vdXNseSBvbiBzdGFydHVwIGJ5XHJcbiAgICAvLyBzZXR0aW5nIHVwIGEgY2hhaW4gb2YgcHJvbWlzZXMuXHJcbiAgICBmb3IgKGxldCBzdWJzY3JpcHRpb24gb2YgZmlsdGVyU3RvcmFnZS5zdWJzY3JpcHRpb25zKCkpXHJcbiAgICB7XHJcbiAgICAgIGlmIChzaG91bGREZXBsb3lGaWx0ZXJzKHN1YnNjcmlwdGlvbikpXHJcbiAgICAgIHtcclxuICAgICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKCgpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZm9yIChsZXQgdGV4dCBvZiBzdWJzY3JpcHRpb24uZmlsdGVyVGV4dCgpKVxyXG4gICAgICAgICAgICBkZXBsb3lGaWx0ZXIodGhpcy5fZW5naW5lLCBGaWx0ZXIuZnJvbVRleHQodGV4dCksIFtzdWJzY3JpcHRpb25dKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IHByb21pc2U7XHJcblxyXG4gICAgZmlsdGVyTm90aWZpZXIub24oXCJmaWx0ZXIuYWRkZWRcIiwgdGhpcy5fb25GaWx0ZXJBZGRlZC5iaW5kKHRoaXMpKTtcclxuICAgIGZpbHRlck5vdGlmaWVyLm9uKFwiZmlsdGVyLnJlbW92ZWRcIiwgdGhpcy5fb25GaWx0ZXJSZW1vdmVkLmJpbmQodGhpcykpO1xyXG4gICAgZmlsdGVyTm90aWZpZXIub24oXCJmaWx0ZXIubW92ZWRcIiwgdGhpcy5fb25HZW5lcmljQ2hhbmdlLmJpbmQodGhpcykpO1xyXG5cclxuICAgIGZpbHRlck5vdGlmaWVyLm9uKFwiZmlsdGVyU3RhdGUuZW5hYmxlZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25GaWx0ZXJTdGF0ZUVuYWJsZWQuYmluZCh0aGlzKSk7XHJcbiAgICBmaWx0ZXJOb3RpZmllci5vbihcImZpbHRlclN0YXRlLmhpdENvdW50XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkZpbHRlclN0YXRlSGl0Q291bnQuYmluZCh0aGlzKSk7XHJcbiAgICBmaWx0ZXJOb3RpZmllci5vbihcImZpbHRlclN0YXRlLmxhc3RIaXRcIixcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uRmlsdGVyU3RhdGVMYXN0SGl0LmJpbmQodGhpcykpO1xyXG5cclxuICAgIGZpbHRlck5vdGlmaWVyLm9uKFwic3Vic2NyaXB0aW9uLmFkZGVkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vblN1YnNjcmlwdGlvbkFkZGVkLmJpbmQodGhpcykpO1xyXG4gICAgZmlsdGVyTm90aWZpZXIub24oXCJzdWJzY3JpcHRpb24ucmVtb3ZlZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25TdWJzY3JpcHRpb25SZW1vdmVkLmJpbmQodGhpcykpO1xyXG4gICAgZmlsdGVyTm90aWZpZXIub24oXCJzdWJzY3JpcHRpb24uZGlzYWJsZWRcIixcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uU3Vic2NyaXB0aW9uRGlzYWJsZWQuYmluZCh0aGlzKSk7XHJcbiAgICBmaWx0ZXJOb3RpZmllci5vbihcInN1YnNjcmlwdGlvbi51cGRhdGVkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vblN1YnNjcmlwdGlvblVwZGF0ZWQuYmluZCh0aGlzKSk7XHJcbiAgICBmaWx0ZXJOb3RpZmllci5vbihcInN1YnNjcmlwdGlvbi50aXRsZVwiLCB0aGlzLl9vbkdlbmVyaWNDaGFuZ2UuYmluZCh0aGlzKSk7XHJcbiAgICBmaWx0ZXJOb3RpZmllci5vbihcInN1YnNjcmlwdGlvbi5maXhlZFRpdGxlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkdlbmVyaWNDaGFuZ2UuYmluZCh0aGlzKSk7XHJcbiAgICBmaWx0ZXJOb3RpZmllci5vbihcInN1YnNjcmlwdGlvbi5ob21lcGFnZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25HZW5lcmljQ2hhbmdlLmJpbmQodGhpcykpO1xyXG4gICAgZmlsdGVyTm90aWZpZXIub24oXCJzdWJzY3JpcHRpb24uZG93bmxvYWRTdGF0dXNcIixcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uR2VuZXJpY0NoYW5nZS5iaW5kKHRoaXMpKTtcclxuICAgIGZpbHRlck5vdGlmaWVyLm9uKFwic3Vic2NyaXB0aW9uLmxhc3RDaGVja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25HZW5lcmljQ2hhbmdlLmJpbmQodGhpcykpO1xyXG4gICAgZmlsdGVyTm90aWZpZXIub24oXCJzdWJzY3JpcHRpb24uZXJyb3JzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkdlbmVyaWNDaGFuZ2UuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgZmlsdGVyTm90aWZpZXIub24oXCJsb2FkXCIsIHRoaXMuX29uTG9hZC5iaW5kKHRoaXMpKTtcclxuICAgIGZpbHRlck5vdGlmaWVyLm9uKFwic2F2ZVwiLCB0aGlzLl9vblNhdmUuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgLy8gSW5kaWNhdGUgdGhhdCBhbGwgZmlsdGVycyBhcmUgcmVhZHkgZm9yIHVzZS5cclxuICAgIGZpbHRlck5vdGlmaWVyLmVtaXQoXCJyZWFkeVwiKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluY3JlYXNlcyBcImRpcnR5IGZhY3RvclwiIG9mIHRoZSBmaWx0ZXJzIGFuZCBjYWxsc1xyXG4gICAqIGZpbHRlclN0b3JhZ2Uuc2F2ZVRvRGlzaygpIGlmIGl0IGJlY29tZXMgMSBvciBtb3JlLlxyXG4gICAqXHJcbiAgICogU2F2ZSBpcyBleGVjdXRlZCBkZWxheWVkIHRvIHByZXZlbnQgbXVsdGlwbGUgc3Vic2VxdWVudCBjYWxscy4gSWYgdGhlXHJcbiAgICogcGFyYW1ldGVyIGlzIDAgaXQgZm9yY2VzIHNhdmluZyBmaWx0ZXJzIGlmIGFueSBjaGFuZ2VzIHdlcmUgcmVjb3JkZWQgYWZ0ZXJcclxuICAgKiB0aGUgcHJldmlvdXMgc2F2ZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBmYWN0b3JcclxuICAgKlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgX3NldERpcnR5KGZhY3RvcilcclxuICB7XHJcbiAgICBpZiAoZmFjdG9yID09IDAgJiYgdGhpcy5faXNEaXJ0eSA+IDApXHJcbiAgICAgIHRoaXMuX2lzRGlydHkgPSAxO1xyXG4gICAgZWxzZVxyXG4gICAgICB0aGlzLl9pc0RpcnR5ICs9IGZhY3RvcjtcclxuICAgIGlmICh0aGlzLl9pc0RpcnR5ID49IDEpXHJcbiAgICB7XHJcbiAgICAgIHRoaXMuX2lzRGlydHkgPSAwO1xyXG4gICAgICBmaWx0ZXJTdG9yYWdlLnNhdmVUb0Rpc2soKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9vblN1YnNjcmlwdGlvbkFkZGVkKHN1YnNjcmlwdGlvbilcclxuICB7XHJcbiAgICB0aGlzLl9zZXREaXJ0eSgxKTtcclxuXHJcbiAgICBpZiAoc2hvdWxkRGVwbG95RmlsdGVycyhzdWJzY3JpcHRpb24pKVxyXG4gICAge1xyXG4gICAgICBmb3IgKGxldCB0ZXh0IG9mIHN1YnNjcmlwdGlvbi5maWx0ZXJUZXh0KCkpXHJcbiAgICAgICAgZGVwbG95RmlsdGVyKHRoaXMuX2VuZ2luZSwgRmlsdGVyLmZyb21UZXh0KHRleHQpLCBbc3Vic2NyaXB0aW9uXSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfb25TdWJzY3JpcHRpb25SZW1vdmVkKHN1YnNjcmlwdGlvbilcclxuICB7XHJcbiAgICB0aGlzLl9zZXREaXJ0eSgxKTtcclxuXHJcbiAgICBpZiAoc2hvdWxkRGVwbG95RmlsdGVycyhzdWJzY3JpcHRpb24pKVxyXG4gICAge1xyXG4gICAgICBmb3IgKGxldCB0ZXh0IG9mIHN1YnNjcmlwdGlvbi5maWx0ZXJUZXh0KCkpXHJcbiAgICAgICAgdW5kZXBsb3lGaWx0ZXIodGhpcy5fZW5naW5lLCBGaWx0ZXIuZnJvbVRleHQodGV4dCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX29uU3Vic2NyaXB0aW9uRGlzYWJsZWQoc3Vic2NyaXB0aW9uLCBuZXdWYWx1ZSlcclxuICB7XHJcbiAgICB0aGlzLl9zZXREaXJ0eSgxKTtcclxuXHJcbiAgICBpZiAoZmlsdGVyU3RvcmFnZS5oYXNTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKSlcclxuICAgIHtcclxuICAgICAgaWYgKG5ld1ZhbHVlID09IGZhbHNlKVxyXG4gICAgICB7XHJcbiAgICAgICAgZm9yIChsZXQgdGV4dCBvZiBzdWJzY3JpcHRpb24uZmlsdGVyVGV4dCgpKVxyXG4gICAgICAgICAgZGVwbG95RmlsdGVyKHRoaXMuX2VuZ2luZSwgRmlsdGVyLmZyb21UZXh0KHRleHQpLCBbc3Vic2NyaXB0aW9uXSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgZm9yIChsZXQgdGV4dCBvZiBzdWJzY3JpcHRpb24uZmlsdGVyVGV4dCgpKVxyXG4gICAgICAgICAgdW5kZXBsb3lGaWx0ZXIodGhpcy5fZW5naW5lLCBGaWx0ZXIuZnJvbVRleHQodGV4dCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfb25TdWJzY3JpcHRpb25VcGRhdGVkKHN1YnNjcmlwdGlvbiwgdGV4dERlbHRhKVxyXG4gIHtcclxuICAgIHRoaXMuX3NldERpcnR5KDEpO1xyXG5cclxuICAgIGlmIChzaG91bGREZXBsb3lGaWx0ZXJzKHN1YnNjcmlwdGlvbikgJiZcclxuICAgICAgICBmaWx0ZXJTdG9yYWdlLmhhc1N1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pKVxyXG4gICAge1xyXG4gICAgICBmb3IgKGxldCB0ZXh0IG9mIHRleHREZWx0YS5yZW1vdmVkKVxyXG4gICAgICAgIHVuZGVwbG95RmlsdGVyKHRoaXMuX2VuZ2luZSwgRmlsdGVyLmZyb21UZXh0KHRleHQpKTtcclxuXHJcbiAgICAgIGZvciAobGV0IHRleHQgb2YgdGV4dERlbHRhLmFkZGVkKVxyXG4gICAgICAgIGRlcGxveUZpbHRlcih0aGlzLl9lbmdpbmUsIEZpbHRlci5mcm9tVGV4dCh0ZXh0KSwgW3N1YnNjcmlwdGlvbl0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX29uRmlsdGVyQWRkZWQoZmlsdGVyKVxyXG4gIHtcclxuICAgIHRoaXMuX3NldERpcnR5KDEpO1xyXG5cclxuICAgIGlmIChmaWx0ZXJTdGF0ZS5pc0VuYWJsZWQoZmlsdGVyLnRleHQpKVxyXG4gICAgICBkZXBsb3lGaWx0ZXIodGhpcy5fZW5naW5lLCBmaWx0ZXIpO1xyXG4gIH1cclxuXHJcbiAgX29uRmlsdGVyUmVtb3ZlZChmaWx0ZXIpXHJcbiAge1xyXG4gICAgdGhpcy5fc2V0RGlydHkoMSk7XHJcblxyXG4gICAgaWYgKGZpbHRlclN0YXRlLmlzRW5hYmxlZChmaWx0ZXIudGV4dCkpXHJcbiAgICAgIHVuZGVwbG95RmlsdGVyKHRoaXMuX2VuZ2luZSwgZmlsdGVyKTtcclxuICB9XHJcblxyXG4gIF9vbkZpbHRlclN0YXRlRW5hYmxlZCh0ZXh0LCBuZXdWYWx1ZSlcclxuICB7XHJcbiAgICB0aGlzLl9zZXREaXJ0eSgxKTtcclxuXHJcbiAgICBpZiAobmV3VmFsdWUgPT0gZmFsc2UpXHJcbiAgICAgIHVuZGVwbG95RmlsdGVyKHRoaXMuX2VuZ2luZSwgRmlsdGVyLmZyb21UZXh0KHRleHQpKTtcclxuICAgIGVsc2VcclxuICAgICAgZGVwbG95RmlsdGVyKHRoaXMuX2VuZ2luZSwgRmlsdGVyLmZyb21UZXh0KHRleHQpKTtcclxuICB9XHJcblxyXG4gIF9vbkZpbHRlclN0YXRlSGl0Q291bnQodGV4dCwgbmV3VmFsdWUpXHJcbiAge1xyXG4gICAgaWYgKG5ld1ZhbHVlID09IDApXHJcbiAgICAgIHRoaXMuX3NldERpcnR5KDApO1xyXG4gICAgZWxzZVxyXG4gICAgICB0aGlzLl9zZXREaXJ0eSgwLjAwMik7XHJcbiAgfVxyXG5cclxuICBfb25GaWx0ZXJTdGF0ZUxhc3RIaXQoKVxyXG4gIHtcclxuICAgIHRoaXMuX3NldERpcnR5KDAuMDAyKTtcclxuICB9XHJcblxyXG4gIF9vbkdlbmVyaWNDaGFuZ2UoKVxyXG4gIHtcclxuICAgIHRoaXMuX3NldERpcnR5KDEpO1xyXG4gIH1cclxuXHJcbiAgX29uTG9hZCgpXHJcbiAge1xyXG4gICAgdGhpcy5faXNEaXJ0eSA9IDA7XHJcblxyXG4gICAgdGhpcy5fZW5naW5lLmNsZWFyKCk7XHJcblxyXG4gICAgZm9yIChsZXQgc3Vic2NyaXB0aW9uIG9mIGZpbHRlclN0b3JhZ2Uuc3Vic2NyaXB0aW9ucygpKVxyXG4gICAge1xyXG4gICAgICBpZiAoc2hvdWxkRGVwbG95RmlsdGVycyhzdWJzY3JpcHRpb24pKVxyXG4gICAgICB7XHJcbiAgICAgICAgZm9yIChsZXQgdGV4dCBvZiBzdWJzY3JpcHRpb24uZmlsdGVyVGV4dCgpKVxyXG4gICAgICAgICAgZGVwbG95RmlsdGVyKHRoaXMuX2VuZ2luZSwgRmlsdGVyLmZyb21UZXh0KHRleHQpLCBbc3Vic2NyaXB0aW9uXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9vblNhdmUoKVxyXG4gIHtcclxuICAgIHRoaXMuX2lzRGlydHkgPSAwO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENvbXBvbmVudCBzeW5jaHJvbml6aW5nIGZpbHRlciBzdG9yYWdlIHdpdGggdGhlIGZpbHRlciBlbmdpbmUuXHJcbiAqIEB0eXBlIHttb2R1bGU6ZmlsdGVyTGlzdGVuZXJ+RmlsdGVyTGlzdGVuZXJ9XHJcbiAqIEBwYWNrYWdlXHJcbiAqL1xyXG5leHBvcnRzLmZpbHRlckxpc3RlbmVyID0gbmV3IEZpbHRlckxpc3RlbmVyKCk7XHJcbiIsIi8qXHJcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIEFkYmxvY2sgUGx1cyA8aHR0cHM6Ly9hZGJsb2NrcGx1cy5vcmcvPixcclxuICogQ29weXJpZ2h0IChDKSAyMDA2LXByZXNlbnQgZXllbyBHbWJIXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XHJcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIGFzXHJcbiAqIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLlxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcclxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcclxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxyXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKlxyXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxyXG4gKiBhbG9uZyB3aXRoIEFkYmxvY2sgUGx1cy4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cclxuICovXHJcblxyXG4vKiogQG1vZHVsZSAqL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4vKipcclxuICogQGZpbGVPdmVydmlldyBUaGlzIGNvbXBvbmVudCBtYW5hZ2VzIGxpc3RlbmVycyBhbmQgY2FsbHMgdGhlbSB0byBkaXN0cmlidXRlXHJcbiAqIG1lc3NhZ2VzIGFib3V0IGZpbHRlciBjaGFuZ2VzLlxyXG4gKi9cclxuXHJcbmNvbnN0IHtFdmVudEVtaXR0ZXJ9ID0gcmVxdWlyZShcIi4vZXZlbnRzXCIpO1xyXG5cclxuLyoqXHJcbiAqIFRoaXMgb2JqZWN0IGFsbG93cyByZWdpc3RlcmluZyBhbmQgdHJpZ2dlcmluZyBsaXN0ZW5lcnMgZm9yIGZpbHRlciBldmVudHMuXHJcbiAqIEB0eXBlIHttb2R1bGU6ZXZlbnRzLkV2ZW50RW1pdHRlcn1cclxuICovXHJcbmV4cG9ydHMuZmlsdGVyTm90aWZpZXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiIsIi8qXHJcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIEFkYmxvY2sgUGx1cyA8aHR0cHM6Ly9hZGJsb2NrcGx1cy5vcmcvPixcclxuICogQ29weXJpZ2h0IChDKSAyMDA2LXByZXNlbnQgZXllbyBHbWJIXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XHJcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIGFzXHJcbiAqIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLlxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcclxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcclxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxyXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKlxyXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxyXG4gKiBhbG9uZyB3aXRoIEFkYmxvY2sgUGx1cy4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cclxuICovXHJcblxyXG4vKiogQG1vZHVsZSAqL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5jb25zdCB7ZmlsdGVyTm90aWZpZXJ9ID0gcmVxdWlyZShcIi4vZmlsdGVyTm90aWZpZXJcIik7XHJcblxyXG4vKipcclxuICogSW50ZXJuYWwgbWFwIGNvbnRhaW5pbmcgZmlsdGVyIHN0YXRlLlxyXG4gKiBAdHlwZSB7TWFwLjxzdHJpbmcsIG9iamVjdD59XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5jb25zdCBtYXAgPSBuZXcgTWFwKCk7XHJcblxyXG4vKipcclxuICogYHtAbGluayBtb2R1bGU6ZmlsdGVyU3RhdGUuZmlsdGVyU3RhdGUgZmlsdGVyU3RhdGV9YCBpbXBsZW1lbnRhdGlvbi5cclxuICovXHJcblxyXG4vKipcclxuICogTWFpbnRhaW5zIGZpbHRlciBzdGF0ZS5cclxuICogQHR5cGUge21vZHVsZTpmaWx0ZXJTdGF0ZX5GaWx0ZXJTdGF0ZX1cclxuICovXHJcbmV4cG9ydHMuZmlsdGVyU3RhdGUgPSB7XHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIHdoZXRoZXIgYSBmaWx0ZXIgaXMgZW5hYmxlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyVGV4dCBUaGUgdGV4dCBvZiB0aGUgZmlsdGVyLlxyXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHRoZSBmaWx0ZXIgaXMgZW5hYmxlZC5cclxuICAgKi9cclxuICBpc0VuYWJsZWQoZmlsdGVyVGV4dClcclxuICB7XHJcbiAgICBsZXQgc3RhdGUgPSBtYXAuc2l6ZSA+IDAgPyBtYXAuZ2V0KGZpbHRlclRleHQpIDogdm9pZCAwO1xyXG4gICAgaWYgKHN0YXRlKVxyXG4gICAgICByZXR1cm4gIXN0YXRlLmRpc2FibGVkO1xyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIGVuYWJsZWQgc3RhdGUgb2YgYSBmaWx0ZXIuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZpbHRlclRleHQgVGhlIHRleHQgb2YgdGhlIGZpbHRlci5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZWQgVGhlIG5ldyBlbmFibGVkIHN0YXRlIG9mIHRoZSBmaWx0ZXIuXHJcbiAgICovXHJcbiAgc2V0RW5hYmxlZChmaWx0ZXJUZXh0LCBlbmFibGVkKVxyXG4gIHtcclxuICAgIHNldEVuYWJsZWRXaXRoU3RhdGUoZmlsdGVyVGV4dCwgZW5hYmxlZCwgbWFwLnNpemUgPiAwID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwLmdldChmaWx0ZXJUZXh0KSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVG9nZ2xlcyB0aGUgZW5hYmxlZCBzdGF0ZSBvZiBhIGZpbHRlci5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyVGV4dCBUaGUgdGV4dCBvZiB0aGUgZmlsdGVyLlxyXG4gICAqL1xyXG4gIHRvZ2dsZUVuYWJsZWQoZmlsdGVyVGV4dClcclxuICB7XHJcbiAgICBsZXQgc3RhdGUgPSBtYXAuc2l6ZSA+IDAgPyBtYXAuZ2V0KGZpbHRlclRleHQpIDogdm9pZCAwO1xyXG5cclxuICAgIHNldEVuYWJsZWRXaXRoU3RhdGUoZmlsdGVyVGV4dCwgc3RhdGUgPyBzdGF0ZS5kaXNhYmxlZCA6IGZhbHNlLCBzdGF0ZSk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogUmVzZXRzIHRoZSBlbmFibGVkIHN0YXRlIG9mIGEgZmlsdGVyLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmaWx0ZXJUZXh0IFRoZSB0ZXh0IG9mIHRoZSBmaWx0ZXIuXHJcbiAgICovXHJcbiAgcmVzZXRFbmFibGVkKGZpbHRlclRleHQpXHJcbiAge1xyXG4gICAgdGhpcy5zZXRFbmFibGVkKGZpbHRlclRleHQsIHRydWUpO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIGhpdCBjb3VudCBvZiBhIGZpbHRlci5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyVGV4dCBUaGUgdGV4dCBvZiB0aGUgZmlsdGVyLlxyXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSBoaXQgY291bnQgb2YgdGhlIGZpbHRlci5cclxuICAgKi9cclxuICBnZXRIaXRDb3VudChmaWx0ZXJUZXh0KVxyXG4gIHtcclxuICAgIGxldCBzdGF0ZSA9IG1hcC5zaXplID4gMCA/IG1hcC5nZXQoZmlsdGVyVGV4dCkgOiB2b2lkIDA7XHJcbiAgICBpZiAoc3RhdGUpXHJcbiAgICAgIHJldHVybiBzdGF0ZS5oaXRDb3VudDtcclxuXHJcbiAgICByZXR1cm4gMDtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBoaXQgY291bnQgb2YgYSBmaWx0ZXIuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZpbHRlclRleHQgVGhlIHRleHQgb2YgdGhlIGZpbHRlci5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gaGl0Q291bnQgVGhlIG5ldyBoaXQgY291bnQgb2YgdGhlIGZpbHRlci5cclxuICAgKi9cclxuICBzZXRIaXRDb3VudChmaWx0ZXJUZXh0LCBoaXRDb3VudClcclxuICB7XHJcbiAgICBsZXQgc3RhdGUgPSBtYXAuc2l6ZSA+IDAgPyBtYXAuZ2V0KGZpbHRlclRleHQpIDogdm9pZCAwO1xyXG4gICAgaWYgKHN0YXRlKVxyXG4gICAge1xyXG4gICAgICBsZXQgb2xkSGl0Q291bnQgPSBzdGF0ZS5oaXRDb3VudDtcclxuXHJcbiAgICAgIGlmIChoaXRDb3VudCA9PSAwICYmICFzdGF0ZS5kaXNhYmxlZCAmJiBzdGF0ZS5sYXN0SGl0ID09IDApXHJcbiAgICAgICAgbWFwLmRlbGV0ZShmaWx0ZXJUZXh0KTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHN0YXRlLmhpdENvdW50ID0gaGl0Q291bnQ7XHJcblxyXG4gICAgICBpZiAoaGl0Q291bnQgIT0gb2xkSGl0Q291bnQpXHJcbiAgICAgIHtcclxuICAgICAgICBmaWx0ZXJOb3RpZmllci5lbWl0KFwiZmlsdGVyU3RhdGUuaGl0Q291bnRcIiwgZmlsdGVyVGV4dCwgaGl0Q291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRIaXRDb3VudCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGhpdENvdW50ICE9IDApXHJcbiAgICB7XHJcbiAgICAgIG1hcC5zZXQoZmlsdGVyVGV4dCwge2Rpc2FibGVkOiBmYWxzZSwgaGl0Q291bnQsIGxhc3RIaXQ6IDB9KTtcclxuXHJcbiAgICAgIGZpbHRlck5vdGlmaWVyLmVtaXQoXCJmaWx0ZXJTdGF0ZS5oaXRDb3VudFwiLCBmaWx0ZXJUZXh0LCBoaXRDb3VudCwgMCk7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogUmVzZXRzIHRoZSBoaXQgY291bnQgb2YgYSBmaWx0ZXIuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZpbHRlclRleHQgVGhlIHRleHQgb2YgdGhlIGZpbHRlci5cclxuICAgKi9cclxuICByZXNldEhpdENvdW50KGZpbHRlclRleHQpXHJcbiAge1xyXG4gICAgdGhpcy5zZXRIaXRDb3VudChmaWx0ZXJUZXh0LCAwKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSBsYXN0IGhpdCB0aW1lIG9mIGEgZmlsdGVyLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmaWx0ZXJUZXh0IFRoZSB0ZXh0IG9mIHRoZSBmaWx0ZXIuXHJcbiAgICogQHJldHVybnMge251bWJlcn0gVGhlIGxhc3QgaGl0IHRpbWUgb2YgdGhlIGZpbHRlciBpbiBtaWxsaXNlY29uZHMgc2luY2VcclxuICAgKiAgIHRoZSBVbml4IGVwb2NoLlxyXG4gICAqL1xyXG4gIGdldExhc3RIaXQoZmlsdGVyVGV4dClcclxuICB7XHJcbiAgICBsZXQgc3RhdGUgPSBtYXAuc2l6ZSA+IDAgPyBtYXAuZ2V0KGZpbHRlclRleHQpIDogdm9pZCAwO1xyXG4gICAgaWYgKHN0YXRlKVxyXG4gICAgICByZXR1cm4gc3RhdGUubGFzdEhpdDtcclxuXHJcbiAgICByZXR1cm4gMDtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBsYXN0IGhpdCB0aW1lIG9mIGEgZmlsdGVyLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmaWx0ZXJUZXh0IFRoZSB0ZXh0IG9mIHRoZSBmaWx0ZXIuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGxhc3RIaXQgVGhlIG5ldyBsYXN0IGhpdCB0aW1lIG9mIHRoZSBmaWx0ZXIgaW5cclxuICAgKiAgIG1pbGxpc2Vjb25kcyBzaW5jZSB0aGUgVW5peCBlcG9jaC5cclxuICAgKi9cclxuICBzZXRMYXN0SGl0KGZpbHRlclRleHQsIGxhc3RIaXQpXHJcbiAge1xyXG4gICAgbGV0IHN0YXRlID0gbWFwLnNpemUgPiAwID8gbWFwLmdldChmaWx0ZXJUZXh0KSA6IHZvaWQgMDtcclxuICAgIGlmIChzdGF0ZSlcclxuICAgIHtcclxuICAgICAgbGV0IG9sZExhc3RIaXQgPSBzdGF0ZS5sYXN0SGl0O1xyXG5cclxuICAgICAgaWYgKGxhc3RIaXQgPT0gMCAmJiAhc3RhdGUuZGlzYWJsZWQgJiYgc3RhdGUuaGl0Q291bnQgPT0gMClcclxuICAgICAgICBtYXAuZGVsZXRlKGZpbHRlclRleHQpO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgc3RhdGUubGFzdEhpdCA9IGxhc3RIaXQ7XHJcblxyXG4gICAgICBpZiAobGFzdEhpdCAhPSBvbGRMYXN0SGl0KVxyXG4gICAgICB7XHJcbiAgICAgICAgZmlsdGVyTm90aWZpZXIuZW1pdChcImZpbHRlclN0YXRlLmxhc3RIaXRcIiwgZmlsdGVyVGV4dCwgbGFzdEhpdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZExhc3RIaXQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsYXN0SGl0ICE9IDApXHJcbiAgICB7XHJcbiAgICAgIG1hcC5zZXQoZmlsdGVyVGV4dCwge2Rpc2FibGVkOiBmYWxzZSwgaGl0Q291bnQ6IDAsIGxhc3RIaXR9KTtcclxuXHJcbiAgICAgIGZpbHRlck5vdGlmaWVyLmVtaXQoXCJmaWx0ZXJTdGF0ZS5sYXN0SGl0XCIsIGZpbHRlclRleHQsIGxhc3RIaXQsIDApO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc2V0cyB0aGUgbGFzdCBoaXQgdGltZSBvZiBhIGZpbHRlci5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyVGV4dCBUaGUgdGV4dCBvZiB0aGUgZmlsdGVyLlxyXG4gICAqL1xyXG4gIHJlc2V0TGFzdEhpdChmaWx0ZXJUZXh0KVxyXG4gIHtcclxuICAgIHRoaXMuc2V0TGFzdEhpdChmaWx0ZXJUZXh0LCAwKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBSZWdpc3RlcnMgYSBmaWx0ZXIgaGl0IGJ5IGluY3JlbWVudGluZyB0aGUgaGl0IGNvdW50IG9mIHRoZSBmaWx0ZXIgYW5kXHJcbiAgICogc2V0dGluZyB0aGUgbGFzdCBoaXQgdGltZSBvZiB0aGUgZmlsdGVyIHRvIHRoZSBjdXJyZW50IHRpbWUuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZpbHRlclRleHQgVGhlIHRleHQgb2YgdGhlIGZpbHRlci5cclxuICAgKi9cclxuICByZWdpc3RlckhpdChmaWx0ZXJUZXh0KVxyXG4gIHtcclxuICAgIGxldCBub3cgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgIGxldCBzdGF0ZSA9IG1hcC5zaXplID4gMCA/IG1hcC5nZXQoZmlsdGVyVGV4dCkgOiB2b2lkIDA7XHJcbiAgICBpZiAoc3RhdGUpXHJcbiAgICB7XHJcbiAgICAgIGxldCBvbGRIaXRDb3VudCA9IHN0YXRlLmhpdENvdW50O1xyXG4gICAgICBsZXQgb2xkTGFzdEhpdCA9IHN0YXRlLmxhc3RIaXQ7XHJcblxyXG4gICAgICBzdGF0ZS5oaXRDb3VudCsrO1xyXG4gICAgICBzdGF0ZS5sYXN0SGl0ID0gbm93O1xyXG5cclxuICAgICAgaWYgKHN0YXRlLmhpdENvdW50ICE9IG9sZEhpdENvdW50KVxyXG4gICAgICB7XHJcbiAgICAgICAgZmlsdGVyTm90aWZpZXIuZW1pdChcImZpbHRlclN0YXRlLmhpdENvdW50XCIsIGZpbHRlclRleHQsIHN0YXRlLmhpdENvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkSGl0Q291bnQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoc3RhdGUubGFzdEhpdCAhPSBvbGRMYXN0SGl0KVxyXG4gICAgICB7XHJcbiAgICAgICAgZmlsdGVyTm90aWZpZXIuZW1pdChcImZpbHRlclN0YXRlLmxhc3RIaXRcIiwgZmlsdGVyVGV4dCwgc3RhdGUubGFzdEhpdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZExhc3RIaXQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIG1hcC5zZXQoZmlsdGVyVGV4dCwge2Rpc2FibGVkOiBmYWxzZSwgaGl0Q291bnQ6IDEsIGxhc3RIaXQ6IG5vd30pO1xyXG5cclxuICAgICAgZmlsdGVyTm90aWZpZXIuZW1pdChcImZpbHRlclN0YXRlLmhpdENvdW50XCIsIGZpbHRlclRleHQsIDEsIDApO1xyXG4gICAgICBmaWx0ZXJOb3RpZmllci5lbWl0KFwiZmlsdGVyU3RhdGUubGFzdEhpdFwiLCBmaWx0ZXJUZXh0LCBub3csIDApO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc2V0cyB0aGUgaGl0IGNvdW50IGFuZCBsYXN0IGhpdCB0aW1lIG9mIGEgZmlsdGVyLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmaWx0ZXJUZXh0IFRoZSB0ZXh0IG9mIHRoZSBmaWx0ZXIuXHJcbiAgICovXHJcbiAgcmVzZXRIaXRzKGZpbHRlclRleHQpXHJcbiAge1xyXG4gICAgbGV0IHN0YXRlID0gbWFwLnNpemUgPiAwID8gbWFwLmdldChmaWx0ZXJUZXh0KSA6IHZvaWQgMDtcclxuICAgIGlmICghc3RhdGUpXHJcbiAgICAgIHJldHVybjtcclxuXHJcbiAgICBsZXQgb2xkSGl0Q291bnQgPSBzdGF0ZS5oaXRDb3VudDtcclxuICAgIGxldCBvbGRMYXN0SGl0ID0gc3RhdGUubGFzdEhpdDtcclxuXHJcbiAgICBpZiAoc3RhdGUuZGlzYWJsZWQpXHJcbiAgICB7XHJcbiAgICAgIHN0YXRlLmhpdENvdW50ID0gMDtcclxuICAgICAgc3RhdGUubGFzdEhpdCA9IDA7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIG1hcC5kZWxldGUoZmlsdGVyVGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG9sZEhpdENvdW50ICE9IDApXHJcbiAgICAgIGZpbHRlck5vdGlmaWVyLmVtaXQoXCJmaWx0ZXJTdGF0ZS5oaXRDb3VudFwiLCBmaWx0ZXJUZXh0LCAwLCBvbGRIaXRDb3VudCk7XHJcblxyXG4gICAgaWYgKG9sZExhc3RIaXQgIT0gMClcclxuICAgICAgZmlsdGVyTm90aWZpZXIuZW1pdChcImZpbHRlclN0YXRlLmxhc3RIaXRcIiwgZmlsdGVyVGV4dCwgMCwgb2xkTGFzdEhpdCk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogUmVzZXRzIHRoZSBlbmFibGVkIHN0YXRlLCBoaXQgY291bnQsIGFuZCBsYXN0IGhpdCB0aW1lIG9mIGEgZmlsdGVyLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmaWx0ZXJUZXh0IFRoZSB0ZXh0IG9mIHRoZSBmaWx0ZXIuXHJcbiAgICovXHJcbiAgcmVzZXQoZmlsdGVyVGV4dClcclxuICB7XHJcbiAgICBsZXQgc3RhdGUgPSBtYXAuc2l6ZSA+IDAgPyBtYXAuZ2V0KGZpbHRlclRleHQpIDogdm9pZCAwO1xyXG4gICAgaWYgKCFzdGF0ZSlcclxuICAgICAgcmV0dXJuO1xyXG5cclxuICAgIGxldCBvbGREaXNhYmxlZCA9IHN0YXRlLmRpc2FibGVkO1xyXG4gICAgbGV0IG9sZEhpdENvdW50ID0gc3RhdGUuaGl0Q291bnQ7XHJcbiAgICBsZXQgb2xkTGFzdEhpdCA9IHN0YXRlLmxhc3RIaXQ7XHJcblxyXG4gICAgbWFwLmRlbGV0ZShmaWx0ZXJUZXh0KTtcclxuXHJcbiAgICBpZiAob2xkRGlzYWJsZWQpXHJcbiAgICAgIGZpbHRlck5vdGlmaWVyLmVtaXQoXCJmaWx0ZXJTdGF0ZS5kaXNhYmxlZFwiLCBmaWx0ZXJUZXh0LCBmYWxzZSwgdHJ1ZSk7XHJcblxyXG4gICAgaWYgKG9sZEhpdENvdW50ICE9IDApXHJcbiAgICAgIGZpbHRlck5vdGlmaWVyLmVtaXQoXCJmaWx0ZXJTdGF0ZS5oaXRDb3VudFwiLCBmaWx0ZXJUZXh0LCAwLCBvbGRIaXRDb3VudCk7XHJcblxyXG4gICAgaWYgKG9sZExhc3RIaXQgIT0gMClcclxuICAgICAgZmlsdGVyTm90aWZpZXIuZW1pdChcImZpbHRlclN0YXRlLmxhc3RIaXRcIiwgZmlsdGVyVGV4dCwgMCwgb2xkTGFzdEhpdCk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogU2VyaWFsaXplcyB0aGUgc3RhdGUgb2YgYSBmaWx0ZXIuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZpbHRlclRleHQgVGhlIHRleHQgb2YgdGhlIGZpbHRlci5cclxuICAgKiBAeWllbGRzIHtzdHJpbmd9IFRoZSBuZXh0IGxpbmUgaW4gdGhlIHNlcmlhbGl6ZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlXHJcbiAgICogICBzdGF0ZSBvZiB0aGUgZmlsdGVyLlxyXG4gICAqIEBzZWUgbW9kdWxlOmZpbHRlclN0YXRlfkZpbHRlclN0YXRlI2Zyb21PYmplY3RcclxuICAgKiBAcGFja2FnZVxyXG4gICAqL1xyXG4gICpzZXJpYWxpemUoZmlsdGVyVGV4dClcclxuICB7XHJcbiAgICBsZXQgc3RhdGUgPSBtYXAuc2l6ZSA+IDAgPyBtYXAuZ2V0KGZpbHRlclRleHQpIDogdm9pZCAwO1xyXG4gICAgaWYgKCFzdGF0ZSlcclxuICAgICAgcmV0dXJuO1xyXG5cclxuICAgIHlpZWxkIFwiW0ZpbHRlcl1cIjtcclxuICAgIHlpZWxkIFwidGV4dD1cIiArIGZpbHRlclRleHQ7XHJcblxyXG4gICAgaWYgKHN0YXRlLmRpc2FibGVkKVxyXG4gICAgICB5aWVsZCBcImRpc2FibGVkPXRydWVcIjtcclxuICAgIGlmIChzdGF0ZS5oaXRDb3VudCAhPSAwKVxyXG4gICAgICB5aWVsZCBcImhpdENvdW50PVwiICsgc3RhdGUuaGl0Q291bnQ7XHJcbiAgICBpZiAoc3RhdGUubGFzdEhpdCAhPSAwKVxyXG4gICAgICB5aWVsZCBcImxhc3RIaXQ9XCIgKyBzdGF0ZS5sYXN0SGl0O1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFJlYWRzIHRoZSBzdGF0ZSBvZiBhIGZpbHRlciBmcm9tIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbi5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyVGV4dCBUaGUgdGV4dCBvZiB0aGUgZmlsdGVyLlxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvYmplY3QgQW4gb2JqZWN0IGNvbnRhaW5pbmcgYXQgbGVhc3Qgb25lIG9mIGBkaXNhYmxlZGAsXHJcbiAgICogICBgaGl0Q291bnRgLCBhbmQgYGxhc3RIaXRgIHByb3BlcnRpZXMgYW5kIHRoZWlyIGFwcHJvcHJpYXRlIHZhbHVlcy5cclxuICAgKiBAc2VlIG1vZHVsZTpmaWx0ZXJTdGF0ZX5GaWx0ZXJTdGF0ZSNzZXJpYWxpemVcclxuICAgKiBAcGFja2FnZVxyXG4gICAqL1xyXG4gIGZyb21PYmplY3QoZmlsdGVyVGV4dCwgb2JqZWN0KVxyXG4gIHtcclxuICAgIGlmICghKFwiZGlzYWJsZWRcIiBpbiBvYmplY3QgfHwgXCJoaXRDb3VudFwiIGluIG9iamVjdCB8fCBcImxhc3RIaXRcIiBpbiBvYmplY3QpKVxyXG4gICAgICByZXR1cm47XHJcblxyXG4gICAgbGV0IHN0YXRlID0ge1xyXG4gICAgICBkaXNhYmxlZDogU3RyaW5nKG9iamVjdC5kaXNhYmxlZCkgPT0gXCJ0cnVlXCIsXHJcbiAgICAgIGhpdENvdW50OiBwYXJzZUludChvYmplY3QuaGl0Q291bnQsIDEwKSB8fCAwLFxyXG4gICAgICBsYXN0SGl0OiBwYXJzZUludChvYmplY3QubGFzdEhpdCwgMTApIHx8IDBcclxuICAgIH07XHJcblxyXG4gICAgaWYgKCFzdGF0ZS5kaXNhYmxlZCAmJiBzdGF0ZS5oaXRDb3VudCA9PSAwICYmIHN0YXRlLmxhc3RIaXQgPT0gMClcclxuICAgICAgbWFwLmRlbGV0ZShmaWx0ZXJUZXh0KTtcclxuICAgIGVsc2VcclxuICAgICAgbWFwLnNldChmaWx0ZXJUZXh0LCBzdGF0ZSk7XHJcbiAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb24gc2V0RW5hYmxlZFdpdGhTdGF0ZShmaWx0ZXJUZXh0LCBlbmFibGVkLCBzdGF0ZSlcclxue1xyXG4gIGxldCBvbGRFbmFibGVkID0gc3RhdGUgPyAhc3RhdGUuZGlzYWJsZWQgOiB0cnVlO1xyXG5cclxuICBpZiAoZW5hYmxlZClcclxuICB7XHJcbiAgICBpZiAoc3RhdGUpXHJcbiAgICB7XHJcbiAgICAgIHN0YXRlLmRpc2FibGVkID0gZmFsc2U7XHJcblxyXG4gICAgICBpZiAoc3RhdGUuaGl0Q291bnQgPT0gMCAmJiBzdGF0ZS5sYXN0SGl0ID09IDApXHJcbiAgICAgICAgbWFwLmRlbGV0ZShmaWx0ZXJUZXh0KTtcclxuICAgIH1cclxuICB9XHJcbiAgZWxzZSBpZiAoc3RhdGUpXHJcbiAge1xyXG4gICAgc3RhdGUuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgbWFwLnNldChmaWx0ZXJUZXh0LCB7ZGlzYWJsZWQ6IHRydWUsIGhpdENvdW50OiAwLCBsYXN0SGl0OiAwfSk7XHJcbiAgfVxyXG5cclxuICBpZiAoZW5hYmxlZCAhPSBvbGRFbmFibGVkKVxyXG4gIHtcclxuICAgIGZpbHRlck5vdGlmaWVyLmVtaXQoXCJmaWx0ZXJTdGF0ZS5lbmFibGVkXCIsIGZpbHRlclRleHQsIGVuYWJsZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZEVuYWJsZWQpO1xyXG4gIH1cclxufVxyXG4iLCIvKlxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBBZGJsb2NrIFBsdXMgPGh0dHBzOi8vYWRibG9ja3BsdXMub3JnLz4sXHJcbiAqIENvcHlyaWdodCAoQykgMjAwNi1wcmVzZW50IGV5ZW8gR21iSFxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBhc1xyXG4gKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICpcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCBBZGJsb2NrIFBsdXMuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqL1xyXG5cclxuLyoqIEBtb2R1bGUgKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuLyoqXHJcbiAqIEBmaWxlT3ZlcnZpZXcgYGZpbHRlclN0b3JhZ2VgIG9iamVjdCByZXNwb25zaWJsZSBmb3IgbWFuYWdpbmcgdGhlIHVzZXInc1xyXG4gKiBzdWJzY3JpcHRpb25zIGFuZCBmaWx0ZXJzLlxyXG4gKi9cclxuXHJcbmNvbnN0IHtJT30gPSByZXF1aXJlKFwiaW9cIik7XHJcbmNvbnN0IHtQcmVmc30gPSByZXF1aXJlKFwicHJlZnNcIik7XHJcbmNvbnN0IHtpc0FjdGl2ZUZpbHRlciwgRmlsdGVyfSA9IHJlcXVpcmUoXCIuL2ZpbHRlckNsYXNzZXNcIik7XHJcbmNvbnN0IHtTdWJzY3JpcHRpb24sIFNwZWNpYWxTdWJzY3JpcHRpb259ID0gcmVxdWlyZShcIi4vc3Vic2NyaXB0aW9uQ2xhc3Nlc1wiKTtcclxuY29uc3Qge2ZpbHRlck5vdGlmaWVyfSA9IHJlcXVpcmUoXCIuL2ZpbHRlck5vdGlmaWVyXCIpO1xyXG5jb25zdCB7SU5JUGFyc2VyfSA9IHJlcXVpcmUoXCIuL2luaVBhcnNlclwiKTtcclxuY29uc3Qge2ZpbHRlclN0YXRlfSA9IHJlcXVpcmUoXCIuL2ZpbHRlclN0YXRlXCIpO1xyXG5cclxuLyoqXHJcbiAqIEB0eXBlZGVmIHt7ZXhpc3RzOiBib29sZWFuLCBsYXN0TW9kaWZpZWQ6IG51bWJlcn19IFN0YXRzXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEEgY2FjaGUgZm9yIGFsbCBzb3VyY2UgZmlsZXMgYW5kIGJhY2t1cCBzdGF0cy5cclxuICogQHR5cGUge01hcDxzdHJpbmcsIFN0YXRzPn1cclxuICogQHByaXZhdGVcclxuICovXHJcbmxldCBzdGF0cyA9IG5ldyBNYXAoKTtcclxuXHJcbi8qKlxyXG4gKiBBbiBhc3luY2hyb25vdXMgZ3VhcmQgZm9yIG11bHRpcGxlIGJhY2t1cHMgcmVubWFpbmcgb3BlcmF0aW9ucy4gSXQgZ2V0c1xyXG4gKiByZWFzc2lnbmVkIHRvIGEgbmV3IFByb21pc2UgdGhhdCByZW5hbWUgYWxsIGJhY2t1cHMgb25lIG1vcmUgdGltZS5cclxuICogQHR5cGUge1Byb21pc2U8dm9pZD59XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5sZXQgYmFja3VwUXVldWUgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuXHJcbi8qKlxyXG4gKiBWZXJzaW9uIG51bWJlciBvZiB0aGUgZmlsdGVyIHN0b3JhZ2UgZmlsZSBmb3JtYXQuXHJcbiAqIEB0eXBlIHtudW1iZXJ9XHJcbiAqL1xyXG5jb25zdCBGT1JNQVRfVkVSU0lPTiA9IDU7XHJcblxyXG4vKipcclxuICogYHtAbGluayBtb2R1bGU6ZmlsdGVyU3RvcmFnZS5maWx0ZXJTdG9yYWdlIGZpbHRlclN0b3JhZ2V9YCBpbXBsZW1lbnRhdGlvbi5cclxuICovXHJcbmNsYXNzIEZpbHRlclN0b3JhZ2Vcclxue1xyXG4gIC8qKlxyXG4gICAqIEBoaWRlY29uc3RydWN0b3JcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcigpXHJcbiAge1xyXG4gICAgLyoqXHJcbiAgICAgKiBXaWxsIGJlIHNldCB0byBgdHJ1ZWAgYWZ0ZXIgdGhlIGluaXRpYWxcclxuICAgICAqIGB7QGxpbmsgbW9kdWxlOmZpbHRlclN0b3JhZ2V+RmlsdGVyU3RvcmFnZSNsb2FkRnJvbURpc2sgbG9hZEZyb21EaXNrKCl9YFxyXG4gICAgICogY2FsbCBjb21wbGV0ZXMuXHJcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2lsbCBiZSBzZXQgdG8gYHRydWVgIGlmIG5vIGBwYXR0ZXJucy5pbmlgIGZpbGUgZXhpc3RzLlxyXG4gICAgICogQHR5cGUge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIHRoaXMuZmlyc3RSdW4gPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE1hcCBvZiBwcm9wZXJ0aWVzIGxpc3RlZCBpbiB0aGUgZmlsdGVyIHN0b3JhZ2UgZmlsZSBiZWZvcmUgdGhlIHNlY3Rpb25zXHJcbiAgICAgKiBzdGFydC4gUmlnaHQgbm93IHRoaXMgc2hvdWxkIGJlIG9ubHkgdGhlIGZvcm1hdCB2ZXJzaW9uLlxyXG4gICAgICogQHR5cGUge29iamVjdH1cclxuICAgICAqL1xyXG4gICAgdGhpcy5maWxlUHJvcGVydGllcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXAgb2Ygc3Vic2NyaXB0aW9ucyBhbHJlYWR5IG9uIHRoZSBsaXN0LCBieSB0aGVpciBVUkwvaWRlbnRpZmllci5cclxuICAgICAqIEB0eXBlIHtNYXAuPHN0cmluZyxtb2R1bGU6c3Vic2NyaXB0aW9uQ2xhc3Nlcy5TdWJzY3JpcHRpb24+fVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdGhpcy5fa25vd25TdWJzY3JpcHRpb25zID0gbmV3IE1hcCgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2lsbCBiZSBzZXQgdG8gYHRydWVgIGlmXHJcbiAgICAgKiBge0BsaW5rIG1vZHVsZTpmaWx0ZXJTdG9yYWdlfkZpbHRlclN0b3JhZ2Ujc2F2ZVRvRGlzayBzYXZlVG9EaXNrKCl9YFxyXG4gICAgICogaXMgcnVubmluZyAocmVlbnRyYW5jZSBwcm90ZWN0aW9uKS5cclxuICAgICAqIEB0eXBlIHtib29sZWFufVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdGhpcy5fc2F2aW5nID0gZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaWxsIGJlIHNldCB0byBgdHJ1ZWAgaWYgYVxyXG4gICAgICogYHtAbGluayBtb2R1bGU6ZmlsdGVyU3RvcmFnZX5GaWx0ZXJTdG9yYWdlI3NhdmVUb0Rpc2sgc2F2ZVRvRGlzaygpfWBcclxuICAgICAqIGNhbGwgYXJyaXZlcyB3aGlsZVxyXG4gICAgICogYHtAbGluayBtb2R1bGU6ZmlsdGVyU3RvcmFnZX5GaWx0ZXJTdG9yYWdlI3NhdmVUb0Rpc2sgc2F2ZVRvRGlzaygpfWBcclxuICAgICAqIGlzIGFscmVhZHkgcnVubmluZyAoZGVsYXllZCBleGVjdXRpb24pLlxyXG4gICAgICogQHR5cGUge2Jvb2xlYW59XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICB0aGlzLl9uZWVkc1NhdmUgPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgcHJvcGVydHkgaXMgZm9yIHRlc3RpbmcgcHVycG9zZSBvbmx5IGFuZCBpdCBzaG91bGQgbmV2ZXIgYmUgdXNlZFxyXG4gICAgICogZGlyZWN0bHkgdmlhIGNvZGUuXHJcbiAgICAgKiBAdHlwZSB7TWFwPHN0cmluZywgU3RhdHM+fVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdGhpcy5fc3RhdHMgPSBzdGF0cztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSB2ZXJzaW9uIG51bWJlciBvZiB0aGUgYHBhdHRlcm5zLmluaWAgZm9ybWF0IHVzZWQuXHJcbiAgICogQHR5cGUge251bWJlcn1cclxuICAgKi9cclxuICBnZXQgZm9ybWF0VmVyc2lvbigpXHJcbiAge1xyXG4gICAgcmV0dXJuIEZPUk1BVF9WRVJTSU9OO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGZpbGUgY29udGFpbmluZyB0aGUgc3Vic2NyaXB0aW9ucy5cclxuICAgKiBAdHlwZSB7c3RyaW5nfVxyXG4gICAqL1xyXG4gIGdldCBzb3VyY2VGaWxlKClcclxuICB7XHJcbiAgICByZXR1cm4gXCJwYXR0ZXJucy5pbmlcIjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFlpZWxkcyBzdWJzY3JpcHRpb25zIGluIHRoZSBzdG9yYWdlLlxyXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gW2ZpbHRlclRleHRdIFRoZSBmaWx0ZXIgdGV4dCBmb3Igd2hpY2ggdG8gbG9vay4gSWZcclxuICAgKiAgIHNwZWNpZmllZCwgdGhlIGZ1bmN0aW9uIHlpZWxkcyBvbmx5IHRob3NlIHN1YnNjcmlwdGlvbnMgdGhhdCBjb250YWluIHRoZVxyXG4gICAqICAgZ2l2ZW4gZmlsdGVyIHRleHQuIEJ5IGRlZmF1bHQgdGhlIGZ1bmN0aW9uIHlpZWxkcyBhbGwgc3Vic2NyaXB0aW9ucy5cclxuICAgKiBAeWllbGRzIHttb2R1bGU6c3Vic2NyaXB0aW9uQ2xhc3Nlcy5TdWJzY3JpcHRpb259XHJcbiAgICovXHJcbiAgKnN1YnNjcmlwdGlvbnMoZmlsdGVyVGV4dCA9IG51bGwpXHJcbiAge1xyXG4gICAgaWYgKGZpbHRlclRleHQgPT0gbnVsbClcclxuICAgIHtcclxuICAgICAgeWllbGQqIHRoaXMuX2tub3duU3Vic2NyaXB0aW9ucy52YWx1ZXMoKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgZm9yIChsZXQgc3Vic2NyaXB0aW9uIG9mIHRoaXMuX2tub3duU3Vic2NyaXB0aW9ucy52YWx1ZXMoKSlcclxuICAgICAge1xyXG4gICAgICAgIGlmIChzdWJzY3JpcHRpb24uaGFzRmlsdGVyVGV4dChmaWx0ZXJUZXh0KSlcclxuICAgICAgICAgIHlpZWxkIHN1YnNjcmlwdGlvbjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHN1YnNjcmlwdGlvbnMgaW4gdGhlIHN0b3JhZ2UuXHJcbiAgICogQHBhcmFtIHs/c3RyaW5nfSBbZmlsdGVyVGV4dF0gVGhlIGZpbHRlciB0ZXh0IGZvciB3aGljaCB0byBsb29rLiBJZlxyXG4gICAqICAgc3BlY2lmaWVkLCB0aGUgZnVuY3Rpb24gY291bnRzIG9ubHkgdGhvc2Ugc3Vic2NyaXB0aW9ucyB0aGF0IGNvbnRhaW4gdGhlXHJcbiAgICogICBnaXZlbiBmaWx0ZXIgdGV4dC4gQnkgZGVmYXVsdCB0aGUgZnVuY3Rpb24gY291bnRzIGFsbCBzdWJzY3JpcHRpb25zLlxyXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICovXHJcbiAgZ2V0U3Vic2NyaXB0aW9uQ291bnQoZmlsdGVyVGV4dCA9IG51bGwpXHJcbiAge1xyXG4gICAgaWYgKGZpbHRlclRleHQgPT0gbnVsbClcclxuICAgICAgcmV0dXJuIHRoaXMuX2tub3duU3Vic2NyaXB0aW9ucy5zaXplO1xyXG5cclxuICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICBmb3IgKGxldCBzdWJzY3JpcHRpb24gb2YgdGhpcy5fa25vd25TdWJzY3JpcHRpb25zLnZhbHVlcygpKVxyXG4gICAge1xyXG4gICAgICBpZiAoc3Vic2NyaXB0aW9uLmhhc0ZpbHRlclRleHQoZmlsdGVyVGV4dCkpXHJcbiAgICAgICAgY291bnQrKztcclxuICAgIH1cclxuICAgIHJldHVybiBjb3VudDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZpbmRzIHRoZSBmaWx0ZXIgZ3JvdXAgdGhhdCBhIGZpbHRlciBzaG91bGQgYmUgYWRkZWQgdG8gYnkgZGVmYXVsdC4gV2lsbFxyXG4gICAqIHJldHVybiBgbnVsbGAgaWYgdGhpcyBncm91cCBkb2Vzbid0IGV4aXN0IHlldC5cclxuICAgKiBAcGFyYW0ge0ZpbHRlcn0gZmlsdGVyXHJcbiAgICogQHJldHVybnMgez9tb2R1bGU6c3Vic2NyaXB0aW9uQ2xhc3Nlcy5TcGVjaWFsU3Vic2NyaXB0aW9ufVxyXG4gICAqL1xyXG4gIGdldEdyb3VwRm9yRmlsdGVyKGZpbHRlcilcclxuICB7XHJcbiAgICBsZXQgZ2VuZXJhbFN1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICBmb3IgKGxldCBzdWJzY3JpcHRpb24gb2YgdGhpcy5fa25vd25TdWJzY3JpcHRpb25zLnZhbHVlcygpKVxyXG4gICAge1xyXG4gICAgICBpZiAoc3Vic2NyaXB0aW9uIGluc3RhbmNlb2YgU3BlY2lhbFN1YnNjcmlwdGlvbiAmJiAhc3Vic2NyaXB0aW9uLmRpc2FibGVkKVxyXG4gICAgICB7XHJcbiAgICAgICAgLy8gQWx3YXlzIHByZWZlciBzcGVjaWFsaXplZCBzdWJzY3JpcHRpb25zXHJcbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbi5pc0RlZmF1bHRGb3IoZmlsdGVyKSlcclxuICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XHJcblxyXG4gICAgICAgIC8vIElmIHRoaXMgaXMgYSBnZW5lcmFsIHN1YnNjcmlwdGlvbiAtIHN0b3JlIGl0IGFzIGZhbGxiYWNrXHJcbiAgICAgICAgaWYgKCFnZW5lcmFsU3Vic2NyaXB0aW9uICYmXHJcbiAgICAgICAgICAgICghc3Vic2NyaXB0aW9uLmRlZmF1bHRzIHx8ICFzdWJzY3JpcHRpb24uZGVmYXVsdHMubGVuZ3RoKSlcclxuICAgICAgICAgIGdlbmVyYWxTdWJzY3JpcHRpb24gPSBzdWJzY3JpcHRpb247XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBnZW5lcmFsU3Vic2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIHdoZXRoZXIgYSBnaXZlbiBzdWJzY3JpcHRpb24gaXMgaW4gdGhlIHN0b3JhZ2UuXHJcbiAgICogQHBhcmFtIHttb2R1bGU6c3Vic2NyaXB0aW9uQ2xhc3Nlcy5TdWJzY3JpcHRpb259IHN1YnNjcmlwdGlvblxyXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAqL1xyXG4gIGhhc1N1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuX2tub3duU3Vic2NyaXB0aW9ucy5oYXMoc3Vic2NyaXB0aW9uLnVybCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgc3Vic2NyaXB0aW9uIHRvIHRoZSBzdG9yYWdlLlxyXG4gICAqIEBwYXJhbSB7bW9kdWxlOnN1YnNjcmlwdGlvbkNsYXNzZXMuU3Vic2NyaXB0aW9ufSBzdWJzY3JpcHRpb24gVGhlXHJcbiAgICogICBzdWJzY3JpcHRpb24gdG8gYmUgYWRkZWQuXHJcbiAgICovXHJcbiAgYWRkU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbilcclxuICB7XHJcbiAgICBpZiAodGhpcy5fa25vd25TdWJzY3JpcHRpb25zLmhhcyhzdWJzY3JpcHRpb24udXJsKSlcclxuICAgICAgcmV0dXJuO1xyXG5cclxuICAgIHRoaXMuX2tub3duU3Vic2NyaXB0aW9ucy5zZXQoc3Vic2NyaXB0aW9uLnVybCwgc3Vic2NyaXB0aW9uKTtcclxuXHJcbiAgICBmaWx0ZXJOb3RpZmllci5lbWl0KFwic3Vic2NyaXB0aW9uLmFkZGVkXCIsIHN1YnNjcmlwdGlvbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGEgc3Vic2NyaXB0aW9uIGZyb20gdGhlIHN0b3JhZ2UuXHJcbiAgICogQHBhcmFtIHttb2R1bGU6c3Vic2NyaXB0aW9uQ2xhc3Nlcy5TdWJzY3JpcHRpb259IHN1YnNjcmlwdGlvbiBUaGVcclxuICAgKiAgIHN1YnNjcmlwdGlvbiB0byBiZSByZW1vdmVkLlxyXG4gICAqL1xyXG4gIHJlbW92ZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pXHJcbiAge1xyXG4gICAgaWYgKCF0aGlzLl9rbm93blN1YnNjcmlwdGlvbnMuaGFzKHN1YnNjcmlwdGlvbi51cmwpKVxyXG4gICAgICByZXR1cm47XHJcblxyXG4gICAgdGhpcy5fa25vd25TdWJzY3JpcHRpb25zLmRlbGV0ZShzdWJzY3JpcHRpb24udXJsKTtcclxuXHJcbiAgICAvLyBUaGlzIHNob3VsZCBiZSB0aGUgbGFzdCByZW1haW5pbmcgcmVmZXJlbmNlIHRvIHRoZSBTdWJzY3JpcHRpb25cclxuICAgIC8vIG9iamVjdC5cclxuICAgIFN1YnNjcmlwdGlvbi5rbm93blN1YnNjcmlwdGlvbnMuZGVsZXRlKHN1YnNjcmlwdGlvbi51cmwpO1xyXG5cclxuICAgIGZpbHRlck5vdGlmaWVyLmVtaXQoXCJzdWJzY3JpcHRpb24ucmVtb3ZlZFwiLCBzdWJzY3JpcHRpb24pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVwbGFjZXMgdGhlIGxpc3Qgb2YgZmlsdGVycyBpbiBhIHN1YnNjcmlwdGlvbiB3aXRoIGEgbmV3IGxpc3QuXHJcbiAgICogQHBhcmFtIHttb2R1bGU6c3Vic2NyaXB0aW9uQ2xhc3Nlcy5TdWJzY3JpcHRpb259IHN1YnNjcmlwdGlvbiBUaGVcclxuICAgKiAgIHN1YnNjcmlwdGlvbiB0byBiZSB1cGRhdGVkLlxyXG4gICAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZz59IGZpbHRlclRleHQgVGhlIG5ldyBmaWx0ZXIgdGV4dC5cclxuICAgKi9cclxuICB1cGRhdGVTdWJzY3JpcHRpb25GaWx0ZXJzKHN1YnNjcmlwdGlvbiwgZmlsdGVyVGV4dClcclxuICB7XHJcbiAgICBmaWx0ZXJOb3RpZmllci5lbWl0KFwic3Vic2NyaXB0aW9uLnVwZGF0ZWRcIiwgc3Vic2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udXBkYXRlRmlsdGVyVGV4dChmaWx0ZXJUZXh0KSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgdXNlci1kZWZpbmVkIGZpbHRlciB0byB0aGUgc3RvcmFnZS5cclxuICAgKiBAcGFyYW0ge0ZpbHRlcn0gZmlsdGVyXHJcbiAgICogQHBhcmFtIHs/bW9kdWxlOnN1YnNjcmlwdGlvbkNsYXNzZXMuU3BlY2lhbFN1YnNjcmlwdGlvbn0gW3N1YnNjcmlwdGlvbl1cclxuICAgKiAgIFRoZSBzdWJzY3JpcHRpb24gdGhhdCB0aGUgZmlsdGVyIHNob3VsZCBiZSBhZGRlZCB0by5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gW3Bvc2l0aW9uXSBUaGUgcG9zaXRpb24gd2l0aGluIHRoZSBzdWJzY3JpcHRpb24gYXQgd2hpY2hcclxuICAgKiAgIHRoZSBmaWx0ZXIgc2hvdWxkIGJlIGFkZGVkLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgZmlsdGVyIGlzIGFkZGVkIGF0IHRoZVxyXG4gICAqICAgZW5kIG9mIHRoZSBzdWJzY3JpcHRpb24uXHJcbiAgICovXHJcbiAgYWRkRmlsdGVyKGZpbHRlciwgc3Vic2NyaXB0aW9uLCBwb3NpdGlvbilcclxuICB7XHJcbiAgICBpZiAoIXN1YnNjcmlwdGlvbilcclxuICAgIHtcclxuICAgICAgZm9yIChsZXQgY3VycmVudFN1YnNjcmlwdGlvbiBvZiB0aGlzLl9rbm93blN1YnNjcmlwdGlvbnMudmFsdWVzKCkpXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAoY3VycmVudFN1YnNjcmlwdGlvbiBpbnN0YW5jZW9mIFNwZWNpYWxTdWJzY3JpcHRpb24gJiZcclxuICAgICAgICAgICAgIWN1cnJlbnRTdWJzY3JpcHRpb24uZGlzYWJsZWQgJiZcclxuICAgICAgICAgICAgY3VycmVudFN1YnNjcmlwdGlvbi5oYXNGaWx0ZXJUZXh0KGZpbHRlci50ZXh0KSlcclxuICAgICAgICAgIHJldHVybjsgICAvLyBObyBuZWVkIHRvIGFkZFxyXG4gICAgICB9XHJcbiAgICAgIHN1YnNjcmlwdGlvbiA9IHRoaXMuZ2V0R3JvdXBGb3JGaWx0ZXIoZmlsdGVyKTtcclxuICAgIH1cclxuICAgIGlmICghc3Vic2NyaXB0aW9uKVxyXG4gICAge1xyXG4gICAgICAvLyBObyBncm91cCBmb3IgdGhpcyBmaWx0ZXIgZXhpc3RzLCBjcmVhdGUgb25lXHJcbiAgICAgIHN1YnNjcmlwdGlvbiA9IFNwZWNpYWxTdWJzY3JpcHRpb24uY3JlYXRlRm9yRmlsdGVyKGZpbHRlcik7XHJcbiAgICAgIHRoaXMuYWRkU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIHBvc2l0aW9uID09IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgIHBvc2l0aW9uID0gc3Vic2NyaXB0aW9uLmZpbHRlckNvdW50O1xyXG5cclxuICAgIHN1YnNjcmlwdGlvbi5pbnNlcnRGaWx0ZXJBdChmaWx0ZXIsIHBvc2l0aW9uKTtcclxuICAgIGZpbHRlck5vdGlmaWVyLmVtaXQoXCJmaWx0ZXIuYWRkZWRcIiwgZmlsdGVyLCBzdWJzY3JpcHRpb24sIHBvc2l0aW9uKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgYSB1c2VyLWRlZmluZWQgZmlsdGVyIGZyb20gdGhlIHN0b3JhZ2UuXHJcbiAgICogQHBhcmFtIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5GaWx0ZXJ9IGZpbHRlclxyXG4gICAqIEBwYXJhbSB7P21vZHVsZTpzdWJzY3JpcHRpb25DbGFzc2VzLlNwZWNpYWxTdWJzY3JpcHRpb259IFtzdWJzY3JpcHRpb25dXHJcbiAgICogICBUaGUgc3Vic2NyaXB0aW9uIHRoYXQgdGhlIGZpbHRlciBzaG91bGQgYmUgcmVtb3ZlZCBmcm9tLiBJZiBub3RcclxuICAgKiAgIHNwZWNpZmllZCwgdGhlIGZpbHRlciB3aWxsIGJlIHJlbW92ZWQgZnJvbSBhbGwgc3Vic2NyaXB0aW9ucy5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gW3Bvc2l0aW9uXSBUaGUgcG9zaXRpb24gd2l0aGluIHRoZSBzdWJzY3JpcHRpb24gYXQgd2hpY2hcclxuICAgKiAgIHRoZSBmaWx0ZXIgc2hvdWxkIGJlIHJlbW92ZWQuIElmIG5vdCBzcGVjaWZpZWQsIGFsbCBpbnN0YW5jZXMgb2YgdGhlXHJcbiAgICogICBmaWx0ZXIgd2lsbCBiZSByZW1vdmVkLlxyXG4gICAqL1xyXG4gIHJlbW92ZUZpbHRlcihmaWx0ZXIsIHN1YnNjcmlwdGlvbiwgcG9zaXRpb24pXHJcbiAge1xyXG4gICAgbGV0IHN1YnNjcmlwdGlvbnMgPSAoXHJcbiAgICAgIHN1YnNjcmlwdGlvbiA/IFtzdWJzY3JpcHRpb25dIDogdGhpcy5fa25vd25TdWJzY3JpcHRpb25zLnZhbHVlcygpXHJcbiAgICApO1xyXG4gICAgZm9yIChsZXQgY3VycmVudFN1YnNjcmlwdGlvbiBvZiBzdWJzY3JpcHRpb25zKVxyXG4gICAge1xyXG4gICAgICBpZiAoY3VycmVudFN1YnNjcmlwdGlvbiBpbnN0YW5jZW9mIFNwZWNpYWxTdWJzY3JpcHRpb24gJiZcclxuICAgICAgICAgIChjdXJyZW50U3Vic2NyaXB0aW9uID09IHN1YnNjcmlwdGlvbiB8fFxyXG4gICAgICAgICAgIGN1cnJlbnRTdWJzY3JpcHRpb24uaGFzRmlsdGVyVGV4dChmaWx0ZXIudGV4dCkpKVxyXG4gICAgICB7XHJcbiAgICAgICAgbGV0IHBvc2l0aW9ucyA9IFtdO1xyXG4gICAgICAgIGlmICh0eXBlb2YgcG9zaXRpb24gPT0gXCJ1bmRlZmluZWRcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICBsZXQgaW5kZXggPSAtMTtcclxuICAgICAgICAgIGRvXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gY3VycmVudFN1YnNjcmlwdGlvbi5maW5kRmlsdGVySW5kZXgoZmlsdGVyLCBpbmRleCArIDEpO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMClcclxuICAgICAgICAgICAgICBwb3NpdGlvbnMucHVzaChpbmRleCk7XHJcbiAgICAgICAgICB9IHdoaWxlIChpbmRleCA+PSAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKHBvc2l0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGogPSBwb3NpdGlvbnMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbGV0IGN1cnJlbnRQb3NpdGlvbiA9IHBvc2l0aW9uc1tqXTtcclxuICAgICAgICAgIGxldCBjdXJyZW50RmlsdGVyVGV4dCA9XHJcbiAgICAgICAgICAgIGN1cnJlbnRTdWJzY3JpcHRpb24uZmlsdGVyVGV4dEF0KGN1cnJlbnRQb3NpdGlvbik7XHJcbiAgICAgICAgICBpZiAoY3VycmVudEZpbHRlclRleHQgJiYgY3VycmVudEZpbHRlclRleHQgPT0gZmlsdGVyLnRleHQpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRTdWJzY3JpcHRpb24uZGVsZXRlRmlsdGVyQXQoY3VycmVudFBvc2l0aW9uKTtcclxuICAgICAgICAgICAgZmlsdGVyTm90aWZpZXIuZW1pdChcImZpbHRlci5yZW1vdmVkXCIsIGZpbHRlciwgY3VycmVudFN1YnNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UG9zaXRpb24pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTW92ZXMgYSB1c2VyLWRlZmluZWQgZmlsdGVyIHRvIGEgbmV3IHBvc2l0aW9uLlxyXG4gICAqIEBwYXJhbSB7bW9kdWxlOmZpbHRlckNsYXNzZXMuRmlsdGVyfSBmaWx0ZXJcclxuICAgKiBAcGFyYW0ge21vZHVsZTpzdWJzY3JpcHRpb25DbGFzc2VzLlNwZWNpYWxTdWJzY3JpcHRpb259IHN1YnNjcmlwdGlvbiBUaGVcclxuICAgKiAgIHN1YnNjcmlwdGlvbiB3aGVyZSB0aGUgZmlsdGVyIGlzIGxvY2F0ZWQuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9sZFBvc2l0aW9uIFRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIHRoZSBmaWx0ZXIuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG5ld1Bvc2l0aW9uIFRoZSBuZXcgcG9zaXRpb24gb2YgdGhlIGZpbHRlci5cclxuICAgKi9cclxuICBtb3ZlRmlsdGVyKGZpbHRlciwgc3Vic2NyaXB0aW9uLCBvbGRQb3NpdGlvbiwgbmV3UG9zaXRpb24pXHJcbiAge1xyXG4gICAgaWYgKCEoc3Vic2NyaXB0aW9uIGluc3RhbmNlb2YgU3BlY2lhbFN1YnNjcmlwdGlvbikpXHJcbiAgICAgIHJldHVybjtcclxuXHJcbiAgICBsZXQgY3VycmVudEZpbHRlclRleHQgPSBzdWJzY3JpcHRpb24uZmlsdGVyVGV4dEF0KG9sZFBvc2l0aW9uKTtcclxuICAgIGlmICghY3VycmVudEZpbHRlclRleHQgfHwgY3VycmVudEZpbHRlclRleHQgIT0gZmlsdGVyLnRleHQpXHJcbiAgICAgIHJldHVybjtcclxuXHJcbiAgICBuZXdQb3NpdGlvbiA9IE1hdGgubWluKE1hdGgubWF4KG5ld1Bvc2l0aW9uLCAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLmZpbHRlckNvdW50IC0gMSk7XHJcbiAgICBpZiAob2xkUG9zaXRpb24gPT0gbmV3UG9zaXRpb24pXHJcbiAgICAgIHJldHVybjtcclxuXHJcbiAgICBzdWJzY3JpcHRpb24uZGVsZXRlRmlsdGVyQXQob2xkUG9zaXRpb24pO1xyXG4gICAgc3Vic2NyaXB0aW9uLmluc2VydEZpbHRlckF0KGZpbHRlciwgbmV3UG9zaXRpb24pO1xyXG4gICAgZmlsdGVyTm90aWZpZXIuZW1pdChcImZpbHRlci5tb3ZlZFwiLCBmaWx0ZXIsIHN1YnNjcmlwdGlvbiwgb2xkUG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Bvc2l0aW9uKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluY3JlYXNlcyB0aGUgaGl0IGNvdW50IGZvciBhIGZpbHRlciBieSBvbmUuXHJcbiAgICogQHBhcmFtIHtGaWx0ZXJ9IGZpbHRlclxyXG4gICAqL1xyXG4gIGluY3JlYXNlSGl0Q291bnQoZmlsdGVyKVxyXG4gIHtcclxuICAgIGlmICghUHJlZnMuc2F2ZXN0YXRzIHx8ICFpc0FjdGl2ZUZpbHRlcihmaWx0ZXIpKVxyXG4gICAgICByZXR1cm47XHJcblxyXG4gICAgZmlsdGVyU3RhdGUucmVnaXN0ZXJIaXQoZmlsdGVyLnRleHQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzZXRzIGhpdCBjb3VudCBmb3Igc29tZSBmaWx0ZXJzLlxyXG4gICAqIEBwYXJhbSB7P0FycmF5LjxGaWx0ZXI+fSBbZmlsdGVyc10gVGhlIGZpbHRlcnMgdG8gYmUgcmVzZXQuIElmIG5vdFxyXG4gICAqICAgc3BlY2lmaWVkLCBhbGwgZmlsdGVycyB3aWxsIGJlIHJlc2V0LlxyXG4gICAqL1xyXG4gIHJlc2V0SGl0Q291bnRzKGZpbHRlcnMpXHJcbiAge1xyXG4gICAgaWYgKCFmaWx0ZXJzKVxyXG4gICAgICBmaWx0ZXJzID0gRmlsdGVyLmtub3duRmlsdGVycy52YWx1ZXMoKTtcclxuXHJcbiAgICBmb3IgKGxldCBmaWx0ZXIgb2YgZmlsdGVycylcclxuICAgICAgZmlsdGVyU3RhdGUucmVzZXRIaXRzKGZpbHRlci50ZXh0KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBjYWxsYmFjayBUZXh0U2lua1xyXG4gICAqIEBwYXJhbSB7c3RyaW5nP30gbGluZVxyXG4gICAqL1xyXG5cclxuICAvKipcclxuICAgKiBBbGxvd3MgaW1wb3J0aW5nIHByZXZpb3VzbHkgc2VyaWFsaXplZCBmaWx0ZXIgZGF0YS5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNpbGVudCBJZiBgdHJ1ZWAsIG5vIFwibG9hZFwiIG5vdGlmaWNhdGlvbiB3aWxsIGJlIHNlbnRcclxuICAgKiAgIG91dC5cclxuICAgKiBAcmV0dXJucyB7VGV4dFNpbmt9IFRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgZm9yIGVhY2ggbGluZSBvZiBkYXRhLlxyXG4gICAqICAgQ2FsbGluZyBpdCB3aXRoIGBudWxsYCBhcyB0aGUgYXJndW1lbnQgZmluYWxpemVzIHRoZSBpbXBvcnQgYW5kIHJlcGxhY2VzXHJcbiAgICogICBleGlzdGluZyBkYXRhLiBObyBjaGFuZ2VzIHdpbGwgYmUgYXBwbGllZCBiZWZvcmUgZmluYWxpemF0aW9uLCBzbyBpbXBvcnRcclxuICAgKiAgIGNhbiBiZSBcImFib3J0ZWRcIiBieSBmb3JnZXR0aW5nIHRoaXMgY2FsbGJhY2suXHJcbiAgICogQHBhY2thZ2VcclxuICAgKi9cclxuICBpbXBvcnREYXRhKHNpbGVudClcclxuICB7XHJcbiAgICBsZXQgcGFyc2VyID0gbmV3IElOSVBhcnNlcigpO1xyXG4gICAgcmV0dXJuIGxpbmUgPT5cclxuICAgIHtcclxuICAgICAgcGFyc2VyLnByb2Nlc3MobGluZSk7XHJcbiAgICAgIGlmIChsaW5lID09PSBudWxsKVxyXG4gICAgICB7XHJcbiAgICAgICAgbGV0IGtub3duU3Vic2NyaXB0aW9ucyA9IG5ldyBNYXAoKTtcclxuICAgICAgICBmb3IgKGxldCBzdWJzY3JpcHRpb24gb2YgcGFyc2VyLnN1YnNjcmlwdGlvbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgLy8gQ29udmVydCB0byB0aGUgbmV3IHRlcm1pbm9sb2d5IHdoZW4gbG9hZGluZy5cclxuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHN1YnNjcmlwdGlvbi5kZWZhdWx0cykpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5kZWZhdWx0cy5mb3JFYWNoKCh0eXBlLCBpLCBhcnIpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBpZiAodHlwZSA9PSBcIndoaXRlbGlzdFwiKVxyXG4gICAgICAgICAgICAgICAgYXJyW2ldID0gXCJhbGxvd2luZ1wiO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGtub3duU3Vic2NyaXB0aW9ucy5zZXQoc3Vic2NyaXB0aW9uLnVybCwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZmlsZVByb3BlcnRpZXMgPSBwYXJzZXIuZmlsZVByb3BlcnRpZXM7XHJcbiAgICAgICAgdGhpcy5fa25vd25TdWJzY3JpcHRpb25zID0ga25vd25TdWJzY3JpcHRpb25zO1xyXG5cclxuICAgICAgICBpZiAoIXNpbGVudClcclxuICAgICAgICAgIGZpbHRlck5vdGlmaWVyLmVtaXQoXCJsb2FkXCIpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTG9hZHMgYWxsIHN1YnNjcmlwdGlvbnMgZnJvbSBkaXNrLlxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBBIHByb21pc2UgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgd2hlbiBsb2FkaW5nIGlzIGNvbXBsZXRlLlxyXG4gICAqIEBwYWNrYWdlXHJcbiAgICovXHJcbiAgYXN5bmMgbG9hZEZyb21EaXNrKClcclxuICB7XHJcbiAgICBsZXQgdHJ5QmFja3VwID0gYXN5bmMgYmFja3VwSW5kZXggPT5cclxuICAgIHtcclxuICAgICAgdHJ5XHJcbiAgICAgIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnJlc3RvcmVCYWNrdXAoYmFja3VwSW5kZXgsIHRydWUpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fa25vd25TdWJzY3JpcHRpb25zLnNpemUgPT0gMClcclxuICAgICAgICAgIHJldHVybiB0cnlCYWNrdXAoYmFja3VwSW5kZXggKyAxKTtcclxuICAgICAgfVxyXG4gICAgICBjYXRjaCAoZXJyb3IpXHJcbiAgICAgIHtcclxuICAgICAgICAvLyBHaXZlIHVwXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdHJ5XHJcbiAgICB7XHJcbiAgICAgIGxldCBzdGF0RGF0YSA9IGF3YWl0IHN0YXRGaWxlKHRoaXMuc291cmNlRmlsZSk7XHJcblxyXG4gICAgICBpZiAoIXN0YXREYXRhLmV4aXN0cylcclxuICAgICAge1xyXG4gICAgICAgIHRoaXMuZmlyc3RSdW4gPSB0cnVlO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHBhcnNlciA9IHRoaXMuaW1wb3J0RGF0YSh0cnVlKTtcclxuICAgICAgYXdhaXQgSU8ucmVhZEZyb21GaWxlKHRoaXMuc291cmNlRmlsZSwgcGFyc2VyKTtcclxuICAgICAgcGFyc2VyKG51bGwpO1xyXG5cclxuICAgICAgaWYgKHRoaXMuX2tub3duU3Vic2NyaXB0aW9ucy5zaXplID09IDApXHJcbiAgICAgIHtcclxuICAgICAgICAvLyBObyBmaWx0ZXIgc3Vic2NyaXB0aW9ucyBpbiB0aGUgZmlsZSwgdGhpcyBpc24ndCByaWdodC5cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBkYXRhIGluIHRoZSBmaWxlXCIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpXHJcbiAgICB7XHJcbiAgICAgIGNvbnNvbGUud2FybihlcnJvcik7XHJcbiAgICAgIGF3YWl0IHRyeUJhY2t1cCgxKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgIGZpbHRlck5vdGlmaWVyLmVtaXQoXCJsb2FkXCIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29uc3RydWN0cyB0aGUgZmlsZSBuYW1lIGZvciBhIGBwYXR0ZXJucy5pbmlgIGJhY2t1cC5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gYmFja3VwSW5kZXggTnVtYmVyIG9mIHRoZSBiYWNrdXAgZmlsZSAoMSBiZWluZyB0aGUgbW9zdFxyXG4gICAqICAgcmVjZW50KS5cclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBCYWNrdXAgZmlsZSBuYW1lLlxyXG4gICAqIEBwYWNrYWdlXHJcbiAgICovXHJcbiAgZ2V0QmFja3VwTmFtZShiYWNrdXBJbmRleClcclxuICB7XHJcbiAgICBsZXQgW25hbWUsIGV4dGVuc2lvbl0gPSB0aGlzLnNvdXJjZUZpbGUuc3BsaXQoXCIuXCIsIDIpO1xyXG4gICAgcmV0dXJuIChuYW1lICsgXCItYmFja3VwXCIgKyBiYWNrdXBJbmRleCArIFwiLlwiICsgZXh0ZW5zaW9uKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlc3RvcmVzIGFuIGF1dG9tYXRpY2FsbHkgY3JlYXRlZCBiYWNrdXAuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGJhY2t1cEluZGV4IE51bWJlciBvZiB0aGUgYmFja3VwIHRvIHJlc3RvcmUgKDEgYmVpbmcgdGhlXHJcbiAgICogICBtb3N0IHJlY2VudCkuXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzaWxlbnQgSWYgYHRydWVgLCBubyBcImxvYWRcIiBub3RpZmljYXRpb24gd2lsbCBiZSBzZW50XHJcbiAgICogICBvdXQuXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9IEEgcHJvbWlzZSByZXNvbHZlZCBvciByZWplY3RlZCB3aGVuIHJlc3RvcmF0aW9uIGlzXHJcbiAgICogICBjb21wbGV0ZS5cclxuICAgKiBAcGFja2FnZVxyXG4gICAqL1xyXG4gIGFzeW5jIHJlc3RvcmVCYWNrdXAoYmFja3VwSW5kZXgsIHNpbGVudClcclxuICB7XHJcbiAgICBsZXQgYmFja3VwRmlsZSA9IHRoaXMuZ2V0QmFja3VwTmFtZShiYWNrdXBJbmRleCk7XHJcbiAgICBsZXQgcGFyc2VyID0gdGhpcy5pbXBvcnREYXRhKHNpbGVudCk7XHJcbiAgICBhd2FpdCBJTy5yZWFkRnJvbUZpbGUoYmFja3VwRmlsZSwgcGFyc2VyKTtcclxuICAgIHBhcnNlcihudWxsKTtcclxuICAgIHJldHVybiB0aGlzLnNhdmVUb0Rpc2soKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRvciBzZXJpYWxpemluZyBmaWx0ZXIgZGF0YSBhbmQgeWllbGRpbmcgaXQgbGluZSBieSBsaW5lLlxyXG4gICAqIEB5aWVsZHMge3N0cmluZ31cclxuICAgKi9cclxuICAqZXhwb3J0RGF0YSgpXHJcbiAge1xyXG4gICAgLy8gRG8gbm90IHBlcnNpc3QgZXh0ZXJuYWwgc3Vic2NyaXB0aW9uc1xyXG4gICAgbGV0IHN1YnNjcmlwdGlvbnMgPSBbXTtcclxuICAgIGZvciAobGV0IHN1YnNjcmlwdGlvbiBvZiB0aGlzLl9rbm93blN1YnNjcmlwdGlvbnMudmFsdWVzKCkpXHJcbiAgICB7XHJcbiAgICAgIGlmICghKHN1YnNjcmlwdGlvbiBpbnN0YW5jZW9mIFNwZWNpYWxTdWJzY3JpcHRpb24gJiZcclxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLmZpbHRlckNvdW50ID09IDApKVxyXG4gICAgICAgIHN1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHlpZWxkIFwiIyBBZGJsb2NrIFBsdXMgcHJlZmVyZW5jZXNcIjtcclxuICAgIHlpZWxkIFwidmVyc2lvbj1cIiArIHRoaXMuZm9ybWF0VmVyc2lvbjtcclxuXHJcbiAgICBsZXQgc2F2ZWQgPSBuZXcgU2V0KCk7XHJcblxyXG4gICAgLy8gU2F2ZSBzdWJzY3JpcHRpb25zXHJcbiAgICBmb3IgKGxldCBzdWJzY3JpcHRpb24gb2Ygc3Vic2NyaXB0aW9ucylcclxuICAgIHtcclxuICAgICAgeWllbGQqIHN1YnNjcmlwdGlvbi5zZXJpYWxpemUoKTtcclxuICAgICAgeWllbGQqIHN1YnNjcmlwdGlvbi5zZXJpYWxpemVGaWx0ZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2F2ZSBmaWx0ZXIgZGF0YVxyXG4gICAgZm9yIChsZXQgc3Vic2NyaXB0aW9uIG9mIHN1YnNjcmlwdGlvbnMpXHJcbiAgICB7XHJcbiAgICAgIGZvciAobGV0IHRleHQgb2Ygc3Vic2NyaXB0aW9uLmZpbHRlclRleHQoKSlcclxuICAgICAge1xyXG4gICAgICAgIGlmICghc2F2ZWQuaGFzKHRleHQpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHlpZWxkKiBmaWx0ZXJTdGF0ZS5zZXJpYWxpemUodGV4dCk7XHJcbiAgICAgICAgICBzYXZlZC5hZGQodGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTYXZlcyBhbGwgc3Vic2NyaXB0aW9ucyBiYWNrIHRvIGRpc2suXHJcbiAgICogQHJldHVybnMge1Byb21pc2V9IEEgcHJvbWlzZSByZXNvbHZlZCBvciByZWplY3RlZCB3aGVuIHNhdmluZyBpcyBjb21wbGV0ZS5cclxuICAgKiBAcGFja2FnZVxyXG4gICAqL1xyXG4gIGFzeW5jIHNhdmVUb0Rpc2soKVxyXG4gIHtcclxuICAgIGlmICh0aGlzLl9zYXZpbmcpXHJcbiAgICB7XHJcbiAgICAgIHRoaXMuX25lZWRzU2F2ZSA9IHRydWU7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9zYXZpbmcgPSB0cnVlO1xyXG5cclxuICAgIHRyeVxyXG4gICAge1xyXG4gICAgICBsZXQge3BhdHRlcm5zYmFja3Vwc30gPSBQcmVmcztcclxuICAgICAgbGV0IGlzQmFja3VwUmVxdWlyZWQgPSBhc3luYygpID0+XHJcbiAgICAgIHtcclxuICAgICAgICAvLyBGaXJzdCBjaGVjayB3aGV0aGVyIHdlIG5lZWQgdG8gY3JlYXRlIGEgYmFja3VwXHJcbiAgICAgICAgaWYgKHBhdHRlcm5zYmFja3VwcyA8PSAwKVxyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBsZXQgc3RhdERhdGEgPSBhd2FpdCBzdGF0RmlsZSh0aGlzLnNvdXJjZUZpbGUpO1xyXG4gICAgICAgIGlmICghc3RhdERhdGEuZXhpc3RzKVxyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBsZXQgYmFja3VwU3RhdERhdGEgPSBhd2FpdCBzdGF0RmlsZSh0aGlzLmdldEJhY2t1cE5hbWUoMSkpO1xyXG4gICAgICAgIGlmIChiYWNrdXBTdGF0RGF0YS5leGlzdHMgJiZcclxuICAgICAgICAgICAgKERhdGUubm93KCkgLSBiYWNrdXBTdGF0RGF0YS5sYXN0TW9kaWZpZWQpIC8gMzYwMDAwMCA8XHJcbiAgICAgICAgICAgICAgUHJlZnMucGF0dGVybnNiYWNrdXBpbnRlcnZhbClcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpZiAoYXdhaXQgaXNCYWNrdXBSZXF1aXJlZCgpKVxyXG4gICAgICB7XHJcbiAgICAgICAgdHJ5XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgLy8gaWYgcGF0dGVybnNiYWNrdXBzIGlzIDEganVzdCBjcmVhdGUgaXQsIG90aGVyd2lzZSBjcmVhdGUgYVxyXG4gICAgICAgICAgLy8gYmFja3VwLTAgdGhhdCB3aWxsIGJlIHNoaWZ0ZWQgYW1vbmcgb3RoZXJzIGxhdGVyIG9uXHJcbiAgICAgICAgICBsZXQgaSA9IHBhdHRlcm5zYmFja3VwcyA+IDEgPyAwIDogMTtcclxuICAgICAgICAgIGF3YWl0IHJlbmFtZUZpbGUodGhpcy5zb3VyY2VGaWxlLCB0aGlzLmdldEJhY2t1cE5hbWUoaSkpO1xyXG5cclxuICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIG1vcmUgdGhhbiBhIGJhY2t1cCwgYmFja3VwLTAgdXAgdG8gYmFja3VwLVggbmVlZCB0byBiZVxyXG4gICAgICAgICAgLy8gcmVuYW1lZCBidXQgd2l0aG91dCBibG9ja2luZyB0aGlzIGNhbGxiYWNrXHJcbiAgICAgICAgICBpZiAocGF0dGVybnNiYWNrdXBzID4gMSlcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgLy8ga2VlcCBxdWV1ZWluZyBiYWNrdXBzIGFzIHRoZXNlIGNvbWUsIGNvbnNpZGVyaW5nIGJhY2t1cDEgYW5kXHJcbiAgICAgICAgICAgIC8vIGJhY2t1cCAwIGFyZSBhbHdheXMgc2FmZSB0aGFua3MgdG8gdGhlIHRoaXMuX3NhdmluZyBmbGFnXHJcbiAgICAgICAgICAgIGJhY2t1cFF1ZXVlID0gYmFja3VwUXVldWUudGhlbigoKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBsZXQgcmVuYW1lQWxsID0gYXN5bmMgaW5kZXggPT5cclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzb3VyY2UgPSB0aGlzLmdldEJhY2t1cE5hbWUoaW5kZXggLSAxKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZGVzdCA9IHRoaXMuZ2V0QmFja3VwTmFtZShpbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmVuYW1lRmlsZShzb3VyY2UsIGRlc3QpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEV4cGVjdGVkIGVycm9yLCBiYWNrdXAgZmlsZSBkb2Vzbid0IGV4aXN0LlxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIHJlbmFtZUFsbChpbmRleCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICByZW5hbWVBbGwocGF0dGVybnNiYWNrdXBzKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgLy8gVGhpcyBpcyBhY3R1YWxseSBhbiB1bmV4cGVjdGVkIGVycm9yIHRoYXQgY291bGQgaGFwcGVuIG9ubHkgaWZcclxuICAgICAgICAgIC8vIHRoZSBkaXNrIGhhZCBpc3N1ZXMgaW4gcmVuYW1pbmcgdGhlIHNvdXJjZSBmaWxlLlxyXG4gICAgICAgICAgY29uc29sZS53YXJuKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcilcclxuICAgIHtcclxuICAgICAgLy8gRXJyb3JzIGR1cmluZyBiYWNrdXAgY3JlYXRpb24gc2hvdWxkbid0IHByZXZlbnQgd3JpdGluZyBmaWx0ZXJzLlxyXG4gICAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeVxyXG4gICAge1xyXG4gICAgICBhd2FpdCBJTy53cml0ZVRvRmlsZSh0aGlzLnNvdXJjZUZpbGUsIHRoaXMuZXhwb3J0RGF0YSgpKTtcclxuICAgICAgc3RhdHMuc2V0KHRoaXMuc291cmNlRmlsZSwge2V4aXN0czogdHJ1ZSwgbGFzdE1vZGlmaWVkOiBEYXRlLm5vdygpfSk7XHJcbiAgICAgIGZpbHRlck5vdGlmaWVyLmVtaXQoXCJzYXZlXCIpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKVxyXG4gICAge1xyXG4gICAgICAvLyBJZiBzYXZpbmcgZmFpbGVkLCByZXBvcnQgZXJyb3IgYnV0IGNvbnRpbnVlIC0gd2Ugc3RpbGwgaGF2ZSB0byBwcm9jZXNzXHJcbiAgICAgIC8vIGZsYWdzLlxyXG4gICAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xyXG4gICAgICBzdGF0cy5kZWxldGUodGhpcy5zb3VyY2VGaWxlKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9zYXZpbmcgPSBmYWxzZTtcclxuICAgIGlmICh0aGlzLl9uZWVkc1NhdmUpXHJcbiAgICB7XHJcbiAgICAgIHRoaXMuX25lZWRzU2F2ZSA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnNhdmVUb0Rpc2soKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEB0eXBlZGVmIEZpbGVJbmZvXHJcbiAgICogQHR5cGUge29iamVjdH1cclxuICAgKiBAcHJvcGVydHkge251bWJlcn0gaW5kZXhcclxuICAgKiBAcHJvcGVydHkge251bWJlcn0gbGFzdE1vZGlmaWVkXHJcbiAgICovXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHJlc29sdmluZyBpbiBhIGxpc3Qgb2YgZXhpc3RpbmcgYmFja3VwIGZpbGVzLlxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxBcnJheS48RmlsZUluZm8+Pn1cclxuICAgKiBAcGFja2FnZVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldEJhY2t1cEZpbGVzKClcclxuICB7XHJcbiAgICBsZXQgYmFja3VwcyA9IFtdO1xyXG5cclxuICAgIGxldCBjaGVja0JhY2t1cEZpbGUgPSBhc3luYyBpbmRleCA9PlxyXG4gICAge1xyXG4gICAgICB0cnlcclxuICAgICAge1xyXG4gICAgICAgIGxldCBzdGF0RGF0YSA9IGF3YWl0IHN0YXRGaWxlKHRoaXMuZ2V0QmFja3VwTmFtZShpbmRleCkpO1xyXG4gICAgICAgIGlmICghc3RhdERhdGEuZXhpc3RzKVxyXG4gICAgICAgICAgcmV0dXJuIGJhY2t1cHM7XHJcblxyXG4gICAgICAgIGJhY2t1cHMucHVzaCh7XHJcbiAgICAgICAgICBpbmRleCxcclxuICAgICAgICAgIGxhc3RNb2RpZmllZDogc3RhdERhdGEubGFzdE1vZGlmaWVkXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBjaGVja0JhY2t1cEZpbGUoaW5kZXggKyAxKTtcclxuICAgICAgfVxyXG4gICAgICBjYXRjaCAoZXJyb3IpXHJcbiAgICAgIHtcclxuICAgICAgICAvLyBTb21ldGhpbmcgd2VudCB3cm9uZywgcmV0dXJuIHdoYXRldmVyIGRhdGEgd2UgZ290IHNvIGZhci5cclxuICAgICAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBiYWNrdXBzO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBjaGVja0JhY2t1cEZpbGUoMSk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmVhZHMgdGhlIHVzZXIncyBmaWx0ZXJzIGZyb20gZGlzaywgbWFuYWdlcyB0aGVtIGluIG1lbW9yeSwgYW5kIHdyaXRlcyB0aGVtXHJcbiAqIGJhY2sgdG8gZGlzay5cclxuICogQHR5cGUge21vZHVsZTpmaWx0ZXJTdG9yYWdlfkZpbHRlclN0b3JhZ2V9XHJcbiAqL1xyXG5leHBvcnRzLmZpbHRlclN0b3JhZ2UgPSBuZXcgRmlsdGVyU3RvcmFnZSgpO1xyXG5cclxuLyoqXHJcbiAqIEdpdmVuIGEgcGF0aCwgcmV0dXJuIGl0cyBzdGF0cywgaWYga25vd24sIG9yIGEgU3RhdHMgb2JqZWN0IHdpdGggcHJvcGVydGllc1xyXG4gKiBleGlzdHMgPSBmYWxzZSBhbmQgbGFzdE1vZGlmaWVkID0gMC5cclxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGhcclxuICogQHJldHVybnMge1N0YXRzfVxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc3RhdEZpbGUocGF0aClcclxue1xyXG4gIGxldCBrbm93biA9IHN0YXRzLmdldChwYXRoKTtcclxuICBpZiAoa25vd24pXHJcbiAgICByZXR1cm4ga25vd247XHJcblxyXG4gIHRyeVxyXG4gIHtcclxuICAgIGtub3duID0gYXdhaXQgSU8uc3RhdEZpbGUocGF0aCk7XHJcbiAgfVxyXG4gIGNhdGNoIChlcnJvcilcclxuICB7XHJcbiAgICBrbm93biA9IHtleGlzdHM6IGZhbHNlLCBsYXN0TW9kaWZpZWQ6IDB9O1xyXG4gIH1cclxuICBzdGF0cy5zZXQocGF0aCwga25vd24pO1xyXG4gIHJldHVybiBrbm93bjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdpdmVuIGEgc291cmNlIHBhdGggYW5kIGEgZGVzdGluYXRpb24gcGF0aCwgdHJpZXMgdG8gcmVuYW1lIHRoZSBzb3VyY2UgYW5kLFxyXG4gKiBpZiBpdCBzdWNjZWVkLCByZW1vdmUgdGhlIHNvdXJjZSBmcm9tIHRoZSBzdGF0cyBhbmQgc2V0IHN0YXRzIGZvciBkZXN0LlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc291cmNlXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBkZXN0XHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZW5hbWVGaWxlKHNvdXJjZSwgZGVzdClcclxue1xyXG4gIGF3YWl0IElPLnJlbmFtZUZpbGUoc291cmNlLCBkZXN0KTtcclxuICBzdGF0cy5kZWxldGUoc291cmNlKTtcclxuICBzdGF0cy5zZXQoZGVzdCwge2V4aXN0czogdHJ1ZSwgbGFzdE1vZGlmaWVkOiBEYXRlLm5vdygpfSk7XHJcbn1cclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlICovXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbi8qKlxyXG4gKiBNYXAgdG8gYmUgdXNlZCBpbnN0ZWFkIHdoZW4gYSBmaWx0ZXIgaGFzIGEgYmxhbmsgYGRvbWFpbnNgIHByb3BlcnR5LlxyXG4gKiBAdHlwZSB7TWFwLjxzdHJpbmcsIGJvb2xlYW4+fVxyXG4gKi9cclxubGV0IGRlZmF1bHREb21haW5zID0gbmV3IE1hcChbW1wiXCIsIHRydWVdXSk7XHJcblxyXG5sZXQgRmlsdGVyTWFwID1cclxuLyoqXHJcbiAqIEEgYEZpbHRlck1hcGAgb2JqZWN0IGNvbnRhaW5zIGEgc2V0IG9mIGZpbHRlcnMsIGVhY2ggbWFwcGVkIHRvIGEgYm9vbGVhblxyXG4gKiB2YWx1ZSBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGZpbHRlciBzaG91bGQgYmUgYXBwbGllZC5cclxuICpcclxuICogSXQgaXMgdXNlZCBieVxyXG4gKiBge0BsaW5rIG1vZHVsZTpmaWx0ZXJzQnlEb21haW4uRmlsdGVyc0J5RG9tYWluIEZpbHRlcnNCeURvbWFpbn1gLlxyXG4gKlxyXG4gKiBAcGFja2FnZVxyXG4gKi9cclxuZXhwb3J0cy5GaWx0ZXJNYXAgPSBjbGFzcyBGaWx0ZXJNYXAgZXh0ZW5kcyBNYXAge307XHJcblxyXG4vKipcclxuICogQSBgRmlsdGVyc0J5RG9tYWluYCBvYmplY3QgY29udGFpbnMgYSBzZXQgb2YgZG9tYWlucywgZWFjaCBtYXBwZWQgdG8gYSBzZXRcclxuICogb2YgZmlsdGVycyBhbG9uZyB3aXRoIGEgYm9vbGVhbiB2YWx1ZSBmb3IgZWFjaCBmaWx0ZXIgaW5kaWNhdGluZyB3aGV0aGVyIHRoZVxyXG4gKiBmaWx0ZXIgc2hvdWxkIGJlIGFwcGxpZWQgdG8gdGhlIGRvbWFpbi5cclxuICpcclxuICogQHBhY2thZ2VcclxuICovXHJcbmV4cG9ydHMuRmlsdGVyc0J5RG9tYWluID0gY2xhc3MgRmlsdGVyc0J5RG9tYWluIGV4dGVuZHMgTWFwXHJcbntcclxuICAvKipcclxuICAgKiBBZGRzIGEgZmlsdGVyIGFuZCBhbGwgb2YgaXRzIGRvbWFpbnMgdG8gdGhlIG9iamVjdC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bW9kdWxlOmZpbHRlckNsYXNzZXMuQWN0aXZlRmlsdGVyfSBmaWx0ZXIgVGhlIGZpbHRlci5cclxuICAgKiBAcGFyYW0ge01hcC48c3RyaW5nLCBib29sZWFuPn0gW2RvbWFpbnNdIFRoZSBmaWx0ZXIncyBkb21haW5zLiBJZiBub3RcclxuICAgKiAgIGdpdmVuLCB0aGUgYHtAbGluayBtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5BY3RpdmVGaWx0ZXIjZG9tYWlucyBkb21haW5zfWBcclxuICAgKiAgIHByb3BlcnR5IG9mIGBmaWx0ZXJgIGlzIHVzZWQuXHJcbiAgICovXHJcbiAgYWRkKGZpbHRlciwgZG9tYWlucyA9IGZpbHRlci5kb21haW5zKVxyXG4gIHtcclxuICAgIGZvciAobGV0IFtkb21haW4sIGluY2x1ZGVdIG9mIGRvbWFpbnMgfHwgZGVmYXVsdERvbWFpbnMpXHJcbiAgICB7XHJcbiAgICAgIGlmICghaW5jbHVkZSAmJiBkb21haW4gPT0gXCJcIilcclxuICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgIGxldCBtYXAgPSB0aGlzLmdldChkb21haW4pO1xyXG4gICAgICBpZiAoIW1hcClcclxuICAgICAge1xyXG4gICAgICAgIHRoaXMuc2V0KGRvbWFpbiwgaW5jbHVkZSA/IGZpbHRlciA6IG5ldyBGaWx0ZXJNYXAoW1tmaWx0ZXIsIGZhbHNlXV0pKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChtYXAuc2l6ZSA9PSAxICYmICEobWFwIGluc3RhbmNlb2YgRmlsdGVyTWFwKSlcclxuICAgICAge1xyXG4gICAgICAgIGlmIChmaWx0ZXIgIT0gbWFwKVxyXG4gICAgICAgICAgdGhpcy5zZXQoZG9tYWluLCBuZXcgRmlsdGVyTWFwKFtbbWFwLCB0cnVlXSwgW2ZpbHRlciwgaW5jbHVkZV1dKSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgbWFwLnNldChmaWx0ZXIsIGluY2x1ZGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGEgZmlsdGVyIGFuZCBhbGwgb2YgaXRzIGRvbWFpbnMgZnJvbSB0aGUgb2JqZWN0LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5BY3RpdmVGaWx0ZXJ9IGZpbHRlciBUaGUgZmlsdGVyLlxyXG4gICAqIEBwYXJhbSB7TWFwLjxzdHJpbmcsIGJvb2xlYW4+fSBbZG9tYWluc10gVGhlIGZpbHRlcidzIGRvbWFpbnMuIElmIG5vdFxyXG4gICAqICAgZ2l2ZW4sIHRoZSBge0BsaW5rIG1vZHVsZTpmaWx0ZXJDbGFzc2VzLkFjdGl2ZUZpbHRlciNkb21haW5zIGRvbWFpbnN9YFxyXG4gICAqICAgcHJvcGVydHkgb2YgYGZpbHRlcmAgaXMgdXNlZC5cclxuICAgKi9cclxuICByZW1vdmUoZmlsdGVyLCBkb21haW5zID0gZmlsdGVyLmRvbWFpbnMpXHJcbiAge1xyXG4gICAgZm9yIChsZXQgZG9tYWluIG9mIChkb21haW5zIHx8IGRlZmF1bHREb21haW5zKS5rZXlzKCkpXHJcbiAgICB7XHJcbiAgICAgIGxldCBtYXAgPSB0aGlzLmdldChkb21haW4pO1xyXG4gICAgICBpZiAobWFwKVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKG1hcC5zaXplID4gMSB8fCBtYXAgaW5zdGFuY2VvZiBGaWx0ZXJNYXApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbWFwLmRlbGV0ZShmaWx0ZXIpO1xyXG5cclxuICAgICAgICAgIGlmIChtYXAuc2l6ZSA9PSAwKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmRlbGV0ZShkb21haW4pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZiAobWFwLnNpemUgPT0gMSlcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgW2xhc3RGaWx0ZXIsIGluY2x1ZGVdIG9mIG1hcC5lbnRyaWVzKCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAvLyBSZWR1Y2UgTWFwIHsgXCJleGFtcGxlLmNvbVwiID0+IE1hcCB7IGZpbHRlciA9PiB0cnVlIH0gfSB0b1xyXG4gICAgICAgICAgICAgIC8vIE1hcCB7IFwiZXhhbXBsZS5jb21cIiA9PiBmaWx0ZXIgfVxyXG4gICAgICAgICAgICAgIGlmIChpbmNsdWRlKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoZG9tYWluLCBsYXN0RmlsdGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZmlsdGVyID09IG1hcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICB0aGlzLmRlbGV0ZShkb21haW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufTtcclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlICovXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbi8qKlxyXG4gKiBAZmlsZU92ZXJ2aWV3IElOSSBwYXJzaW5nLlxyXG4gKi9cclxuXHJcbmNvbnN0IHtpc0FjdGl2ZUZpbHRlciwgRmlsdGVyfSA9IHJlcXVpcmUoXCIuL2ZpbHRlckNsYXNzZXNcIik7XHJcbmNvbnN0IHtTdWJzY3JpcHRpb259ID0gcmVxdWlyZShcIi4vc3Vic2NyaXB0aW9uQ2xhc3Nlc1wiKTtcclxuY29uc3Qge2ZpbHRlclN0YXRlfSA9IHJlcXVpcmUoXCIuL2ZpbHRlclN0YXRlXCIpO1xyXG5cclxuLyoqXHJcbiAqIFBhcnNlcyBmaWx0ZXIgZGF0YS5cclxuICogQHBhY2thZ2VcclxuICovXHJcbmV4cG9ydHMuSU5JUGFyc2VyID0gY2xhc3MgSU5JUGFyc2VyXHJcbntcclxuICBjb25zdHJ1Y3RvcigpXHJcbiAge1xyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9wZXJ0aWVzIG9mIHRoZSBmaWx0ZXIgZGF0YS5cclxuICAgICAqIEB0eXBlIHtvYmplY3R9XHJcbiAgICAgKi9cclxuICAgIHRoaXMuZmlsZVByb3BlcnRpZXMgPSB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBsaXN0IG9mIHN1YnNjcmlwdGlvbnMgaW4gdGhlIGZpbHRlciBkYXRhLlxyXG4gICAgICogQHR5cGUge0FycmF5Ljxtb2R1bGU6c3Vic2NyaXB0aW9uQ2xhc3Nlcy5TdWJzY3JpcHRpb24+fVxyXG4gICAgICovXHJcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcclxuXHJcbiAgICB0aGlzLl93YW50T2JqID0gdHJ1ZTtcclxuICAgIHRoaXMuX2N1ck9iaiA9IHRoaXMuZmlsZVByb3BlcnRpZXM7XHJcbiAgICB0aGlzLl9jdXJTZWN0aW9uID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFByb2Nlc3NlcyBhIGxpbmUgb2YgZmlsdGVyIGRhdGEuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZz99IGxpbmUgVGhlIGxpbmUgb2YgZmlsdGVyIGRhdGEgdG8gcHJvY2Vzcy4gVGhpcyBtYXkgYmVcclxuICAgKiAgIGBudWxsYCwgd2hpY2ggaW5kaWNhdGVzIHRoZSBlbmQgb2YgdGhlIGZpbHRlciBkYXRhLlxyXG4gICAqL1xyXG4gIHByb2Nlc3MobGluZSlcclxuICB7XHJcbiAgICBsZXQgbWF0Y2ggPSBudWxsO1xyXG4gICAgaWYgKHRoaXMuX3dhbnRPYmogPT09IHRydWUgJiYgKG1hdGNoID0gL14oXFx3Kyk9KC4qKSQvLmV4ZWMobGluZSkpKVxyXG4gICAge1xyXG4gICAgICB0aGlzLl9jdXJPYmpbbWF0Y2hbMV1dID0gbWF0Y2hbMl07XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsaW5lID09PSBudWxsIHx8IChtYXRjaCA9IC9eXFxzKlxcWyguKylcXF1cXHMqJC8uZXhlYyhsaW5lKSkpXHJcbiAgICB7XHJcbiAgICAgIGlmICh0aGlzLl9jdXJPYmopXHJcbiAgICAgIHtcclxuICAgICAgICAvLyBQcm9jZXNzIGN1cnJlbnQgb2JqZWN0IGJlZm9yZSBnb2luZyB0byBuZXh0IHNlY3Rpb25cclxuICAgICAgICBzd2l0Y2ggKHRoaXMuX2N1clNlY3Rpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY2FzZSBcImZpbHRlclwiOlxyXG4gICAgICAgICAgICBpZiAoXCJ0ZXh0XCIgaW4gdGhpcy5fY3VyT2JqKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgbGV0IHt0ZXh0fSA9IHRoaXMuX2N1ck9iajtcclxuICAgICAgICAgICAgICBpZiAoaXNBY3RpdmVGaWx0ZXIoRmlsdGVyLmZyb21UZXh0KHRleHQpKSlcclxuICAgICAgICAgICAgICAgIGZpbHRlclN0YXRlLmZyb21PYmplY3QodGV4dCwgdGhpcy5fY3VyT2JqKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICBjYXNlIFwic3Vic2NyaXB0aW9uXCI6XHJcbiAgICAgICAgICAgIGxldCBzdWJzY3JpcHRpb24gPSBTdWJzY3JpcHRpb24uZnJvbU9iamVjdCh0aGlzLl9jdXJPYmopO1xyXG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKVxyXG4gICAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgIGNhc2UgXCJzdWJzY3JpcHRpb24gZmlsdGVyc1wiOlxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGxldCBjdXJyZW50U3Vic2NyaXB0aW9uID0gdGhpcy5zdWJzY3JpcHRpb25zW1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aCAtIDFcclxuICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgIGN1cnJlbnRTdWJzY3JpcHRpb24udXBkYXRlRmlsdGVyVGV4dCh0aGlzLl9jdXJPYmopO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGxpbmUgPT09IG51bGwpXHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgdGhpcy5fY3VyU2VjdGlvbiA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIHN3aXRjaCAodGhpcy5fY3VyU2VjdGlvbilcclxuICAgICAge1xyXG4gICAgICAgIGNhc2UgXCJmaWx0ZXJcIjpcclxuICAgICAgICBjYXNlIFwic3Vic2NyaXB0aW9uXCI6XHJcbiAgICAgICAgICB0aGlzLl93YW50T2JqID0gdHJ1ZTtcclxuICAgICAgICAgIHRoaXMuX2N1ck9iaiA9IHt9O1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcInN1YnNjcmlwdGlvbiBmaWx0ZXJzXCI6XHJcbiAgICAgICAgICB0aGlzLl93YW50T2JqID0gZmFsc2U7XHJcbiAgICAgICAgICB0aGlzLl9jdXJPYmogPSBbXTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICB0aGlzLl93YW50T2JqID0gbnVsbDtcclxuICAgICAgICAgIHRoaXMuX2N1ck9iaiA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMuX3dhbnRPYmogPT09IGZhbHNlICYmIGxpbmUpXHJcbiAgICB7XHJcbiAgICAgIHRoaXMuX2N1ck9iai5wdXNoKGxpbmUucmVwbGFjZSgvXFxcXFxcWy9nLCBcIltcIikpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuIiwiLypcclxuICogQ29weXJpZ2h0IChjKSAyMDAzLTIwMDUgIFRvbSBXdVxyXG4gKiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKlxyXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmdcclxuICogYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXHJcbiAqIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xyXG4gKiB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXHJcbiAqIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xyXG4gKiBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG9cclxuICogdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxyXG4gKlxyXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxyXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuICpcclxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMtSVNcIiBBTkQgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcclxuICogRVhQUkVTUywgSU1QTElFRCBPUiBPVEhFUldJU0UsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04sIEFOWVxyXG4gKiBXQVJSQU5UWSBPRiBNRVJDSEFOVEFCSUxJVFkgT1IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuXHJcbiAqXHJcbiAqIElOIE5PIEVWRU5UIFNIQUxMIFRPTSBXVSBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBJTkNJREVOVEFMLFxyXG4gKiBJTkRJUkVDVCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT0YgQU5ZIEtJTkQsIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVJcclxuICogUkVTVUxUSU5HIEZST00gTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBPUiBOT1QgQURWSVNFRCBPRlxyXG4gKiBUSEUgUE9TU0lCSUxJVFkgT0YgREFNQUdFLCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIEFSSVNJTkcgT1VUXHJcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SIFBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbiAqXHJcbiAqIEluIGFkZGl0aW9uLCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbiBhcHBsaWVzOlxyXG4gKlxyXG4gKiBBbGwgcmVkaXN0cmlidXRpb25zIG11c3QgcmV0YWluIGFuIGludGFjdCBjb3B5IG9mIHRoaXMgY29weXJpZ2h0IG5vdGljZVxyXG4gKiBhbmQgZGlzY2xhaW1lci5cclxuICovXHJcblxyXG4vLyBCYXNpYyBKYXZhU2NyaXB0IEJOIGxpYnJhcnkgLSBzdWJzZXQgdXNlZnVsIGZvciBSU0EgZW5jcnlwdGlvbi5cclxuXHJcbi8vIEJpdHMgcGVyIGRpZ2l0XHJcbnZhciBkYml0cztcclxuXHJcbi8vIEphdmFTY3JpcHQgZW5naW5lIGFuYWx5c2lzXHJcbnZhciBjYW5hcnkgPSAweGRlYWRiZWVmY2FmZTtcclxudmFyIGpfbG0gPSAoKGNhbmFyeSYweGZmZmZmZik9PTB4ZWZjYWZlKTtcclxuXHJcbi8vIChwdWJsaWMpIENvbnN0cnVjdG9yXHJcbmxldCBCaWdJbnRlZ2VyID0gZXhwb3J0cy5CaWdJbnRlZ2VyID0gZnVuY3Rpb24gQmlnSW50ZWdlcihhLGIsYykge1xyXG4gIGlmKGEgIT0gbnVsbClcclxuICAgIGlmKFwibnVtYmVyXCIgPT0gdHlwZW9mIGEpIHRoaXMuZnJvbU51bWJlcihhLGIsYyk7XHJcbiAgICBlbHNlIGlmKGIgPT0gbnVsbCAmJiBcInN0cmluZ1wiICE9IHR5cGVvZiBhKSB0aGlzLmZyb21TdHJpbmcoYSwyNTYpO1xyXG4gICAgZWxzZSB0aGlzLmZyb21TdHJpbmcoYSxiKTtcclxufTtcclxuXHJcbi8vIHJldHVybiBuZXcsIHVuc2V0IEJpZ0ludGVnZXJcclxuZnVuY3Rpb24gbmJpKCkgeyByZXR1cm4gbmV3IEJpZ0ludGVnZXIobnVsbCk7IH1cclxuXHJcbi8vIGFtOiBDb21wdXRlIHdfaiArPSAoeCp0aGlzX2kpLCBwcm9wYWdhdGUgY2FycmllcyxcclxuLy8gYyBpcyBpbml0aWFsIGNhcnJ5LCByZXR1cm5zIGZpbmFsIGNhcnJ5LlxyXG4vLyBjIDwgMypkdmFsdWUsIHggPCAyKmR2YWx1ZSwgdGhpc19pIDwgZHZhbHVlXHJcbi8vIFdlIG5lZWQgdG8gc2VsZWN0IHRoZSBmYXN0ZXN0IG9uZSB0aGF0IHdvcmtzIGluIHRoaXMgZW52aXJvbm1lbnQuXHJcblxyXG4vLyBhbTE6IHVzZSBhIHNpbmdsZSBtdWx0IGFuZCBkaXZpZGUgdG8gZ2V0IHRoZSBoaWdoIGJpdHMsXHJcbi8vIG1heCBkaWdpdCBiaXRzIHNob3VsZCBiZSAyNiBiZWNhdXNlXHJcbi8vIG1heCBpbnRlcm5hbCB2YWx1ZSA9IDIqZHZhbHVlXjItMipkdmFsdWUgKDwgMl41MylcclxuZnVuY3Rpb24gYW0xKGkseCx3LGosYyxuKSB7XHJcbiAgd2hpbGUoLS1uID49IDApIHtcclxuICAgIHZhciB2ID0geCp0aGlzW2krK10rd1tqXStjO1xyXG4gICAgYyA9IE1hdGguZmxvb3Iodi8weDQwMDAwMDApO1xyXG4gICAgd1tqKytdID0gdiYweDNmZmZmZmY7XHJcbiAgfVxyXG4gIHJldHVybiBjO1xyXG59XHJcbi8vIGFtMiBhdm9pZHMgYSBiaWcgbXVsdC1hbmQtZXh0cmFjdCBjb21wbGV0ZWx5LlxyXG4vLyBNYXggZGlnaXQgYml0cyBzaG91bGQgYmUgPD0gMzAgYmVjYXVzZSB3ZSBkbyBiaXR3aXNlIG9wc1xyXG4vLyBvbiB2YWx1ZXMgdXAgdG8gMipoZHZhbHVlXjItaGR2YWx1ZS0xICg8IDJeMzEpXHJcbmZ1bmN0aW9uIGFtMihpLHgsdyxqLGMsbikge1xyXG4gIHZhciB4bCA9IHgmMHg3ZmZmLCB4aCA9IHg+PjE1O1xyXG4gIHdoaWxlKC0tbiA+PSAwKSB7XHJcbiAgICB2YXIgbCA9IHRoaXNbaV0mMHg3ZmZmO1xyXG4gICAgdmFyIGggPSB0aGlzW2krK10+PjE1O1xyXG4gICAgdmFyIG0gPSB4aCpsK2gqeGw7XHJcbiAgICBsID0geGwqbCsoKG0mMHg3ZmZmKTw8MTUpK3dbal0rKGMmMHgzZmZmZmZmZik7XHJcbiAgICBjID0gKGw+Pj4zMCkrKG0+Pj4xNSkreGgqaCsoYz4+PjMwKTtcclxuICAgIHdbaisrXSA9IGwmMHgzZmZmZmZmZjtcclxuICB9XHJcbiAgcmV0dXJuIGM7XHJcbn1cclxuLy8gQWx0ZXJuYXRlbHksIHNldCBtYXggZGlnaXQgYml0cyB0byAyOCBzaW5jZSBzb21lXHJcbi8vIGJyb3dzZXJzIHNsb3cgZG93biB3aGVuIGRlYWxpbmcgd2l0aCAzMi1iaXQgbnVtYmVycy5cclxuZnVuY3Rpb24gYW0zKGkseCx3LGosYyxuKSB7XHJcbiAgdmFyIHhsID0geCYweDNmZmYsIHhoID0geD4+MTQ7XHJcbiAgd2hpbGUoLS1uID49IDApIHtcclxuICAgIHZhciBsID0gdGhpc1tpXSYweDNmZmY7XHJcbiAgICB2YXIgaCA9IHRoaXNbaSsrXT4+MTQ7XHJcbiAgICB2YXIgbSA9IHhoKmwraCp4bDtcclxuICAgIGwgPSB4bCpsKygobSYweDNmZmYpPDwxNCkrd1tqXStjO1xyXG4gICAgYyA9IChsPj4yOCkrKG0+PjE0KSt4aCpoO1xyXG4gICAgd1tqKytdID0gbCYweGZmZmZmZmY7XHJcbiAgfVxyXG4gIHJldHVybiBjO1xyXG59XHJcbmlmKGpfbG0gJiYgKG5hdmlnYXRvci5hcHBOYW1lID09IFwiTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyXCIpKSB7XHJcbiAgQmlnSW50ZWdlci5wcm90b3R5cGUuYW0gPSBhbTI7XHJcbiAgZGJpdHMgPSAzMDtcclxufVxyXG5lbHNlIGlmKGpfbG0gJiYgKG5hdmlnYXRvci5hcHBOYW1lICE9IFwiTmV0c2NhcGVcIikpIHtcclxuICBCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbSA9IGFtMTtcclxuICBkYml0cyA9IDI2O1xyXG59XHJcbmVsc2UgeyAvLyBNb3ppbGxhL05ldHNjYXBlIHNlZW1zIHRvIHByZWZlciBhbTNcclxuICBCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbSA9IGFtMztcclxuICBkYml0cyA9IDI4O1xyXG59XHJcblxyXG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5EQiA9IGRiaXRzO1xyXG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5ETSA9ICgoMTw8ZGJpdHMpLTEpO1xyXG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5EViA9ICgxPDxkYml0cyk7XHJcblxyXG52YXIgQklfRlAgPSA1MjtcclxuQmlnSW50ZWdlci5wcm90b3R5cGUuRlYgPSBNYXRoLnBvdygyLEJJX0ZQKTtcclxuQmlnSW50ZWdlci5wcm90b3R5cGUuRjEgPSBCSV9GUC1kYml0cztcclxuQmlnSW50ZWdlci5wcm90b3R5cGUuRjIgPSAyKmRiaXRzLUJJX0ZQO1xyXG5cclxuLy8gRGlnaXQgY29udmVyc2lvbnNcclxudmFyIEJJX1JNID0gXCIwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIjtcclxudmFyIEJJX1JDID0gbmV3IEFycmF5KCk7XHJcbnZhciBycix2djtcclxucnIgPSBcIjBcIi5jaGFyQ29kZUF0KDApO1xyXG5mb3IodnYgPSAwOyB2diA8PSA5OyArK3Z2KSBCSV9SQ1tycisrXSA9IHZ2O1xyXG5yciA9IFwiYVwiLmNoYXJDb2RlQXQoMCk7XHJcbmZvcih2diA9IDEwOyB2diA8IDM2OyArK3Z2KSBCSV9SQ1tycisrXSA9IHZ2O1xyXG5yciA9IFwiQVwiLmNoYXJDb2RlQXQoMCk7XHJcbmZvcih2diA9IDEwOyB2diA8IDM2OyArK3Z2KSBCSV9SQ1tycisrXSA9IHZ2O1xyXG5cclxuZnVuY3Rpb24gaW50MmNoYXIobikgeyByZXR1cm4gQklfUk0uY2hhckF0KG4pOyB9XHJcbmZ1bmN0aW9uIGludEF0KHMsaSkge1xyXG4gIHZhciBjID0gQklfUkNbcy5jaGFyQ29kZUF0KGkpXTtcclxuICByZXR1cm4gKGM9PW51bGwpPy0xOmM7XHJcbn1cclxuXHJcbi8vIChwcm90ZWN0ZWQpIGNvcHkgdGhpcyB0byByXHJcbmZ1bmN0aW9uIGJucENvcHlUbyhyKSB7XHJcbiAgZm9yKHZhciBpID0gdGhpcy50LTE7IGkgPj0gMDsgLS1pKSByW2ldID0gdGhpc1tpXTtcclxuICByLnQgPSB0aGlzLnQ7XHJcbiAgci5zID0gdGhpcy5zO1xyXG59XHJcblxyXG4vLyAocHJvdGVjdGVkKSBzZXQgZnJvbSBpbnRlZ2VyIHZhbHVlIHgsIC1EViA8PSB4IDwgRFZcclxuZnVuY3Rpb24gYm5wRnJvbUludCh4KSB7XHJcbiAgdGhpcy50ID0gMTtcclxuICB0aGlzLnMgPSAoeDwwKT8tMTowO1xyXG4gIGlmKHggPiAwKSB0aGlzWzBdID0geDtcclxuICBlbHNlIGlmKHggPCAtMSkgdGhpc1swXSA9IHgrRFY7XHJcbiAgZWxzZSB0aGlzLnQgPSAwO1xyXG59XHJcblxyXG4vLyByZXR1cm4gYmlnaW50IGluaXRpYWxpemVkIHRvIHZhbHVlXHJcbmZ1bmN0aW9uIG5idihpKSB7IHZhciByID0gbmJpKCk7IHIuZnJvbUludChpKTsgcmV0dXJuIHI7IH1cclxuXHJcbi8vIChwcm90ZWN0ZWQpIHNldCBmcm9tIHN0cmluZyBhbmQgcmFkaXhcclxuZnVuY3Rpb24gYm5wRnJvbVN0cmluZyhzLGIpIHtcclxuICB2YXIgaztcclxuICBpZihiID09IDE2KSBrID0gNDtcclxuICBlbHNlIGlmKGIgPT0gOCkgayA9IDM7XHJcbiAgZWxzZSBpZihiID09IDI1NikgayA9IDg7IC8vIGJ5dGUgYXJyYXlcclxuICBlbHNlIGlmKGIgPT0gMikgayA9IDE7XHJcbiAgZWxzZSBpZihiID09IDMyKSBrID0gNTtcclxuICBlbHNlIGlmKGIgPT0gNCkgayA9IDI7XHJcbiAgZWxzZSB7IHRoaXMuZnJvbVJhZGl4KHMsYik7IHJldHVybjsgfVxyXG4gIHRoaXMudCA9IDA7XHJcbiAgdGhpcy5zID0gMDtcclxuICB2YXIgaSA9IHMubGVuZ3RoLCBtaSA9IGZhbHNlLCBzaCA9IDA7XHJcbiAgd2hpbGUoLS1pID49IDApIHtcclxuICAgIHZhciB4ID0gKGs9PTgpP3MuY2hhckNvZGVBdChpKSYweGZmOmludEF0KHMsaSk7ICAgLyoqIE1PRElGSUVEICoqL1xyXG4gICAgaWYoeCA8IDApIHtcclxuICAgICAgaWYocy5jaGFyQXQoaSkgPT0gXCItXCIpIG1pID0gdHJ1ZTtcclxuICAgICAgY29udGludWU7XHJcbiAgICB9XHJcbiAgICBtaSA9IGZhbHNlO1xyXG4gICAgaWYoc2ggPT0gMClcclxuICAgICAgdGhpc1t0aGlzLnQrK10gPSB4O1xyXG4gICAgZWxzZSBpZihzaCtrID4gdGhpcy5EQikge1xyXG4gICAgICB0aGlzW3RoaXMudC0xXSB8PSAoeCYoKDE8PCh0aGlzLkRCLXNoKSktMSkpPDxzaDtcclxuICAgICAgdGhpc1t0aGlzLnQrK10gPSAoeD4+KHRoaXMuREItc2gpKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgICAgdGhpc1t0aGlzLnQtMV0gfD0geDw8c2g7XHJcbiAgICBzaCArPSBrO1xyXG4gICAgaWYoc2ggPj0gdGhpcy5EQikgc2ggLT0gdGhpcy5EQjtcclxuICB9XHJcbiAgaWYoayA9PSA4ICYmIChzWzBdJjB4ODApICE9IDApIHtcclxuICAgIHRoaXMucyA9IC0xO1xyXG4gICAgaWYoc2ggPiAwKSB0aGlzW3RoaXMudC0xXSB8PSAoKDE8PCh0aGlzLkRCLXNoKSktMSk8PHNoO1xyXG4gIH1cclxuICB0aGlzLmNsYW1wKCk7XHJcbiAgaWYobWkpIEJpZ0ludGVnZXIuWkVSTy5zdWJUbyh0aGlzLHRoaXMpO1xyXG59XHJcblxyXG4vLyAocHJvdGVjdGVkKSBjbGFtcCBvZmYgZXhjZXNzIGhpZ2ggd29yZHNcclxuZnVuY3Rpb24gYm5wQ2xhbXAoKSB7XHJcbiAgdmFyIGMgPSB0aGlzLnMmdGhpcy5ETTtcclxuICB3aGlsZSh0aGlzLnQgPiAwICYmIHRoaXNbdGhpcy50LTFdID09IGMpIC0tdGhpcy50O1xyXG59XHJcblxyXG4vLyAocHVibGljKSByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIGluIGdpdmVuIHJhZGl4XHJcbmZ1bmN0aW9uIGJuVG9TdHJpbmcoYikge1xyXG4gIGlmKHRoaXMucyA8IDApIHJldHVybiBcIi1cIit0aGlzLm5lZ2F0ZSgpLnRvU3RyaW5nKGIpO1xyXG4gIHZhciBrO1xyXG4gIGlmKGIgPT0gMTYpIGsgPSA0O1xyXG4gIGVsc2UgaWYoYiA9PSA4KSBrID0gMztcclxuICBlbHNlIGlmKGIgPT0gMjU2KSBrID0gODsgLy8gYnl0ZSBhcnJheSAgICAgIC8qKiBNT0RJRklFRCAqKi9cclxuICBlbHNlIGlmKGIgPT0gMikgayA9IDE7XHJcbiAgZWxzZSBpZihiID09IDMyKSBrID0gNTtcclxuICBlbHNlIGlmKGIgPT0gNCkgayA9IDI7XHJcbiAgZWxzZSByZXR1cm4gdGhpcy50b1JhZGl4KGIpO1xyXG4gIHZhciBrbSA9ICgxPDxrKS0xLCBkLCBtID0gZmFsc2UsIHIgPSBcIlwiLCBpID0gdGhpcy50O1xyXG4gIHZhciBwID0gdGhpcy5EQi0oaSp0aGlzLkRCKSVrO1xyXG4gIGlmKGktLSA+IDApIHtcclxuICAgIGlmKHAgPCB0aGlzLkRCICYmIChkID0gdGhpc1tpXT4+cCkgPiAwKSB7IG0gPSB0cnVlOyByID0gKGs9PTgpP1N0cmluZy5mcm9tQ2hhckNvZGUoZCk6aW50MmNoYXIoZCk7IH0gICAvKiogTU9ESUZJRUQgKiovXHJcbiAgICB3aGlsZShpID49IDApIHtcclxuICAgICAgaWYocCA8IGspIHtcclxuICAgICAgICBkID0gKHRoaXNbaV0mKCgxPDxwKS0xKSk8PChrLXApO1xyXG4gICAgICAgIGQgfD0gdGhpc1stLWldPj4ocCs9dGhpcy5EQi1rKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBkID0gKHRoaXNbaV0+PihwLT1rKSkma207XHJcbiAgICAgICAgaWYocCA8PSAwKSB7IHAgKz0gdGhpcy5EQjsgLS1pOyB9XHJcbiAgICAgIH1cclxuICAgICAgaWYoZCA+IDApIG0gPSB0cnVlO1xyXG4gICAgICBpZihtKSByICs9IChrPT04KT9TdHJpbmcuZnJvbUNoYXJDb2RlKGQpOmludDJjaGFyKGQpOyAgICAvKiogTU9ESUZJRUQgKiovXHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBtP3I6XCIwXCI7XHJcbn1cclxuXHJcbi8vIChwdWJsaWMpIC10aGlzXHJcbmZ1bmN0aW9uIGJuTmVnYXRlKCkgeyB2YXIgciA9IG5iaSgpOyBCaWdJbnRlZ2VyLlpFUk8uc3ViVG8odGhpcyxyKTsgcmV0dXJuIHI7IH1cclxuXHJcbi8vIChwdWJsaWMpIHx0aGlzfFxyXG5mdW5jdGlvbiBibkFicygpIHsgcmV0dXJuICh0aGlzLnM8MCk/dGhpcy5uZWdhdGUoKTp0aGlzOyB9XHJcblxyXG4vLyAocHVibGljKSByZXR1cm4gKyBpZiB0aGlzID4gYSwgLSBpZiB0aGlzIDwgYSwgMCBpZiBlcXVhbFxyXG5mdW5jdGlvbiBibkNvbXBhcmVUbyhhKSB7XHJcbiAgdmFyIHIgPSB0aGlzLnMtYS5zO1xyXG4gIGlmKHIgIT0gMCkgcmV0dXJuIHI7XHJcbiAgdmFyIGkgPSB0aGlzLnQ7XHJcbiAgciA9IGktYS50O1xyXG4gIGlmKHIgIT0gMCkgcmV0dXJuIHI7XHJcbiAgd2hpbGUoLS1pID49IDApIGlmKChyPXRoaXNbaV0tYVtpXSkgIT0gMCkgcmV0dXJuIHI7XHJcbiAgcmV0dXJuIDA7XHJcbn1cclxuXHJcbi8vIHJldHVybnMgYml0IGxlbmd0aCBvZiB0aGUgaW50ZWdlciB4XHJcbmZ1bmN0aW9uIG5iaXRzKHgpIHtcclxuICB2YXIgciA9IDEsIHQ7XHJcbiAgaWYoKHQ9eD4+PjE2KSAhPSAwKSB7IHggPSB0OyByICs9IDE2OyB9XHJcbiAgaWYoKHQ9eD4+OCkgIT0gMCkgeyB4ID0gdDsgciArPSA4OyB9XHJcbiAgaWYoKHQ9eD4+NCkgIT0gMCkgeyB4ID0gdDsgciArPSA0OyB9XHJcbiAgaWYoKHQ9eD4+MikgIT0gMCkgeyB4ID0gdDsgciArPSAyOyB9XHJcbiAgaWYoKHQ9eD4+MSkgIT0gMCkgeyB4ID0gdDsgciArPSAxOyB9XHJcbiAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbi8vIChwdWJsaWMpIHJldHVybiB0aGUgbnVtYmVyIG9mIGJpdHMgaW4gXCJ0aGlzXCJcclxuZnVuY3Rpb24gYm5CaXRMZW5ndGgoKSB7XHJcbiAgaWYodGhpcy50IDw9IDApIHJldHVybiAwO1xyXG4gIHJldHVybiB0aGlzLkRCKih0aGlzLnQtMSkrbmJpdHModGhpc1t0aGlzLnQtMV1eKHRoaXMucyZ0aGlzLkRNKSk7XHJcbn1cclxuXHJcbi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzIDw8IG4qREJcclxuZnVuY3Rpb24gYm5wRExTaGlmdFRvKG4scikge1xyXG4gIHZhciBpO1xyXG4gIGZvcihpID0gdGhpcy50LTE7IGkgPj0gMDsgLS1pKSByW2krbl0gPSB0aGlzW2ldO1xyXG4gIGZvcihpID0gbi0xOyBpID49IDA7IC0taSkgcltpXSA9IDA7XHJcbiAgci50ID0gdGhpcy50K247XHJcbiAgci5zID0gdGhpcy5zO1xyXG59XHJcblxyXG4vLyAocHJvdGVjdGVkKSByID0gdGhpcyA+PiBuKkRCXHJcbmZ1bmN0aW9uIGJucERSU2hpZnRUbyhuLHIpIHtcclxuICBmb3IodmFyIGkgPSBuOyBpIDwgdGhpcy50OyArK2kpIHJbaS1uXSA9IHRoaXNbaV07XHJcbiAgci50ID0gTWF0aC5tYXgodGhpcy50LW4sMCk7XHJcbiAgci5zID0gdGhpcy5zO1xyXG59XHJcblxyXG4vLyAocHJvdGVjdGVkKSByID0gdGhpcyA8PCBuXHJcbmZ1bmN0aW9uIGJucExTaGlmdFRvKG4scikge1xyXG4gIHZhciBicyA9IG4ldGhpcy5EQjtcclxuICB2YXIgY2JzID0gdGhpcy5EQi1icztcclxuICB2YXIgYm0gPSAoMTw8Y2JzKS0xO1xyXG4gIHZhciBkcyA9IE1hdGguZmxvb3Iobi90aGlzLkRCKSwgYyA9ICh0aGlzLnM8PGJzKSZ0aGlzLkRNLCBpO1xyXG4gIGZvcihpID0gdGhpcy50LTE7IGkgPj0gMDsgLS1pKSB7XHJcbiAgICByW2krZHMrMV0gPSAodGhpc1tpXT4+Y2JzKXxjO1xyXG4gICAgYyA9ICh0aGlzW2ldJmJtKTw8YnM7XHJcbiAgfVxyXG4gIGZvcihpID0gZHMtMTsgaSA+PSAwOyAtLWkpIHJbaV0gPSAwO1xyXG4gIHJbZHNdID0gYztcclxuICByLnQgPSB0aGlzLnQrZHMrMTtcclxuICByLnMgPSB0aGlzLnM7XHJcbiAgci5jbGFtcCgpO1xyXG59XHJcblxyXG4vLyAocHJvdGVjdGVkKSByID0gdGhpcyA+PiBuXHJcbmZ1bmN0aW9uIGJucFJTaGlmdFRvKG4scikge1xyXG4gIHIucyA9IHRoaXMucztcclxuICB2YXIgZHMgPSBNYXRoLmZsb29yKG4vdGhpcy5EQik7XHJcbiAgaWYoZHMgPj0gdGhpcy50KSB7IHIudCA9IDA7IHJldHVybjsgfVxyXG4gIHZhciBicyA9IG4ldGhpcy5EQjtcclxuICB2YXIgY2JzID0gdGhpcy5EQi1icztcclxuICB2YXIgYm0gPSAoMTw8YnMpLTE7XHJcbiAgclswXSA9IHRoaXNbZHNdPj5icztcclxuICBmb3IodmFyIGkgPSBkcysxOyBpIDwgdGhpcy50OyArK2kpIHtcclxuICAgIHJbaS1kcy0xXSB8PSAodGhpc1tpXSZibSk8PGNicztcclxuICAgIHJbaS1kc10gPSB0aGlzW2ldPj5icztcclxuICB9XHJcbiAgaWYoYnMgPiAwKSByW3RoaXMudC1kcy0xXSB8PSAodGhpcy5zJmJtKTw8Y2JzO1xyXG4gIHIudCA9IHRoaXMudC1kcztcclxuICByLmNsYW1wKCk7XHJcbn1cclxuXHJcbi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzIC0gYVxyXG5mdW5jdGlvbiBibnBTdWJUbyhhLHIpIHtcclxuICB2YXIgaSA9IDAsIGMgPSAwLCBtID0gTWF0aC5taW4oYS50LHRoaXMudCk7XHJcbiAgd2hpbGUoaSA8IG0pIHtcclxuICAgIGMgKz0gdGhpc1tpXS1hW2ldO1xyXG4gICAgcltpKytdID0gYyZ0aGlzLkRNO1xyXG4gICAgYyA+Pj0gdGhpcy5EQjtcclxuICB9XHJcbiAgaWYoYS50IDwgdGhpcy50KSB7XHJcbiAgICBjIC09IGEucztcclxuICAgIHdoaWxlKGkgPCB0aGlzLnQpIHtcclxuICAgICAgYyArPSB0aGlzW2ldO1xyXG4gICAgICByW2krK10gPSBjJnRoaXMuRE07XHJcbiAgICAgIGMgPj49IHRoaXMuREI7XHJcbiAgICB9XHJcbiAgICBjICs9IHRoaXMucztcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICBjICs9IHRoaXMucztcclxuICAgIHdoaWxlKGkgPCBhLnQpIHtcclxuICAgICAgYyAtPSBhW2ldO1xyXG4gICAgICByW2krK10gPSBjJnRoaXMuRE07XHJcbiAgICAgIGMgPj49IHRoaXMuREI7XHJcbiAgICB9XHJcbiAgICBjIC09IGEucztcclxuICB9XHJcbiAgci5zID0gKGM8MCk/LTE6MDtcclxuICBpZihjIDwgLTEpIHJbaSsrXSA9IHRoaXMuRFYrYztcclxuICBlbHNlIGlmKGMgPiAwKSByW2krK10gPSBjO1xyXG4gIHIudCA9IGk7XHJcbiAgci5jbGFtcCgpO1xyXG59XHJcblxyXG4vLyAocHJvdGVjdGVkKSByID0gdGhpcyAqIGEsIHIgIT0gdGhpcyxhIChIQUMgMTQuMTIpXHJcbi8vIFwidGhpc1wiIHNob3VsZCBiZSB0aGUgbGFyZ2VyIG9uZSBpZiBhcHByb3ByaWF0ZS5cclxuZnVuY3Rpb24gYm5wTXVsdGlwbHlUbyhhLHIpIHtcclxuICB2YXIgeCA9IHRoaXMuYWJzKCksIHkgPSBhLmFicygpO1xyXG4gIHZhciBpID0geC50O1xyXG4gIHIudCA9IGkreS50O1xyXG4gIHdoaWxlKC0taSA+PSAwKSByW2ldID0gMDtcclxuICBmb3IoaSA9IDA7IGkgPCB5LnQ7ICsraSkgcltpK3gudF0gPSB4LmFtKDAseVtpXSxyLGksMCx4LnQpO1xyXG4gIHIucyA9IDA7XHJcbiAgci5jbGFtcCgpO1xyXG4gIGlmKHRoaXMucyAhPSBhLnMpIEJpZ0ludGVnZXIuWkVSTy5zdWJUbyhyLHIpO1xyXG59XHJcblxyXG4vLyAocHJvdGVjdGVkKSByID0gdGhpc14yLCByICE9IHRoaXMgKEhBQyAxNC4xNilcclxuZnVuY3Rpb24gYm5wU3F1YXJlVG8ocikge1xyXG4gIHZhciB4ID0gdGhpcy5hYnMoKTtcclxuICB2YXIgaSA9IHIudCA9IDIqeC50O1xyXG4gIHdoaWxlKC0taSA+PSAwKSByW2ldID0gMDtcclxuICBmb3IoaSA9IDA7IGkgPCB4LnQtMTsgKytpKSB7XHJcbiAgICB2YXIgYyA9IHguYW0oaSx4W2ldLHIsMippLDAsMSk7XHJcbiAgICBpZigocltpK3gudF0rPXguYW0oaSsxLDIqeFtpXSxyLDIqaSsxLGMseC50LWktMSkpID49IHguRFYpIHtcclxuICAgICAgcltpK3gudF0gLT0geC5EVjtcclxuICAgICAgcltpK3gudCsxXSA9IDE7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmKHIudCA+IDApIHJbci50LTFdICs9IHguYW0oaSx4W2ldLHIsMippLDAsMSk7XHJcbiAgci5zID0gMDtcclxuICByLmNsYW1wKCk7XHJcbn1cclxuXHJcbi8vIChwcm90ZWN0ZWQpIGRpdmlkZSB0aGlzIGJ5IG0sIHF1b3RpZW50IGFuZCByZW1haW5kZXIgdG8gcSwgciAoSEFDIDE0LjIwKVxyXG4vLyByICE9IHEsIHRoaXMgIT0gbS4gIHEgb3IgciBtYXkgYmUgbnVsbC5cclxuZnVuY3Rpb24gYm5wRGl2UmVtVG8obSxxLHIpIHtcclxuICB2YXIgcG0gPSBtLmFicygpO1xyXG4gIGlmKHBtLnQgPD0gMCkgcmV0dXJuO1xyXG4gIHZhciBwdCA9IHRoaXMuYWJzKCk7XHJcbiAgaWYocHQudCA8IHBtLnQpIHtcclxuICAgIGlmKHEgIT0gbnVsbCkgcS5mcm9tSW50KDApO1xyXG4gICAgaWYociAhPSBudWxsKSB0aGlzLmNvcHlUbyhyKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgaWYociA9PSBudWxsKSByID0gbmJpKCk7XHJcbiAgdmFyIHkgPSBuYmkoKSwgdHMgPSB0aGlzLnMsIG1zID0gbS5zO1xyXG4gIHZhciBuc2ggPSB0aGlzLkRCLW5iaXRzKHBtW3BtLnQtMV0pO1x0Ly8gbm9ybWFsaXplIG1vZHVsdXNcclxuICBpZihuc2ggPiAwKSB7IHBtLmxTaGlmdFRvKG5zaCx5KTsgcHQubFNoaWZ0VG8obnNoLHIpOyB9XHJcbiAgZWxzZSB7IHBtLmNvcHlUbyh5KTsgcHQuY29weVRvKHIpOyB9XHJcbiAgdmFyIHlzID0geS50O1xyXG4gIHZhciB5MCA9IHlbeXMtMV07XHJcbiAgaWYoeTAgPT0gMCkgcmV0dXJuO1xyXG4gIHZhciB5dCA9IHkwKigxPDx0aGlzLkYxKSsoKHlzPjEpP3lbeXMtMl0+PnRoaXMuRjI6MCk7XHJcbiAgdmFyIGQxID0gdGhpcy5GVi95dCwgZDIgPSAoMTw8dGhpcy5GMSkveXQsIGUgPSAxPDx0aGlzLkYyO1xyXG4gIHZhciBpID0gci50LCBqID0gaS15cywgdCA9IChxPT1udWxsKT9uYmkoKTpxO1xyXG4gIHkuZGxTaGlmdFRvKGosdCk7XHJcbiAgaWYoci5jb21wYXJlVG8odCkgPj0gMCkge1xyXG4gICAgcltyLnQrK10gPSAxO1xyXG4gICAgci5zdWJUbyh0LHIpO1xyXG4gIH1cclxuICBCaWdJbnRlZ2VyLk9ORS5kbFNoaWZ0VG8oeXMsdCk7XHJcbiAgdC5zdWJUbyh5LHkpO1x0Ly8gXCJuZWdhdGl2ZVwiIHkgc28gd2UgY2FuIHJlcGxhY2Ugc3ViIHdpdGggYW0gbGF0ZXJcclxuICB3aGlsZSh5LnQgPCB5cykgeVt5LnQrK10gPSAwO1xyXG4gIHdoaWxlKC0taiA+PSAwKSB7XHJcbiAgICAvLyBFc3RpbWF0ZSBxdW90aWVudCBkaWdpdFxyXG4gICAgdmFyIHFkID0gKHJbLS1pXT09eTApP3RoaXMuRE06TWF0aC5mbG9vcihyW2ldKmQxKyhyW2ktMV0rZSkqZDIpO1xyXG4gICAgaWYoKHJbaV0rPXkuYW0oMCxxZCxyLGosMCx5cykpIDwgcWQpIHtcdC8vIFRyeSBpdCBvdXRcclxuICAgICAgeS5kbFNoaWZ0VG8oaix0KTtcclxuICAgICAgci5zdWJUbyh0LHIpO1xyXG4gICAgICB3aGlsZShyW2ldIDwgLS1xZCkgci5zdWJUbyh0LHIpO1xyXG4gICAgfVxyXG4gIH1cclxuICBpZihxICE9IG51bGwpIHtcclxuICAgIHIuZHJTaGlmdFRvKHlzLHEpO1xyXG4gICAgaWYodHMgIT0gbXMpIEJpZ0ludGVnZXIuWkVSTy5zdWJUbyhxLHEpO1xyXG4gIH1cclxuICByLnQgPSB5cztcclxuICByLmNsYW1wKCk7XHJcbiAgaWYobnNoID4gMCkgci5yU2hpZnRUbyhuc2gscik7XHQvLyBEZW5vcm1hbGl6ZSByZW1haW5kZXJcclxuICBpZih0cyA8IDApIEJpZ0ludGVnZXIuWkVSTy5zdWJUbyhyLHIpO1xyXG59XHJcblxyXG4vLyAocHVibGljKSB0aGlzIG1vZCBhXHJcbmZ1bmN0aW9uIGJuTW9kKGEpIHtcclxuICB2YXIgciA9IG5iaSgpO1xyXG4gIHRoaXMuYWJzKCkuZGl2UmVtVG8oYSxudWxsLHIpO1xyXG4gIGlmKHRoaXMucyA8IDAgJiYgci5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKSA+IDApIGEuc3ViVG8ocixyKTtcclxuICByZXR1cm4gcjtcclxufVxyXG5cclxuLy8gTW9kdWxhciByZWR1Y3Rpb24gdXNpbmcgXCJjbGFzc2ljXCIgYWxnb3JpdGhtXHJcbmZ1bmN0aW9uIENsYXNzaWMobSkgeyB0aGlzLm0gPSBtOyB9XHJcbmZ1bmN0aW9uIGNDb252ZXJ0KHgpIHtcclxuICBpZih4LnMgPCAwIHx8IHguY29tcGFyZVRvKHRoaXMubSkgPj0gMCkgcmV0dXJuIHgubW9kKHRoaXMubSk7XHJcbiAgZWxzZSByZXR1cm4geDtcclxufVxyXG5mdW5jdGlvbiBjUmV2ZXJ0KHgpIHsgcmV0dXJuIHg7IH1cclxuZnVuY3Rpb24gY1JlZHVjZSh4KSB7IHguZGl2UmVtVG8odGhpcy5tLG51bGwseCk7IH1cclxuZnVuY3Rpb24gY011bFRvKHgseSxyKSB7IHgubXVsdGlwbHlUbyh5LHIpOyB0aGlzLnJlZHVjZShyKTsgfVxyXG5mdW5jdGlvbiBjU3FyVG8oeCxyKSB7IHguc3F1YXJlVG8ocik7IHRoaXMucmVkdWNlKHIpOyB9XHJcblxyXG5DbGFzc2ljLnByb3RvdHlwZS5jb252ZXJ0ID0gY0NvbnZlcnQ7XHJcbkNsYXNzaWMucHJvdG90eXBlLnJldmVydCA9IGNSZXZlcnQ7XHJcbkNsYXNzaWMucHJvdG90eXBlLnJlZHVjZSA9IGNSZWR1Y2U7XHJcbkNsYXNzaWMucHJvdG90eXBlLm11bFRvID0gY011bFRvO1xyXG5DbGFzc2ljLnByb3RvdHlwZS5zcXJUbyA9IGNTcXJUbztcclxuXHJcbi8vIChwcm90ZWN0ZWQpIHJldHVybiBcIi0xL3RoaXMgJSAyXkRCXCI7IHVzZWZ1bCBmb3IgTW9udC4gcmVkdWN0aW9uXHJcbi8vIGp1c3RpZmljYXRpb246XHJcbi8vICAgICAgICAgeHkgPT0gMSAobW9kIG0pXHJcbi8vICAgICAgICAgeHkgPSAgMStrbVxyXG4vLyAgIHh5KDIteHkpID0gKDEra20pKDEta20pXHJcbi8vIHhbeSgyLXh5KV0gPSAxLWteMm1eMlxyXG4vLyB4W3koMi14eSldID09IDEgKG1vZCBtXjIpXHJcbi8vIGlmIHkgaXMgMS94IG1vZCBtLCB0aGVuIHkoMi14eSkgaXMgMS94IG1vZCBtXjJcclxuLy8gc2hvdWxkIHJlZHVjZSB4IGFuZCB5KDIteHkpIGJ5IG1eMiBhdCBlYWNoIHN0ZXAgdG8ga2VlcCBzaXplIGJvdW5kZWQuXHJcbi8vIEpTIG11bHRpcGx5IFwib3ZlcmZsb3dzXCIgZGlmZmVyZW50bHkgZnJvbSBDL0MrKywgc28gY2FyZSBpcyBuZWVkZWQgaGVyZS5cclxuZnVuY3Rpb24gYm5wSW52RGlnaXQoKSB7XHJcbiAgaWYodGhpcy50IDwgMSkgcmV0dXJuIDA7XHJcbiAgdmFyIHggPSB0aGlzWzBdO1xyXG4gIGlmKCh4JjEpID09IDApIHJldHVybiAwO1xyXG4gIHZhciB5ID0geCYzO1x0XHQvLyB5ID09IDEveCBtb2QgMl4yXHJcbiAgeSA9ICh5KigyLSh4JjB4ZikqeSkpJjB4ZjtcdC8vIHkgPT0gMS94IG1vZCAyXjRcclxuICB5ID0gKHkqKDItKHgmMHhmZikqeSkpJjB4ZmY7XHQvLyB5ID09IDEveCBtb2QgMl44XHJcbiAgeSA9ICh5KigyLSgoKHgmMHhmZmZmKSp5KSYweGZmZmYpKSkmMHhmZmZmO1x0Ly8geSA9PSAxL3ggbW9kIDJeMTZcclxuICAvLyBsYXN0IHN0ZXAgLSBjYWxjdWxhdGUgaW52ZXJzZSBtb2QgRFYgZGlyZWN0bHk7XHJcbiAgLy8gYXNzdW1lcyAxNiA8IERCIDw9IDMyIGFuZCBhc3N1bWVzIGFiaWxpdHkgdG8gaGFuZGxlIDQ4LWJpdCBpbnRzXHJcbiAgeSA9ICh5KigyLXgqeSV0aGlzLkRWKSkldGhpcy5EVjtcdFx0Ly8geSA9PSAxL3ggbW9kIDJeZGJpdHNcclxuICAvLyB3ZSByZWFsbHkgd2FudCB0aGUgbmVnYXRpdmUgaW52ZXJzZSwgYW5kIC1EViA8IHkgPCBEVlxyXG4gIHJldHVybiAoeT4wKT90aGlzLkRWLXk6LXk7XHJcbn1cclxuXHJcbi8vIE1vbnRnb21lcnkgcmVkdWN0aW9uXHJcbmZ1bmN0aW9uIE1vbnRnb21lcnkobSkge1xyXG4gIHRoaXMubSA9IG07XHJcbiAgdGhpcy5tcCA9IG0uaW52RGlnaXQoKTtcclxuICB0aGlzLm1wbCA9IHRoaXMubXAmMHg3ZmZmO1xyXG4gIHRoaXMubXBoID0gdGhpcy5tcD4+MTU7XHJcbiAgdGhpcy51bSA9ICgxPDwobS5EQi0xNSkpLTE7XHJcbiAgdGhpcy5tdDIgPSAyKm0udDtcclxufVxyXG5cclxuLy8geFIgbW9kIG1cclxuZnVuY3Rpb24gbW9udENvbnZlcnQoeCkge1xyXG4gIHZhciByID0gbmJpKCk7XHJcbiAgeC5hYnMoKS5kbFNoaWZ0VG8odGhpcy5tLnQscik7XHJcbiAgci5kaXZSZW1Ubyh0aGlzLm0sbnVsbCxyKTtcclxuICBpZih4LnMgPCAwICYmIHIuY29tcGFyZVRvKEJpZ0ludGVnZXIuWkVSTykgPiAwKSB0aGlzLm0uc3ViVG8ocixyKTtcclxuICByZXR1cm4gcjtcclxufVxyXG5cclxuLy8geC9SIG1vZCBtXHJcbmZ1bmN0aW9uIG1vbnRSZXZlcnQoeCkge1xyXG4gIHZhciByID0gbmJpKCk7XHJcbiAgeC5jb3B5VG8ocik7XHJcbiAgdGhpcy5yZWR1Y2Uocik7XHJcbiAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbi8vIHggPSB4L1IgbW9kIG0gKEhBQyAxNC4zMilcclxuZnVuY3Rpb24gbW9udFJlZHVjZSh4KSB7XHJcbiAgd2hpbGUoeC50IDw9IHRoaXMubXQyKVx0Ly8gcGFkIHggc28gYW0gaGFzIGVub3VnaCByb29tIGxhdGVyXHJcbiAgICB4W3gudCsrXSA9IDA7XHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMubS50OyArK2kpIHtcclxuICAgIC8vIGZhc3RlciB3YXkgb2YgY2FsY3VsYXRpbmcgdTAgPSB4W2ldKm1wIG1vZCBEVlxyXG4gICAgdmFyIGogPSB4W2ldJjB4N2ZmZjtcclxuICAgIHZhciB1MCA9IChqKnRoaXMubXBsKygoKGoqdGhpcy5tcGgrKHhbaV0+PjE1KSp0aGlzLm1wbCkmdGhpcy51bSk8PDE1KSkmeC5ETTtcclxuICAgIC8vIHVzZSBhbSB0byBjb21iaW5lIHRoZSBtdWx0aXBseS1zaGlmdC1hZGQgaW50byBvbmUgY2FsbFxyXG4gICAgaiA9IGkrdGhpcy5tLnQ7XHJcbiAgICB4W2pdICs9IHRoaXMubS5hbSgwLHUwLHgsaSwwLHRoaXMubS50KTtcclxuICAgIC8vIHByb3BhZ2F0ZSBjYXJyeVxyXG4gICAgd2hpbGUoeFtqXSA+PSB4LkRWKSB7IHhbal0gLT0geC5EVjsgeFsrK2pdKys7IH1cclxuICB9XHJcbiAgeC5jbGFtcCgpO1xyXG4gIHguZHJTaGlmdFRvKHRoaXMubS50LHgpO1xyXG4gIGlmKHguY29tcGFyZVRvKHRoaXMubSkgPj0gMCkgeC5zdWJUbyh0aGlzLm0seCk7XHJcbn1cclxuXHJcbi8vIHIgPSBcInheMi9SIG1vZCBtXCI7IHggIT0gclxyXG5mdW5jdGlvbiBtb250U3FyVG8oeCxyKSB7IHguc3F1YXJlVG8ocik7IHRoaXMucmVkdWNlKHIpOyB9XHJcblxyXG4vLyByID0gXCJ4eS9SIG1vZCBtXCI7IHgseSAhPSByXHJcbmZ1bmN0aW9uIG1vbnRNdWxUbyh4LHkscikgeyB4Lm11bHRpcGx5VG8oeSxyKTsgdGhpcy5yZWR1Y2Uocik7IH1cclxuXHJcbk1vbnRnb21lcnkucHJvdG90eXBlLmNvbnZlcnQgPSBtb250Q29udmVydDtcclxuTW9udGdvbWVyeS5wcm90b3R5cGUucmV2ZXJ0ID0gbW9udFJldmVydDtcclxuTW9udGdvbWVyeS5wcm90b3R5cGUucmVkdWNlID0gbW9udFJlZHVjZTtcclxuTW9udGdvbWVyeS5wcm90b3R5cGUubXVsVG8gPSBtb250TXVsVG87XHJcbk1vbnRnb21lcnkucHJvdG90eXBlLnNxclRvID0gbW9udFNxclRvO1xyXG5cclxuLy8gKHByb3RlY3RlZCkgdHJ1ZSBpZmYgdGhpcyBpcyBldmVuXHJcbmZ1bmN0aW9uIGJucElzRXZlbigpIHsgcmV0dXJuICgodGhpcy50PjApPyh0aGlzWzBdJjEpOnRoaXMucykgPT0gMDsgfVxyXG5cclxuLy8gKHByb3RlY3RlZCkgdGhpc15lLCBlIDwgMl4zMiwgZG9pbmcgc3FyIGFuZCBtdWwgd2l0aCBcInJcIiAoSEFDIDE0Ljc5KVxyXG5mdW5jdGlvbiBibnBFeHAoZSx6KSB7XHJcbiAgaWYoZSA+IDB4ZmZmZmZmZmYgfHwgZSA8IDEpIHJldHVybiBCaWdJbnRlZ2VyLk9ORTtcclxuICB2YXIgciA9IG5iaSgpLCByMiA9IG5iaSgpLCBnID0gei5jb252ZXJ0KHRoaXMpLCBpID0gbmJpdHMoZSktMTtcclxuICBnLmNvcHlUbyhyKTtcclxuICB3aGlsZSgtLWkgPj0gMCkge1xyXG4gICAgei5zcXJUbyhyLHIyKTtcclxuICAgIGlmKChlJigxPDxpKSkgPiAwKSB6Lm11bFRvKHIyLGcscik7XHJcbiAgICBlbHNlIHsgdmFyIHQgPSByOyByID0gcjI7IHIyID0gdDsgfVxyXG4gIH1cclxuICByZXR1cm4gei5yZXZlcnQocik7XHJcbn1cclxuXHJcbi8vIChwdWJsaWMpIHRoaXNeZSAlIG0sIDAgPD0gZSA8IDJeMzJcclxuZnVuY3Rpb24gYm5Nb2RQb3dJbnQoZSxtKSB7XHJcbiAgdmFyIHo7XHJcbiAgaWYoZSA8IDI1NiB8fCBtLmlzRXZlbigpKSB6ID0gbmV3IENsYXNzaWMobSk7IGVsc2UgeiA9IG5ldyBNb250Z29tZXJ5KG0pO1xyXG4gIHJldHVybiB0aGlzLmV4cChlLHopO1xyXG59XHJcblxyXG4vLyBwcm90ZWN0ZWRcclxuQmlnSW50ZWdlci5wcm90b3R5cGUuY29weVRvID0gYm5wQ29weVRvO1xyXG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5mcm9tSW50ID0gYm5wRnJvbUludDtcclxuQmlnSW50ZWdlci5wcm90b3R5cGUuZnJvbVN0cmluZyA9IGJucEZyb21TdHJpbmc7XHJcbkJpZ0ludGVnZXIucHJvdG90eXBlLmNsYW1wID0gYm5wQ2xhbXA7XHJcbkJpZ0ludGVnZXIucHJvdG90eXBlLmRsU2hpZnRUbyA9IGJucERMU2hpZnRUbztcclxuQmlnSW50ZWdlci5wcm90b3R5cGUuZHJTaGlmdFRvID0gYm5wRFJTaGlmdFRvO1xyXG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5sU2hpZnRUbyA9IGJucExTaGlmdFRvO1xyXG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5yU2hpZnRUbyA9IGJucFJTaGlmdFRvO1xyXG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5zdWJUbyA9IGJucFN1YlRvO1xyXG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5tdWx0aXBseVRvID0gYm5wTXVsdGlwbHlUbztcclxuQmlnSW50ZWdlci5wcm90b3R5cGUuc3F1YXJlVG8gPSBibnBTcXVhcmVUbztcclxuQmlnSW50ZWdlci5wcm90b3R5cGUuZGl2UmVtVG8gPSBibnBEaXZSZW1UbztcclxuQmlnSW50ZWdlci5wcm90b3R5cGUuaW52RGlnaXQgPSBibnBJbnZEaWdpdDtcclxuQmlnSW50ZWdlci5wcm90b3R5cGUuaXNFdmVuID0gYm5wSXNFdmVuO1xyXG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5leHAgPSBibnBFeHA7XHJcblxyXG4vLyBwdWJsaWNcclxuQmlnSW50ZWdlci5wcm90b3R5cGUudG9TdHJpbmcgPSBiblRvU3RyaW5nO1xyXG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5uZWdhdGUgPSBibk5lZ2F0ZTtcclxuQmlnSW50ZWdlci5wcm90b3R5cGUuYWJzID0gYm5BYnM7XHJcbkJpZ0ludGVnZXIucHJvdG90eXBlLmNvbXBhcmVUbyA9IGJuQ29tcGFyZVRvO1xyXG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5iaXRMZW5ndGggPSBibkJpdExlbmd0aDtcclxuQmlnSW50ZWdlci5wcm90b3R5cGUubW9kID0gYm5Nb2Q7XHJcbkJpZ0ludGVnZXIucHJvdG90eXBlLm1vZFBvd0ludCA9IGJuTW9kUG93SW50O1xyXG5cclxuLy8gXCJjb25zdGFudHNcIlxyXG5CaWdJbnRlZ2VyLlpFUk8gPSBuYnYoMCk7XHJcbkJpZ0ludGVnZXIuT05FID0gbmJ2KDEpO1xyXG4iLCIvKlxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBBZGJsb2NrIFBsdXMgPGh0dHBzOi8vYWRibG9ja3BsdXMub3JnLz4sXHJcbiAqIENvcHlyaWdodCAoQykgMjAwNi1wcmVzZW50IGV5ZW8gR21iSFxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBhc1xyXG4gKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICpcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCBBZGJsb2NrIFBsdXMuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqL1xyXG5cclxuLyoqIEBtb2R1bGUgKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuLyoqXHJcbiAqIEBmaWxlT3ZlcnZpZXcgTWF0Y2hlciBjbGFzcyBpbXBsZW1lbnRpbmcgbWF0Y2hpbmcgYWRkcmVzc2VzIGFnYWluc3RcclxuICogICAgICAgICAgICAgICBhIGxpc3Qgb2YgZmlsdGVycy5cclxuICovXHJcblxyXG5jb25zdCB7UkVTT1VSQ0VfVFlQRVMsIFNQRUNJQUxfVFlQRVMsIEFMTE9XSU5HX1RZUEVTLFxyXG4gICAgICAgZW51bWVyYXRlVHlwZXN9ID0gcmVxdWlyZShcIi4vY29udGVudFR5cGVzXCIpO1xyXG5jb25zdCB7Y29tcGlsZVBhdHRlcm5zfSA9IHJlcXVpcmUoXCIuL3BhdHRlcm5zXCIpO1xyXG5jb25zdCB7ZG9tYWluU3VmZml4ZXMsIFVSTFJlcXVlc3R9ID0gcmVxdWlyZShcIi4vdXJsXCIpO1xyXG5jb25zdCB7RmlsdGVyc0J5RG9tYWluLCBGaWx0ZXJNYXB9ID0gcmVxdWlyZShcIi4vZmlsdGVyc0J5RG9tYWluXCIpO1xyXG5jb25zdCB7Q2FjaGV9ID0gcmVxdWlyZShcIi4vY2FjaGluZ1wiKTtcclxuXHJcbi8qKlxyXG4gKiBSZWd1bGFyIGV4cHJlc3Npb24gZm9yIG1hdGNoaW5nIGEga2V5d29yZCBpbiBhIGZpbHRlci5cclxuICogQHR5cGUge1JlZ0V4cH1cclxuICovXHJcbmxldCBrZXl3b3JkUmVnRXhwID0gL1teYS16MC05JSpdW2EtejAtOSVdezIsfSg/PVteYS16MC05JSpdKS87XHJcblxyXG4vKipcclxuICogUmVndWxhciBleHByZXNzaW9uIGZvciBtYXRjaGluZyBhbGwga2V5d29yZHMgaW4gYSBmaWx0ZXIuXHJcbiAqIEB0eXBlIHtSZWdFeHB9XHJcbiAqL1xyXG5sZXQgYWxsS2V5d29yZHNSZWdFeHAgPSBuZXcgUmVnRXhwKGtleXdvcmRSZWdFeHAsIFwiZ1wiKTtcclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgdGhlIGtleXdvcmQgaXMgYmFkIGZvciB1c2UuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXl3b3JkXHJcbiAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gKi9cclxuZnVuY3Rpb24gaXNCYWRLZXl3b3JkKGtleXdvcmQpXHJcbntcclxuICByZXR1cm4ga2V5d29yZCA9PSBcImh0dHBzXCIgfHwga2V5d29yZCA9PSBcImh0dHBcIiB8fCBrZXl3b3JkID09IFwiY29tXCIgfHxcclxuICAgICAgICAga2V5d29yZCA9PSBcImpzXCI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGRzIGEgZmlsdGVyIGJ5IGEgZ2l2ZW4ga2V5d29yZCB0byBhIG1hcC5cclxuICogQHBhcmFtIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5VUkxGaWx0ZXJ9IGZpbHRlclxyXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5d29yZFxyXG4gKiBAcGFyYW0ge01hcC48c3RyaW5nLChtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5VUkxGaWx0ZXJ8XHJcbiAqICAgICAgICAgICAgICAgICAgICAgIFNldC48bW9kdWxlOmZpbHRlckNsYXNzZXMuVVJMRmlsdGVyPik+fSBtYXBcclxuICovXHJcbmZ1bmN0aW9uIGFkZEZpbHRlckJ5S2V5d29yZChmaWx0ZXIsIGtleXdvcmQsIG1hcClcclxue1xyXG4gIGxldCBzZXQgPSBtYXAuZ2V0KGtleXdvcmQpO1xyXG4gIGlmICh0eXBlb2Ygc2V0ID09IFwidW5kZWZpbmVkXCIpXHJcbiAge1xyXG4gICAgbWFwLnNldChrZXl3b3JkLCBmaWx0ZXIpO1xyXG4gIH1cclxuICBlbHNlIGlmIChzZXQuc2l6ZSA9PSAxKVxyXG4gIHtcclxuICAgIGlmIChmaWx0ZXIgIT0gc2V0KVxyXG4gICAgICBtYXAuc2V0KGtleXdvcmQsIG5ldyBTZXQoW3NldCwgZmlsdGVyXSkpO1xyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgc2V0LmFkZChmaWx0ZXIpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbW92ZXMgYSBmaWx0ZXIgYnkgYSBnaXZlbiBrZXl3b3JkIGZyb20gYSBtYXAuXHJcbiAqIEBwYXJhbSB7bW9kdWxlOmZpbHRlckNsYXNzZXMuVVJMRmlsdGVyfSBmaWx0ZXJcclxuICogQHBhcmFtIHtzdHJpbmd9IGtleXdvcmRcclxuICogQHBhcmFtIHtNYXAuPHN0cmluZywobW9kdWxlOmZpbHRlckNsYXNzZXMuVVJMRmlsdGVyfFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICBTZXQuPG1vZHVsZTpmaWx0ZXJDbGFzc2VzLlVSTEZpbHRlcj4pPn0gbWFwXHJcbiAqL1xyXG5mdW5jdGlvbiByZW1vdmVGaWx0ZXJCeUtleXdvcmQoZmlsdGVyLCBrZXl3b3JkLCBtYXApXHJcbntcclxuICBsZXQgc2V0ID0gbWFwLmdldChrZXl3b3JkKTtcclxuICBpZiAodHlwZW9mIHNldCA9PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgcmV0dXJuO1xyXG5cclxuICBpZiAoc2V0LnNpemUgPT0gMSlcclxuICB7XHJcbiAgICBpZiAoZmlsdGVyID09IHNldClcclxuICAgICAgbWFwLmRlbGV0ZShrZXl3b3JkKTtcclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIHNldC5kZWxldGUoZmlsdGVyKTtcclxuXHJcbiAgICBpZiAoc2V0LnNpemUgPT0gMSlcclxuICAgICAgbWFwLnNldChrZXl3b3JkLCBbLi4uc2V0XVswXSk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIHdoZXRoZXIgYSBmaWx0ZXIgbWF0Y2hlcyBhIGdpdmVuIFVSTCByZXF1ZXN0LlxyXG4gKlxyXG4gKiBAcGFyYW0ge21vZHVsZTpmaWx0ZXJDbGFzc2VzLlVSTEZpbHRlcn0gZmlsdGVyIFRoZSBmaWx0ZXIuXHJcbiAqIEBwYXJhbSB7bW9kdWxlOnVybC5VUkxSZXF1ZXN0fSByZXF1ZXN0IFRoZSBVUkwgcmVxdWVzdC5cclxuICogQHBhcmFtIHtudW1iZXJ9IHR5cGVNYXNrIEEgbWFzayBzcGVjaWZ5aW5nIHRoZSBjb250ZW50IHR5cGUgb2YgdGhlIFVSTFxyXG4gKiAgIHJlcXVlc3QuXHJcbiAqIEBwYXJhbSB7P3N0cmluZ30gW3NpdGVrZXldIEFuIG9wdGlvbmFsIHB1YmxpYyBrZXkgYXNzb2NpYXRlZCB3aXRoIHRoZVxyXG4gKiAgIFVSTCByZXF1ZXN0LlxyXG4gKiBAcGFyYW0gez9BcnJheX0gW2NvbGxlY3Rpb25dIEFuIG9wdGlvbmFsIGxpc3QgdG8gd2hpY2ggdG8gYXBwZW5kIHRoZSBmaWx0ZXJcclxuICogICBpZiBpdCBtYXRjaGVzLiBJZiBvbWl0dGVkLCB0aGUgZnVuY3Rpb24gZGlyZWN0bHkgcmV0dXJucyB0aGUgZmlsdGVyIGlmIGl0XHJcbiAqICAgbWF0Y2hlcy5cclxuICpcclxuICogQHJldHVybnMgez9tb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5VUkxGaWx0ZXJ9IFRoZSBmaWx0ZXIgaWYgaXQgbWF0Y2hlcyBhbmRcclxuICogICBgY29sbGVjdGlvbmAgaXMgb21pdHRlZDsgb3RoZXJ3aXNlIGBudWxsYC5cclxuICovXHJcbmZ1bmN0aW9uIG1hdGNoRmlsdGVyKGZpbHRlciwgcmVxdWVzdCwgdHlwZU1hc2ssIHNpdGVrZXksIGNvbGxlY3Rpb24pXHJcbntcclxuICBpZiAoZmlsdGVyLm1hdGNoZXMocmVxdWVzdCwgdHlwZU1hc2ssIHNpdGVrZXkpKVxyXG4gIHtcclxuICAgIGlmICghY29sbGVjdGlvbilcclxuICAgICAgcmV0dXJuIGZpbHRlcjtcclxuXHJcbiAgICBjb2xsZWN0aW9uLnB1c2goZmlsdGVyKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIHdoZXRoZXIgYSBwYXJ0aWN1bGFyIGZpbHRlciBpcyBzbG93LlxyXG4gKiBAcGFyYW0ge21vZHVsZTpmaWx0ZXJDbGFzc2VzLlVSTEZpbHRlcn0gZmlsdGVyXHJcbiAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gKi9cclxuZXhwb3J0cy5pc1Nsb3dGaWx0ZXIgPSBmdW5jdGlvbiBpc1Nsb3dGaWx0ZXIoZmlsdGVyKVxyXG57XHJcbiAgcmV0dXJuICFmaWx0ZXIucGF0dGVybiB8fCAha2V5d29yZFJlZ0V4cC50ZXN0KGZpbHRlci5wYXR0ZXJuKTtcclxufTtcclxuXHJcbmxldCBNYXRjaGVyID1cclxuLyoqXHJcbiAqIEJsb2NraW5nL2FsbG93aW5nIGZpbHRlciBtYXRjaGluZ1xyXG4gKi9cclxuZXhwb3J0cy5NYXRjaGVyID0gY2xhc3MgTWF0Y2hlclxyXG57XHJcbiAgY29uc3RydWN0b3IoKVxyXG4gIHtcclxuICAgIC8qKlxyXG4gICAgICogTG9va3VwIHRhYmxlIGZvciBrZXl3b3JkcyBieSB0aGVpciBhc3NvY2lhdGVkIGZpbHRlclxyXG4gICAgICogQHR5cGUge01hcC48bW9kdWxlOmZpbHRlckNsYXNzZXMuVVJMRmlsdGVyLHN0cmluZz59XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICB0aGlzLl9rZXl3b3JkQnlGaWx0ZXIgPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb29rdXAgdGFibGUgZm9yIHNpbXBsZSBmaWx0ZXJzIGJ5IHRoZWlyIGFzc29jaWF0ZWQga2V5d29yZFxyXG4gICAgICogQHR5cGUge01hcC48c3RyaW5nLChtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5VUkxGaWx0ZXJ8XHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgIFNldC48bW9kdWxlOmZpbHRlckNsYXNzZXMuVVJMRmlsdGVyPik+fVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdGhpcy5fc2ltcGxlRmlsdGVyc0J5S2V5d29yZCA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIExvb2t1cCB0YWJsZSBmb3IgY29tcGxleCBmaWx0ZXJzIGJ5IHRoZWlyIGFzc29jaWF0ZWQga2V5d29yZFxyXG4gICAgICogQHR5cGUge01hcC48c3RyaW5nLChtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5VUkxGaWx0ZXJ8XHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgIFNldC48bW9kdWxlOmZpbHRlckNsYXNzZXMuVVJMRmlsdGVyPik+fVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdGhpcy5fY29tcGxleEZpbHRlcnNCeUtleXdvcmQgPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb29rdXAgdGFibGUgb2YgY29tcGlsZWQgcGF0dGVybnMgZm9yIHNpbXBsZSBmaWx0ZXJzIGJ5IHRoZWlyIGFzc29jaWF0ZWRcclxuICAgICAqIGtleXdvcmRcclxuICAgICAqIEB0eXBlIHtNYXAuPHN0cmluZyw/bW9kdWxlOnBhdHRlcm5zfkNvbXBpbGVkUGF0dGVybnM+fVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdGhpcy5fY29tcGlsZWRQYXR0ZXJuc0J5S2V5d29yZCA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXBpbGVkIHBhdHRlcm5zIGZvciBnZW5lcmljIGNvbXBsZXggZmlsdGVycyB3aXRoIG5vIGFzc29jaWF0ZWRcclxuICAgICAqIGtleXdvcmQuXHJcbiAgICAgKiBAdHlwZSB7P21vZHVsZTpwYXR0ZXJuc35Db21waWxlZFBhdHRlcm5zfGJvb2xlYW59XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICB0aGlzLl9rZXl3b3JkbGVzc0NvbXBpbGVkUGF0dGVybnMgPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIExvb2t1cCB0YWJsZSBvZiBkb21haW4gbWFwcyBmb3IgY29tcGxleCBmaWx0ZXJzIGJ5IHRoZWlyIGFzc29jaWF0ZWRcclxuICAgICAqIGtleXdvcmRcclxuICAgICAqIEB0eXBlIHtNYXAuPHN0cmluZyxcclxuICAgICAqICAgICAgICAgICAgIE1hcC48c3RyaW5nLFxyXG4gICAgICogICAgICAgICAgICAgICAgICAobW9kdWxlOmZpbHRlckNsYXNzZXMuVVJMRmlsdGVyfFxyXG4gICAgICogICAgICAgICAgICAgICAgICAgTWFwLjxtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5VUkxGaWx0ZXIsYm9vbGVhbj4pPj59XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICB0aGlzLl9maWx0ZXJEb21haW5NYXBzQnlLZXl3b3JkID0gbmV3IE1hcCgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9va3VwIHRhYmxlIG9mIHR5cGUtc3BlY2lmaWMgbG9va3VwIHRhYmxlcyBmb3IgY29tcGxleCBmaWx0ZXJzIGJ5IHRoZWlyXHJcbiAgICAgKiBhc3NvY2lhdGVkIGtleXdvcmRcclxuICAgICAqIEB0eXBlIHtNYXAuPHN0cmluZyxcclxuICAgICAqICAgICAgICAgICAgIE1hcC48c3RyaW5nLFxyXG4gICAgICogICAgICAgICAgICAgICAgICAobW9kdWxlOmZpbHRlckNsYXNzZXMuVVJMRmlsdGVyfFxyXG4gICAgICogICAgICAgICAgICAgICAgICAgU2V0Ljxtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5VUkxGaWx0ZXI+KT4+fVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdGhpcy5fZmlsdGVyTWFwc0J5VHlwZSA9IG5ldyBNYXAoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgYWxsIGtub3duIGZpbHRlcnNcclxuICAgKi9cclxuICBjbGVhcigpXHJcbiAge1xyXG4gICAgdGhpcy5fa2V5d29yZEJ5RmlsdGVyLmNsZWFyKCk7XHJcbiAgICB0aGlzLl9zaW1wbGVGaWx0ZXJzQnlLZXl3b3JkLmNsZWFyKCk7XHJcbiAgICB0aGlzLl9jb21wbGV4RmlsdGVyc0J5S2V5d29yZC5jbGVhcigpO1xyXG4gICAgdGhpcy5fY29tcGlsZWRQYXR0ZXJuc0J5S2V5d29yZC5jbGVhcigpO1xyXG4gICAgdGhpcy5fa2V5d29yZGxlc3NDb21waWxlZFBhdHRlcm5zID0gZmFsc2U7XHJcbiAgICB0aGlzLl9maWx0ZXJEb21haW5NYXBzQnlLZXl3b3JkLmNsZWFyKCk7XHJcbiAgICB0aGlzLl9maWx0ZXJNYXBzQnlUeXBlLmNsZWFyKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgZmlsdGVyIHRvIHRoZSBtYXRjaGVyXHJcbiAgICogQHBhcmFtIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5VUkxGaWx0ZXJ9IGZpbHRlclxyXG4gICAqL1xyXG4gIGFkZChmaWx0ZXIpXHJcbiAge1xyXG4gICAgaWYgKHRoaXMuX2tleXdvcmRCeUZpbHRlci5oYXMoZmlsdGVyKSlcclxuICAgICAgcmV0dXJuO1xyXG5cclxuICAgIC8vIExvb2sgZm9yIGEgc3VpdGFibGUga2V5d29yZFxyXG4gICAgbGV0IGtleXdvcmQgPSB0aGlzLmZpbmRLZXl3b3JkKGZpbHRlcik7XHJcbiAgICBsZXQgc2ltcGxlID0gZmlsdGVyLmNvbnRlbnRUeXBlID09IFJFU09VUkNFX1RZUEVTICYmIGZpbHRlci5pc0dlbmVyaWMoKTtcclxuXHJcbiAgICBhZGRGaWx0ZXJCeUtleXdvcmQoZmlsdGVyLCBrZXl3b3JkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgIHNpbXBsZSA/IHRoaXMuX3NpbXBsZUZpbHRlcnNCeUtleXdvcmQgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29tcGxleEZpbHRlcnNCeUtleXdvcmQpO1xyXG5cclxuICAgIHRoaXMuX2tleXdvcmRCeUZpbHRlci5zZXQoZmlsdGVyLCBrZXl3b3JkKTtcclxuXHJcbiAgICBpZiAoc2ltcGxlKVxyXG4gICAge1xyXG4gICAgICBpZiAodGhpcy5fY29tcGlsZWRQYXR0ZXJuc0J5S2V5d29yZC5zaXplID4gMClcclxuICAgICAgICB0aGlzLl9jb21waWxlZFBhdHRlcm5zQnlLZXl3b3JkLmRlbGV0ZShrZXl3b3JkKTtcclxuXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoa2V5d29yZCA9PSBcIlwiKVxyXG4gICAgICB0aGlzLl9rZXl3b3JkbGVzc0NvbXBpbGVkUGF0dGVybnMgPSBmYWxzZTtcclxuXHJcbiAgICBmb3IgKGxldCB0eXBlIG9mIGVudW1lcmF0ZVR5cGVzKGZpbHRlci5jb250ZW50VHlwZSwgU1BFQ0lBTF9UWVBFUykpXHJcbiAgICB7XHJcbiAgICAgIGxldCBtYXAgPSB0aGlzLl9maWx0ZXJNYXBzQnlUeXBlLmdldCh0eXBlKTtcclxuICAgICAgaWYgKCFtYXApXHJcbiAgICAgICAgdGhpcy5fZmlsdGVyTWFwc0J5VHlwZS5zZXQodHlwZSwgbWFwID0gbmV3IE1hcCgpKTtcclxuXHJcbiAgICAgIGFkZEZpbHRlckJ5S2V5d29yZChmaWx0ZXIsIGtleXdvcmQsIG1hcCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHtkb21haW5zfSA9IGZpbHRlcjtcclxuXHJcbiAgICBsZXQgZmlsdGVyc0J5RG9tYWluID0gdGhpcy5fZmlsdGVyRG9tYWluTWFwc0J5S2V5d29yZC5nZXQoa2V5d29yZCk7XHJcbiAgICBpZiAoIWZpbHRlcnNCeURvbWFpbilcclxuICAgIHtcclxuICAgICAgLy8gSW4gbW9zdCBjYXNlcywgdGhlcmUgaXMgb25seSBvbmUgcHVyZSBnZW5lcmljIGZpbHRlciB0byBhIGtleXdvcmQuXHJcbiAgICAgIC8vIEluc3RlYWQgb2YgTWFwIHsgXCJmb29cIiA9PiBNYXAgeyBcIlwiID0+IE1hcCB7IGZpbHRlciA9PiB0cnVlIH0gfSB9LCB3ZVxyXG4gICAgICAvLyBjYW4ganVzdCByZWR1Y2UgaXQgdG8gTWFwIHsgXCJmb29cIiA9PiBmaWx0ZXIgfSBhbmQgc2F2ZSBhIGxvdCBvZlxyXG4gICAgICAvLyBtZW1vcnkuXHJcbiAgICAgIGlmICghZG9tYWlucylcclxuICAgICAge1xyXG4gICAgICAgIHRoaXMuX2ZpbHRlckRvbWFpbk1hcHNCeUtleXdvcmQuc2V0KGtleXdvcmQsIGZpbHRlcik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmaWx0ZXJzQnlEb21haW4gPSBuZXcgRmlsdGVyc0J5RG9tYWluKCk7XHJcbiAgICAgIHRoaXMuX2ZpbHRlckRvbWFpbk1hcHNCeUtleXdvcmQuc2V0KGtleXdvcmQsIGZpbHRlcnNCeURvbWFpbik7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICghKGZpbHRlcnNCeURvbWFpbiBpbnN0YW5jZW9mIEZpbHRlcnNCeURvbWFpbikpXHJcbiAgICB7XHJcbiAgICAgIGZpbHRlcnNCeURvbWFpbiA9IG5ldyBGaWx0ZXJzQnlEb21haW4oW1tcIlwiLCBmaWx0ZXJzQnlEb21haW5dXSk7XHJcbiAgICAgIHRoaXMuX2ZpbHRlckRvbWFpbk1hcHNCeUtleXdvcmQuc2V0KGtleXdvcmQsIGZpbHRlcnNCeURvbWFpbik7XHJcbiAgICB9XHJcblxyXG4gICAgZmlsdGVyc0J5RG9tYWluLmFkZChmaWx0ZXIsIGRvbWFpbnMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyBhIGZpbHRlciBmcm9tIHRoZSBtYXRjaGVyXHJcbiAgICogQHBhcmFtIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5VUkxGaWx0ZXJ9IGZpbHRlclxyXG4gICAqL1xyXG4gIHJlbW92ZShmaWx0ZXIpXHJcbiAge1xyXG4gICAgbGV0IGtleXdvcmQgPSB0aGlzLl9rZXl3b3JkQnlGaWx0ZXIuZ2V0KGZpbHRlcik7XHJcbiAgICBpZiAodHlwZW9mIGtleXdvcmQgPT0gXCJ1bmRlZmluZWRcIilcclxuICAgICAgcmV0dXJuO1xyXG5cclxuICAgIGxldCBzaW1wbGUgPSBmaWx0ZXIuY29udGVudFR5cGUgPT0gUkVTT1VSQ0VfVFlQRVMgJiYgZmlsdGVyLmlzR2VuZXJpYygpO1xyXG5cclxuICAgIHJlbW92ZUZpbHRlckJ5S2V5d29yZChmaWx0ZXIsIGtleXdvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2ltcGxlID8gdGhpcy5fc2ltcGxlRmlsdGVyc0J5S2V5d29yZCA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb21wbGV4RmlsdGVyc0J5S2V5d29yZCk7XHJcblxyXG4gICAgdGhpcy5fa2V5d29yZEJ5RmlsdGVyLmRlbGV0ZShmaWx0ZXIpO1xyXG5cclxuICAgIGlmIChzaW1wbGUpXHJcbiAgICB7XHJcbiAgICAgIGlmICh0aGlzLl9jb21waWxlZFBhdHRlcm5zQnlLZXl3b3JkLnNpemUgPiAwKVxyXG4gICAgICAgIHRoaXMuX2NvbXBpbGVkUGF0dGVybnNCeUtleXdvcmQuZGVsZXRlKGtleXdvcmQpO1xyXG5cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChrZXl3b3JkID09IFwiXCIpXHJcbiAgICAgIHRoaXMuX2tleXdvcmRsZXNzQ29tcGlsZWRQYXR0ZXJucyA9IGZhbHNlO1xyXG5cclxuICAgIGZvciAobGV0IHR5cGUgb2YgZW51bWVyYXRlVHlwZXMoZmlsdGVyLmNvbnRlbnRUeXBlLCBTUEVDSUFMX1RZUEVTKSlcclxuICAgIHtcclxuICAgICAgbGV0IG1hcCA9IHRoaXMuX2ZpbHRlck1hcHNCeVR5cGUuZ2V0KHR5cGUpO1xyXG4gICAgICBpZiAobWFwKVxyXG4gICAgICAgIHJlbW92ZUZpbHRlckJ5S2V5d29yZChmaWx0ZXIsIGtleXdvcmQsIG1hcCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGZpbHRlcnNCeURvbWFpbiA9IHRoaXMuX2ZpbHRlckRvbWFpbk1hcHNCeUtleXdvcmQuZ2V0KGtleXdvcmQpO1xyXG4gICAgaWYgKGZpbHRlcnNCeURvbWFpbilcclxuICAgIHtcclxuICAgICAgLy8gQmVjYXVzZSBvZiB0aGUgbWVtb3J5IG9wdGltaXphdGlvbiBpbiB0aGUgYWRkIGZ1bmN0aW9uLCBtb3N0IG9mIHRoZVxyXG4gICAgICAvLyB0aW1lIHRoaXMgd2lsbCBiZSBhIGZpbHRlciByYXRoZXIgdGhhbiBhIG1hcC5cclxuICAgICAgaWYgKCEoZmlsdGVyc0J5RG9tYWluIGluc3RhbmNlb2YgRmlsdGVyc0J5RG9tYWluKSlcclxuICAgICAge1xyXG4gICAgICAgIHRoaXMuX2ZpbHRlckRvbWFpbk1hcHNCeUtleXdvcmQuZGVsZXRlKGtleXdvcmQpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgZmlsdGVyc0J5RG9tYWluLnJlbW92ZShmaWx0ZXIpO1xyXG5cclxuICAgICAgaWYgKGZpbHRlcnNCeURvbWFpbi5zaXplID09IDApXHJcbiAgICAgIHtcclxuICAgICAgICB0aGlzLl9maWx0ZXJEb21haW5NYXBzQnlLZXl3b3JkLmRlbGV0ZShrZXl3b3JkKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChmaWx0ZXJzQnlEb21haW4uc2l6ZSA9PSAxKVxyXG4gICAgICB7XHJcbiAgICAgICAgZm9yIChsZXQgW2xhc3REb21haW4sIG1hcF0gb2YgZmlsdGVyc0J5RG9tYWluLmVudHJpZXMoKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAvLyBSZWR1Y2UgTWFwIHsgXCJmb29cIiA9PiBNYXAgeyBcIlwiID0+IGZpbHRlciB9IH0gdG9cclxuICAgICAgICAgIC8vIE1hcCB7IFwiZm9vXCIgPT4gZmlsdGVyIH1cclxuICAgICAgICAgIGlmIChsYXN0RG9tYWluID09IFwiXCIgJiYgIShtYXAgaW5zdGFuY2VvZiBGaWx0ZXJNYXApKVxyXG4gICAgICAgICAgICB0aGlzLl9maWx0ZXJEb21haW5NYXBzQnlLZXl3b3JkLnNldChrZXl3b3JkLCBtYXApO1xyXG5cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIHdoZXRoZXIgYSBmaWx0ZXIgZXhpc3RzIGluIHRoZSBtYXRjaGVyXHJcbiAgICogQHBhcmFtIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5VUkxGaWx0ZXJ9IGZpbHRlclxyXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAqL1xyXG4gIGhhcyhmaWx0ZXIpXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuX2tleXdvcmRCeUZpbHRlci5oYXMoZmlsdGVyKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENob29zZXMgYSBrZXl3b3JkIHRvIGJlIGFzc29jaWF0ZWQgd2l0aCB0aGUgZmlsdGVyLlxyXG4gICAqXHJcbiAgICogQmVjYXVzZSBpdCB3aWxsIHBlcmZvcm0gc29tZSBpbnRlcm5hbCBvcHRpbWl6YXRpb25zLCB0aGVyZSBpcyBub1xyXG4gICAqIGd1YXJhbnRlZSB0aGF0IHRoaXMgZnVuY3Rpb24gd2lsbCBhbHdheXMgcmV0dXJuIHRoZSBzYW1lIHJlc3VsdCB3aGVuXHJcbiAgICogY2FsbGVkIHdpdGggdGhlIHNhbWUgZmlsdGVyLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5GaWx0ZXJ9IGZpbHRlclxyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IGtleXdvcmQgb3IgYW4gZW1wdHkgc3RyaW5nIGlmIG5vIGtleXdvcmQgY291bGQgYmUgZm91bmRcclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXHJcbiAgZmluZEtleXdvcmQoZmlsdGVyKVxyXG4gIHtcclxuICAgIGxldCByZXN1bHQgPSBcIlwiO1xyXG5cclxuICAgIGxldCB7cGF0dGVybn0gPSBmaWx0ZXI7XHJcbiAgICBpZiAocGF0dGVybiA9PSBudWxsKVxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG5cclxuICAgIGxldCBjYW5kaWRhdGVzID0gcGF0dGVybi50b0xvd2VyQ2FzZSgpLm1hdGNoKGFsbEtleXdvcmRzUmVnRXhwKTtcclxuICAgIGlmICghY2FuZGlkYXRlcylcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuXHJcbiAgICBsZXQgcmVzdWx0Q291bnQgPSAweEZGRkZGRjtcclxuICAgIGxldCByZXN1bHRMZW5ndGggPSAwO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwLCBsID0gY2FuZGlkYXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIGxldCBjYW5kaWRhdGUgPSBjYW5kaWRhdGVzW2ldLnN1YnN0cmluZygxKTtcclxuXHJcbiAgICAgIGlmIChpc0JhZEtleXdvcmQoY2FuZGlkYXRlKSlcclxuICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgIGxldCBzaW1wbGVGaWx0ZXJzID0gdGhpcy5fc2ltcGxlRmlsdGVyc0J5S2V5d29yZC5nZXQoY2FuZGlkYXRlKTtcclxuICAgICAgbGV0IGNvbXBsZXhGaWx0ZXJzID0gdGhpcy5fY29tcGxleEZpbHRlcnNCeUtleXdvcmQuZ2V0KGNhbmRpZGF0ZSk7XHJcblxyXG4gICAgICBsZXQgY291bnQgPSAodHlwZW9mIHNpbXBsZUZpbHRlcnMgIT0gXCJ1bmRlZmluZWRcIiA/XHJcbiAgICAgICAgICAgICAgICAgICAgIHNpbXBsZUZpbHRlcnMuc2l6ZSA6IDApICtcclxuICAgICAgICAgICAgICAgICAgKHR5cGVvZiBjb21wbGV4RmlsdGVycyAhPSBcInVuZGVmaW5lZFwiID9cclxuICAgICAgICAgICAgICAgICAgICAgY29tcGxleEZpbHRlcnMuc2l6ZSA6IDApO1xyXG5cclxuICAgICAgaWYgKGNvdW50IDwgcmVzdWx0Q291bnQgfHxcclxuICAgICAgICAgIChjb3VudCA9PSByZXN1bHRDb3VudCAmJiBjYW5kaWRhdGUubGVuZ3RoID4gcmVzdWx0TGVuZ3RoKSlcclxuICAgICAge1xyXG4gICAgICAgIHJlc3VsdCA9IGNhbmRpZGF0ZTtcclxuICAgICAgICByZXN1bHRDb3VudCA9IGNvdW50O1xyXG4gICAgICAgIHJlc3VsdExlbmd0aCA9IGNhbmRpZGF0ZS5sZW5ndGg7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgX21hdGNoRmlsdGVyc0J5RG9tYWluKGZpbHRlcnNCeURvbWFpbiwgcmVxdWVzdCwgdHlwZU1hc2ssIHNpdGVrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWNpZmljT25seSwgY29sbGVjdGlvbilcclxuICB7XHJcbiAgICBsZXQgZXhjbHVkZWQgPSBudWxsO1xyXG5cclxuICAgIGxldCBkb21haW4gPSByZXF1ZXN0LmRvY3VtZW50SG9zdG5hbWUgfHwgXCJcIjtcclxuICAgIGZvciAobGV0IHN1ZmZpeCBvZiBkb21haW5TdWZmaXhlcyhkb21haW4sICFzcGVjaWZpY09ubHkpKVxyXG4gICAge1xyXG4gICAgICBsZXQgbWFwID0gZmlsdGVyc0J5RG9tYWluLmdldChzdWZmaXgpO1xyXG4gICAgICBpZiAobWFwKVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKG1hcCBpbnN0YW5jZW9mIEZpbHRlck1hcClcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmb3IgKGxldCBbZmlsdGVyLCBpbmNsdWRlXSBvZiBtYXAuZW50cmllcygpKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIWluY2x1ZGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBpZiAoZXhjbHVkZWQpXHJcbiAgICAgICAgICAgICAgICBleGNsdWRlZC5hZGQoZmlsdGVyKTtcclxuICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBleGNsdWRlZCA9IG5ldyBTZXQoW2ZpbHRlcl0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCghZXhjbHVkZWQgfHwgIWV4Y2x1ZGVkLmhhcyhmaWx0ZXIpKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICBtYXRjaEZpbHRlcihmaWx0ZXIsIHJlcXVlc3QsIHR5cGVNYXNrLCBzaXRla2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHJldHVybiBmaWx0ZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKCFleGNsdWRlZCB8fCAhZXhjbHVkZWQuaGFzKG1hcCkpICYmXHJcbiAgICAgICAgICAgICAgICAgbWF0Y2hGaWx0ZXIobWFwLCByZXF1ZXN0LCB0eXBlTWFzaywgc2l0ZWtleSwgY29sbGVjdGlvbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcmV0dXJuIG1hcDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIF9jaGVja0VudHJ5TWF0Y2hTaW1wbGVRdWlja0NoZWNrKGtleXdvcmQsIHJlcXVlc3QsIGZpbHRlcnMpXHJcbiAge1xyXG4gICAgbGV0IGNvbXBpbGVkID0gdGhpcy5fY29tcGlsZWRQYXR0ZXJuc0J5S2V5d29yZC5nZXQoa2V5d29yZCk7XHJcbiAgICBpZiAodHlwZW9mIGNvbXBpbGVkID09IFwidW5kZWZpbmVkXCIpXHJcbiAgICB7XHJcbiAgICAgIGNvbXBpbGVkID0gY29tcGlsZVBhdHRlcm5zKGZpbHRlcnMpO1xyXG4gICAgICB0aGlzLl9jb21waWxlZFBhdHRlcm5zQnlLZXl3b3JkLnNldChrZXl3b3JkLCBjb21waWxlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgY29tcGlsYXRpb24gZmFpbGVkIChlLmcuIHRvbyBtYW55IGZpbHRlcnMpLCByZXR1cm4gdHJ1ZSBiZWNhdXNlIHRoaXNcclxuICAgIC8vIGlzIG9ubHkgYSBwcmUtY2hlY2suXHJcbiAgICByZXR1cm4gIWNvbXBpbGVkIHx8IGNvbXBpbGVkLnRlc3QocmVxdWVzdCk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tFbnRyeU1hdGNoU2ltcGxlKGtleXdvcmQsIHJlcXVlc3QsIGNvbGxlY3Rpb24pXHJcbiAge1xyXG4gICAgbGV0IGZpbHRlcnMgPSB0aGlzLl9zaW1wbGVGaWx0ZXJzQnlLZXl3b3JkLmdldChrZXl3b3JkKTtcclxuXHJcbiAgICAvLyBGb3Igc2ltcGxlIGZpbHRlcnMgd2hlcmUgdGhlcmUncyBtb3JlIHRoYW4gb25lIGZpbHRlciB0byB0aGUga2V5d29yZCwgd2VcclxuICAgIC8vIGRvIGEgcXVpY2sgY2hlY2sgdXNpbmcgYSBzaW5nbGUgY29tcGlsZWQgcGF0dGVybiB0aGF0IGNvbWJpbmVzIGFsbCB0aGVcclxuICAgIC8vIHBhdHRlcm5zLiBUaGlzIGlzIGEgbG90IGZhc3RlciBmb3IgcmVxdWVzdHMgdGhhdCBhcmUgbm90IGdvaW5nIHRvIGJlXHJcbiAgICAvLyBibG9ja2VkIChpLmUuIG1vc3QgcmVxdWVzdHMpLlxyXG4gICAgaWYgKGZpbHRlcnMgJiYgKGZpbHRlcnMuc2l6ZSA9PSAxIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tFbnRyeU1hdGNoU2ltcGxlUXVpY2tDaGVjayhrZXl3b3JkLCByZXF1ZXN0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycykpKVxyXG4gICAge1xyXG4gICAgICBmb3IgKGxldCBmaWx0ZXIgb2YgZmlsdGVycylcclxuICAgICAge1xyXG4gICAgICAgIC8vIFNpbXBsZSBmaWx0ZXJzIG1hdGNoIGFueSByZXNvdXJjZSB0eXBlLlxyXG4gICAgICAgIGlmIChtYXRjaEZpbHRlcihmaWx0ZXIsIHJlcXVlc3QsIFJFU09VUkNFX1RZUEVTLCBudWxsLCBjb2xsZWN0aW9uKSlcclxuICAgICAgICAgIHJldHVybiBmaWx0ZXI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIF9jaGVja0VudHJ5TWF0Y2hGb3JUeXBlKGtleXdvcmQsIHJlcXVlc3QsIHR5cGVNYXNrLCBzaXRla2V5LCBzcGVjaWZpY09ubHksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbilcclxuICB7XHJcbiAgICBsZXQgZmlsdGVyc0ZvclR5cGUgPSB0aGlzLl9maWx0ZXJNYXBzQnlUeXBlLmdldCh0eXBlTWFzayk7XHJcbiAgICBpZiAoZmlsdGVyc0ZvclR5cGUpXHJcbiAgICB7XHJcbiAgICAgIGxldCBmaWx0ZXJzID0gZmlsdGVyc0ZvclR5cGUuZ2V0KGtleXdvcmQpO1xyXG4gICAgICBpZiAoZmlsdGVycylcclxuICAgICAge1xyXG4gICAgICAgIGZvciAobGV0IGZpbHRlciBvZiBmaWx0ZXJzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmIChzcGVjaWZpY09ubHkgJiYgZmlsdGVyLmlzR2VuZXJpYygpKVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICBpZiAobWF0Y2hGaWx0ZXIoZmlsdGVyLCByZXF1ZXN0LCB0eXBlTWFzaywgc2l0ZWtleSwgY29sbGVjdGlvbikpXHJcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tFbnRyeU1hdGNoQnlEb21haW4oa2V5d29yZCwgcmVxdWVzdCwgdHlwZU1hc2ssIHNpdGVrZXksIHNwZWNpZmljT25seSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbilcclxuICB7XHJcbiAgICBsZXQgZmlsdGVyc0J5RG9tYWluID0gdGhpcy5fZmlsdGVyRG9tYWluTWFwc0J5S2V5d29yZC5nZXQoa2V5d29yZCk7XHJcbiAgICBpZiAoZmlsdGVyc0J5RG9tYWluKVxyXG4gICAge1xyXG4gICAgICBpZiAoZmlsdGVyc0J5RG9tYWluIGluc3RhbmNlb2YgRmlsdGVyc0J5RG9tYWluKVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKGtleXdvcmQgPT0gXCJcIiAmJiAhc3BlY2lmaWNPbmx5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGxldCBjb21waWxlZCA9IHRoaXMuX2tleXdvcmRsZXNzQ29tcGlsZWRQYXR0ZXJucztcclxuXHJcbiAgICAgICAgICAvLyBJZiB0aGUgdmFsdWUgaXMgZmFsc2UsIGl0IGluZGljYXRlcyB0aGF0IHdlIG5lZWQgdG8gaW5pdGlhbGl6ZSBpdFxyXG4gICAgICAgICAgLy8gdG8gZWl0aGVyIGEgQ29tcGlsZWRQYXR0ZXJucyBvYmplY3Qgb3IgbnVsbC5cclxuICAgICAgICAgIGlmIChjb21waWxlZCA9PSBmYWxzZSlcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgLy8gQ29tcGlsZSBhbGwgdGhlIHBhdHRlcm5zIGZyb20gdGhlIGdlbmVyaWMgZmlsdGVycyBpbnRvIGEgc2luZ2xlXHJcbiAgICAgICAgICAgIC8vIG9iamVjdC4gSXQgaXMgd29ydGggZG9pbmcgdGhpcyBmb3IgdGhlIGtleXdvcmRsZXNzIGdlbmVyaWNcclxuICAgICAgICAgICAgLy8gY29tcGxleCBmaWx0ZXJzIGJlY2F1c2UgdGhleSBtdXN0IGJlIGNoZWNrZWQgYWdhaW5zdCBldmVyeVxyXG4gICAgICAgICAgICAvLyBzaW5nbGUgVVJMIHJlcXVlc3QgdGhhdCBoYXMgbm90IGFscmVhZHkgYmVlbiBibG9ja2VkIGJ5IG9uZSBvZlxyXG4gICAgICAgICAgICAvLyB0aGUgc2ltcGxlIGZpbHRlcnMgKGkuZS4gbW9zdCBVUkwgcmVxdWVzdHMpLlxyXG4gICAgICAgICAgICBsZXQgbWFwID0gZmlsdGVyc0J5RG9tYWluLmdldChcIlwiKTtcclxuICAgICAgICAgICAgaWYgKG1hcCBpbnN0YW5jZW9mIEZpbHRlck1hcClcclxuICAgICAgICAgICAgICBjb21waWxlZCA9IGNvbXBpbGVQYXR0ZXJucyhuZXcgU2V0KG1hcC5rZXlzKCkpKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2tleXdvcmRsZXNzQ29tcGlsZWRQYXR0ZXJucyA9IGNvbXBpbGVkIHx8IG51bGw7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gV2UgY2FuIHNraXAgdGhlIGdlbmVyaWMgZmlsdGVycyBpZiBub25lIG9mIHRoZW0gcGFzcyB0aGUgdGVzdC5cclxuICAgICAgICAgIGlmIChjb21waWxlZCAmJiAhY29tcGlsZWQudGVzdChyZXF1ZXN0KSlcclxuICAgICAgICAgICAgc3BlY2lmaWNPbmx5ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYXRjaEZpbHRlcnNCeURvbWFpbihmaWx0ZXJzQnlEb21haW4sIHJlcXVlc3QsIHR5cGVNYXNrLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXRla2V5LCBzcGVjaWZpY09ubHksIGNvbGxlY3Rpb24pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBCZWNhdXNlIG9mIHRoZSBtZW1vcnkgb3B0aW1pemF0aW9uIGluIHRoZSBhZGQgZnVuY3Rpb24sIG1vc3Qgb2YgdGhlXHJcbiAgICAgIC8vIHRpbWUgdGhpcyB3aWxsIGJlIGEgZmlsdGVyIHJhdGhlciB0aGFuIGEgbWFwLlxyXG5cclxuICAgICAgLy8gQWxzbyBzZWUgIzczMTI6IElmIGl0J3MgYSBzaW5nbGUgZmlsdGVyLCBpdCdzIGFsd2F5cyB0aGUgZXF1aXZhbGVudCBvZlxyXG4gICAgICAvLyBNYXAgeyBcIlwiID0+IE1hcCB7IGZpbHRlciA9PiB0cnVlIH0gfSAoaS5lLiBhcHBsaWVzIHRvIGFueSBkb21haW4pLiBJZlxyXG4gICAgICAvLyB0aGUgc3BlY2lmaWMtb25seSBmbGFnIGlzIHNldCwgd2Ugc2tpcCBpdC5cclxuICAgICAgaWYgKCFzcGVjaWZpY09ubHkpXHJcbiAgICAgIHtcclxuICAgICAgICByZXR1cm4gbWF0Y2hGaWx0ZXIoZmlsdGVyc0J5RG9tYWluLCByZXF1ZXN0LCB0eXBlTWFzaywgc2l0ZWtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrcyB3aGV0aGVyIHRoZSBlbnRyaWVzIGZvciBhIHBhcnRpY3VsYXIga2V5d29yZCBtYXRjaCBhIFVSTFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXl3b3JkXHJcbiAgICogQHBhcmFtIHttb2R1bGU6dXJsLlVSTFJlcXVlc3R9IHJlcXVlc3RcclxuICAgKiBAcGFyYW0ge251bWJlcn0gdHlwZU1hc2tcclxuICAgKiBAcGFyYW0gez9zdHJpbmd9IFtzaXRla2V5XVxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3NwZWNpZmljT25seV1cclxuICAgKiBAcGFyYW0gez9BcnJheS48bW9kdWxlOmZpbHRlckNsYXNzZXMuRmlsdGVyPn0gW2NvbGxlY3Rpb25dIEFuIG9wdGlvbmFsXHJcbiAgICogICBsaXN0IG9mIGZpbHRlcnMgdG8gd2hpY2ggdG8gYXBwZW5kIGFueSByZXN1bHRzLiBJZiBzcGVjaWZpZWQsIHRoZVxyXG4gICAqICAgZnVuY3Rpb24gYWRkcyAqYWxsKiBtYXRjaGluZyBmaWx0ZXJzIHRvIHRoZSBsaXN0OyBpZiBvbWl0dGVkLFxyXG4gICAqICAgdGhlIGZ1bmN0aW9uIGRpcmVjdGx5IHJldHVybnMgdGhlIGZpcnN0IG1hdGNoaW5nIGZpbHRlci5cclxuICAgKiBAcmV0dXJucyB7P21vZHVsZTpmaWx0ZXJDbGFzc2VzLkZpbHRlcn1cclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXHJcbiAgY2hlY2tFbnRyeU1hdGNoKGtleXdvcmQsIHJlcXVlc3QsIHR5cGVNYXNrLCBzaXRla2V5LCBzcGVjaWZpY09ubHksXHJcbiAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24pXHJcbiAge1xyXG4gICAgLy8gV2UgbmVlZCB0byBza2lwIHRoZSBzaW1wbGUgKGxvY2F0aW9uLW9ubHkpIGZpbHRlcnMgaWYgdGhlIHR5cGUgbWFzayBkb2VzXHJcbiAgICAvLyBub3QgY29udGFpbiBhbnkgcmVzb3VyY2UgdHlwZXMuXHJcbiAgICBpZiAoIXNwZWNpZmljT25seSAmJiAodHlwZU1hc2sgJiBSRVNPVVJDRV9UWVBFUykgIT0gMClcclxuICAgIHtcclxuICAgICAgbGV0IGZpbHRlciA9IHRoaXMuX2NoZWNrRW50cnlNYXRjaFNpbXBsZShrZXl3b3JkLCByZXF1ZXN0LCBjb2xsZWN0aW9uKTtcclxuICAgICAgaWYgKGZpbHRlcilcclxuICAgICAgICByZXR1cm4gZmlsdGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZSB0eXBlIG1hc2sgY29udGFpbnMgYSBzcGVjaWFsIHR5cGUgKGZpcnN0IGNvbmRpdGlvbikgYW5kIGl0IGlzXHJcbiAgICAvLyB0aGUgb25seSB0eXBlIGluIHRoZSBtYXNrIChzZWNvbmQgY29uZGl0aW9uKSwgd2UgY2FuIHVzZSB0aGVcclxuICAgIC8vIHR5cGUtc3BlY2lmaWMgbWFwLCB3aGljaCB0eXBpY2FsbHkgY29udGFpbnMgYSBsb3QgZmV3ZXIgZmlsdGVycy4gVGhpc1xyXG4gICAgLy8gZW5hYmxlcyBmYXN0ZXIgbG9va3VwcyBmb3IgYWxsb3dpbmcgdHlwZXMgbGlrZSAkZG9jdW1lbnQsICRlbGVtaGlkZSxcclxuICAgIC8vIGFuZCBzbyBvbiwgYXMgd2VsbCBhcyBvdGhlciBzcGVjaWFsIHR5cGVzIGxpa2UgJGNzcC5cclxuICAgIGlmICgodHlwZU1hc2sgJiBTUEVDSUFMX1RZUEVTKSAhPSAwICYmICh0eXBlTWFzayAmIHR5cGVNYXNrIC0gMSkgPT0gMClcclxuICAgIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrRW50cnlNYXRjaEZvclR5cGUoa2V5d29yZCwgcmVxdWVzdCwgdHlwZU1hc2ssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpdGVrZXksIHNwZWNpZmljT25seSwgY29sbGVjdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NoZWNrRW50cnlNYXRjaEJ5RG9tYWluKGtleXdvcmQsIHJlcXVlc3QsIHR5cGVNYXNrLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpdGVrZXksIHNwZWNpZmljT25seSwgY29sbGVjdGlvbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAc2VlICNtYXRjaFxyXG4gICAqIEBkZXByZWNhdGVkXHJcbiAgICogQGluaGVyaXRkb2NcclxuICAgKi9cclxuICBtYXRjaGVzQW55KHVybCwgdHlwZU1hc2ssIGRvY0RvbWFpbiwgc2l0ZWtleSwgc3BlY2lmaWNPbmx5KVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLm1hdGNoKHVybCwgdHlwZU1hc2ssIGRvY0RvbWFpbiwgc2l0ZWtleSwgc3BlY2lmaWNPbmx5KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRlc3RzIHdoZXRoZXIgdGhlIFVSTCBtYXRjaGVzIGFueSBvZiB0aGUga25vd24gZmlsdGVyc1xyXG4gICAqIEBwYXJhbSB7VVJMfG1vZHVsZTp1cmx+VVJMSW5mb3xzdHJpbmd9IHVybFxyXG4gICAqICAgVVJMIHRvIGJlIHRlc3RlZFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0eXBlTWFza1xyXG4gICAqICAgYml0bWFzayBvZiBjb250ZW50IC8gcmVxdWVzdCB0eXBlcyB0byBtYXRjaFxyXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gW2RvY0RvbWFpbl1cclxuICAgKiAgIGRvbWFpbiBuYW1lIG9mIHRoZSBkb2N1bWVudCB0aGF0IGxvYWRzIHRoZSBVUkxcclxuICAgKiBAcGFyYW0gez9zdHJpbmd9IFtzaXRla2V5XVxyXG4gICAqICAgcHVibGljIGtleSBwcm92aWRlZCBieSB0aGUgZG9jdW1lbnRcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzcGVjaWZpY09ubHldXHJcbiAgICogICBzaG91bGQgYmUgYHRydWVgIGlmIGdlbmVyaWMgbWF0Y2hlcyBzaG91bGQgYmUgaWdub3JlZFxyXG4gICAqIEByZXR1cm5zIHs/bW9kdWxlOmZpbHRlckNsYXNzZXMuVVJMRmlsdGVyfVxyXG4gICAqICAgbWF0Y2hpbmcgZmlsdGVyIG9yIGBudWxsYFxyXG4gICAqL1xyXG4gIG1hdGNoKHVybCwgdHlwZU1hc2ssIGRvY0RvbWFpbiwgc2l0ZWtleSwgc3BlY2lmaWNPbmx5KVxyXG4gIHtcclxuICAgIGxldCByZXF1ZXN0ID0gVVJMUmVxdWVzdC5mcm9tKHVybCwgZG9jRG9tYWluKTtcclxuICAgIGxldCBjYW5kaWRhdGVzID0gcmVxdWVzdC5sb3dlckNhc2VIcmVmLm1hdGNoKC9bYS16MC05JV17Mix9fCQvZyk7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSBjYW5kaWRhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKylcclxuICAgIHtcclxuICAgICAgaWYgKGlzQmFkS2V5d29yZChjYW5kaWRhdGVzW2ldKSlcclxuICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgIGxldCByZXN1bHQgPSB0aGlzLmNoZWNrRW50cnlNYXRjaChjYW5kaWRhdGVzW2ldLCByZXF1ZXN0LCB0eXBlTWFzayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpdGVrZXksIHNwZWNpZmljT25seSk7XHJcbiAgICAgIGlmIChyZXN1bHQpXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn07XHJcblxyXG5sZXQgQ29tYmluZWRNYXRjaGVyID1cclxuLyoqXHJcbiAqIENvbWJpbmVzIGEgbWF0Y2hlciBmb3IgYmxvY2tpbmcgYW5kIGV4Y2VwdGlvbiBydWxlcywgYXV0b21hdGljYWxseSBzb3J0c1xyXG4gKiBydWxlcyBpbnRvIHR3byBge0BsaW5rIG1vZHVsZTptYXRjaGVyLk1hdGNoZXIgTWF0Y2hlcn1gIGluc3RhbmNlcy5cclxuICovXHJcbmV4cG9ydHMuQ29tYmluZWRNYXRjaGVyID0gY2xhc3MgQ29tYmluZWRNYXRjaGVyXHJcbntcclxuICBjb25zdHJ1Y3RvcigpXHJcbiAge1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRjaGVyIGZvciBibG9ja2luZyBydWxlcy5cclxuICAgICAqIEB0eXBlIHttb2R1bGU6bWF0Y2hlci5NYXRjaGVyfVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdGhpcy5fYmxvY2tpbmcgPSBuZXcgTWF0Y2hlcigpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWF0Y2hlciBmb3IgZXhjZXB0aW9uIHJ1bGVzLlxyXG4gICAgICogQHR5cGUge21vZHVsZTptYXRjaGVyLk1hdGNoZXJ9XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICB0aGlzLl9hbGxvd2luZyA9IG5ldyBNYXRjaGVyKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb29rdXAgdGFibGUgb2YgcHJldmlvdXMgbWF0Y2ggcmVzdWx0c1xyXG4gICAgICogQHR5cGUge21vZHVsZTpjYWNoaW5nLkNhY2hlLjxzdHJpbmcsID8obW9kdWxlOmZpbHRlckNsYXNzZXMuVVJMRmlsdGVyfFxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0Y2hlclNlYXJjaFJlc3VsdHMpPn1cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHRoaXMuX3Jlc3VsdENhY2hlID0gbmV3IENhY2hlKDEwMDAwKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBzZWUgbW9kdWxlOm1hdGNoZXIuTWF0Y2hlciNjbGVhclxyXG4gICAqL1xyXG4gIGNsZWFyKClcclxuICB7XHJcbiAgICB0aGlzLl9ibG9ja2luZy5jbGVhcigpO1xyXG4gICAgdGhpcy5fYWxsb3dpbmcuY2xlYXIoKTtcclxuICAgIHRoaXMuX3Jlc3VsdENhY2hlLmNsZWFyKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAc2VlIG1vZHVsZTptYXRjaGVyLk1hdGNoZXIjYWRkXHJcbiAgICogQHBhcmFtIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5GaWx0ZXJ9IGZpbHRlclxyXG4gICAqL1xyXG4gIGFkZChmaWx0ZXIpXHJcbiAge1xyXG4gICAgaWYgKGZpbHRlci50eXBlID09IFwiYWxsb3dpbmdcIilcclxuICAgICAgdGhpcy5fYWxsb3dpbmcuYWRkKGZpbHRlcik7XHJcbiAgICBlbHNlXHJcbiAgICAgIHRoaXMuX2Jsb2NraW5nLmFkZChmaWx0ZXIpO1xyXG5cclxuICAgIHRoaXMuX3Jlc3VsdENhY2hlLmNsZWFyKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAc2VlIG1vZHVsZTptYXRjaGVyLk1hdGNoZXIjcmVtb3ZlXHJcbiAgICogQHBhcmFtIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5GaWx0ZXJ9IGZpbHRlclxyXG4gICAqL1xyXG4gIHJlbW92ZShmaWx0ZXIpXHJcbiAge1xyXG4gICAgaWYgKGZpbHRlci50eXBlID09IFwiYWxsb3dpbmdcIilcclxuICAgICAgdGhpcy5fYWxsb3dpbmcucmVtb3ZlKGZpbHRlcik7XHJcbiAgICBlbHNlXHJcbiAgICAgIHRoaXMuX2Jsb2NraW5nLnJlbW92ZShmaWx0ZXIpO1xyXG5cclxuICAgIHRoaXMuX3Jlc3VsdENhY2hlLmNsZWFyKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAc2VlIG1vZHVsZTptYXRjaGVyLk1hdGNoZXIjaGFzXHJcbiAgICogQHBhcmFtIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5GaWx0ZXJ9IGZpbHRlclxyXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAqL1xyXG4gIGhhcyhmaWx0ZXIpXHJcbiAge1xyXG4gICAgaWYgKGZpbHRlci50eXBlID09IFwiYWxsb3dpbmdcIilcclxuICAgICAgcmV0dXJuIHRoaXMuX2FsbG93aW5nLmhhcyhmaWx0ZXIpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2Jsb2NraW5nLmhhcyhmaWx0ZXIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHNlZSBtb2R1bGU6bWF0Y2hlci5NYXRjaGVyI2ZpbmRLZXl3b3JkXHJcbiAgICogQHBhcmFtIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5GaWx0ZXJ9IGZpbHRlclxyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IGtleXdvcmRcclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXHJcbiAgZmluZEtleXdvcmQoZmlsdGVyKVxyXG4gIHtcclxuICAgIGlmIChmaWx0ZXIudHlwZSA9PSBcImFsbG93aW5nXCIpXHJcbiAgICAgIHJldHVybiB0aGlzLl9hbGxvd2luZy5maW5kS2V5d29yZChmaWx0ZXIpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2Jsb2NraW5nLmZpbmRLZXl3b3JkKGZpbHRlcik7XHJcbiAgfVxyXG5cclxuICBfbWF0Y2hJbnRlcm5hbCh1cmwsIHR5cGVNYXNrLCBkb2NEb21haW4sIHNpdGVrZXksIHNwZWNpZmljT25seSlcclxuICB7XHJcbiAgICBsZXQgcmVxdWVzdCA9IFVSTFJlcXVlc3QuZnJvbSh1cmwsIGRvY0RvbWFpbik7XHJcbiAgICBsZXQgY2FuZGlkYXRlcyA9IHJlcXVlc3QubG93ZXJDYXNlSHJlZi5tYXRjaCgvW2EtejAtOSVdezIsfXwkL2cpO1xyXG5cclxuICAgIGxldCBhbGxvd2luZ0hpdCA9IG51bGw7XHJcbiAgICBsZXQgYmxvY2tpbmdIaXQgPSBudWxsO1xyXG5cclxuICAgIC8vIElmIHRoZSB0eXBlIG1hc2sgaW5jbHVkZXMgbm8gdHlwZXMgb3RoZXIgdGhhbiBhbGxvd2luZyB0eXBlcywgd2VcclxuICAgIC8vIGNhbiBza2lwIHRoZSBibG9ja2luZyBmaWx0ZXJzLlxyXG4gICAgaWYgKCh0eXBlTWFzayAmIH5BTExPV0lOR19UWVBFUykgIT0gMClcclxuICAgIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBjYW5kaWRhdGVzLmxlbmd0aDsgIWJsb2NraW5nSGl0ICYmIGkgPCBsOyBpKyspXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAoaXNCYWRLZXl3b3JkKGNhbmRpZGF0ZXNbaV0pKVxyXG4gICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgIGJsb2NraW5nSGl0ID0gdGhpcy5fYmxvY2tpbmcuY2hlY2tFbnRyeU1hdGNoKGNhbmRpZGF0ZXNbaV0sIHJlcXVlc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZU1hc2ssIHNpdGVrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlY2lmaWNPbmx5KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZSB0eXBlIG1hc2sgaW5jbHVkZXMgYW55IGFsbG93aW5nIHR5cGVzLCB3ZSBuZWVkIHRvIGNoZWNrIHRoZVxyXG4gICAgLy8gYWxsb3dpbmcgZmlsdGVycy5cclxuICAgIGlmIChibG9ja2luZ0hpdCB8fCAodHlwZU1hc2sgJiBBTExPV0lOR19UWVBFUykgIT0gMClcclxuICAgIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBjYW5kaWRhdGVzLmxlbmd0aDsgIWFsbG93aW5nSGl0ICYmIGkgPCBsOyBpKyspXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAoaXNCYWRLZXl3b3JkKGNhbmRpZGF0ZXNbaV0pKVxyXG4gICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgIGFsbG93aW5nSGl0ID0gdGhpcy5fYWxsb3dpbmcuY2hlY2tFbnRyeU1hdGNoKGNhbmRpZGF0ZXNbaV0sIHJlcXVlc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZU1hc2ssIHNpdGVrZXkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFsbG93aW5nSGl0IHx8IGJsb2NraW5nSGl0O1xyXG4gIH1cclxuXHJcbiAgX3NlYXJjaEludGVybmFsKHVybCwgdHlwZU1hc2ssIGRvY0RvbWFpbiwgc2l0ZWtleSwgc3BlY2lmaWNPbmx5LCBmaWx0ZXJUeXBlKVxyXG4gIHtcclxuICAgIGxldCBoaXRzID0ge307XHJcblxyXG4gICAgbGV0IHNlYXJjaEJsb2NraW5nID0gZmlsdGVyVHlwZSA9PSBcImJsb2NraW5nXCIgfHwgZmlsdGVyVHlwZSA9PSBcImFsbFwiO1xyXG4gICAgbGV0IHNlYXJjaEFsbG93aW5nID0gZmlsdGVyVHlwZSA9PSBcImFsbG93aW5nXCIgfHwgZmlsdGVyVHlwZSA9PSBcImFsbFwiO1xyXG5cclxuICAgIGlmIChzZWFyY2hCbG9ja2luZylcclxuICAgICAgaGl0cy5ibG9ja2luZyA9IFtdO1xyXG5cclxuICAgIGlmIChzZWFyY2hBbGxvd2luZylcclxuICAgICAgaGl0cy5hbGxvd2luZyA9IFtdO1xyXG5cclxuICAgIC8vIElmIHRoZSB0eXBlIG1hc2sgaW5jbHVkZXMgbm8gdHlwZXMgb3RoZXIgdGhhbiBhbGxvd2luZyB0eXBlcywgd2VcclxuICAgIC8vIGNhbiBza2lwIHRoZSBibG9ja2luZyBmaWx0ZXJzLlxyXG4gICAgaWYgKCh0eXBlTWFzayAmIH5BTExPV0lOR19UWVBFUykgPT0gMClcclxuICAgICAgc2VhcmNoQmxvY2tpbmcgPSBmYWxzZTtcclxuXHJcbiAgICBsZXQgcmVxdWVzdCA9IFVSTFJlcXVlc3QuZnJvbSh1cmwsIGRvY0RvbWFpbik7XHJcbiAgICBsZXQgY2FuZGlkYXRlcyA9IHJlcXVlc3QubG93ZXJDYXNlSHJlZi5tYXRjaCgvW2EtejAtOSVdezIsfXwkL2cpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwLCBsID0gY2FuZGlkYXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIGlmIChpc0JhZEtleXdvcmQoY2FuZGlkYXRlc1tpXSkpXHJcbiAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICBpZiAoc2VhcmNoQmxvY2tpbmcpXHJcbiAgICAgIHtcclxuICAgICAgICB0aGlzLl9ibG9ja2luZy5jaGVja0VudHJ5TWF0Y2goY2FuZGlkYXRlc1tpXSwgcmVxdWVzdCwgdHlwZU1hc2ssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpdGVrZXksIHNwZWNpZmljT25seSwgaGl0cy5ibG9ja2luZyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChzZWFyY2hBbGxvd2luZylcclxuICAgICAge1xyXG4gICAgICAgIHRoaXMuX2FsbG93aW5nLmNoZWNrRW50cnlNYXRjaChjYW5kaWRhdGVzW2ldLCByZXF1ZXN0LCB0eXBlTWFzayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l0ZWtleSwgZmFsc2UsIGhpdHMuYWxsb3dpbmcpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGhpdHM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAc2VlICNtYXRjaFxyXG4gICAqIEBkZXByZWNhdGVkXHJcbiAgICogQGluaGVyaXRkb2NcclxuICAgKi9cclxuICBtYXRjaGVzQW55KHVybCwgdHlwZU1hc2ssIGRvY0RvbWFpbiwgc2l0ZWtleSwgc3BlY2lmaWNPbmx5KVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLm1hdGNoKHVybCwgdHlwZU1hc2ssIGRvY0RvbWFpbiwgc2l0ZWtleSwgc3BlY2lmaWNPbmx5KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBzZWUgbW9kdWxlOm1hdGNoZXIuTWF0Y2hlciNtYXRjaFxyXG4gICAqIEBpbmhlcml0ZG9jXHJcbiAgICovXHJcbiAgbWF0Y2godXJsLCB0eXBlTWFzaywgZG9jRG9tYWluLCBzaXRla2V5LCBzcGVjaWZpY09ubHkpXHJcbiAge1xyXG4gICAgbGV0IGtleSA9IGAke3VybH0gJHt0eXBlTWFza30gJHtkb2NEb21haW59ICR7c2l0ZWtleX0gJHtzcGVjaWZpY09ubHl9YDtcclxuICAgIGxldCByZXN1bHQgPSB0aGlzLl9yZXN1bHRDYWNoZS5nZXQoa2V5KTtcclxuICAgIGlmICh0eXBlb2YgcmVzdWx0ICE9IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcblxyXG4gICAgcmVzdWx0ID0gdGhpcy5fbWF0Y2hJbnRlcm5hbCh1cmwsIHR5cGVNYXNrLCBkb2NEb21haW4sIHNpdGVrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWNpZmljT25seSk7XHJcblxyXG4gICAgdGhpcy5fcmVzdWx0Q2FjaGUuc2V0KGtleSwgcmVzdWx0KTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHR5cGVkZWYge29iamVjdH0gTWF0Y2hlclNlYXJjaFJlc3VsdHNcclxuICAgKiBAcHJvcGVydHkge0FycmF5Ljxtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5CbG9ja2luZ0ZpbHRlcj59IFtibG9ja2luZ10gTGlzdCBvZlxyXG4gICAqICAgYmxvY2tpbmcgZmlsdGVycyBmb3VuZC5cclxuICAgKiBAcHJvcGVydHkge0FycmF5Ljxtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5BbGxvd2luZ0ZpbHRlcj59IFthbGxvd2luZ10gTGlzdFxyXG4gICAqICAgb2YgYWxsb3dpbmcgZmlsdGVycyBmb3VuZC5cclxuICAgKi9cclxuXHJcbiAgLyoqXHJcbiAgICogU2VhcmNoZXMgYWxsIGJsb2NraW5nIGFuZCBhbGxvd2luZyBmaWx0ZXJzIGFuZCByZXR1cm5zIHJlc3VsdHMgbWF0Y2hpbmdcclxuICAgKiB0aGUgZ2l2ZW4gcGFyYW1ldGVycy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7VVJMfG1vZHVsZTp1cmx+VVJMSW5mb3xzdHJpbmd9IHVybFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0eXBlTWFza1xyXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gW2RvY0RvbWFpbl1cclxuICAgKiBAcGFyYW0gez9zdHJpbmd9IFtzaXRla2V5XVxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3NwZWNpZmljT25seV1cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2ZpbHRlclR5cGVdIFRoZSB0eXBlcyBvZiBmaWx0ZXJzIHRvIGxvb2sgZm9yLiBUaGlzIGNhbiBiZVxyXG4gICAqICAgYFwiYmxvY2tpbmdcImAsIGBcImFsbG93aW5nXCJgLCBvciBgXCJhbGxcImAgKGRlZmF1bHQpLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge01hdGNoZXJTZWFyY2hSZXN1bHRzfVxyXG4gICAqL1xyXG4gIHNlYXJjaCh1cmwsIHR5cGVNYXNrLCBkb2NEb21haW4sIHNpdGVrZXksIHNwZWNpZmljT25seSwgZmlsdGVyVHlwZSA9IFwiYWxsXCIpXHJcbiAge1xyXG4gICAgbGV0IGtleSA9IGAqICR7dXJsfSAke3R5cGVNYXNrfSAke2RvY0RvbWFpbn0gJHtzaXRla2V5fSBgICtcclxuICAgICAgICAgICAgICBgJHtzcGVjaWZpY09ubHl9ICR7ZmlsdGVyVHlwZX1gO1xyXG5cclxuICAgIGxldCByZXN1bHQgPSB0aGlzLl9yZXN1bHRDYWNoZS5nZXQoa2V5KTtcclxuICAgIGlmICh0eXBlb2YgcmVzdWx0ICE9IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcblxyXG4gICAgcmVzdWx0ID0gdGhpcy5fc2VhcmNoSW50ZXJuYWwodXJsLCB0eXBlTWFzaywgZG9jRG9tYWluLCBzaXRla2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlY2lmaWNPbmx5LCBmaWx0ZXJUeXBlKTtcclxuXHJcbiAgICB0aGlzLl9yZXN1bHRDYWNoZS5zZXQoa2V5LCByZXN1bHQpO1xyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUZXN0cyB3aGV0aGVyIHRoZSBVUkwgaXMgYWxsb3dsaXN0ZWRcclxuICAgKiBAc2VlIG1vZHVsZTptYXRjaGVyLk1hdGNoZXIjbWF0Y2hcclxuICAgKiBAaW5oZXJpdGRvY1xyXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAqL1xyXG4gIGlzQWxsb3dsaXN0ZWQodXJsLCB0eXBlTWFzaywgZG9jRG9tYWluLCBzaXRla2V5KVxyXG4gIHtcclxuICAgIHJldHVybiAhIXRoaXMuX2FsbG93aW5nLm1hdGNoKHVybCwgdHlwZU1hc2ssIGRvY0RvbWFpbiwgc2l0ZWtleSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFNoYXJlZCBge0BsaW5rIG1vZHVsZTptYXRjaGVyLkNvbWJpbmVkTWF0Y2hlciBDb21iaW5lZE1hdGNoZXJ9YCBpbnN0YW5jZVxyXG4gKiB0aGF0IHNob3VsZCB1c3VhbGx5IGJlIHVzZWQuXHJcbiAqIEB0eXBlIHttb2R1bGU6bWF0Y2hlci5Db21iaW5lZE1hdGNoZXJ9XHJcbiAqL1xyXG5leHBvcnRzLmRlZmF1bHRNYXRjaGVyID0gbmV3IENvbWJpbmVkTWF0Y2hlcigpO1xyXG4iLCIvKlxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBBZGJsb2NrIFBsdXMgPGh0dHBzOi8vYWRibG9ja3BsdXMub3JnLz4sXHJcbiAqIENvcHlyaWdodCAoQykgMjAwNi1wcmVzZW50IGV5ZW8gR21iSFxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBhc1xyXG4gKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICpcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCBBZGJsb2NrIFBsdXMuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqL1xyXG5cclxuLyoqIEBtb2R1bGUgKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuLyoqXHJcbiAqIEBmaWxlT3ZlcnZpZXcgSGFuZGxlcyBub3RpZmljYXRpb25zLlxyXG4gKi9cclxuXHJcbmNvbnN0IHtQcmVmc30gPSByZXF1aXJlKFwicHJlZnNcIik7XHJcblxyXG5jb25zdCB7TUlMTElTX0lOX01JTlVURSwgTUlMTElTX0lOX0hPVVIsIE1JTExJU19JTl9EQVl9ID0gcmVxdWlyZShcIi4vdGltZVwiKTtcclxuY29uc3Qge0Rvd25sb2FkZXIsIERvd25sb2FkYWJsZX0gPSByZXF1aXJlKFwiLi9kb3dubG9hZGVyXCIpO1xyXG5jb25zdCB7Y29tcGFyZVZlcnNpb25zfSA9IHJlcXVpcmUoXCIuL3ZlcnNpb25zXCIpO1xyXG5jb25zdCB7YW5hbHl0aWNzfSA9IHJlcXVpcmUoXCIuL2FuYWx5dGljc1wiKTtcclxuXHJcbmNvbnN0IElOSVRJQUxfREVMQVkgPSAxICogTUlMTElTX0lOX01JTlVURTtcclxuY29uc3QgQ0hFQ0tfSU5URVJWQUwgPSAxICogTUlMTElTX0lOX0hPVVI7XHJcbmNvbnN0IEVYUElSQVRJT05fSU5URVJWQUwgPSAxICogTUlMTElTX0lOX0RBWTtcclxuXHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2NhbGUgZm9yIHRoZSBsb2NhbGl6YXRpb24gb2Ygbm90aWZpY2F0aW9uIHRleHRzLlxyXG4gKiBAdHlwZSB7c3RyaW5nfVxyXG4gKiBAZGVmYXVsdFxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9MT0NBTEUgPSBcImVuLVVTXCI7XHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgbnVtZXJpY2FsIHNldmVyaXR5IG9mIGEgbm90aWZpY2F0aW9uLlxyXG4gKiBAcGFyYW0ge29iamVjdH0gbm90aWZpY2F0aW9uIFRoZSBub3RpZmljYXRpb24uXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSBudW1lcmljYWwgc2V2ZXJpdHkgb2YgdGhlIG5vdGlmaWNhdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIGdldE51bWVyaWNhbFNldmVyaXR5KG5vdGlmaWNhdGlvbilcclxue1xyXG4gIHN3aXRjaCAobm90aWZpY2F0aW9uLnR5cGUpXHJcbiAge1xyXG4gICAgY2FzZSBcImluZm9ybWF0aW9uXCI6XHJcbiAgICAgIHJldHVybiAwO1xyXG4gICAgY2FzZSBcIm5ld3RhYlwiOlxyXG4gICAgY2FzZSBcInJlbGVudGxlc3NcIjpcclxuICAgICAgcmV0dXJuIDE7XHJcbiAgICBjYXNlIFwiY3JpdGljYWxcIjpcclxuICAgICAgcmV0dXJuIDI7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gMDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNhdmVzIG5vdGlmaWNhdGlvbiBkYXRhIHRvIHByZWZlcmVuY2VzLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW2tleV0gVGhlIGtleSB0byBzYXZlLlxyXG4gKi9cclxuZnVuY3Rpb24gc2F2ZU5vdGlmaWNhdGlvbkRhdGEoa2V5ID0gXCJub3RpZmljYXRpb25kYXRhXCIpXHJcbntcclxuICAvLyBKU09OIHZhbHVlcyBhcmVuJ3Qgc2F2ZWQgdW5sZXNzIHRoZXkgYXJlIGFzc2lnbmVkIGEgZGlmZmVyZW50IG9iamVjdC5cclxuICBQcmVmc1trZXldID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShQcmVmc1trZXldKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMb2NhbGl6ZXMgYSBub3RpZmljYXRpb24gdGV4dC5cclxuICpcclxuICogQHBhcmFtIHtvYmplY3R9IHRyYW5zbGF0aW9ucyBUaGUgc2V0IG9mIHRyYW5zbGF0aW9ucyBmcm9tIHdoaWNoIHRvIHNlbGVjdFxyXG4gKiAgIHRoZSBsb2NhbGl6YXRpb24uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhbGUgVGhlIGxvY2FsZSBzdHJpbmcgdG8gdXNlIGZvciB0aGUgc2VsZWN0aW9uLiBJZiBub1xyXG4gKiAgIGxvY2FsaXplZCB2ZXJzaW9uIGlzIGZvdW5kIGluIHRoZSBgdHJhbnNsYXRpb25zYCBvYmplY3QgZm9yIHRoZSBnaXZlblxyXG4gKiAgIGxvY2FsZSwgdGhlXHJcbiAqICAge0BsaW5rIG1vZHVsZTpub3RpZmljYXRpb25zfkRFRkFVTFRfTE9DQUxFIGRlZmF1bHQgbG9jYWxlfSBpcyB1c2VkLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7Kn0gVGhlIGxvY2FsaXplZCB0ZXh0OyBgdW5kZWZpbmVkYCBpZiBubyBsb2NhbGl6ZWQgdmVyc2lvbiBpc1xyXG4gKiAgIGZvdW5kIGluIHRoZSBgdHJhbnNsYXRpb25zYCBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBsb2NhbGl6ZSh0cmFuc2xhdGlvbnMsIGxvY2FsZSlcclxue1xyXG4gIGlmIChsb2NhbGUgaW4gdHJhbnNsYXRpb25zKVxyXG4gICAgcmV0dXJuIHRyYW5zbGF0aW9uc1tsb2NhbGVdO1xyXG5cclxuICBsZXQgbGFuZ3VhZ2VQYXJ0ID0gbG9jYWxlLnN1YnN0cmluZygwLCBsb2NhbGUuaW5kZXhPZihcIi1cIikpO1xyXG4gIGlmIChsYW5ndWFnZVBhcnQgJiYgbGFuZ3VhZ2VQYXJ0IGluIHRyYW5zbGF0aW9ucylcclxuICAgIHJldHVybiB0cmFuc2xhdGlvbnNbbGFuZ3VhZ2VQYXJ0XTtcclxuXHJcbiAgcmV0dXJuIHRyYW5zbGF0aW9uc1tERUZBVUxUX0xPQ0FMRV07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzVmFsaWROb3RpZmljYXRpb24obm90aWZpY2F0aW9uKVxyXG57XHJcbiAgLy8gT25seSBub3RpZmljYXRpb25zIHRoYXQgYXJlIG1lYW50IHRvIGJlIG9wZW5lZCBpbiBhIG5ldyB0YWIgbXVzdFxyXG4gIC8vIGNvbnRhaW4gYXQgbGVhc3Qgb25lIFVSTCB0byBvcGVuLlxyXG4gIGlmIChub3RpZmljYXRpb24udHlwZSA9PSBcIm5ld3RhYlwiICYmXHJcbiAgICAgICEobm90aWZpY2F0aW9uLmxpbmtzICYmIG5vdGlmaWNhdGlvbi5saW5rcy5sZW5ndGggPiAwKSlcclxuICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBge0BsaW5rIG1vZHVsZTpub3RpZmljYXRpb25zLm5vdGlmaWNhdGlvbnN9YCBpbXBsZW1lbnRhdGlvbi5cclxuICovXHJcbmNsYXNzIE5vdGlmaWNhdGlvbnNcclxue1xyXG4gIC8qKlxyXG4gICAqIEBoaWRlY29uc3RydWN0b3JcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcigpXHJcbiAge1xyXG4gICAgLyoqXHJcbiAgICAgKiBXaGV0aGVyIHRoZSBmZXRjaGluZyBvZiBub3RpZmljYXRpb25zIGhhcyBiZWVuIHN0YXJ0ZWQuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICB0aGlzLl9zdGFydGVkID0gZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGV0aGVyIGFsbCBpZ25vcmFibGUgbm90aWZpY2F0aW9ucyBzaG91bGQgYmUgaWdub3JlZC5cclxuICAgICAqIEB0eXBlIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICB0aGlzLmlnbm9yZWQgPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBsb2NhbGUgZm9yIHRoZSBsb2NhbGl6YXRpb24gb2Ygbm90aWZpY2F0aW9uIHRleHRzLlxyXG4gICAgICogQHR5cGUge3N0cmluZ31cclxuICAgICAqIEBkZWZhdWx0IHtAbGluayBtb2R1bGU6bm90aWZpY2F0aW9uc35ERUZBVUxUX0xPQ0FMRX1cclxuICAgICAqL1xyXG4gICAgdGhpcy5sb2NhbGUgPSBERUZBVUxUX0xPQ0FMRTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIExpc3RlbmVycyBmb3Igbm90aWZpY2F0aW9ucyB0byBiZSBzaG93bi5cclxuICAgICAqIEB0eXBlIHtTZXQuPGZ1bmN0aW9uPn1cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHRoaXMuX3Nob3dMaXN0ZW5lcnMgPSBuZXcgU2V0KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2NhbCBub3RpZmljYXRpb25zIGFkZGVkIHZpYVxyXG4gICAgICogYHtAbGluayBtb2R1bGU6bm90aWZpY2F0aW9uc35Ob3RpZmljYXRpb25zI2FkZE5vdGlmaWNhdGlvblxyXG4gICAgICogICAgICAgICBhZGROb3RpZmljYXRpb24oKX1gLlxyXG4gICAgICogQHR5cGUge1NldC48b2JqZWN0Pn1cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHRoaXMuX2xvY2FsTm90aWZpY2F0aW9ucyA9IG5ldyBTZXQoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBvYmplY3QgcHJvdmlkaW5nIGFjdHVhbCBkb3dubG9hZGluZyBmdW5jdGlvbmFsaXR5LlxyXG4gICAgICogQHR5cGUge21vZHVsZTpkb3dubG9hZGVyLkRvd25sb2FkZXJ9XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICB0aGlzLl9kb3dubG9hZGVyID0gbmV3IERvd25sb2FkZXIodGhpcy5fZ2V0RG93bmxvYWRhYmxlcy5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICB0aGlzLl9kb3dubG9hZGVyLm9uRXhwaXJhdGlvbkNoYW5nZSA9IHRoaXMuX29uRXhwaXJhdGlvbkNoYW5nZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fZG93bmxvYWRlci5vbkRvd25sb2FkU3VjY2VzcyA9IHRoaXMuX29uRG93bmxvYWRTdWNjZXNzLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9kb3dubG9hZGVyLm9uRG93bmxvYWRFcnJvciA9IHRoaXMuX29uRG93bmxvYWRFcnJvci5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fb25CbG9ja2VkVG90YWwgPSB0aGlzLl9vbkJsb2NrZWRUb3RhbC5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RhcnRzIGZldGNoaW5nIG5vdGlmaWNhdGlvbnMuXHJcbiAgICpcclxuICAgKiBObyBub3RpZmljYXRpb25zIGFyZSBmZXRjaGVkIHVudGlsIHRoaXMgZnVuY3Rpb24gaGFzIGJlZW4gY2FsbGVkIGF0IGxlYXN0XHJcbiAgICogb25jZS5cclxuICAgKi9cclxuICBzdGFydCgpXHJcbiAge1xyXG4gICAgaWYgKHRoaXMuX3N0YXJ0ZWQpXHJcbiAgICAgIHJldHVybjtcclxuXHJcbiAgICBQcmVmcy5vbihcImJsb2NrZWRfdG90YWxcIiwgdGhpcy5fb25CbG9ja2VkVG90YWwpO1xyXG5cclxuICAgIHRoaXMuX2Rvd25sb2FkZXIuc2NoZWR1bGVDaGVja3MoQ0hFQ0tfSU5URVJWQUwsIElOSVRJQUxfREVMQVkpO1xyXG4gICAgdGhpcy5fc3RhcnRlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdG9wcyBmZXRjaGluZyBub3RpZmljYXRpb25zLlxyXG4gICAqL1xyXG4gIHN0b3AoKVxyXG4gIHtcclxuICAgIHRoaXMuX3N0YXJ0ZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuX2Rvd25sb2FkZXIudW5zY2hlZHVsZUNoZWNrcygpO1xyXG5cclxuICAgIFByZWZzLm9mZihcImJsb2NrZWRfdG90YWxcIiwgdGhpcy5fb25CbG9ja2VkVG90YWwpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogWWllbGRzIGEgYHtAbGluayBtb2R1bGU6ZG93bmxvYWRlci5Eb3dubG9hZGFibGUgRG93bmxvYWRhYmxlfWAgaW5zdGFuY2VcclxuICAgKiBmb3IgdGhlIG5vdGlmaWNhdGlvbnMgZG93bmxvYWQuXHJcbiAgICogQHlpZWxkcyB7bW9kdWxlOmRvd25sb2FkZXIuRG93bmxvYWRhYmxlfVxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgKl9nZXREb3dubG9hZGFibGVzKClcclxuICB7XHJcbiAgICBsZXQge25vdGlmaWNhdGlvbnVybDogdXJsLCBub3RpZmljYXRpb25kYXRhfSA9IFByZWZzO1xyXG5cclxuICAgIGxldCBkb3dubG9hZGFibGUgPSBuZXcgRG93bmxvYWRhYmxlKHVybCk7XHJcblxyXG4gICAgaWYgKGFuYWx5dGljcy5pc1RydXN0ZWQodXJsKSlcclxuICAgICAgZG93bmxvYWRhYmxlLmZpcnN0VmVyc2lvbiA9IGFuYWx5dGljcy5nZXRGaXJzdFZlcnNpb24oKTtcclxuXHJcbiAgICBpZiAodHlwZW9mIG5vdGlmaWNhdGlvbmRhdGEubGFzdEVycm9yID09IFwibnVtYmVyXCIpXHJcbiAgICAgIGRvd25sb2FkYWJsZS5sYXN0RXJyb3IgPSBub3RpZmljYXRpb25kYXRhLmxhc3RFcnJvcjtcclxuICAgIGlmICh0eXBlb2Ygbm90aWZpY2F0aW9uZGF0YS5sYXN0Q2hlY2sgPT0gXCJudW1iZXJcIilcclxuICAgICAgZG93bmxvYWRhYmxlLmxhc3RDaGVjayA9IG5vdGlmaWNhdGlvbmRhdGEubGFzdENoZWNrO1xyXG5cclxuICAgIGlmICh0eXBlb2Ygbm90aWZpY2F0aW9uZGF0YS5kYXRhID09IFwib2JqZWN0XCIgJiZcclxuICAgICAgICBcInZlcnNpb25cIiBpbiBub3RpZmljYXRpb25kYXRhLmRhdGEpXHJcbiAgICAgIGRvd25sb2FkYWJsZS5sYXN0VmVyc2lvbiA9IG5vdGlmaWNhdGlvbmRhdGEuZGF0YS52ZXJzaW9uO1xyXG5cclxuICAgIGlmICh0eXBlb2Ygbm90aWZpY2F0aW9uZGF0YS5zb2Z0RXhwaXJhdGlvbiA9PSBcIm51bWJlclwiKVxyXG4gICAgICBkb3dubG9hZGFibGUuc29mdEV4cGlyYXRpb24gPSBub3RpZmljYXRpb25kYXRhLnNvZnRFeHBpcmF0aW9uO1xyXG4gICAgaWYgKHR5cGVvZiBub3RpZmljYXRpb25kYXRhLmhhcmRFeHBpcmF0aW9uID09IFwibnVtYmVyXCIpXHJcbiAgICAgIGRvd25sb2FkYWJsZS5oYXJkRXhwaXJhdGlvbiA9IG5vdGlmaWNhdGlvbmRhdGEuaGFyZEV4cGlyYXRpb247XHJcbiAgICBpZiAodHlwZW9mIG5vdGlmaWNhdGlvbmRhdGEuZG93bmxvYWRDb3VudCA9PSBcIm51bWJlclwiKVxyXG4gICAgICBkb3dubG9hZGFibGUuZG93bmxvYWRDb3VudCA9IG5vdGlmaWNhdGlvbmRhdGEuZG93bmxvYWRDb3VudDtcclxuXHJcbiAgICB5aWVsZCBkb3dubG9hZGFibGU7XHJcbiAgfVxyXG5cclxuICBfb25FeHBpcmF0aW9uQ2hhbmdlKGRvd25sb2FkYWJsZSlcclxuICB7XHJcbiAgICBQcmVmcy5ub3RpZmljYXRpb25kYXRhLmxhc3RDaGVjayA9IGRvd25sb2FkYWJsZS5sYXN0Q2hlY2s7XHJcbiAgICBQcmVmcy5ub3RpZmljYXRpb25kYXRhLnNvZnRFeHBpcmF0aW9uID0gZG93bmxvYWRhYmxlLnNvZnRFeHBpcmF0aW9uO1xyXG4gICAgUHJlZnMubm90aWZpY2F0aW9uZGF0YS5oYXJkRXhwaXJhdGlvbiA9IGRvd25sb2FkYWJsZS5oYXJkRXhwaXJhdGlvbjtcclxuXHJcbiAgICBzYXZlTm90aWZpY2F0aW9uRGF0YSgpO1xyXG4gIH1cclxuXHJcbiAgX29uRG93bmxvYWRTdWNjZXNzKGRvd25sb2FkYWJsZSwgcmVzcG9uc2VUZXh0LCBlcnJvckNhbGxiYWNrLFxyXG4gICAgICAgICAgICAgICAgICAgICByZWRpcmVjdENhbGxiYWNrKVxyXG4gIHtcclxuICAgIHRyeVxyXG4gICAge1xyXG4gICAgICBsZXQgZGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2VUZXh0KTtcclxuXHJcbiAgICAgIGlmICh0eXBlb2YgZGF0YS52ZXJzaW9uID09IFwic3RyaW5nXCIgJiZcclxuICAgICAgICAgIGFuYWx5dGljcy5pc1RydXN0ZWQoZG93bmxvYWRhYmxlLnJlZGlyZWN0VVJMIHx8IGRvd25sb2FkYWJsZS51cmwpKVxyXG4gICAgICAgIGFuYWx5dGljcy5yZWNvcmRWZXJzaW9uKGRhdGEudmVyc2lvbik7XHJcblxyXG4gICAgICBsZXQgbm90aWZpY2F0aW9ucyA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBub3RpZmljYXRpb24gb2YgZGF0YS5ub3RpZmljYXRpb25zKVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKCFpc1ZhbGlkTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbikpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29uc29sZS53YXJuKGBJbnZhbGlkIG5vdGlmaWNhdGlvbiB3aXRoIElEIFwiJHtub3RpZmljYXRpb24uaWR9XCJgKTtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFwic2V2ZXJpdHlcIiBpbiBub3RpZmljYXRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWYgKCEoXCJ0eXBlXCIgaW4gbm90aWZpY2F0aW9uKSlcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uLnR5cGUgPSBub3RpZmljYXRpb24uc2V2ZXJpdHk7XHJcbiAgICAgICAgICBkZWxldGUgbm90aWZpY2F0aW9uLnNldmVyaXR5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbm90aWZpY2F0aW9ucy5wdXNoKG5vdGlmaWNhdGlvbik7XHJcbiAgICAgIH1cclxuICAgICAgZGF0YS5ub3RpZmljYXRpb25zID0gbm90aWZpY2F0aW9ucztcclxuXHJcbiAgICAgIFByZWZzLm5vdGlmaWNhdGlvbmRhdGEuZGF0YSA9IGRhdGE7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpXHJcbiAgICB7XHJcbiAgICAgIGNvbnNvbGUud2FybihlcnJvcik7XHJcbiAgICAgIGVycm9yQ2FsbGJhY2soXCJzeW5jaHJvbml6ZV9pbnZhbGlkX2RhdGFcIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBQcmVmcy5ub3RpZmljYXRpb25kYXRhLmxhc3RFcnJvciA9IDA7XHJcbiAgICBQcmVmcy5ub3RpZmljYXRpb25kYXRhLmRvd25sb2FkU3RhdHVzID0gXCJzeW5jaHJvbml6ZV9va1wiO1xyXG4gICAgW1xyXG4gICAgICBQcmVmcy5ub3RpZmljYXRpb25kYXRhLnNvZnRFeHBpcmF0aW9uLFxyXG4gICAgICBQcmVmcy5ub3RpZmljYXRpb25kYXRhLmhhcmRFeHBpcmF0aW9uXHJcbiAgICBdID0gdGhpcy5fZG93bmxvYWRlci5wcm9jZXNzRXhwaXJhdGlvbkludGVydmFsKEVYUElSQVRJT05fSU5URVJWQUwpO1xyXG4gICAgUHJlZnMubm90aWZpY2F0aW9uZGF0YS5kb3dubG9hZENvdW50ID0gZG93bmxvYWRhYmxlLmRvd25sb2FkQ291bnQ7XHJcblxyXG4gICAgc2F2ZU5vdGlmaWNhdGlvbkRhdGEoKTtcclxuXHJcbiAgICB0aGlzLnNob3dOZXh0KCk7XHJcbiAgfVxyXG5cclxuICBfb25Eb3dubG9hZEVycm9yKGRvd25sb2FkYWJsZSwgZG93bmxvYWRVUkwsIGVycm9yLCByZXNwb25zZVN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0Q2FsbGJhY2spXHJcbiAge1xyXG4gICAgUHJlZnMubm90aWZpY2F0aW9uZGF0YS5sYXN0RXJyb3IgPSBEYXRlLm5vdygpO1xyXG4gICAgUHJlZnMubm90aWZpY2F0aW9uZGF0YS5kb3dubG9hZFN0YXR1cyA9IGVycm9yO1xyXG5cclxuICAgIHNhdmVOb3RpZmljYXRpb25EYXRhKCk7XHJcbiAgfVxyXG5cclxuICBfb25CbG9ja2VkVG90YWwoKVxyXG4gIHtcclxuICAgIHRoaXMuc2hvd05leHQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgYSBsaXN0ZW5lciBmb3Igbm90aWZpY2F0aW9ucyB0byBiZSBzaG93bi5cclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBsaXN0ZW5lciBMaXN0ZW5lciB0byBiZSBpbnZva2VkIHdoZW4gYSBub3RpZmljYXRpb24gaXNcclxuICAgKiAgIHRvIGJlIHNob3duLlxyXG4gICAqL1xyXG4gIGFkZFNob3dMaXN0ZW5lcihsaXN0ZW5lcilcclxuICB7XHJcbiAgICB0aGlzLl9zaG93TGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIHRoZSBzdXBwbGllZCBsaXN0ZW5lci5cclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBsaXN0ZW5lciBMaXN0ZW5lciB0aGF0IHdhcyBhZGRlZCB2aWFcclxuICAgKiAgIGB7QGxpbmsgbW9kdWxlOm5vdGlmaWNhdGlvbnN+Tm90aWZpY2F0aW9ucyNhZGRTaG93TGlzdGVuZXJcclxuICAgKiAgICAgICAgICAgYWRkU2hvd0xpc3RlbmVyKCl9YC5cclxuICAgKi9cclxuICByZW1vdmVTaG93TGlzdGVuZXIobGlzdGVuZXIpXHJcbiAge1xyXG4gICAgdGhpcy5fc2hvd0xpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyB3aGV0aGVyIHVzZXIgcHJlZmVyZW5jZXMgaW5kaWNhdGUgdGhhdCBub3RpZmljYXRpb25zXHJcbiAgICogc2hvdWxkIGJlIGlnbm9yZWQuXHJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cclxuICAgKi9cclxuICBzaG91bGRJZ25vcmVOb3RpZmljYXRpb25zKClcclxuICB7XHJcbiAgICByZXR1cm4gdGhpcy5pZ25vcmVkIHx8XHJcbiAgICAgIFByZWZzLm5vdGlmaWNhdGlvbnNfaWdub3JlZGNhdGVnb3JpZXMuaW5jbHVkZXMoXCIqXCIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhbGwgbG9jYWwgYW5kIHJlbW90ZSBub3RpZmljYXRpb25zLlxyXG4gICAqIEByZXR1cm5zIHtBcnJheS48b2JqZWN0Pn0gQWxsIGxvY2FsIGFuZCByZW1vdGUgbm90aWZpY2F0aW9ucy5cclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIF9nZXROb3RpZmljYXRpb25zKClcclxuICB7XHJcbiAgICBsZXQgcmVtb3RlTm90aWZpY2F0aW9ucyA9IFtdO1xyXG4gICAgaWYgKHR5cGVvZiBQcmVmcy5ub3RpZmljYXRpb25kYXRhLmRhdGEgPT0gXCJvYmplY3RcIiAmJlxyXG4gICAgICAgIFByZWZzLm5vdGlmaWNhdGlvbmRhdGEuZGF0YS5ub3RpZmljYXRpb25zIGluc3RhbmNlb2YgQXJyYXkpXHJcbiAgICAgIHJlbW90ZU5vdGlmaWNhdGlvbnMgPSBQcmVmcy5ub3RpZmljYXRpb25kYXRhLmRhdGEubm90aWZpY2F0aW9ucztcclxuXHJcbiAgICByZXR1cm4gWy4uLnRoaXMuX2xvY2FsTm90aWZpY2F0aW9ucywgLi4ucmVtb3RlTm90aWZpY2F0aW9uc107XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZXRlcm1pbmVzIHdoaWNoIG5vdGlmaWNhdGlvbiBpcyB0byBiZSBzaG93biBuZXh0LlxyXG4gICAqIEByZXR1cm5zIHs/b2JqZWN0fSBUaGUgbm90aWZpY2F0aW9uIHRvIGJlIHNob3duLCBvciBgbnVsbGAgaWYgdGhlcmUgaXNcclxuICAgKiAgIG5vbmUuXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBfZ2V0TmV4dFRvU2hvdygpXHJcbiAge1xyXG4gICAgbGV0IG5vdGlmaWNhdGlvbnMgPSB0aGlzLl9nZXROb3RpZmljYXRpb25zKCk7XHJcbiAgICBpZiAobm90aWZpY2F0aW9ucy5sZW5ndGggPT0gMClcclxuICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgY29uc3Qge2FkZG9uTmFtZSwgYWRkb25WZXJzaW9uLCBhcHBsaWNhdGlvbiwgYXBwbGljYXRpb25WZXJzaW9uLFxyXG4gICAgICAgICAgIHBsYXRmb3JtLCBwbGF0Zm9ybVZlcnNpb259ID0gcmVxdWlyZShcImluZm9cIik7XHJcblxyXG4gICAgbGV0IHRhcmdldENoZWNrcyA9IHtcclxuICAgICAgZXh0ZW5zaW9uOiB2ID0+IHYgPT0gYWRkb25OYW1lLFxyXG4gICAgICBleHRlbnNpb25NaW5WZXJzaW9uOlxyXG4gICAgICAgIHYgPT4gY29tcGFyZVZlcnNpb25zKGFkZG9uVmVyc2lvbiwgdikgPj0gMCxcclxuICAgICAgZXh0ZW5zaW9uTWF4VmVyc2lvbjpcclxuICAgICAgICB2ID0+IGNvbXBhcmVWZXJzaW9ucyhhZGRvblZlcnNpb24sIHYpIDw9IDAsXHJcbiAgICAgIGFwcGxpY2F0aW9uOiB2ID0+IHYgPT0gYXBwbGljYXRpb24sXHJcbiAgICAgIGFwcGxpY2F0aW9uTWluVmVyc2lvbjpcclxuICAgICAgICB2ID0+IGNvbXBhcmVWZXJzaW9ucyhhcHBsaWNhdGlvblZlcnNpb24sIHYpID49IDAsXHJcbiAgICAgIGFwcGxpY2F0aW9uTWF4VmVyc2lvbjpcclxuICAgICAgICB2ID0+IGNvbXBhcmVWZXJzaW9ucyhhcHBsaWNhdGlvblZlcnNpb24sIHYpIDw9IDAsXHJcbiAgICAgIHBsYXRmb3JtOiB2ID0+IHYgPT0gcGxhdGZvcm0sXHJcbiAgICAgIHBsYXRmb3JtTWluVmVyc2lvbjpcclxuICAgICAgICB2ID0+IGNvbXBhcmVWZXJzaW9ucyhwbGF0Zm9ybVZlcnNpb24sIHYpID49IDAsXHJcbiAgICAgIHBsYXRmb3JtTWF4VmVyc2lvbjpcclxuICAgICAgICB2ID0+IGNvbXBhcmVWZXJzaW9ucyhwbGF0Zm9ybVZlcnNpb24sIHYpIDw9IDAsXHJcbiAgICAgIGJsb2NrZWRUb3RhbE1pbjogdiA9PiBQcmVmcy5zaG93X3N0YXRzaW5wb3B1cCAmJlxyXG4gICAgICAgIFByZWZzLmJsb2NrZWRfdG90YWwgPj0gdixcclxuICAgICAgYmxvY2tlZFRvdGFsTWF4OiB2ID0+IFByZWZzLnNob3dfc3RhdHNpbnBvcHVwICYmXHJcbiAgICAgICAgUHJlZnMuYmxvY2tlZF90b3RhbCA8PSB2LFxyXG4gICAgICBsb2NhbGVzOiB2ID0+IHYuaW5jbHVkZXModGhpcy5sb2NhbGUpXHJcbiAgICB9O1xyXG5cclxuICAgIGxldCBub3RpZmljYXRpb25Ub1Nob3cgPSBudWxsO1xyXG4gICAgZm9yIChsZXQgbm90aWZpY2F0aW9uIG9mIG5vdGlmaWNhdGlvbnMpXHJcbiAgICB7XHJcbiAgICAgIGlmIChub3RpZmljYXRpb24udHlwZSAhPSBcImNyaXRpY2FsXCIpXHJcbiAgICAgIHtcclxuICAgICAgICBsZXQgc2hvd247XHJcbiAgICAgICAgaWYgKHR5cGVvZiBQcmVmcy5ub3RpZmljYXRpb25kYXRhLnNob3duID09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICBzaG93biA9IFByZWZzLm5vdGlmaWNhdGlvbmRhdGEuc2hvd25bbm90aWZpY2F0aW9uLmlkXTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBzaG93biAhPSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmICh0eXBlb2Ygbm90aWZpY2F0aW9uLmludGVydmFsID09IFwibnVtYmVyXCIpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzaG93biArIG5vdGlmaWNhdGlvbi5pbnRlcnZhbCA+IERhdGUubm93KCkpXHJcbiAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmIChzaG93bilcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobm90aWZpY2F0aW9uLnR5cGUgIT0gXCJyZWxlbnRsZXNzXCIgJiZcclxuICAgICAgICAgICAgdGhpcy5zaG91bGRJZ25vcmVOb3RpZmljYXRpb25zKCkpXHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKG5vdGlmaWNhdGlvbi50YXJnZXRzIGluc3RhbmNlb2YgQXJyYXkpXHJcbiAgICAgIHtcclxuICAgICAgICBsZXQgbWF0Y2ggPSBmYWxzZTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgdGFyZ2V0IG9mIG5vdGlmaWNhdGlvbi50YXJnZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGxldCBrZXlzID0gT2JqZWN0LmtleXModGFyZ2V0KTtcclxuICAgICAgICAgIGlmIChrZXlzLmV2ZXJ5KFxyXG4gICAgICAgICAgICBrZXkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRhcmdldENoZWNrcywga2V5KSAmJlxyXG4gICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2hlY2tzW2tleV0odGFyZ2V0W2tleV0pKVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBtYXRjaCA9IHRydWU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFtYXRjaClcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIW5vdGlmaWNhdGlvblRvU2hvdyB8fCBnZXROdW1lcmljYWxTZXZlcml0eShub3RpZmljYXRpb24pID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0TnVtZXJpY2FsU2V2ZXJpdHkobm90aWZpY2F0aW9uVG9TaG93KSlcclxuICAgICAgICBub3RpZmljYXRpb25Ub1Nob3cgPSBub3RpZmljYXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5vdGlmaWNhdGlvblRvU2hvdztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNob3dzIGEgbm90aWZpY2F0aW9uIG9uY2UuXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IG5vdGlmaWNhdGlvbiBUaGUgbm90aWZpY2F0aW9uIHRvIHNob3cuXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuaWdub3JhYmxlPWZhbHNlXSBJZiB0cnVlLCB1c2VyIHByZWZlcmVuY2Ugd2lsbFxyXG4gICAqICAgYmUgY29uc2lkZXJlZCB0byBkZXRlcm1pbmUgd2hldGhlciBub3RpZmljYXRpb24gc2hvdWxkIGJlIHNob3duLlxyXG4gICAqL1xyXG4gIHNob3dOb3RpZmljYXRpb24obm90aWZpY2F0aW9uLCBvcHRpb25zID0ge30pXHJcbiAge1xyXG4gICAgaWYgKG9wdGlvbnMuaWdub3JhYmxlICYmIHRoaXMuc2hvdWxkSWdub3JlTm90aWZpY2F0aW9ucygpKVxyXG4gICAgICByZXR1cm47XHJcblxyXG4gICAgZm9yIChsZXQgc2hvd0xpc3RlbmVyIG9mIHRoaXMuX3Nob3dMaXN0ZW5lcnMpXHJcbiAgICAgIHNob3dMaXN0ZW5lcihub3RpZmljYXRpb24pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW52b2tlcyB0aGUgbGlzdGVuZXJzIGFkZGVkIHZpYVxyXG4gICAqIGB7QGxpbmsgbW9kdWxlOm5vdGlmaWNhdGlvbnN+Tm90aWZpY2F0aW9ucyNhZGRTaG93TGlzdGVuZXJcclxuICAgKiAgICAgICAgIGFkZFNob3dMaXN0ZW5lcigpfWAgd2l0aCB0aGUgbmV4dCBub3RpZmljYXRpb24gdG8gYmUgc2hvd24uXHJcbiAgICovXHJcbiAgc2hvd05leHQoKVxyXG4gIHtcclxuICAgIGxldCBub3RpZmljYXRpb24gPSB0aGlzLl9nZXROZXh0VG9TaG93KCk7XHJcbiAgICBpZiAobm90aWZpY2F0aW9uKVxyXG4gICAge1xyXG4gICAgICBmb3IgKGxldCBzaG93TGlzdGVuZXIgb2YgdGhpcy5fc2hvd0xpc3RlbmVycylcclxuICAgICAgICBzaG93TGlzdGVuZXIobm90aWZpY2F0aW9uKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1hcmtzIGEgbm90aWZpY2F0aW9uIGFzIHNob3duLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgSUQgb2YgdGhlIG5vdGlmaWNhdGlvbiB0byBiZSBtYXJrZWQgYXMgc2hvd24uXHJcbiAgICovXHJcbiAgbWFya0FzU2hvd24oaWQpXHJcbiAge1xyXG4gICAgbGV0IG5vdGlmaWNhdGlvbnMgPSB0aGlzLl9nZXROb3RpZmljYXRpb25zKCk7XHJcblxyXG4gICAgLy8gSWdub3JlIGlmIHRoZXJlJ3Mgbm8gbm90aWZpY2F0aW9uIHdpdGggdGhlIGdpdmVuIElELlxyXG4gICAgaWYgKCFub3RpZmljYXRpb25zLnNvbWUobm90aWZpY2F0aW9uID0+IG5vdGlmaWNhdGlvbi5pZCA9PSBpZCkpXHJcbiAgICAgIHJldHVybjtcclxuXHJcbiAgICBsZXQgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGxldCBkYXRhID0gUHJlZnMubm90aWZpY2F0aW9uZGF0YTtcclxuXHJcbiAgICBpZiAoZGF0YS5zaG93biBpbnN0YW5jZW9mIEFycmF5KVxyXG4gICAge1xyXG4gICAgICBsZXQgbmV3U2hvd24gPSB7fTtcclxuICAgICAgZm9yIChsZXQgb2xkSWQgb2YgZGF0YS5zaG93bilcclxuICAgICAgICBuZXdTaG93bltvbGRJZF0gPSBub3c7XHJcbiAgICAgIGRhdGEuc2hvd24gPSBuZXdTaG93bjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIGRhdGEuc2hvd24gIT0gXCJvYmplY3RcIilcclxuICAgICAgZGF0YS5zaG93biA9IHt9O1xyXG5cclxuICAgIGRhdGEuc2hvd25baWRdID0gbm93O1xyXG5cclxuICAgIHNhdmVOb3RpZmljYXRpb25EYXRhKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBMb2NhbGl6ZXMgdGhlIHRleHRzIG9mIHRoZSBnaXZlbiBub3RpZmljYXRpb24gYmFzZWQgb24gdGhlXHJcbiAgICoge0BsaW5rIG1vZHVsZTpub3RpZmljYXRpb25zfk5vdGlmaWNhdGlvbnMjbG9jYWxlIGxvY2FsZX0uXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IG5vdGlmaWNhdGlvbiBUaGUgbm90aWZpY2F0aW9uLlxyXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IFRoZSBsb2NhbGl6ZWQgdGV4dHMuXHJcbiAgICovXHJcbiAgZ2V0TG9jYWxpemVkVGV4dHMobm90aWZpY2F0aW9uKVxyXG4gIHtcclxuICAgIGxldCB0ZXh0S2V5cyA9IFtcInRpdGxlXCIsIFwibWVzc2FnZVwiXTtcclxuICAgIGxldCBsb2NhbGl6ZWRUZXh0cyA9IHt9O1xyXG5cclxuICAgIGZvciAobGV0IGtleSBvZiB0ZXh0S2V5cylcclxuICAgIHtcclxuICAgICAgaWYgKGtleSBpbiBub3RpZmljYXRpb24pXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAodHlwZW9mIG5vdGlmaWNhdGlvbltrZXldID09IFwic3RyaW5nXCIpXHJcbiAgICAgICAgICBsb2NhbGl6ZWRUZXh0c1trZXldID0gbm90aWZpY2F0aW9uW2tleV07XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgbG9jYWxpemVkVGV4dHNba2V5XSA9IGxvY2FsaXplKG5vdGlmaWNhdGlvbltrZXldLCB0aGlzLmxvY2FsZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbG9jYWxpemVkVGV4dHM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgbG9jYWwgbm90aWZpY2F0aW9uLlxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBub3RpZmljYXRpb24gVGhlIG5vdGlmaWNhdGlvbiB0byBhZGQuXHJcbiAgICovXHJcbiAgYWRkTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbilcclxuICB7XHJcbiAgICBpZiAoIWlzVmFsaWROb3RpZmljYXRpb24obm90aWZpY2F0aW9uKSlcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG5vdGlmaWNhdGlvbiB3aXRoIElEIFwiJHtub3RpZmljYXRpb24uaWR9XCJgKTtcclxuXHJcbiAgICB0aGlzLl9sb2NhbE5vdGlmaWNhdGlvbnMuYWRkKG5vdGlmaWNhdGlvbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGFuIGV4aXN0aW5nIGxvY2FsIG5vdGlmaWNhdGlvbi5cclxuICAgKiBAcGFyYW0ge29iamVjdH0gbm90aWZpY2F0aW9uIFRoZSBub3RpZmljYXRpb24gdG8gcmVtb3ZlLlxyXG4gICAqL1xyXG4gIHJlbW92ZU5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pXHJcbiAge1xyXG4gICAgdGhpcy5fbG9jYWxOb3RpZmljYXRpb25zLmRlbGV0ZShub3RpZmljYXRpb24pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVG9nZ2xlcyB3aGV0aGVyIG5vdGlmaWNhdGlvbnMgb2YgYSBzcGVjaWZpYyBjYXRlZ29yeSBzaG91bGQgYmUgaWdub3JlZC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2F0ZWdvcnkgVGhlIG5vdGlmaWNhdGlvbiBjYXRlZ29yeSBpZGVudGlmaWVyLlxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2ZvcmNlVmFsdWVdIFdoZXRoZXIgdG8gZm9yY2UgdGhlIHNwZWNpZmllZCB2YWx1ZS5cclxuICAgKi9cclxuICB0b2dnbGVJZ25vcmVDYXRlZ29yeShjYXRlZ29yeSwgZm9yY2VWYWx1ZSlcclxuICB7XHJcbiAgICBsZXQgY2F0ZWdvcmllcyA9IFByZWZzLm5vdGlmaWNhdGlvbnNfaWdub3JlZGNhdGVnb3JpZXM7XHJcbiAgICBsZXQgaW5kZXggPSBjYXRlZ29yaWVzLmluZGV4T2YoY2F0ZWdvcnkpO1xyXG4gICAgaWYgKGluZGV4ID09IC0xICYmIGZvcmNlVmFsdWUgIT0gZmFsc2UpXHJcbiAgICAgIGNhdGVnb3JpZXMucHVzaChjYXRlZ29yeSk7XHJcbiAgICBlbHNlIGlmIChpbmRleCAhPSAtMSAmJiBmb3JjZVZhbHVlICE9IHRydWUpXHJcbiAgICAgIGNhdGVnb3JpZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuXHJcbiAgICBzYXZlTm90aWZpY2F0aW9uRGF0YShcIm5vdGlmaWNhdGlvbnNfaWdub3JlZGNhdGVnb3JpZXNcIik7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmVndWxhcmx5IGZldGNoZXMgbm90aWZpY2F0aW9ucyBhbmQgZGVjaWRlcyB3aGljaCBub3RpZmljYXRpb24gdG8gc2hvdy5cclxuICogQHR5cGUge21vZHVsZTpub3RpZmljYXRpb25zfk5vdGlmaWNhdGlvbnN9XHJcbiAqL1xyXG5leHBvcnRzLm5vdGlmaWNhdGlvbnMgPSBuZXcgTm90aWZpY2F0aW9ucygpO1xyXG4iLCIvKlxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBBZGJsb2NrIFBsdXMgPGh0dHBzOi8vYWRibG9ja3BsdXMub3JnLz4sXHJcbiAqIENvcHlyaWdodCAoQykgMjAwNi1wcmVzZW50IGV5ZW8gR21iSFxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBhc1xyXG4gKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICpcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCBBZGJsb2NrIFBsdXMuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqL1xyXG5cclxuLyoqIEBtb2R1bGUgKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuY29uc3Qge2ZpbHRlclRvUmVnRXhwfSA9IHJlcXVpcmUoXCIuL2NvbW1vblwiKTtcclxuXHJcbi8qKlxyXG4gKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgcGF0dGVybnMgdGhhdFxyXG4gKiBge0BsaW5rIG1vZHVsZTpwYXR0ZXJucy5jb21waWxlUGF0dGVybnMgY29tcGlsZVBhdHRlcm5zKCl9YCB3aWxsIGNvbXBpbGVcclxuICogaW50byByZWd1bGFyIGV4cHJlc3Npb25zLlxyXG4gKiBAdHlwZSB7bnVtYmVyfVxyXG4gKi9cclxuY29uc3QgQ09NUElMRV9QQVRURVJOU19NQVggPSAxMDA7XHJcblxyXG4vKipcclxuICogQSBgQ29tcGlsZWRQYXR0ZXJuc2Agb2JqZWN0IHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIHZlcnNpb24gb2YgbXVsdGlwbGUgVVJMXHJcbiAqIHJlcXVlc3QgcGF0dGVybnMuIEl0IGlzIHJldHVybmVkIGJ5XHJcbiAqIGB7QGxpbmsgbW9kdWxlOnBhdHRlcm5zLmNvbXBpbGVQYXR0ZXJucyBjb21waWxlUGF0dGVybnMoKX1gLlxyXG4gKi9cclxuY2xhc3MgQ29tcGlsZWRQYXR0ZXJuc1xyXG57XHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhbiBvYmplY3Qgd2l0aCB0aGUgZ2l2ZW4gcmVndWxhciBleHByZXNzaW9ucyBmb3IgY2FzZS1zZW5zaXRpdmVcclxuICAgKiBhbmQgY2FzZS1pbnNlbnNpdGl2ZSBtYXRjaGluZyByZXNwZWN0aXZlbHkuXHJcbiAgICogQHBhcmFtIHs/UmVnRXhwfSBbY2FzZVNlbnNpdGl2ZV1cclxuICAgKiBAcGFyYW0gez9SZWdFeHB9IFtjYXNlSW5zZW5zaXRpdmVdXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihjYXNlU2Vuc2l0aXZlLCBjYXNlSW5zZW5zaXRpdmUpXHJcbiAge1xyXG4gICAgdGhpcy5fY2FzZVNlbnNpdGl2ZSA9IGNhc2VTZW5zaXRpdmU7XHJcbiAgICB0aGlzLl9jYXNlSW5zZW5zaXRpdmUgPSBjYXNlSW5zZW5zaXRpdmU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUZXN0cyB3aGV0aGVyIHRoZSBnaXZlbiBVUkwgcmVxdWVzdCBtYXRjaGVzIHRoZSBwYXR0ZXJucyB1c2VkIHRvIGNyZWF0ZVxyXG4gICAqIHRoaXMgb2JqZWN0LlxyXG4gICAqIEBwYXJhbSB7bW9kdWxlOnVybC5VUkxSZXF1ZXN0fSByZXF1ZXN0XHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICovXHJcbiAgdGVzdChyZXF1ZXN0KVxyXG4gIHtcclxuICAgIHJldHVybiAoKHRoaXMuX2Nhc2VTZW5zaXRpdmUgJiZcclxuICAgICAgICAgICAgIHRoaXMuX2Nhc2VTZW5zaXRpdmUudGVzdChyZXF1ZXN0LmhyZWYpKSB8fFxyXG4gICAgICAgICAgICAodGhpcy5fY2FzZUluc2Vuc2l0aXZlICYmXHJcbiAgICAgICAgICAgICB0aGlzLl9jYXNlSW5zZW5zaXRpdmUudGVzdChyZXF1ZXN0Lmxvd2VyQ2FzZUhyZWYpKSk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ29tcGlsZXMgcGF0dGVybnMgZnJvbSB0aGUgZ2l2ZW4gZmlsdGVycyBpbnRvIGEgc2luZ2xlXHJcbiAqIGB7QGxpbmsgbW9kdWxlOnBhdHRlcm5zfkNvbXBpbGVkUGF0dGVybnMgQ29tcGlsZWRQYXR0ZXJuc31gIG9iamVjdC5cclxuICpcclxuICogQHBhcmFtIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5VUkxGaWx0ZXJ8XHJcbiAqICAgICAgICAgU2V0Ljxtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5VUkxGaWx0ZXI+fSBmaWx0ZXJzXHJcbiAqICAgVGhlIGZpbHRlcnMuIElmIHRoZSBudW1iZXIgb2YgZmlsdGVycyBleGNlZWRzXHJcbiAqICAgYHtAbGluayBtb2R1bGU6cGF0dGVybnN+Q09NUElMRV9QQVRURVJOU19NQVggQ09NUElMRV9QQVRURVJOU19NQVh9YCwgdGhlXHJcbiAqICAgZnVuY3Rpb24gcmV0dXJucyBgbnVsbGAuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHs/bW9kdWxlOnBhdHRlcm5zfkNvbXBpbGVkUGF0dGVybnN9XHJcbiAqXHJcbiAqIEBwYWNrYWdlXHJcbiAqL1xyXG5leHBvcnRzLmNvbXBpbGVQYXR0ZXJucyA9IGZ1bmN0aW9uIGNvbXBpbGVQYXR0ZXJucyhmaWx0ZXJzKVxyXG57XHJcbiAgLy8gSWYgdGhlIG51bWJlciBvZiBmaWx0ZXJzIGlzIHRvbyBsYXJnZSwgaXQgbWF5IGNob2tlIGVzcGVjaWFsbHkgb24gbG93LWVuZFxyXG4gIC8vIHBsYXRmb3Jtcy4gQXMgYSBwcmVjYXV0aW9uLCB3ZSByZWZ1c2UgdG8gY29tcGlsZS4gSWRlYWxseSB3ZSB3b3VsZCBjaGVja1xyXG4gIC8vIHRoZSBsZW5ndGggb2YgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBzb3VyY2UgcmF0aGVyIHRoYW4gdGhlIG51bWJlciBvZlxyXG4gIC8vIGZpbHRlcnMsIGJ1dCB0aGlzIGlzIGZhciBtb3JlIHN0cmFpZ2h0Zm9yd2FyZCBhbmQgcHJhY3RpY2FsLlxyXG4gIGlmIChmaWx0ZXJzLnNpemUgPiBDT01QSUxFX1BBVFRFUk5TX01BWClcclxuICAgIHJldHVybiBudWxsO1xyXG5cclxuICBsZXQgY2FzZVNlbnNpdGl2ZSA9IFwiXCI7XHJcbiAgbGV0IGNhc2VJbnNlbnNpdGl2ZSA9IFwiXCI7XHJcblxyXG4gIGZvciAobGV0IGZpbHRlciBvZiBmaWx0ZXJzKVxyXG4gIHtcclxuICAgIGxldCBzb3VyY2UgPSBmaWx0ZXIucGF0dGVybiAhPSBudWxsID8gZmlsdGVyVG9SZWdFeHAoZmlsdGVyLnBhdHRlcm4pIDpcclxuICAgICAgICAgICAgICAgICAgIGZpbHRlci5yZWdleHAuc291cmNlO1xyXG5cclxuICAgIGlmIChmaWx0ZXIubWF0Y2hDYXNlKVxyXG4gICAgICBjYXNlU2Vuc2l0aXZlICs9IHNvdXJjZSArIFwifFwiO1xyXG4gICAgZWxzZVxyXG4gICAgICBjYXNlSW5zZW5zaXRpdmUgKz0gc291cmNlICsgXCJ8XCI7XHJcbiAgfVxyXG5cclxuICBsZXQgY2FzZVNlbnNpdGl2ZVJlZ0V4cCA9IG51bGw7XHJcbiAgbGV0IGNhc2VJbnNlbnNpdGl2ZVJlZ0V4cCA9IG51bGw7XHJcblxyXG4gIHRyeVxyXG4gIHtcclxuICAgIGlmIChjYXNlU2Vuc2l0aXZlKVxyXG4gICAgICBjYXNlU2Vuc2l0aXZlUmVnRXhwID0gbmV3IFJlZ0V4cChjYXNlU2Vuc2l0aXZlLnNsaWNlKDAsIC0xKSk7XHJcblxyXG4gICAgaWYgKGNhc2VJbnNlbnNpdGl2ZSlcclxuICAgICAgY2FzZUluc2Vuc2l0aXZlUmVnRXhwID0gbmV3IFJlZ0V4cChjYXNlSW5zZW5zaXRpdmUuc2xpY2UoMCwgLTEpKTtcclxuICB9XHJcbiAgY2F0Y2ggKGVycm9yKVxyXG4gIHtcclxuICAgIC8vIEl0IGlzIHBvc3NpYmxlIGluIHRoZW9yeSBmb3IgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSB0b28gbGFyZ2VcclxuICAgIC8vIGRlc3BpdGUgQ09NUElMRV9QQVRURVJOU19NQVhcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG5ldyBDb21waWxlZFBhdHRlcm5zKGNhc2VTZW5zaXRpdmVSZWdFeHAsIGNhc2VJbnNlbnNpdGl2ZVJlZ0V4cCk7XHJcbn07XHJcbiIsIi8qXHJcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIEFkYmxvY2sgUGx1cyA8aHR0cHM6Ly9hZGJsb2NrcGx1cy5vcmcvPixcclxuICogQ29weXJpZ2h0IChDKSAyMDA2LXByZXNlbnQgZXllbyBHbWJIXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XHJcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIGFzXHJcbiAqIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLlxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcclxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcclxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxyXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKlxyXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxyXG4gKiBhbG9uZyB3aXRoIEFkYmxvY2sgUGx1cy4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cclxuICovXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbi8vIFByb21pc2UucHJvdG90eXBlLmZpbmFsbHkgaXMgbm90IHN1cHBvcnRlZCBpbiBGaXJlZm94IDwgNThcclxuaWYgKCFQcm9taXNlLnByb3RvdHlwZS5maW5hbGx5KVxyXG57XHJcbiAgUHJvbWlzZS5wcm90b3R5cGUuZmluYWxseSA9IGZ1bmN0aW9uKGZuKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLnRoZW4oZm4sIGZuKTtcclxuICB9O1xyXG59XHJcbiIsIi8qXHJcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIEFkYmxvY2sgUGx1cyA8aHR0cHM6Ly9hZGJsb2NrcGx1cy5vcmcvPixcclxuICogQ29weXJpZ2h0IChDKSAyMDA2LXByZXNlbnQgZXllbyBHbWJIXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XHJcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIGFzXHJcbiAqIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLlxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcclxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcclxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxyXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKlxyXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxyXG4gKiBhbG9uZyB3aXRoIEFkYmxvY2sgUGx1cy4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cclxuICovXHJcblxyXG4vKiBlc2xpbnQgbm8tY29uc29sZTogXCJvZmZcIiAqL1xyXG4vKiBnbG9iYWwgc2VsZiAqL1xyXG5cclxuLyoqIEBtb2R1bGUgKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuY29uc3Qge3BlcmZvcm1hbmNlLCBQZXJmb3JtYW5jZU9ic2VydmVyfSA9IHJlcXVpcmUoXCJwZXJmX2hvb2tzXCIpO1xyXG5cclxuLyoqXHJcbiAqIERlZmF1bHQgcHJvZmlsZXIoXCIuLi5cIikgcmV0dXJuZWQgb2JqZWN0IHdoZW4gcHJvZmlsZSBtb2RlIGlzIGRpc2FibGVkLlxyXG4gKiBAdHlwZSB7UHJvZmlsZXJ9XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5sZXQgbm9vcFByb2ZpbGVyID0ge1xyXG4gIHN0YXJ0KCkge30sXHJcbiAgbWFyaygpIHt9LFxyXG4gIGVuZCgpIHt9LFxyXG4gIHRvU3RyaW5nKClcclxuICB7XHJcbiAgICByZXR1cm4gXCJ7c3RhcnQoKXt9LG1hcmsoKXt9LGVuZCgpe319XCI7XHJcbiAgfVxyXG59O1xyXG5cclxubGV0IGluYWN0aXZlUHJvZmlsaW5nID0gdHJ1ZTtcclxubGV0IG9icyA9IG51bGw7XHJcblxyXG4vKiogRW5hYmxlIG9yIGRpc2FibGUgcHJvZmlsaW5nXHJcbiAqXHJcbiAqIEBwYXJhbSB7Ym9vbH0gZW5hYmxlIHRoZSBwcm9maWxpbmcgaXMgZW5hYmxlZC4gSWYgdHJ1ZSBpdCB3aWxsXHJcbiAqIGNyZWF0ZSBhIFBlcmZvcm1hbmNlT2JzZXJ2ZXIgYW5kIHN0YXJ0IG9ic2VydmluZywgcHJvZmlsZXIoKSB3aWxsIHRoZW5cclxuICogY3JlYXRlIGEgcHJvcGVyIHByb2ZpbGVyIG9iamVjdC4gSWYgZmFsc2UsIG9ic2VydmluZyBpcyBjYW5jZWxsZWQgYW5kXHJcbiAqIHRoZSBwcm9maWxlciBvYmplY3Qgd2lsbCBiZSBhIG5vb3AuXHJcbiAqIEBwYXJhbSB7P0Z1bmN0aW9ufSByZXBvcnRlciBUaGUgcmVwb3J0ZXIgZnVuY3Rpb24gY2FsbGVkIGJ5IHRoZSBvYnNlcnZlci5cclxuICogSWYgZmFsc3ksIHRoZSBkZWZhdWx0IHJlcG9ydGVyIHdpbGwgYmUgdXNlZC5cclxuICogQHBhcmFtIHtib29sZWFufSBpc0FzeW5jQ2FsbGJhY2sgcmVwb3J0ZXIgY2FsbGJhY2sgYmVoYXZpb3VyLlxyXG4gKiBJZiB0cnVlLCB0aGUgbm90aWZpY2F0aW9uIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHVzaW5nIHNldEltbWVkaWF0ZSgpXHJcbiAqIGFuZCBtdWx0aXBsZSBpbnN0YW5jZSBub3RpZmljYXRpb25zIHdpbGwgYmUgYnVmZmVyZWQgaW50ZXJuYWxseS5cclxuICogSWYgZmFsc2UsIG5vdGlmaWNhdGlvbnMgd2lsbCBiZSBpbW1lZGlhdGUgYW5kIHN5bmNocm9ub3VzLlxyXG4gKi9cclxuZnVuY3Rpb24gZW5hYmxlUHJvZmlsaW5nKGVuYWJsZSwgcmVwb3J0ZXIsIGlzQXN5bmNDYWxsYmFjayA9IHRydWUpXHJcbntcclxuICBpbmFjdGl2ZVByb2ZpbGluZyA9ICFlbmFibGU7XHJcbiAgaWYgKGVuYWJsZSlcclxuICB7XHJcbiAgICBwZXJmb3JtYW5jZS5tYXJrKFwic3RhcnRfcHJvZmlsZVwiKTtcclxuICAgIGlmICghcmVwb3J0ZXIpXHJcbiAgICB7XHJcbiAgICAgIHJlcG9ydGVyID0gbGlzdCA9PlxyXG4gICAgICB7XHJcbiAgICAgICAgZm9yIChsZXQgZW50cnkgb2YgbGlzdC5nZXRFbnRyaWVzQnlUeXBlKFwibWVhc3VyZVwiKSlcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGAke2VudHJ5Lm5hbWV9OiAke2VudHJ5LmR1cmF0aW9ufW1zYCk7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICBvYnMgPSBuZXcgUGVyZm9ybWFuY2VPYnNlcnZlcihyZXBvcnRlcik7XHJcblxyXG4gICAgb2JzLm9ic2VydmUoe2VudHJ5VHlwZXM6IFtcIm1lYXN1cmVcIl0sIGJ1ZmZlcmVkOiBpc0FzeW5jQ2FsbGJhY2t9KTtcclxuICB9XHJcbiAgZWxzZSBpZiAob2JzKVxyXG4gIHtcclxuICAgIG9icy5kaXNjb25uZWN0KCk7XHJcbiAgICBvYnMgPSBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhIHByb2ZpbGVyIG9iamVjdCB3aXRoIGBzdGFydCgpYCBgbWFyaygpYCBhbmQgYGVuZCgpYCBtZXRob2RzIHRvXHJcbiAqIGVpdGhlciBzdGFydCwga2VlcCBtYXJraW5nIGEgc3BlY2lmaWMgcHJvZmlsZWQgbmFtZSwgb3IgZW5kaW5nIGl0LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBsZXQge21hcmssIGVuZH0gPSBwcm9maWxlcignY29uc29sZS5sb2cnKTtcclxuICogbWFyaygpO1xyXG4gKiBjb25zb2xlLmxvZygxLCAyLCAzKTtcclxuICogZW5kKCk7XHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCB0aGUgdW5pcXVlIElEIHRvIHByb2ZpbGUuXHJcbiAqIEByZXR1cm5zIHtQcm9maWxlcn0gVGhlIHByb2ZpbGVyIHdpdGggYHN0YXJ0KClgLCBgbWFyaygpYCBhbmRcclxuICogYGVuZChjbGVhciA9IGZhbHNlKWAgbWV0aG9kcy5cclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIHByb2ZpbGVyKGlkKVxyXG57XHJcbiAgaWYgKGluYWN0aXZlUHJvZmlsaW5nKVxyXG4gICAgcmV0dXJuIG5vb3BQcm9maWxlcjtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGlkLFxyXG4gICAgc3RhcnQoKVxyXG4gICAge1xyXG4gICAgICBwZXJmb3JtYW5jZS5tYXJrKGAke2lkfTpzdGFydGApO1xyXG4gICAgICBwZXJmb3JtYW5jZS5tZWFzdXJlKGAke2lkfTpzdGFydHVwYCwgXCJzdGFydF9wcm9maWxlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7aWR9OnN0YXJ0YCk7XHJcbiAgICB9LFxyXG4gICAgbWFyayhldmVudClcclxuICAgIHtcclxuICAgICAgcGVyZm9ybWFuY2UubWFyayhgJHtpZH06JHtldmVudH1gKTtcclxuICAgICAgcGVyZm9ybWFuY2UubWVhc3VyZShgJHtpZH06JHtldmVudH1fbWVhc3VyZWAsIFwic3RhcnRfcHJvZmlsZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGAke2lkfToke2V2ZW50fWApO1xyXG4gICAgfSxcclxuICAgIGVuZCgpXHJcbiAgICB7XHJcbiAgICAgIHBlcmZvcm1hbmNlLm1hcmsoYCR7aWR9OmVuZGApO1xyXG4gICAgICBwZXJmb3JtYW5jZS5tZWFzdXJlKGlkLCBcInN0YXJ0X3Byb2ZpbGVcIiwgYCR7aWR9OmVuZGApO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzUHJvZmlsaW5nRW5hYmxlZCgpXHJcbntcclxuICByZXR1cm4gIWluYWN0aXZlUHJvZmlsaW5nO1xyXG59XHJcblxyXG5leHBvcnRzLnByb2ZpbGVyID0gcHJvZmlsZXI7XHJcbmV4cG9ydHMuZW5hYmxlID0gZW5hYmxlUHJvZmlsaW5nO1xyXG5leHBvcnRzLmlzRW5hYmxlZCA9IGlzUHJvZmlsaW5nRW5hYmxlZDtcclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlICovXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbi8qKlxyXG4gKiBBIGBSZWNvbW1lbmRhdGlvbmAgb2JqZWN0IHJlcHJlc2VudHMgYSByZWNvbW1lbmRlZCBmaWx0ZXIgc3Vic2NyaXB0aW9uLlxyXG4gKi9cclxuY2xhc3MgUmVjb21tZW5kYXRpb25cclxue1xyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBgUmVjb21tZW5kYXRpb25gIG9iamVjdCBmcm9tIHRoZSBnaXZlbiBzb3VyY2Ugb2JqZWN0LlxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBzb3VyY2UgVGhlIHNvdXJjZSBvYmplY3QuXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihzb3VyY2UpXHJcbiAge1xyXG4gICAgdGhpcy5fc291cmNlID0gc291cmNlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgdGhlIHJlY29tbWVuZGVkIGZpbHRlciBzdWJzY3JpcHRpb24uXHJcbiAgICogQHR5cGUge3N0cmluZ31cclxuICAgKi9cclxuICBnZXQgdHlwZSgpXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NvdXJjZS50eXBlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGxhbmd1YWdlcyBvZiB0aGUgcmVjb21tZW5kZWQgZmlsdGVyIHN1YnNjcmlwdGlvbi5cclxuICAgKiBAdHlwZSB7QXJyYXkuPHN0cmluZz59XHJcbiAgICovXHJcbiAgZ2V0IGxhbmd1YWdlcygpXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NvdXJjZS5sYW5ndWFnZXMgPyBbLi4udGhpcy5fc291cmNlLmxhbmd1YWdlc10gOiBbXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSB0aXRsZSBvZiB0aGUgcmVjb21tZW5kZWQgZmlsdGVyIHN1YnNjcmlwdGlvbi5cclxuICAgKiBAdHlwZSB7c3RyaW5nfVxyXG4gICAqL1xyXG4gIGdldCB0aXRsZSgpXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NvdXJjZS50aXRsZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBVUkwgb2YgdGhlIHJlY29tbWVuZGVkIGZpbHRlciBzdWJzY3JpcHRpb24uXHJcbiAgICogQHR5cGUge3N0cmluZ31cclxuICAgKi9cclxuICBnZXQgdXJsKClcclxuICB7XHJcbiAgICByZXR1cm4gdGhpcy5fc291cmNlLnVybDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBob21lIHBhZ2Ugb2YgdGhlIHJlY29tbWVuZGVkIGZpbHRlciBzdWJzY3JpcHRpb24uXHJcbiAgICogQHR5cGUge3N0cmluZ31cclxuICAgKi9cclxuICBnZXQgaG9tZXBhZ2UoKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLl9zb3VyY2UuaG9tZXBhZ2U7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogWWllbGRzIGB7QGxpbmsgbW9kdWxlOnJlY29tbWVuZGF0aW9uc35SZWNvbW1lbmRhdGlvbiBSZWNvbW1lbmRhdGlvbn1gIG9iamVjdHNcclxuICogcmVwcmVzZW50aW5nIHJlY29tbWVuZGVkIGZpbHRlciBzdWJzY3JpcHRpb25zLlxyXG4gKlxyXG4gKiBAZ2VuZXJhdG9yXHJcbiAqIEB5aWVsZHMge21vZHVsZTpyZWNvbW1lbmRhdGlvbnN+UmVjb21tZW5kYXRpb259IEFuIG9iamVjdCByZXByZXNlbnRpbmcgYVxyXG4gKiAgIHJlY29tbWVuZGVkIGZpbHRlciBzdWJzY3JpcHRpb24uXHJcbiAqL1xyXG5leHBvcnRzLnJlY29tbWVuZGF0aW9ucyA9IGZ1bmN0aW9uKiByZWNvbW1lbmRhdGlvbnMoKVxyXG57XHJcbiAgZm9yIChsZXQgc291cmNlIG9mIHJlcXVpcmUoXCIuLi9kYXRhL3N1YnNjcmlwdGlvbnMuanNvblwiKSlcclxuICAgIHlpZWxkIG5ldyBSZWNvbW1lbmRhdGlvbihzb3VyY2UpO1xyXG59O1xyXG4iLCIvKlxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBBZGJsb2NrIFBsdXMgPGh0dHBzOi8vYWRibG9ja3BsdXMub3JnLz4sXHJcbiAqIENvcHlyaWdodCAoQykgMjAwNi1wcmVzZW50IGV5ZW8gR21iSFxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBhc1xyXG4gKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICpcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCBBZGJsb2NrIFBsdXMuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqL1xyXG5cclxuLyoqIEBtb2R1bGUgKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuLyoqXHJcbiAqIEBmaWxlT3ZlcnZpZXcgVGhpcyBpcyBhIHNwZWNpYWxpemVkIFJTQSBsaWJyYXJ5IG1lYW50IG9ubHkgdG9cclxuICogdmVyaWZ5IFNIQTEtYmFzZWQgc2lnbmF0dXJlcy5cclxuICovXHJcblxyXG5jb25zdCB7QmlnSW50ZWdlcn0gPSByZXF1aXJlKFwiLi9qc2JuXCIpO1xyXG5jb25zdCBSdXNoYSA9IHJlcXVpcmUoXCIuL3J1c2hhXCIpO1xyXG5cclxubGV0IHJ1c2hhID0gbmV3IFJ1c2hhKCk7XHJcblxyXG4vLyBEZWZpbmUgQVNOLjEgdGVtcGxhdGVzIGZvciB0aGUgZGF0YSBzdHJ1Y3R1cmVzIHVzZWRcclxuZnVuY3Rpb24gc2VxKC4uLmFyZ3MpXHJcbntcclxuICByZXR1cm4ge3R5cGU6IDB4MzAsIGNoaWxkcmVuOiBhcmdzfTtcclxufVxyXG5mdW5jdGlvbiBvYmooaWQpXHJcbntcclxuICByZXR1cm4ge3R5cGU6IDB4MDYsIGNvbnRlbnQ6IGlkfTtcclxufVxyXG5mdW5jdGlvbiBiaXRTdHIoY29udGVudHMpXHJcbntcclxuICByZXR1cm4ge3R5cGU6IDB4MDMsIGVuY2Fwc3VsYXRlczogY29udGVudHN9O1xyXG59XHJcbmZ1bmN0aW9uIGludFJlc3VsdChpZClcclxue1xyXG4gIHJldHVybiB7dHlwZTogMHgwMiwgb3V0OiBpZH07XHJcbn1cclxuZnVuY3Rpb24gb2N0ZXRSZXN1bHQoaWQpXHJcbntcclxuICByZXR1cm4ge3R5cGU6IDB4MDQsIG91dDogaWR9O1xyXG59XHJcblxyXG4vLyBTZWUgaHR0cDovL3d3dy5jcnlwdG9wcC5jb20vd2lraS9LZXlzX2FuZF9Gb3JtYXRzI1JTQV9QdWJsaWNLZXlcclxuLy8gMkEgODYgNDggODYgRjcgMEQgMDEgMDEgMDEgbWVhbnMgMS4yLjg0MC4xMTM1NDkuMS4xLjFcclxubGV0IHB1YmxpY0tleVRlbXBsYXRlID0gc2VxKFxyXG4gIHNlcShvYmooXCJcXHgyQVxceDg2XFx4NDhcXHg4NlxceEY3XFx4MERcXHgwMVxceDAxXFx4MDFcIiksIHt9KSxcclxuICBiaXRTdHIoc2VxKGludFJlc3VsdChcIm5cIiksIGludFJlc3VsdChcImVcIikpKVxyXG4pO1xyXG5cclxuLy8gU2VlIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM0NDcjc2VjdGlvbi05LjIgc3RlcCAyXHJcbi8vIDJCIDBFIDAzIDAyIDFBIG1lYW5zIDEuMy4xNC4zLjIuMjZcclxubGV0IHNpZ25hdHVyZVRlbXBsYXRlID0gc2VxKFxyXG4gIHNlcShvYmooXCJcXHgyQlxceDBFXFx4MDNcXHgwMlxceDFBXCIpLCB7fSksXHJcbiAgb2N0ZXRSZXN1bHQoXCJzaGExXCIpXHJcbik7XHJcblxyXG4vKipcclxuICogUmVhZHMgQVNOLjEgZGF0YSBtYXRjaGluZyB0aGUgdGVtcGxhdGUgcGFzc2VkIGluLiBUaGlzIHdpbGwgdGhyb3cgYW5cclxuICogZXhjZXB0aW9uIGlmIHRoZSBkYXRhIGZvcm1hdCBkb2Vzbid0IG1hdGNoIHRoZSB0ZW1wbGF0ZS4gT24gc3VjY2VzcyBhblxyXG4gKiBvYmplY3QgY29udGFpbmluZyByZXN1bHQgcHJvcGVydGllcyBpcyByZXR1cm5lZC5cclxuICogQHNlZSBodHRwOi8vbHVjYS5udG9wLm9yZy9UZWFjaGluZy9BcHB1bnRpL2FzbjEuaHRtbCBmb3IgaW5mbyBvbiB0aGUgZm9ybWF0LlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZGF0YVxyXG4gKiBAcGFyYW0ge09iamVjdH0gdGVtcGxcclxuICogQHJldHVybnMge09iamVjdH1cclxuICovXHJcbmZ1bmN0aW9uIHJlYWRBU04xKGRhdGEsIHRlbXBsKVxyXG57XHJcbiAgbGV0IHBvcyA9IDA7XHJcbiAgZnVuY3Rpb24gbmV4dCgpXHJcbiAge1xyXG4gICAgcmV0dXJuIGRhdGEuY2hhckNvZGVBdChwb3MrKyk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZWFkTGVuZ3RoKClcclxuICB7XHJcbiAgICBsZXQgbGVuID0gbmV4dCgpO1xyXG4gICAgaWYgKGxlbiAmIDB4ODApXHJcbiAgICB7XHJcbiAgICAgIGxldCBjbnQgPSBsZW4gJiAweDdGO1xyXG4gICAgICBpZiAoY250ID4gMiB8fCBjbnQgPT0gMClcclxuICAgICAgICB0aHJvdyBcIlVuc3VwcG9ydGVkIGxlbmd0aFwiO1xyXG5cclxuICAgICAgbGVuID0gMDtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjbnQ7IGkrKylcclxuICAgICAgICBsZW4gKz0gbmV4dCgpIDw8IChjbnQgLSAxIC0gaSkgKiA4O1xyXG4gICAgICByZXR1cm4gbGVuO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxlbjtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlYWROb2RlKGN1clRlbXBsKVxyXG4gIHtcclxuICAgIGxldCB0eXBlID0gbmV4dCgpO1xyXG4gICAgbGV0IGxlbiA9IHJlYWRMZW5ndGgoKTtcclxuICAgIGlmIChcInR5cGVcIiBpbiBjdXJUZW1wbCAmJiBjdXJUZW1wbC50eXBlICE9IHR5cGUpXHJcbiAgICAgIHRocm93IFwiVW5leHBlY3RlZCB0eXBlXCI7XHJcbiAgICBpZiAoXCJjb250ZW50XCIgaW4gY3VyVGVtcGwgJiZcclxuICAgICAgICBjdXJUZW1wbC5jb250ZW50ICE9IGRhdGEuc3Vic3RyaW5nKHBvcywgcG9zICsgbGVuKSlcclxuICAgICAgdGhyb3cgXCJVbmV4cGVjdGVkIGNvbnRlbnRcIjtcclxuICAgIGlmIChcIm91dFwiIGluIGN1clRlbXBsKVxyXG4gICAgICBvdXRbY3VyVGVtcGwub3V0XSA9IG5ldyBCaWdJbnRlZ2VyKGRhdGEuc3Vic3RyaW5nKHBvcywgcG9zICsgbGVuKSwgMjU2KTtcclxuICAgIGlmIChcImNoaWxkcmVuXCIgaW4gY3VyVGVtcGwpXHJcbiAgICB7XHJcbiAgICAgIGxldCBpO1xyXG4gICAgICBsZXQgZW5kO1xyXG4gICAgICBmb3IgKGkgPSAwLCBlbmQgPSBwb3MgKyBsZW47IHBvcyA8IGVuZDsgaSsrKVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKGkgPj0gY3VyVGVtcGwuY2hpbGRyZW4ubGVuZ3RoKVxyXG4gICAgICAgICAgdGhyb3cgXCJUb28gbWFueSBjaGlsZHJlblwiO1xyXG4gICAgICAgIHJlYWROb2RlKGN1clRlbXBsLmNoaWxkcmVuW2ldKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoaSA8IGN1clRlbXBsLmNoaWxkcmVuLmxlbmd0aClcclxuICAgICAgICB0aHJvdyBcIlRvbyBmZXcgY2hpbGRyZW5cIjtcclxuICAgICAgaWYgKHBvcyA+IGVuZClcclxuICAgICAgICB0aHJvdyBcIkNoaWxkcmVuIHRvbyBsYXJnZVwiO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoXCJlbmNhcHN1bGF0ZXNcIiBpbiBjdXJUZW1wbClcclxuICAgIHtcclxuICAgICAgaWYgKG5leHQoKSAhPSAwKVxyXG4gICAgICAgIHRocm93IFwiRW5jYXBzdWxhdGlvbiBleHBlY3RlZFwiO1xyXG4gICAgICByZWFkTm9kZShjdXJUZW1wbC5lbmNhcHN1bGF0ZXMpO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBwb3MgKz0gbGVuO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbGV0IG91dCA9IHt9O1xyXG4gIHJlYWROb2RlKHRlbXBsKTtcclxuICBpZiAocG9zICE9IGRhdGEubGVuZ3RoKVxyXG4gICAgdGhyb3cgXCJUb28gbXVjaCBkYXRhXCI7XHJcbiAgcmV0dXJuIG91dDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlYWRzIGEgQkVSLWVuY29kZWQgUlNBIHB1YmxpYyBrZXkuIE9uIHN1Y2Nlc3MgcmV0dXJucyBhbiBvYmplY3Qgd2l0aCB0aGVcclxuICogcHJvcGVydGllcyBuIGFuZCBlICh0aGUgY29tcG9uZW50cyBvZiB0aGUga2V5KSwgb3RoZXJ3aXNlIG51bGwuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcclxuICogQHJldHVybiB7P09iamVjdH1cclxuICovXHJcbmZ1bmN0aW9uIHJlYWRQdWJsaWNLZXkoa2V5KVxyXG57XHJcbiAgdHJ5XHJcbiAge1xyXG4gICAgcmV0dXJuIHJlYWRBU04xKGF0b2Ioa2V5KSwgcHVibGljS2V5VGVtcGxhdGUpO1xyXG4gIH1cclxuICBjYXRjaCAoZSlcclxuICB7XHJcbiAgICBjb25zb2xlLndhcm4oXCJJbnZhbGlkIFJTQSBwdWJsaWMga2V5OiBcIiArIGUpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIHdoZXRoZXIgdGhlIHNpZ25hdHVyZSBpcyB2YWxpZCBmb3IgdGhlIGdpdmVuIHB1YmxpYyBrZXkgYW5kIGRhdGEuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcclxuICogQHBhcmFtIHtzdHJpbmd9IHNpZ25hdHVyZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZGF0YVxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICovXHJcbmV4cG9ydHMudmVyaWZ5U2lnbmF0dXJlID0gZnVuY3Rpb24gdmVyaWZ5U2lnbmF0dXJlKGtleSwgc2lnbmF0dXJlLCBkYXRhKVxyXG57XHJcbiAgbGV0IGtleURhdGEgPSByZWFkUHVibGljS2V5KGtleSk7XHJcbiAgaWYgKCFrZXlEYXRhKVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAvLyBXZSBuZWVkIHRoZSBleHBvbmVudCBhcyByZWd1bGFyIG51bWJlclxyXG4gIGtleURhdGEuZSA9IHBhcnNlSW50KGtleURhdGEuZS50b1N0cmluZygxNiksIDE2KTtcclxuXHJcbiAgLy8gRGVjcnlwdCBzaWduYXR1cmUgZGF0YSB1c2luZyBSU0EgYWxnb3JpdGhtXHJcbiAgbGV0IHNpZ0ludCA9IG5ldyBCaWdJbnRlZ2VyKGF0b2Ioc2lnbmF0dXJlKSwgMjU2KTtcclxuICBsZXQgZGlnZXN0ID0gc2lnSW50Lm1vZFBvd0ludChrZXlEYXRhLmUsIGtleURhdGEubikudG9TdHJpbmcoMjU2KTtcclxuXHJcbiAgdHJ5XHJcbiAge1xyXG4gICAgbGV0IHBvcyA9IDA7XHJcbiAgICBsZXQgbmV4dCA9ICgpID0+IGRpZ2VzdC5jaGFyQ29kZUF0KHBvcysrKTtcclxuXHJcbiAgICAvLyBTa2lwIHBhZGRpbmcsIHNlZSBodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzNDQ3I3NlY3Rpb24tOS4yIHN0ZXAgNVxyXG4gICAgaWYgKG5leHQoKSAhPSAxKVxyXG4gICAgICB0aHJvdyBcIldyb25nIHBhZGRpbmcgaW4gc2lnbmF0dXJlIGRpZ2VzdFwiO1xyXG4gICAgd2hpbGUgKG5leHQoKSA9PSAyNTUpIHt9XHJcbiAgICBpZiAoZGlnZXN0LmNoYXJDb2RlQXQocG9zIC0gMSkgIT0gMClcclxuICAgICAgdGhyb3cgXCJXcm9uZyBwYWRkaW5nIGluIHNpZ25hdHVyZSBkaWdlc3RcIjtcclxuXHJcbiAgICAvLyBSZXN0IGlzIGFuIEFTTi4xIHN0cnVjdHVyZSwgZ2V0IHRoZSBTSEExIGhhc2ggZnJvbSBpdCBhbmQgY29tcGFyZSB0b1xyXG4gICAgLy8gdGhlIHJlYWwgb25lXHJcbiAgICBsZXQge3NoYTF9ID0gcmVhZEFTTjEoZGlnZXN0LnN1YnN0cmluZyhwb3MpLCBzaWduYXR1cmVUZW1wbGF0ZSk7XHJcbiAgICBsZXQgZXhwZWN0ZWQgPSBuZXcgQmlnSW50ZWdlcihydXNoYS5kaWdlc3QoZGF0YSksIDE2KTtcclxuICAgIHJldHVybiAoc2hhMS5jb21wYXJlVG8oZXhwZWN0ZWQpID09IDApO1xyXG4gIH1cclxuICBjYXRjaCAoZSlcclxuICB7XHJcbiAgICBjb25zb2xlLndhcm4oXCJJbnZhbGlkIGVuY3J5cHRlZCBzaWduYXR1cmU6IFwiICsgZSk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59O1xyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIC8qXHJcbiAqIFJ1c2hhLCBhIEphdmFTY3JpcHQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFNlY3VyZSBIYXNoIEFsZ29yaXRobSwgU0hBLTEsXHJcbiAqIGFzIGRlZmluZWQgaW4gRklQUyBQVUIgMTgwLTEsIHR1bmVkIGZvciBoaWdoIHBlcmZvcm1hbmNlIHdpdGggbGFyZ2UgaW5wdXRzLlxyXG4gKiAoaHR0cDovL2dpdGh1Yi5jb20vc3JpanMvcnVzaGEpXHJcbiAqXHJcbiAqIEluc3BpcmVkIGJ5IFBhdWwgSm9obnN0b25zIGltcGxlbWVudGF0aW9uIChodHRwOi8vcGFqaG9tZS5vcmcudWsvY3J5cHQvbWQ1KS5cclxuICpcclxuICogQ29weXJpZ2h0IChjKSAyMDEzIFNhbSBSaWpzIChodHRwOi8vYXdlc2FtLmRlKS5cclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBNSVQgbGljZW5zZSBhcyBmb2xsb3dzOlxyXG4gKlxyXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxyXG4gKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksXHJcbiAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb25cclxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXHJcbiAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZVxyXG4gKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxyXG4gKlxyXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxyXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuICpcclxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbiAqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcclxuICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HU1xyXG4gKiBJTiBUSEUgU09GVFdBUkUuXHJcbiAqL1xyXG4gICAgdXRpbCA9IHtcclxuICAgICAgICBnZXREYXRhVHlwZTogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdzdHJpbmcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnYXJyYXknO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyAmJiBnbG9iYWwuQnVmZmVyICYmIGdsb2JhbC5CdWZmZXIuaXNCdWZmZXIoZGF0YSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnYnVmZmVyJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2FycmF5YnVmZmVyJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF0YS5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICd2aWV3JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIEJsb2IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnYmxvYic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBkYXRhIHR5cGUuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGZ1bmN0aW9uIFJ1c2hhKGNodW5rU2l6ZSkge1xyXG4gICAgICAgICd1c2Ugc3RyaWN0JztcclxuICAgICAgICB2YXIgLy8gUHJpdmF0ZSBvYmplY3Qgc3RydWN0dXJlLlxyXG4gICAgICAgIHNlbGYkMiA9IHsgZmlsbDogMCB9O1xyXG4gICAgICAgIHZhciAvLyBDYWxjdWxhdGUgdGhlIGxlbmd0aCBvZiBidWZmZXIgdGhhdCB0aGUgc2hhMSByb3V0aW5lIHVzZXNcclxuICAgICAgICAvLyBpbmNsdWRpbmcgdGhlIHBhZGRpbmcuXHJcbiAgICAgICAgcGFkbGVuID0gZnVuY3Rpb24gKGxlbikge1xyXG4gICAgICAgICAgICBmb3IgKGxlbiArPSA5OyBsZW4gJSA2NCA+IDA7IGxlbiArPSAxKTtcclxuICAgICAgICAgICAgcmV0dXJuIGxlbjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBwYWRaZXJvZXMgPSBmdW5jdGlvbiAoYmluLCBsZW4pIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSQyID0gbGVuID4+IDI7IGkkMiA8IGJpbi5sZW5ndGg7IGkkMisrKVxyXG4gICAgICAgICAgICAgICAgYmluW2kkMl0gPSAwO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHBhZERhdGEgPSBmdW5jdGlvbiAoYmluLCBjaHVua0xlbiwgbXNnTGVuKSB7XHJcbiAgICAgICAgICAgIGJpbltjaHVua0xlbiA+PiAyXSB8PSAxMjggPDwgMjQgLSAoY2h1bmtMZW4gJSA0IDw8IDMpO1xyXG4gICAgICAgICAgICAvLyBUbyBzdXBwb3J0IG1zZ0xlbiA+PSAyIEdpQiwgdXNlIGEgZmxvYXQgZGl2aXNpb24gd2hlbiBjb21wdXRpbmcgdGhlXHJcbiAgICAgICAgICAgIC8vIGhpZ2ggMzItYml0cyBvZiB0aGUgYmlnLWVuZGlhbiBtZXNzYWdlIGxlbmd0aCBpbiBiaXRzLlxyXG4gICAgICAgICAgICBiaW5bKChjaHVua0xlbiA+PiAyKSArIDIgJiB+MTUpICsgMTRdID0gbXNnTGVuIC8gKDEgPDwgMjkpIHwgMDtcclxuICAgICAgICAgICAgYmluWygoY2h1bmtMZW4gPj4gMikgKyAyICYgfjE1KSArIDE1XSA9IG1zZ0xlbiA8PCAzO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIC8vIENvbnZlcnQgYSBiaW5hcnkgc3RyaW5nIGFuZCB3cml0ZSBpdCB0byB0aGUgaGVhcC5cclxuICAgICAgICAvLyBBIGJpbmFyeSBzdHJpbmcgaXMgZXhwZWN0ZWQgdG8gb25seSBjb250YWluIGNoYXIgY29kZXMgPCAyNTYuXHJcbiAgICAgICAgY29udlN0ciA9IGZ1bmN0aW9uIChIOCwgSDMyLCBzdGFydCwgbGVuLCBvZmYpIHtcclxuICAgICAgICAgICAgdmFyIHN0ciA9IHRoaXMsIGkkMiwgb20gPSBvZmYgJSA0LCBsbSA9IGxlbiAlIDQsIGogPSBsZW4gLSBsbTtcclxuICAgICAgICAgICAgaWYgKGogPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9tKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgSDhbb2ZmICsgMyB8IDBdID0gc3RyLmNoYXJDb2RlQXQoc3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIEg4W29mZiArIDIgfCAwXSA9IHN0ci5jaGFyQ29kZUF0KHN0YXJ0ICsgMSk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgSDhbb2ZmICsgMSB8IDBdID0gc3RyLmNoYXJDb2RlQXQoc3RhcnQgKyAyKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBIOFtvZmYgfCAwXSA9IHN0ci5jaGFyQ29kZUF0KHN0YXJ0ICsgMyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChpJDIgPSBvbTsgaSQyIDwgajsgaSQyID0gaSQyICsgNCB8IDApIHtcclxuICAgICAgICAgICAgICAgIEgzMltvZmYgKyBpJDIgPj4gMl0gPSBzdHIuY2hhckNvZGVBdChzdGFydCArIGkkMikgPDwgMjQgfCBzdHIuY2hhckNvZGVBdChzdGFydCArIGkkMiArIDEpIDw8IDE2IHwgc3RyLmNoYXJDb2RlQXQoc3RhcnQgKyBpJDIgKyAyKSA8PCA4IHwgc3RyLmNoYXJDb2RlQXQoc3RhcnQgKyBpJDIgKyAzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzd2l0Y2ggKGxtKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgIEg4W29mZiArIGogKyAxIHwgMF0gPSBzdHIuY2hhckNvZGVBdChzdGFydCArIGogKyAyKTtcclxuICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgSDhbb2ZmICsgaiArIDIgfCAwXSA9IHN0ci5jaGFyQ29kZUF0KHN0YXJ0ICsgaiArIDEpO1xyXG4gICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICBIOFtvZmYgKyBqICsgMyB8IDBdID0gc3RyLmNoYXJDb2RlQXQoc3RhcnQgKyBqKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIC8vIENvbnZlcnQgYSBidWZmZXIgb3IgYXJyYXkgYW5kIHdyaXRlIGl0IHRvIHRoZSBoZWFwLlxyXG4gICAgICAgIC8vIFRoZSBidWZmZXIgb3IgYXJyYXkgaXMgZXhwZWN0ZWQgdG8gb25seSBjb250YWluIGVsZW1lbnRzIDwgMjU2LlxyXG4gICAgICAgIGNvbnZCdWYgPSBmdW5jdGlvbiAoSDgsIEgzMiwgc3RhcnQsIGxlbiwgb2ZmKSB7XHJcbiAgICAgICAgICAgIHZhciBidWYgPSB0aGlzLCBpJDIsIG9tID0gb2ZmICUgNCwgbG0gPSBsZW4gJSA0LCBqID0gbGVuIC0gbG07XHJcbiAgICAgICAgICAgIGlmIChqID4gMCkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChvbSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIEg4W29mZiArIDMgfCAwXSA9IGJ1ZltzdGFydF07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgSDhbb2ZmICsgMiB8IDBdID0gYnVmW3N0YXJ0ICsgMV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgSDhbb2ZmICsgMSB8IDBdID0gYnVmW3N0YXJ0ICsgMl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgSDhbb2ZmIHwgMF0gPSBidWZbc3RhcnQgKyAzXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKGkkMiA9IDQgLSBvbTsgaSQyIDwgajsgaSQyID0gaSQyICs9IDQgfCAwKSB7XHJcbiAgICAgICAgICAgICAgICBIMzJbb2ZmICsgaSQyID4+IDJdID0gYnVmW3N0YXJ0ICsgaSQyXSA8PCAyNCB8IGJ1ZltzdGFydCArIGkkMiArIDFdIDw8IDE2IHwgYnVmW3N0YXJ0ICsgaSQyICsgMl0gPDwgOCB8IGJ1ZltzdGFydCArIGkkMiArIDNdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN3aXRjaCAobG0pIHtcclxuICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgSDhbb2ZmICsgaiArIDEgfCAwXSA9IGJ1ZltzdGFydCArIGogKyAyXTtcclxuICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgSDhbb2ZmICsgaiArIDIgfCAwXSA9IGJ1ZltzdGFydCArIGogKyAxXTtcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgSDhbb2ZmICsgaiArIDMgfCAwXSA9IGJ1ZltzdGFydCArIGpdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgY29udkJsb2IgPSBmdW5jdGlvbiAoSDgsIEgzMiwgc3RhcnQsIGxlbiwgb2ZmKSB7XHJcbiAgICAgICAgICAgIHZhciBibG9iID0gdGhpcywgaSQyLCBvbSA9IG9mZiAlIDQsIGxtID0gbGVuICUgNCwgaiA9IGxlbiAtIGxtO1xyXG4gICAgICAgICAgICB2YXIgYnVmID0gbmV3IFVpbnQ4QXJyYXkocmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2Iuc2xpY2Uoc3RhcnQsIHN0YXJ0ICsgbGVuKSkpO1xyXG4gICAgICAgICAgICBpZiAoaiA+IDApIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAob20pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBIOFtvZmYgKyAzIHwgMF0gPSBidWZbMF07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgSDhbb2ZmICsgMiB8IDBdID0gYnVmWzFdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIEg4W29mZiArIDEgfCAwXSA9IGJ1ZlsyXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBIOFtvZmYgfCAwXSA9IGJ1ZlszXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKGkkMiA9IDQgLSBvbTsgaSQyIDwgajsgaSQyID0gaSQyICs9IDQgfCAwKSB7XHJcbiAgICAgICAgICAgICAgICBIMzJbb2ZmICsgaSQyID4+IDJdID0gYnVmW2kkMl0gPDwgMjQgfCBidWZbaSQyICsgMV0gPDwgMTYgfCBidWZbaSQyICsgMl0gPDwgOCB8IGJ1ZltpJDIgKyAzXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzd2l0Y2ggKGxtKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgIEg4W29mZiArIGogKyAxIHwgMF0gPSBidWZbaiArIDJdO1xyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICBIOFtvZmYgKyBqICsgMiB8IDBdID0gYnVmW2ogKyAxXTtcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgSDhbb2ZmICsgaiArIDMgfCAwXSA9IGJ1ZltqXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGNvbnZGbiA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodXRpbC5nZXREYXRhVHlwZShkYXRhKSkge1xyXG4gICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnZTdHIuYmluZChkYXRhKTtcclxuICAgICAgICAgICAgY2FzZSAnYXJyYXknOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnZCdWYuYmluZChkYXRhKTtcclxuICAgICAgICAgICAgY2FzZSAnYnVmZmVyJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb252QnVmLmJpbmQoZGF0YSk7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FycmF5YnVmZmVyJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb252QnVmLmJpbmQobmV3IFVpbnQ4QXJyYXkoZGF0YSkpO1xyXG4gICAgICAgICAgICBjYXNlICd2aWV3JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb252QnVmLmJpbmQobmV3IFVpbnQ4QXJyYXkoZGF0YS5idWZmZXIsIGRhdGEuYnl0ZU9mZnNldCwgZGF0YS5ieXRlTGVuZ3RoKSk7XHJcbiAgICAgICAgICAgIGNhc2UgJ2Jsb2InOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnZCbG9iLmJpbmQoZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzbGljZSA9IGZ1bmN0aW9uIChkYXRhLCBvZmZzZXQpIHtcclxuICAgICAgICAgICAgc3dpdGNoICh1dGlsLmdldERhdGFUeXBlKGRhdGEpKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5zbGljZShvZmZzZXQpO1xyXG4gICAgICAgICAgICBjYXNlICdhcnJheSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5zbGljZShvZmZzZXQpO1xyXG4gICAgICAgICAgICBjYXNlICdidWZmZXInOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuc2xpY2Uob2Zmc2V0KTtcclxuICAgICAgICAgICAgY2FzZSAnYXJyYXlidWZmZXInOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuc2xpY2Uob2Zmc2V0KTtcclxuICAgICAgICAgICAgY2FzZSAndmlldyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5idWZmZXIuc2xpY2Uob2Zmc2V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIC8vIFByZWNvbXB1dGUgMDAgLSBmZiBzdHJpbmdzXHJcbiAgICAgICAgcHJlY29tcHV0ZWRIZXggPSBuZXcgQXJyYXkoMjU2KTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHByZWNvbXB1dGVkSGV4W2ldID0gKGkgPCAxNiA/ICcwJyA6ICcnKSArIGkudG9TdHJpbmcoMTYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgLy8gQ29udmVydCBhbiBBcnJheUJ1ZmZlciBpbnRvIGl0cyBoZXhhZGVjaW1hbCBzdHJpbmcgcmVwcmVzZW50YXRpb24uXHJcbiAgICAgICAgaGV4ID0gZnVuY3Rpb24gKGFycmF5QnVmZmVyKSB7XHJcbiAgICAgICAgICAgIHZhciBiaW5hcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKTtcclxuICAgICAgICAgICAgdmFyIHJlcyA9IG5ldyBBcnJheShhcnJheUJ1ZmZlci5ieXRlTGVuZ3RoKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSQyID0gMDsgaSQyIDwgcmVzLmxlbmd0aDsgaSQyKyspIHtcclxuICAgICAgICAgICAgICAgIHJlc1tpJDJdID0gcHJlY29tcHV0ZWRIZXhbYmluYXJyYXlbaSQyXV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qb2luKCcnKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBjZWlsSGVhcFNpemUgPSBmdW5jdGlvbiAodikge1xyXG4gICAgICAgICAgICAvLyBUaGUgYXNtLmpzIHNwZWMgc2F5czpcclxuICAgICAgICAgICAgLy8gVGhlIGhlYXAgb2JqZWN0J3MgYnl0ZUxlbmd0aCBtdXN0IGJlIGVpdGhlclxyXG4gICAgICAgICAgICAvLyAyXm4gZm9yIG4gaW4gWzEyLCAyNCkgb3IgMl4yNCAqIG4gZm9yIG4g4omlIDEuXHJcbiAgICAgICAgICAgIC8vIEFsc28sIGJ5dGVMZW5ndGhzIHNtYWxsZXIgdGhhbiAyXjE2IGFyZSBkZXByZWNhdGVkLlxyXG4gICAgICAgICAgICB2YXIgcDtcclxuICAgICAgICAgICAgaWYgKC8vIElmIHYgaXMgc21hbGxlciB0aGFuIDJeMTYsIHRoZSBzbWFsbGVzdCBwb3NzaWJsZSBzb2x1dGlvblxyXG4gICAgICAgICAgICAgICAgLy8gaXMgMl4xNi5cclxuICAgICAgICAgICAgICAgIHYgPD0gNjU1MzYpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gNjU1MzY7XHJcbiAgICAgICAgICAgIGlmICgvLyBJZiB2IDwgMl4yNCwgd2Ugcm91bmQgdXAgdG8gMl5uLFxyXG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHdlIHJvdW5kIHVwIHRvIDJeMjQgKiBuLlxyXG4gICAgICAgICAgICAgICAgdiA8IDE2Nzc3MjE2KSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHAgPSAxOyBwIDwgdjsgcCA9IHAgPDwgMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHAgPSAxNjc3NzIxNjsgcCA8IHY7IHAgKz0gMTY3NzcyMTYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIC8vIEluaXRpYWxpemUgdGhlIGludGVybmFsIGRhdGEgc3RydWN0dXJlcyB0byBhIG5ldyBjYXBhY2l0eS5cclxuICAgICAgICBpbml0ID0gZnVuY3Rpb24gKHNpemUpIHtcclxuICAgICAgICAgICAgaWYgKHNpemUgJSA2NCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2h1bmsgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTI4IGJpdCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlbGYkMi5tYXhDaHVua0xlbiA9IHNpemU7XHJcbiAgICAgICAgICAgIHNlbGYkMi5wYWRNYXhDaHVua0xlbiA9IHBhZGxlbihzaXplKTtcclxuICAgICAgICAgICAgLy8gVGhlIHNpemUgb2YgdGhlIGhlYXAgaXMgdGhlIHN1bSBvZjpcclxuICAgICAgICAgICAgLy8gMS4gVGhlIHBhZGRlZCBpbnB1dCBtZXNzYWdlIHNpemVcclxuICAgICAgICAgICAgLy8gMi4gVGhlIGV4dGVuZGVkIHNwYWNlIHRoZSBhbGdvcml0aG0gbmVlZHMgKDMyMCBieXRlKVxyXG4gICAgICAgICAgICAvLyAzLiBUaGUgMTYwIGJpdCBzdGF0ZSB0aGUgYWxnb3JpdG0gdXNlc1xyXG4gICAgICAgICAgICBzZWxmJDIuaGVhcCA9IG5ldyBBcnJheUJ1ZmZlcihjZWlsSGVhcFNpemUoc2VsZiQyLnBhZE1heENodW5rTGVuICsgMzIwICsgMjApKTtcclxuICAgICAgICAgICAgc2VsZiQyLmgzMiA9IG5ldyBJbnQzMkFycmF5KHNlbGYkMi5oZWFwKTtcclxuICAgICAgICAgICAgc2VsZiQyLmg4ID0gbmV3IEludDhBcnJheShzZWxmJDIuaGVhcCk7XHJcbiAgICAgICAgICAgIHNlbGYkMi5jb3JlID0gbmV3IFJ1c2hhLl9jb3JlKHtcclxuICAgICAgICAgICAgICAgIEludDMyQXJyYXk6IEludDMyQXJyYXksXHJcbiAgICAgICAgICAgICAgICBEYXRhVmlldzogRGF0YVZpZXdcclxuICAgICAgICAgICAgfSwge30sIHNlbGYkMi5oZWFwKTtcclxuICAgICAgICAgICAgc2VsZiQyLmJ1ZmZlciA9IG51bGw7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBkYXRhIHN0cnVjdHVyZXMgYWNjb3JkaW5nXHJcbiAgICAgICAgLy8gdG8gYSBjaHVuayBzaXplLlxyXG4gICAgICAgIGluaXQoY2h1bmtTaXplIHx8IDY0ICogMTAyNCk7XHJcbiAgICAgICAgdmFyIGluaXRTdGF0ZSA9IGZ1bmN0aW9uIChoZWFwLCBwYWRNc2dMZW4pIHtcclxuICAgICAgICAgICAgdmFyIGlvID0gbmV3IEludDMyQXJyYXkoaGVhcCwgcGFkTXNnTGVuICsgMzIwLCA1KTtcclxuICAgICAgICAgICAgaW9bMF0gPSAxNzMyNTg0MTkzO1xyXG4gICAgICAgICAgICBpb1sxXSA9IC0yNzE3MzM4Nzk7XHJcbiAgICAgICAgICAgIGlvWzJdID0gLTE3MzI1ODQxOTQ7XHJcbiAgICAgICAgICAgIGlvWzNdID0gMjcxNzMzODc4O1xyXG4gICAgICAgICAgICBpb1s0XSA9IC0xMDA5NTg5Nzc2O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHBhZENodW5rID0gZnVuY3Rpb24gKGNodW5rTGVuLCBtc2dMZW4pIHtcclxuICAgICAgICAgICAgdmFyIHBhZENodW5rTGVuID0gcGFkbGVuKGNodW5rTGVuKTtcclxuICAgICAgICAgICAgdmFyIHZpZXcgPSBuZXcgSW50MzJBcnJheShzZWxmJDIuaGVhcCwgMCwgcGFkQ2h1bmtMZW4gPj4gMik7XHJcbiAgICAgICAgICAgIHBhZFplcm9lcyh2aWV3LCBjaHVua0xlbik7XHJcbiAgICAgICAgICAgIHBhZERhdGEodmlldywgY2h1bmtMZW4sIG1zZ0xlbik7XHJcbiAgICAgICAgICAgIHJldHVybiBwYWRDaHVua0xlbjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciAvLyBXcml0ZSBkYXRhIHRvIHRoZSBoZWFwLlxyXG4gICAgICAgIHdyaXRlID0gZnVuY3Rpb24gKGRhdGEsIGNodW5rT2Zmc2V0LCBjaHVua0xlbikge1xyXG4gICAgICAgICAgICBjb252Rm4oZGF0YSkoc2VsZiQyLmg4LCBzZWxmJDIuaDMyLCBjaHVua09mZnNldCwgY2h1bmtMZW4sIDApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIC8vIEluaXRpYWxpemUgYW5kIGNhbGwgdGhlIFJ1c2hhQ29yZSxcclxuICAgICAgICAvLyBhc3N1bWluZyBhbiBpbnB1dCBidWZmZXIgb2YgbGVuZ3RoIGxlbiAqIDQuXHJcbiAgICAgICAgY29yZUNhbGwgPSBmdW5jdGlvbiAoZGF0YSwgY2h1bmtPZmZzZXQsIGNodW5rTGVuLCBtc2dMZW4sIGZpbmFsaXplKSB7XHJcbiAgICAgICAgICAgIHZhciBwYWRDaHVua0xlbiA9IGNodW5rTGVuO1xyXG4gICAgICAgICAgICBpZiAoZmluYWxpemUpIHtcclxuICAgICAgICAgICAgICAgIHBhZENodW5rTGVuID0gcGFkQ2h1bmsoY2h1bmtMZW4sIG1zZ0xlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd3JpdGUoZGF0YSwgY2h1bmtPZmZzZXQsIGNodW5rTGVuKTtcclxuICAgICAgICAgICAgc2VsZiQyLmNvcmUuaGFzaChwYWRDaHVua0xlbiwgc2VsZiQyLnBhZE1heENodW5rTGVuKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBnZXRSYXdEaWdlc3QgPSBmdW5jdGlvbiAoaGVhcCwgcGFkTWF4Q2h1bmtMZW4pIHtcclxuICAgICAgICAgICAgdmFyIGlvID0gbmV3IEludDMyQXJyYXkoaGVhcCwgcGFkTWF4Q2h1bmtMZW4gKyAzMjAsIDUpO1xyXG4gICAgICAgICAgICB2YXIgb3V0ID0gbmV3IEludDMyQXJyYXkoNSk7XHJcbiAgICAgICAgICAgIHZhciBhcnIgPSBuZXcgRGF0YVZpZXcob3V0LmJ1ZmZlcik7XHJcbiAgICAgICAgICAgIGFyci5zZXRJbnQzMigwLCBpb1swXSwgZmFsc2UpO1xyXG4gICAgICAgICAgICBhcnIuc2V0SW50MzIoNCwgaW9bMV0sIGZhbHNlKTtcclxuICAgICAgICAgICAgYXJyLnNldEludDMyKDgsIGlvWzJdLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGFyci5zZXRJbnQzMigxMiwgaW9bM10sIGZhbHNlKTtcclxuICAgICAgICAgICAgYXJyLnNldEludDMyKDE2LCBpb1s0XSwgZmFsc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIC8vIENhbGN1bGF0ZSB0aGUgaGFzaCBkaWdlc3QgYXMgYW4gYXJyYXkgb2YgNSAzMmJpdCBpbnRlZ2Vycy5cclxuICAgICAgICByYXdEaWdlc3QgPSB0aGlzLnJhd0RpZ2VzdCA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgICAgICAgICAgdmFyIG1zZ0xlbiA9IHN0ci5ieXRlTGVuZ3RoIHx8IHN0ci5sZW5ndGggfHwgc3RyLnNpemUgfHwgMDtcclxuICAgICAgICAgICAgaW5pdFN0YXRlKHNlbGYkMi5oZWFwLCBzZWxmJDIucGFkTWF4Q2h1bmtMZW4pO1xyXG4gICAgICAgICAgICB2YXIgY2h1bmtPZmZzZXQgPSAwLCBjaHVua0xlbiA9IHNlbGYkMi5tYXhDaHVua0xlbiwgbGFzdDtcclxuICAgICAgICAgICAgZm9yIChjaHVua09mZnNldCA9IDA7IG1zZ0xlbiA+IGNodW5rT2Zmc2V0ICsgY2h1bmtMZW47IGNodW5rT2Zmc2V0ICs9IGNodW5rTGVuKSB7XHJcbiAgICAgICAgICAgICAgICBjb3JlQ2FsbChzdHIsIGNodW5rT2Zmc2V0LCBjaHVua0xlbiwgbXNnTGVuLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29yZUNhbGwoc3RyLCBjaHVua09mZnNldCwgbXNnTGVuIC0gY2h1bmtPZmZzZXQsIG1zZ0xlbiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRSYXdEaWdlc3Qoc2VsZiQyLmhlYXAsIHNlbGYkMi5wYWRNYXhDaHVua0xlbik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBUaGUgZGlnZXN0IGFuZCBkaWdlc3RGcm9tKiBpbnRlcmZhY2UgcmV0dXJucyB0aGUgaGFzaCBkaWdlc3RcclxuICAgICAgICAvLyBhcyBhIGhleCBzdHJpbmcuXHJcbiAgICAgICAgdGhpcy5kaWdlc3QgPSB0aGlzLmRpZ2VzdEZyb21TdHJpbmcgPSB0aGlzLmRpZ2VzdEZyb21CdWZmZXIgPSB0aGlzLmRpZ2VzdEZyb21BcnJheUJ1ZmZlciA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhleChyYXdEaWdlc3Qoc3RyKS5idWZmZXIpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICAvLyBUaGUgbG93LWxldmVsIFJ1c2hDb3JlIG1vZHVsZSBwcm92aWRlcyB0aGUgaGVhcnQgb2YgUnVzaGEsXHJcbiAgICAvLyBhIGhpZ2gtc3BlZWQgc2hhMSBpbXBsZW1lbnRhdGlvbiB3b3JraW5nIG9uIGFuIEludDMyQXJyYXkgaGVhcC5cclxuICAgIC8vIEF0IGZpcnN0IGdsYW5jZSwgdGhlIGltcGxlbWVudGF0aW9uIHNlZW1zIGNvbXBsaWNhdGVkLCBob3dldmVyXHJcbiAgICAvLyB3aXRoIHRoZSBTSEExIHNwZWMgYXQgaGFuZCwgaXQgaXMgb2J2aW91cyB0aGlzIGFsbW9zdCBhIHRleHRib29rXHJcbiAgICAvLyBpbXBsZW1lbnRhdGlvbiB0aGF0IGhhcyBhIGZldyBmdW5jdGlvbnMgaGFuZC1pbmxpbmVkIGFuZCBhIGZldyBsb29wc1xyXG4gICAgLy8gaGFuZC11bnJvbGxlZC5cclxuICAgIFJ1c2hhLl9jb3JlID0gZnVuY3Rpb24gUnVzaGFDb3JlKHN0ZGxpYiwgZm9yZWlnbiwgaGVhcCkge1xyXG4gICAgICAgICd1c2UgYXNtJztcclxuICAgICAgICB2YXIgSCA9IG5ldyBzdGRsaWIuSW50MzJBcnJheShoZWFwKTtcclxuICAgICAgICBmdW5jdGlvbiBoYXNoKGssIHgpIHtcclxuICAgICAgICAgICAgLy8gayBpbiBieXRlc1xyXG4gICAgICAgICAgICBrID0gayB8IDA7XHJcbiAgICAgICAgICAgIHggPSB4IHwgMDtcclxuICAgICAgICAgICAgdmFyIGkgPSAwLCBqID0gMCwgeTAgPSAwLCB6MCA9IDAsIHkxID0gMCwgejEgPSAwLCB5MiA9IDAsIHoyID0gMCwgeTMgPSAwLCB6MyA9IDAsIHk0ID0gMCwgejQgPSAwLCB0MCA9IDAsIHQxID0gMDtcclxuICAgICAgICAgICAgeTAgPSBIW3ggKyAzMjAgPj4gMl0gfCAwO1xyXG4gICAgICAgICAgICB5MSA9IEhbeCArIDMyNCA+PiAyXSB8IDA7XHJcbiAgICAgICAgICAgIHkyID0gSFt4ICsgMzI4ID4+IDJdIHwgMDtcclxuICAgICAgICAgICAgeTMgPSBIW3ggKyAzMzIgPj4gMl0gfCAwO1xyXG4gICAgICAgICAgICB5NCA9IEhbeCArIDMzNiA+PiAyXSB8IDA7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IChpIHwgMCkgPCAoayB8IDApOyBpID0gaSArIDY0IHwgMCkge1xyXG4gICAgICAgICAgICAgICAgejAgPSB5MDtcclxuICAgICAgICAgICAgICAgIHoxID0geTE7XHJcbiAgICAgICAgICAgICAgICB6MiA9IHkyO1xyXG4gICAgICAgICAgICAgICAgejMgPSB5MztcclxuICAgICAgICAgICAgICAgIHo0ID0geTQ7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyAoaiB8IDApIDwgNjQ7IGogPSBqICsgNCB8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0MSA9IEhbaSArIGogPj4gMl0gfCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHQwID0gKCh5MCA8PCA1IHwgeTAgPj4+IDI3KSArICh5MSAmIHkyIHwgfnkxICYgeTMpIHwgMCkgKyAoKHQxICsgeTQgfCAwKSArIDE1MTg1MDAyNDkgfCAwKSB8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgeTQgPSB5MztcclxuICAgICAgICAgICAgICAgICAgICB5MyA9IHkyO1xyXG4gICAgICAgICAgICAgICAgICAgIHkyID0geTEgPDwgMzAgfCB5MSA+Pj4gMjtcclxuICAgICAgICAgICAgICAgICAgICB5MSA9IHkwO1xyXG4gICAgICAgICAgICAgICAgICAgIHkwID0gdDA7XHJcbiAgICAgICAgICAgICAgICAgICAgSFtrICsgaiA+PiAyXSA9IHQxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yIChqID0gayArIDY0IHwgMDsgKGogfCAwKSA8IChrICsgODAgfCAwKTsgaiA9IGogKyA0IHwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHQxID0gKEhbaiAtIDEyID4+IDJdIF4gSFtqIC0gMzIgPj4gMl0gXiBIW2ogLSA1NiA+PiAyXSBeIEhbaiAtIDY0ID4+IDJdKSA8PCAxIHwgKEhbaiAtIDEyID4+IDJdIF4gSFtqIC0gMzIgPj4gMl0gXiBIW2ogLSA1NiA+PiAyXSBeIEhbaiAtIDY0ID4+IDJdKSA+Pj4gMzE7XHJcbiAgICAgICAgICAgICAgICAgICAgdDAgPSAoKHkwIDw8IDUgfCB5MCA+Pj4gMjcpICsgKHkxICYgeTIgfCB+eTEgJiB5MykgfCAwKSArICgodDEgKyB5NCB8IDApICsgMTUxODUwMDI0OSB8IDApIHwgMDtcclxuICAgICAgICAgICAgICAgICAgICB5NCA9IHkzO1xyXG4gICAgICAgICAgICAgICAgICAgIHkzID0geTI7XHJcbiAgICAgICAgICAgICAgICAgICAgeTIgPSB5MSA8PCAzMCB8IHkxID4+PiAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHkxID0geTA7XHJcbiAgICAgICAgICAgICAgICAgICAgeTAgPSB0MDtcclxuICAgICAgICAgICAgICAgICAgICBIW2ogPj4gMl0gPSB0MTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvciAoaiA9IGsgKyA4MCB8IDA7IChqIHwgMCkgPCAoayArIDE2MCB8IDApOyBqID0gaiArIDQgfCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdDEgPSAoSFtqIC0gMTIgPj4gMl0gXiBIW2ogLSAzMiA+PiAyXSBeIEhbaiAtIDU2ID4+IDJdIF4gSFtqIC0gNjQgPj4gMl0pIDw8IDEgfCAoSFtqIC0gMTIgPj4gMl0gXiBIW2ogLSAzMiA+PiAyXSBeIEhbaiAtIDU2ID4+IDJdIF4gSFtqIC0gNjQgPj4gMl0pID4+PiAzMTtcclxuICAgICAgICAgICAgICAgICAgICB0MCA9ICgoeTAgPDwgNSB8IHkwID4+PiAyNykgKyAoeTEgXiB5MiBeIHkzKSB8IDApICsgKCh0MSArIHk0IHwgMCkgKyAxODU5Nzc1MzkzIHwgMCkgfCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHk0ID0geTM7XHJcbiAgICAgICAgICAgICAgICAgICAgeTMgPSB5MjtcclxuICAgICAgICAgICAgICAgICAgICB5MiA9IHkxIDw8IDMwIHwgeTEgPj4+IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgeTEgPSB5MDtcclxuICAgICAgICAgICAgICAgICAgICB5MCA9IHQwO1xyXG4gICAgICAgICAgICAgICAgICAgIEhbaiA+PiAyXSA9IHQxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yIChqID0gayArIDE2MCB8IDA7IChqIHwgMCkgPCAoayArIDI0MCB8IDApOyBqID0gaiArIDQgfCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdDEgPSAoSFtqIC0gMTIgPj4gMl0gXiBIW2ogLSAzMiA+PiAyXSBeIEhbaiAtIDU2ID4+IDJdIF4gSFtqIC0gNjQgPj4gMl0pIDw8IDEgfCAoSFtqIC0gMTIgPj4gMl0gXiBIW2ogLSAzMiA+PiAyXSBeIEhbaiAtIDU2ID4+IDJdIF4gSFtqIC0gNjQgPj4gMl0pID4+PiAzMTtcclxuICAgICAgICAgICAgICAgICAgICB0MCA9ICgoeTAgPDwgNSB8IHkwID4+PiAyNykgKyAoeTEgJiB5MiB8IHkxICYgeTMgfCB5MiAmIHkzKSB8IDApICsgKCh0MSArIHk0IHwgMCkgLSAxODk0MDA3NTg4IHwgMCkgfCAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHk0ID0geTM7XHJcbiAgICAgICAgICAgICAgICAgICAgeTMgPSB5MjtcclxuICAgICAgICAgICAgICAgICAgICB5MiA9IHkxIDw8IDMwIHwgeTEgPj4+IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgeTEgPSB5MDtcclxuICAgICAgICAgICAgICAgICAgICB5MCA9IHQwO1xyXG4gICAgICAgICAgICAgICAgICAgIEhbaiA+PiAyXSA9IHQxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yIChqID0gayArIDI0MCB8IDA7IChqIHwgMCkgPCAoayArIDMyMCB8IDApOyBqID0gaiArIDQgfCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdDEgPSAoSFtqIC0gMTIgPj4gMl0gXiBIW2ogLSAzMiA+PiAyXSBeIEhbaiAtIDU2ID4+IDJdIF4gSFtqIC0gNjQgPj4gMl0pIDw8IDEgfCAoSFtqIC0gMTIgPj4gMl0gXiBIW2ogLSAzMiA+PiAyXSBeIEhbaiAtIDU2ID4+IDJdIF4gSFtqIC0gNjQgPj4gMl0pID4+PiAzMTtcclxuICAgICAgICAgICAgICAgICAgICB0MCA9ICgoeTAgPDwgNSB8IHkwID4+PiAyNykgKyAoeTEgXiB5MiBeIHkzKSB8IDApICsgKCh0MSArIHk0IHwgMCkgLSA4OTk0OTc1MTQgfCAwKSB8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgeTQgPSB5MztcclxuICAgICAgICAgICAgICAgICAgICB5MyA9IHkyO1xyXG4gICAgICAgICAgICAgICAgICAgIHkyID0geTEgPDwgMzAgfCB5MSA+Pj4gMjtcclxuICAgICAgICAgICAgICAgICAgICB5MSA9IHkwO1xyXG4gICAgICAgICAgICAgICAgICAgIHkwID0gdDA7XHJcbiAgICAgICAgICAgICAgICAgICAgSFtqID4+IDJdID0gdDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB5MCA9IHkwICsgejAgfCAwO1xyXG4gICAgICAgICAgICAgICAgeTEgPSB5MSArIHoxIHwgMDtcclxuICAgICAgICAgICAgICAgIHkyID0geTIgKyB6MiB8IDA7XHJcbiAgICAgICAgICAgICAgICB5MyA9IHkzICsgejMgfCAwO1xyXG4gICAgICAgICAgICAgICAgeTQgPSB5NCArIHo0IHwgMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBIW3ggKyAzMjAgPj4gMl0gPSB5MDtcclxuICAgICAgICAgICAgSFt4ICsgMzI0ID4+IDJdID0geTE7XHJcbiAgICAgICAgICAgIEhbeCArIDMyOCA+PiAyXSA9IHkyO1xyXG4gICAgICAgICAgICBIW3ggKyAzMzIgPj4gMl0gPSB5MztcclxuICAgICAgICAgICAgSFt4ICsgMzM2ID4+IDJdID0geTQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IGhhc2g6IGhhc2ggfTtcclxuICAgIH07XHJcbiAgICBleHBvcnRzID0gUnVzaGE7XHJcbiAgICBpZiAoLy8gSWYgd2UnZSBydW5uaW5nIGluIE5vZGUuSlMsIGV4cG9ydCBhIG1vZHVsZS5cclxuICAgICAgICB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gUnVzaGE7XHJcbiAgICB9IGVsc2Ugey8vIElmIHdlJ3JlIHJ1bm5pbmcgaW4gQWRibG9jayBQbHVzLCBleHBvcnQgYSBtb2R1bGUuXHJcbiAgICAgICAgZXhwb3J0cyA9IFJ1c2hhO1xyXG4gICAgfVxyXG4gICAgaWYgKC8vIElmIHdlJ3JlIHJ1bm5pbmcgaW4gYSB3ZWJ3b3JrZXIsIGFjY2VwdFxyXG4gICAgICAgIC8vIG1lc3NhZ2VzIGNvbnRhaW5pbmcgYSBqb2JpZCBhbmQgYSBidWZmZXJcclxuICAgICAgICAvLyBvciBibG9iIG9iamVjdCwgYW5kIHJldHVybiB0aGUgaGFzaCByZXN1bHQuXHJcbiAgICAgICAgdHlwZW9mIEZpbGVSZWFkZXJTeW5jICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlclN5bmMoKSwgaGFzaGVyID0gbmV3IFJ1c2hhKDQgKiAxMDI0ICogMTAyNCk7XHJcbiAgICAgICAgc2VsZi5vbm1lc3NhZ2UgPSBmdW5jdGlvbiBvbk1lc3NhZ2UoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGhhc2gsIGRhdGEgPSBldmVudC5kYXRhLmRhdGE7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBoYXNoID0gaGFzaGVyLmRpZ2VzdChkYXRhKTtcclxuICAgICAgICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBldmVudC5kYXRhLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc2g6IGhhc2hcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogZXZlbnQuZGF0YS5pZCxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZS5uYW1lXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn0oKSk7XHJcbiIsIi8qXHJcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIEFkYmxvY2sgUGx1cyA8aHR0cHM6Ly9hZGJsb2NrcGx1cy5vcmcvPixcclxuICogQ29weXJpZ2h0IChDKSAyMDA2LXByZXNlbnQgZXllbyBHbWJIXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XHJcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIGFzXHJcbiAqIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLlxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcclxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcclxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxyXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKlxyXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxyXG4gKiBhbG9uZyB3aXRoIEFkYmxvY2sgUGx1cy4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cclxuICovXHJcblxyXG4vKiogQG1vZHVsZSAqL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4vKipcclxuICogQGZpbGVPdmVydmlldyBTbmlwcGV0cyBpbXBsZW1lbnRhdGlvbi5cclxuICovXHJcblxyXG5jb25zdCB7RXZlbnRFbWl0dGVyfSA9IHJlcXVpcmUoXCIuL2V2ZW50c1wiKTtcclxuXHJcbmxldCBzaW5nbGVDaGFyYWN0ZXJFc2NhcGVzID0gbmV3IE1hcChbXHJcbiAgW1wiblwiLCBcIlxcblwiXSwgW1wiclwiLCBcIlxcclwiXSwgW1widFwiLCBcIlxcdFwiXVxyXG5dKTtcclxuXHJcbi8qKlxyXG4gKiBge0BsaW5rIG1vZHVsZTpzbmlwcGV0cy5zbmlwcGV0cyBzbmlwcGV0c31gIGltcGxlbWVudGF0aW9uLlxyXG4gKi9cclxuY2xhc3MgU25pcHBldHMgZXh0ZW5kcyBFdmVudEVtaXR0ZXJcclxue1xyXG4gIC8qKlxyXG4gICAqIEBoaWRlY29uc3RydWN0b3JcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcigpXHJcbiAge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFsbCBrbm93biBzbmlwcGV0IGZpbHRlcnMuXHJcbiAgICAgKiBAdHlwZSB7U2V0Ljxtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5TbmlwcGV0RmlsdGVyPn1cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHRoaXMuX2ZpbHRlcnMgPSBuZXcgU2V0KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGFsbCBrbm93biBzbmlwcGV0IGZpbHRlcnMuXHJcbiAgICovXHJcbiAgY2xlYXIoKVxyXG4gIHtcclxuICAgIGxldCB7X2ZpbHRlcnN9ID0gdGhpcztcclxuXHJcbiAgICBpZiAoX2ZpbHRlcnMuc2l6ZSA9PSAwKVxyXG4gICAgICByZXR1cm47XHJcblxyXG4gICAgX2ZpbHRlcnMuY2xlYXIoKTtcclxuXHJcbiAgICB0aGlzLmVtaXQoXCJzbmlwcGV0cy5maWx0ZXJzQ2xlYXJlZFwiKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgYSBuZXcgc25pcHBldCBmaWx0ZXIuXHJcbiAgICogQHBhcmFtIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5TbmlwcGV0RmlsdGVyfSBmaWx0ZXJcclxuICAgKi9cclxuICBhZGQoZmlsdGVyKVxyXG4gIHtcclxuICAgIGxldCB7X2ZpbHRlcnN9ID0gdGhpcztcclxuICAgIGxldCB7c2l6ZX0gPSBfZmlsdGVycztcclxuXHJcbiAgICBfZmlsdGVycy5hZGQoZmlsdGVyKTtcclxuXHJcbiAgICBpZiAoc2l6ZSAhPSBfZmlsdGVycy5zaXplKVxyXG4gICAgICB0aGlzLmVtaXQoXCJzbmlwcGV0cy5maWx0ZXJBZGRlZFwiLCBmaWx0ZXIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyBhbiBleGlzdGluZyBzbmlwcGV0IGZpbHRlci5cclxuICAgKiBAcGFyYW0ge21vZHVsZTpmaWx0ZXJDbGFzc2VzLlNuaXBwZXRGaWx0ZXJ9IGZpbHRlclxyXG4gICAqL1xyXG4gIHJlbW92ZShmaWx0ZXIpXHJcbiAge1xyXG4gICAgbGV0IHtfZmlsdGVyc30gPSB0aGlzO1xyXG4gICAgbGV0IHtzaXplfSA9IF9maWx0ZXJzO1xyXG5cclxuICAgIF9maWx0ZXJzLmRlbGV0ZShmaWx0ZXIpO1xyXG5cclxuICAgIGlmIChzaXplICE9IF9maWx0ZXJzLnNpemUpXHJcbiAgICAgIHRoaXMuZW1pdChcInNuaXBwZXRzLmZpbHRlclJlbW92ZWRcIiwgZmlsdGVyKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrcyB3aGV0aGVyIGEgc25pcHBldCBmaWx0ZXIgZXhpc3RzLlxyXG4gICAqIEBwYXJhbSB7bW9kdWxlOmZpbHRlckNsYXNzZXMuU25pcHBldEZpbHRlcn0gZmlsdGVyXHJcbiAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICovXHJcbiAgaGFzKGZpbHRlcilcclxuICB7XHJcbiAgICByZXR1cm4gdGhpcy5fZmlsdGVycy5oYXMoZmlsdGVyKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIGFsbCBzbmlwcGV0IGZpbHRlcnMgYWN0aXZlIG9uIHRoZSBnaXZlbiBkb21haW4uXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluLlxyXG4gICAqIEByZXR1cm5zIHtBcnJheS48bW9kdWxlOmZpbHRlckNsYXNzZXMuU25pcHBldEZpbHRlcj59IEEgbGlzdCBvZiBzbmlwcGV0XHJcbiAgICogICBmaWx0ZXJzLlxyXG4gICAqL1xyXG4gIGdldEZpbHRlcnMoZG9tYWluKVxyXG4gIHtcclxuICAgIGxldCByZXN1bHQgPSBbXTtcclxuXHJcbiAgICBmb3IgKGxldCBmaWx0ZXIgb2YgdGhpcy5fZmlsdGVycylcclxuICAgIHtcclxuICAgICAgaWYgKGZpbHRlci5pc0FjdGl2ZU9uRG9tYWluKGRvbWFpbikpXHJcbiAgICAgICAgcmVzdWx0LnB1c2goZmlsdGVyKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhIGxpc3Qgb2YgYWxsIHNuaXBwZXQgZmlsdGVycyBhY3RpdmUgb24gdGhlIGdpdmVuIGRvbWFpbi5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZG9tYWluIFRoZSBkb21haW4uXHJcbiAgICogQHJldHVybnMge0FycmF5Ljxtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5TbmlwcGV0RmlsdGVyPn0gQSBsaXN0IG9mIHNuaXBwZXRcclxuICAgKiAgIGZpbHRlcnMuXHJcbiAgICpcclxuICAgKiBAZGVwcmVjYXRlZCBVc2UgPGNvZGU+e0BsaW5rIG1vZHVsZTpzbmlwcGV0c35TbmlwcGV0cyNnZXRGaWx0ZXJzfTwvY29kZT5cclxuICAgKiAgIGluc3RlYWQuXHJcbiAgICogQHNlZSBtb2R1bGU6c25pcHBldHN+U25pcHBldHMjZ2V0RmlsdGVyc1xyXG4gICAqL1xyXG4gIGdldEZpbHRlcnNGb3JEb21haW4oZG9tYWluKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLmdldEZpbHRlcnMoZG9tYWluKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb250YWluZXIgZm9yIHNuaXBwZXQgZmlsdGVycy5cclxuICogQHR5cGUge21vZHVsZTpzbmlwcGV0c35TbmlwcGV0c31cclxuICovXHJcbmV4cG9ydHMuc25pcHBldHMgPSBuZXcgU25pcHBldHMoKTtcclxuXHJcbmxldCBwYXJzZVNjcmlwdCA9XHJcbi8qKlxyXG4gKiBQYXJzZXMgYSBzY3JpcHQgYW5kIHJldHVybnMgYSBsaXN0IG9mIGFsbCBpdHMgY29tbWFuZHMgYW5kIHRoZWlyIGFyZ3VtZW50cy5cclxuICogQHBhcmFtIHtzdHJpbmd9IHNjcmlwdCBUaGUgc2NyaXB0LlxyXG4gKiBAcmV0dXJucyB7QXJyYXkuPHN0cmluZ1tdPn0gQSBsaXN0IG9mIGNvbW1hbmRzIGFuZCB0aGVpciBhcmd1bWVudHMuXHJcbiAqIEBwYWNrYWdlXHJcbiAqL1xyXG5leHBvcnRzLnBhcnNlU2NyaXB0ID0gZnVuY3Rpb24gcGFyc2VTY3JpcHQoc2NyaXB0KVxyXG57XHJcbiAgbGV0IHRyZWUgPSBbXTtcclxuXHJcbiAgbGV0IGVzY2FwZSA9IGZhbHNlO1xyXG4gIGxldCB3aXRoaW5RdW90ZXMgPSBmYWxzZTtcclxuXHJcbiAgbGV0IHVuaWNvZGVFc2NhcGUgPSBudWxsO1xyXG5cclxuICBsZXQgcXVvdGVzQ2xvc2VkID0gZmFsc2U7XHJcblxyXG4gIGxldCBjYWxsID0gW107XHJcbiAgbGV0IGFyZ3VtZW50ID0gXCJcIjtcclxuXHJcbiAgZm9yIChsZXQgY2hhcmFjdGVyIG9mIHNjcmlwdC50cmltKCkgKyBcIjtcIilcclxuICB7XHJcbiAgICBsZXQgYWZ0ZXJRdW90ZXNDbG9zZWQgPSBxdW90ZXNDbG9zZWQ7XHJcbiAgICBxdW90ZXNDbG9zZWQgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAodW5pY29kZUVzY2FwZSAhPSBudWxsKVxyXG4gICAge1xyXG4gICAgICB1bmljb2RlRXNjYXBlICs9IGNoYXJhY3RlcjtcclxuXHJcbiAgICAgIGlmICh1bmljb2RlRXNjYXBlLmxlbmd0aCA9PSA0KVxyXG4gICAgICB7XHJcbiAgICAgICAgbGV0IGNvZGVQb2ludCA9IHBhcnNlSW50KHVuaWNvZGVFc2NhcGUsIDE2KTtcclxuICAgICAgICBpZiAoIWlzTmFOKGNvZGVQb2ludCkpXHJcbiAgICAgICAgICBhcmd1bWVudCArPSBTdHJpbmcuZnJvbUNvZGVQb2ludChjb2RlUG9pbnQpO1xyXG5cclxuICAgICAgICB1bmljb2RlRXNjYXBlID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZXNjYXBlKVxyXG4gICAge1xyXG4gICAgICBlc2NhcGUgPSBmYWxzZTtcclxuXHJcbiAgICAgIGlmIChjaGFyYWN0ZXIgPT0gXCJ1XCIpXHJcbiAgICAgICAgdW5pY29kZUVzY2FwZSA9IFwiXCI7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICBhcmd1bWVudCArPSBzaW5nbGVDaGFyYWN0ZXJFc2NhcGVzLmdldChjaGFyYWN0ZXIpIHx8IGNoYXJhY3RlcjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGNoYXJhY3RlciA9PSBcIlxcXFxcIilcclxuICAgIHtcclxuICAgICAgZXNjYXBlID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGNoYXJhY3RlciA9PSBcIidcIilcclxuICAgIHtcclxuICAgICAgd2l0aGluUXVvdGVzID0gIXdpdGhpblF1b3RlcztcclxuXHJcbiAgICAgIGlmICghd2l0aGluUXVvdGVzKVxyXG4gICAgICAgIHF1b3Rlc0Nsb3NlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh3aXRoaW5RdW90ZXMgfHwgY2hhcmFjdGVyICE9IFwiO1wiICYmICEvXFxzLy50ZXN0KGNoYXJhY3RlcikpXHJcbiAgICB7XHJcbiAgICAgIGFyZ3VtZW50ICs9IGNoYXJhY3RlcjtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgaWYgKGFyZ3VtZW50IHx8IGFmdGVyUXVvdGVzQ2xvc2VkKVxyXG4gICAgICB7XHJcbiAgICAgICAgY2FsbC5wdXNoKGFyZ3VtZW50KTtcclxuICAgICAgICBhcmd1bWVudCA9IFwiXCI7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChjaGFyYWN0ZXIgPT0gXCI7XCIgJiYgY2FsbC5sZW5ndGggPiAwKVxyXG4gICAgICB7XHJcbiAgICAgICAgdHJlZS5wdXNoKGNhbGwpO1xyXG4gICAgICAgIGNhbGwgPSBbXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRyZWU7XHJcbn07XHJcblxyXG4vKipcclxuICogQ29tcGlsZXMgYSBzY3JpcHQgYWdhaW5zdCBhIGdpdmVuIGxpc3Qgb2YgbGlicmFyaWVzIGludG8gZXhlY3V0YWJsZSBjb2RlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ3xBcnJheS48c3RyaW5nPn0gc2NyaXB0cyBPbmUgb3IgbW9yZSBzY3JpcHRzIHRvIGNvbnZlcnQgaW50b1xyXG4gKiAgZXhlY3V0YWJsZSBjb2RlLlxyXG4gKiBAcGFyYW0ge0FycmF5LjxzdHJpbmc+fSBsaWJyYXJpZXMgQSBsaXN0IG9mIGxpYnJhcmllcy5cclxuICogQHBhcmFtIHtvYmplY3R9IFtlbnZpcm9ubWVudF0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgZW52aXJvbm1lbnQgdmFyaWFibGVzLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBFeGVjdXRhYmxlIGNvZGUuXHJcbiAqL1xyXG5leHBvcnRzLmNvbXBpbGVTY3JpcHQgPSBmdW5jdGlvbiBjb21waWxlU2NyaXB0KHNjcmlwdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlicmFyaWVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudmlyb25tZW50ID0ge30pXHJcbntcclxuICByZXR1cm4gYFxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICB7XHJcbiAgICAgIGxldCBsaWJyYXJpZXMgPSAke0pTT04uc3RyaW5naWZ5KGxpYnJhcmllcyl9O1xyXG5cclxuICAgICAgbGV0IHNjcmlwdHMgPSAke0pTT04uc3RyaW5naWZ5KFtdLmNvbmNhdChzY3JpcHRzKS5tYXAocGFyc2VTY3JpcHQpKX07XHJcblxyXG4gICAgICBsZXQgaW1wb3J0cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcbiAgICAgIGZvciAobGV0IGxpYnJhcnkgb2YgbGlicmFyaWVzKVxyXG4gICAgICB7XHJcbiAgICAgICAgbGV0IGxvYWRMaWJyYXJ5ID0gbmV3IEZ1bmN0aW9uKFwiZXhwb3J0c1wiLCBcImVudmlyb25tZW50XCIsIGxpYnJhcnkpO1xyXG4gICAgICAgIGxvYWRMaWJyYXJ5KGltcG9ydHMsICR7SlNPTi5zdHJpbmdpZnkoZW52aXJvbm1lbnQpfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCB7aGFzT3duUHJvcGVydHl9ID0gT2JqZWN0LnByb3RvdHlwZTtcclxuXHJcbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGltcG9ydHMsIFwicHJlcGFyZUluamVjdGlvblwiKSlcclxuICAgICAgICBpbXBvcnRzLnByZXBhcmVJbmplY3Rpb24oKTtcclxuXHJcbiAgICAgIGZvciAobGV0IHNjcmlwdCBvZiBzY3JpcHRzKVxyXG4gICAgICB7XHJcbiAgICAgICAgZm9yIChsZXQgW25hbWUsIC4uLmFyZ3NdIG9mIHNjcmlwdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChpbXBvcnRzLCBuYW1lKSlcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IHZhbHVlID0gaW1wb3J0c1tuYW1lXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgICAgICAgdmFsdWUoLi4uYXJncyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChpbXBvcnRzLCBcImNvbW1pdEluamVjdGlvblwiKSlcclxuICAgICAgICBpbXBvcnRzLmNvbW1pdEluamVjdGlvbigpO1xyXG4gICAgfVxyXG4gIGA7XHJcbn07XHJcbiIsIi8qXHJcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIEFkYmxvY2sgUGx1cyA8aHR0cHM6Ly9hZGJsb2NrcGx1cy5vcmcvPixcclxuICogQ29weXJpZ2h0IChDKSAyMDA2LXByZXNlbnQgZXllbyBHbWJIXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XHJcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIGFzXHJcbiAqIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLlxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcclxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcclxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxyXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKlxyXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxyXG4gKiBhbG9uZyB3aXRoIEFkYmxvY2sgUGx1cy4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cclxuICovXHJcblxyXG4vKiogQG1vZHVsZSAqL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4vKipcclxuICogQGZpbGVPdmVydmlldyBEZWZpbml0aW9uIG9mIFN1YnNjcmlwdGlvbiBjbGFzcyBhbmQgaXRzIHN1YmNsYXNzZXMuXHJcbiAqL1xyXG5cclxuY29uc3Qge3JlY29tbWVuZGF0aW9uc30gPSByZXF1aXJlKFwiLi9yZWNvbW1lbmRhdGlvbnNcIik7XHJcbmNvbnN0IHtpc0FjdGl2ZUZpbHRlcn0gPSByZXF1aXJlKFwiLi9maWx0ZXJDbGFzc2VzXCIpO1xyXG5jb25zdCB7ZmlsdGVyTm90aWZpZXJ9ID0gcmVxdWlyZShcIi4vZmlsdGVyTm90aWZpZXJcIik7XHJcbmNvbnN0IHtEb3dubG9hZGVyfSA9IHJlcXVpcmUoXCIuL2Rvd25sb2FkZXJcIik7XHJcbmNvbnN0IHtwcm9maWxlcn0gPSByZXF1aXJlKFwiLi9wcm9maWxlclwiKTtcclxuXHJcbi8qKlxyXG4gKiBTdWJzY3JpcHRpb24gdHlwZXMgYnkgVVJMLlxyXG4gKlxyXG4gKiBAdHlwZSB7TWFwLjxzdHJpbmcsIHN0cmluZz59XHJcbiAqL1xyXG5sZXQgdHlwZXNCeVVSTCA9IG5ldyBNYXAoXHJcbiAgKGZ1bmN0aW9uKigpXHJcbiAge1xyXG4gICAgZm9yIChsZXQge3R5cGUsIHVybH0gb2YgcmVjb21tZW5kYXRpb25zKCkpXHJcbiAgICAgIHlpZWxkIFt1cmwsIHR5cGVdO1xyXG4gIH0pKClcclxuKTtcclxuXHJcbmxldCBTdWJzY3JpcHRpb24gPVxyXG4vKipcclxuICogVGhlIGBTdWJzY3JpcHRpb25gIGNsYXNzIHJlcHJlc2VudHMgYSBmaWx0ZXIgc3Vic2NyaXB0aW9uLlxyXG4gKiBAYWJzdHJhY3RcclxuICovXHJcbmV4cG9ydHMuU3Vic2NyaXB0aW9uID0gY2xhc3MgU3Vic2NyaXB0aW9uXHJcbntcclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgYFN1YnNjcmlwdGlvbmAgb2JqZWN0LlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCBvZiB0aGUgc3Vic2NyaXB0aW9uLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdGl0bGVdIFRoZSB0aXRsZSBvZiB0aGUgc3Vic2NyaXB0aW9uLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IodXJsLCB0aXRsZSlcclxuICB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBVUkwgb2YgdGhlIHN1YnNjcmlwdGlvbi5cclxuICAgICAqIEB0eXBlIHtzdHJpbmd9XHJcbiAgICAgKiBAc2VlIG1vZHVsZTpzdWJzY3JpcHRpb25DbGFzc2VzLlN1YnNjcmlwdGlvbiN1cmxcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHRoaXMuX3VybCA9IHVybDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdGhlIFVSTCBvZiB0aGUgc3Vic2NyaXB0aW9uIGlzIGEgdmFsaWQgc3Vic2NyaXB0aW9uIFVSTC5cclxuICAgICAqIEB0eXBlIHtib29sZWFufVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBzZWUgbW9kdWxlOnN1YnNjcmlwdGlvbkNsYXNzZXMuU3Vic2NyaXB0aW9uI3ZhbGlkXHJcbiAgICAgKi9cclxuICAgIHRoaXMuX3VybFZhbGlkID0gU3Vic2NyaXB0aW9uLmlzVmFsaWRVUkwodXJsKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB0eXBlIG9mIHRoZSBzdWJzY3JpcHRpb24uXHJcbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cclxuICAgICAqIEBkZWZhdWx0IDxjb2RlPm51bGw8L2NvZGU+XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHNlZSBtb2R1bGU6c3Vic2NyaXB0aW9uQ2xhc3Nlcy5TdWJzY3JpcHRpb24jdHlwZVxyXG4gICAgICovXHJcbiAgICB0aGlzLl90eXBlID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpbHRlciB0ZXh0IGNvbnRhaW5lZCBpbiB0aGUgc3Vic2NyaXB0aW9uLlxyXG4gICAgICogQHR5cGUge0FycmF5LjxzdHJpbmc+fVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdGhpcy5fZmlsdGVyVGV4dCA9IFtdO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSBzZWFyY2hhYmxlIGluZGV4IG9mIGZpbHRlciB0ZXh0IGluIHRoZSBzdWJzY3JpcHRpb24uXHJcbiAgICAgKiBAdHlwZSB7U2V0LjxzdHJpbmc+fVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdGhpcy5fZmlsdGVyVGV4dEluZGV4ID0gbmV3IFNldCgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIHRpdGxlIG9mIHRoZSBzdWJzY3JpcHRpb24uXHJcbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cclxuICAgICAqIEBkZWZhdWx0IDxjb2RlPm51bGw8L2NvZGU+XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHNlZSBtb2R1bGU6c3Vic2NyaXB0aW9uQ2xhc3Nlcy5TdWJzY3JpcHRpb24jdGl0bGVcclxuICAgICAqL1xyXG4gICAgdGhpcy5fdGl0bGUgPSBudWxsO1xyXG5cclxuICAgIGlmICh0aXRsZSlcclxuICAgICAgdGhpcy5fdGl0bGUgPSB0aXRsZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdGhlIHRpdGxlIG9mIHRoZSBzdWJzY3JpcHRpb24gaXMgbm9uLWVkaXRhYmxlLlxyXG4gICAgICogQHR5cGUge2Jvb2xlYW59XHJcbiAgICAgKiBAZGVmYXVsdCA8Y29kZT5mYWxzZTwvY29kZT5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAc2VlIG1vZHVsZTpzdWJzY3JpcHRpb25DbGFzc2VzLlN1YnNjcmlwdGlvbiNmaXhlZFRpdGxlXHJcbiAgICAgKi9cclxuICAgIHRoaXMuX2ZpeGVkVGl0bGUgPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdGhlIHN1YnNjcmlwdGlvbiBpcyBkaXNhYmxlZC5cclxuICAgICAqIEB0eXBlIHtib29sZWFufVxyXG4gICAgICogQGRlZmF1bHQgPGNvZGU+ZmFsc2U8L2NvZGU+XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHNlZSBtb2R1bGU6c3Vic2NyaXB0aW9uQ2xhc3Nlcy5TdWJzY3JpcHRpb24jZGlzYWJsZWRcclxuICAgICAqL1xyXG4gICAgdGhpcy5fZGlzYWJsZWQgPSBmYWxzZTtcclxuXHJcbiAgICBTdWJzY3JpcHRpb24ua25vd25TdWJzY3JpcHRpb25zLnNldCh1cmwsIHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIFVSTCBvZiB0aGUgc3Vic2NyaXB0aW9uLlxyXG4gICAqIEB0eXBlIHtzdHJpbmd9XHJcbiAgICovXHJcbiAgZ2V0IHVybCgpXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuX3VybDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFdoZXRoZXIgdGhlIHN1YnNjcmlwdGlvbiBpcyB2YWxpZC5cclxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cclxuICAgKiBAcGFja2FnZVxyXG4gICAqL1xyXG4gIGdldCB2YWxpZCgpXHJcbiAge1xyXG4gICAgLy8gVGhpcyBzaG91bGQgcmV0dXJuIGEgdmFsdWUgYmFzZWQgb24gU3Vic2NyaXB0aW9uI191cmxWYWxpZCBhZnRlclxyXG4gICAgLy8gaHR0cHM6Ly9naXRsYWIuY29tL2V5ZW8vYWRibG9ja3BsdXMvYWJwdWkvYWRibG9ja3BsdXN1aS8tL2lzc3Vlcy83NTNcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIHR5cGUgb2YgdGhlIHN1YnNjcmlwdGlvbi5cclxuICAgKiBAdHlwZSB7P3N0cmluZ31cclxuICAgKiBAZGVmYXVsdCA8Y29kZT5udWxsPC9jb2RlPlxyXG4gICAqL1xyXG4gIGdldCB0eXBlKClcclxuICB7XHJcbiAgICByZXR1cm4gdGhpcy5fdHlwZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSB0aXRsZSBvZiB0aGUgc3Vic2NyaXB0aW9uLlxyXG4gICAqIEB0eXBlIHtzdHJpbmd9XHJcbiAgICovXHJcbiAgZ2V0IHRpdGxlKClcclxuICB7XHJcbiAgICByZXR1cm4gdGhpcy5fdGl0bGU7XHJcbiAgfVxyXG5cclxuICBzZXQgdGl0bGUodmFsdWUpXHJcbiAge1xyXG4gICAgaWYgKHZhbHVlICE9IHRoaXMuX3RpdGxlKVxyXG4gICAge1xyXG4gICAgICBsZXQgb2xkVmFsdWUgPSB0aGlzLl90aXRsZTtcclxuICAgICAgdGhpcy5fdGl0bGUgPSB2YWx1ZTtcclxuICAgICAgZmlsdGVyTm90aWZpZXIuZW1pdChcInN1YnNjcmlwdGlvbi50aXRsZVwiLCB0aGlzLCB2YWx1ZSwgb2xkVmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogV2hldGhlciB0aGUgdGl0bGUgb2YgdGhlIHN1YnNjcmlwdGlvbiBpcyBub24tZWRpdGFibGUuXHJcbiAgICogQHR5cGUge2Jvb2xlYW59XHJcbiAgICogQGRlZmF1bHQgPGNvZGU+ZmFsc2U8L2NvZGU+XHJcbiAgICovXHJcbiAgZ2V0IGZpeGVkVGl0bGUoKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLl9maXhlZFRpdGxlO1xyXG4gIH1cclxuXHJcbiAgc2V0IGZpeGVkVGl0bGUodmFsdWUpXHJcbiAge1xyXG4gICAgaWYgKHZhbHVlICE9IHRoaXMuX2ZpeGVkVGl0bGUpXHJcbiAgICB7XHJcbiAgICAgIGxldCBvbGRWYWx1ZSA9IHRoaXMuX2ZpeGVkVGl0bGU7XHJcbiAgICAgIHRoaXMuX2ZpeGVkVGl0bGUgPSB2YWx1ZTtcclxuICAgICAgZmlsdGVyTm90aWZpZXIuZW1pdChcInN1YnNjcmlwdGlvbi5maXhlZFRpdGxlXCIsIHRoaXMsIHZhbHVlLCBvbGRWYWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBXaGV0aGVyIHRoZSBzdWJzY3JpcHRpb24gaXMgZGlzYWJsZWQuXHJcbiAgICogQHR5cGUge2Jvb2xlYW59XHJcbiAgICogQGRlZmF1bHQgPGNvZGU+ZmFsc2U8L2NvZGU+XHJcbiAgICovXHJcbiAgZ2V0IGRpc2FibGVkKClcclxuICB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGlzYWJsZWQ7XHJcbiAgfVxyXG5cclxuICBzZXQgZGlzYWJsZWQodmFsdWUpXHJcbiAge1xyXG4gICAgaWYgKHZhbHVlICE9IHRoaXMuX2Rpc2FibGVkKVxyXG4gICAge1xyXG4gICAgICBsZXQgb2xkVmFsdWUgPSB0aGlzLl9kaXNhYmxlZDtcclxuICAgICAgdGhpcy5fZGlzYWJsZWQgPSB2YWx1ZTtcclxuICAgICAgZmlsdGVyTm90aWZpZXIuZW1pdChcInN1YnNjcmlwdGlvbi5kaXNhYmxlZFwiLCB0aGlzLCB2YWx1ZSwgb2xkVmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIG51bWJlciBvZiBmaWx0ZXJzIGluIHRoZSBzdWJzY3JpcHRpb24uXHJcbiAgICogQHR5cGUge251bWJlcn1cclxuICAgKiBAZGVmYXVsdCA8Y29kZT4wPC9jb2RlPlxyXG4gICAqL1xyXG4gIGdldCBmaWx0ZXJDb3VudCgpXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuX2ZpbHRlclRleHQubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhbiBpdGVyYXRvciB0aGF0IHlpZWxkcyB0aGUgdGV4dCBmb3IgZWFjaCBmaWx0ZXIgaW4gdGhlXHJcbiAgICogc3Vic2NyaXB0aW9uLlxyXG4gICAqIEByZXR1cm5zIHtJdGVyYXRvci48c3RyaW5nPn1cclxuICAgKi9cclxuICBmaWx0ZXJUZXh0KClcclxuICB7XHJcbiAgICByZXR1cm4gdGhpcy5fZmlsdGVyVGV4dFtTeW1ib2wuaXRlcmF0b3JdKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVja3Mgd2hldGhlciB0aGUgc3Vic2NyaXB0aW9uIGhhcyB0aGUgZ2l2ZW4gZmlsdGVyIHRleHQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZpbHRlclRleHQgVGhlIGZpbHRlciB0ZXh0LlxyXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHRoZSBzdWJzY3JpcHRpb24gaGFzIHRoZSBmaWx0ZXIgdGV4dC5cclxuICAgKiBAcGFja2FnZVxyXG4gICAqL1xyXG4gIGhhc0ZpbHRlclRleHQoZmlsdGVyVGV4dClcclxuICB7XHJcbiAgICByZXR1cm4gdGhpcy5fZmlsdGVyVGV4dEluZGV4LmhhcyhmaWx0ZXJUZXh0KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIGZpbHRlciB0ZXh0IGF0IHRoZSBnaXZlbiBgMGAtYmFzZWQgaW5kZXguXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBgMGAtYmFzZWQgaW5kZXguIElmIHRoZSBpbmRleCBpcyBvdXQgb2YgYm91bmRzLFxyXG4gICAqICAgdGhlIHJldHVybiB2YWx1ZSBpcyBgbnVsbGAuXHJcbiAgICogQHJldHVybnMgez9tb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5GaWx0ZXJ9IFRoZSBmaWx0ZXIgdGV4dC5cclxuICAgKi9cclxuICBmaWx0ZXJUZXh0QXQoaW5kZXgpXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuX2ZpbHRlclRleHRbaW5kZXhdIHx8IG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIHRoZSBgMGAtYmFzZWQgaW5kZXggb2YgdGhlIGdpdmVuIGZpbHRlci5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bW9kdWxlOmZpbHRlckNsYXNzZXMuRmlsdGVyfSBmaWx0ZXIgVGhlIGZpbHRlci5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleF0gVGhlIGAwYC1iYXNlZCBpbmRleCBmcm9tIHdoaWNoIHRvIHN0YXJ0IHRoZVxyXG4gICAqICAgc2VhcmNoLlxyXG4gICAqXHJcbiAgICogQHJldHVybnMge251bWJlcn0gVGhlIGAwYC1iYXNlZCBpbmRleCBhdCB3aGljaCB0aGUgZmlsdGVyIGlzIGZvdW5kLiBJZiB0aGVcclxuICAgKiAgIGZpbHRlciBpcyBub3QgZm91bmQgaW4gdGhlIHN1YnNjcmlwdGlvbiwgdGhlIHJldHVybiB2YWx1ZSBpcyBgLTFgLlxyXG4gICAqL1xyXG4gIGZpbmRGaWx0ZXJJbmRleChmaWx0ZXIsIGZyb21JbmRleCA9IDApXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuX2ZpbHRlclRleHQuaW5kZXhPZihmaWx0ZXIudGV4dCwgZnJvbUluZGV4KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgYWxsIGZpbHRlcnMgZnJvbSB0aGUgc3Vic2NyaXB0aW9uLlxyXG4gICAqL1xyXG4gIGNsZWFyRmlsdGVycygpXHJcbiAge1xyXG4gICAgdGhpcy5fZmlsdGVyVGV4dCA9IFtdO1xyXG4gICAgdGhpcy5fZmlsdGVyVGV4dEluZGV4LmNsZWFyKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgZmlsdGVyIHRvIHRoZSBzdWJzY3JpcHRpb24uXHJcbiAgICogQHBhcmFtIHtGaWx0ZXJ9IGZpbHRlciBUaGUgZmlsdGVyLlxyXG4gICAqL1xyXG4gIGFkZEZpbHRlcihmaWx0ZXIpXHJcbiAge1xyXG4gICAgdGhpcy5fZmlsdGVyVGV4dC5wdXNoKGZpbHRlci50ZXh0KTtcclxuICAgIHRoaXMuX2ZpbHRlclRleHRJbmRleC5hZGQoZmlsdGVyLnRleHQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5zZXJ0cyBhIGZpbHRlciBpbnRvIHRoZSBzdWJzY3JpcHRpb24gYXQgdGhlIGdpdmVuIGAwYC1iYXNlZCBpbmRleC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bW9kdWxlOmZpbHRlckNsYXNzZXMuRmlsdGVyfSBmaWx0ZXIgVGhlIGZpbHRlci5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGAwYC1iYXNlZCBpbmRleC4gSWYgdGhlIGluZGV4IGlzIG91dCBvZiBib3VuZHMsXHJcbiAgICogICB0aGUgZmlsdGVyIGlzIGluc2VydGVkIGF0IHRoZSBiZWdpbm5pbmcgb3IgYXQgdGhlIGVuZCBhY2NvcmRpbmdseS5cclxuICAgKi9cclxuICBpbnNlcnRGaWx0ZXJBdChmaWx0ZXIsIGluZGV4KVxyXG4gIHtcclxuICAgIHRoaXMuX2ZpbHRlclRleHQuc3BsaWNlKGluZGV4LCAwLCBmaWx0ZXIudGV4dCk7XHJcbiAgICB0aGlzLl9maWx0ZXJUZXh0SW5kZXguYWRkKGZpbHRlci50ZXh0KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERlbGV0ZXMgYSBmaWx0ZXIgZnJvbSB0aGUgc3Vic2NyaXB0aW9uIGF0IHRoZSBnaXZlbiBgMGAtYmFzZWQgaW5kZXguXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBgMGAtYmFzZWQgaW5kZXguIElmIHRoZSBpbmRleCBpcyBvdXQgb2YgYm91bmRzLFxyXG4gICAqICAgbm8gZmlsdGVyIGlzIGRlbGV0ZWQuXHJcbiAgICovXHJcbiAgZGVsZXRlRmlsdGVyQXQoaW5kZXgpXHJcbiAge1xyXG4gICAgLy8gSWdub3JlIGluZGV4IGlmIG91dCBvZiBib3VuZHMgb24gdGhlIG5lZ2F0aXZlIHNpZGUsIGZvciBjb25zaXN0ZW5jeS5cclxuICAgIGlmIChpbmRleCA8IDApXHJcbiAgICAgIHJldHVybjtcclxuXHJcbiAgICBsZXQgW2ZpbHRlclRleHRdID0gdGhpcy5fZmlsdGVyVGV4dC5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgaWYgKCF0aGlzLl9maWx0ZXJUZXh0LmluY2x1ZGVzKGZpbHRlclRleHQpKVxyXG4gICAgICB0aGlzLl9maWx0ZXJUZXh0SW5kZXguZGVsZXRlKGZpbHRlclRleHQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlcyB0aGUgZmlsdGVyIHRleHQgb2YgdGhlIHN1YnNjcmlwdGlvbi5cclxuICAgKiBAcGFyYW0ge0FycmF5LjxzdHJpbmc+fSBmaWx0ZXJUZXh0IFRoZSBuZXcgZmlsdGVyIHRleHQuXHJcbiAgICogQHJldHVybnMge3thZGRlZDogQXJyYXkuPHN0cmluZz4sIHJlbW92ZWQ6IEFycmF5LjxzdHJpbmc+fX0gQW4gb2JqZWN0XHJcbiAgICogICBjb250YWluaW5nIHR3byBsaXN0cyBvZiB0aGUgdGV4dCBvZiBhZGRlZCBhbmQgcmVtb3ZlZCBmaWx0ZXJzXHJcbiAgICogICByZXNwZWN0aXZlbHkuXHJcbiAgICogQHBhY2thZ2VcclxuICAgKi9cclxuICB1cGRhdGVGaWx0ZXJUZXh0KGZpbHRlclRleHQpXHJcbiAge1xyXG4gICAgbGV0IGFkZGVkID0gW107XHJcbiAgICBsZXQgcmVtb3ZlZCA9IFtdO1xyXG5cclxuICAgIGlmICh0aGlzLl9maWx0ZXJUZXh0Lmxlbmd0aCA9PSAwKVxyXG4gICAge1xyXG4gICAgICBhZGRlZCA9IFsuLi5maWx0ZXJUZXh0XTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGZpbHRlclRleHQubGVuZ3RoID4gMClcclxuICAgIHtcclxuICAgICAgZm9yIChsZXQgdGV4dCBvZiBmaWx0ZXJUZXh0KVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9maWx0ZXJUZXh0SW5kZXguaGFzKHRleHQpKVxyXG4gICAgICAgICAgYWRkZWQucHVzaCh0ZXh0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2ZpbHRlclRleHRJbmRleCA9IG5ldyBTZXQoZmlsdGVyVGV4dCk7XHJcblxyXG4gICAgaWYgKGZpbHRlclRleHQubGVuZ3RoID09IDApXHJcbiAgICB7XHJcbiAgICAgIHJlbW92ZWQgPSBbLi4udGhpcy5fZmlsdGVyVGV4dF07XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0aGlzLl9maWx0ZXJUZXh0Lmxlbmd0aCA+IDApXHJcbiAgICB7XHJcbiAgICAgIGZvciAobGV0IHRleHQgb2YgdGhpcy5fZmlsdGVyVGV4dClcclxuICAgICAge1xyXG4gICAgICAgIGlmICghdGhpcy5fZmlsdGVyVGV4dEluZGV4Lmhhcyh0ZXh0KSlcclxuICAgICAgICAgIHJlbW92ZWQucHVzaCh0ZXh0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2ZpbHRlclRleHQgPSBbLi4uZmlsdGVyVGV4dF07XHJcblxyXG4gICAgcmV0dXJuIHthZGRlZCwgcmVtb3ZlZH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXJpYWxpemVzIHRoZSBzdWJzY3JpcHRpb24gZm9yIHdyaXRpbmcgb3V0IG9uIGRpc2suXHJcbiAgICogQHlpZWxkcyB7c3RyaW5nfVxyXG4gICAqIEBwYWNrYWdlXHJcbiAgICovXHJcbiAgKnNlcmlhbGl6ZSgpXHJcbiAge1xyXG4gICAgbGV0IHt1cmwsIF90aXRsZSwgX2ZpeGVkVGl0bGUsIF9kaXNhYmxlZH0gPSB0aGlzO1xyXG5cclxuICAgIHlpZWxkIFwiW1N1YnNjcmlwdGlvbl1cIjtcclxuICAgIHlpZWxkIFwidXJsPVwiICsgdXJsO1xyXG5cclxuICAgIGlmIChfdGl0bGUpXHJcbiAgICAgIHlpZWxkIFwidGl0bGU9XCIgKyBfdGl0bGU7XHJcbiAgICBpZiAoX2ZpeGVkVGl0bGUpXHJcbiAgICAgIHlpZWxkIFwiZml4ZWRUaXRsZT10cnVlXCI7XHJcbiAgICBpZiAoX2Rpc2FibGVkKVxyXG4gICAgICB5aWVsZCBcImRpc2FibGVkPXRydWVcIjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNlcmlhbGl6ZXMgdGhlIHN1YnNjcmlwdGlvbidzIGZpbHRlciB0ZXh0IGZvciB3cml0aW5nIG91dCBvbiBkaXNrLlxyXG4gICAqIEB5aWVsZHMge3N0cmluZ31cclxuICAgKiBAcGFja2FnZVxyXG4gICAqL1xyXG4gICpzZXJpYWxpemVGaWx0ZXJzKClcclxuICB7XHJcbiAgICBsZXQge19maWx0ZXJUZXh0fSA9IHRoaXM7XHJcblxyXG4gICAgeWllbGQgXCJbU3Vic2NyaXB0aW9uIGZpbHRlcnNdXCI7XHJcblxyXG4gICAgZm9yIChsZXQgdGV4dCBvZiBfZmlsdGVyVGV4dClcclxuICAgICAgeWllbGQgdGV4dC5yZXBsYWNlKC9cXFsvZywgXCJcXFxcW1wiKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBzdWJzY3JpcHRpb24uXHJcbiAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgKi9cclxuICB0b1N0cmluZygpXHJcbiAge1xyXG4gICAgcmV0dXJuIFsuLi50aGlzLnNlcmlhbGl6ZSgpXS5qb2luKFwiXFxuXCIpO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBDYWNoZSBmb3Iga25vd24gZmlsdGVyIHN1YnNjcmlwdGlvbnMgdGhhdCBtYXBzIHN1YnNjcmlwdGlvbiBVUkxzIHRvXHJcbiAqIHN1YnNjcmlwdGlvbiBvYmplY3RzLlxyXG4gKiBAdHlwZSB7TWFwLjxzdHJpbmcsIG1vZHVsZTpzdWJzY3JpcHRpb25DbGFzc2VzLlN1YnNjcmlwdGlvbj59XHJcbiAqIEBwYWNrYWdlXHJcbiAqL1xyXG5leHBvcnRzLlN1YnNjcmlwdGlvbi5rbm93blN1YnNjcmlwdGlvbnMgPSBuZXcgTWFwKCk7XHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgc3Vic2NyaXB0aW9uIG9iamVjdCBmb3IgYSBzdWJzY3JpcHRpb24gVVJMLlxyXG4gKlxyXG4gKiBFdmVyeSBzdWJzY3JpcHRpb24gVVJMIG1hcHMgdG8gaXRzIG93biB1bmlxdWUgb2JqZWN0LiBJZiBubyBzdWNoIG9iamVjdFxyXG4gKiBleGlzdHMsIGEgbmV3IG9uZSBpcyBjcmVhdGVkIGludGVybmFsbHk7IG90aGVyd2lzZSB0aGUgZXhpc3Rpbmcgb2JqZWN0IGlzXHJcbiAqIHVzZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIHN1YnNjcmlwdGlvbiBVUkwuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHttb2R1bGU6c3Vic2NyaXB0aW9uQ2xhc3Nlcy5TdWJzY3JpcHRpb259IEEgc3Vic2NyaXB0aW9uIG9iamVjdC5cclxuICovXHJcbmV4cG9ydHMuU3Vic2NyaXB0aW9uLmZyb21VUkwgPSBmdW5jdGlvbih1cmwpXHJcbntcclxuICBsZXQgc3Vic2NyaXB0aW9uID0gU3Vic2NyaXB0aW9uLmtub3duU3Vic2NyaXB0aW9ucy5nZXQodXJsKTtcclxuICBpZiAoc3Vic2NyaXB0aW9uKVxyXG4gICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcclxuXHJcbiAgaWYgKHVybFswXSAhPSBcIn5cIilcclxuICB7XHJcbiAgICBzdWJzY3JpcHRpb24gPSBuZXcgRG93bmxvYWRhYmxlU3Vic2NyaXB0aW9uKHVybCwgbnVsbCk7XHJcblxyXG4gICAgbGV0IHR5cGUgPSB0eXBlc0J5VVJMLmdldCh1cmwpO1xyXG4gICAgaWYgKHR5cGVvZiB0eXBlICE9IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgIHN1YnNjcmlwdGlvbi5fdHlwZSA9IHR5cGU7XHJcblxyXG4gICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcclxuICB9XHJcblxyXG4gIHJldHVybiBuZXcgU3BlY2lhbFN1YnNjcmlwdGlvbih1cmwpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIERlc2VyaWFsaXplcyBhIHN1YnNjcmlwdGlvbi5cclxuICogQHBhcmFtIHtvYmplY3R9IG9iaiBBIG1hcCBvZiBzZXJpYWxpemVkIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcy5cclxuICogQHJldHVybnMge21vZHVsZTpzdWJzY3JpcHRpb25DbGFzc2VzLlN1YnNjcmlwdGlvbn0gQSBzdWJzY3JpcHRpb24gb2JqZWN0LlxyXG4gKiBAcGFja2FnZVxyXG4gKi9cclxuZXhwb3J0cy5TdWJzY3JpcHRpb24uZnJvbU9iamVjdCA9IGZ1bmN0aW9uKG9iailcclxue1xyXG4gIGxldCByZXN1bHQ7XHJcbiAgaWYgKG9iai51cmxbMF0gIT0gXCJ+XCIpXHJcbiAge1xyXG4gICAgLy8gVVJMIGlzIHZhbGlkIC0gdGhpcyBpcyBhIGRvd25sb2FkYWJsZSBzdWJzY3JpcHRpb25cclxuICAgIHJlc3VsdCA9IG5ldyBEb3dubG9hZGFibGVTdWJzY3JpcHRpb24ob2JqLnVybCwgb2JqLnRpdGxlKTtcclxuICAgIGlmIChcImRvd25sb2FkU3RhdHVzXCIgaW4gb2JqKVxyXG4gICAgICByZXN1bHQuX2Rvd25sb2FkU3RhdHVzID0gb2JqLmRvd25sb2FkU3RhdHVzO1xyXG4gICAgaWYgKFwibGFzdFN1Y2Nlc3NcIiBpbiBvYmopXHJcbiAgICAgIHJlc3VsdC5sYXN0U3VjY2VzcyA9IHBhcnNlSW50KG9iai5sYXN0U3VjY2VzcywgMTApIHx8IDA7XHJcbiAgICBpZiAoXCJsYXN0Q2hlY2tcIiBpbiBvYmopXHJcbiAgICAgIHJlc3VsdC5fbGFzdENoZWNrID0gcGFyc2VJbnQob2JqLmxhc3RDaGVjaywgMTApIHx8IDA7XHJcbiAgICBpZiAoXCJleHBpcmVzXCIgaW4gb2JqKVxyXG4gICAgICByZXN1bHQuZXhwaXJlcyA9IHBhcnNlSW50KG9iai5leHBpcmVzLCAxMCkgfHwgMDtcclxuICAgIGlmIChcInNvZnRFeHBpcmF0aW9uXCIgaW4gb2JqKVxyXG4gICAgICByZXN1bHQuc29mdEV4cGlyYXRpb24gPSBwYXJzZUludChvYmouc29mdEV4cGlyYXRpb24sIDEwKSB8fCAwO1xyXG4gICAgaWYgKFwiZXJyb3JzXCIgaW4gb2JqKVxyXG4gICAgICByZXN1bHQuX2Vycm9ycyA9IHBhcnNlSW50KG9iai5lcnJvcnMsIDEwKSB8fCAwO1xyXG4gICAgaWYgKFwidmVyc2lvblwiIGluIG9iailcclxuICAgICAgcmVzdWx0LnZlcnNpb24gPSBwYXJzZUludChvYmoudmVyc2lvbiwgMTApIHx8IDA7XHJcbiAgICBpZiAoXCJyZXF1aXJlZFZlcnNpb25cIiBpbiBvYmopXHJcbiAgICAgIHJlc3VsdC5yZXF1aXJlZFZlcnNpb24gPSBvYmoucmVxdWlyZWRWZXJzaW9uO1xyXG4gICAgaWYgKFwiaG9tZXBhZ2VcIiBpbiBvYmopXHJcbiAgICAgIHJlc3VsdC5faG9tZXBhZ2UgPSBvYmouaG9tZXBhZ2U7XHJcbiAgICBpZiAoXCJsYXN0RG93bmxvYWRcIiBpbiBvYmopXHJcbiAgICAgIHJlc3VsdC5fbGFzdERvd25sb2FkID0gcGFyc2VJbnQob2JqLmxhc3REb3dubG9hZCwgMTApIHx8IDA7XHJcbiAgICBpZiAoXCJkb3dubG9hZENvdW50XCIgaW4gb2JqKVxyXG4gICAgICByZXN1bHQuZG93bmxvYWRDb3VudCA9IHBhcnNlSW50KG9iai5kb3dubG9hZENvdW50LCAxMCkgfHwgMDtcclxuXHJcbiAgICBsZXQgdHlwZSA9IHR5cGVzQnlVUkwuZ2V0KG9iai51cmwpO1xyXG4gICAgaWYgKHR5cGVvZiB0eXBlICE9IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgIHJlc3VsdC5fdHlwZSA9IHR5cGU7XHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICByZXN1bHQgPSBuZXcgU3BlY2lhbFN1YnNjcmlwdGlvbihvYmoudXJsLCBvYmoudGl0bGUpO1xyXG4gICAgaWYgKFwiZGVmYXVsdHNcIiBpbiBvYmopXHJcbiAgICAgIHJlc3VsdC5kZWZhdWx0cyA9IG9iai5kZWZhdWx0cy5zcGxpdChcIiBcIik7XHJcbiAgfVxyXG4gIGlmIChcImZpeGVkVGl0bGVcIiBpbiBvYmopXHJcbiAgICByZXN1bHQuX2ZpeGVkVGl0bGUgPSAob2JqLmZpeGVkVGl0bGUgPT0gXCJ0cnVlXCIpO1xyXG4gIGlmIChcImRpc2FibGVkXCIgaW4gb2JqKVxyXG4gICAgcmVzdWx0Ll9kaXNhYmxlZCA9IChvYmouZGlzYWJsZWQgPT0gXCJ0cnVlXCIpO1xyXG5cclxuICByZXR1cm4gcmVzdWx0O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENoZWNrcyB3aGV0aGVyIGEgVVJMIGlzIGEgdmFsaWQgc3Vic2NyaXB0aW9uIFVSTC5cclxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMLlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciB0aGUgVVJMIGlzIGEgdmFsaWQgc3Vic2NyaXB0aW9uIFVSTC5cclxuICovXHJcbmV4cG9ydHMuU3Vic2NyaXB0aW9uLmlzVmFsaWRVUkwgPSBmdW5jdGlvbiBpc1ZhbGlkVVJMKHVybClcclxue1xyXG4gIHJldHVybiB1cmwuc3RhcnRzV2l0aChcIn51c2VyflwiKSB8fCBEb3dubG9hZGVyLmlzVmFsaWRVUkwodXJsKTtcclxufTtcclxuXHJcbmxldCBTcGVjaWFsU3Vic2NyaXB0aW9uID1cclxuLyoqXHJcbiAqIFRoZSBgU3BlY2lhbFN1YnNjcmlwdGlvbmAgY2xhc3MgcmVwcmVzZW50cyBhIHNwZWNpYWwgZmlsdGVyIHN1YnNjcmlwdGlvbi5cclxuICpcclxuICogVGhpcyB0eXBlIG9mIHN1YnNjcmlwdGlvbiBpcyB1c2VkIGZvciBrZWVwaW5nIHVzZXItZGVmaW5lZCBmaWx0ZXJzLlxyXG4gKi9cclxuZXhwb3J0cy5TcGVjaWFsU3Vic2NyaXB0aW9uID0gY2xhc3MgU3BlY2lhbFN1YnNjcmlwdGlvbiBleHRlbmRzIFN1YnNjcmlwdGlvblxyXG57XHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhIGBTcGVjaWFsU3Vic2NyaXB0aW9uYCBvYmplY3QuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMIG9mIHRoZSBzdWJzY3JpcHRpb24uXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IFt0aXRsZV0gVGhlIHRpdGxlIG9mIHRoZSBzdWJzY3JpcHRpb24uXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcih1cmwsIHRpdGxlKVxyXG4gIHtcclxuICAgIHN1cGVyKHVybCwgdGl0bGUpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmlsdGVyIHR5cGVzIHRoYXQgc2hvdWxkIGJlIGFkZGVkIHRvIHRoaXMgc3Vic2NyaXB0aW9uIGJ5IGRlZmF1bHQuXHJcbiAgICAgKlxyXG4gICAgICogRW50cmllcyBzaG91bGQgY29ycmVzcG9uZCB0byBrZXlzIGluXHJcbiAgICAgKiBge0BsaW5rIG1vZHVsZTpzdWJzY3JpcHRpb25DbGFzc2VzLlNwZWNpYWxTdWJzY3JpcHRpb24uZGVmYXVsdHNNYXB9YC5cclxuICAgICAqXHJcbiAgICAgKiBAdHlwZSB7P0FycmF5LjxzdHJpbmc+fVxyXG4gICAgICpcclxuICAgICAqIEBwYWNrYWdlXHJcbiAgICAgKi9cclxuICAgIHRoaXMuZGVmYXVsdHMgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIGdpdmVuIGZpbHRlciBzaG91bGQgYmUgYWRkZWQgdG8gdGhpcyBzdWJzY3JpcHRpb24gYnlcclxuICAgKiBkZWZhdWx0LlxyXG4gICAqIEBwYXJhbSB7RmlsdGVyfSBmaWx0ZXIgVGhlIGZpbHRlci5cclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciB0aGUgZmlsdGVyIHNob3VsZCBiZSBhZGRlZCB0byB0aGlzIHN1YnNjcmlwdGlvblxyXG4gICAqICAgYnkgZGVmYXVsdC5cclxuICAgKiBAcGFja2FnZVxyXG4gICAqL1xyXG4gIGlzRGVmYXVsdEZvcihmaWx0ZXIpXHJcbiAge1xyXG4gICAgaWYgKHRoaXMuZGVmYXVsdHMgJiYgdGhpcy5kZWZhdWx0cy5sZW5ndGgpXHJcbiAgICB7XHJcbiAgICAgIGZvciAobGV0IHR5cGUgb2YgdGhpcy5kZWZhdWx0cylcclxuICAgICAge1xyXG4gICAgICAgIGlmIChTcGVjaWFsU3Vic2NyaXB0aW9uLmRlZmF1bHRzTWFwLmdldCh0eXBlKS5pbmNsdWRlcyhmaWx0ZXIudHlwZSkpXHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBpZiAoIWlzQWN0aXZlRmlsdGVyKGZpbHRlcikgJiYgdHlwZSA9PSBcImJsb2NraW5nXCIpXHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNlcmlhbGl6ZXMgdGhlIHN1YnNjcmlwdGlvbiBmb3Igd3JpdGluZyBvdXQgb24gZGlzay5cclxuICAgKiBAeWllbGRzIHtzdHJpbmd9XHJcbiAgICogQHBhY2thZ2VcclxuICAgKi9cclxuICAqc2VyaWFsaXplKClcclxuICB7XHJcbiAgICBsZXQge2RlZmF1bHRzLCBfbGFzdERvd25sb2FkfSA9IHRoaXM7XHJcblxyXG4gICAgeWllbGQqIHN1cGVyLnNlcmlhbGl6ZSgpO1xyXG5cclxuICAgIGlmIChkZWZhdWx0cylcclxuICAgIHtcclxuICAgICAgeWllbGQgXCJkZWZhdWx0cz1cIiArXHJcbiAgICAgICAgICAgIGRlZmF1bHRzLm1hcChcclxuICAgICAgICAgICAgICAvLyByZW1hcCBmb3IgdGhlIHN0b3JlZCBmb3JtYXQuXHJcbiAgICAgICAgICAgICAgdHlwZSA9PiB0eXBlID09IFwiYWxsb3dpbmdcIiA/IFwid2hpdGVsaXN0XCIgOiB0eXBlXHJcbiAgICAgICAgICAgICkuZmlsdGVyKFxyXG4gICAgICAgICAgICAgIHR5cGUgPT4gU3BlY2lhbFN1YnNjcmlwdGlvbi5kZWZhdWx0c01hcC5oYXModHlwZSlcclxuICAgICAgICAgICAgKS5qb2luKFwiIFwiKTtcclxuICAgIH1cclxuICAgIGlmIChfbGFzdERvd25sb2FkKVxyXG4gICAgICB5aWVsZCBcImxhc3REb3dubG9hZD1cIiArIF9sYXN0RG93bmxvYWQ7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEEgbWFwIG9mIGZpbHRlciB0eXBlcy5cclxuICogQHR5cGUge01hcC48c3RyaW5nLCBBcnJheS48c3RyaW5nPj59XHJcbiAqIEBwYWNrYWdlXHJcbiAqL1xyXG5leHBvcnRzLlNwZWNpYWxTdWJzY3JpcHRpb24uZGVmYXVsdHNNYXAgPSBuZXcgTWFwKFtcclxuICBbXCJhbGxvd2luZ1wiLCBbXCJhbGxvd2luZ1wiXV0sXHJcbiAgLy8gZGVwcmVjYXRlZCB0ZXJtaW5vbG9neVxyXG4gIFtcIndoaXRlbGlzdFwiLCBbXCJhbGxvd2luZ1wiXV0sXHJcbiAgW1wiYmxvY2tpbmdcIiwgW1wiYmxvY2tpbmdcIl1dLFxyXG4gIFtcImVsZW1oaWRlXCIsIFtcImVsZW1oaWRlXCIsIFwiZWxlbWhpZGVleGNlcHRpb25cIiwgXCJlbGVtaGlkZWVtdWxhdGlvblwiXV1cclxuXSk7XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyBzcGVjaWFsIHN1YnNjcmlwdGlvbi5cclxuICogQHBhcmFtIHtzdHJpbmd9IFt0aXRsZV0gVGhlIHRpdGxlIG9mIHRoZSBzdWJzY3JpcHRpb24uXHJcbiAqIEByZXR1cm5zIHttb2R1bGU6c3Vic2NyaXB0aW9uQ2xhc3Nlcy5TcGVjaWFsU3Vic2NyaXB0aW9ufSBBIG5ldyBzcGVjaWFsXHJcbiAqICAgc3Vic2NyaXB0aW9uLlxyXG4gKiBAcGFja2FnZVxyXG4gKi9cclxuZXhwb3J0cy5TcGVjaWFsU3Vic2NyaXB0aW9uLmNyZWF0ZSA9IGZ1bmN0aW9uKHRpdGxlKVxyXG57XHJcbiAgbGV0IHVybDtcclxuICBkb1xyXG4gICAgdXJsID0gXCJ+dXNlcn5cIiArIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApO1xyXG4gIHdoaWxlIChTdWJzY3JpcHRpb24ua25vd25TdWJzY3JpcHRpb25zLmhhcyh1cmwpKTtcclxuICByZXR1cm4gbmV3IFNwZWNpYWxTdWJzY3JpcHRpb24odXJsLCB0aXRsZSk7XHJcbn07XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyBzcGVjaWFsIHN1YnNjcmlwdGlvbiBhbmQgYWRkcyB0aGUgZ2l2ZW4gZmlsdGVyIHRvIGl0LlxyXG4gKlxyXG4gKiBPbmNlIGNyZWF0ZWQsIHRoZSBzdWJzY3JpcHRpb24gYWN0cyBhcyB0aGUgZGVmYXVsdCBmb3IgYWxsIGZpbHRlcnMgb2YgdGhlXHJcbiAqIHtAbGluayBtb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5GaWx0ZXIjdHlwZSB0eXBlfS5cclxuICpcclxuICogQHBhcmFtIHttb2R1bGU6ZmlsdGVyQ2xhc3Nlcy5GaWx0ZXJ9IGZpbHRlciBUaGUgZmlsdGVyLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7bW9kdWxlOnN1YnNjcmlwdGlvbkNsYXNzZXMuU3BlY2lhbFN1YnNjcmlwdGlvbn0gQSBuZXcgc3BlY2lhbFxyXG4gKiAgIHN1YnNjcmlwdGlvbi5cclxuICpcclxuICogQHBhY2thZ2VcclxuICovXHJcbmV4cG9ydHMuU3BlY2lhbFN1YnNjcmlwdGlvbi5jcmVhdGVGb3JGaWx0ZXIgPSBmdW5jdGlvbihmaWx0ZXIpXHJcbntcclxuICBsZXQgc3Vic2NyaXB0aW9uID0gU3BlY2lhbFN1YnNjcmlwdGlvbi5jcmVhdGUoKTtcclxuICBzdWJzY3JpcHRpb24uYWRkRmlsdGVyKGZpbHRlcik7XHJcbiAgZm9yIChsZXQgW3R5cGUsIG1hcHBlZFR5cGVzXSBvZiBTcGVjaWFsU3Vic2NyaXB0aW9uLmRlZmF1bHRzTWFwKVxyXG4gIHtcclxuICAgIGlmIChtYXBwZWRUeXBlcy5pbmNsdWRlcyhmaWx0ZXIudHlwZSkpXHJcbiAgICAgIHN1YnNjcmlwdGlvbi5kZWZhdWx0cyA9IFt0eXBlXTtcclxuICB9XHJcbiAgaWYgKCFzdWJzY3JpcHRpb24uZGVmYXVsdHMpXHJcbiAgICBzdWJzY3JpcHRpb24uZGVmYXVsdHMgPSBbXCJibG9ja2luZ1wiXTtcclxuICByZXR1cm4gc3Vic2NyaXB0aW9uO1xyXG59O1xyXG5cclxubGV0IFJlZ3VsYXJTdWJzY3JpcHRpb24gPVxyXG4vKipcclxuICogVGhlIGBSZWd1bGFyU3Vic2NyaXB0aW9uYCBjbGFzcyByZXByZXNlbnRzIGEgcmVndWxhciBmaWx0ZXIgc3Vic2NyaXB0aW9uLlxyXG4gKiBAYWJzdHJhY3RcclxuICovXHJcbmV4cG9ydHMuUmVndWxhclN1YnNjcmlwdGlvbiA9IGNsYXNzIFJlZ3VsYXJTdWJzY3JpcHRpb24gZXh0ZW5kcyBTdWJzY3JpcHRpb25cclxue1xyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBgUmVndWxhclN1YnNjcmlwdGlvbmAgb2JqZWN0LlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCBvZiB0aGUgc3Vic2NyaXB0aW9uLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdGl0bGVdIFRoZSB0aXRsZSBvZiB0aGUgc3Vic2NyaXB0aW9uLlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IodXJsLCB0aXRsZSlcclxuICB7XHJcbiAgICBzdXBlcih1cmwsIHRpdGxlIHx8IHVybCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaG9tZXBhZ2Ugb2YgdGhlIHN1YnNjcmlwdGlvbi5cclxuICAgICAqIEB0eXBlIHs/c3RyaW5nfVxyXG4gICAgICogQGRlZmF1bHQgPGNvZGU+bnVsbDwvY29kZT5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAc2VlIG1vZHVsZTpzdWJzY3JpcHRpb25DbGFzc2VzLlJlZ3VsYXJTdWJzY3JpcHRpb24jaG9tZXBhZ2VcclxuICAgICAqL1xyXG4gICAgdGhpcy5faG9tZXBhZ2UgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGxhc3QgdGltZSB0aGUgc3Vic2NyaXB0aW9uIHdhcyBkb3dubG9hZGVkLCBpbiBzZWNvbmRzIHNpbmNlIHRoZVxyXG4gICAgICogYmVnaW5uaW5nIG9mIHRoZSBVbml4IGVwb2NoLlxyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqIEBkZWZhdWx0IDxjb2RlPjA8L2NvZGU+XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHNlZSBtb2R1bGU6c3Vic2NyaXB0aW9uQ2xhc3Nlcy5SZWd1bGFyU3Vic2NyaXB0aW9uI2xhc3REb3dubG9hZFxyXG4gICAgICovXHJcbiAgICB0aGlzLl9sYXN0RG93bmxvYWQgPSAwO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGhvbWVwYWdlIG9mIHRoZSBzdWJzY3JpcHRpb24uXHJcbiAgICogQHR5cGUgez9zdHJpbmd9XHJcbiAgICogQGRlZmF1bHQgPGNvZGU+bnVsbDwvY29kZT5cclxuICAgKi9cclxuICBnZXQgaG9tZXBhZ2UoKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLl9ob21lcGFnZTtcclxuICB9XHJcblxyXG4gIHNldCBob21lcGFnZSh2YWx1ZSlcclxuICB7XHJcbiAgICBpZiAodmFsdWUgIT0gdGhpcy5faG9tZXBhZ2UpXHJcbiAgICB7XHJcbiAgICAgIGxldCBvbGRWYWx1ZSA9IHRoaXMuX2hvbWVwYWdlO1xyXG4gICAgICB0aGlzLl9ob21lcGFnZSA9IHZhbHVlO1xyXG4gICAgICBmaWx0ZXJOb3RpZmllci5lbWl0KFwic3Vic2NyaXB0aW9uLmhvbWVwYWdlXCIsIHRoaXMsIHZhbHVlLCBvbGRWYWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGUgbGFzdCB0aW1lIHRoZSBzdWJzY3JpcHRpb24gd2FzIGRvd25sb2FkZWQsIGluIHNlY29uZHMgc2luY2UgdGhlXHJcbiAgICogYmVnaW5uaW5nIG9mIHRoZSBVbml4IGVwb2NoLlxyXG4gICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICogQGRlZmF1bHQgPGNvZGU+MDwvY29kZT5cclxuICAgKi9cclxuICBnZXQgbGFzdERvd25sb2FkKClcclxuICB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGFzdERvd25sb2FkO1xyXG4gIH1cclxuXHJcbiAgc2V0IGxhc3REb3dubG9hZCh2YWx1ZSlcclxuICB7XHJcbiAgICBpZiAodmFsdWUgIT0gdGhpcy5fbGFzdERvd25sb2FkKVxyXG4gICAge1xyXG4gICAgICBsZXQgb2xkVmFsdWUgPSB0aGlzLl9sYXN0RG93bmxvYWQ7XHJcbiAgICAgIHRoaXMuX2xhc3REb3dubG9hZCA9IHZhbHVlO1xyXG4gICAgICBmaWx0ZXJOb3RpZmllci5lbWl0KFwic3Vic2NyaXB0aW9uLmxhc3REb3dubG9hZFwiLCB0aGlzLCB2YWx1ZSwgb2xkVmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2VyaWFsaXplcyB0aGUgc3Vic2NyaXB0aW9uIGZvciB3cml0aW5nIG91dCBvbiBkaXNrLlxyXG4gICAqIEB5aWVsZHMge3N0cmluZ31cclxuICAgKiBAcGFja2FnZVxyXG4gICAqL1xyXG4gICpzZXJpYWxpemUoKVxyXG4gIHtcclxuICAgIGxldCB7X2hvbWVwYWdlLCBfbGFzdERvd25sb2FkfSA9IHRoaXM7XHJcblxyXG4gICAgeWllbGQqIHN1cGVyLnNlcmlhbGl6ZSgpO1xyXG5cclxuICAgIGlmIChfaG9tZXBhZ2UpXHJcbiAgICAgIHlpZWxkIFwiaG9tZXBhZ2U9XCIgKyBfaG9tZXBhZ2U7XHJcbiAgICBpZiAoX2xhc3REb3dubG9hZClcclxuICAgICAgeWllbGQgXCJsYXN0RG93bmxvYWQ9XCIgKyBfbGFzdERvd25sb2FkO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBPbmNlIGluaXRpYWxpemVkLCB0aGUgc2hhcmVkIFN5bmNocm9uaXplciBzaW5nbGV0b24gd2lsbCBiZSBzdG9yZWQgaW4gaGVyZS5cclxuICogQHR5cGUge21vZHVsZTpzeW5jaHJvbml6ZXJ+U3luY2hyb25pemVyfVxyXG4gKi9cclxubGV0IHN5bmNocm9uaXplciA9IG51bGw7XHJcblxyXG5sZXQgRG93bmxvYWRhYmxlU3Vic2NyaXB0aW9uID1cclxuLyoqXHJcbiAqIFRoZSBgRG93bmxvYWRhYmxlU3Vic2NyaXB0aW9uYCBjbGFzcyByZXByZXNlbnRzIGEgcmVndWxhciBmaWx0ZXJcclxuICogc3Vic2NyaXB0aW9uIHRoYXQgaXMgZG93bmxvYWRlZCBieSBBZGJsb2NrIFBsdXMuXHJcbiAqL1xyXG5leHBvcnRzLkRvd25sb2FkYWJsZVN1YnNjcmlwdGlvbiA9XHJcbmNsYXNzIERvd25sb2FkYWJsZVN1YnNjcmlwdGlvbiBleHRlbmRzIFJlZ3VsYXJTdWJzY3JpcHRpb25cclxue1xyXG4gIC8qKlxyXG4gICAqIEFsbG93cyBkb3dubG9hZGFibGUgc3Vic2NyaXB0aW9ucyB0byB1cGRhdGUgdGhlbXNlbHZlcyBvbmNlIHJlLWVuYWJsZWQsXHJcbiAgICogdmlhIHJlY2VpdmluZyB0aGUgU3luY2hyb25pemVyIHNpbmdsZXRvbi5cclxuICAgKiBAcGFyYW0ge21vZHVsZTpzeW5jaHJvbml6ZXJ+U3luY2hyb25pemVyfSByZWZlcmVuY2UgdGhlIFN5bmNocm9uaXplclxyXG4gICAqL1xyXG4gIHN0YXRpYyB1c2VTeW5jaHJvbml6ZXIocmVmZXJlbmNlKVxyXG4gIHtcclxuICAgIHN5bmNocm9uaXplciA9IHJlZmVyZW5jZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBgRG93bmxvYWRhYmxlU3Vic2NyaXB0aW9uYCBvYmplY3QuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMIG9mIHRoZSBzdWJzY3JpcHRpb24uXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IFt0aXRsZV0gVGhlIHRpdGxlIG9mIHRoZSBzdWJzY3JpcHRpb24uXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcih1cmwsIHRpdGxlKVxyXG4gIHtcclxuICAgIHN1cGVyKHVybCwgdGl0bGUpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgbGFzdCBkb3dubG9hZC5cclxuICAgICAqIEB0eXBlIHs/c3RyaW5nfVxyXG4gICAgICogQGRlZmF1bHQgPGNvZGU+bnVsbDwvY29kZT5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAc2VlIG1vZHVsZTpzdWJzY3JpcHRpb25DbGFzc2VzLkRvd25sb2FkYWJsZVN1YnNjcmlwdGlvbiNkb3dubG9hZFN0YXR1c1xyXG4gICAgICovXHJcbiAgICB0aGlzLl9kb3dubG9hZFN0YXR1cyA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbGFzdCB0aW1lIHRoZSBzdWJzY3JpcHRpb24gd2FzIGNvbnNpZGVyZWQgZm9yIGFuIHVwZGF0ZSwgaW4gc2Vjb25kc1xyXG4gICAgICogc2luY2UgdGhlIGJlZ2lubmluZyBvZiB0aGUgVW5peCBlcG9jaC5cclxuICAgICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICAgKiBAZGVmYXVsdCA8Y29kZT4wPC9jb2RlPlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBzZWUgbW9kdWxlOnN1YnNjcmlwdGlvbkNsYXNzZXMuRG93bmxvYWRhYmxlU3Vic2NyaXB0aW9uI2xhc3RDaGVja1xyXG4gICAgICovXHJcbiAgICB0aGlzLl9sYXN0Q2hlY2sgPSAwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIG51bWJlciBvZiBkb3dubG9hZCBmYWlsdXJlcyBzaW5jZSB0aGUgbGFzdCBzdWNjZXNzZnVsIGRvd25sb2FkLlxyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqIEBkZWZhdWx0IDxjb2RlPjA8L2NvZGU+XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHNlZSBtb2R1bGU6c3Vic2NyaXB0aW9uQ2xhc3Nlcy5Eb3dubG9hZGFibGVTdWJzY3JpcHRpb24jZXJyb3JzXHJcbiAgICAgKi9cclxuICAgIHRoaXMuX2Vycm9ycyA9IDA7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbGFzdCB0aW1lIHRoZSBzdWJzY3JpcHRpb24gd2FzIHN1Y2Nlc3NmdWxseSBkb3dubG9hZGVkLCBpbiBzZWNvbmRzXHJcbiAgICAgKiBzaW5jZSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBVbml4IGVwb2NoLlxyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqIEBkZWZhdWx0IDxjb2RlPjA8L2NvZGU+XHJcbiAgICAgKi9cclxuICAgIHRoaXMubGFzdFN1Y2Nlc3MgPSAwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGhhcmQgZXhwaXJhdGlvbiB0aW1lIG9mIHRoZSBzdWJzY3JpcHRpb24sIGluIHNlY29uZHMgc2luY2UgdGhlXHJcbiAgICAgKiBiZWdpbm5pbmcgb2YgdGhlIFVuaXggZXBvY2guXHJcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxyXG4gICAgICogQGRlZmF1bHQgPGNvZGU+MDwvY29kZT5cclxuICAgICAqL1xyXG4gICAgdGhpcy5leHBpcmVzID0gMDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzb2Z0IGV4cGlyYXRpb24gdGltZSBvZiB0aGUgc3Vic2NyaXB0aW9uLCBpbiBzZWNvbmRzIHNpbmNlIHRoZVxyXG4gICAgICogYmVnaW5uaW5nIG9mIHRoZSBVbml4IGVwb2NoLlxyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqIEBkZWZhdWx0IDxjb2RlPjA8L2NvZGU+XHJcbiAgICAgKi9cclxuICAgIHRoaXMuc29mdEV4cGlyYXRpb24gPSAwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIHZlcnNpb24gb2YgdGhlIHN1YnNjcmlwdGlvbiBkYXRhIHRoYXQgd2FzIHJldHJpZXZlZCBvbiBsYXN0XHJcbiAgICAgKiBzdWNjZXNzZnVsIGRvd25sb2FkLlxyXG4gICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAqIEBkZWZhdWx0IDxjb2RlPjA8L2NvZGU+XHJcbiAgICAgKi9cclxuICAgIHRoaXMudmVyc2lvbiA9IDA7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbWluaW1hbCBBZGJsb2NrIFBsdXMgdmVyc2lvbiByZXF1aXJlZCBmb3IgdGhlIHN1YnNjcmlwdGlvbi5cclxuICAgICAqIEB0eXBlIHs/c3RyaW5nfVxyXG4gICAgICogQGRlZmF1bHQgPGNvZGU+bnVsbDwvY29kZT5cclxuICAgICAqL1xyXG4gICAgdGhpcy5yZXF1aXJlZFZlcnNpb24gPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIG51bWJlciBvZiB0aW1lcyB0aGUgc3Vic2NyaXB0aW9uIGhhcyBiZWVuIGRvd25sb2FkZWQuXHJcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxyXG4gICAgICogQGRlZmF1bHQgPGNvZGU+MDwvY29kZT5cclxuICAgICAqL1xyXG4gICAgdGhpcy5kb3dubG9hZENvdW50ID0gMDtcclxuXHJcbiAgICB0aGlzLl9wID0gcHJvZmlsZXIoYERvd25sb2FkYWJsZVN1YnNjcmlwdGlvbkAke3VybH1gKTtcclxuICAgIHRoaXMuX3Auc3RhcnQoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFdoZXRoZXIgdGhlIHN1YnNjcmlwdGlvbiBpcyBkaXNhYmxlZC4gT25jZSByZS1lbmFibGVkLCBpdCBlbnN1cmVzIHRoZVxyXG4gICAqIHN5bmNocm9uaXplciBkb3dubG9hZHMgbGF0ZXN0IHZlcnNpb24gb2YgdGhpcyBzdWJzY3JpcHRpb24uXHJcbiAgICogQHR5cGUge2Jvb2xlYW59XHJcbiAgICogQGRlZmF1bHQgPGNvZGU+ZmFsc2U8L2NvZGU+XHJcbiAgICovXHJcbiAgZ2V0IGRpc2FibGVkKClcclxuICB7XHJcbiAgICByZXR1cm4gc3VwZXIuZGlzYWJsZWQ7XHJcbiAgfVxyXG5cclxuICBzZXQgZGlzYWJsZWQodmFsdWUpXHJcbiAge1xyXG4gICAgbGV0IHtfZGlzYWJsZWR9ID0gdGhpcztcclxuICAgIHN1cGVyLmRpc2FibGVkID0gdmFsdWU7XHJcbiAgICBpZiAoc3luY2hyb25pemVyICYmIF9kaXNhYmxlZCAmJiAhdmFsdWUpXHJcbiAgICAgIHN5bmNocm9uaXplci5leGVjdXRlKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIHN0YXR1cyBvZiB0aGUgbGFzdCBkb3dubG9hZC5cclxuICAgKlxyXG4gICAqIFRoaXMgaXMgYSBtZXNzYWdlIElEIGxpa2UgYHN5bmNocm9uaXplX29rYCBvclxyXG4gICAqIGBzeW5jaHJvbml6ZV9jb25uZWN0aW9uX2Vycm9yYC5cclxuICAgKlxyXG4gICAqIEB0eXBlIHs/c3RyaW5nfVxyXG4gICAqIEBkZWZhdWx0IDxjb2RlPm51bGw8L2NvZGU+XHJcbiAgICovXHJcbiAgZ2V0IGRvd25sb2FkU3RhdHVzKClcclxuICB7XHJcbiAgICByZXR1cm4gdGhpcy5fZG93bmxvYWRTdGF0dXM7XHJcbiAgfVxyXG5cclxuICBzZXQgZG93bmxvYWRTdGF0dXModmFsdWUpXHJcbiAge1xyXG4gICAgbGV0IG9sZFZhbHVlID0gdGhpcy5fZG93bmxvYWRTdGF0dXM7XHJcbiAgICB0aGlzLl9kb3dubG9hZFN0YXR1cyA9IHZhbHVlO1xyXG4gICAgZmlsdGVyTm90aWZpZXIuZW1pdChcInN1YnNjcmlwdGlvbi5kb3dubG9hZFN0YXR1c1wiLCB0aGlzLCB2YWx1ZSwgb2xkVmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGxhc3QgdGltZSB0aGUgc3Vic2NyaXB0aW9uIHdhcyBjb25zaWRlcmVkIGZvciBhbiB1cGRhdGUsIGluIHNlY29uZHNcclxuICAgKiBzaW5jZSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBVbml4IGVwb2NoLlxyXG4gICAqXHJcbiAgICogVGhpcyBpcyB1c2VkIHRvIGluY3JlYXNlIHRoZSBzb2Z0IGV4cGlyYXRpb24gdGltZSBpZiB0aGUgdXNlciBkb2Vzbid0IHVzZVxyXG4gICAqIEFkYmxvY2sgUGx1cyBmb3Igc29tZSB0aW1lLlxyXG4gICAqXHJcbiAgICogQHR5cGUge251bWJlcn1cclxuICAgKiBAZGVmYXVsdCA8Y29kZT4wPC9jb2RlPlxyXG4gICAqL1xyXG4gIGdldCBsYXN0Q2hlY2soKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLl9sYXN0Q2hlY2s7XHJcbiAgfVxyXG5cclxuICBzZXQgbGFzdENoZWNrKHZhbHVlKVxyXG4gIHtcclxuICAgIGlmICh2YWx1ZSAhPSB0aGlzLl9sYXN0Q2hlY2spXHJcbiAgICB7XHJcbiAgICAgIGxldCBvbGRWYWx1ZSA9IHRoaXMuX2xhc3RDaGVjaztcclxuICAgICAgdGhpcy5fbGFzdENoZWNrID0gdmFsdWU7XHJcbiAgICAgIGZpbHRlck5vdGlmaWVyLmVtaXQoXCJzdWJzY3JpcHRpb24ubGFzdENoZWNrXCIsIHRoaXMsIHZhbHVlLCBvbGRWYWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGUgbnVtYmVyIG9mIGRvd25sb2FkIGZhaWx1cmVzIHNpbmNlIHRoZSBsYXN0IHN1Y2Nlc3NmdWwgZG93bmxvYWQuXHJcbiAgICogQHR5cGUge251bWJlcn1cclxuICAgKiBAZGVmYXVsdCA8Y29kZT4wPC9jb2RlPlxyXG4gICAqL1xyXG4gIGdldCBlcnJvcnMoKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLl9lcnJvcnM7XHJcbiAgfVxyXG5cclxuICBzZXQgZXJyb3JzKHZhbHVlKVxyXG4gIHtcclxuICAgIGlmICh2YWx1ZSAhPSB0aGlzLl9lcnJvcnMpXHJcbiAgICB7XHJcbiAgICAgIGxldCBvbGRWYWx1ZSA9IHRoaXMuX2Vycm9ycztcclxuICAgICAgdGhpcy5fZXJyb3JzID0gdmFsdWU7XHJcbiAgICAgIGZpbHRlck5vdGlmaWVyLmVtaXQoXCJzdWJzY3JpcHRpb24uZXJyb3JzXCIsIHRoaXMsIHZhbHVlLCBvbGRWYWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXJpYWxpemVzIHRoZSBzdWJzY3JpcHRpb24gZm9yIHdyaXRpbmcgb3V0IG9uIGRpc2suXHJcbiAgICogQHlpZWxkcyB7c3RyaW5nfVxyXG4gICAqIEBwYWNrYWdlXHJcbiAgICovXHJcbiAgKnNlcmlhbGl6ZSgpXHJcbiAge1xyXG4gICAgbGV0IHtkb3dubG9hZFN0YXR1cywgbGFzdFN1Y2Nlc3MsIGxhc3RDaGVjaywgZXhwaXJlcyxcclxuICAgICAgICAgc29mdEV4cGlyYXRpb24sIGVycm9ycywgdmVyc2lvbiwgcmVxdWlyZWRWZXJzaW9uLFxyXG4gICAgICAgICBkb3dubG9hZENvdW50fSA9IHRoaXM7XHJcblxyXG4gICAgeWllbGQqIHN1cGVyLnNlcmlhbGl6ZSgpO1xyXG5cclxuICAgIGlmIChkb3dubG9hZFN0YXR1cylcclxuICAgICAgeWllbGQgXCJkb3dubG9hZFN0YXR1cz1cIiArIGRvd25sb2FkU3RhdHVzO1xyXG4gICAgaWYgKGxhc3RTdWNjZXNzKVxyXG4gICAgICB5aWVsZCBcImxhc3RTdWNjZXNzPVwiICsgbGFzdFN1Y2Nlc3M7XHJcbiAgICBpZiAobGFzdENoZWNrKVxyXG4gICAgICB5aWVsZCBcImxhc3RDaGVjaz1cIiArIGxhc3RDaGVjaztcclxuICAgIGlmIChleHBpcmVzKVxyXG4gICAgICB5aWVsZCBcImV4cGlyZXM9XCIgKyBleHBpcmVzO1xyXG4gICAgaWYgKHNvZnRFeHBpcmF0aW9uKVxyXG4gICAgICB5aWVsZCBcInNvZnRFeHBpcmF0aW9uPVwiICsgc29mdEV4cGlyYXRpb247XHJcbiAgICBpZiAoZXJyb3JzKVxyXG4gICAgICB5aWVsZCBcImVycm9ycz1cIiArIGVycm9ycztcclxuICAgIGlmICh2ZXJzaW9uKVxyXG4gICAgICB5aWVsZCBcInZlcnNpb249XCIgKyB2ZXJzaW9uO1xyXG4gICAgaWYgKHJlcXVpcmVkVmVyc2lvbilcclxuICAgICAgeWllbGQgXCJyZXF1aXJlZFZlcnNpb249XCIgKyByZXF1aXJlZFZlcnNpb247XHJcbiAgICBpZiAoZG93bmxvYWRDb3VudClcclxuICAgICAgeWllbGQgXCJkb3dubG9hZENvdW50PVwiICsgZG93bmxvYWRDb3VudDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFB1dCBhIGJlbmNobWFya2luZyBldmVudFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCBiZW5jaG1hcmtpbmcgZXZlbnRcclxuICAgKi9cclxuICBtYXJrKGV2ZW50KVxyXG4gIHtcclxuICAgIHRoaXMuX3AubWFyayhldmVudCk7XHJcbiAgfVxyXG59O1xyXG4iLCIvKlxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBBZGJsb2NrIFBsdXMgPGh0dHBzOi8vYWRibG9ja3BsdXMub3JnLz4sXHJcbiAqIENvcHlyaWdodCAoQykgMjAwNi1wcmVzZW50IGV5ZW8gR21iSFxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBhc1xyXG4gKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICpcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCBBZGJsb2NrIFBsdXMuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqL1xyXG5cclxuLyoqIEBtb2R1bGUgKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuLyoqXHJcbiAqIEBmaWxlT3ZlcnZpZXcgTWFuYWdlcyBzeW5jaHJvbml6YXRpb24gb2YgZmlsdGVyIHN1YnNjcmlwdGlvbnMuXHJcbiAqL1xyXG5cclxuY29uc3Qge1ByZWZzfSA9IHJlcXVpcmUoXCJwcmVmc1wiKTtcclxuXHJcbmNvbnN0IHtNSUxMSVNfSU5fU0VDT05ELCBNSUxMSVNfSU5fTUlOVVRFLCBNSUxMSVNfSU5fSE9VUixcclxuICAgICAgIE1JTExJU19JTl9EQVl9ID0gcmVxdWlyZShcIi4vdGltZVwiKTtcclxuY29uc3Qge0Rvd25sb2FkZXIsIERvd25sb2FkYWJsZX0gPSByZXF1aXJlKFwiLi9kb3dubG9hZGVyXCIpO1xyXG5jb25zdCB7RmlsdGVyfSA9IHJlcXVpcmUoXCIuL2ZpbHRlckNsYXNzZXNcIik7XHJcbmNvbnN0IHtmaWx0ZXJTdG9yYWdlfSA9IHJlcXVpcmUoXCIuL2ZpbHRlclN0b3JhZ2VcIik7XHJcbmNvbnN0IHtmaWx0ZXJOb3RpZmllcn0gPSByZXF1aXJlKFwiLi9maWx0ZXJOb3RpZmllclwiKTtcclxuY29uc3Qge1N1YnNjcmlwdGlvbixcclxuICAgICAgIERvd25sb2FkYWJsZVN1YnNjcmlwdGlvbn0gPSByZXF1aXJlKFwiLi9zdWJzY3JpcHRpb25DbGFzc2VzXCIpO1xyXG5jb25zdCB7YW5hbHl0aWNzfSA9IHJlcXVpcmUoXCIuL2FuYWx5dGljc1wiKTtcclxuXHJcbmNvbnN0IElOSVRJQUxfREVMQVkgPSAxICogTUlMTElTX0lOX01JTlVURTtcclxuY29uc3QgQ0hFQ0tfSU5URVJWQUwgPSAxICogTUlMTElTX0lOX0hPVVI7XHJcbmNvbnN0IERFRkFVTFRfRVhQSVJBVElPTl9JTlRFUlZBTCA9IDUgKiBNSUxMSVNfSU5fREFZO1xyXG5cclxuLyoqXHJcbiAqIERvd25sb2FkcyBmaWx0ZXIgc3Vic2NyaXB0aW9ucyB3aGVuZXZlciBuZWNlc3NhcnkuXHJcbiAqL1xyXG5jbGFzcyBTeW5jaHJvbml6ZXJcclxue1xyXG4gIC8qKlxyXG4gICAqIEBoaWRlY29uc3RydWN0b3JcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcigpXHJcbiAge1xyXG4gICAgLyoqXHJcbiAgICAgKiBXaGV0aGVyIHRoZSBkb3dubG9hZGluZyBvZiBzdWJzY3JpcHRpb25zIGhhcyBiZWVuIHN0YXJ0ZWQuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICB0aGlzLl9zdGFydGVkID0gZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgb2JqZWN0IHByb3ZpZGluZyBhY3R1YWwgZG93bmxvYWRpbmcgZnVuY3Rpb25hbGl0eS5cclxuICAgICAqIEB0eXBlIHttb2R1bGU6ZG93bmxvYWRlci5Eb3dubG9hZGVyfVxyXG4gICAgICovXHJcbiAgICB0aGlzLl9kb3dubG9hZGVyID0gbmV3IERvd25sb2FkZXIodGhpcy5fZ2V0RG93bmxvYWRhYmxlcy5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICB0aGlzLl9kb3dubG9hZGVyLm9uRXhwaXJhdGlvbkNoYW5nZSA9IHRoaXMuX29uRXhwaXJhdGlvbkNoYW5nZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fZG93bmxvYWRlci5vbkRvd25sb2FkU3RhcnRlZCA9IHRoaXMuX29uRG93bmxvYWRTdGFydGVkLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9kb3dubG9hZGVyLm9uRG93bmxvYWRTdWNjZXNzID0gdGhpcy5fb25Eb3dubG9hZFN1Y2Nlc3MuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2Rvd25sb2FkZXIub25Eb3dubG9hZEVycm9yID0gdGhpcy5fb25Eb3dubG9hZEVycm9yLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdGFydHMgZG93bmxvYWRpbmcgc3Vic2NyaXB0aW9ucy5cclxuICAgKlxyXG4gICAqIE5vIHN1YnNjcmlwdGlvbnMgYXJlIGRvd25sb2FkZWQgdW50aWwgdGhpcyBmdW5jdGlvbiBoYXMgYmVlbiBjYWxsZWQgYXRcclxuICAgKiBsZWFzdCBvbmNlLlxyXG4gICAqL1xyXG4gIHN0YXJ0KClcclxuICB7XHJcbiAgICBpZiAodGhpcy5fc3RhcnRlZClcclxuICAgICAgcmV0dXJuO1xyXG5cclxuICAgIHRoaXMuX2Rvd25sb2FkZXIuc2NoZWR1bGVDaGVja3MoQ0hFQ0tfSU5URVJWQUwsIElOSVRJQUxfREVMQVkpO1xyXG4gICAgdGhpcy5fc3RhcnRlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDbGVhciBhbnkgZnVydGhlciBkb3dubG9hZGVyIHNjaGVkdWxlZCBjaGVjayBhbmQgc2V0IGl0cyBpbnRlcm5hbCBzdGF0ZVxyXG4gICAqIGFzIG5vdCBzdGFydGVkLlxyXG4gICAqL1xyXG4gIHN0b3AoKVxyXG4gIHtcclxuICAgIHRoaXMuX3N0YXJ0ZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuX2Rvd25sb2FkZXIudW5zY2hlZHVsZUNoZWNrcygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIHdoZXRoZXIgYSBzdWJzY3JpcHRpb24gaXMgY3VycmVudGx5IGJlaW5nIGRvd25sb2FkZWQuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAgVVJMIG9mIHRoZSBzdWJzY3JpcHRpb25cclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgKi9cclxuICBpc0V4ZWN1dGluZyh1cmwpXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Rvd25sb2FkZXIuaXNEb3dubG9hZGluZyh1cmwpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RhcnRzIHRoZSBkb3dubG9hZCBvZiBhIHN1YnNjcmlwdGlvbi5cclxuICAgKiBAcGFyYW0ge21vZHVsZTpzdWJzY3JpcHRpb25DbGFzc2VzLkRvd25sb2FkYWJsZVN1YnNjcmlwdGlvbn0gc3Vic2NyaXB0aW9uXHJcbiAgICogICBTdWJzY3JpcHRpb24gdG8gYmUgZG93bmxvYWRlZFxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gbWFudWFsXHJcbiAgICogICBgdHJ1ZWAgZm9yIGEgbWFudWFsbHkgc3RhcnRlZCBkb3dubG9hZCAoc2hvdWxkIG5vdCB0cmlnZ2VyIGZhbGxiYWNrXHJcbiAgICogICByZXF1ZXN0cylcclxuICAgKi9cclxuICBleGVjdXRlKHN1YnNjcmlwdGlvbiwgbWFudWFsKVxyXG4gIHtcclxuICAgIHRoaXMuX2Rvd25sb2FkZXIuZG93bmxvYWQodGhpcy5fZ2V0RG93bmxvYWRhYmxlKHN1YnNjcmlwdGlvbiwgbWFudWFsKSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBZaWVsZHMgYHtAbGluayBtb2R1bGU6ZG93bmxvYWRlci5Eb3dubG9hZGFibGUgRG93bmxvYWRhYmxlfWAgaW5zdGFuY2VzIGZvclxyXG4gICAqIGFsbCBzdWJzY3JpcHRpb25zIHRoYXQgY2FuIGJlIGRvd25sb2FkZWQuXHJcbiAgICogQHlpZWxkcyB7bW9kdWxlOmRvd25sb2FkZXIuRG93bmxvYWRhYmxlfVxyXG4gICAqL1xyXG4gICpfZ2V0RG93bmxvYWRhYmxlcygpXHJcbiAge1xyXG4gICAgaWYgKCFQcmVmcy5zdWJzY3JpcHRpb25zX2F1dG91cGRhdGUpXHJcbiAgICAgIHJldHVybjtcclxuXHJcbiAgICBmb3IgKGxldCBzdWJzY3JpcHRpb24gb2YgZmlsdGVyU3RvcmFnZS5zdWJzY3JpcHRpb25zKCkpXHJcbiAgICB7XHJcbiAgICAgIGlmIChzdWJzY3JpcHRpb24gaW5zdGFuY2VvZiBEb3dubG9hZGFibGVTdWJzY3JpcHRpb24pXHJcbiAgICAgICAgeWllbGQgdGhpcy5fZ2V0RG93bmxvYWRhYmxlKHN1YnNjcmlwdGlvbiwgZmFsc2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhIGB7QGxpbmsgbW9kdWxlOmRvd25sb2FkZXIuRG93bmxvYWRhYmxlIERvd25sb2FkYWJsZX1gIGluc3RhbmNlXHJcbiAgICogZm9yIGEgc3Vic2NyaXB0aW9uLlxyXG4gICAqIEBwYXJhbSB7bW9kdWxlOnN1YnNjcmlwdGlvbkNsYXNzZXMuU3Vic2NyaXB0aW9ufSBzdWJzY3JpcHRpb25cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IG1hbnVhbFxyXG4gICAqIEByZXR1cm5zIHttb2R1bGU6ZG93bmxvYWRlci5Eb3dubG9hZGFibGV9XHJcbiAgICovXHJcbiAgX2dldERvd25sb2FkYWJsZShzdWJzY3JpcHRpb24sIG1hbnVhbClcclxuICB7XHJcbiAgICBsZXQge3VybCwgbGFzdERvd25sb2FkLCBsYXN0U3VjY2VzcywgbGFzdENoZWNrLCB2ZXJzaW9uLCBzb2Z0RXhwaXJhdGlvbixcclxuICAgICAgICAgZXhwaXJlcywgZG93bmxvYWRDb3VudCwgZGlzYWJsZWR9ID0gc3Vic2NyaXB0aW9uO1xyXG5cclxuICAgIGxldCByZXN1bHQgPSBuZXcgRG93bmxvYWRhYmxlKHVybCk7XHJcblxyXG4gICAgaWYgKGFuYWx5dGljcy5pc1RydXN0ZWQodXJsKSlcclxuICAgICAgcmVzdWx0LmZpcnN0VmVyc2lvbiA9IGFuYWx5dGljcy5nZXRGaXJzdFZlcnNpb24oKTtcclxuXHJcbiAgICBpZiAobGFzdERvd25sb2FkICE9IGxhc3RTdWNjZXNzKVxyXG4gICAgICByZXN1bHQubGFzdEVycm9yID0gbGFzdERvd25sb2FkICogTUlMTElTX0lOX1NFQ09ORDtcclxuXHJcbiAgICByZXN1bHQubGFzdENoZWNrID0gbGFzdENoZWNrICogTUlMTElTX0lOX1NFQ09ORDtcclxuICAgIHJlc3VsdC5sYXN0VmVyc2lvbiA9IHZlcnNpb247XHJcbiAgICByZXN1bHQuc29mdEV4cGlyYXRpb24gPSBzb2Z0RXhwaXJhdGlvbiAqIE1JTExJU19JTl9TRUNPTkQ7XHJcbiAgICByZXN1bHQuaGFyZEV4cGlyYXRpb24gPSBleHBpcmVzICogTUlMTElTX0lOX1NFQ09ORDtcclxuICAgIHJlc3VsdC5tYW51YWwgPSBtYW51YWw7XHJcbiAgICByZXN1bHQuZG93bmxvYWRDb3VudCA9IGRvd25sb2FkQ291bnQ7XHJcbiAgICBpZiAoZGlzYWJsZWQpXHJcbiAgICAgIHJlc3VsdC5tZXRob2QgPSBcIkhFQURcIjtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgX29uRXhwaXJhdGlvbkNoYW5nZShkb3dubG9hZGFibGUpXHJcbiAge1xyXG4gICAgbGV0IHN1YnNjcmlwdGlvbiA9IFN1YnNjcmlwdGlvbi5mcm9tVVJMKGRvd25sb2FkYWJsZS51cmwpO1xyXG4gICAgc3Vic2NyaXB0aW9uLmxhc3RDaGVjayA9IE1hdGgucm91bmQoXHJcbiAgICAgIGRvd25sb2FkYWJsZS5sYXN0Q2hlY2sgLyBNSUxMSVNfSU5fU0VDT05EXHJcbiAgICApO1xyXG4gICAgc3Vic2NyaXB0aW9uLnNvZnRFeHBpcmF0aW9uID0gTWF0aC5yb3VuZChcclxuICAgICAgZG93bmxvYWRhYmxlLnNvZnRFeHBpcmF0aW9uIC8gTUlMTElTX0lOX1NFQ09ORFxyXG4gICAgKTtcclxuICAgIHN1YnNjcmlwdGlvbi5leHBpcmVzID0gTWF0aC5yb3VuZChcclxuICAgICAgZG93bmxvYWRhYmxlLmhhcmRFeHBpcmF0aW9uIC8gTUlMTElTX0lOX1NFQ09ORFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9vbkRvd25sb2FkU3RhcnRlZChkb3dubG9hZGFibGUpXHJcbiAge1xyXG4gICAgbGV0IHN1YnNjcmlwdGlvbiA9IFN1YnNjcmlwdGlvbi5mcm9tVVJMKGRvd25sb2FkYWJsZS51cmwpO1xyXG4gICAgZmlsdGVyTm90aWZpZXIuZW1pdChcInN1YnNjcmlwdGlvbi5kb3dubG9hZGluZ1wiLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgc3Vic2NyaXB0aW9uLm1hcmsoXCJkb3dubG9hZGluZy5zdGFydGVkXCIpO1xyXG4gIH1cclxuXHJcbiAgX29uRG93bmxvYWRTdWNjZXNzKGRvd25sb2FkYWJsZSwgcmVzcG9uc2VUZXh0LCBlcnJvckNhbGxiYWNrLFxyXG4gICAgICAgICAgICAgICAgICAgICByZWRpcmVjdENhbGxiYWNrKVxyXG4gIHtcclxuICAgIGxldCBzdWJzY3JpcHRpb24gPSBTdWJzY3JpcHRpb24uZnJvbVVSTChkb3dubG9hZGFibGUucmVkaXJlY3RVUkwgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZGFibGUudXJsKTtcclxuICAgIHN1YnNjcmlwdGlvbi5tYXJrKFwiZG93bmxvYWRpbmcuZmluaXNoZWRcIik7XHJcbiAgICBzdWJzY3JpcHRpb24ubWFyayhcInBhcnNpbmcuc3RhcnRlZFwiKTtcclxuXHJcbiAgICBsZXQgaXNIRUFEID0gZG93bmxvYWRhYmxlLm1ldGhvZCA9PT0gXCJIRUFEXCI7XHJcblxyXG4gICAgbGV0IHtlcnJvciwgbGluZXMsIHBhcmFtcyxcclxuICAgICAgICAgbWluVmVyc2lvbn0gPSBpc0hFQUQgPyB7cGFyYW1zOiB7fX0gOiBwYXJzZUZpbHRlcnMocmVzcG9uc2VUZXh0KTtcclxuXHJcbiAgICBpZiAoZXJyb3IpXHJcbiAgICAgIHJldHVybiBlcnJvckNhbGxiYWNrKGVycm9yKTtcclxuXHJcbiAgICBpZiAocGFyYW1zLnJlZGlyZWN0KVxyXG4gICAgICByZXR1cm4gcmVkaXJlY3RDYWxsYmFjayhwYXJhbXMucmVkaXJlY3QpO1xyXG5cclxuICAgIHN1YnNjcmlwdGlvbi5tYXJrKFwicGFyc2luZy5maW5pc2hlZFwiKTtcclxuXHJcbiAgICAvLyBIYW5kbGUgcmVkaXJlY3RzXHJcbiAgICBpZiAoZG93bmxvYWRhYmxlLnJlZGlyZWN0VVJMICYmXHJcbiAgICAgICAgZG93bmxvYWRhYmxlLnJlZGlyZWN0VVJMICE9IGRvd25sb2FkYWJsZS51cmwpXHJcbiAgICB7XHJcbiAgICAgIGxldCBvbGRTdWJzY3JpcHRpb24gPSBTdWJzY3JpcHRpb24uZnJvbVVSTChkb3dubG9hZGFibGUudXJsKTtcclxuICAgICAgc3Vic2NyaXB0aW9uLnRpdGxlID0gb2xkU3Vic2NyaXB0aW9uLnRpdGxlO1xyXG4gICAgICBzdWJzY3JpcHRpb24uZGlzYWJsZWQgPSBvbGRTdWJzY3JpcHRpb24uZGlzYWJsZWQ7XHJcbiAgICAgIHN1YnNjcmlwdGlvbi5sYXN0Q2hlY2sgPSBvbGRTdWJzY3JpcHRpb24ubGFzdENoZWNrO1xyXG5cclxuICAgICAgbGV0IGxpc3RlZCA9IGZpbHRlclN0b3JhZ2UuaGFzU3Vic2NyaXB0aW9uKG9sZFN1YnNjcmlwdGlvbik7XHJcbiAgICAgIGlmIChsaXN0ZWQpXHJcbiAgICAgICAgZmlsdGVyU3RvcmFnZS5yZW1vdmVTdWJzY3JpcHRpb24ob2xkU3Vic2NyaXB0aW9uKTtcclxuXHJcbiAgICAgIFN1YnNjcmlwdGlvbi5rbm93blN1YnNjcmlwdGlvbnMuZGVsZXRlKG9sZFN1YnNjcmlwdGlvbi51cmwpO1xyXG5cclxuICAgICAgaWYgKGxpc3RlZClcclxuICAgICAgICBmaWx0ZXJTdG9yYWdlLmFkZFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRoZSBkb3dubG9hZCBhY3R1YWxseSBzdWNjZWVkZWRcclxuICAgIHN1YnNjcmlwdGlvbi5sYXN0U3VjY2VzcyA9IHN1YnNjcmlwdGlvbi5sYXN0RG93bmxvYWQgPSBNYXRoLnJvdW5kKFxyXG4gICAgICBEYXRlLm5vdygpIC8gTUlMTElTX0lOX1NFQ09ORFxyXG4gICAgKTtcclxuICAgIHN1YnNjcmlwdGlvbi5kb3dubG9hZFN0YXR1cyA9IFwic3luY2hyb25pemVfb2tcIjtcclxuICAgIHN1YnNjcmlwdGlvbi5kb3dubG9hZENvdW50ID0gZG93bmxvYWRhYmxlLmRvd25sb2FkQ291bnQ7XHJcbiAgICBzdWJzY3JpcHRpb24uZXJyb3JzID0gMDtcclxuXHJcbiAgICAvLyBQcm9jZXNzIHBhcmFtZXRlcnNcclxuICAgIGlmIChwYXJhbXMuaG9tZXBhZ2UpXHJcbiAgICB7XHJcbiAgICAgIGxldCB1cmw7XHJcbiAgICAgIHRyeVxyXG4gICAgICB7XHJcbiAgICAgICAgdXJsID0gbmV3IFVSTChwYXJhbXMuaG9tZXBhZ2UpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhdGNoIChlKVxyXG4gICAgICB7XHJcbiAgICAgICAgdXJsID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHVybCAmJiAodXJsLnByb3RvY29sID09IFwiaHR0cDpcIiB8fCB1cmwucHJvdG9jb2wgPT0gXCJodHRwczpcIikpXHJcbiAgICAgICAgc3Vic2NyaXB0aW9uLmhvbWVwYWdlID0gdXJsLmhyZWY7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHBhcmFtcy50aXRsZSlcclxuICAgIHtcclxuICAgICAgc3Vic2NyaXB0aW9uLnRpdGxlID0gcGFyYW1zLnRpdGxlO1xyXG4gICAgICBzdWJzY3JpcHRpb24uZml4ZWRUaXRsZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIHN1YnNjcmlwdGlvbi5maXhlZFRpdGxlID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHBhcmFtcy52ZXJzaW9uKVxyXG4gICAge1xyXG4gICAgICBzdWJzY3JpcHRpb24udmVyc2lvbiA9IHBhcnNlSW50KHBhcmFtcy52ZXJzaW9uLCAxMCk7XHJcblxyXG4gICAgICBpZiAoYW5hbHl0aWNzLmlzVHJ1c3RlZChkb3dubG9hZGFibGUucmVkaXJlY3RVUkwgfHwgZG93bmxvYWRhYmxlLnVybCkpXHJcbiAgICAgICAgYW5hbHl0aWNzLnJlY29yZFZlcnNpb24ocGFyYW1zLnZlcnNpb24pO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBzdWJzY3JpcHRpb24udmVyc2lvbiA9IGlzSEVBRCA/IGRvd25sb2FkYWJsZS5sYXN0VmVyc2lvbiA6IDA7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGV4cGlyYXRpb25JbnRlcnZhbCA9IGlzSEVBRCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1JTExJU19JTl9EQVkgOiBERUZBVUxUX0VYUElSQVRJT05fSU5URVJWQUw7XHJcbiAgICBpZiAocGFyYW1zLmV4cGlyZXMpXHJcbiAgICB7XHJcbiAgICAgIGxldCBtYXRjaCA9IC9eKFxcZCspXFxzKihoKT8vLmV4ZWMocGFyYW1zLmV4cGlyZXMpO1xyXG4gICAgICBpZiAobWF0Y2gpXHJcbiAgICAgIHtcclxuICAgICAgICBsZXQgaW50ZXJ2YWwgPSBwYXJzZUludChtYXRjaFsxXSwgMTApO1xyXG4gICAgICAgIGlmIChtYXRjaFsyXSlcclxuICAgICAgICAgIGV4cGlyYXRpb25JbnRlcnZhbCA9IGludGVydmFsICogTUlMTElTX0lOX0hPVVI7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgZXhwaXJhdGlvbkludGVydmFsID0gaW50ZXJ2YWwgKiBNSUxMSVNfSU5fREFZO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IFtcclxuICAgICAgc29mdEV4cGlyYXRpb24sXHJcbiAgICAgIGhhcmRFeHBpcmF0aW9uXHJcbiAgICBdID0gdGhpcy5fZG93bmxvYWRlci5wcm9jZXNzRXhwaXJhdGlvbkludGVydmFsKGV4cGlyYXRpb25JbnRlcnZhbCk7XHJcbiAgICBzdWJzY3JpcHRpb24uc29mdEV4cGlyYXRpb24gPSBNYXRoLnJvdW5kKHNvZnRFeHBpcmF0aW9uIC8gTUlMTElTX0lOX1NFQ09ORCk7XHJcbiAgICBzdWJzY3JpcHRpb24uZXhwaXJlcyA9IE1hdGgucm91bmQoaGFyZEV4cGlyYXRpb24gLyBNSUxMSVNfSU5fU0VDT05EKTtcclxuXHJcbiAgICBpZiAobWluVmVyc2lvbilcclxuICAgICAgc3Vic2NyaXB0aW9uLnJlcXVpcmVkVmVyc2lvbiA9IG1pblZlcnNpb247XHJcbiAgICBlbHNlXHJcbiAgICAgIGRlbGV0ZSBzdWJzY3JpcHRpb24ucmVxdWlyZWRWZXJzaW9uO1xyXG5cclxuICAgIC8vIEluIGNhc2Ugb2YgSEVBRCByZXF1ZXN0IChkaXNhYmxlZCBzdWJzY3JpcHRpb24pIG5vdGlmeSBhbiB1cGRhdGUgc28gdGhhdFxyXG4gICAgLy8gdGhlIGxhc3QgdmVyc2lvbiBvZiB0aGUgc3Vic2NyaXB0aW9uIHdpbGwgYmUgc3RvcmVkIGZvciB0aGUgbmV4dCB0aW1lLlxyXG4gICAgaWYgKGlzSEVBRClcclxuICAgICAgZmlsdGVyTm90aWZpZXIuZW1pdChcInN1YnNjcmlwdGlvbi51cGRhdGVkXCIsIHN1YnNjcmlwdGlvbik7XHJcbiAgICBlbHNlXHJcbiAgICAgIHByb2Nlc3NGaWx0ZXJzKHN1YnNjcmlwdGlvbiwgbGluZXMpO1xyXG4gIH1cclxuXHJcbiAgX29uRG93bmxvYWRFcnJvcihkb3dubG9hZGFibGUsIGRvd25sb2FkVVJMLCBlcnJvciwgcmVzcG9uc2VTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICByZWRpcmVjdENhbGxiYWNrKVxyXG4gIHtcclxuICAgIGxldCBzdWJzY3JpcHRpb24gPSBTdWJzY3JpcHRpb24uZnJvbVVSTChkb3dubG9hZGFibGUudXJsKTtcclxuICAgIHN1YnNjcmlwdGlvbi5tYXJrKFwiZG93bmxvYWRpbmcuZmluaXNoZWRcIik7XHJcbiAgICBzdWJzY3JpcHRpb24ubGFzdERvd25sb2FkID0gTWF0aC5yb3VuZChEYXRlLm5vdygpIC8gTUlMTElTX0lOX1NFQ09ORCk7XHJcbiAgICBzdWJzY3JpcHRpb24uZG93bmxvYWRTdGF0dXMgPSBlcnJvcjtcclxuXHJcbiAgICAvLyBSZXF1ZXN0IGZhbGxiYWNrIFVSTCBpZiBuZWNlc3NhcnkgLSBmb3IgYXV0b21hdGljIHVwZGF0ZXMgb25seVxyXG4gICAgaWYgKCFkb3dubG9hZGFibGUubWFudWFsKVxyXG4gICAge1xyXG4gICAgICBzdWJzY3JpcHRpb24uZXJyb3JzKys7XHJcblxyXG4gICAgICBpZiAocmVkaXJlY3RDYWxsYmFjayAmJlxyXG4gICAgICAgICAgc3Vic2NyaXB0aW9uLmVycm9ycyA+PSBQcmVmcy5zdWJzY3JpcHRpb25zX2ZhbGxiYWNrZXJyb3JzICYmXHJcbiAgICAgICAgICAvXmh0dHBzPzpcXC9cXC8vaS50ZXN0KHN1YnNjcmlwdGlvbi51cmwpKVxyXG4gICAgICB7XHJcbiAgICAgICAgc3Vic2NyaXB0aW9uLmVycm9ycyA9IDA7XHJcblxyXG4gICAgICAgIGxldCBmYWxsYmFja1VSTCA9IFByZWZzLnN1YnNjcmlwdGlvbnNfZmFsbGJhY2t1cmw7XHJcbiAgICAgICAgY29uc3Qge2FkZG9uVmVyc2lvbn0gPSByZXF1aXJlKFwiaW5mb1wiKTtcclxuICAgICAgICBmYWxsYmFja1VSTCA9IGZhbGxiYWNrVVJMLnJlcGxhY2UoLyVWRVJTSU9OJS9nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoYWRkb25WZXJzaW9uKSk7XHJcbiAgICAgICAgZmFsbGJhY2tVUkwgPSBmYWxsYmFja1VSTC5yZXBsYWNlKC8lU1VCU0NSSVBUSU9OJS9nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoc3Vic2NyaXB0aW9uLnVybCkpO1xyXG4gICAgICAgIGZhbGxiYWNrVVJMID0gZmFsbGJhY2tVUkwucmVwbGFjZSgvJVVSTCUvZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KGRvd25sb2FkVVJMKSk7XHJcbiAgICAgICAgZmFsbGJhY2tVUkwgPSBmYWxsYmFja1VSTC5yZXBsYWNlKC8lRVJST1IlL2csXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChlcnJvcikpO1xyXG4gICAgICAgIGZhbGxiYWNrVVJMID0gZmFsbGJhY2tVUkwucmVwbGFjZSgvJVJFU1BPTlNFU1RBVFVTJS9nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQocmVzcG9uc2VTdGF0dXMpKTtcclxuXHJcbiAgICAgICAgbGV0IGluaXRPYmogPSB7XHJcbiAgICAgICAgICBjYWNoZTogXCJuby1zdG9yZVwiLFxyXG4gICAgICAgICAgY3JlZGVudGlhbHM6IFwib21pdFwiLFxyXG4gICAgICAgICAgcmVmZXJyZXI6IFwibm8tcmVmZXJyZXJcIixcclxuICAgICAgICAgIG1ldGhvZDogZG93bmxvYWRhYmxlLm1ldGhvZFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZldGNoKGZhbGxiYWNrVVJMLCBpbml0T2JqKS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLnRleHQoKSlcclxuICAgICAgICAudGhlbihyZXNwb25zZVRleHQgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAoIWZpbHRlclN0b3JhZ2UuaGFzU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbikpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICBsZXQgbWF0Y2ggPSAvXihcXGQrKSg/OlxccysoXFxTKykpPyQvLmV4ZWMocmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSA9PSBcIjMwMVwiICYmICAgIC8vIE1vdmVkIHBlcm1hbmVudGx5XHJcbiAgICAgICAgICAgICAgbWF0Y2hbMl0gJiYgL15odHRwcz86XFwvXFwvL2kudGVzdChtYXRjaFsyXSkpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHJlZGlyZWN0Q2FsbGJhY2sobWF0Y2hbMl0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0gPT0gXCI0MTBcIikgLy8gR29uZVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgZGF0YSA9IFwiW0FkYmxvY2tdXFxuXCIgK1xyXG4gICAgICAgICAgICAgIFsuLi5zdWJzY3JpcHRpb24uZmlsdGVyVGV4dCgpXS5qb2luKFwiXFxuXCIpO1xyXG4gICAgICAgICAgICByZWRpcmVjdENhbGxiYWNrKFwiZGF0YTp0ZXh0L3BsYWluLFwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGEpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxubGV0IHN5bmNocm9uaXplciA9XHJcbi8qKlxyXG4gKiBUaGlzIG9iamVjdCBpcyByZXNwb25zaWJsZSBmb3IgZG93bmxvYWRpbmcgZmlsdGVyIHN1YnNjcmlwdGlvbnMgd2hlbmV2ZXJcclxuICogbmVjZXNzYXJ5LlxyXG4gKiBAdHlwZSB7bW9kdWxlOnN5bmNocm9uaXplcn5TeW5jaHJvbml6ZXJ9XHJcbiAqL1xyXG5leHBvcnRzLnN5bmNocm9uaXplciA9IG5ldyBTeW5jaHJvbml6ZXIoKTtcclxuXHJcbi8vIGFsbG93IERvd25sb2FkYWJsZVN1YnNjcmlwdGlvbiB0byB1cGRhdGUgdGhlbXNlbHZlcyBvbmNlIHJlLWVuYWJsZWRcclxuRG93bmxvYWRhYmxlU3Vic2NyaXB0aW9uLnVzZVN5bmNocm9uaXplcihzeW5jaHJvbml6ZXIpO1xyXG5cclxuLyoqXHJcbiAqIEdpdmVuIGEgdmFsaWQgc3Vic2NyaXB0aW9uIGFuZCBzb21lIHRleHQsIGl0IHBhcnNlcyBhbGwgZmlsdGVycyBhbmQgYWRkXHJcbiAqIHRoZXNlIGluIGJ1bGsgdG8gdGhlIHNwZWNpZmllZCBzdWJzY3JpcHRpb24uXHJcbiAqIEBwYXJhbSB7bW9kdWxlOnN1YnNjcmlwdGlvbkNsYXNzZXMuU3Vic2NyaXB0aW9ufSBzdWJzY3JpcHRpb24gVGhlXHJcbiAqICBTdWJzY3JpcHRpb24gdG8gdXNlIGFzIHJlZmVyZW5jZSBmb3IgbWFudWFsbHkgYWRkZWQgZmlsdGVycy5cclxuICogQHBhcmFtIHtzdHJpbmd9IGZpbHRlcnMgVGhlIGZpbHRlcnMgZmlsZS90ZXh0IHRvIGFkZC5cclxuICogQHBhcmFtIHtmdW5jdGlvbn0gZXJyb3JDYWxsYmFjayBBIGNhbGxiYWNrIGludm9rZWQgaWYgZXJyb3JzIG9jY3VyLlxyXG4gKi9cclxuZXhwb3J0cy5hZGRTdWJzY3JpcHRpb25GaWx0ZXJzID0gZnVuY3Rpb24oc3Vic2NyaXB0aW9uLCBmaWx0ZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrKVxyXG57XHJcbiAgbGV0IHtlcnJvciwgbGluZXN9ID0gcGFyc2VGaWx0ZXJzKGZpbHRlcnMpO1xyXG4gIGlmIChlcnJvcilcclxuICAgIGVycm9yQ2FsbGJhY2soZXJyb3IpO1xyXG4gIGVsc2VcclxuICAgIHByb2Nlc3NGaWx0ZXJzKHN1YnNjcmlwdGlvbiwgbGluZXMpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdpdmVuIHNvbWUgdGV4dCBjb250YWluaW5nIGZpbHRlcnMsIHBhcnNlIGVhY2ggbGluZSBhbmQgcmV0dXJuIGFsbCBkZXRhaWxzLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVycyBUaGUgZmlsdGVycyBmaWxlL3RleHQgdG8gcGFyc2UuXHJcbiAqIEByZXR1cm5zIHtPYmplY3QuPGVycm9yPywgbGluZXM/LCBwYXJhbXM/LCBtaW5WZXJzaW9uPz59IEFsbCBwYXJzZWQgZGV0YWlscyxcclxuICogIGlmIGF2YWlsYWJsZS5cclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlRmlsdGVycyhmaWx0ZXJzKVxyXG57XHJcbiAgbGV0IGxpbmVzID0gZmlsdGVycy5zcGxpdCgvW1xcclxcbl0rLyk7XHJcbiAgbGV0IGhlYWRlck1hdGNoID0gL1xcW0FkYmxvY2soPzpcXHMqUGx1c1xccyooW1xcZC5dKyk/KT9cXF0vaS5leGVjKGxpbmVzWzBdKTtcclxuXHJcbiAgaWYgKCFoZWFkZXJNYXRjaClcclxuICAgIHJldHVybiB7ZXJyb3I6IFwic3luY2hyb25pemVfaW52YWxpZF9kYXRhXCJ9O1xyXG5cclxuICBsZXQgbWluVmVyc2lvbiA9IGhlYWRlck1hdGNoWzFdO1xyXG5cclxuICBsZXQgcGFyYW1zID0ge1xyXG4gICAgcmVkaXJlY3Q6IG51bGwsXHJcbiAgICBob21lcGFnZTogbnVsbCxcclxuICAgIHRpdGxlOiBudWxsLFxyXG4gICAgdmVyc2lvbjogbnVsbCxcclxuICAgIGV4cGlyZXM6IG51bGxcclxuICB9O1xyXG5cclxuICBmb3IgKGxldCB7aGFzT3duUHJvcGVydHl9ID0gT2JqZWN0LnByb3RvdHlwZSwgaSA9IDE7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICBsZXQgbWF0Y2ggPSAvXlxccyohXFxzKiguKj8pXFxzKjpcXHMqKC4qKS8uZXhlYyhsaW5lc1tpXSk7XHJcbiAgICBpZiAoIW1hdGNoKVxyXG4gICAgICBicmVhaztcclxuXHJcbiAgICBsZXQga2V5d29yZCA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChwYXJhbXMsIGtleXdvcmQpKVxyXG4gICAge1xyXG4gICAgICBwYXJhbXNba2V5d29yZF0gPSBtYXRjaFsyXTtcclxuICAgICAgbGluZXMuc3BsaWNlKGktLSwgMSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge2xpbmVzLCBwYXJhbXMsIG1pblZlcnNpb259O1xyXG59XHJcblxyXG5leHBvcnRzLnBhcnNlRmlsdGVycyA9IHBhcnNlRmlsdGVycztcclxuXHJcbi8qKlxyXG4gKiBHaXZlbiBhIGxpc3Qgb2YgcGFyc2VkIGZpbHRlcnMsIG5vcm1hbGl6ZSBlYWNoIGxpbmUgYW5kIHVwZGF0ZSB0aGVcclxuICogc3Vic2NyaXB0aW9uLlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAcGFyYW0ge21vZHVsZTpzdWJzY3JpcHRpb25DbGFzc2VzLlN1YnNjcmlwdGlvbn0gc3Vic2NyaXB0aW9uIFRoZVxyXG4gKiAgU3Vic2NyaXB0aW9uIHRvIHVzZSBhcyByZWZlcmVuY2UgZm9yIG1hbnVhbGx5IGFkZGVkIGZpbHRlcnMuXHJcbiAqIEBwYXJhbSB7c3RyaW5nW119IGxpbmVzIFRoZSBwYXJzZWQgZmlsdGVycyBsaW5lcy5cclxuICovXHJcbmZ1bmN0aW9uIHByb2Nlc3NGaWx0ZXJzKHN1YnNjcmlwdGlvbiwgbGluZXMpXHJcbntcclxuICBzdWJzY3JpcHRpb24ubWFyayhcInByb2Nlc3Npbmcuc3RhcnRlZFwiKTtcclxuXHJcbiAgbGluZXMuc2hpZnQoKTtcclxuICBsZXQgZmlsdGVyVGV4dCA9IFtdO1xyXG4gIGZvciAobGV0IGxpbmUgb2YgbGluZXMpXHJcbiAge1xyXG4gICAgbGluZSA9IEZpbHRlci5ub3JtYWxpemUobGluZSk7XHJcbiAgICBpZiAobGluZSlcclxuICAgICAgZmlsdGVyVGV4dC5wdXNoKGxpbmUpO1xyXG4gIH1cclxuXHJcbiAgZmlsdGVyU3RvcmFnZS51cGRhdGVTdWJzY3JpcHRpb25GaWx0ZXJzKHN1YnNjcmlwdGlvbiwgZmlsdGVyVGV4dCk7XHJcblxyXG4gIHN1YnNjcmlwdGlvbi5tYXJrKFwicHJvY2Vzc2luZy5maW5pc2hlZFwiKTtcclxufVxyXG4iLCIvKlxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBBZGJsb2NrIFBsdXMgPGh0dHBzOi8vYWRibG9ja3BsdXMub3JnLz4sXHJcbiAqIENvcHlyaWdodCAoQykgMjAwNi1wcmVzZW50IGV5ZW8gR21iSFxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBhc1xyXG4gKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICpcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCBBZGJsb2NrIFBsdXMuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqL1xyXG5cclxuLyoqIEBtb2R1bGUgKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuLyoqXHJcbiAqIE51bWJlciBvZiBtaWxsaXNlY29uZHMgaW4gYSBzZWNvbmQuXHJcbiAqIEBjb25zdCB7bnVtYmVyfVxyXG4gKiBAZGVmYXVsdCAxMDAwXHJcbiAqIEBwYWNrYWdlXHJcbiAqL1xyXG5leHBvcnRzLk1JTExJU19JTl9TRUNPTkQgPSAxMDAwO1xyXG5cclxuLyoqXHJcbiAqIE51bWJlciBvZiBtaWxsaXNlY29uZHMgaW4gYSBtaW51dGUuXHJcbiAqIEBjb25zdCB7bnVtYmVyfVxyXG4gKiBAZGVmYXVsdCA2MDAwMFxyXG4gKiBAcGFja2FnZVxyXG4gKi9cclxuZXhwb3J0cy5NSUxMSVNfSU5fTUlOVVRFID0gNjAwMDA7XHJcblxyXG4vKipcclxuICogTnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpbiBhbiBob3VyLlxyXG4gKiBAY29uc3Qge251bWJlcn1cclxuICogQGRlZmF1bHQgMzYwMDAwMFxyXG4gKiBAcGFja2FnZVxyXG4gKi9cclxuZXhwb3J0cy5NSUxMSVNfSU5fSE9VUiA9IDM2MDAwMDA7XHJcblxyXG4vKipcclxuICogTnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpbiBhIGRheS5cclxuICogQGNvbnN0IHtudW1iZXJ9XHJcbiAqIEBkZWZhdWx0IDg2NDAwMDAwXHJcbiAqIEBwYWNrYWdlXHJcbiAqL1xyXG5leHBvcnRzLk1JTExJU19JTl9EQVkgPSA4NjQwMDAwMDtcclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlICovXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmNvbnN0IHtDYWNoZX0gPSByZXF1aXJlKFwiLi9jYWNoaW5nXCIpO1xyXG5cclxuY29uc3QgcHVibGljU3VmZml4ZXMgPSByZXF1aXJlKFwiLi4vZGF0YS9wdWJsaWNTdWZmaXhMaXN0Lmpzb25cIik7XHJcblxyXG4vKipcclxuICogTWFwIG9mIHB1YmxpYyBzdWZmaXhlcyB0byB0aGVpciBvZmZzZXRzLlxyXG4gKiBAdHlwZSB7TWFwLjxzdHJpbmcsbnVtYmVyPn1cclxuICovXHJcbmxldCBwdWJsaWNTdWZmaXhNYXAgPSBidWlsZFB1YmxpY1N1ZmZpeE1hcCgpO1xyXG5cclxuLyoqXHJcbiAqIENhY2hlIG9mIGRvbWFpbiBtYXBzLlxyXG4gKlxyXG4gKiBUaGUgZG9tYWlucyBwYXJ0IG9mIGZpbHRlciB0ZXh0IChlLmcuIGBleGFtcGxlLmNvbSx+bWFpbC5leGFtcGxlLmNvbWApIGlzXHJcbiAqIG9mdGVuIHJlcGVhdGVkIGFjcm9zcyBmaWx0ZXJzLiBUaGlzIGNhY2hlIGVuYWJsZXMgZGVkdXBsaWNhdGlvbiBvZiB0aGVcclxuICogYE1hcGAgb2JqZWN0cyB0aGF0IHNwZWNpZnkgb24gd2hpY2ggZG9tYWlucyB0aGUgZmlsdGVyIGRvZXMgYW5kIGRvZXMgbm90XHJcbiAqIGFwcGx5LCB3aGljaCByZWR1Y2VzIG1lbW9yeSB1c2FnZSBhbmQgaW1wcm92ZXMgcGVyZm9ybWFuY2UuXHJcbiAqXHJcbiAqIEB0eXBlIHtNYXAuPHN0cmluZywgTWFwLjxzdHJpbmcsIGJvb2xlYW4+Pn1cclxuICovXHJcbmxldCBkb21haW5zQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XHJcblxyXG4vKipcclxuICogQnVpbGRzIGEgbWFwIG9mIHB1YmxpYyBzdWZmaXhlcyB0byB0aGVpciBvZmZzZXRzLlxyXG4gKiBAcmV0dXJucyB7TWFwLjxzdHJpbmcsbnVtYmVyPn1cclxuICovXHJcbmZ1bmN0aW9uIGJ1aWxkUHVibGljU3VmZml4TWFwKClcclxue1xyXG4gIGxldCBtYXAgPSBuZXcgTWFwKCk7XHJcblxyXG4gIGZvciAobGV0IGtleSBpbiBwdWJsaWNTdWZmaXhlcylcclxuICAgIG1hcC5zZXQoa2V5LCBwdWJsaWNTdWZmaXhlc1trZXldKTtcclxuXHJcbiAgcmV0dXJuIG1hcDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgYFVSTEluZm9gIG9iamVjdCByZXByZXNlbnRzIGluZm9ybWF0aW9uIGFib3V0IGEgVVJMLlxyXG4gKlxyXG4gKiBJdCBpcyByZXR1cm5lZCBieSBge0BsaW5rIG1vZHVsZTp1cmwucGFyc2VVUkwgcGFyc2VVUkwoKX1gLlxyXG4gKi9cclxuY2xhc3MgVVJMSW5mb1xyXG57XHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhIGBVUkxJbmZvYCBvYmplY3QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gaHJlZiBUaGUgZW50aXJlIFVSTC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvdG9jb2wgVGhlIHByb3RvY29sIHNjaGVtZSBvZiB0aGUgVVJMLCBpbmNsdWRpbmcgdGhlXHJcbiAgICogICBmaW5hbCBgOmAuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtob3N0bmFtZV0gVGhlIGhvc3RuYW1lIG9mIHRoZSBVUkwuXHJcbiAgICpcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKGhyZWYsIHByb3RvY29sLCBob3N0bmFtZSA9IFwiXCIpXHJcbiAge1xyXG4gICAgdGhpcy5faHJlZiA9IGhyZWY7XHJcbiAgICB0aGlzLl9wcm90b2NvbCA9IHByb3RvY29sO1xyXG4gICAgdGhpcy5faG9zdG5hbWUgPSBob3N0bmFtZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBlbnRpcmUgVVJMLlxyXG4gICAqIEB0eXBlIHtzdHJpbmd9XHJcbiAgICovXHJcbiAgZ2V0IGhyZWYoKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLl9ocmVmO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIHByb3RvY29sIHNjaGVtZSBvZiB0aGUgVVJMLCBpbmNsdWRpbmcgdGhlIGZpbmFsIGA6YC5cclxuICAgKiBAdHlwZSB7c3RyaW5nfVxyXG4gICAqL1xyXG4gIGdldCBwcm90b2NvbCgpXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Byb3RvY29sO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGhvc3RuYW1lIG9mIHRoZSBVUkwuXHJcbiAgICogQHR5cGUge3N0cmluZ31cclxuICAgKi9cclxuICBnZXQgaG9zdG5hbWUoKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLl9ob3N0bmFtZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgdGhlIGVudGlyZSBVUkwuXHJcbiAgICogQHJldHVybnMge3N0cmluZ30gVGhlIGVudGlyZSBVUkwuXHJcbiAgICovXHJcbiAgdG9TdHJpbmcoKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLl9ocmVmO1xyXG4gIH1cclxufVxyXG5cclxubGV0IHBhcnNlVVJMID1cclxuLyoqXHJcbiAqIFBhcnNlcyBhIFVSTCB0byBleHRyYWN0IHRoZSBwcm90b2NvbCBhbmQgdGhlIGhvc3RuYW1lLlxyXG4gKlxyXG4gKiBfX1RoaXMgaXMgYSBsaWdodHdlaWdodCBhbHRlcm5hdGl2ZSB0byB0aGUgbmF0aXZlIGBVUkxgIG9iamVjdCBpbnRlbmRlZCBmb3JcclxuICogdXNlIHByaW1hcmlseSB3aXRoaW4gQWRibG9jayBQbHVzLiBVbmxpa2UgdGhlIGBVUkxgIG9iamVjdCwgdGhlIGBwYXJzZVVSTCgpYFxyXG4gKiBmdW5jdGlvbiBpcyBub3Qgcm9idXN0IGFuZCB3aWxsIGdpdmUgaW5jb3JyZWN0IHJlc3VsdHMgZm9yIGludmFsaWQgVVJMcy4gVXNlXHJcbiAqIHRoaXMgZnVuY3Rpb24gd2l0aCB2YWxpZCxcclxuICogW25vcm1hbGl6ZWRdKGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jY29uY2VwdC1iYXNpYy11cmwtcGFyc2VyKSxcclxuICogcHJvcGVybHkgZW5jb2RlZCAoSUROQSwgZXRjLikgVVJMcyBvbmx5Ll9fXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTC5cclxuICpcclxuICogQHJldHVybnMge21vZHVsZTp1cmx+VVJMSW5mb30gSW5mb3JtYXRpb24gYWJvdXQgdGhlIFVSTC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0cy5wYXJzZVVSTCA9IGZ1bmN0aW9uIHBhcnNlVVJMKHVybClcclxue1xyXG4gIGxldCBtYXRjaCA9IC9eKFteOl0rOikoPzpcXC9cXC8oPzpbXi9dKkApPyhcXFtbXlxcXV0qXFxdfFteOi9dKykpPy8uZXhlYyh1cmwpO1xyXG4gIHJldHVybiBuZXcgVVJMSW5mbyh1cmwsIG1hdGNoWzFdLCBtYXRjaFsyXSk7XHJcbn07XHJcblxyXG5sZXQgZG9tYWluU3VmZml4ZXMgPVxyXG4vKipcclxuICogWWllbGRzIGFsbCBzdWZmaXhlcyBmb3IgYSBkb21haW4uXHJcbiAqXHJcbiAqIEZvciBleGFtcGxlLCBnaXZlbiB0aGUgZG9tYWluIGB3d3cuZXhhbXBsZS5jb21gLCB0aGlzIGZ1bmN0aW9uIHlpZWxkc1xyXG4gKiBgd3d3LmV4YW1wbGUuY29tYCwgYGV4YW1wbGUuY29tYCwgYW5kIGBjb21gLCBpbiB0aGF0IG9yZGVyLlxyXG4gKlxyXG4gKiBJZiB0aGUgZG9tYWluIGVuZHMgd2l0aCBhIGRvdCwgdGhlIGRvdCBpcyBpZ25vcmVkLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZG9tYWluIFRoZSBkb21haW4uXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2luY2x1ZGVCbGFua10gV2hldGhlciB0byBpbmNsdWRlIHRoZSBibGFuayBzdWZmaXggYXQgdGhlXHJcbiAqICAgZW5kLlxyXG4gKlxyXG4gKiBAZ2VuZXJhdG9yXHJcbiAqIEB5aWVsZHMge3N0cmluZ30gVGhlIG5leHQgc3VmZml4IGZvciB0aGUgZG9tYWluLlxyXG4gKlxyXG4gKiBAcGFja2FnZVxyXG4gKi9cclxuZXhwb3J0cy5kb21haW5TdWZmaXhlcyA9IGZ1bmN0aW9uKiBkb21haW5TdWZmaXhlcyhkb21haW4sIGluY2x1ZGVCbGFuayA9IGZhbHNlKVxyXG57XHJcbiAgLy8gU2luY2UgYW55IElQIGFkZHJlc3MgaXMgYWxyZWFkeSBleHBlY3RlZCB0byBiZSBub3JtYWxpemVkLCB0aGVyZSdzIG5vIG5lZWRcclxuICAvLyB0byB2YWxpZGF0ZSBpdC5cclxuICBpZiAoaXNJUEFkZHJlc3MoZG9tYWluKSlcclxuICB7XHJcbiAgICB5aWVsZCBkb21haW47XHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICBpZiAoZG9tYWluW2RvbWFpbi5sZW5ndGggLSAxXSA9PSBcIi5cIilcclxuICAgICAgZG9tYWluID0gZG9tYWluLnN1YnN0cmluZygwLCBkb21haW4ubGVuZ3RoIC0gMSk7XHJcblxyXG4gICAgd2hpbGUgKGRvbWFpbiAhPSBcIlwiKVxyXG4gICAge1xyXG4gICAgICB5aWVsZCBkb21haW47XHJcblxyXG4gICAgICBsZXQgZG90SW5kZXggPSBkb21haW4uaW5kZXhPZihcIi5cIik7XHJcbiAgICAgIGRvbWFpbiA9IGRvdEluZGV4ID09IC0xID8gXCJcIiA6IGRvbWFpbi5zdWJzdHIoZG90SW5kZXggKyAxKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmIChpbmNsdWRlQmxhbmspXHJcbiAgICB5aWVsZCBcIlwiO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENoZWNrcyB3aGV0aGVyIHRoZSBnaXZlbiBob3N0bmFtZSByZWZlcnMgdG9cclxuICoge0BsaW5rIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xvY2FsaG9zdCBsb2NhbGhvc3R9LlxyXG4gKlxyXG4gKiBJZiB0aGUgaG9zdG5hbWUgaXMgYGxvY2FsaG9zdGAsIGAxMjcuMC4wLjFgLCBvciBgWzo6MV1gLCB0aGUgZnVuY3Rpb25cclxuICogcmV0dXJucyBgdHJ1ZWA7IG90aGVyd2lzZSwgaXQgcmV0dXJucyBgZmFsc2VgLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gaG9zdG5hbWUgVGhlIGhvc3RuYW1lLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciB0aGUgaG9zdG5hbWUgcmVmZXJzIHRvIGxvY2FsaG9zdC5cclxuICpcclxuICogQHBhY2thZ2VcclxuICovXHJcbmV4cG9ydHMuaXNMb2NhbGhvc3QgPSBmdW5jdGlvbiBpc0xvY2FsaG9zdChob3N0bmFtZSlcclxue1xyXG4gIHJldHVybiBob3N0bmFtZSA9PSBcImxvY2FsaG9zdFwiIHx8IGhvc3RuYW1lID09IFwiMTI3LjAuMC4xXCIgfHxcclxuICAgICAgICAgaG9zdG5hbWUgPT0gXCJbOjoxXVwiO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENoZWNrcyB3aGV0aGVyIHRoZSBnaXZlbiBob3N0bmFtZSBpcyBhbiBJUCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBVbmxpa2UgYHtAbGluayBtb2R1bGU6dXJsfmlzVmFsaWRJUHY0QWRkcmVzcyBpc1ZhbGlkSVB2NEFkZHJlc3MoKX1gLCB0aGlzXHJcbiAqIGZ1bmN0aW9uIG9ubHkgY2hlY2tzIHdoZXRoZXIgdGhlIGhvc3RuYW1lIF9sb29rcyBsaWtlXyBhbiBJUCBhZGRyZXNzLiBVc2VcclxuICogdGhpcyBmdW5jdGlvbiB3aXRoIHZhbGlkLCBub3JtYWxpemVkLCBwcm9wZXJseSBlbmNvZGVkIChJRE5BKSBob3N0bmFtZXNcclxuICogb25seS5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IGhvc3RuYW1lIEFuIElETkEtZW5jb2RlZCBob3N0bmFtZS5cclxuICpcclxuICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGhvc3RuYW1lIGlzIGFuIElQIGFkZHJlc3MuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc0lQQWRkcmVzcyhob3N0bmFtZSlcclxue1xyXG4gIC8vIERvZXMgaXQgbG9vayBsaWtlIGFuIElQdjYgYWRkcmVzcz9cclxuICBpZiAoaG9zdG5hbWVbMF0gPT0gXCJbXCIgJiYgaG9zdG5hbWVbaG9zdG5hbWUubGVuZ3RoIC0gMV0gPT0gXCJdXCIpXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgLy8gTm90ZTogVGhlIGZpcnN0IGNvbmRpdGlvbiBoZWxwcyB1cyBhdm9pZCB0aGUgbW9yZSBleHBlbnNpdmUgcmVndWxhclxyXG4gIC8vIGV4cHJlc3Npb24gbWF0Y2ggZm9yIG1vc3QgaG9zdG5hbWVzLlxyXG4gIHJldHVybiBob3N0bmFtZVtob3N0bmFtZS5sZW5ndGggLSAxXSA+PSAwICYmXHJcbiAgICAgICAgIC9eXFxkK1xcLlxcZCtcXC5cXGQrXFwuXFxkKyQvLnRlc3QoaG9zdG5hbWUpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIHdoZXRoZXIgYSBnaXZlbiBhZGRyZXNzIGlzIGEgdmFsaWQgSVB2NCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBPbmx5IGEgbm9ybWFsaXplZCBJUHY0IGFkZHJlc3MgaXMgY29uc2lkZXJlZCB2YWxpZC4gZS5nLiBgMHg3Zi4weDAuMHgwLjB4MWBcclxuICogaXMgaW52YWxpZCwgd2hlcmVhcyBgMTI3LjAuMC4xYCBpcyB2YWxpZC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IGFkZHJlc3MgVGhlIGFkZHJlc3MgdG8gY2hlY2suXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHRoZSBhZGRyZXNzIGlzIGEgdmFsaWQgSVB2NCBhZGRyZXNzLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNWYWxpZElQdjRBZGRyZXNzKGFkZHJlc3MpXHJcbntcclxuICByZXR1cm4gL14oKCgyWzAtNF18MVswLTldfFsxLTldKT9bMC05XXwyNVswLTVdKVxcLil7NH0kLy50ZXN0KGFkZHJlc3MgKyBcIi5cIik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVja3Mgd2hldGhlciBhIGdpdmVuIGhvc3RuYW1lIGlzIHZhbGlkLlxyXG4gKlxyXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgZm9yIGZpbHRlciB2YWxpZGF0aW9uLlxyXG4gKlxyXG4gKiBBIGhvc3RuYW1lIG9jY3VycmluZyBpbiBhIGZpbHRlciBtdXN0IGJlIG5vcm1hbGl6ZWQuIEZvciBleGFtcGxlLFxyXG4gKiA8Y29kZT4mI3gxZjY0Mjs8L2NvZGU+IChzbGlnaHRseSBzbWlsaW5nIGZhY2UpIHNob3VsZCBiZSBub3JtYWxpemVkIHRvXHJcbiAqIGB4bi0tOTM4aGA7IG90aGVyd2lzZSB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYCBmb3Igc3VjaCBhIGhvc3RuYW1lLlxyXG4gKiBTaW1pbGFybHksIElQIGFkZHJlc3NlcyBzaG91bGQgYmUgbm9ybWFsaXplZC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IGhvc3RuYW1lIFRoZSBob3N0bmFtZSB0byBjaGVjay5cclxuICpcclxuICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGhvc3RuYW1lIGlzIHZhbGlkLlxyXG4gKi9cclxuZXhwb3J0cy5pc1ZhbGlkSG9zdG5hbWUgPSBmdW5jdGlvbiBpc1ZhbGlkSG9zdG5hbWUoaG9zdG5hbWUpXHJcbntcclxuICBpZiAoaXNWYWxpZElQdjRBZGRyZXNzKGhvc3RuYW1lKSlcclxuICAgIHJldHVybiB0cnVlO1xyXG5cclxuICAvLyBUaGlzIGRvZXMgbm90IGluIGZhY3QgdmFsaWRhdGUgdGhlIElQdjYgYWRkcmVzcyBidXQgaXQncyBhbHJpZ2h0IGZvciBub3cuXHJcbiAgaWYgKGhvc3RuYW1lWzBdID09IFwiW1wiICYmIGhvc3RuYW1lW2hvc3RuYW1lLmxlbmd0aCAtIDFdID09IFwiXVwiKVxyXG4gICAgcmV0dXJuIHRydWU7XHJcblxyXG4gIC8vIEJhc2VkIG9uXHJcbiAgLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSG9zdG5hbWUjUmVzdHJpY3Rpb25zX29uX3ZhbGlkX2hvc3RuYW1lc1xyXG4gIGlmIChob3N0bmFtZVtob3N0bmFtZS5sZW5ndGggLSAxXSA9PSBcIi5cIilcclxuICAgIGhvc3RuYW1lID0gaG9zdG5hbWUuc3Vic3RyaW5nKDAsIGhvc3RuYW1lLmxlbmd0aCAtIDEpO1xyXG5cclxuICBpZiAoaG9zdG5hbWUubGVuZ3RoID4gMjUzKVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICBsZXQgbGFiZWxzID0gaG9zdG5hbWUuc3BsaXQoXCIuXCIpO1xyXG5cclxuICBmb3IgKGxldCBsYWJlbCBvZiBsYWJlbHMpXHJcbiAge1xyXG4gICAgaWYgKCEvXlthLXowLTldKFthLXowLTktXXswLDYxfVthLXowLTldKT8kL2kudGVzdChsYWJlbCkpXHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8vIEJhc2VkIG9uIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzNjk2I3NlY3Rpb24tMlxyXG4gIGlmICghL1xcRC8udGVzdChsYWJlbHNbbGFiZWxzLmxlbmd0aCAtIDFdKSlcclxuICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG5sZXQgZ2V0QmFzZURvbWFpbiA9XHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBiYXNlIGRvbWFpbiBmb3IgdGhlIGdpdmVuIGhvc3RuYW1lLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gaG9zdG5hbWVcclxuICpcclxuICogQHJldHVybnMge3N0cmluZ31cclxuICpcclxuICogQHBhY2thZ2VcclxuICovXHJcbmV4cG9ydHMuZ2V0QmFzZURvbWFpbiA9IGZ1bmN0aW9uIGdldEJhc2VEb21haW4oaG9zdG5hbWUpXHJcbntcclxuICBsZXQgc2xpY2VzID0gW107XHJcbiAgbGV0IGN1dG9mZiA9IE5hTjtcclxuXHJcbiAgZm9yIChsZXQgc3VmZml4IG9mIGRvbWFpblN1ZmZpeGVzKGhvc3RuYW1lKSlcclxuICB7XHJcbiAgICBzbGljZXMucHVzaChzdWZmaXgpO1xyXG5cclxuICAgIGxldCBvZmZzZXQgPSBwdWJsaWNTdWZmaXhNYXAuZ2V0KHN1ZmZpeCk7XHJcblxyXG4gICAgaWYgKHR5cGVvZiBvZmZzZXQgIT0gXCJ1bmRlZmluZWRcIilcclxuICAgIHtcclxuICAgICAgY3V0b2ZmID0gc2xpY2VzLmxlbmd0aCAtIDEgLSBvZmZzZXQ7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKGlzTmFOKGN1dG9mZikpXHJcbiAgICByZXR1cm4gc2xpY2VzLmxlbmd0aCA+IDIgPyBzbGljZXNbc2xpY2VzLmxlbmd0aCAtIDJdIDogaG9zdG5hbWU7XHJcblxyXG4gIGlmIChjdXRvZmYgPD0gMClcclxuICAgIHJldHVybiBob3N0bmFtZTtcclxuXHJcbiAgcmV0dXJuIHNsaWNlc1tjdXRvZmZdO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENoZWNrcyB3aGV0aGVyIGEgcmVxdWVzdCdzIG9yaWdpbiBpcyBkaWZmZXJlbnQgZnJvbSBpdHMgZG9jdW1lbnQncyBvcmlnaW4uXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0SG9zdG5hbWUgVGhlIElETkEtZW5jb2RlZCBob3N0bmFtZSBvZiB0aGUgcmVxdWVzdC5cclxuICogQHBhcmFtIHtzdHJpbmd9IGRvY3VtZW50SG9zdG5hbWUgVGhlIElETkEtZW5jb2RlZCBob3N0bmFtZSBvZiB0aGUgZG9jdW1lbnQuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gKi9cclxuZnVuY3Rpb24gaXNUaGlyZFBhcnR5KHJlcXVlc3RIb3N0bmFtZSwgZG9jdW1lbnRIb3N0bmFtZSlcclxue1xyXG4gIGlmIChyZXF1ZXN0SG9zdG5hbWVbcmVxdWVzdEhvc3RuYW1lLmxlbmd0aCAtIDFdID09IFwiLlwiKVxyXG4gICAgcmVxdWVzdEhvc3RuYW1lID0gcmVxdWVzdEhvc3RuYW1lLnN1YnN0cmluZygwLCByZXF1ZXN0SG9zdG5hbWUubGVuZ3RoIC0gMSk7XHJcblxyXG4gIGlmIChkb2N1bWVudEhvc3RuYW1lW2RvY3VtZW50SG9zdG5hbWUubGVuZ3RoIC0gMV0gPT0gXCIuXCIpXHJcbiAge1xyXG4gICAgZG9jdW1lbnRIb3N0bmFtZSA9XHJcbiAgICAgIGRvY3VtZW50SG9zdG5hbWUuc3Vic3RyaW5nKDAsIGRvY3VtZW50SG9zdG5hbWUubGVuZ3RoIC0gMSk7XHJcbiAgfVxyXG5cclxuICBpZiAocmVxdWVzdEhvc3RuYW1lID09IGRvY3VtZW50SG9zdG5hbWUpXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gIGlmICghcmVxdWVzdEhvc3RuYW1lIHx8ICFkb2N1bWVudEhvc3RuYW1lKVxyXG4gICAgcmV0dXJuIHRydWU7XHJcblxyXG4gIGlmIChpc0lQQWRkcmVzcyhyZXF1ZXN0SG9zdG5hbWUpIHx8IGlzSVBBZGRyZXNzKGRvY3VtZW50SG9zdG5hbWUpKVxyXG4gICAgcmV0dXJuIHRydWU7XHJcblxyXG4gIHJldHVybiBnZXRCYXNlRG9tYWluKHJlcXVlc3RIb3N0bmFtZSkgIT0gZ2V0QmFzZURvbWFpbihkb2N1bWVudEhvc3RuYW1lKTtcclxufVxyXG5cclxubGV0IFVSTFJlcXVlc3QgPVxyXG4vKipcclxuICogVGhlIGBVUkxSZXF1ZXN0YCBjbGFzcyByZXByZXNlbnRzIGEgVVJMIHJlcXVlc3QuXHJcbiAqL1xyXG5leHBvcnRzLlVSTFJlcXVlc3QgPSBjbGFzcyBVUkxSZXF1ZXN0XHJcbntcclxuICAvKipcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIFVSTCBvZiB0aGUgcmVxdWVzdC5cclxuICAgKiBAdHlwZSB7c3RyaW5nfVxyXG4gICAqL1xyXG4gIGdldCBocmVmKClcclxuICB7XHJcbiAgICByZXR1cm4gdGhpcy5faHJlZjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBVUkwgb2YgdGhlIHJlcXVlc3QuXHJcbiAgICogQHR5cGUge21vZHVsZTp1cmx+VVJMSW5mb31cclxuICAgKiBAcGFja2FnZVxyXG4gICAqL1xyXG4gIGdldCB1cmxJbmZvKClcclxuICB7XHJcbiAgICBpZiAoIXRoaXMuX3VybEluZm8pXHJcbiAgICAgIHRoaXMuX3VybEluZm8gPSBwYXJzZVVSTCh0aGlzLl9ocmVmKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fdXJsSW5mbztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBob3N0bmFtZSBvZiB0aGUgZG9jdW1lbnQgbWFraW5nIHRoZSByZXF1ZXN0LlxyXG4gICAqIEB0eXBlIHs/c3RyaW5nfVxyXG4gICAqL1xyXG4gIGdldCBkb2N1bWVudEhvc3RuYW1lKClcclxuICB7XHJcbiAgICByZXR1cm4gdGhpcy5fZG9jdW1lbnRIb3N0bmFtZSA9PSBudWxsID8gbnVsbCA6IHRoaXMuX2RvY3VtZW50SG9zdG5hbWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBXaGV0aGVyIHRoaXMgaXMgYSB0aGlyZC1wYXJ0eSByZXF1ZXN0LlxyXG4gICAqIEB0eXBlIHtib29sZWFufVxyXG4gICAqL1xyXG4gIGdldCB0aGlyZFBhcnR5KClcclxuICB7XHJcbiAgICBpZiAodHlwZW9mIHRoaXMuX3RoaXJkUGFydHkgPT0gXCJ1bmRlZmluZWRcIilcclxuICAgIHtcclxuICAgICAgdGhpcy5fdGhpcmRQYXJ0eSA9IHRoaXMuX2RvY3VtZW50SG9zdG5hbWUgPT0gbnVsbCA/IGZhbHNlIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUaGlyZFBhcnR5KHRoaXMudXJsSW5mby5ob3N0bmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RvY3VtZW50SG9zdG5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLl90aGlyZFBhcnR5O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyB0aGUgVVJMIG9mIHRoZSByZXF1ZXN0LlxyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICovXHJcbiAgdG9TdHJpbmcoKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLl9ocmVmO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGxvd2VyLWNhc2UgdmVyc2lvbiBvZiB0aGUgVVJMIG9mIHRoZSByZXF1ZXN0LlxyXG4gICAqIEB0eXBlIHtzdHJpbmd9XHJcbiAgICogQHBhY2thZ2VcclxuICAgKi9cclxuICBnZXQgbG93ZXJDYXNlSHJlZigpXHJcbiAge1xyXG4gICAgaWYgKHRoaXMuX2xvd2VyQ2FzZUhyZWYgPT0gbnVsbClcclxuICAgICAgdGhpcy5fbG93ZXJDYXNlSHJlZiA9IHRoaXMuX2hyZWYudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fbG93ZXJDYXNlSHJlZjtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogUmV0dXJucyBhIGB7QGxpbmsgbW9kdWxlOnVybC5VUkxSZXF1ZXN0IFVSTFJlcXVlc3R9YCBvYmplY3QgZm9yIHRoZSBnaXZlblxyXG4gKiBVUkwuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfG1vZHVsZTp1cmx+VVJMSW5mb3xVUkx9IHVybCBUaGUgVVJMLiBJZiB0aGlzIGlzIGEgYHN0cmluZ2AsXHJcbiAqICAgaXQgbXVzdCBiZSBhIGNhbm9uaWNhbGl6ZWQgVVJMIChzZWVcclxuICogICBge0BsaW5rIG1vZHVsZTp1cmwucGFyc2VVUkwgcGFyc2VVUkwoKX1gKS5cclxuICogQHBhcmFtIHs/c3RyaW5nfSBbZG9jdW1lbnRIb3N0bmFtZV0gVGhlIElETkEtZW5jb2RlZCBob3N0bmFtZSBvZiB0aGVcclxuICogICBkb2N1bWVudCBtYWtpbmcgdGhlIHJlcXVlc3QuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHttb2R1bGU6dXJsLlVSTFJlcXVlc3R9XHJcbiAqL1xyXG5leHBvcnRzLlVSTFJlcXVlc3QuZnJvbSA9IGZ1bmN0aW9uKHVybCwgZG9jdW1lbnRIb3N0bmFtZSA9IG51bGwpXHJcbntcclxuICBsZXQgcmVxdWVzdCA9IG5ldyBVUkxSZXF1ZXN0KCk7XHJcblxyXG4gIGlmICh0eXBlb2YgdXJsID09IFwic3RyaW5nXCIpXHJcbiAge1xyXG4gICAgcmVxdWVzdC5faHJlZiA9IHVybDtcclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIHJlcXVlc3QuX3VybEluZm8gPSB1cmwgaW5zdGFuY2VvZiBVUkxJbmZvID8gdXJsIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBVUkxJbmZvKHVybC5ocmVmLCB1cmwucHJvdG9jb2wsIHVybC5ob3N0bmFtZSk7XHJcbiAgICByZXF1ZXN0Ll9ocmVmID0gdXJsLmhyZWY7XHJcbiAgfVxyXG5cclxuICBpZiAoZG9jdW1lbnRIb3N0bmFtZSAhPSBudWxsKVxyXG4gICAgcmVxdWVzdC5fZG9jdW1lbnRIb3N0bmFtZSA9IGRvY3VtZW50SG9zdG5hbWU7XHJcblxyXG4gIHJldHVybiByZXF1ZXN0O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFBhcnNlcyB0aGUgZG9tYWlucyBwYXJ0IG9mIGEgZmlsdGVyIHRleHRcclxuICogKGUuZy4gYGV4YW1wbGUuY29tLH5tYWlsLmV4YW1wbGUuY29tYCkgaW50byBhIGBNYXBgIG9iamVjdC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHNvdXJjZSBUaGUgZG9tYWlucyBwYXJ0IG9mIGEgZmlsdGVyIHRleHQuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZXBhcmF0b3IgVGhlIHN0cmluZyB1c2VkIHRvIHNlcGFyYXRlIHR3byBvciBtb3JlIGRvbWFpbnMgaW5cclxuICogICB0aGUgZG9tYWlucyBwYXJ0IG9mIGEgZmlsdGVyIHRleHQuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHs/TWFwLjxzdHJpbmcsIGJvb2xlYW4+fVxyXG4gKlxyXG4gKiBAcGFja2FnZVxyXG4gKi9cclxuZXhwb3J0cy5wYXJzZURvbWFpbnMgPSBmdW5jdGlvbiBwYXJzZURvbWFpbnMoc291cmNlLCBzZXBhcmF0b3IpXHJcbntcclxuICBsZXQgZG9tYWlucyA9IGRvbWFpbnNDYWNoZS5nZXQoc291cmNlKTtcclxuICBpZiAodHlwZW9mIGRvbWFpbnMgIT0gXCJ1bmRlZmluZWRcIilcclxuICAgIHJldHVybiBkb21haW5zO1xyXG5cclxuICBpZiAoc291cmNlWzBdICE9IFwiflwiICYmICFzb3VyY2UuaW5jbHVkZXMoc2VwYXJhdG9yKSlcclxuICB7XHJcbiAgICAvLyBGYXN0IHRyYWNrIGZvciB0aGUgY29tbW9uIG9uZS1kb21haW4gc2NlbmFyaW8uXHJcbiAgICBkb21haW5zID0gbmV3IE1hcChbW1wiXCIsIGZhbHNlXSwgW3NvdXJjZSwgdHJ1ZV1dKTtcclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIGRvbWFpbnMgPSBudWxsO1xyXG5cclxuICAgIGxldCBoYXNJbmNsdWRlcyA9IGZhbHNlO1xyXG4gICAgZm9yIChsZXQgZG9tYWluIG9mIHNvdXJjZS5zcGxpdChzZXBhcmF0b3IpKVxyXG4gICAge1xyXG4gICAgICBpZiAoZG9tYWluID09IFwiXCIpXHJcbiAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICBsZXQgaW5jbHVkZTtcclxuICAgICAgaWYgKGRvbWFpblswXSA9PSBcIn5cIilcclxuICAgICAge1xyXG4gICAgICAgIGluY2x1ZGUgPSBmYWxzZTtcclxuICAgICAgICBkb21haW4gPSBkb21haW4uc3Vic3RyaW5nKDEpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAge1xyXG4gICAgICAgIGluY2x1ZGUgPSB0cnVlO1xyXG4gICAgICAgIGhhc0luY2x1ZGVzID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFkb21haW5zKVxyXG4gICAgICAgIGRvbWFpbnMgPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgICBkb21haW5zLnNldChkb21haW4sIGluY2x1ZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChkb21haW5zKVxyXG4gICAgICBkb21haW5zLnNldChcIlwiLCAhaGFzSW5jbHVkZXMpO1xyXG4gIH1cclxuXHJcbiAgZG9tYWluc0NhY2hlLnNldChzb3VyY2UsIGRvbWFpbnMpO1xyXG5cclxuICByZXR1cm4gZG9tYWlucztcclxufTtcclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlICovXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmZ1bmN0aW9uIHBhcnNlVmVyc2lvbkNvbXBvbmVudChjb21wKVxyXG57XHJcbiAgaWYgKGNvbXAgPT0gXCIqXCIpXHJcbiAgICByZXR1cm4gSW5maW5pdHk7XHJcbiAgcmV0dXJuIHBhcnNlSW50KGNvbXAsIDEwKSB8fCAwO1xyXG59XHJcblxyXG4vKipcclxuICogQ29tcGFyZXMgdHdvIHZlcnNpb25zLlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdjEgVGhlIGZpcnN0IHZlcnNpb24uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB2MiBUaGUgc2Vjb25kIHZlcnNpb24uXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGAtMWAgaWYgYHYxYCBpcyBvbGRlciB0aGFuIGB2MmA7IGAxYCBpZiBgdjFgIGlzIG5ld2VyIHRoYW5cclxuICogICBgdjJgOyBvdGhlcndpc2UgYDBgLlxyXG4gKlxyXG4gKiBAcGFja2FnZVxyXG4gKi9cclxuZXhwb3J0cy5jb21wYXJlVmVyc2lvbnMgPSBmdW5jdGlvbiBjb21wYXJlVmVyc2lvbnModjEsIHYyKVxyXG57XHJcbiAgbGV0IHJlZ2V4cCA9IC9eKC4qPykoW2Etel0uKik/JC9pO1xyXG4gIGxldCBbLCBoZWFkMSwgdGFpbDFdID0gcmVnZXhwLmV4ZWModjEpO1xyXG4gIGxldCBbLCBoZWFkMiwgdGFpbDJdID0gcmVnZXhwLmV4ZWModjIpO1xyXG4gIGxldCBjb21wb25lbnRzMSA9IGhlYWQxLnNwbGl0KFwiLlwiKTtcclxuICBsZXQgY29tcG9uZW50czIgPSBoZWFkMi5zcGxpdChcIi5cIik7XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY29tcG9uZW50czEubGVuZ3RoIHx8XHJcbiAgICAgICAgICAgICAgICAgIGkgPCBjb21wb25lbnRzMi5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICBsZXQgcmVzdWx0ID0gcGFyc2VWZXJzaW9uQ29tcG9uZW50KGNvbXBvbmVudHMxW2ldKSAtXHJcbiAgICAgICAgICAgICAgICAgcGFyc2VWZXJzaW9uQ29tcG9uZW50KGNvbXBvbmVudHMyW2ldKSB8fCAwO1xyXG5cclxuICAgIGlmIChyZXN1bHQgPCAwKVxyXG4gICAgICByZXR1cm4gLTE7XHJcbiAgICBlbHNlIGlmIChyZXN1bHQgPiAwKVxyXG4gICAgICByZXR1cm4gMTtcclxuICB9XHJcblxyXG4gIC8vIENvbXBhcmUgdmVyc2lvbiBzdWZmaXggKGUuZy4gMC4xYWxwaGEgPCAwLjFiMSA8IDAxLmIyIDwgMC4xKS5cclxuICAvLyBIb3dldmVyLCBub3RlIHRoYXQgdGhpcyBpcyBhIHNpbXBsZSBzdHJpbmcgY29tcGFyaXNpb24sIG1lYW5pbmc6IGIxMCA8IGIyXHJcbiAgaWYgKHRhaWwxID09IHRhaWwyKVxyXG4gICAgcmV0dXJuIDA7XHJcbiAgaWYgKCF0YWlsMSB8fCB0YWlsMiAmJiB0YWlsMSA+IHRhaWwyKVxyXG4gICAgcmV0dXJuIDE7XHJcbiAgcmV0dXJuIC0xO1xyXG59O1xyXG4iLCIvKlxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBBZGJsb2NrIFBsdXMgPGh0dHBzOi8vYWRibG9ja3BsdXMub3JnLz4sXHJcbiAqIENvcHlyaWdodCAoQykgMjAwNi1wcmVzZW50IGV5ZW8gR21iSFxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBhc1xyXG4gKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICpcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCBBZGJsb2NrIFBsdXMuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqL1xyXG5cclxuZXhwb3J0IGxldCBhZGRvbk5hbWUgPSBcImFkYmxvY2twbHVzY2hyb21lXCI7XHJcbmV4cG9ydCBsZXQgYWRkb25WZXJzaW9uID0gXCIzLjExLjJcIjtcclxuZXhwb3J0IGxldCBhcHBsaWNhdGlvbiA9IG51bGw7XHJcbmV4cG9ydCBsZXQgYXBwbGljYXRpb25WZXJzaW9uO1xyXG5leHBvcnQgbGV0IHBsYXRmb3JtID0gXCJjaHJvbWl1bVwiO1xyXG5leHBvcnQgbGV0IHBsYXRmb3JtVmVyc2lvbiA9IG51bGw7XHJcblxyXG5sZXQgcmVnZXhwID0gLyhcXFMrKVxcLyhcXFMrKSg/OlxccypcXCguKj9cXCkpPy9nO1xyXG5sZXQgbWF0Y2g7XHJcblxyXG53aGlsZSAobWF0Y2ggPSByZWdleHAuZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KSlcclxue1xyXG4gIGxldCBhcHAgPSBtYXRjaFsxXTtcclxuICBsZXQgdmVyID0gbWF0Y2hbMl07XHJcblxyXG4gIGlmIChhcHAgPT0gXCJDaHJvbWVcIilcclxuICB7XHJcbiAgICBwbGF0Zm9ybVZlcnNpb24gPSB2ZXI7XHJcbiAgfVxyXG4gIGVsc2UgaWYgKGFwcCAhPSBcIk1vemlsbGFcIiAmJiBhcHAgIT0gXCJBcHBsZVdlYktpdFwiICYmIGFwcCAhPSBcIlNhZmFyaVwiKVxyXG4gIHtcclxuICAgIC8vIEZvciBjb21wYXRpYmlsaXR5IHdpdGggbGVnYWN5IHdlYnNpdGVzLCBDaHJvbWUncyBVQVxyXG4gICAgLy8gYWxzbyBpbmNsdWRlcyBhIE1vemlsbGEsIEFwcGxlV2ViS2l0IGFuZCBTYWZhcmkgdG9rZW4uXHJcbiAgICAvLyBBbnkgZnVydGhlciBuYW1lL3ZlcnNpb24gcGFpciBpbmRpY2F0ZXMgYSBmb3JrLlxyXG4gICAgYXBwbGljYXRpb24gPSBhcHAgPT0gXCJPUFJcIiA/IFwib3BlcmFcIiA6IGFwcC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgYXBwbGljYXRpb25WZXJzaW9uID0gdmVyO1xyXG4gIH1cclxufVxyXG5cclxuLy8gbm90IGEgQ2hyb21pdW0tYmFzZWQgVUEsIHByb2JhYmx5IG1vZGlmZWQgYnkgdGhlIHVzZXJcclxuaWYgKCFwbGF0Zm9ybVZlcnNpb24pXHJcbntcclxuICBhcHBsaWNhdGlvbiA9IFwidW5rbm93blwiO1xyXG4gIGFwcGxpY2F0aW9uVmVyc2lvbiA9IHBsYXRmb3JtVmVyc2lvbiA9IFwiMFwiO1xyXG59XHJcblxyXG4vLyBubyBhZGRpdGlvbmFsIG5hbWUvdmVyc2lvbiwgc28gdGhpcyBpcyB1cHN0cmVhbSBDaHJvbWVcclxuaWYgKCFhcHBsaWNhdGlvbilcclxue1xyXG4gIGFwcGxpY2F0aW9uID0gXCJjaHJvbWVcIjtcclxuICBhcHBsaWNhdGlvblZlcnNpb24gPSBwbGF0Zm9ybVZlcnNpb247XHJcbn1cclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlIGhpdExvZ2dlciAqL1xyXG5cclxuaW1wb3J0IHtleHRyYWN0SG9zdEZyb21GcmFtZX0gZnJvbSBcIi4vdXJsLmpzXCI7XHJcbmltcG9ydCB7RXZlbnRFbWl0dGVyfSBmcm9tIFwiLi4vYWRibG9ja3BsdXNjb3JlL2xpYi9ldmVudHMuanNcIjtcclxuaW1wb3J0IHtmaWx0ZXJTdG9yYWdlfSBmcm9tIFwiLi4vYWRibG9ja3BsdXNjb3JlL2xpYi9maWx0ZXJTdG9yYWdlLmpzXCI7XHJcbmltcG9ydCB7cG9ydH0gZnJvbSBcIi4vbWVzc2FnaW5nLmpzXCI7XHJcbmltcG9ydCB7RmlsdGVyLCBFbGVtSGlkZUZpbHRlcn0gZnJvbSBcIi4uL2FkYmxvY2twbHVzY29yZS9saWIvZmlsdGVyQ2xhc3Nlcy5qc1wiO1xyXG5pbXBvcnQge2NvbnRlbnRUeXBlc30gZnJvbSBcIi4uL2FkYmxvY2twbHVzY29yZS9saWIvY29udGVudFR5cGVzLmpzXCI7XHJcbmltcG9ydCB7Y2hlY2tBbGxvd2xpc3RlZH0gZnJvbSBcIi4vYWxsb3dsaXN0aW5nLmpzXCI7XHJcblxyXG5leHBvcnQgbGV0IG5vblJlcXVlc3RUeXBlcyA9IFtcclxuICBcIkRPQ1VNRU5UXCIsIFwiRUxFTUhJREVcIiwgXCJTTklQUEVUXCIsIFwiR0VORVJJQ0JMT0NLXCIsIFwiR0VORVJJQ0hJREVcIiwgXCJDU1BcIlxyXG5dO1xyXG5cclxubGV0IGV2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbi8qKlxyXG4gKiBAbmFtZXNwYWNlXHJcbiAqIEBzdGF0aWNcclxuICovXHJcbmV4cG9ydCBsZXQgSGl0TG9nZ2VyID0ge1xyXG4gIC8qKlxyXG4gICAqIEFkZHMgYSBsaXN0ZW5lciBmb3IgcmVxdWVzdHMsIGZpbHRlciBoaXRzIGV0YyByZWxhdGVkIHRvIHRoZSB0YWIuXHJcbiAgICpcclxuICAgKiBOb3RlOiBDYWxsaW5nIGNvZGUgaXMgcmVzcG9uc2libGUgZm9yIHJlbW92aW5nIHRoZSBsaXN0ZW5lciBhZ2FpbixcclxuICAgKiAgICAgICBpdCB3aWxsIG5vdCBiZSBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgd2hlbiB0aGUgdGFiIGlzIGNsb3NlZC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0YWJJZFxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGxpc3RlbmVyXHJcbiAgICovXHJcbiAgYWRkTGlzdGVuZXI6IGV2ZW50RW1pdHRlci5vbi5iaW5kKGV2ZW50RW1pdHRlciksXHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgYSBsaXN0ZW5lciBmb3IgdGhlIHRhYi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0YWJJZFxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGxpc3RlbmVyXHJcbiAgICovXHJcbiAgcmVtb3ZlTGlzdGVuZXI6IGV2ZW50RW1pdHRlci5vZmYuYmluZChldmVudEVtaXR0ZXIpLFxyXG5cclxuICAvKipcclxuICAgKiBDaGVja3Mgd2hldGhlciBhIHRhYiBpcyBiZWluZyBpbnNwZWN0ZWQgYnkgYW55dGhpbmcuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge251bWJlcn0gdGFiSWRcclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxyXG4gICAqL1xyXG4gIGhhc0xpc3RlbmVyOiBldmVudEVtaXR0ZXIuaGFzTGlzdGVuZXJzLmJpbmQoZXZlbnRFbWl0dGVyKVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIExvZ3MgYSByZXF1ZXN0IGFzc29jaWF0ZWQgd2l0aCBhIHRhYiBvciBtdWx0aXBsZSB0YWJzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcltdfSB0YWJJZHNcclxuICogICBUaGUgdGFiSWRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVxdWVzdFxyXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxdWVzdFxyXG4gKiAgIFRoZSByZXF1ZXN0IHRvIGxvZ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdC51cmxcclxuICogICBUaGUgVVJMIG9mIHRoZSByZXF1ZXN0XHJcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0LnR5cGVcclxuICogIFRoZSByZXF1ZXN0IHR5cGVcclxuICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QuZG9jRG9tYWluXHJcbiAqICBUaGUgaG9zdG5hbWUgb2YgdGhlIGRvY3VtZW50XHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVxdWVzdC50aGlyZFBhcnR5XHJcbiAqICAgV2hldGhlciB0aGUgb3JpZ2luIG9mIHRoZSByZXF1ZXN0IGFuZCBkb2N1bWVudCBkaWZmZXJzXHJcbiAqIEBwYXJhbSB7P3N0cmluZ30gcmVxdWVzdC5zaXRla2V5XHJcbiAqICAgVGhlIGFjdGl2ZSBzaXRla2V5IGlmIHRoZXJlIGlzIGFueVxyXG4gKiBAcGFyYW0gez9ib29sZWFufSByZXF1ZXN0LnNwZWNpZmljT25seVxyXG4gKiAgIFdoZXRoZXIgZ2VuZXJpYyBmaWx0ZXJzIHNob3VsZCBiZSBpZ25vcmVkXHJcbiAqIEBwYXJhbSB7P0Jsb2NraW5nRmlsdGVyfSBmaWx0ZXJcclxuICogIFRoZSBtYXRjaGVkIGZpbHRlciBvciBudWxsIGlmIHRoZXJlIGlzIG5vIG1hdGNoXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbG9nUmVxdWVzdCh0YWJJZHMsIHJlcXVlc3QsIGZpbHRlcilcclxue1xyXG4gIGZvciAobGV0IHRhYklkIG9mIHRhYklkcylcclxuICAgIGV2ZW50RW1pdHRlci5lbWl0KHRhYklkLCByZXF1ZXN0LCBmaWx0ZXIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2dIaWRkZW5FbGVtZW50cyhwYWdlLCBmcmFtZSwgc2VsZWN0b3JzLCBmaWx0ZXJzLCBkb2NEb21haW4pXHJcbntcclxuICBpZiAoSGl0TG9nZ2VyLmhhc0xpc3RlbmVyKHBhZ2UuaWQpKVxyXG4gIHtcclxuICAgIGZvciAobGV0IHN1YnNjcmlwdGlvbiBvZiBmaWx0ZXJTdG9yYWdlLnN1YnNjcmlwdGlvbnMoKSlcclxuICAgIHtcclxuICAgICAgaWYgKHN1YnNjcmlwdGlvbi5kaXNhYmxlZClcclxuICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgIGZvciAobGV0IHRleHQgb2Ygc3Vic2NyaXB0aW9uLmZpbHRlclRleHQoKSlcclxuICAgICAge1xyXG4gICAgICAgIGxldCBmaWx0ZXIgPSBGaWx0ZXIuZnJvbVRleHQodGV4dCk7XHJcblxyXG4gICAgICAgIC8vIFdlIG9ubHkga25vdyB0aGUgZXhhY3QgZmlsdGVyIGluIGNhc2Ugb2YgZWxlbWVudCBoaWRpbmcgZW11bGF0aW9uLlxyXG4gICAgICAgIC8vIEZvciByZWd1bGFyIGVsZW1lbnQgaGlkaW5nIGZpbHRlcnMsIHRoZSBjb250ZW50IHNjcmlwdCBvbmx5IGtub3dzXHJcbiAgICAgICAgLy8gdGhlIHNlbGVjdG9yLCBzbyB3ZSBoYXZlIHRvIGZpbmQgYSBmaWx0ZXIgdGhhdCBoYXMgYW4gaWRlbnRpY2FsXHJcbiAgICAgICAgLy8gc2VsZWN0b3IgYW5kIGlzIGFjdGl2ZSBvbiB0aGUgZG9tYWluIHRoZSBtYXRjaCB3YXMgcmVwb3J0ZWQgZnJvbS5cclxuICAgICAgICBsZXQgaXNBY3RpdmVFbGVtSGlkZUZpbHRlciA9IGZpbHRlciBpbnN0YW5jZW9mIEVsZW1IaWRlRmlsdGVyICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcnMuaW5jbHVkZXMoZmlsdGVyLnNlbGVjdG9yKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyLmlzQWN0aXZlT25Eb21haW4oZG9jRG9tYWluKTtcclxuXHJcbiAgICAgICAgaWYgKGlzQWN0aXZlRWxlbUhpZGVGaWx0ZXIgfHwgZmlsdGVycy5pbmNsdWRlcyh0ZXh0KSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAvLyBGb3IgZ2VuZXJpYyBmaWx0ZXJzIHdlIG5lZWQgdG8gYWRkaXRpb25hbGx5IGNoZWNrIHdoZXRoZXJcclxuICAgICAgICAgIC8vIHRoZXkgd2VyZSBub3QgYXBwbGllZCB0byB0aGUgcGFnZSBkdWUgdG8gYW4gZXhjZXB0aW9uIHJ1bGUuXHJcbiAgICAgICAgICBpZiAoZmlsdGVyLmlzR2VuZXJpYygpKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgc3BlY2lmaWNPbmx5ID0gY2hlY2tBbGxvd2xpc3RlZChcclxuICAgICAgICAgICAgICBwYWdlLCBmcmFtZSwgbnVsbCxcclxuICAgICAgICAgICAgICBjb250ZW50VHlwZXMuR0VORVJJQ0hJREVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaWYgKHNwZWNpZmljT25seSlcclxuICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBldmVudEVtaXR0ZXIuZW1pdChwYWdlLmlkLCB7dHlwZTogXCJFTEVNSElERVwiLCBkb2NEb21haW59LCBmaWx0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIExvZ3MgYW4gYWxsb3dpbmcgZmlsdGVyIHRoYXQgZGlzYWJsZXMgKHNvbWUga2luZCBvZilcclxuICogYmxvY2tpbmcgZm9yIGEgcGFydGljdWxhciBkb2N1bWVudC5cclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9ICAgICAgIHRhYklkICAgICBUaGUgdGFiSWQgdGhlIGFsbG93bGlzdGluZyBpcyBhY3RpdmUgZm9yXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSAgICAgICB1cmwgICAgICAgVGhlIHVybCBvZiB0aGUgYWxsb3dsaXN0ZWQgZG9jdW1lbnRcclxuICogQHBhcmFtIHtudW1iZXJ9ICAgICAgIHR5cGVNYXNrICBUaGUgYml0IG1hc2sgb2YgYWxsb3dpbmcgdHlwZXMgY2hlY2tlZFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvclxyXG4gKiBAcGFyYW0ge3N0cmluZ30gICAgICAgZG9jRG9tYWluIFRoZSBob3N0bmFtZSBvZiB0aGUgcGFyZW50IGRvY3VtZW50XHJcbiAqIEBwYXJhbSB7QWxsb3dpbmdGaWx0ZXJ9IGZpbHRlciAgVGhlIG1hdGNoZWQgYWxsb3dpbmcgZmlsdGVyXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbG9nQWxsb3dsaXN0ZWREb2N1bWVudCh0YWJJZCwgdXJsLCB0eXBlTWFzaywgZG9jRG9tYWluLCBmaWx0ZXIpXHJcbntcclxuICBpZiAoSGl0TG9nZ2VyLmhhc0xpc3RlbmVyKHRhYklkKSlcclxuICB7XHJcbiAgICBmb3IgKGxldCB0eXBlIG9mIG5vblJlcXVlc3RUeXBlcylcclxuICAgIHtcclxuICAgICAgaWYgKHR5cGVNYXNrICYgZmlsdGVyLmNvbnRlbnRUeXBlICYgY29udGVudFR5cGVzW3R5cGVdKVxyXG4gICAgICAgIGV2ZW50RW1pdHRlci5lbWl0KHRhYklkLCB7dXJsLCB0eXBlLCBkb2NEb21haW59LCBmaWx0ZXIpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIExvZ3MgYWN0aXZlIGVsZW1lbnQgaGlkaW5nIGZpbHRlcnMgZm9yIGEgdGFiLlxyXG4gKlxyXG4gKiBAZXZlbnQgXCJoaXRMb2dnZXIudHJhY2VFbGVtSGlkZVwiXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IHNlbGVjdG9ycyAgVGhlIHNlbGVjdG9ycyBvZiBhcHBsaWVkIEVsZW1IaWRlRmlsdGVyc1xyXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBmaWx0ZXJzICAgIFRoZSB0ZXh0IG9mIGFwcGxpZWQgRWxlbUhpZGVFbXVsYXRpb25GaWx0ZXJzXHJcbiAqL1xyXG5wb3J0Lm9uKFwiaGl0TG9nZ2VyLnRyYWNlRWxlbUhpZGVcIiwgKG1lc3NhZ2UsIHNlbmRlcikgPT5cclxue1xyXG4gIGxvZ0hpZGRlbkVsZW1lbnRzKFxyXG4gICAgc2VuZGVyLnBhZ2UsIHNlbmRlci5mcmFtZSwgbWVzc2FnZS5zZWxlY3RvcnMsIG1lc3NhZ2UuZmlsdGVycyxcclxuICAgIGV4dHJhY3RIb3N0RnJvbUZyYW1lKHNlbmRlci5mcmFtZSlcclxuICApO1xyXG59KTtcclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlIGFsbG93bGlzdGluZyAqL1xyXG5cclxuaW1wb3J0IHtkZWZhdWx0TWF0Y2hlcn0gZnJvbSBcIi4uL2FkYmxvY2twbHVzY29yZS9saWIvbWF0Y2hlci5qc1wiO1xyXG5pbXBvcnQge0ZpbHRlcn0gZnJvbSBcIi4uL2FkYmxvY2twbHVzY29yZS9saWIvZmlsdGVyQ2xhc3Nlcy5qc1wiO1xyXG5pbXBvcnQge2NvbnRlbnRUeXBlc30gZnJvbSBcIi4uL2FkYmxvY2twbHVzY29yZS9saWIvY29udGVudFR5cGVzLmpzXCI7XHJcbmltcG9ydCB7ZmlsdGVyTm90aWZpZXJ9IGZyb20gXCIuLi9hZGJsb2NrcGx1c2NvcmUvbGliL2ZpbHRlck5vdGlmaWVyLmpzXCI7XHJcbmltcG9ydCB7ZmlsdGVyU3RhdGV9IGZyb20gXCIuLi9hZGJsb2NrcGx1c2NvcmUvbGliL2ZpbHRlclN0YXRlLmpzXCI7XHJcbmltcG9ydCB7ZmlsdGVyU3RvcmFnZX0gZnJvbSBcIi4uL2FkYmxvY2twbHVzY29yZS9saWIvZmlsdGVyU3RvcmFnZS5qc1wiO1xyXG5pbXBvcnQge2V4dHJhY3RIb3N0RnJvbUZyYW1lfSBmcm9tIFwiLi91cmwuanNcIjtcclxuaW1wb3J0IHtwb3J0fSBmcm9tIFwiLi9tZXNzYWdpbmcuanNcIjtcclxuaW1wb3J0IHtsb2dBbGxvd2xpc3RlZERvY3VtZW50fSBmcm9tIFwiLi9oaXRMb2dnZXIuanNcIjtcclxuaW1wb3J0IHt2ZXJpZnlTaWduYXR1cmV9IGZyb20gXCIuLi9hZGJsb2NrcGx1c2NvcmUvbGliL3JzYS5qc1wiO1xyXG5cclxubGV0IHNpdGVrZXlzID0gbmV3IGV4dC5QYWdlTWFwKCk7XHJcbmV4cG9ydCBsZXQgYWxsb3dsaXN0ZWREb21haW5SZWdleHAgPSAvXkBAXFx8XFx8KFteLzpdKylcXF5cXCRkb2N1bWVudCQvO1xyXG5cclxuZnVuY3Rpb24gbWF0Y2gocGFnZSwgdXJsLCB0eXBlTWFzaywgZG9jRG9tYWluLCBzaXRla2V5KVxyXG57XHJcbiAgbGV0IGZpbHRlciA9IGRlZmF1bHRNYXRjaGVyLm1hdGNoKHVybCwgdHlwZU1hc2ssIGRvY0RvbWFpbiwgc2l0ZWtleSk7XHJcblxyXG4gIGlmIChmaWx0ZXIgJiYgcGFnZSlcclxuICAgIGxvZ0FsbG93bGlzdGVkRG9jdW1lbnQocGFnZS5pZCwgdXJsLmhyZWYsIHR5cGVNYXNrLCBkb2NEb21haW4sIGZpbHRlcik7XHJcblxyXG4gIHJldHVybiBmaWx0ZXI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uKiBmcmFtZURldGFpbHMocGFnZSwgZnJhbWUsIG9yaWdpblVybCwgdHlwZU1hc2spXHJcbntcclxuICBpZiAoZnJhbWUgfHwgb3JpZ2luVXJsKVxyXG4gIHtcclxuICAgIHdoaWxlIChmcmFtZSlcclxuICAgIHtcclxuICAgICAgbGV0IHBhcmVudEZyYW1lID0gZnJhbWUucGFyZW50O1xyXG5cclxuICAgICAgeWllbGQgW2ZyYW1lLnVybCwgdHlwZU1hc2ssXHJcbiAgICAgICAgICAgICBleHRyYWN0SG9zdEZyb21GcmFtZShwYXJlbnRGcmFtZSwgb3JpZ2luVXJsKSB8fCBmcmFtZS51cmwuaG9zdG5hbWUsXHJcbiAgICAgICAgICAgICBnZXRLZXkocGFnZSwgZnJhbWUsIG9yaWdpblVybCldO1xyXG5cclxuICAgICAgZnJhbWUgPSBwYXJlbnRGcmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAob3JpZ2luVXJsKVxyXG4gICAge1xyXG4gICAgICB5aWVsZCBbb3JpZ2luVXJsLCB0eXBlTWFzaywgb3JpZ2luVXJsLmhvc3RuYW1lLFxyXG4gICAgICAgICAgICAgZ2V0S2V5KG51bGwsIG51bGwsIG9yaWdpblVybCldO1xyXG4gICAgfVxyXG4gIH1cclxuICBlbHNlIGlmIChwYWdlKVxyXG4gIHtcclxuICAgIHlpZWxkIFtwYWdlLnVybCwgdHlwZU1hc2ssIHBhZ2UudXJsLmhvc3RuYW1lLCBudWxsXTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBhY3RpdmUgYWxsb3dpbmcgZmlsdGVyIGZvciB0aGUgZG9jdW1lbnQgYXNzb2NpYXRlZFxyXG4gKiB3aXRoIHRoZSBnaXZlbiBwYWdlL2ZyYW1lLCBvciBudWxsIGlmIGl0J3Mgbm90IGFsbG93bGlzdGVkLlxyXG4gKlxyXG4gKiBAcGFyYW0gez9QYWdlfSAgIHBhZ2VcclxuICogQHBhcmFtIHs/RnJhbWV9IFtmcmFtZV1cclxuICogQHBhcmFtIHs/VVJMfSAgIFtvcmlnaW5VcmxdXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbdHlwZU1hc2s9Y29udGVudFR5cGVzLkRPQ1VNRU5UXVxyXG4gKiBAcmV0dXJuIHs/QWxsb3dpbmdGaWx0ZXJ9XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tBbGxvd2xpc3RlZChwYWdlLCBmcmFtZSwgb3JpZ2luVXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlTWFzayA9IGNvbnRlbnRUeXBlcy5ET0NVTUVOVClcclxue1xyXG4gIGZvciAobGV0IGRldGFpbHMgb2YgZnJhbWVEZXRhaWxzKHBhZ2UsIGZyYW1lLCBvcmlnaW5VcmwsIHR5cGVNYXNrKSlcclxuICB7XHJcbiAgICBsZXQgZmlsdGVyID0gbWF0Y2gocGFnZSwgLi4uZGV0YWlscyk7XHJcbiAgICBpZiAoZmlsdGVyKVxyXG4gICAgICByZXR1cm4gZmlsdGVyO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgYWxsIGFsbG93aW5nIGZpbHRlcnMgdGhhdCBhcHBseSB0aGUgZG9jdW1lbnQgYXNzb2NpYXRlZFxyXG4gKiB3aXRoIHRoZSBnaXZlbiBwYWdlL2ZyYW1lLlxyXG4gKlxyXG4gKiBAcGFyYW0gez9QYWdlfSAgIHBhZ2VcclxuICogQHBhcmFtIHs/RnJhbWV9IFtmcmFtZV1cclxuICogQHBhcmFtIHs/VVJMfSAgIFtvcmlnaW5VcmxdXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbdHlwZU1hc2s9Y29udGVudFR5cGVzLkRPQ1VNRU5UXVxyXG4gKiBAcmV0dXJuIHtBcnJheS48QWxsb3dpbmdGaWx0ZXI+fVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RBbGxvd2xpc3RpbmdGaWx0ZXJzKHBhZ2UsIGZyYW1lLCBvcmlnaW5VcmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlTWFzayA9IGNvbnRlbnRUeXBlcy5ET0NVTUVOVClcclxue1xyXG4gIGxldCBmaWx0ZXJzID0gbmV3IFNldChbXSk7XHJcblxyXG4gIGZvciAobGV0IGRldGFpbHMgb2YgZnJhbWVEZXRhaWxzKHBhZ2UsIGZyYW1lLCBvcmlnaW5VcmwsIHR5cGVNYXNrKSlcclxuICB7XHJcbiAgICBsZXQge2FsbG93aW5nfSA9IGRlZmF1bHRNYXRjaGVyLnNlYXJjaCguLi5kZXRhaWxzLCBmYWxzZSwgXCJhbGxvd2luZ1wiKTtcclxuICAgIGZvciAobGV0IGZpbHRlciBvZiBhbGxvd2luZylcclxuICAgICAgZmlsdGVycy5hZGQoZmlsdGVyKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBBcnJheS5mcm9tKGZpbHRlcnMpO1xyXG59XHJcblxyXG4vKipcclxuICogQHR5cGVkZWYge29iamVjdH0gZmlsdGVyc0lzQWxsb3dsaXN0ZWRSZXN1bHRcclxuICogQHByb3BlcnR5IHtib29sZWFufSBob3N0bmFtZVxyXG4gKiAgIFRydWUgaWYgYW4gYWxsb3dpbmcgZmlsdGVyIGZvciBhbiBlbnRpcmUgZG9tYWluIG1hdGNoZXMgdGhlIGdpdmVuIHBhZ2UuXHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gcGFnZVxyXG4gKiAgIFRydWUgaWYgYW4gYWxsb3dpbmcgZmlsdGVyIF9ub3RfIGZvciBhbiBlbnRpcmUgZG9tYWluIG1hdGNoZXMgdGhlIGdpdmVuXHJcbiAqICAgcGFnZS5cclxuICovXHJcblxyXG4vKipcclxuICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBwYWdlIGlzIGFsbG93bGlzdGVkLlxyXG4gKlxyXG4gKiBAZXZlbnQgXCJmaWx0ZXJzLmlzV2hpdGVsaXN0ZWRcIlxyXG4gKiBAcmV0dXJucyB7ZmlsdGVyc0lzQWxsb3dsaXN0ZWRSZXN1bHR9XHJcbiAqL1xyXG5wb3J0Lm9uKFwiZmlsdGVycy5pc1doaXRlbGlzdGVkXCIsIG1lc3NhZ2UgPT5cclxue1xyXG4gIGxldCBwYWdlQWxsb3dsaXN0ZWQgPSBmYWxzZTtcclxuICBsZXQgaG9zdG5hbWVBbGxvd2xpc3RlZCA9IGZhbHNlO1xyXG5cclxuICBmb3IgKGxldCBmaWx0ZXIgb2YgbGlzdEFsbG93bGlzdGluZ0ZpbHRlcnMobmV3IGV4dC5QYWdlKG1lc3NhZ2UudGFiKSkpXHJcbiAge1xyXG4gICAgaWYgKGFsbG93bGlzdGVkRG9tYWluUmVnZXhwLnRlc3QoZmlsdGVyLnRleHQpKVxyXG4gICAgICBob3N0bmFtZUFsbG93bGlzdGVkID0gdHJ1ZTtcclxuICAgIGVsc2VcclxuICAgICAgcGFnZUFsbG93bGlzdGVkID0gdHJ1ZTtcclxuXHJcbiAgICBpZiAocGFnZUFsbG93bGlzdGVkICYmIGhvc3RuYW1lQWxsb3dsaXN0ZWQpXHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtob3N0bmFtZTogaG9zdG5hbWVBbGxvd2xpc3RlZCwgcGFnZTogcGFnZUFsbG93bGlzdGVkfTtcclxufSk7XHJcblxyXG4vKipcclxuICogQWRkcyBhbiBhbGxvd2luZyBmaWx0ZXIgZm9yIHRoZSBnaXZlbiBwYWdlJ3MgaG9zdG5hbWUsIGlmIGl0IGlzIG5vdFxyXG4gKiBhbHJlYWR5IGFsbG93bGlzdGVkLiBOb3RlOiBJZiBhIGRpc2FibGVkIGFsbG93aW5nIGZpbHRlciBleGlzdHMsIHdlXHJcbiAqIGVuYWJsZSB0aGF0IGluc3RlYWQuXHJcbiAqXHJcbiAqIEBldmVudCBcImZpbHRlcnMud2hpdGVsaXN0XCJcclxuICogQHByb3BlcnR5IHtib29sZWFufSBbc2luZ2xlUGFnZT1mYWxzZV1cclxuICogICBJZiB0cnVlIHdlIGFkZCBhbiBhbGxvd2luZyBmaWx0ZXIgZm9yIHRoZSBnaXZlbiBwYWdlJ3MgVVJMIGluc3RlYWQuXHJcbiAqL1xyXG5wb3J0Lm9uKFwiZmlsdGVycy53aGl0ZWxpc3RcIiwgbWVzc2FnZSA9PlxyXG57XHJcbiAgbGV0IHBhZ2UgPSBuZXcgZXh0LlBhZ2UobWVzc2FnZS50YWIpO1xyXG4gIGxldCBmaWx0ZXI7XHJcbiAgaWYgKCFtZXNzYWdlLnNpbmdsZVBhZ2UpXHJcbiAge1xyXG4gICAgbGV0IGhvc3QgPSBwYWdlLnVybC5ob3N0bmFtZS5yZXBsYWNlKC9ed3d3XFwuLywgXCJcIik7XHJcbiAgICBmaWx0ZXIgPSBGaWx0ZXIuZnJvbVRleHQoXCJAQHx8XCIgKyBob3N0ICsgXCJeJGRvY3VtZW50XCIpO1xyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgLy8gV2UgZ2VuZXJhdGUgYSBmaWx0ZXIgd2hpY2ggb25seSBhcHBsaWVzIHRvIHRoZSBzYW1lIHByb3RvY29sIChlLmcuIGh0dHApXHJcbiAgICAvLyBhbmQgc3ViZG9tYWluLCBidXQgb25lIHdoaWNoIGRvZXNuJ3QgY29uc2lkZXIgdGhlIGV4YWN0IHF1ZXJ5IHN0cmluZyBvclxyXG4gICAgLy8gZnJhZ21lbnQuXHJcbiAgICAvLyBPdXIgbG9naWMgaGVyZSBpcyB0YWtlbiBmcm9tIHRoZSBsZWdhY3kgRmlyZWZveCBleHRlbnNpb24uXHJcbiAgICAvLyBTZWUgaHR0cHM6Ly9oZy5hZGJsb2NrcGx1cy5vcmcvYWRibG9ja3BsdXMvZmlsZS90aXAvbGliL3VpLmpzI2wxNTE3XHJcbiAgICBsZXQgZW5kaW5nID0gXCJ8XCI7XHJcbiAgICBwYWdlLnVybC5oYXNoID0gXCJcIjtcclxuICAgIGlmIChwYWdlLnVybC5zZWFyY2ggJiYgcGFnZS51cmwuc2VhcmNoLmluY2x1ZGVzKFwiJlwiKSlcclxuICAgIHtcclxuICAgICAgcGFnZS51cmwuc2VhcmNoID0gXCJcIjtcclxuICAgICAgZW5kaW5nID0gXCI/XCI7XHJcbiAgICB9XHJcbiAgICBmaWx0ZXIgPSBGaWx0ZXIuZnJvbVRleHQoXCJAQHxcIiArIHBhZ2UudXJsLmhyZWYgKyBlbmRpbmcgKyBcIiRkb2N1bWVudFwiKTtcclxuICB9XHJcblxyXG4gIGZpbHRlclN0YXRlLnNldEVuYWJsZWQoZmlsdGVyLnRleHQsIHRydWUpO1xyXG4gIGlmIChmaWx0ZXJTdG9yYWdlLmdldFN1YnNjcmlwdGlvbkNvdW50KGZpbHRlci50ZXh0KSA9PSAwKVxyXG4gICAgZmlsdGVyU3RvcmFnZS5hZGRGaWx0ZXIoZmlsdGVyKTtcclxufSk7XHJcblxyXG4vKipcclxuICogUmVtb3ZlIGFueSBhbGxvd2luZyBmaWx0ZXJzIHdoaWNoIGFwcGx5IHRvIHRoZSBnaXZlbiBwYWdlJ3MgVVJMLlxyXG4gKlxyXG4gKiBAZXZlbnQgXCJmaWx0ZXJzLnVud2hpdGVsaXN0XCJcclxuICogQHByb3BlcnR5IHtib29sZWFufSBbc2luZ2xlUGFnZT1mYWxzZV1cclxuICogICBJZiB0cnVlIHdlIG9ubHkgcmVtb3ZlIGFsbG93aW5nIGZpbHRlcnMgd2hpY2ggYXJlIG5vdCBmb3IgYW4gZW50aXJlXHJcbiAqICAgZG9tYWluLlxyXG4gKi9cclxucG9ydC5vbihcImZpbHRlcnMudW53aGl0ZWxpc3RcIiwgbWVzc2FnZSA9PlxyXG57XHJcbiAgbGV0IHBhZ2UgPSBuZXcgZXh0LlBhZ2UobWVzc2FnZS50YWIpO1xyXG4gIGZvciAobGV0IGZpbHRlciBvZiBsaXN0QWxsb3dsaXN0aW5nRmlsdGVycyhwYWdlKSlcclxuICB7XHJcbiAgICBpZiAobWVzc2FnZS5zaW5nbGVQYWdlICYmIGFsbG93bGlzdGVkRG9tYWluUmVnZXhwLnRlc3QoZmlsdGVyLnRleHQpKVxyXG4gICAgICBjb250aW51ZTtcclxuXHJcbiAgICBmaWx0ZXJTdG9yYWdlLnJlbW92ZUZpbHRlcihmaWx0ZXIpO1xyXG4gICAgaWYgKGZpbHRlclN0b3JhZ2UuZ2V0U3Vic2NyaXB0aW9uQ291bnQoZmlsdGVyLnRleHQpICE9IDApXHJcbiAgICAgIGZpbHRlclN0YXRlLnNldEVuYWJsZWQoZmlsdGVyLnRleHQsIGZhbHNlKTtcclxuICB9XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gcmV2YWxpZGF0ZUFsbG93bGlzdGluZ1N0YXRlKHBhZ2UpXHJcbntcclxuICBmaWx0ZXJOb3RpZmllci5lbWl0KFxyXG4gICAgXCJwYWdlLkFsbG93bGlzdGluZ1N0YXRlUmV2YWxpZGF0ZVwiLFxyXG4gICAgcGFnZSwgY2hlY2tBbGxvd2xpc3RlZChwYWdlKVxyXG4gICk7XHJcbn1cclxuXHJcbmZpbHRlck5vdGlmaWVyLm9uKFwiZmlsdGVyLmJlaGF2aW9yQ2hhbmdlZFwiLCBhc3luYygpID0+XHJcbntcclxuICBsZXQgdGFicyA9IGF3YWl0IGJyb3dzZXIudGFicy5xdWVyeSh7fSk7XHJcbiAgZm9yIChsZXQgdGFiIG9mIHRhYnMpXHJcbiAgICByZXZhbGlkYXRlQWxsb3dsaXN0aW5nU3RhdGUobmV3IGV4dC5QYWdlKHRhYikpO1xyXG59KTtcclxuXHJcbmV4dC5wYWdlcy5vbkxvYWRpbmcuYWRkTGlzdGVuZXIocmV2YWxpZGF0ZUFsbG93bGlzdGluZ1N0YXRlKTtcclxuXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBwdWJsaWMga2V5LCBwcmV2aW91c2x5IHJlY29yZGVkIGZvciB0aGUgZ2l2ZW4gcGFnZVxyXG4gKiBhbmQgZnJhbWUsIHRvIGJlIGNvbnNpZGVyZWQgZm9yIHRoZSAkc2l0ZWtleSBmaWx0ZXIgb3B0aW9uLlxyXG4gKlxyXG4gKiBAcGFyYW0gez9QYWdlfSAgIHBhZ2VcclxuICogQHBhcmFtIHs/RnJhbWV9ICBmcmFtZVxyXG4gKiBAcGFyYW0ge1VSTH0gICAgW29yaWdpblVybF1cclxuICogQHJldHVybiB7c3RyaW5nfVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEtleShwYWdlLCBmcmFtZSwgb3JpZ2luVXJsKVxyXG57XHJcbiAgaWYgKHBhZ2UpXHJcbiAge1xyXG4gICAgbGV0IGtleXMgPSBzaXRla2V5cy5nZXQocGFnZSk7XHJcbiAgICBpZiAoa2V5cylcclxuICAgIHtcclxuICAgICAgZm9yICg7IGZyYW1lOyBmcmFtZSA9IGZyYW1lLnBhcmVudClcclxuICAgICAge1xyXG4gICAgICAgIGxldCBrZXkgPSBrZXlzLmdldChmcmFtZS51cmwuaHJlZik7XHJcbiAgICAgICAgaWYgKGtleSlcclxuICAgICAgICAgIHJldHVybiBrZXk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmIChvcmlnaW5VcmwpXHJcbiAge1xyXG4gICAgZm9yIChsZXQga2V5cyBvZiBzaXRla2V5cy5fbWFwLnZhbHVlcygpKVxyXG4gICAge1xyXG4gICAgICBsZXQga2V5ID0ga2V5cy5nZXQob3JpZ2luVXJsLmhyZWYpO1xyXG4gICAgICBpZiAoa2V5KVxyXG4gICAgICAgIHJldHVybiBrZXk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tLZXkodG9rZW4sIHVybClcclxue1xyXG4gIGxldCBwYXJ0cyA9IHRva2VuLnNwbGl0KFwiX1wiKTtcclxuICBpZiAocGFydHMubGVuZ3RoIDwgMilcclxuICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgbGV0IGtleSA9IHBhcnRzWzBdLnJlcGxhY2UoLz0vZywgXCJcIik7XHJcbiAgbGV0IHNpZ25hdHVyZSA9IHBhcnRzWzFdO1xyXG4gIGxldCBkYXRhID0gdXJsLnBhdGhuYW1lICsgdXJsLnNlYXJjaCArIFwiXFwwXCIgK1xyXG4gICAgICAgICAgICAgdXJsLmhvc3QgKyBcIlxcMFwiICtcclxuICAgICAgICAgICAgIHNlbGYubmF2aWdhdG9yLnVzZXJBZ2VudDtcclxuICBpZiAoIXZlcmlmeVNpZ25hdHVyZShrZXksIHNpZ25hdHVyZSwgZGF0YSkpXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gIHJldHVybiBrZXk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlY29yZEtleShrZXksIHBhZ2UsIHVybClcclxue1xyXG4gIGxldCBrZXlzID0gc2l0ZWtleXMuZ2V0KHBhZ2UpO1xyXG4gIGlmICgha2V5cylcclxuICB7XHJcbiAgICBrZXlzID0gbmV3IE1hcCgpO1xyXG4gICAgc2l0ZWtleXMuc2V0KHBhZ2UsIGtleXMpO1xyXG4gIH1cclxuICBrZXlzLnNldCh1cmwuaHJlZiwga2V5KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlY29yZCB0aGUgZ2l2ZW4gc2l0ZWtleSBpZiBpdCBpcyB2YWxpZC5cclxuICpcclxuICogQGV2ZW50IFwiZmlsdGVycy5hZGRLZXlcIlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdG9rZW4gLSBUaGUgc2l0ZWtleSB0b2tlbiBmb3VuZCBpbiB0aGUgZG9jdW1lbnQgZWxlbWVudCdzXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtYWRibG9ja2tleSBhdHRyaWJ1dGUuXHJcbiAqL1xyXG5wb3J0Lm9uKFwiZmlsdGVycy5hZGRLZXlcIiwgKG1lc3NhZ2UsIHNlbmRlcikgPT5cclxue1xyXG4gIGxldCBrZXkgPSBjaGVja0tleShtZXNzYWdlLnRva2VuLCBzZW5kZXIuZnJhbWUudXJsKTtcclxuICBpZiAoa2V5KVxyXG4gICAgcmVjb3JkS2V5KGtleSwgc2VuZGVyLnBhZ2UsIHNlbmRlci5mcmFtZS51cmwpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIG9uSGVhZGVyc1JlY2VpdmVkKGRldGFpbHMpXHJcbntcclxuICBsZXQgcGFnZSA9IG5ldyBleHQuUGFnZSh7aWQ6IGRldGFpbHMudGFiSWR9KTtcclxuXHJcbiAgZm9yIChsZXQgaGVhZGVyIG9mIGRldGFpbHMucmVzcG9uc2VIZWFkZXJzKVxyXG4gIHtcclxuICAgIGlmIChoZWFkZXIubmFtZS50b0xvd2VyQ2FzZSgpID09IFwieC1hZGJsb2NrLWtleVwiICYmIGhlYWRlci52YWx1ZSlcclxuICAgIHtcclxuICAgICAgbGV0IHVybCA9IG5ldyBVUkwoZGV0YWlscy51cmwpO1xyXG4gICAgICBsZXQga2V5ID0gY2hlY2tLZXkoaGVhZGVyLnZhbHVlLCB1cmwpO1xyXG4gICAgICBpZiAoa2V5KVxyXG4gICAgICB7XHJcbiAgICAgICAgcmVjb3JkS2V5KGtleSwgcGFnZSwgdXJsKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuaWYgKHR5cGVvZiBicm93c2VyID09IFwib2JqZWN0XCIpXHJcbntcclxuICBicm93c2VyLndlYlJlcXVlc3Qub25IZWFkZXJzUmVjZWl2ZWQuYWRkTGlzdGVuZXIoXHJcbiAgICBvbkhlYWRlcnNSZWNlaXZlZCxcclxuICAgIHtcclxuICAgICAgdXJsczogW1wiaHR0cDovLyovKlwiLCBcImh0dHBzOi8vKi8qXCJdLFxyXG4gICAgICB0eXBlczogW1wibWFpbl9mcmFtZVwiLCBcInN1Yl9mcmFtZVwiXVxyXG4gICAgfSxcclxuICAgIFtcInJlc3BvbnNlSGVhZGVyc1wiXVxyXG4gICk7XHJcbn1cclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlIGJyb3dzZXJBY3Rpb24gKi9cclxuXHJcbmxldCBjaGFuZ2VzQnlUYWJJZCA9IG5ldyBNYXAoKTtcclxubGV0IGJhZGdlU3RhdGVCeVBhZ2UgPSBuZXcgZXh0LlBhZ2VNYXAoKTtcclxuXHJcbmZ1bmN0aW9uIHNldEJhZGdlU3RhdGUodGFiSWQsIGtleSwgdmFsdWUpXHJcbntcclxuICBsZXQgcGFnZSA9IG5ldyBleHQuUGFnZSh0YWJJZCk7XHJcbiAgbGV0IGJhZGdlU3RhdGUgPSBiYWRnZVN0YXRlQnlQYWdlLmdldChwYWdlKTtcclxuXHJcbiAgaWYgKCFiYWRnZVN0YXRlKVxyXG4gIHtcclxuICAgIGJhZGdlU3RhdGUgPSB7XHJcbiAgICAgIGhpZGRlblN0YXRlOiBcInZpc2libGVcIixcclxuICAgICAgdGV4dDogXCJcIlxyXG4gICAgfTtcclxuICAgIGJhZGdlU3RhdGVCeVBhZ2Uuc2V0KHBhZ2UsIGJhZGdlU3RhdGUpO1xyXG4gIH1cclxuXHJcbiAgLy8gV2UgbmVlZCB0byBpZ25vcmUgYW55IHRleHQgY2hhbmdlcyB3aGlsZSB3ZSdyZSBoaWRpbmcgdGhlIGJhZGdlXHJcbiAgaWYgKCEoYmFkZ2VTdGF0ZS5oaWRkZW5TdGF0ZSA9PSBcImhpZGluZ1wiICYmIGtleSA9PSBcInRleHRcIikpXHJcbiAgICBiYWRnZVN0YXRlW2tleV0gPSB2YWx1ZTtcclxuXHJcbiAgcmV0dXJuIGJhZGdlU3RhdGU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFwcGx5Q2hhbmdlcyh0YWJJZCwgY2hhbmdlcylcclxue1xyXG4gIHJldHVybiBQcm9taXNlLmFsbChPYmplY3Qua2V5cyhjaGFuZ2VzKS5tYXAoY2hhbmdlID0+XHJcbiAge1xyXG4gICAgLy8gRmlyZWZveCBmb3IgQW5kcm9pZCBkaXNwbGF5cyB0aGUgYnJvd3NlciBhY3Rpb24gbm90IGFzIGFuIGljb24gYnV0XHJcbiAgICAvLyBhcyBhIG1lbnUgaXRlbS4gVGhlcmUgaXMgbm8gaWNvbiwgYnV0IHN1Y2ggYW4gb3B0aW9uIG1heSBiZSBhZGRlZFxyXG4gICAgLy8gaW4gdGhlIGZ1dHVyZS5cclxuICAgIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTEzMzE3NDZcclxuICAgIGlmIChjaGFuZ2UgPT0gXCJpY29uUGF0aFwiICYmIFwic2V0SWNvblwiIGluIGJyb3dzZXIuYnJvd3NlckFjdGlvbilcclxuICAgIHtcclxuICAgICAgcmV0dXJuIGJyb3dzZXIuYnJvd3NlckFjdGlvbi5zZXRJY29uKHtcclxuICAgICAgICB0YWJJZCxcclxuICAgICAgICBwYXRoOiB7XHJcbiAgICAgICAgICAxNjogY2hhbmdlcy5pY29uUGF0aC5yZXBsYWNlKFwiJHNpemVcIiwgXCIxNlwiKSxcclxuICAgICAgICAgIDIwOiBjaGFuZ2VzLmljb25QYXRoLnJlcGxhY2UoXCIkc2l6ZVwiLCBcIjIwXCIpLFxyXG4gICAgICAgICAgMzI6IGNoYW5nZXMuaWNvblBhdGgucmVwbGFjZShcIiRzaXplXCIsIFwiMzJcIiksXHJcbiAgICAgICAgICA0MDogY2hhbmdlcy5pY29uUGF0aC5yZXBsYWNlKFwiJHNpemVcIiwgXCI0MFwiKVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNoYW5nZSA9PSBcImljb25JbWFnZURhdGFcIiAmJiBcInNldEljb25cIiBpbiBicm93c2VyLmJyb3dzZXJBY3Rpb24pXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBicm93c2VyLmJyb3dzZXJBY3Rpb24uc2V0SWNvbih7XHJcbiAgICAgICAgdGFiSWQsXHJcbiAgICAgICAgaW1hZ2VEYXRhOiBjaGFuZ2VzLmljb25JbWFnZURhdGFcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVGhlcmUgaXMgbm8gYmFkZ2Ugb24gRmlyZWZveCBmb3IgQW5kcm9pZDsgdGhlIGJyb3dzZXIgYWN0aW9uIGlzXHJcbiAgICAvLyBzaW1wbHkgYSBtZW51IGl0ZW0uXHJcbiAgICBpZiAoY2hhbmdlID09IFwiYmFkZ2VUZXh0XCIgJiYgXCJzZXRCYWRnZVRleHRcIiBpbiBicm93c2VyLmJyb3dzZXJBY3Rpb24pXHJcbiAgICB7XHJcbiAgICAgIC8vIFJlbWVtYmVyIGNoYW5nZXMgdG8gdGhlIGJhZGdlIHRleHQgYnV0IGRvbid0IGFwcGx5IHRoZW0geWV0XHJcbiAgICAgIC8vIGFzIGxvbmcgYXMgdGhlIGJhZGdlIGlzIGhpZGRlbi5cclxuICAgICAgbGV0IGJhZGdlU3RhdGUgPSBzZXRCYWRnZVN0YXRlKHRhYklkLCBcInRleHRcIiwgY2hhbmdlcy5iYWRnZVRleHQpO1xyXG4gICAgICBpZiAoYmFkZ2VTdGF0ZS5oaWRkZW5TdGF0ZSA9PSBcImhpZGRlblwiKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIHJldHVybiBicm93c2VyLmJyb3dzZXJBY3Rpb24uc2V0QmFkZ2VUZXh0KHtcclxuICAgICAgICB0YWJJZCxcclxuICAgICAgICB0ZXh0OiBjaGFuZ2VzLmJhZGdlVGV4dFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUaGVyZSBpcyBubyBiYWRnZSBvbiBGaXJlZm94IGZvciBBbmRyb2lkOyB0aGUgYnJvd3NlciBhY3Rpb24gaXNcclxuICAgIC8vIHNpbXBseSBhIG1lbnUgaXRlbS5cclxuICAgIGlmIChjaGFuZ2UgPT0gXCJiYWRnZUNvbG9yXCIgJiZcclxuICAgICAgICBcInNldEJhZGdlQmFja2dyb3VuZENvbG9yXCIgaW4gYnJvd3Nlci5icm93c2VyQWN0aW9uKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gYnJvd3Nlci5icm93c2VyQWN0aW9uLnNldEJhZGdlQmFja2dyb3VuZENvbG9yKHtcclxuICAgICAgICB0YWJJZCxcclxuICAgICAgICBjb2xvcjogY2hhbmdlcy5iYWRnZUNvbG9yXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gYWRkQ2hhbmdlKHRhYklkLCBuYW1lLCB2YWx1ZSlcclxue1xyXG4gIGxldCBjaGFuZ2VzID0gY2hhbmdlc0J5VGFiSWQuZ2V0KHRhYklkKTtcclxuICBpZiAoIWNoYW5nZXMpXHJcbiAge1xyXG4gICAgY2hhbmdlcyA9IHt9O1xyXG4gICAgY2hhbmdlc0J5VGFiSWQuc2V0KHRhYklkLCBjaGFuZ2VzKTtcclxuICB9XHJcbiAgY2hhbmdlc1tuYW1lXSA9IHZhbHVlO1xyXG5cclxuICBmdW5jdGlvbiBjbGVhbnVwKClcclxuICB7XHJcbiAgICBjaGFuZ2VzQnlUYWJJZC5kZWxldGUodGFiSWQpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gb25SZXBsYWNlZChhZGRlZFRhYklkLCByZW1vdmVkVGFiSWQpXHJcbiAge1xyXG4gICAgaWYgKGFkZGVkVGFiSWQgPT0gdGFiSWQpXHJcbiAgICB7XHJcbiAgICAgIGJyb3dzZXIudGFicy5vblJlcGxhY2VkLnJlbW92ZUxpc3RlbmVyKG9uUmVwbGFjZWQpO1xyXG4gICAgICB0cnlcclxuICAgICAge1xyXG4gICAgICAgIGF3YWl0IGFwcGx5Q2hhbmdlcyh0YWJJZCwgY2hhbmdlcyk7XHJcbiAgICAgICAgY2xlYW51cCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhdGNoIChlKVxyXG4gICAgICB7XHJcbiAgICAgICAgY2xlYW51cCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAoIWJyb3dzZXIudGFicy5vblJlcGxhY2VkLmhhc0xpc3RlbmVyKG9uUmVwbGFjZWQpKVxyXG4gIHtcclxuICAgIHRyeVxyXG4gICAge1xyXG4gICAgICBhd2FpdCBhcHBseUNoYW5nZXModGFiSWQsIGNoYW5nZXMpO1xyXG4gICAgICBjbGVhbnVwKCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSlcclxuICAgIHtcclxuICAgICAgLy8gSWYgdGhlIHRhYiBpcyBwcmVyZW5kZXJlZCwgYnJvd3Nlci5icm93c2VyQWN0aW9uLnNldCogZmFpbHNcclxuICAgICAgLy8gYW5kIHdlIGhhdmUgdG8gZGVsYXkgb3VyIGNoYW5nZXMgdW50aWwgdGhlIGN1cnJlbnRseSB2aXNpYmxlIHRhYlxyXG4gICAgICAvLyBpcyByZXBsYWNlZCB3aXRoIHRoZSBwcmVyZW5kZXJlZCB0YWIuXHJcbiAgICAgIGJyb3dzZXIudGFicy5vblJlcGxhY2VkLmFkZExpc3RlbmVyKG9uUmVwbGFjZWQpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFNldHMgaWNvbiBiYWRnZSBmb3IgZ2l2ZW4gdGFiLlxyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcn0gdGFiSWRcclxuICogQHBhcmFtIHtvYmplY3R9IGJhZGdlXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYWRnZS5jb2xvclxyXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFkZ2UubnVtYmVyXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0QmFkZ2UodGFiSWQsIGJhZGdlKVxyXG57XHJcbiAgaWYgKCFiYWRnZSlcclxuICB7XHJcbiAgICBhZGRDaGFuZ2UodGFiSWQsIFwiYmFkZ2VUZXh0XCIsIFwiXCIpO1xyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgaWYgKFwibnVtYmVyXCIgaW4gYmFkZ2UpXHJcbiAgICAgIGFkZENoYW5nZSh0YWJJZCwgXCJiYWRnZVRleHRcIiwgYmFkZ2UubnVtYmVyLnRvU3RyaW5nKCkpO1xyXG5cclxuICAgIGlmIChcImNvbG9yXCIgaW4gYmFkZ2UpXHJcbiAgICAgIGFkZENoYW5nZSh0YWJJZCwgXCJiYWRnZUNvbG9yXCIsIGJhZGdlLmNvbG9yKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXRzIGljb24gaW1hZ2UgZm9yIGdpdmVuIHRhYiB1c2luZyBpbWFnZSBkYXRhLlxyXG4gKlxyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IHRhYklkXHJcbiAqIEBwYXJhbSAge29iamVjdH0gaW1hZ2VEYXRhXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0SWNvbkltYWdlRGF0YSh0YWJJZCwgaW1hZ2VEYXRhKVxyXG57XHJcbiAgYWRkQ2hhbmdlKHRhYklkLCBcImljb25JbWFnZURhdGFcIiwgaW1hZ2VEYXRhKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldHMgaWNvbiBpbWFnZSBmb3IgZ2l2ZW4gdGFiIHVzaW5nIGZpbGUgcGF0aC5cclxuICpcclxuICogQHBhcmFtICB7bnVtYmVyfSB0YWJJZFxyXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHBhdGggLSBleHBlY3RlZCB0byBpbmNsdWRlIFwiJHNpemVcIiBwbGFjZWhvbGRlclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEljb25QYXRoKHRhYklkLCBwYXRoKVxyXG57XHJcbiAgYWRkQ2hhbmdlKHRhYklkLCBcImljb25QYXRoXCIsIHBhdGgpO1xyXG59XHJcblxyXG4vKipcclxuICogVG9nZ2xlcyBpY29uIGJhZGdlIGZvciBnaXZlbiB0YWIuXHJcbiAqXHJcbiAqIEBwYXJhbSAge251bWJlcn0gdGFiSWRcclxuICogQHBhcmFtICB7Ym9vbGVhbn0gc2hvdWxkSGlkZVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRvZ2dsZUJhZGdlKHRhYklkLCBzaG91bGRIaWRlKVxyXG57XHJcbiAgaWYgKHNob3VsZEhpZGUpXHJcbiAge1xyXG4gICAgc2V0QmFkZ2VTdGF0ZSh0YWJJZCwgXCJoaWRkZW5TdGF0ZVwiLCBcImhpZGluZ1wiKTtcclxuICAgIGFkZENoYW5nZSh0YWJJZCwgXCJiYWRnZVRleHRcIiwgXCJcIik7XHJcbiAgICBzZXRCYWRnZVN0YXRlKHRhYklkLCBcImhpZGRlblN0YXRlXCIsIFwiaGlkZGVuXCIpO1xyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgbGV0IGJhZGdlU3RhdGUgPSBzZXRCYWRnZVN0YXRlKHRhYklkLCBcImhpZGRlblN0YXRlXCIsIFwidmlzaWJsZVwiKTtcclxuICAgIGFkZENoYW5nZSh0YWJJZCwgXCJiYWRnZVRleHRcIiwgYmFkZ2VTdGF0ZS50ZXh0KTtcclxuICB9XHJcbn1cclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbmNvbnN0IGtleVByZWZpeCA9IFwiZmlsZTpcIjtcclxuXHJcbmZ1bmN0aW9uIGZpbGVUb0tleShmaWxlTmFtZSlcclxue1xyXG4gIHJldHVybiBrZXlQcmVmaXggKyBmaWxlTmFtZTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gbG9hZEZpbGUoZmlsZU5hbWUpXHJcbntcclxuICBsZXQga2V5ID0gZmlsZVRvS2V5KGZpbGVOYW1lKTtcclxuICBsZXQgaXRlbXMgPSBhd2FpdCBicm93c2VyLnN0b3JhZ2UubG9jYWwuZ2V0KGtleSk7XHJcbiAgbGV0IGVudHJ5ID0gaXRlbXNba2V5XTtcclxuICBpZiAoZW50cnkpXHJcbiAgICByZXR1cm4gZW50cnk7XHJcbiAgdGhyb3cge3R5cGU6IFwiTm9TdWNoRmlsZVwifTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2F2ZUZpbGUoZmlsZU5hbWUsIGRhdGEpXHJcbntcclxuICByZXR1cm4gYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldCh7XHJcbiAgICBbZmlsZVRvS2V5KGZpbGVOYW1lKV06IHtcclxuICAgICAgY29udGVudDogQXJyYXkuZnJvbShkYXRhKSxcclxuICAgICAgbGFzdE1vZGlmaWVkOiBEYXRlLm5vdygpXHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBsZXQgSU8gPVxyXG57XHJcbiAgLyoqXHJcbiAgICogUmVhZHMgdGV4dCBsaW5lcyBmcm9tIGEgZmlsZS5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZU5hbWVcclxuICAgKiAgICBOYW1lIG9mIHRoZSBmaWxlIHRvIGJlIHJlYWRcclxuICAgKiBAcGFyYW0ge1RleHRTaW5rfSBsaXN0ZW5lclxyXG4gICAqICAgIEZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggbGluZSBpbiB0aGUgZmlsZVxyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XHJcbiAgICogICAgUHJvbWlzZSB0byBiZSByZXNvbHZlZCBvciByZWplY3RlZCBvbmNlIHRoZSBvcGVyYXRpb24gaXMgY29tcGxldGVkXHJcbiAgICovXHJcbiAgYXN5bmMgcmVhZEZyb21GaWxlKGZpbGVOYW1lLCBsaXN0ZW5lcilcclxuICB7XHJcbiAgICBsZXQgZW50cnkgPSBhd2FpdCBsb2FkRmlsZShmaWxlTmFtZSk7XHJcbiAgICBmb3IgKGxldCBsaW5lIG9mIGVudHJ5LmNvbnRlbnQpXHJcbiAgICAgIGxpc3RlbmVyKGxpbmUpO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFdyaXRlcyB0ZXh0IGxpbmVzIHRvIGEgZmlsZS5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZU5hbWVcclxuICAgKiAgICBOYW1lIG9mIHRoZSBmaWxlIHRvIGJlIHdyaXR0ZW5cclxuICAgKiBAcGFyYW0ge0l0ZXJhYmxlLjxzdHJpbmc+fSBkYXRhXHJcbiAgICogICAgQW4gYXJyYXktbGlrZSBvciBpdGVyYWJsZSBvYmplY3QgY29udGFpbmluZyB0aGUgbGluZXMgKHdpdGhvdXQgbGluZVxyXG4gICAqICAgIGVuZGluZ3MpXHJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cclxuICAgKiAgICBQcm9taXNlIHRvIGJlIHJlc29sdmVkIG9yIHJlamVjdGVkIG9uY2UgdGhlIG9wZXJhdGlvbiBpcyBjb21wbGV0ZWRcclxuICAgKi9cclxuICB3cml0ZVRvRmlsZShmaWxlTmFtZSwgZGF0YSlcclxuICB7XHJcbiAgICByZXR1cm4gc2F2ZUZpbGUoZmlsZU5hbWUsIGRhdGEpO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbmFtZXMgYSBmaWxlLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmcm9tRmlsZVxyXG4gICAqICAgIE5hbWUgb2YgdGhlIGZpbGUgdG8gYmUgcmVuYW1lZFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZXdOYW1lXHJcbiAgICogICAgTmV3IGZpbGUgbmFtZSwgd2lsbCBiZSBvdmVyd3JpdHRlbiBpZiBleGlzdHNcclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxyXG4gICAqICAgIFByb21pc2UgdG8gYmUgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgb25jZSB0aGUgb3BlcmF0aW9uIGlzIGNvbXBsZXRlZFxyXG4gICAqL1xyXG4gIGFzeW5jIHJlbmFtZUZpbGUoZnJvbUZpbGUsIG5ld05hbWUpXHJcbiAge1xyXG4gICAgbGV0IGVudHJ5ID0gYXdhaXQgbG9hZEZpbGUoZnJvbUZpbGUpO1xyXG4gICAgYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldCh7W2ZpbGVUb0tleShuZXdOYW1lKV06IGVudHJ5fSk7XHJcbiAgICBhd2FpdCBicm93c2VyLnN0b3JhZ2UubG9jYWwucmVtb3ZlKGZpbGVUb0tleShmcm9tRmlsZSkpO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHJpZXZlcyBmaWxlIG1ldGFkYXRhLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlTmFtZVxyXG4gICAqICAgIE5hbWUgb2YgdGhlIGZpbGUgdG8gYmUgbG9va2VkIHVwXHJcbiAgICogQHJldHVybiB7UHJvbWlzZS48U3RhdERhdGE+fVxyXG4gICAqICAgIFByb21pc2UgdG8gYmUgcmVzb2x2ZWQgd2l0aCBmaWxlIG1ldGFkYXRhIG9uY2UgdGhlIG9wZXJhdGlvbiBpc1xyXG4gICAqICAgIGNvbXBsZXRlZFxyXG4gICAqL1xyXG4gIGFzeW5jIHN0YXRGaWxlKGZpbGVOYW1lKVxyXG4gIHtcclxuICAgIHRyeVxyXG4gICAge1xyXG4gICAgICBsZXQgZW50cnkgPSBhd2FpdCBsb2FkRmlsZShmaWxlTmFtZSk7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgZXhpc3RzOiB0cnVlLFxyXG4gICAgICAgIGxhc3RNb2RpZmllZDogZW50cnkubGFzdE1vZGlmaWVkXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpXHJcbiAgICB7XHJcbiAgICAgIGlmIChlcnJvci50eXBlID09IFwiTm9TdWNoRmlsZVwiKVxyXG4gICAgICAgIHJldHVybiB7ZXhpc3RzOiBmYWxzZX07XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlIG1lc3NhZ2luZyAqL1xyXG5cclxuaW1wb3J0IHtFdmVudEVtaXR0ZXJ9IGZyb20gXCIuLi9hZGJsb2NrcGx1c2NvcmUvbGliL2V2ZW50cy5qc1wiO1xyXG5cclxuLyoqXHJcbiAqIENvbW11bmljYXRpb24gcG9ydCB3cmFwcGluZyBleHQub25NZXNzYWdlIHRvIHJlY2VpdmUgbWVzc2FnZXMuXHJcbiAqXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKi9cclxuY2xhc3MgUG9ydFxyXG57XHJcbiAgY29uc3RydWN0b3IoKVxyXG4gIHtcclxuICAgIHRoaXMuX2V2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgIHRoaXMuX29uTWVzc2FnZSA9IHRoaXMuX29uTWVzc2FnZS5iaW5kKHRoaXMpO1xyXG4gICAgZXh0Lm9uTWVzc2FnZS5hZGRMaXN0ZW5lcih0aGlzLl9vbk1lc3NhZ2UpO1xyXG4gIH1cclxuXHJcbiAgX29uTWVzc2FnZShtZXNzYWdlLCBzZW5kZXIsIHNlbmRSZXNwb25zZSlcclxuICB7XHJcbiAgICBsZXQgYXN5bmMgPSBmYWxzZTtcclxuICAgIGxldCBjYWxsYmFja3MgPSB0aGlzLl9ldmVudEVtaXR0ZXIubGlzdGVuZXJzKG1lc3NhZ2UudHlwZSk7XHJcblxyXG4gICAgZm9yIChsZXQgY2FsbGJhY2sgb2YgY2FsbGJhY2tzKVxyXG4gICAge1xyXG4gICAgICBsZXQgcmVzcG9uc2UgPSBjYWxsYmFjayhtZXNzYWdlLCBzZW5kZXIpO1xyXG5cclxuICAgICAgaWYgKHJlc3BvbnNlICYmIHR5cGVvZiByZXNwb25zZS50aGVuID09IFwiZnVuY3Rpb25cIilcclxuICAgICAge1xyXG4gICAgICAgIHJlc3BvbnNlLnRoZW4oXHJcbiAgICAgICAgICBzZW5kUmVzcG9uc2UsXHJcbiAgICAgICAgICByZWFzb24gPT5cclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihyZWFzb24pO1xyXG4gICAgICAgICAgICBzZW5kUmVzcG9uc2UoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIGFzeW5jID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlXHJcbiAgICAgIHtcclxuICAgICAgICBzZW5kUmVzcG9uc2UocmVzcG9uc2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFzeW5jO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gYSBwYXJ0aWN1bGFyIG1lc3NhZ2UgaXMgcmVjZWl2ZWQuXHJcbiAgICpcclxuICAgKiBAY2FsbGJhY2sgUG9ydH5tZXNzYWdlQ2FsbGJhY2tcclxuICAgKiBAcGFyYW0ge29iamVjdH0gbWVzc2FnZVxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBzZW5kZXJcclxuICAgKiBAcmV0dXJuIFRoZSBjYWxsYmFjayBjYW4gcmV0dXJuIHVuZGVmaW5lZCAobm8gcmVzcG9uc2UpLFxyXG4gICAqICAgICAgICAgYSB2YWx1ZSAocmVzcG9uc2UgdG8gYmUgc2VudCB0byBzZW5kZXIgaW1tZWRpYXRlbHkpXHJcbiAgICogICAgICAgICBvciBhIHByb21pc2UgKGFzeW5jaHJvbm91cyByZXNwb25zZSkuXHJcbiAgICovXHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgYSBjYWxsYmFjayBmb3IgdGhlIHNwZWNpZmllZCBtZXNzYWdlLlxyXG4gICAqXHJcbiAgICogVGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgY2FsbGJhY2sgKGlmIG5vdCB1bmRlZmluZWQpIGlzIHNlbnQgYXMgcmVzcG9uc2UuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9ICAgbmFtZVxyXG4gICAqIEBwYXJhbSB7UG9ydH5tZXNzYWdlQ2FsbGJhY2t9IGNhbGxiYWNrXHJcbiAgICovXHJcbiAgb24obmFtZSwgY2FsbGJhY2spXHJcbiAge1xyXG4gICAgdGhpcy5fZXZlbnRFbWl0dGVyLm9uKG5hbWUsIGNhbGxiYWNrKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgYSBjYWxsYmFjayBmb3IgdGhlIHNwZWNpZmllZCBtZXNzYWdlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9ICAgbmFtZVxyXG4gICAqIEBwYXJhbSB7UG9ydH5tZXNzYWdlQ2FsbGJhY2t9IGNhbGxiYWNrXHJcbiAgICovXHJcbiAgb2ZmKG5hbWUsIGNhbGxiYWNrKVxyXG4gIHtcclxuICAgIHRoaXMuX2V2ZW50RW1pdHRlci5vZmYobmFtZSwgY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGlzYWJsZXMgdGhlIHBvcnQgYW5kIG1ha2VzIGl0IHN0b3AgbGlzdGVuaW5nIHRvIGluY29taW5nIG1lc3NhZ2VzLlxyXG4gICAqL1xyXG4gIGRpc2Nvbm5lY3QoKVxyXG4gIHtcclxuICAgIGV4dC5vbk1lc3NhZ2UucmVtb3ZlTGlzdGVuZXIodGhpcy5fb25NZXNzYWdlKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBwb3J0IHRvIHJlY2VpdmUgbWVzc2FnZXMuXHJcbiAqXHJcbiAqIEB0eXBlIHtQb3J0fVxyXG4gKi9cclxuZXhwb3J0IGxldCBwb3J0ID0gbmV3IFBvcnQoKTtcclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlIHByZWZzICovXHJcblxyXG5pbXBvcnQgKiBhcyBpbmZvIGZyb20gXCJpbmZvXCI7XHJcbmltcG9ydCB7RXZlbnRFbWl0dGVyfSBmcm9tIFwiLi4vYWRibG9ja3BsdXNjb3JlL2xpYi9ldmVudHMuanNcIjtcclxuaW1wb3J0IHtwb3J0fSBmcm9tIFwiLi9tZXNzYWdpbmcuanNcIjtcclxuXHJcbmNvbnN0IGtleVByZWZpeCA9IFwicHJlZjpcIjtcclxuXHJcbmxldCBldmVudEVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbmxldCBvdmVycmlkZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xyXG5cclxuLyoqIEBsZW5kcyBtb2R1bGU6cHJlZnMuUHJlZnMgKi9cclxubGV0IGRlZmF1bHRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuXHJcbi8qKlxyXG4gKiBAc2VlIGh0dHBzOi8vYWRibG9ja3BsdXMub3JnL2VuL3ByZWZlcmVuY2VzI2FuYWx5dGljc1xyXG4gKiBAdHlwZSB7b2JqZWN0fVxyXG4gKi9cclxuZGVmYXVsdHMuYW5hbHl0aWNzID0ge1xyXG4gIHRydXN0ZWRIb3N0czogW1wiYWRibG9ja3BsdXMub3JnXCIsIFwibm90aWZpY2F0aW9uLmFkYmxvY2twbHVzLm9yZ1wiLFxyXG4gICAgICAgICAgICAgICAgIFwiZWFzeWxpc3QtZG93bmxvYWRzLmFkYmxvY2twbHVzLm9yZ1wiXVxyXG59O1xyXG4vKipcclxuICogVGhlIGFwcGxpY2F0aW9uIHZlcnNpb24gYXMgc2V0IGR1cmluZyBpbml0aWFsaXphdGlvbi4gVXNlZCB0byBkZXRlY3QgdXBkYXRlcy5cclxuICpcclxuICogQHR5cGUge3N0cmluZ31cclxuICovXHJcbmRlZmF1bHRzLmN1cnJlbnRWZXJzaW9uID0gXCJcIjtcclxuLyoqXHJcbiAqIEBzZWUgaHR0cHM6Ly9hZGJsb2NrcGx1cy5vcmcvZW4vcHJlZmVyZW5jZXMjcGF0dGVybnNiYWNrdXBzXHJcbiAqIEB0eXBlIHtudW1iZXJ9XHJcbiAqL1xyXG5kZWZhdWx0cy5wYXR0ZXJuc2JhY2t1cHMgPSAwO1xyXG4vKipcclxuICogQHNlZSBodHRwczovL2FkYmxvY2twbHVzLm9yZy9lbi9wcmVmZXJlbmNlcyNwYXR0ZXJuc2JhY2t1cGludGVydmFsXHJcbiAqIEB0eXBlIHtudW1iZXJ9XHJcbiAqL1xyXG5kZWZhdWx0cy5wYXR0ZXJuc2JhY2t1cGludGVydmFsID0gMjQ7XHJcbi8qKlxyXG4gKiBPbmx5IGZvciBjb21wYXRpYmlsaXR5IHdpdGggY29yZSBjb2RlLiBQbGVhc2UgZG8gbm90IGNoYW5nZSFcclxuICpcclxuICogQHR5cGUge2Jvb2xlYW59XHJcbiAqL1xyXG5kZWZhdWx0cy5zYXZlc3RhdHMgPSBmYWxzZTtcclxuLyoqXHJcbiAqIEBzZWUgaHR0cHM6Ly9hZGJsb2NrcGx1cy5vcmcvZW4vcHJlZmVyZW5jZXMjc3Vic2NyaXB0aW9uc19mYWxsYmFja2Vycm9yc1xyXG4gKiBAdHlwZSB7bnVtYmVyfVxyXG4gKi9cclxuZGVmYXVsdHMuc3Vic2NyaXB0aW9uc19mYWxsYmFja2Vycm9ycyA9IDU7XHJcbi8qKlxyXG4gKiBAc2VlIGh0dHBzOi8vYWRibG9ja3BsdXMub3JnL2VuL3ByZWZlcmVuY2VzI3N1YnNjcmlwdGlvbnNfZmFsbGJhY2t1cmxcclxuICogQHR5cGUge3N0cmluZ31cclxuICovXHJcbmRlZmF1bHRzLnN1YnNjcmlwdGlvbnNfZmFsbGJhY2t1cmwgPSBcImh0dHBzOi8vYWRibG9ja3BsdXMub3JnL2dldFN1YnNjcmlwdGlvbj92ZXJzaW9uPSVWRVJTSU9OJSZ1cmw9JVNVQlNDUklQVElPTiUmZG93bmxvYWRVUkw9JVVSTCUmZXJyb3I9JUVSUk9SJSZyZXNwb25zZVN0YXR1cz0lUkVTUE9OU0VTVEFUVVMlXCI7XHJcbi8qKlxyXG4gKiBAc2VlIGh0dHBzOi8vYWRibG9ja3BsdXMub3JnL2VuL3ByZWZlcmVuY2VzI3N1YnNjcmlwdGlvbnNfYXV0b3VwZGF0ZVxyXG4gKiBAdHlwZSB7Ym9vbGVhbn1cclxuICovXHJcbmRlZmF1bHRzLnN1YnNjcmlwdGlvbnNfYXV0b3VwZGF0ZSA9IHRydWU7XHJcbi8qKlxyXG4gKiBAc2VlIGh0dHBzOi8vYWRibG9ja3BsdXMub3JnL2VuL3ByZWZlcmVuY2VzI3N1YnNjcmlwdGlvbnNfZXhjZXB0aW9uc3VybFxyXG4gKiBAdHlwZSB7c3RyaW5nfVxyXG4gKi9cclxuZGVmYXVsdHMuc3Vic2NyaXB0aW9uc19leGNlcHRpb25zdXJsID0gXCJodHRwczovL2Vhc3lsaXN0LWRvd25sb2Fkcy5hZGJsb2NrcGx1cy5vcmcvZXhjZXB0aW9ucnVsZXMudHh0XCI7XHJcbi8qKlxyXG4gKiBAc2VlIGh0dHBzOi8vYWRibG9ja3BsdXMub3JnL2VuL3ByZWZlcmVuY2VzI3N1YnNjcmlwdGlvbnNfZXhjZXB0aW9uc3VybF9wcml2YWN5XHJcbiAqIEB0eXBlIHtzdHJpbmd9XHJcbiAqL1xyXG5kZWZhdWx0cy5zdWJzY3JpcHRpb25zX2V4Y2VwdGlvbnN1cmxfcHJpdmFjeSA9IFwiaHR0cHM6Ly9lYXN5bGlzdC1kb3dubG9hZHMuYWRibG9ja3BsdXMub3JnL2V4Y2VwdGlvbnJ1bGVzLXByaXZhY3ktZnJpZW5kbHkudHh0XCI7XHJcbi8qKlxyXG4gKiBVc2VkIHRvIGVuc3VyZSB0aGUgYW50aS1jaXJjdW12ZW50aW9uIHN1YnNjcmlwdGlvbiBpcyBvcHRlZCBpbiBieSBkZWZhdWx0LlxyXG4gKiBAdHlwZSB7Ym9vbGVhbn1cclxuICovXHJcbmRlZmF1bHRzLnN1YnNjcmlwdGlvbnNfYWRkZWRhbnRpY3YgPSBmYWxzZTtcclxuLyoqXHJcbiAqIEBzZWUgaHR0cHM6Ly9hZGJsb2NrcGx1cy5vcmcvZW4vcHJlZmVyZW5jZXMjZG9jdW1lbnRhdGlvbl9saW5rXHJcbiAqIEB0eXBlIHtzdHJpbmd9XHJcbiAqL1xyXG5kZWZhdWx0cy5kb2N1bWVudGF0aW9uX2xpbmsgPSBcImh0dHBzOi8vYWRibG9ja3BsdXMub3JnL3JlZGlyZWN0P2xpbms9JUxJTkslJmxhbmc9JUxBTkclXCI7XHJcbi8qKlxyXG4gKiBAc2VlIGh0dHBzOi8vYWRibG9ja3BsdXMub3JnL2VuL3ByZWZlcmVuY2VzI25vdGlmaWNhdGlvbmRhdGFcclxuICogQHR5cGUge29iamVjdH1cclxuICovXHJcbmRlZmF1bHRzLm5vdGlmaWNhdGlvbmRhdGEgPSB7fTtcclxuLyoqXHJcbiAqIEBzZWUgaHR0cHM6Ly9hZGJsb2NrcGx1cy5vcmcvZW4vcHJlZmVyZW5jZXMjbm90aWZpY2F0aW9udXJsXHJcbiAqIEB0eXBlIHtzdHJpbmd9XHJcbiAqL1xyXG5kZWZhdWx0cy5ub3RpZmljYXRpb251cmwgPSBcImh0dHBzOi8vbm90aWZpY2F0aW9uLmFkYmxvY2twbHVzLm9yZy9ub3RpZmljYXRpb24uanNvblwiO1xyXG4vKipcclxuICogVGhlIHRvdGFsIG51bWJlciBvZiByZXF1ZXN0cyBibG9ja2VkIGJ5IHRoZSBleHRlbnNpb24uXHJcbiAqXHJcbiAqIEB0eXBlIHtudW1iZXJ9XHJcbiAqL1xyXG5kZWZhdWx0cy5ibG9ja2VkX3RvdGFsID0gMDtcclxuLyoqXHJcbiAqIFdoZXRoZXIgdG8gc2hvdyBhIGJhZGdlIGluIHRoZSB0b29sYmFyIGljb24gaW5kaWNhdGluZyB0aGUgbnVtYmVyXHJcbiAqIG9mIGJsb2NrZWQgYWRzLlxyXG4gKlxyXG4gKiBAdHlwZSB7Ym9vbGVhbn1cclxuICovXHJcbmRlZmF1bHRzLnNob3dfc3RhdHNpbmljb24gPSB0cnVlO1xyXG4vKipcclxuICogV2hldGhlciB0byBzaG93IHRoZSBudW1iZXIgb2YgYmxvY2tlZCBhZHMgaW4gdGhlIHBvcHVwLlxyXG4gKlxyXG4gKiBAdHlwZSB7Ym9vbGVhbn1cclxuICovXHJcbmRlZmF1bHRzLnNob3dfc3RhdHNpbnBvcHVwID0gdHJ1ZTtcclxuLyoqXHJcbiAqIFdoZXRoZXIgdG8gc2hvdyB0aGUgXCJCbG9jayBlbGVtZW50XCIgY29udGV4dCBtZW51IGVudHJ5LlxyXG4gKlxyXG4gKiBAdHlwZSB7Ym9vbGVhbn1cclxuICovXHJcbmRlZmF1bHRzLnNob3VsZFNob3dCbG9ja0VsZW1lbnRNZW51ID0gdHJ1ZTtcclxuXHJcbi8qKlxyXG4gKiBXaGV0aGVyIHRvIHNob3cgdHJhY2tpbmcgd2FybmluZyBpbiBvcHRpb25zIHBhZ2Ugd2hlbiBib3RoXHJcbiAqIEFjY2VwdGFibGUgQWRzIGFuZCBzdWJzY3JpcHRpb24gb2YgdHlwZSBcIlByaXZhY3lcIiBhcmUgZW5hYmxlZC5cclxuICpcclxuICogQHR5cGUge2Jvb2xlYW59XHJcbiAqL1xyXG5kZWZhdWx0cy51aV93YXJuX3RyYWNraW5nID0gdHJ1ZTtcclxuXHJcbi8qKlxyXG4gKiBOb3RpZmljYXRpb24gY2F0ZWdvcmllcyB0byBiZSBpZ25vcmVkLlxyXG4gKlxyXG4gKiBAdHlwZSB7c3RyaW5nW119XHJcbiAqL1xyXG5kZWZhdWx0cy5ub3RpZmljYXRpb25zX2lnbm9yZWRjYXRlZ29yaWVzID0gW107XHJcblxyXG4vKipcclxuICogV2hldGhlciB0byBzaG93IHRoZSBkZXZlbG9wZXIgdG9vbHMgcGFuZWwuXHJcbiAqXHJcbiAqIEB0eXBlIHtib29sZWFufVxyXG4gKi9cclxuZGVmYXVsdHMuc2hvd19kZXZ0b29sc19wYW5lbCA9IHRydWU7XHJcblxyXG4vKipcclxuICogUHJldmVudHMgdW5zb2xpY2l0ZWQgVUkgZWxlbWVudHMgZnJvbSBzaG93aW5nIHVwIGFmdGVyIGluc3RhbGxhdGlvbi4gVGhpc1xyXG4gKiBwcmVmZXJlbmNlIGlzbid0IHNldCBieSB0aGUgZXh0ZW5zaW9uIGJ1dCBjYW4gYmUgcHJlLWNvbmZpZ3VyZWQgZXh0ZXJuYWxseS5cclxuICpcclxuICogQHNlZSBodHRwczovL2FkYmxvY2twbHVzLm9yZy9kZXZlbG9wbWVudC1idWlsZHMvc3VwcHJlc3NpbmctdGhlLWZpcnN0LXJ1bi1wYWdlLW9uLWNocm9tZVxyXG4gKiBAdHlwZSB7Ym9vbGVhbn1cclxuICovXHJcbmRlZmF1bHRzLnN1cHByZXNzX2ZpcnN0X3J1bl9wYWdlID0gZmFsc2U7XHJcblxyXG4vKipcclxuICogQWRkaXRvbmFsIHN1YnNjcmlwdGlvbnMgdG8gYmUgYXV0b21hdGljYWxseSBhZGRlZCB3aGVuIHRoZSBleHRlbnNpb24gaXNcclxuICogbG9hZGVkLiBUaGlzIHByZWZlcmVuY2UgaXNuJ3Qgc2V0IGJ5IHRoZSBleHRlbnNpb24gYnV0IGNhbiBiZSBwcmUtY29uZmlndXJlZFxyXG4gKiBleHRlcm5hbGx5LlxyXG4gKlxyXG4gKiBAdHlwZSB7c3RyaW5nW119XHJcbiAqL1xyXG5kZWZhdWx0cy5hZGRpdGlvbmFsX3N1YnNjcmlwdGlvbnMgPSBbXTtcclxuXHJcbi8qKlxyXG4gKiBUaGUgdmVyc2lvbiBvZiBtYWpvciB1cGRhdGVzIHRoYXQgdGhlIHVzZXIgaXMgYXdhcmUgb2YuIElmIGl0J3MgdG9vIGxvdyxcclxuICogdGhlIHVwZGF0ZXMgcGFnZSB3aWxsIGJlIHNob3duIHRvIGluZm9ybSB0aGUgdXNlciBhYm91dCBpbnRlcm1lZGlhdGUgY2hhbmdlcy5cclxuICpcclxuICogQHR5cGUge251bWJlcn1cclxuICovXHJcbmRlZmF1bHRzLmxhc3RfdXBkYXRlc19wYWdlX2Rpc3BsYXllZCA9IDA7XHJcblxyXG4vKipcclxuICogQ2F1c2VzIGVsZW1lbnRzIHRhcmdldGVkIGJ5IGVsZW1lbnQgaGlkaW5nIChhbmQgZWxlbWVudCBoaWRpbmcgZW11bGF0aW9uKVxyXG4gKiB0byBiZSBoaWdobGlnaHRlZCBpbnN0ZWFkIG9mIGhpZGRlbi5cclxuICpcclxuICogQHR5cGUge2Jvb2xlYW59XHJcbiAqL1xyXG5kZWZhdWx0cy5lbGVtaGlkZV9kZWJ1ZyA9IGZhbHNlO1xyXG5cclxuLyoqXHJcbiAqIEFkZHJlc3Mgb2YgcGFnZSB0byBvcGVuIG9uIGZpcnN0IHJ1bi5cclxuICpcclxuICogQHR5cGUge3N0cmluZ31cclxuICovXHJcbmRlZmF1bHRzLnJlbW90ZV9maXJzdF9ydW5fcGFnZV91cmwgPSBcImh0dHBzOi8vd2VsY29tZS5hZGJsb2NrcGx1cy5vcmcvJUxBTkclL2luc3RhbGxlZD9hbj0lQURET05fTkFNRSUmYXY9JUFERE9OX1ZFUlNJT04lJmFwPSVBUFBMSUNBVElPTl9OQU1FJSZhcHY9JUFQUExJQ0FUSU9OX1ZFUlNJT04lJnA9JVBMQVRGT1JNX05BTUUlJnB2PSVQTEFURk9STV9WRVJTSU9OJVwiO1xyXG5cclxuLyoqXHJcbiAgKiBAbmFtZXNwYWNlXHJcbiAgKiBAc3RhdGljXHJcbiAgKi9cclxuZXhwb3J0IGxldCBQcmVmcyA9IHtcclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBnaXZlbiBwcmVmZXJlbmNlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByZWZlcmVuY2VcclxuICAgKiBAcGFyYW0ge2FueX0gICAgdmFsdWVcclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSB1bmRlcmx5aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldC9yZW1vdmUoKSBvcGVyYXRpb24gY29tcGxldGVzXHJcbiAgICovXHJcbiAgc2V0KHByZWZlcmVuY2UsIHZhbHVlKVxyXG4gIHtcclxuICAgIGxldCBkZWZhdWx0VmFsdWUgPSBkZWZhdWx0c1twcmVmZXJlbmNlXTtcclxuXHJcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9IHR5cGVvZiBkZWZhdWx0VmFsdWUpXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHQgdG8gY2hhbmdlIHByZWZlcmVuY2UgdHlwZVwiKTtcclxuXHJcbiAgICBpZiAodmFsdWUgPT0gZGVmYXVsdFZhbHVlKVxyXG4gICAge1xyXG4gICAgICBsZXQgb2xkVmFsdWUgPSBvdmVycmlkZXNbcHJlZmVyZW5jZV07XHJcbiAgICAgIGRlbGV0ZSBvdmVycmlkZXNbcHJlZmVyZW5jZV07XHJcblxyXG4gICAgICAvLyBGaXJlZm94IDY2IGZhaWxzIHRvIGVtaXQgc3RvcmFnZS5sb2NhbC5vbkNoYW5nZWQgZXZlbnRzIGZvciBmYWxzZXlcclxuICAgICAgLy8gdmFsdWVzLiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNTQxNDQ5XHJcbiAgICAgIGlmICghb2xkVmFsdWUgJiZcclxuICAgICAgICAgIGluZm8ucGxhdGZvcm0gPT0gXCJnZWNrb1wiICYmIHBhcnNlSW50KGluZm8ucGxhdGZvcm1WZXJzaW9uLCAxMCkgPT0gNjYpXHJcbiAgICAgICAgb25DaGFuZ2VkKHtbcHJlZlRvS2V5KHByZWZlcmVuY2UpXToge29sZFZhbHVlfX0sIFwibG9jYWxcIik7XHJcblxyXG4gICAgICByZXR1cm4gYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnJlbW92ZShwcmVmVG9LZXkocHJlZmVyZW5jZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIG92ZXJyaWRlc1twcmVmZXJlbmNlXSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIChjdXN0b21TYXZlLmdldChwcmVmZXJlbmNlKSB8fCBzYXZlUHJlZikocHJlZmVyZW5jZSk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyBhIGNhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHdoZW4gdGhlXHJcbiAgICogdmFsdWUgb2YgYSBzcGVjaWZpZWQgcHJlZmVyZW5jZSBjaGFuZ2VkLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9ICAgcHJlZmVyZW5jZVxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXHJcbiAgICovXHJcbiAgb24ocHJlZmVyZW5jZSwgY2FsbGJhY2spXHJcbiAge1xyXG4gICAgZXZlbnRFbWl0dGVyLm9uKHByZWZlcmVuY2UsIGNhbGxiYWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGEgY2FsbGJhY2sgZm9yIHRoZSBzcGVjaWZpZWQgcHJlZmVyZW5jZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSAgIHByZWZlcmVuY2VcclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xyXG4gICAqL1xyXG4gIG9mZihwcmVmZXJlbmNlLCBjYWxsYmFjaylcclxuICB7XHJcbiAgICBldmVudEVtaXR0ZXIub2ZmKHByZWZlcmVuY2UsIGNhbGxiYWNrKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBSZWFkcyB0aGUgZG9jdW1lbnRhdGlvbl9saW5rIHByZWZlcmVuY2UgYW5kIHN1YnN0aXR1dGVzIHBsYWNlaG9sZGVycy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsaW5rSURcclxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XHJcbiAgICovXHJcbiAgZ2V0RG9jTGluayhsaW5rSUQpXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRhdGlvbl9saW5rXHJcbiAgICAgIC5yZXBsYWNlKC8lTElOSyUvZywgbGlua0lEKVxyXG4gICAgICAucmVwbGFjZSgvJUxBTkclL2csIGJyb3dzZXIuaTE4bi5nZXRVSUxhbmd1YWdlKCkpO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEEgcHJvbWlzZSB0aGF0IGlzIGZ1bGxmaWxsZWQgd2hlbiBhbGwgcHJlZmVyZW5jZXMgaGF2ZSBiZWVuIGxvYWRlZC5cclxuICAgKiBXYWl0IGZvciB0aGlzIHByb21pc2UgdG8gYmUgZnVsZmlsbGVkIGJlZm9yZSB1c2luZyBwcmVmZXJlbmNlcyBkdXJpbmdcclxuICAgKiBleHRlbnNpb24gaW5pdGlhbGl6YXRpb24uXHJcbiAgICpcclxuICAgKiBAdHlwZSB7UHJvbWlzZX1cclxuICAgKi9cclxuICB1bnRpbExvYWRlZDogbnVsbFxyXG59O1xyXG5cclxuZnVuY3Rpb24ga2V5VG9QcmVmKGtleSlcclxue1xyXG4gIGlmIChrZXkuaW5kZXhPZihrZXlQcmVmaXgpICE9IDApXHJcbiAgICByZXR1cm4gbnVsbDtcclxuXHJcbiAgcmV0dXJuIGtleS5zdWJzdHIoa2V5UHJlZml4Lmxlbmd0aCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHByZWZUb0tleShwcmVmKVxyXG57XHJcbiAgcmV0dXJuIGtleVByZWZpeCArIHByZWY7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNhdmVQcmVmKHByZWYpXHJcbntcclxuICByZXR1cm4gYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldCh7W3ByZWZUb0tleShwcmVmKV06IG92ZXJyaWRlc1twcmVmXX0pO1xyXG59XHJcblxyXG5sZXQgY3VzdG9tU2F2ZSA9IG5ldyBNYXAoKTtcclxuaWYgKGluZm8ucGxhdGZvcm0gPT0gXCJnZWNrb1wiICYmIHBhcnNlSW50KGluZm8ucGxhdGZvcm1WZXJzaW9uLCAxMCkgPCA2Nilcclxue1xyXG4gIC8vIFNhdmluZyBvbmUgc3RvcmFnZSB2YWx1ZSBjYXVzZXMgYWxsIG90aGVycyB0byBiZSBzYXZlZCBhcyB3ZWxsIGZvclxyXG4gIC8vIEZpcmVmb3ggdmVyc2lvbnMgPDY2LiBNYWtlIHN1cmUgdGhhdCB1cGRhdGluZyBhZCBjb3VudGVyIGRvZXNuJ3QgY2F1c2VcclxuICAvLyB0aGUgZmlsdGVycyBkYXRhIHRvIGJlIHNhdmVkIGZyZXF1ZW50bHkgYXMgYSBzaWRlLWVmZmVjdC5cclxuICBsZXQgcHJvbWlzZSA9IG51bGw7XHJcbiAgY3VzdG9tU2F2ZS5zZXQoXCJibG9ja2VkX3RvdGFsXCIsIHByZWYgPT5cclxuICB7XHJcbiAgICBpZiAoIXByb21pc2UpXHJcbiAgICB7XHJcbiAgICAgIHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PlxyXG4gICAgICB7XHJcbiAgICAgICAgc2V0VGltZW91dChcclxuICAgICAgICAgICgpID0+XHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHByb21pc2UgPSBudWxsO1xyXG4gICAgICAgICAgICBzYXZlUHJlZihwcmVmKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgNjAgKiAxMDAwXHJcbiAgICAgICAgKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJvbWlzZTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkUHJlZmVyZW5jZShwcmVmKVxyXG57XHJcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByZWZzLCBwcmVmLCB7XHJcbiAgICBnZXQoKSB7IHJldHVybiAocHJlZiBpbiBvdmVycmlkZXMgPyBvdmVycmlkZXMgOiBkZWZhdWx0cylbcHJlZl07IH0sXHJcbiAgICBzZXQodmFsdWUpXHJcbiAgICB7XHJcbiAgICAgIFByZWZzLnNldChwcmVmLCB2YWx1ZSk7XHJcbiAgICB9LFxyXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbkNoYW5nZWQoY2hhbmdlcylcclxue1xyXG4gIGZvciAobGV0IGtleSBpbiBjaGFuZ2VzKVxyXG4gIHtcclxuICAgIGxldCBwcmVmID0ga2V5VG9QcmVmKGtleSk7XHJcbiAgICBpZiAocHJlZiAmJiBwcmVmIGluIGRlZmF1bHRzKVxyXG4gICAge1xyXG4gICAgICBsZXQgY2hhbmdlID0gY2hhbmdlc1trZXldO1xyXG4gICAgICBpZiAoXCJuZXdWYWx1ZVwiIGluIGNoYW5nZSAmJiBjaGFuZ2UubmV3VmFsdWUgIT0gZGVmYXVsdHNbcHJlZl0pXHJcbiAgICAgICAgb3ZlcnJpZGVzW3ByZWZdID0gY2hhbmdlLm5ld1ZhbHVlO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgZGVsZXRlIG92ZXJyaWRlc1twcmVmXTtcclxuXHJcbiAgICAgIGV2ZW50RW1pdHRlci5lbWl0KHByZWYpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaW5pdCgpXHJcbntcclxuICBsZXQgcHJlZnMgPSBPYmplY3Qua2V5cyhkZWZhdWx0cyk7XHJcbiAgcHJlZnMuZm9yRWFjaChhZGRQcmVmZXJlbmNlKTtcclxuXHJcbiAgbGV0IGlzRWRnZUNocm9taXVtID0gaW5mby5hcHBsaWNhdGlvbiA9PSBcImVkZ2VcIiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgIGluZm8ucGxhdGZvcm0gPT0gXCJjaHJvbWl1bVwiO1xyXG5cclxuICAvLyBXaGVuIHVwZ3JhZGluZyBmcm9tIEVkZ2VIVE1MIHRvIEVkZ2UgQ2hyb21pdW0gKHY3OSkgZGF0YSBzdG9yZWQgaW5cclxuICAvLyBicm93c2VyLnN0b3JhZ2UubG9jYWwgZ2V0cyBjb3JydXB0ZWQuXHJcbiAgLy8gVG8gZml4IGl0LCB3ZSBoYXZlIHRvIGNhbGwgSlNPTi5wYXJzZSB0d2ljZS5cclxuICAvLyBTZWU6IGh0dHBzOi8vZ2l0bGFiLmNvbS9leWVvL2FkYmxvY2twbHVzL2FkYmxvY2twbHVzY2hyb21lL2lzc3Vlcy8xNTJcclxuICBpZiAoaXNFZGdlQ2hyb21pdW0pXHJcbiAge1xyXG4gICAgbGV0IGl0ZW1zID0gYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLmdldChudWxsKTtcclxuXHJcbiAgICBsZXQgZml4ZWRJdGVtcyA9IHt9O1xyXG4gICAgZm9yIChsZXQga2V5IGluIGl0ZW1zKVxyXG4gICAge1xyXG4gICAgICBpZiAodHlwZW9mIGl0ZW1zW2tleV0gPT0gXCJzdHJpbmdcIilcclxuICAgICAge1xyXG4gICAgICAgIHRyeVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZpeGVkSXRlbXNba2V5XSA9IEpTT04ucGFyc2UoSlNPTi5wYXJzZShpdGVtc1trZXldKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7fVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldChmaXhlZEl0ZW1zKTtcclxuICB9XHJcblxyXG4gIHtcclxuICAgIGxldCBpdGVtcyA9IGF3YWl0IGJyb3dzZXIuc3RvcmFnZS5sb2NhbC5nZXQocHJlZnMubWFwKHByZWZUb0tleSkpO1xyXG4gICAgZm9yIChsZXQga2V5IGluIGl0ZW1zKVxyXG4gICAgICBvdmVycmlkZXNba2V5VG9QcmVmKGtleSldID0gaXRlbXNba2V5XTtcclxuICB9XHJcblxyXG4gIGlmIChcIm1hbmFnZWRcIiBpbiBicm93c2VyLnN0b3JhZ2UpXHJcbiAge1xyXG4gICAgdHJ5XHJcbiAgICB7XHJcbiAgICAgIGxldCBpdGVtcyA9IGF3YWl0IGJyb3dzZXIuc3RvcmFnZS5tYW5hZ2VkLmdldChudWxsKTtcclxuICAgICAgZm9yIChsZXQga2V5IGluIGl0ZW1zKVxyXG4gICAgICAgIGRlZmF1bHRzW2tleV0gPSBpdGVtc1trZXldO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpXHJcbiAgICB7XHJcbiAgICAgIC8vIE9wZXJhIGRvZXNuJ3Qgc3VwcG9ydCBicm93c2VyLnN0b3JhZ2UubWFuYWdlZCwgYnV0IGluc3RlYWQgb2Ygc2ltcGx5XHJcbiAgICAgIC8vIHJlbW92aW5nIHRoZSBBUEksIGl0IGdpdmVzIGFuIGFzeW5jaHJvbm91cyBlcnJvciB3aGljaCB3ZSBpZ25vcmUgaGVyZS5cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGJyb3dzZXIuc3RvcmFnZS5vbkNoYW5nZWQuYWRkTGlzdGVuZXIob25DaGFuZ2VkKTtcclxuXHJcbiAgLy8gTWlncmF0ZSB0aGUgZmlyc3QgYW5kIGN1cnJlbnQgdmVyc2lvbiBmcm9tIG5vdGlmaWNhdGlvbmRhdGEgb3ZlciB0byB0aGVcclxuICAvLyBuZXcgYW5hbHl0aWNzIHByZWZlcmVuY2UgZm9yIGV4aXN0aW5nIHVzZXJzLiBUaGUgYW5hbHl0aWNzIG1vZHVsZSB0YWtlc1xyXG4gIC8vIGNhcmUgb2YgbmV3IHVzZXJzLlxyXG4gIGlmICghKFwiZGF0YVwiIGluIFByZWZzLmFuYWx5dGljcykgJiZcclxuICAgICAgXCJmaXJzdFZlcnNpb25cIiBpbiBQcmVmcy5ub3RpZmljYXRpb25kYXRhICYmXHJcbiAgICAgIFByZWZzLm5vdGlmaWNhdGlvbmRhdGEuZmlyc3RWZXJzaW9uICE9IFwiMFwiKVxyXG4gIHtcclxuICAgIC8vIEpTT04gdmFsdWVzIGFyZW4ndCBzYXZlZCB1bmxlc3MgdGhleSBhcmUgYXNzaWduZWQgYSBkaWZmZXJlbnQgb2JqZWN0XHJcbiAgICAvLyBhbmQgd2UgZG9uJ3Qgd2FudCB0byBtdXRhdGUgdGhlIGRlZmF1bHQgdmFsdWUgb2YgUHJlZnMuYW5hbHl0aWNzLlxyXG4gICAgbGV0IG5vdGlmaWNhdGlvbmRhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KFByZWZzLm5vdGlmaWNhdGlvbmRhdGEpKTtcclxuICAgIGxldCBhbmFseXRpY3MgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KFByZWZzLmFuYWx5dGljcykpO1xyXG5cclxuICAgIC8vIE1pZ3JhdGUgdGhlIHZlcnNpb24gZGF0YS5cclxuICAgIGFuYWx5dGljcy5kYXRhID0ge1xyXG4gICAgICBmaXJzdFZlcnNpb246IG5vdGlmaWNhdGlvbmRhdGEuZmlyc3RWZXJzaW9uLFxyXG4gICAgICBjdXJyZW50VmVyc2lvbjogbm90aWZpY2F0aW9uZGF0YS5kYXRhLnZlcnNpb25cclxuICAgIH07XHJcbiAgICBkZWxldGUgbm90aWZpY2F0aW9uZGF0YS5maXJzdFZlcnNpb247XHJcblxyXG4gICAgLy8gV3JpdGUgdGhlIGNoYW5nZXMgYmFjayB0byBQcmVmcyBhbmQgc3RvcmFnZS5cclxuICAgIFByZWZzLm5vdGlmaWNhdGlvbmRhdGEgPSBub3RpZmljYXRpb25kYXRhO1xyXG4gICAgUHJlZnMuYW5hbHl0aWNzID0gYW5hbHl0aWNzO1xyXG4gIH1cclxufVxyXG5cclxuUHJlZnMudW50aWxMb2FkZWQgPSBpbml0KCk7XHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIHByZWZlcmVuY2Uga2V5LlxyXG4gKlxyXG4gKiBAZXZlbnQgXCJwcmVmcy5nZXRcIlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30ga2V5IC0gVGhlIHByZWZlcmVuY2Uga2V5LlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfHN0cmluZ1tdfG51bWJlcnxib29sZWFufVxyXG4gKi9cclxucG9ydC5vbihcInByZWZzLmdldFwiLCAobWVzc2FnZSwgc2VuZGVyKSA9PiBQcmVmc1ttZXNzYWdlLmtleV0pO1xyXG5cclxuLyoqXHJcbiAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBnaXZlbiBwcmVmZXJlbmNlIGtleSB0byB0aGUgZ2l2ZW4gdmFsdWUuXHJcbiAqXHJcbiAqIEBldmVudCBcInByZWZzLnNldFwiXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBrZXkgLSBUaGUgcHJlZmVyZW5jZSBrZXkuXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBrZXkgLSBUaGUgdmFsdWUgdG8gc2V0LlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfHN0cmluZ1tdfG51bWJlcnxib29sZWFufHVuZGVmaW5lZH1cclxuICovXHJcbnBvcnQub24oXCJwcmVmcy5zZXRcIiwgYXN5bmMobWVzc2FnZSwgc2VuZGVyKSA9PlxyXG57XHJcbiAgaWYgKG1lc3NhZ2Uua2V5ID09IFwibm90aWZpY2F0aW9uc19pZ25vcmVkY2F0ZWdvcmllc1wiKVxyXG4gIHtcclxuICAgIGxldCB7bm90aWZpY2F0aW9uc30gPVxyXG4gICAgICBhd2FpdCBpbXBvcnQoXCIuLi9hZGJsb2NrcGx1c2NvcmUvbGliL25vdGlmaWNhdGlvbnMuanNcIik7XHJcbiAgICByZXR1cm4gbm90aWZpY2F0aW9ucy50b2dnbGVJZ25vcmVDYXRlZ29yeShcIipcIiwgISFtZXNzYWdlLnZhbHVlKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBQcmVmc1ttZXNzYWdlLmtleV0gPSBtZXNzYWdlLnZhbHVlO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBUb2dnbGVzIHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gcHJlZmVyZW5jZSBrZXkuXHJcbiAqXHJcbiAqIEBldmVudCBcInByZWZzLnRvZ2dsZVwiXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBrZXkgLSBUaGUgcHJlZmVyZW5jZSBrZXlcclxuICogQHJldHVybnMgez9ib29sZWFufVxyXG4gKi9cclxucG9ydC5vbihcInByZWZzLnRvZ2dsZVwiLCBhc3luYyhtZXNzYWdlLCBzZW5kZXIpID0+XHJcbntcclxuICBpZiAobWVzc2FnZS5rZXkgPT0gXCJub3RpZmljYXRpb25zX2lnbm9yZWRjYXRlZ29yaWVzXCIpXHJcbiAge1xyXG4gICAgbGV0IHtub3RpZmljYXRpb25zfSA9XHJcbiAgICAgIGF3YWl0IGltcG9ydChcIi4uL2FkYmxvY2twbHVzY29yZS9saWIvbm90aWZpY2F0aW9ucy5qc1wiKTtcclxuICAgIHJldHVybiBub3RpZmljYXRpb25zLnRvZ2dsZUlnbm9yZUNhdGVnb3J5KFwiKlwiKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBQcmVmc1ttZXNzYWdlLmtleV0gPSAhUHJlZnNbbWVzc2FnZS5rZXldO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgbGluayB0byBhIHBhZ2Ugb24gb3VyIHdlYnNpdGUsIGluIHRoZSB1c2VyJ3MgbG9jYWxlIGlmIHBvc3NpYmxlLlxyXG4gKlxyXG4gKiBAZXZlbnQgXCJwcmVmcy5nZXREb2NMaW5rXCJcclxuICogQHByb3BlcnR5IHtzdHJpbmd9IGxpbmtcclxuICogICBUaGUgbGluayBJRCB0byBnZW5lcmF0ZSB0aGUgZG9jIGxpbmsgZm9yLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gKi9cclxucG9ydC5vbihcInByZWZzLmdldERvY0xpbmtcIiwgKG1lc3NhZ2UsIHNlbmRlcikgPT5cclxue1xyXG4gIGxldCB7YXBwbGljYXRpb24sIHBsYXRmb3JtfSA9IGluZm87XHJcbiAgaWYgKHBsYXRmb3JtID09IFwiY2hyb21pdW1cIiAmJiBhcHBsaWNhdGlvbiAhPSBcIm9wZXJhXCIgJiYgYXBwbGljYXRpb24gIT0gXCJlZGdlXCIpXHJcbiAgICBhcHBsaWNhdGlvbiA9IFwiY2hyb21lXCI7XHJcbiAgZWxzZSBpZiAocGxhdGZvcm0gPT0gXCJnZWNrb1wiKVxyXG4gICAgYXBwbGljYXRpb24gPSBcImZpcmVmb3hcIjtcclxuXHJcbiAgcmV0dXJuIFByZWZzLmdldERvY0xpbmsobWVzc2FnZS5saW5rLnJlcGxhY2UoXCJ7YnJvd3Nlcn1cIiwgYXBwbGljYXRpb24pKTtcclxufSk7XHJcbiIsIi8qXHJcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIEFkYmxvY2sgUGx1cyA8aHR0cHM6Ly9hZGJsb2NrcGx1cy5vcmcvPixcclxuICogQ29weXJpZ2h0IChDKSAyMDA2LXByZXNlbnQgZXllbyBHbWJIXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XHJcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIGFzXHJcbiAqIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLlxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcclxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcclxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxyXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKlxyXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxyXG4gKiBhbG9uZyB3aXRoIEFkYmxvY2sgUGx1cy4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cclxuICovXHJcblxyXG4vKiogQG1vZHVsZSBzdGF0cyAqL1xyXG5cclxuaW1wb3J0IHtFdmVudEVtaXR0ZXJ9IGZyb20gXCIuLi9hZGJsb2NrcGx1c2NvcmUvbGliL2V2ZW50cy5qc1wiO1xyXG5pbXBvcnQge0Jsb2NraW5nRmlsdGVyfSBmcm9tIFwiLi4vYWRibG9ja3BsdXNjb3JlL2xpYi9maWx0ZXJDbGFzc2VzLmpzXCI7XHJcbmltcG9ydCB7c2V0QmFkZ2V9IGZyb20gXCIuL2Jyb3dzZXJBY3Rpb24uanNcIjtcclxuaW1wb3J0IHtwb3J0fSBmcm9tIFwiLi9tZXNzYWdpbmcuanNcIjtcclxuaW1wb3J0IHtQcmVmc30gZnJvbSBcIi4vcHJlZnMuanNcIjtcclxuXHJcbmNvbnN0IGJhZGdlQ29sb3IgPSBcIiM2NDY0NjRcIjtcclxuY29uc3QgYmFkZ2VSZWZyZXNoUmF0ZSA9IDQ7XHJcblxyXG5sZXQgZXZlbnRFbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5sZXQgYmxvY2tlZFBlclBhZ2UgPSBuZXcgZXh0LlBhZ2VNYXAoKTtcclxuXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBudW1iZXIgb2YgcmVxdWVzdHMgYmxvY2tlZCBvbiB0aGUgZ2l2ZW4gcGFnZS5cclxuICpcclxuICogQHBhcmFtICB7UGFnZX0gcGFnZVxyXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QmxvY2tlZFBlclBhZ2UocGFnZSlcclxue1xyXG4gIHJldHVybiBibG9ja2VkUGVyUGFnZS5nZXQocGFnZSkgfHwgMDtcclxufVxyXG5cclxubGV0IGFjdGl2ZVRhYklkcyA9IG5ldyBTZXQoKTtcclxubGV0IGFjdGl2ZVRhYklkQnlXaW5kb3dJZCA9IG5ldyBNYXAoKTtcclxuXHJcbmxldCBiYWRnZVVwZGF0ZVNjaGVkdWxlZCA9IGZhbHNlO1xyXG5cclxuZnVuY3Rpb24gdXBkYXRlQmFkZ2UodGFiSWQpXHJcbntcclxuICBpZiAoIVByZWZzLnNob3dfc3RhdHNpbmljb24pXHJcbiAgICByZXR1cm47XHJcblxyXG4gIGZvciAobGV0IGlkIG9mICh0eXBlb2YgdGFiSWQgPT0gXCJ1bmRlZmluZWRcIiA/IGFjdGl2ZVRhYklkcyA6IFt0YWJJZF0pKVxyXG4gIHtcclxuICAgIGxldCBwYWdlID0gbmV3IGV4dC5QYWdlKHtpZH0pO1xyXG4gICAgbGV0IGJsb2NrZWRDb3VudCA9IGJsb2NrZWRQZXJQYWdlLmdldChwYWdlKTtcclxuXHJcbiAgICBzZXRCYWRnZShwYWdlLmlkLCBibG9ja2VkQ291bnQgJiYge1xyXG4gICAgICBjb2xvcjogYmFkZ2VDb2xvcixcclxuICAgICAgbnVtYmVyOiBibG9ja2VkQ291bnRcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2NoZWR1bGVCYWRnZVVwZGF0ZSh0YWJJZClcclxue1xyXG4gIGlmICghYmFkZ2VVcGRhdGVTY2hlZHVsZWQgJiYgUHJlZnMuc2hvd19zdGF0c2luaWNvbiAmJlxyXG4gICAgICAodHlwZW9mIHRhYklkID09IFwidW5kZWZpbmVkXCIgfHwgYWN0aXZlVGFiSWRzLmhhcyh0YWJJZCkpKVxyXG4gIHtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4geyBiYWRnZVVwZGF0ZVNjaGVkdWxlZCA9IGZhbHNlOyB1cGRhdGVCYWRnZSgpOyB9LFxyXG4gICAgICAgICAgICAgICAxMDAwIC8gYmFkZ2VSZWZyZXNoUmF0ZSk7XHJcbiAgICBiYWRnZVVwZGF0ZVNjaGVkdWxlZCA9IHRydWU7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBPbmNlIG5hZ2l2YXRpb24gZm9yIHRoZSB0YWIgaGFzIGJlZW4gY29tbWl0dGVkIHRvIChlLmcuIGl0J3Mgbm8gbG9uZ2VyXHJcbi8vIGJlaW5nIHByZXJlbmRlcmVkKSB3ZSBjbGVhciBpdHMgYmFkZ2UsIG9yIGlmIHNvbWUgcmVxdWVzdHMgd2VyZSBhbHJlYWR5XHJcbi8vIGJsb2NrZWQgYmVmb3JlaGFuZCB3ZSBkaXNwbGF5IHRob3NlIG9uIHRoZSBiYWRnZSBub3cuXHJcbmJyb3dzZXIud2ViTmF2aWdhdGlvbi5vbkNvbW1pdHRlZC5hZGRMaXN0ZW5lcihkZXRhaWxzID0+XHJcbntcclxuICBpZiAoZGV0YWlscy5mcmFtZUlkID09IDApXHJcbiAgICB1cGRhdGVCYWRnZShkZXRhaWxzLnRhYklkKTtcclxufSk7XHJcblxyXG4vKipcclxuICogUmVjb3JkcyBhIGJsb2NrZWQgcmVxdWVzdC5cclxuICpcclxuICogQHBhcmFtIHtGaWx0ZXJ9IGZpbHRlclxyXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSB0YWJJZHNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWNvcmRCbG9ja2VkUmVxdWVzdChmaWx0ZXIsIHRhYklkcylcclxue1xyXG4gIGlmICghKGZpbHRlciBpbnN0YW5jZW9mIEJsb2NraW5nRmlsdGVyKSlcclxuICAgIHJldHVybjtcclxuXHJcbiAgZm9yIChsZXQgdGFiSWQgb2YgdGFiSWRzKVxyXG4gIHtcclxuICAgIGxldCBwYWdlID0gbmV3IGV4dC5QYWdlKHtpZDogdGFiSWR9KTtcclxuICAgIGxldCBibG9ja2VkID0gYmxvY2tlZFBlclBhZ2UuZ2V0KHBhZ2UpIHx8IDA7XHJcbiAgICArK2Jsb2NrZWQ7XHJcblxyXG4gICAgYmxvY2tlZFBlclBhZ2Uuc2V0KHBhZ2UsIGJsb2NrZWQpO1xyXG4gICAgc2NoZWR1bGVCYWRnZVVwZGF0ZSh0YWJJZCk7XHJcblxyXG4gICAgZXZlbnRFbWl0dGVyLmVtaXQoXCJibG9ja2VkX3Blcl9wYWdlXCIsIHt0YWJJZCwgYmxvY2tlZH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gRG9uJ3QgdXBkYXRlIHRoZSB0b3RhbCBmb3IgaW5jb2duaXRvIHRhYnMuXHJcbiAgbGV0IHRhYnMgPSBhd2FpdCBQcm9taXNlLmFsbCh0YWJJZHMubWFwKGlkID0+IGJyb3dzZXIudGFicy5nZXQoaWQpKSk7XHJcbiAgaWYgKHRhYnMuc29tZSh0YWIgPT4gdGFiLmluY29nbml0bykpXHJcbiAgICByZXR1cm47XHJcblxyXG4gIC8vIE1ha2Ugc3VyZSBibG9ja2VkX3RvdGFsIGlzIG9ubHkgcmVhZCBhZnRlciB0aGUgc3RvcmFnZSB3YXMgbG9hZGVkLlxyXG4gIGF3YWl0IFByZWZzLnVudGlsTG9hZGVkO1xyXG5cclxuICBQcmVmcy5ibG9ja2VkX3RvdGFsKys7XHJcbiAgZXZlbnRFbWl0dGVyLmVtaXQoXCJibG9ja2VkX3RvdGFsXCIsIFByZWZzLmJsb2NrZWRfdG90YWwpO1xyXG59XHJcblxyXG4vKipcclxuICAqIEBuYW1lc3BhY2VcclxuICAqIEBzdGF0aWNcclxuICAqL1xyXG5leHBvcnQgbGV0IFN0YXRzID0ge1xyXG4gIC8qKlxyXG4gICAqIEFkZHMgYSBjYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZVxyXG4gICAqIHZhbHVlIG9mIGEgc3BlY2lmaWVkIHN0YXQgY2hhbmdlZC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSAgIHN0YXRcclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xyXG4gICAqL1xyXG4gIG9uKHN0YXQsIGNhbGxiYWNrKVxyXG4gIHtcclxuICAgIGV2ZW50RW1pdHRlci5vbihzdGF0LCBjYWxsYmFjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyBhIGNhbGxiYWNrIGZvciB0aGUgc3BlY2lmaWVkIHN0YXQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gICBzdGF0XHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcclxuICAgKi9cclxuICBvZmYoc3RhdCwgY2FsbGJhY2spXHJcbiAge1xyXG4gICAgZXZlbnRFbWl0dGVyLm9mZihzdGF0LCBjYWxsYmFjayk7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIHRvdGFsIG51bWJlciBvZiBibG9ja2VkIHJlcXVlc3RzIG9uIG5vbi1pbmNvZ25pdG8gcGFnZXMuXHJcbiAgICpcclxuICAgKiBAdHlwZSB7bnVtYmVyfVxyXG4gICAqL1xyXG4gIGdldCBibG9ja2VkX3RvdGFsKClcclxuICB7XHJcbiAgICByZXR1cm4gUHJlZnMuYmxvY2tlZF90b3RhbDtcclxuICB9XHJcbn07XHJcblxyXG5QcmVmcy5vbihcInNob3dfc3RhdHNpbmljb25cIiwgYXN5bmMoKSA9PlxyXG57XHJcbiAgbGV0IHRhYnMgPSBhd2FpdCBicm93c2VyLnRhYnMucXVlcnkoe30pO1xyXG4gIGZvciAobGV0IHRhYiBvZiB0YWJzKVxyXG4gIHtcclxuICAgIGlmIChQcmVmcy5zaG93X3N0YXRzaW5pY29uKVxyXG4gICAgICB1cGRhdGVCYWRnZSh0YWIuaWQpO1xyXG4gICAgZWxzZVxyXG4gICAgICBzZXRCYWRnZSh0YWIuaWQsIG51bGwpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGJsb2NrZWQgcmVxdWVzdHMgZm9yIHRoZSBzZW5kZXIncyBwYWdlLlxyXG4gKlxyXG4gKiBAZXZlbnQgXCJzdGF0cy5nZXRCbG9ja2VkUGVyUGFnZVwiXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAqL1xyXG5wb3J0Lm9uKFwic3RhdHMuZ2V0QmxvY2tlZFBlclBhZ2VcIixcclxuICAgICAgICBtZXNzYWdlID0+IGdldEJsb2NrZWRQZXJQYWdlKG5ldyBleHQuUGFnZShtZXNzYWdlLnRhYikpKTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSB0b3RhbCBudW1iZXIgb2YgYmxvY2tlZCByZXF1ZXN0cyBvbiBub24taW5jb2duaXRvIHBhZ2VzLlxyXG4gKlxyXG4gKiBAZXZlbnQgXCJzdGF0cy5nZXRCbG9ja2VkVG90YWxcIlxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gKi9cclxucG9ydC5vbihcInN0YXRzLmdldEJsb2NrZWRUb3RhbFwiLCAoKSA9PiBTdGF0cy5ibG9ja2VkX3RvdGFsKTtcclxuXHJcbmJyb3dzZXIudGFicy5xdWVyeSh7YWN0aXZlOiB0cnVlfSkudGhlbih0YWJzID0+XHJcbntcclxuICBmb3IgKGxldCB0YWIgb2YgdGFicylcclxuICB7XHJcbiAgICBhY3RpdmVUYWJJZHMuYWRkKHRhYi5pZCk7XHJcbiAgICBhY3RpdmVUYWJJZEJ5V2luZG93SWQuc2V0KHRhYi53aW5kb3dJZCwgdGFiLmlkKTtcclxuICB9XHJcblxyXG4gIHNjaGVkdWxlQmFkZ2VVcGRhdGUoKTtcclxufSk7XHJcblxyXG5icm93c2VyLnRhYnMub25BY3RpdmF0ZWQuYWRkTGlzdGVuZXIodGFiID0+XHJcbntcclxuICBsZXQgbGFzdEFjdGl2ZVRhYklkID0gYWN0aXZlVGFiSWRCeVdpbmRvd0lkLmdldCh0YWIud2luZG93SWQpO1xyXG4gIGlmICh0eXBlb2YgbGFzdEFjdGl2ZVRhYklkICE9IFwidW5kZWZpbmVkXCIpXHJcbiAgICBhY3RpdmVUYWJJZHMuZGVsZXRlKGxhc3RBY3RpdmVUYWJJZCk7XHJcblxyXG4gIGFjdGl2ZVRhYklkcy5hZGQodGFiLnRhYklkKTtcclxuICBhY3RpdmVUYWJJZEJ5V2luZG93SWQuc2V0KHRhYi53aW5kb3dJZCwgdGFiLnRhYklkKTtcclxuXHJcbiAgc2NoZWR1bGVCYWRnZVVwZGF0ZSgpO1xyXG59KTtcclxuXHJcbmlmIChcIndpbmRvd3NcIiBpbiBicm93c2VyKVxyXG57XHJcbiAgYnJvd3Nlci53aW5kb3dzLm9uUmVtb3ZlZC5hZGRMaXN0ZW5lcih3aW5kb3dJZCA9PlxyXG4gIHtcclxuICAgIGFjdGl2ZVRhYklkcy5kZWxldGUoYWN0aXZlVGFiSWRCeVdpbmRvd0lkLmdldCh3aW5kb3dJZCkpO1xyXG4gICAgYWN0aXZlVGFiSWRCeVdpbmRvd0lkLmRlbGV0ZSh3aW5kb3dJZCk7XHJcbiAgfSk7XHJcbn1cclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlIGljb24gKi9cclxuXHJcbmltcG9ydCB7ZmlsdGVyTm90aWZpZXJ9IGZyb20gXCIuLi9hZGJsb2NrcGx1c2NvcmUvbGliL2ZpbHRlck5vdGlmaWVyLmpzXCI7XHJcbmltcG9ydCB7c2V0SWNvblBhdGgsIHNldEljb25JbWFnZURhdGEsIHRvZ2dsZUJhZGdlfSBmcm9tIFwiLi9icm93c2VyQWN0aW9uLmpzXCI7XHJcbmltcG9ydCAqIGFzIGluZm8gZnJvbSBcImluZm9cIjtcclxuXHJcbmNvbnN0IEFOSU1BVElPTl9MT09QUyA9IDM7XHJcbmNvbnN0IEZSQU1FX0lOX01TID0gMTAwO1xyXG5cclxubGV0IGZyYW1lT3BhY2l0aWVzID0gY2FsY3VsYXRlRnJhbWVPcGFjaXRpZXMoOSwgNyk7XHJcbmxldCBmcmFtZU9wYWNpdGllc0NyaXRpY2FsID0gY2FsY3VsYXRlRnJhbWVPcGFjaXRpZXMoNSwgMyk7XHJcblxyXG5sZXQgc3RvcFJlcXVlc3RlZCA9IGZhbHNlO1xyXG5sZXQgY2FuVXBkYXRlSWNvbiA9IHRydWU7XHJcbmxldCBub3RSdW5uaW5nID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbmxldCBhbGxvd2xpc3RlZFN0YXRlID0gbmV3IGV4dC5QYWdlTWFwKCk7XHJcblxyXG5sZXQgaWNvbnMgPSBbbnVsbCwgbnVsbF07XHJcblxyXG5mdW5jdGlvbiBlYXNlT3V0KHByb2dyZXNzKVxyXG57XHJcbiAgLy8gVGhpcyBpcyBtZXJlbHkgYW4gYXBwcm94aW1hdGlvbiB0byB0aGUgYnVpbHQtaW4gZWFzZS1vdXQgdGltaW5nIGZ1bmN0aW9uXHJcbiAgLy8gaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9lbXVsYXRpbmctY3NzLXRpbWluZy1mdW5jdGlvbnMtamF2YXNjcmlwdC9cclxuICByZXR1cm4gMSAtIE1hdGgucG93KDEgLSBwcm9ncmVzcywgMS42NzUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjYWxjdWxhdGVGcmFtZU9wYWNpdGllcyhrZXlmcmFtZUZyYW1lcywgdHJhbnNpdGlvbkZyYW1lcylcclxue1xyXG4gIGxldCBvcGFjaXRpZXMgPSBbXTtcclxuXHJcbiAgLy8gU2hvdyBzZWNvbmQgaGFsZiBvZiBmaXJzdCBrZXlmcmFtZVxyXG4gIC8vIE9taXQgZmlyc3QgZnJhbWUgYmVjYXVzZSBpdCdzIG9ubHkgc2hvd24gYWZ0ZXIgdGhlIGZpcnN0IHRpbWVvdXRcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGtleWZyYW1lRnJhbWVzIC8gMiAtIDE7IGkrKylcclxuICAgIG9wYWNpdGllcy5wdXNoKDApO1xyXG4gIC8vIFRyYW5zaXRpb24gZnJvbSBmaXJzdCB0byBzZWNvbmQga2V5ZnJhbWVcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYW5zaXRpb25GcmFtZXM7IGkrKylcclxuICAgIG9wYWNpdGllcy5wdXNoKGVhc2VPdXQoKGkgKyAxKSAvICh0cmFuc2l0aW9uRnJhbWVzICsgMSkpKTtcclxuICAvLyBTaG93IHNlY29uZCBrZXlmcmFtZVxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwga2V5ZnJhbWVGcmFtZXM7IGkrKylcclxuICAgIG9wYWNpdGllcy5wdXNoKDEpO1xyXG4gIC8vIFRyYW5zaXRpb24gZnJvbSBzZWNvbmQgdG8gZmlyc3Qga2V5ZnJhbWVcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYW5zaXRpb25GcmFtZXM7IGkrKylcclxuICAgIG9wYWNpdGllcy5wdXNoKGVhc2VPdXQoKHRyYW5zaXRpb25GcmFtZXMgLSBpKSAvICh0cmFuc2l0aW9uRnJhbWVzICsgMSkpKTtcclxuICAvLyBTaG93IGZpcnN0IGhhbGYgb2YgZmlyc3Qga2V5ZnJhbWVcclxuICAvLyBPbWl0IGxhc3QgZnJhbWUgZHVlIHRvIGFuIGFkZGl0aW9uYWwgdGltZW91dCB0aGF0IHJlc2V0cyB0aGUgaWNvblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwga2V5ZnJhbWVGcmFtZXMgLyAyIC0gMTsgaSsrKVxyXG4gICAgb3BhY2l0aWVzLnB1c2goMCk7XHJcblxyXG4gIHJldHVybiBvcGFjaXRpZXM7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRJbWFnZSh1cmwpXHJcbntcclxuICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xyXG4gIGxldCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xyXG4gIHJldHVybiBjcmVhdGVJbWFnZUJpdG1hcChibG9iKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gcmVuZGVySWNvbnMoKVxyXG57XHJcbiAgbGV0IHBhdGhzID0gW1xyXG4gICAgXCJpY29ucy9hYnAtMTYucG5nXCIsIFwiaWNvbnMvYWJwLTE2LWFsbG93bGlzdGVkLnBuZ1wiLFxyXG4gICAgXCJpY29ucy9hYnAtMzIucG5nXCIsIFwiaWNvbnMvYWJwLTMyLWFsbG93bGlzdGVkLnBuZ1wiXHJcbiAgXTtcclxuXHJcbiAgZm9yIChsZXQgcGF0aCBvZiBwYXRocylcclxuICB7XHJcbiAgICBsZXQgaW1hZ2UgPSBhd2FpdCBsb2FkSW1hZ2UocGF0aCk7XHJcbiAgICBsZXQgWywgc2l6ZSwgYWxsb3dsaXN0ZWRdID0gL1xcL2FicC0oMTZ8MzIpKC1hbGxvd2xpc3RlZCk/XFwuLy5leGVjKHBhdGgpO1xyXG5cclxuICAgIGxldCBjYW52YXMgPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHNpemUsIHNpemUpO1xyXG4gICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgbGV0IGltYWdlRGF0YSA9IGljb25zWyEhYWxsb3dsaXN0ZWQgfCAwXSB8fCB7fTtcclxuXHJcbiAgICBjb250ZXh0Lmdsb2JhbEFscGhhID0gMTtcclxuICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwKTtcclxuICAgIGltYWdlRGF0YVtzaXplXSA9IGNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIHNpemUsIHNpemUpO1xyXG5cclxuICAgIGljb25zWyEhYWxsb3dsaXN0ZWQgfCAwXSA9IGltYWdlRGF0YTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEljb24ocGFnZSwgb3BhY2l0eSwgZnJhbWVzKVxyXG57XHJcbiAgb3BhY2l0eSA9IG9wYWNpdHkgfHwgMDtcclxuICBsZXQgYWxsb3dsaXN0ZWQgPSAhIWFsbG93bGlzdGVkU3RhdGUuZ2V0KHBhZ2UpO1xyXG5cclxuICBpZiAoIWZyYW1lcylcclxuICB7XHJcbiAgICBpZiAob3BhY2l0eSA+IDAuNSlcclxuICAgIHtcclxuICAgICAgc2V0SWNvblBhdGgoXHJcbiAgICAgICAgcGFnZS5pZCxcclxuICAgICAgICBcIi9pY29ucy9hYnAtJHNpemUtbm90aWZpY2F0aW9uLnBuZ1wiXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpY29uc1thbGxvd2xpc3RlZCB8IDBdKVxyXG4gICAge1xyXG4gICAgICBzZXRJY29uSW1hZ2VEYXRhKHBhZ2UuaWQsIGljb25zW2FsbG93bGlzdGVkIHwgMF0pO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBzZXRJY29uUGF0aChcclxuICAgICAgICBwYWdlLmlkLFxyXG4gICAgICAgIFwiL2ljb25zL2FicC0kc2l6ZVwiICsgKGFsbG93bGlzdGVkID8gXCItYWxsb3dsaXN0ZWRcIiA6IFwiXCIpICsgXCIucG5nXCJcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIGJyb3dzZXIuYnJvd3NlckFjdGlvbi5zZXRJY29uKHtcclxuICAgICAgdGFiSWQ6IHBhZ2UuaWQsXHJcbiAgICAgIGltYWdlRGF0YTogZnJhbWVzW1wiXCIgKyBvcGFjaXR5ICsgYWxsb3dsaXN0ZWRdXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmZpbHRlck5vdGlmaWVyLm9uKFwicGFnZS5BbGxvd2xpc3RpbmdTdGF0ZVJldmFsaWRhdGVcIiwgKHBhZ2UsIGZpbHRlcikgPT5cclxue1xyXG4gIGFsbG93bGlzdGVkU3RhdGUuc2V0KHBhZ2UsICEhZmlsdGVyKTtcclxuICBpZiAoY2FuVXBkYXRlSWNvbilcclxuICAgIHNldEljb24ocGFnZSk7XHJcbn0pO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gcmVuZGVyRnJhbWVzKG9wYWNpdGllcylcclxue1xyXG4gIGxldCBpbWFnZXMgPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICBsb2FkSW1hZ2UoXCJpY29ucy9hYnAtMTYucG5nXCIpLFxyXG4gICAgbG9hZEltYWdlKFwiaWNvbnMvYWJwLTE2LWFsbG93bGlzdGVkLnBuZ1wiKSxcclxuICAgIGxvYWRJbWFnZShcImljb25zL2FicC0xNi1ub3RpZmljYXRpb24ucG5nXCIpLFxyXG4gICAgbG9hZEltYWdlKFwiaWNvbnMvYWJwLTIwLnBuZ1wiKSxcclxuICAgIGxvYWRJbWFnZShcImljb25zL2FicC0yMC1hbGxvd2xpc3RlZC5wbmdcIiksXHJcbiAgICBsb2FkSW1hZ2UoXCJpY29ucy9hYnAtMjAtbm90aWZpY2F0aW9uLnBuZ1wiKSxcclxuICAgIGxvYWRJbWFnZShcImljb25zL2FicC0zMi5wbmdcIiksXHJcbiAgICBsb2FkSW1hZ2UoXCJpY29ucy9hYnAtMzItYWxsb3dsaXN0ZWQucG5nXCIpLFxyXG4gICAgbG9hZEltYWdlKFwiaWNvbnMvYWJwLTMyLW5vdGlmaWNhdGlvbi5wbmdcIiksXHJcbiAgICBsb2FkSW1hZ2UoXCJpY29ucy9hYnAtNDAucG5nXCIpLFxyXG4gICAgbG9hZEltYWdlKFwiaWNvbnMvYWJwLTQwLWFsbG93bGlzdGVkLnBuZ1wiKSxcclxuICAgIGxvYWRJbWFnZShcImljb25zL2FicC00MC1ub3RpZmljYXRpb24ucG5nXCIpXHJcbiAgXSk7XHJcblxyXG4gIG9wYWNpdGllcyA9IG5ldyBTZXQob3BhY2l0aWVzKTtcclxuICBsZXQgaW1hZ2VNYXAgPSB7XHJcbiAgICAxNjoge2Jhc2U6IFtpbWFnZXNbMF0sIGltYWdlc1sxXV0sIG92ZXJsYXk6IGltYWdlc1syXX0sXHJcbiAgICAyMDoge2Jhc2U6IFtpbWFnZXNbM10sIGltYWdlc1s0XV0sIG92ZXJsYXk6IGltYWdlc1s1XX0sXHJcbiAgICAzMjoge2Jhc2U6IFtpbWFnZXNbNl0sIGltYWdlc1s3XV0sIG92ZXJsYXk6IGltYWdlc1s4XX0sXHJcbiAgICA0MDoge2Jhc2U6IFtpbWFnZXNbOV0sIGltYWdlc1sxMF1dLCBvdmVybGF5OiBpbWFnZXNbMTFdfVxyXG4gIH07XHJcblxyXG4gIGxldCBmcmFtZXMgPSB7fTtcclxuICBsZXQgY2FudmFzID0gbmV3IE9mZnNjcmVlbkNhbnZhcygwLCAwKTtcclxuICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcblxyXG4gIGZvciAobGV0IGFsbG93bGlzdGVkIG9mIFtmYWxzZSwgdHJ1ZV0pXHJcbiAge1xyXG4gICAgZm9yIChsZXQgb3BhY2l0eSBvZiBvcGFjaXRpZXMpXHJcbiAgICB7XHJcbiAgICAgIGxldCBpbWFnZURhdGEgPSB7fTtcclxuICAgICAgbGV0IHNpemVzID0gWzE2LCAyMCwgMzIsIDQwXTtcclxuICAgICAgZm9yIChsZXQgc2l6ZSBvZiBzaXplcylcclxuICAgICAge1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemU7XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemU7XHJcbiAgICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IDE7XHJcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2VNYXBbc2l6ZV1bXCJiYXNlXCJdW2FsbG93bGlzdGVkIHwgMF0sIDAsIDApO1xyXG4gICAgICAgIGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBvcGFjaXR5O1xyXG4gICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlTWFwW3NpemVdW1wib3ZlcmxheVwiXSwgMCwgMCk7XHJcbiAgICAgICAgaW1hZ2VEYXRhW3NpemVdID0gY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgc2l6ZSwgc2l6ZSk7XHJcbiAgICAgIH1cclxuICAgICAgZnJhbWVzW1wiXCIgKyBvcGFjaXR5ICsgYWxsb3dsaXN0ZWRdID0gaW1hZ2VEYXRhO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGZyYW1lcztcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gYW5pbWF0ZUljb24ob3BhY2l0aWVzLCBmcmFtZXMpXHJcbntcclxuICBsZXQgdGFicyA9IGF3YWl0IGJyb3dzZXIudGFicy5xdWVyeSh7YWN0aXZlOiB0cnVlfSk7XHJcbiAgbGV0IHBhZ2VzID0gdGFicy5tYXAodGFiID0+IG5ldyBleHQuUGFnZSh0YWIpKTtcclxuXHJcbiAgbGV0IGFuaW1hdGlvbkxvb3AgPSAwO1xyXG4gIGxldCBhbmltYXRpb25TdGVwID0gMDtcclxuICBsZXQgbnVtYmVyT2ZGcmFtZXMgPSBvcGFjaXRpZXMubGVuZ3RoO1xyXG4gIGxldCBvcGFjaXR5ID0gMDtcclxuXHJcbiAgbGV0IG9uQWN0aXZhdGVkID0gcGFnZSA9PlxyXG4gIHtcclxuICAgIHBhZ2VzLnB1c2gocGFnZSk7XHJcbiAgICBzZXRJY29uKHBhZ2UsIG9wYWNpdHksIGZyYW1lcyk7XHJcbiAgICB0b2dnbGVCYWRnZShwYWdlLmlkLCB0cnVlKTtcclxuICB9O1xyXG4gIGV4dC5wYWdlcy5vbkFjdGl2YXRlZC5hZGRMaXN0ZW5lcihvbkFjdGl2YXRlZCk7XHJcblxyXG4gIGNhblVwZGF0ZUljb24gPSBmYWxzZTtcclxuICBmb3IgKGxldCBwYWdlIG9mIHBhZ2VzKVxyXG4gICAgdG9nZ2xlQmFkZ2UocGFnZS5pZCwgdHJ1ZSk7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+XHJcbiAge1xyXG4gICAgbGV0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT5cclxuICAgIHtcclxuICAgICAgbGV0IG9sZE9wYWNpdHkgPSBvcGFjaXR5O1xyXG4gICAgICBvcGFjaXR5ID0gb3BhY2l0aWVzW2FuaW1hdGlvblN0ZXArK107XHJcblxyXG4gICAgICBpZiAob3BhY2l0eSAhPSBvbGRPcGFjaXR5KVxyXG4gICAgICB7XHJcbiAgICAgICAgZm9yIChsZXQgcGFnZSBvZiBwYWdlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAoYWxsb3dsaXN0ZWRTdGF0ZS5oYXMocGFnZSkpXHJcbiAgICAgICAgICAgIHNldEljb24ocGFnZSwgb3BhY2l0eSwgZnJhbWVzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChhbmltYXRpb25TdGVwID4gbnVtYmVyT2ZGcmFtZXMpXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAoKythbmltYXRpb25Mb29wID4gQU5JTUFUSU9OX0xPT1BTIC0gMSB8fCBzdG9wUmVxdWVzdGVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xyXG4gICAgICAgICAgZXh0LnBhZ2VzLm9uQWN0aXZhdGVkLnJlbW92ZUxpc3RlbmVyKG9uQWN0aXZhdGVkKTtcclxuICAgICAgICAgIGZvciAobGV0IHBhZ2Ugb2YgcGFnZXMpXHJcbiAgICAgICAgICAgIHRvZ2dsZUJhZGdlKHBhZ2UuaWQsIGZhbHNlKTtcclxuICAgICAgICAgIGNhblVwZGF0ZUljb24gPSB0cnVlO1xyXG4gICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgYW5pbWF0aW9uU3RlcCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LCBGUkFNRV9JTl9NUyk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdG9wcyB0byBhbmltYXRlIHRoZSBicm93c2VyIGFjdGlvbiBpY29uXHJcbiAqIGFmdGVyIHRoZSBjdXJyZW50IGludGVydmFsIGhhcyBiZWVuIGZpbmlzaGVkLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHtQcm9taXNlfSBBIHByb21pc2UgdGhhdCBpcyBmdWxsZmlsbGVkIHdoZW5cclxuICogICAgICAgICAgICAgICAgICAgdGhlIGljb24gYW5pbWF0aW9uIGhhcyBiZWVuIHN0b3BwZWQuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RvcEljb25BbmltYXRpb24oKVxyXG57XHJcbiAgc3RvcFJlcXVlc3RlZCA9IHRydWU7XHJcbiAgYXdhaXQgbm90UnVubmluZztcclxuICBzdG9wUmVxdWVzdGVkID0gZmFsc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdGFydHMgdG8gYW5pbWF0ZSB0aGUgYnJvd3NlciBhY3Rpb24gaWNvbiB0byBpbmRpY2F0ZSBhIHBlbmRpbmcgbm90aWZjYXRpb24uXHJcbiAqIElmIHRoZSBpY29uIGlzIGFscmVhZHkgYW5pbWF0ZWQsIGl0IHJlcGxhY2VzIHRoZSBwcmV2aW91c1xyXG4gKiBhbmltYXRpb24gYXMgc29vbiBhcyB0aGUgY3VycmVudCBpbnRlcnZhbCBoYXMgYmVlbiBmaW5pc2hlZC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgIFRoZSBub3RpZmljYXRpb24gdHlwZSAoaS5lOiBcImluZm9ybWF0aW9uXCIgb3JcclxuICogICAgICAgICAgICAgICAgICAgICAgIFwiY3JpdGljYWxcIi4pXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRJY29uQW5pbWF0aW9uKHR5cGUpXHJcbntcclxuICBsZXQgb3BhY2l0aWVzID0gZnJhbWVPcGFjaXRpZXM7XHJcbiAgaWYgKHR5cGUgPT0gXCJjcml0aWNhbFwiKVxyXG4gICAgb3BhY2l0aWVzID0gZnJhbWVPcGFjaXRpZXNDcml0aWNhbDtcclxuXHJcbiAgbm90UnVubmluZyA9IFByb21pc2UuYWxsKFtyZW5kZXJGcmFtZXMob3BhY2l0aWVzKSwgc3RvcEljb25BbmltYXRpb24oKV0pXHJcbiAgICAudGhlbihyZXN1bHRzID0+XHJcbiAgICB7XHJcbiAgICAgIGlmIChzdG9wUmVxdWVzdGVkKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIGxldCBmcmFtZXMgPSByZXN1bHRzWzBdO1xyXG4gICAgICByZXR1cm4gYW5pbWF0ZUljb24ob3BhY2l0aWVzLCBmcmFtZXMpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG4vLyBQcmUtcmVuZGVyIGljb25zIG9uIENocm9taXVtICgjNzI1MykuXHJcbmlmIChpbmZvLnBsYXRmb3JtID09IFwiY2hyb21pdW1cIilcclxuICByZW5kZXJJY29ucygpO1xyXG4iLCIvKlxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBBZGJsb2NrIFBsdXMgPGh0dHBzOi8vYWRibG9ja3BsdXMub3JnLz4sXHJcbiAqIENvcHlyaWdodCAoQykgMjAwNi1wcmVzZW50IGV5ZW8gR21iSFxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBhc1xyXG4gKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICpcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCBBZGJsb2NrIFBsdXMuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqL1xyXG5cclxuLyoqIEBtb2R1bGUgb3B0aW9ucyAqL1xyXG5cclxuaW1wb3J0IHtjaGVja0FsbG93bGlzdGVkfSBmcm9tIFwiLi9hbGxvd2xpc3RpbmcuanNcIjtcclxuaW1wb3J0ICogYXMgaW5mbyBmcm9tIFwiaW5mb1wiO1xyXG5pbXBvcnQge3BvcnR9IGZyb20gXCIuL21lc3NhZ2luZy5qc1wiO1xyXG5cclxuY29uc3Qgb3B0aW9uc1VybCA9IGJyb3dzZXIucnVudGltZS5nZXRNYW5pZmVzdCgpLm9wdGlvbnNfdWkucGFnZTtcclxuXHJcbmNvbnN0IG9wZW5PcHRpb25zUGFnZUFQSVN1cHBvcnRlZCA9IChcclxuICAvLyBTb21lIHZlcnNpb25zIG9mIEZpcmVmb3ggZm9yIEFuZHJvaWQgYmVmb3JlIHZlcnNpb24gNTcgZG8gaGF2ZSBhXHJcbiAgLy8gcnVudGltZS5vcGVuT3B0aW9uc1BhZ2UgYnV0IGl0IGRvZXNuJ3QgZG8gYW55dGhpbmcuXHJcbiAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM2NDk0NVxyXG4gIChpbmZvLmFwcGxpY2F0aW9uICE9IFwiZmVubmVjXCIgfHxcclxuICAgcGFyc2VJbnQoaW5mby5hcHBsaWNhdGlvblZlcnNpb24sIDEwKSA+PSA1NylcclxuKTtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGZpbmRPcHRpb25zUGFnZSgpXHJcbntcclxuICBsZXQgdGFicyA9IGF3YWl0IGJyb3dzZXIudGFicy5xdWVyeSh7fSk7XHJcbiAgLy8gRmlyZWZveCB3b24ndCBsZXQgdXMgcXVlcnkgZm9yIG1vei1leHRlbnNpb246Ly8gcGFnZXMsIHRob3VnaFxyXG4gIC8vIHN0YXJ0aW5nIHdpdGggRmlyZWZveCA1NiBhbiBleHRlbnNpb24gY2FuIHF1ZXJ5IGZvciBpdHMgb3duIFVSTHM6XHJcbiAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTI3MTM1NFxyXG4gIGxldCBmdWxsT3B0aW9uc1VybCA9IGJyb3dzZXIucnVudGltZS5nZXRVUkwob3B0aW9uc1VybCk7XHJcbiAgbGV0IG9wdGlvbnNUYWIgPSB0YWJzLmZpbmQodGFiID0+IHRhYi51cmwgPT0gZnVsbE9wdGlvbnNVcmwpO1xyXG4gIGlmIChvcHRpb25zVGFiKVxyXG4gICAgcmV0dXJuIG9wdGlvbnNUYWI7XHJcblxyXG4gIC8vIE5ld2x5IGNyZWF0ZWQgdGFicyBtaWdodCBoYXZlIGFib3V0OmJsYW5rIGFzIHRoZWlyIFVSTCBpbiBGaXJlZm94IG9yXHJcbiAgLy8gYW4gZW1wdHkgc3RyaW5nIG9uIENocm9tZSAoODApIHJhdGhlciB0aGFuIHRoZSBmaW5hbCBvcHRpb25zIHBhZ2UgVVJMLFxyXG4gIC8vIHdlIG5lZWQgdG8gd2FpdCBmb3IgdGhvc2UgdG8gZmluaXNoIGxvYWRpbmcuXHJcbiAgbGV0IHBvdGVudGlhbE9wdGlvblRhYklkcyA9IG5ldyBTZXQoXHJcbiAgICB0YWJzLmZpbHRlcih0YWIgPT4gKHRhYi51cmwgPT0gXCJhYm91dDpibGFua1wiIHx8ICF0YWIudXJsKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgIHRhYi5zdGF0dXMgPT0gXCJsb2FkaW5nXCIpLm1hcCh0YWIgPT4gdGFiLmlkKVxyXG4gICk7XHJcbiAgaWYgKHBvdGVudGlhbE9wdGlvblRhYklkcy5zaXplID09IDApXHJcbiAgICByZXR1cm47XHJcblxyXG4gIGxldCByZW1vdmVMaXN0ZW5lcjtcclxuICBsZXQgdXBkYXRlTGlzdGVuZXIgPSAodGFiSWQsIGNoYW5nZUluZm8sIHRhYikgPT5cclxuICB7XHJcbiAgICBpZiAocG90ZW50aWFsT3B0aW9uVGFiSWRzLmhhcyh0YWJJZCkgJiZcclxuICAgICAgICBjaGFuZ2VJbmZvLnN0YXR1cyA9PSBcImNvbXBsZXRlXCIpXHJcbiAgICB7XHJcbiAgICAgIHBvdGVudGlhbE9wdGlvblRhYklkcy5kZWxldGUodGFiSWQpO1xyXG4gICAgICBsZXQgdXJsTWF0Y2ggPSB0YWIudXJsID09IGZ1bGxPcHRpb25zVXJsO1xyXG4gICAgICBpZiAodXJsTWF0Y2ggfHwgcG90ZW50aWFsT3B0aW9uVGFiSWRzLnNpemUgPT0gMClcclxuICAgICAge1xyXG4gICAgICAgIGJyb3dzZXIudGFicy5vblVwZGF0ZWQucmVtb3ZlTGlzdGVuZXIodXBkYXRlTGlzdGVuZXIpO1xyXG4gICAgICAgIGJyb3dzZXIudGFicy5vblJlbW92ZWQucmVtb3ZlTGlzdGVuZXIocmVtb3ZlTGlzdGVuZXIpO1xyXG4gICAgICAgIHJldHVybiB1cmxNYXRjaCA/IHRhYiA6IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG4gIGJyb3dzZXIudGFicy5vblVwZGF0ZWQuYWRkTGlzdGVuZXIodXBkYXRlTGlzdGVuZXIpO1xyXG4gIHJlbW92ZUxpc3RlbmVyID0gcmVtb3ZlZFRhYklkID0+XHJcbiAge1xyXG4gICAgcG90ZW50aWFsT3B0aW9uVGFiSWRzLmRlbGV0ZShyZW1vdmVkVGFiSWQpO1xyXG4gICAgaWYgKHBvdGVudGlhbE9wdGlvblRhYklkcy5zaXplID09IDApXHJcbiAgICB7XHJcbiAgICAgIGJyb3dzZXIudGFicy5vblVwZGF0ZWQucmVtb3ZlTGlzdGVuZXIodXBkYXRlTGlzdGVuZXIpO1xyXG4gICAgICBicm93c2VyLnRhYnMub25SZW1vdmVkLnJlbW92ZUxpc3RlbmVyKHJlbW92ZUxpc3RlbmVyKTtcclxuICAgIH1cclxuICB9O1xyXG4gIGJyb3dzZXIudGFicy5vblJlbW92ZWQuYWRkTGlzdGVuZXIocmVtb3ZlTGlzdGVuZXIpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBvcGVuT3B0aW9uc1BhZ2UoKVxyXG57XHJcbiAgbGV0IG9wZW5lZCA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT5cclxuICB7XHJcbiAgICBmdW5jdGlvbiBvbk1lc3NhZ2UobWVzc2FnZSwgb3B0aW9uc1BvcnQpXHJcbiAgICB7XHJcbiAgICAgIGlmIChtZXNzYWdlLnR5cGUgIT0gXCJhcHAubGlzdGVuXCIpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICBvcHRpb25zUG9ydC5vbk1lc3NhZ2UucmVtb3ZlTGlzdGVuZXIob25NZXNzYWdlKTtcclxuICAgICAgcmVzb2x2ZShbb3B0aW9uc1BvcnQuc2VuZGVyLnRhYiwgb3B0aW9uc1BvcnRdKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBvbkNvbm5lY3Qob3B0aW9uc1BvcnQpXHJcbiAgICB7XHJcbiAgICAgIGlmIChvcHRpb25zUG9ydC5uYW1lICE9IFwidWlcIilcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIGJyb3dzZXIucnVudGltZS5vbkNvbm5lY3QucmVtb3ZlTGlzdGVuZXIob25Db25uZWN0KTtcclxuICAgICAgb3B0aW9uc1BvcnQub25NZXNzYWdlLmFkZExpc3RlbmVyKG9uTWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgYnJvd3Nlci5ydW50aW1lLm9uQ29ubmVjdC5hZGRMaXN0ZW5lcihvbkNvbm5lY3QpO1xyXG4gIH0pO1xyXG5cclxuICBpZiAob3Blbk9wdGlvbnNQYWdlQVBJU3VwcG9ydGVkKVxyXG4gICAgYXdhaXQgYnJvd3Nlci5ydW50aW1lLm9wZW5PcHRpb25zUGFnZSgpO1xyXG4gIGVsc2VcclxuICAgIGF3YWl0IGJyb3dzZXIudGFicy5jcmVhdGUoe3VybDogb3B0aW9uc1VybH0pO1xyXG5cclxuICByZXR1cm4gb3BlbmVkO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBmb2N1c09wdGlvbnNQYWdlKHRhYilcclxue1xyXG4gIGlmIChvcGVuT3B0aW9uc1BhZ2VBUElTdXBwb3J0ZWQpXHJcbiAgICByZXR1cm4gYnJvd3Nlci5ydW50aW1lLm9wZW5PcHRpb25zUGFnZSgpO1xyXG5cclxuICBsZXQgZm9jdXNUYWIgPSAoKSA9PiBicm93c2VyLnRhYnMudXBkYXRlKHRhYi5pZCwge2FjdGl2ZTogdHJ1ZX0pO1xyXG5cclxuICBpZiAoXCJ3aW5kb3dzXCIgaW4gYnJvd3NlcilcclxuICB7XHJcbiAgICBhd2FpdCBicm93c2VyLndpbmRvd3MudXBkYXRlKHRhYi53aW5kb3dJZCwge2ZvY3VzZWQ6IHRydWV9KTtcclxuICAgIHJldHVybiBmb2N1c1RhYigpO1xyXG4gIH1cclxuXHJcbiAgLy8gRmlyZWZveCBmb3IgQW5kcm9pZCBiZWZvcmUgdmVyc2lvbiA1NyBkb2VzIG5vdCBzdXBwb3J0XHJcbiAgLy8gcnVudGltZS5vcGVuT3B0aW9uc1BhZ2UsIG5vciBkb2VzIGl0IHN1cHBvcnQgdGhlIHdpbmRvd3MgQVBJLlxyXG4gIC8vIFNpbmNlIHRoZXJlIGlzIGVmZmVjdGl2ZWx5IG9ubHkgb25lIHdpbmRvdyBvbiB0aGUgbW9iaWxlIGJyb3dzZXIsXHJcbiAgLy8gd2UgY2FuIGp1c3QgYnJpbmcgdGhlIHRhYiB0byBmb2N1cyBpbnN0ZWFkLlxyXG4gIHJldHVybiBmb2N1c1RhYigpO1xyXG59XHJcblxyXG4vKipcclxuICogT3BlbnMgdGhlIG9wdGlvbnMgcGFnZSwgb3Igc3dpdGNoZXMgdG8gaXRzIGV4aXN0aW5nIHRhYi5cclxuICogQHJldHVybnMge1Byb21pc2UuPEFycmF5Pn1cclxuICogICBQcm9taXNlIHJlc29sdmluZyB0byBhbiBBcnJheSBjb250YWluZyB0aGUgdGFiIE9iamVjdCBvZiB0aGUgb3B0aW9ucyBwYWdlXHJcbiAqICAgYW5kIHNvbWV0aW1lcyAod2hlbiB0aGUgcGFnZSB3YXMganVzdCBvcGVuZWQpIGEgbWVzc2FnaW5nIHBvcnQuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2hvd09wdGlvbnMoKVxyXG57XHJcbiAgbGV0IGV4aXN0aW5nVGFiID0gYXdhaXQgZmluZE9wdGlvbnNQYWdlKCk7XHJcbiAgaWYgKGV4aXN0aW5nVGFiKVxyXG4gICAgcmV0dXJuIGZvY3VzT3B0aW9uc1BhZ2UoZXhpc3RpbmdUYWIpO1xyXG4gIHJldHVybiBvcGVuT3B0aW9uc1BhZ2UoKTtcclxufVxyXG5cclxuLy8gV2UgbmVlZCB0byBjbGVhciB0aGUgcG9wdXAgVVJMIG9uIEZpcmVmb3ggZm9yIEFuZHJvaWQgaW4gb3JkZXIgZm9yIHRoZVxyXG4vLyBvcHRpb25zIHBhZ2UgdG8gb3BlbiBpbnN0ZWFkIG9mIHRoZSBidWJibGUuIFVuZm9ydHVuYXRlbHkgdGhlcmUncyBhIGJ1Z1sxXVxyXG4vLyB3aGljaCBwcmV2ZW50cyB1cyBmcm9tIGRvaW5nIHRoYXQsIHNvIHdlIG11c3QgYXZvaWQgc2V0dGluZyB0aGUgVVJMIG9uXHJcbi8vIEZpcmVmb3ggZnJvbSB0aGUgbWFuaWZlc3QgYXQgYWxsLCBpbnN0ZWFkIHNldHRpbmcgaXQgaGVyZSBvbmx5IGZvclxyXG4vLyBub24tbW9iaWxlLlxyXG4vLyBbMV0gLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDE0NjEzXHJcblByb21pc2UuYWxsKFticm93c2VyLmJyb3dzZXJBY3Rpb24uZ2V0UG9wdXAoe30pLFxyXG4gICAgICAgICAgICAgYnJvd3Nlci5ydW50aW1lLmdldFBsYXRmb3JtSW5mbygpXSkudGhlbihcclxuICAoW3BvcHVwLCBwbGF0Zm9ybUluZm9dKSA9PlxyXG4gIHtcclxuICAgIGlmICghcG9wdXAgJiYgcGxhdGZvcm1JbmZvLm9zICE9IFwiYW5kcm9pZFwiKVxyXG4gICAgICBicm93c2VyLmJyb3dzZXJBY3Rpb24uc2V0UG9wdXAoe3BvcHVwOiBcInBvcHVwLmh0bWxcIn0pO1xyXG4gIH1cclxuKTtcclxuXHJcbi8vIE9uIEZpcmVmb3ggZm9yIEFuZHJvaWQsIG9wZW4gdGhlIG9wdGlvbnMgcGFnZSBkaXJlY3RseSB3aGVuIHRoZSBicm93c2VyXHJcbi8vIGFjdGlvbiBpcyBjbGlja2VkLlxyXG5icm93c2VyLmJyb3dzZXJBY3Rpb24ub25DbGlja2VkLmFkZExpc3RlbmVyKGFzeW5jKCkgPT5cclxue1xyXG4gIGxldCBbdGFiXSA9IGF3YWl0IGJyb3dzZXIudGFicy5xdWVyeSh7YWN0aXZlOiB0cnVlfSk7XHJcbiAgbGV0IGN1cnJlbnRQYWdlID0gbmV3IGV4dC5QYWdlKHRhYik7XHJcblxyXG4gIGxldCBbLCBvcHRpb25zUG9ydF0gPSBhd2FpdCBzaG93T3B0aW9ucygpO1xyXG4gIGlmICghL15odHRwcz86JC8udGVzdChjdXJyZW50UGFnZS51cmwucHJvdG9jb2wpKVxyXG4gICAgcmV0dXJuO1xyXG5cclxuICBvcHRpb25zUG9ydC5wb3N0TWVzc2FnZSh7XHJcbiAgICB0eXBlOiBcImFwcC5yZXNwb25kXCIsXHJcbiAgICBhY3Rpb246IFwic2hvd1BhZ2VPcHRpb25zXCIsXHJcbiAgICBhcmdzOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBob3N0OiBjdXJyZW50UGFnZS51cmwuaG9zdG5hbWUucmVwbGFjZSgvXnd3d1xcLi8sIFwiXCIpLFxyXG4gICAgICAgIHdoaXRlbGlzdGVkOiAhIWNoZWNrQWxsb3dsaXN0ZWQoY3VycmVudFBhZ2UpXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9KTtcclxufSk7XHJcblxyXG4vKipcclxuICogT3BlbnMgdGhlIG9wdGlvbnMgcGFnZSBpbiBhIG5ldyB0YWIgYW5kIHdhaXRzIGZvciBpdCB0byBsb2FkLCBvciBzd2l0Y2hlcyB0b1xyXG4gKiB0aGUgZXhpc3RpbmcgdGFiIGlmIHRoZSBvcHRpb25zIHBhZ2UgaXMgYWxyZWFkeSBvcGVuLlxyXG4gKlxyXG4gKiBAZXZlbnQgXCJvcHRpb25zLm9wZW5cIlxyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBvcHRpb25zVGFiXHJcbiAqL1xyXG5wb3J0Lm9uKFwib3B0aW9ucy5vcGVuXCIsIGFzeW5jKG1lc3NhZ2UsIHNlbmRlcikgPT5cclxue1xyXG4gIGxldCBbb3B0aW9uc1RhYl0gPSBhd2FpdCBzaG93T3B0aW9ucygpO1xyXG4gIHJldHVybiBvcHRpb25zVGFiO1xyXG59KTtcclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlIG5vdGlmaWNhdGlvbkhlbHBlciAqL1xyXG5cclxuaW1wb3J0IHtzdGFydEljb25BbmltYXRpb24sIHN0b3BJY29uQW5pbWF0aW9ufSBmcm9tIFwiLi9pY29uLmpzXCI7XHJcbmltcG9ydCAqIGFzIGluZm8gZnJvbSBcImluZm9cIjtcclxuaW1wb3J0IHtwb3J0fSBmcm9tIFwiLi9tZXNzYWdpbmcuanNcIjtcclxuaW1wb3J0IHtQcmVmc30gZnJvbSBcIi4vcHJlZnMuanNcIjtcclxuaW1wb3J0IHtTdGF0c30gZnJvbSBcIi4vc3RhdHMuanNcIjtcclxuaW1wb3J0IHtub3RpZmljYXRpb25zfSBmcm9tIFwiLi4vYWRibG9ja3BsdXNjb3JlL2xpYi9ub3RpZmljYXRpb25zLmpzXCI7XHJcbmltcG9ydCB7aW5pdERheTFOb3RpZmljYXRpb259IGZyb20gXCIuLi8uLi9saWIvbm90aWZpY2F0aW9ucy5qc1wiO1xyXG5pbXBvcnQge3Nob3dPcHRpb25zfSBmcm9tIFwiLi9vcHRpb25zLmpzXCI7XHJcblxyXG5jb25zdCBkaXNwbGF5TWV0aG9kcyA9IG5ldyBNYXAoW1xyXG4gIFtcImNyaXRpY2FsXCIsIFtcImljb25cIiwgXCJub3RpZmljYXRpb25cIiwgXCJwb3B1cFwiXV0sXHJcbiAgW1wibmV3dGFiXCIsIFtcIm5ld3RhYlwiXV0sXHJcbiAgW1wibm9ybWFsXCIsIFtcIm5vdGlmaWNhdGlvblwiXV0sXHJcbiAgW1wicmVsZW50bGVzc1wiLCBbXCJub3RpZmljYXRpb25cIl1dLFxyXG4gIFtcImluZm9ybWF0aW9uXCIsIFtcImljb25cIiwgXCJwb3B1cFwiXV1cclxuXSk7XHJcbmNvbnN0IGRlZmF1bHREaXNwbGF5TWV0aG9kcyA9IFtcInBvcHVwXCJdO1xyXG5cclxuY29uc3QgbGlua1BsYWNlaG9sZGVycyA9IFtcclxuICBbXCJMQU5HXCIsICgpID0+IGJyb3dzZXIuaTE4bi5nZXRVSUxhbmd1YWdlKCkucmVwbGFjZShcIi1cIiwgXCJfXCIpXSxcclxuICBbXCJBRERPTl9OQU1FXCIsICgpID0+IGluZm8uYWRkb25OYW1lXSxcclxuICBbXCJBRERPTl9WRVJTSU9OXCIsICgpID0+IGluZm8uYWRkb25WZXJzaW9uXSxcclxuICBbXCJBUFBMSUNBVElPTl9OQU1FXCIsICgpID0+IGluZm8uYXBwbGljYXRpb25dLFxyXG4gIFtcIkFQUExJQ0FUSU9OX1ZFUlNJT05cIiwgKCkgPT4gaW5mby5hcHBsaWNhdGlvblZlcnNpb25dLFxyXG4gIFtcIlBMQVRGT1JNX05BTUVcIiwgKCkgPT4gaW5mby5wbGF0Zm9ybV0sXHJcbiAgW1wiUExBVEZPUk1fVkVSU0lPTlwiLCAoKSA9PiBpbmZvLnBsYXRmb3JtVmVyc2lvbl1cclxuXTtcclxuXHJcbi8vIFdlIG11c3QgaGFyZCBjb2RlIGFueSBcImFicDpcIiBwcmVmaXhlZCBub3RpZmljYXRpb24gbGlua3MgaGVyZSwgb3RoZXJ3aXNlXHJcbi8vIG5vdGlmaWNhdGlvbnMgbGlua2luZyB0byB0aGVtIHdpbGwgbm90IGJlIGRpc3BsYXllZCBhdCBhbGwuXHJcbmNvbnN0IGxvY2FsTm90aWZpY2F0aW9uUGFnZXMgPSBuZXcgTWFwKFtcclxuICBbXCJhYnA6ZGF5MVwiLCBcIi9kYXkxLmh0bWxcIl0sXHJcbiAgW1wiYWJwOnByb2JsZW1cIiwgXCIvcHJvYmxlbS5odG1sXCJdLFxyXG4gIFtcImFicDp1cGRhdGVzXCIsIFwiL3VwZGF0ZXMuaHRtbFwiXVxyXG5dKTtcclxuXHJcbi8vIFRoZSBhY3RpdmUgbm90aWZpY2F0aW9uIGlzIChpZiBhbnkpIHRoZSBtb3N0IHJlY2VudCBjdXJyZW50bHkgZGlzcGxheWVkXHJcbi8vIG5vdGlmaWNhdGlvbi4gT25jZSBhIG5vdGlmaWNhdGlvbiBpcyBjbGlja2VkIG9yIGlzIHN1cGVyY2VlZGVkIGJ5IGFub3RoZXJcclxuLy8gbm90aWZpY2F0aW9uIHdlIG5vIGxvbmdlciBjb25zaWRlciBpdCBhY3RpdmUuXHJcbmxldCBhY3RpdmVOb3RpZmljYXRpb24gPSBudWxsO1xyXG5cclxuLy8gV2UgYW5pbWF0ZSB0aGUgQUJQIGljb24gd2hpbGUgc29tZSBraW5kcyBvZiBub3RpZmljYXRpb25zIGFyZSBhY3RpdmUsIHRvIGhlbHBcclxuLy8gY2F0Y2ggdGhlIHVzZXIncyBhdHRlbnRpb24uXHJcbmxldCBub3RpZmljYXRpb25JY29uQW5pbWF0aW9uUGxheWluZyA9IGZhbHNlO1xyXG5cclxuLy8gV2hlbiBhIG5vdGlmaWNhdGlvbiBidXR0b24gaXMgY2xpY2tlZCB3ZSBuZWVkIHRvIGxvb2sgdXAgd2hhdCBzaG91bGQgaGFwcGVuLlxyXG4vLyBUaGlzIGNhbiBiZSBib3RoIGZvciB0aGUgYWN0aXZlIG5vdGlmaWNhdGlvbiwgYW5kIGFsc28gZm9yIG5vdGlmaWNhdGlvbnNcclxuLy8gc3Rhc2hlZCBpbiB0aGUgbm90aWZpY2F0aW9uIGNlbnRlci5cclxubGV0IGJ1dHRvbnNCeU5vdGlmaWNhdGlvbklkID0gbmV3IE1hcCgpO1xyXG5cclxuLy8gT3BlcmEgPCA1NyBhbmQgRmlyZWZveCAodGVzdGVkIHVwIHRvIDY4LjAuMSkgZG8gbm90IHN1cHBvcnQgbm90aWZpY2F0aW9uc1xyXG4vLyBiZWluZyBjcmVhdGVkIHdpdGggYnV0dG9ucy4gT3BlcmEgYWRkZWQgYnV0dG9uIHN1cHBvcnQgd2l0aCA+PSA1NywgaG93ZXZlclxyXG4vLyB0aGUgYnV0dG9uIGNsaWNrIGhhbmRsZXJzIGhhdmUgYnJva2VuIHdpdGggPj0gNjAgKHRlc3RlZCB1cCB0byA2MikuIFVudGlsXHJcbi8vIE9wZXJhIGZpeGVzIHRoYXQgYnVnIChyZWZlcmVuY2UgRE5BV0laLTcwMzMyKSB3ZSB1bmZvcnR1bmF0ZWx5IGNhbid0IHVzZVxyXG4vLyBmZWF0dXJlIGRldGVjdGlvbiB3aGVuIGRlY2lkaW5nIGlmIG5vdGlmaWNhdGlvbiBidXR0b25zIHNob3VsZCBiZSBkaXNwbGF5ZWQuXHJcbmNvbnN0IGJyb3dzZXJOb3RpZmljYXRpb25CdXR0b25zU3VwcG9ydGVkID0gaW5mby5wbGF0Zm9ybSA9PSBcImNocm9taXVtXCIgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmFwcGxpY2F0aW9uICE9IFwib3BlcmFcIjtcclxuXHJcbi8vIEFzIG9mIEF1Z3VzdCAyMDE5LCBvbmx5IENocm9tZSBzdXBwb3J0cyB0aGlzIGZsYWcgYW5kLCBzaW5jZSBGaXJlZm94XHJcbi8vIHRocm93cyBvbiB1bnN1cHBvcnRlZCBvcHRpb25zICh0ZXN0ZWQgd2l0aCB2ZXJzaW9uIDY5KSwgd2UgbmVlZCB0b1xyXG4vLyBleHBsaWNpdGx5IHNldCBpdCBvbmx5IGZvciBzdXBwb3J0ZWQgYnJvd3NlcnMuXHJcbmNvbnN0IGJyb3dzZXJOb3RpZmljYXRpb25SZXF1aXJlSW50ZXJhY3Rpb25TdXBwb3J0ZWQgPSAoXHJcbiAgaW5mby5wbGF0Zm9ybSA9PSBcImNocm9taXVtXCIgJiYgcGFyc2VJbnQoaW5mby5wbGF0Zm9ybVZlcnNpb24sIDEwKSA+PSA1MFxyXG4pO1xyXG5cclxubm90aWZpY2F0aW9ucy5sb2NhbGUgPSBicm93c2VyLmkxOG4uZ2V0VUlMYW5ndWFnZSgpO1xyXG5cclxuZnVuY3Rpb24gbWF0Y2hlc0Rpc3BsYXlNZXRob2QobWV0aG9kLCB7dHlwZX0pXHJcbntcclxuICBsZXQgbWV0aG9kcyA9IGRpc3BsYXlNZXRob2RzLmdldCh0eXBlKSB8fCBkZWZhdWx0RGlzcGxheU1ldGhvZHM7XHJcbiAgcmV0dXJuIG1ldGhvZHMuaW5jbHVkZXMobWV0aG9kKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGxheU5vdGlmaWNhdGlvbkljb25BbmltYXRpb24obm90aWZpY2F0aW9uKVxyXG57XHJcbiAgaWYgKG1hdGNoZXNEaXNwbGF5TWV0aG9kKFwiaWNvblwiLCBub3RpZmljYXRpb24pKVxyXG4gIHtcclxuICAgIHN0YXJ0SWNvbkFuaW1hdGlvbihub3RpZmljYXRpb24udHlwZSk7XHJcbiAgICBub3RpZmljYXRpb25JY29uQW5pbWF0aW9uUGxheWluZyA9IHRydWU7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXROb3RpZmljYXRpb25CdXR0b25zKHt0eXBlOiBub3RpZmljYXRpb25UeXBlLCBsaW5rc30sIG1lc3NhZ2UpXHJcbntcclxuICBsZXQgYnV0dG9ucyA9IFtdO1xyXG4gIGxldCBsaW5rQ291bnQgPSAwO1xyXG4gIGxldCByZWdleCA9IC88YT4oLio/KTxcXC9hPi9nO1xyXG4gIGxldCBtYXRjaDtcclxuICB3aGlsZSAobWF0Y2ggPSByZWdleC5leGVjKG1lc3NhZ2UpKVxyXG4gIHtcclxuICAgIGJ1dHRvbnMucHVzaCh7XHJcbiAgICAgIHR5cGU6IFwibGlua1wiLFxyXG4gICAgICB0aXRsZTogbWF0Y2hbMV0sXHJcbiAgICAgIGxpbms6IGxpbmtzW2xpbmtDb3VudCsrXVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBXZSBhbGxvdyB0aGUgdXNlciB0byBkaXNhYmxlIG5vbi1lc3NlbnRpYWwgbm90aWZpY2F0aW9ucywgYW5kIHdlIGFkZCBhXHJcbiAgLy8gYnV0dG9uIHRvIHRob3NlIG5vdGlmaWNhdGlvbnMgdG8gbWFrZSB0aGF0IGVhc2llciB0byBkby5cclxuICBsZXQgYWRkQ29uZmlndXJlQnV0dG9uID0gaXNPcHRpb25hbChub3RpZmljYXRpb25UeXBlKTtcclxuXHJcbiAgLy8gQ2hyb21lIG9ubHkgYWxsb3dzIHR3byBub3RpZmljYXRpb24gYnV0dG9ucyBzbyB3ZSBuZWVkIHRvIGZhbGwgYmFja1xyXG4gIC8vIHRvIGEgc2luZ2xlIGJ1dHRvbiB0byBvcGVuIGFsbCBsaW5rcyBpZiB0aGVyZSBhcmUgbW9yZSB0aGFuIHR3by5cclxuICBsZXQgbWF4QnV0dG9ucyA9IGFkZENvbmZpZ3VyZUJ1dHRvbiA/IDEgOiAyO1xyXG4gIGlmIChidXR0b25zLmxlbmd0aCA+IG1heEJ1dHRvbnMpXHJcbiAge1xyXG4gICAgYnV0dG9ucyA9IFtcclxuICAgICAge1xyXG4gICAgICAgIHR5cGU6IFwib3Blbi1hbGxcIixcclxuICAgICAgICB0aXRsZTogYnJvd3Nlci5pMThuLmdldE1lc3NhZ2UoXCJub3RpZmljYXRpb25fb3Blbl9hbGxcIiksXHJcbiAgICAgICAgbGlua3NcclxuICAgICAgfVxyXG4gICAgXTtcclxuICB9XHJcbiAgaWYgKGFkZENvbmZpZ3VyZUJ1dHRvbilcclxuICB7XHJcbiAgICBidXR0b25zLnB1c2goe1xyXG4gICAgICB0eXBlOiBcImNvbmZpZ3VyZVwiLFxyXG4gICAgICB0aXRsZTogYnJvd3Nlci5pMThuLmdldE1lc3NhZ2UoXCJub3RpZmljYXRpb25fY29uZmlndXJlXCIpXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBidXR0b25zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuTm90aWZpY2F0aW9uTGluayhsaW5rKVxyXG57XHJcbiAgbGV0IHVybDtcclxuXHJcbiAgaWYgKGxpbmsuc3RhcnRzV2l0aChcImFicDpcIikpXHJcbiAgICB1cmwgPSBsb2NhbE5vdGlmaWNhdGlvblBhZ2VzLmdldChsaW5rKTtcclxuICBlbHNlXHJcbiAgICB1cmwgPSBQcmVmcy5nZXREb2NMaW5rKGxpbmspO1xyXG5cclxuICBicm93c2VyLnRhYnMuY3JlYXRlKHt1cmx9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0QnV0dG9uTGlua3MoYnV0dG9ucylcclxue1xyXG4gIGxldCBsaW5rcyA9IFtdO1xyXG5cclxuICBmb3IgKGxldCBidXR0b24gb2YgYnV0dG9ucylcclxuICB7XHJcbiAgICBpZiAoYnV0dG9uLnR5cGUgPT0gXCJsaW5rXCIgJiYgYnV0dG9uLmxpbmspXHJcbiAgICAgIGxpbmtzLnB1c2goYnV0dG9uLmxpbmspO1xyXG4gICAgZWxzZSBpZiAoYnV0dG9uLnR5cGUgPT0gXCJvcGVuLWFsbFwiICYmIGJ1dHRvbi5saW5rcylcclxuICAgICAgbGlua3MgPSBsaW5rcy5jb25jYXQoYnV0dG9uLmxpbmtzKTtcclxuICB9XHJcbiAgcmV0dXJuIGxpbmtzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuTm90aWZpY2F0aW9uTGlua3Mobm90aWZpY2F0aW9uSWQpXHJcbntcclxuICBsZXQgYnV0dG9ucyA9IGJ1dHRvbnNCeU5vdGlmaWNhdGlvbklkLmdldChub3RpZmljYXRpb25JZCkgfHwgW107XHJcbiAgZm9yIChsZXQgbGluayBvZiBnZXRCdXR0b25MaW5rcyhidXR0b25zKSlcclxuICAgIG9wZW5Ob3RpZmljYXRpb25MaW5rKGxpbmspO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBub3RpZmljYXRpb25CdXR0b25DbGljayhub3RpZmljYXRpb25JZCwgYnV0dG9uSW5kZXgpXHJcbntcclxuICBsZXQgYnV0dG9ucyA9IGJ1dHRvbnNCeU5vdGlmaWNhdGlvbklkLmdldChub3RpZmljYXRpb25JZCk7XHJcblxyXG4gIGlmICghKGJ1dHRvbnMgJiYgYnV0dG9uSW5kZXggaW4gYnV0dG9ucykpXHJcbiAgICByZXR1cm47XHJcblxyXG4gIGxldCBidXR0b24gPSBidXR0b25zW2J1dHRvbkluZGV4XTtcclxuXHJcbiAgc3dpdGNoIChidXR0b24udHlwZSlcclxuICB7XHJcbiAgICBjYXNlIFwibGlua1wiOlxyXG4gICAgICBvcGVuTm90aWZpY2F0aW9uTGluayhidXR0b24ubGluayk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcIm9wZW4tYWxsXCI6XHJcbiAgICAgIG9wZW5Ob3RpZmljYXRpb25MaW5rcyhub3RpZmljYXRpb25JZCk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBcImNvbmZpZ3VyZVwiOlxyXG4gICAgICBsZXQgWywgb3B0aW9uc1BvcnRdID0gYXdhaXQgc2hvd09wdGlvbnMoKTtcclxuICAgICAgb3B0aW9uc1BvcnQucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgIHR5cGU6IFwiYXBwLnJlc3BvbmRcIixcclxuICAgICAgICBhY3Rpb246IFwiZm9jdXNTZWN0aW9uXCIsXHJcbiAgICAgICAgYXJnczogW1wibm90aWZpY2F0aW9uc1wiXVxyXG4gICAgICB9KTtcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogVGlkeSB1cCBhZnRlciBhIG5vdGlmaWNhdGlvbiBoYXMgYmVlbiBkaXNtaXNzZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBub3RpZmljYXRpb25JZFxyXG4gKiBAcGFyYW0ge2Jvb2x9IHN0YXNoZWRJbk5vdGlmaWNhdGlvbkNlbnRlclxyXG4gKiAgIElmIHRoZSBnaXZlbiBub3RpZmljYXRpb24gaXMgKG9yIG1pZ2h0IGJlKSBzdGFzaGVkIGluIHRoZSBub3RpZmljYXRpb25cclxuICogICBjZW50ZXIsIHdlIG11c3QgdGFrZSBjYXJlIHRvIHJlbWVtYmVyIHdoYXQgaXRzIGJ1dHRvbnMgZG8uIExlYXZlIGFzIHRydWVcclxuICogICB1bmxlc3MgeW91J3JlIHN1cmUhXHJcbiAqL1xyXG5mdW5jdGlvbiBub3RpZmljYXRpb25EaXNtaXNzZWQobm90aWZpY2F0aW9uSWQsIHN0YXNoZWRJbk5vdGlmaWNhdGlvbkNlbnRlcilcclxue1xyXG4gIGlmIChhY3RpdmVOb3RpZmljYXRpb24gJiYgYWN0aXZlTm90aWZpY2F0aW9uLmlkID09IG5vdGlmaWNhdGlvbklkKVxyXG4gIHtcclxuICAgIGFjdGl2ZU5vdGlmaWNhdGlvbiA9IG51bGw7XHJcblxyXG4gICAgaWYgKG5vdGlmaWNhdGlvbkljb25BbmltYXRpb25QbGF5aW5nKVxyXG4gICAge1xyXG4gICAgICBzdG9wSWNvbkFuaW1hdGlvbigpO1xyXG4gICAgICBub3RpZmljYXRpb25JY29uQW5pbWF0aW9uUGxheWluZyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKCFzdGFzaGVkSW5Ob3RpZmljYXRpb25DZW50ZXIpXHJcbiAgICBidXR0b25zQnlOb3RpZmljYXRpb25JZC5kZWxldGUobm90aWZpY2F0aW9uSWQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuTm90aWZpY2F0aW9uSW5OZXdUYWIobm90aWZpY2F0aW9uKVxyXG57XHJcbiAgbGV0IHRhYklkcyA9IG5ldyBTZXQoKTtcclxuICBsZXQgW3VybF0gPSBub3RpZmljYXRpb24ubGlua3M7XHJcbiAgZm9yIChsZXQgW2tleSwgZ2V0VmFsdWVdIG9mIGxpbmtQbGFjZWhvbGRlcnMpXHJcbiAgICB1cmwgPSB1cmwucmVwbGFjZShgJSR7a2V5fSVgLCBlbmNvZGVVUklDb21wb25lbnQoZ2V0VmFsdWUoKSkpO1xyXG5cclxuICBmdW5jdGlvbiBvcGVuTm90aWZpY2F0aW9uVGFiKClcclxuICB7XHJcbiAgICBicm93c2VyLnRhYnMub25DcmVhdGVkLnJlbW92ZUxpc3RlbmVyKG9uQ3JlYXRlZCk7XHJcbiAgICBicm93c2VyLnRhYnMub25SZW1vdmVkLnJlbW92ZUxpc3RlbmVyKG9uUmVtb3ZlZCk7XHJcbiAgICBicm93c2VyLnRhYnMub25VcGRhdGVkLnJlbW92ZUxpc3RlbmVyKG9uVXBkYXRlZCk7XHJcblxyXG4gICAgYnJvd3Nlci50YWJzLmNyZWF0ZSh7dXJsfSk7XHJcbiAgICBub3RpZmljYXRpb25zLm1hcmtBc1Nob3duKG5vdGlmaWNhdGlvbi5pZCk7XHJcbiAgfVxyXG5cclxuICBsZXQgb25DcmVhdGVkID0gdGFiID0+XHJcbiAge1xyXG4gICAgLy8gRmlyZWZveCBsb2FkcyBpdHMgTmV3IFRhYiBQYWdlIGltbWVkaWF0ZWx5IGFuZCBkb2Vzbid0IG5vdGlmeSB1c1xyXG4gICAgLy8gd2hlbiBpdCdzIGNvbXBsZXRlIHNvIHdlIG5lZWQgdG8gb3BlbiBvdXIgbmV3IHRhYiBhbHJlYWR5IGhlcmUuXHJcbiAgICBpZiAodGFiLnVybCA9PSBcImFib3V0Om5ld3RhYlwiKVxyXG4gICAge1xyXG4gICAgICBvcGVuTm90aWZpY2F0aW9uVGFiKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0YWJJZHMuYWRkKHRhYi5pZCk7XHJcbiAgfTtcclxuXHJcbiAgbGV0IG9uUmVtb3ZlZCA9IHRhYklkID0+XHJcbiAge1xyXG4gICAgdGFiSWRzLmRlbGV0ZSh0YWJJZCk7XHJcbiAgfTtcclxuXHJcbiAgbGV0IG9uVXBkYXRlZCA9ICh0YWJJZCwgY2hhbmdlSW5mbywgdGFiKSA9PlxyXG4gIHtcclxuICAgIC8vIE9ubHkgbG9vayBhdCB0YWJzIHRoYXQgaGF2ZSBiZWVuIG9wZW5lZCBzaW5jZSB3ZSBzdGFydGVkIGxpc3RlbmluZ1xyXG4gICAgLy8gYW5kIHRoYXQgaGF2ZSBjb21wbGV0ZWQgbG9hZGluZy5cclxuICAgIGlmICghdGFiSWRzLmhhcyh0YWJJZCkgfHwgIShcInN0YXR1c1wiIGluIGNoYW5nZUluZm8pIHx8XHJcbiAgICAgICAgY2hhbmdlSW5mby5zdGF0dXMgIT0gXCJjb21wbGV0ZVwiKVxyXG4gICAgICByZXR1cm47XHJcblxyXG4gICAgdGFiSWRzLmRlbGV0ZSh0YWJJZCk7XHJcblxyXG4gICAgLy8gT3BlbiBvdXIgb3duIG5ldyB0YWIgb25seSB3aGVuIGEgbmV3IHRhYiBnZXRzIG9wZW5lZFxyXG4gICAgLy8gdGhhdCBpc24ndCBwYXJ0IG9mIHRoZSB1c2VyIGJyb3dzaW5nIHRoZSB3ZWIuXHJcbiAgICBpZiAoL15odHRwcz86Ly50ZXN0KHRhYi51cmwpKVxyXG4gICAgICByZXR1cm47XHJcblxyXG4gICAgb3Blbk5vdGlmaWNhdGlvblRhYigpO1xyXG4gIH07XHJcblxyXG4gIGJyb3dzZXIudGFicy5vbkNyZWF0ZWQuYWRkTGlzdGVuZXIob25DcmVhdGVkKTtcclxuICBicm93c2VyLnRhYnMub25SZW1vdmVkLmFkZExpc3RlbmVyKG9uUmVtb3ZlZCk7XHJcbiAgYnJvd3Nlci50YWJzLm9uVXBkYXRlZC5hZGRMaXN0ZW5lcihvblVwZGF0ZWQpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBzaG93Tm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbilcclxue1xyXG4gIGlmIChhY3RpdmVOb3RpZmljYXRpb24gJiYgYWN0aXZlTm90aWZpY2F0aW9uLmlkID09IG5vdGlmaWNhdGlvbi5pZClcclxuICAgIHJldHVybjtcclxuXHJcbiAgbGV0IHRleHRzID0gbm90aWZpY2F0aW9ucy5nZXRMb2NhbGl6ZWRUZXh0cyhub3RpZmljYXRpb24pO1xyXG4gIGxldCBidXR0b25zID0gZ2V0Tm90aWZpY2F0aW9uQnV0dG9ucyhub3RpZmljYXRpb24sIHRleHRzLm1lc3NhZ2UpO1xyXG5cclxuICAvLyBEb24ndCBkaXNwbGF5IG5vdGlmaWNhdGlvbnMgYXQgYWxsIGlmIHRoZXkgY29udGFpbiBhIGxpbmsgdG8gYSBsb2NhbFxyXG4gIC8vIG5vdGlmaWNhdGlvbiBwYWdlIHdoaWNoIHdlIGRvbid0IGhhdmUuXHJcbiAgZm9yIChsZXQgbGluayBvZiBnZXRCdXR0b25MaW5rcyhidXR0b25zKSlcclxuICB7XHJcbiAgICBpZiAobGluay5zdGFydHNXaXRoKFwiYWJwOlwiKSAmJiAhbG9jYWxOb3RpZmljYXRpb25QYWdlcy5oYXMobGluaykpXHJcbiAgICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIC8vIFdlIHRha2UgYSBub3RlIG9mIHRoZSBub3RpZmljYXRpb24ncyBidXR0b25zIGV2ZW4gaWYgbm90aWZpY2F0aW9uIGJ1dHRvbnNcclxuICAvLyBhcmUgbm90IHN1cHBvcnRlZCBieSB0aGlzIGJyb3dzZXIuIFRoYXQgd2F5LCBpZiB0aGUgdXNlciBjbGlja3MgdGhlXHJcbiAgLy8gKGJ1dHRvbmxlc3MpIG5vdGlmaWNhdGlvbiB3ZSBjYW4gc3RpbGwgb3BlbiBhbGwgdGhlIGxpbmtzLlxyXG4gIGJ1dHRvbnNCeU5vdGlmaWNhdGlvbklkLnNldChub3RpZmljYXRpb24uaWQsIGJ1dHRvbnMpO1xyXG5cclxuICBhY3RpdmVOb3RpZmljYXRpb24gPSBub3RpZmljYXRpb247XHJcbiAgaWYgKG1hdGNoZXNEaXNwbGF5TWV0aG9kKFwibm90aWZpY2F0aW9uXCIsIG5vdGlmaWNhdGlvbikpXHJcbiAge1xyXG4gICAgbGV0IG5vdGlmaWNhdGlvblRpdGxlID0gdGV4dHMudGl0bGUgfHwgXCJcIjtcclxuICAgIGxldCBtZXNzYWdlID0gKHRleHRzLm1lc3NhZ2UgfHwgXCJcIikucmVwbGFjZSgvPFxcLz8oYXxzdHJvbmcpPi9nLCBcIlwiKTtcclxuICAgIGxldCBpY29uVXJsID0gYnJvd3Nlci5ydW50aW1lLmdldFVSTChcImljb25zL2xvZ28vYWJwLTEyOC5wbmdcIik7XHJcblxyXG4gICAgbGV0IG5vdGlmaWNhdGlvbk9wdGlvbnMgPSB7XHJcbiAgICAgIHR5cGU6IFwiYmFzaWNcIixcclxuICAgICAgdGl0bGU6IG5vdGlmaWNhdGlvblRpdGxlLFxyXG4gICAgICBpY29uVXJsLFxyXG4gICAgICBtZXNzYWdlLFxyXG4gICAgICAvLyBXZSB1c2UgdGhlIGhpZ2hlc3QgcHJpb3JpdHkgdG8gcHJldmVudCB0aGUgbm90aWZpY2F0aW9uXHJcbiAgICAgIC8vIGZyb20gY2xvc2luZyBhdXRvbWF0aWNhbGx5LCBmb3IgYnJvd3NlcnMgdGhhdCBkb24ndCBzdXBwb3J0IHRoZVxyXG4gICAgICAvLyByZXF1aXJlSW50ZXJhY3Rpb24gZmxhZy5cclxuICAgICAgcHJpb3JpdHk6IDJcclxuICAgIH07XHJcblxyXG4gICAgaWYgKGJyb3dzZXJOb3RpZmljYXRpb25CdXR0b25zU3VwcG9ydGVkKVxyXG4gICAgICBub3RpZmljYXRpb25PcHRpb25zLmJ1dHRvbnMgPSBidXR0b25zLm1hcCgoe3RpdGxlfSkgPT4gKHt0aXRsZX0pKTtcclxuXHJcbiAgICBpZiAoYnJvd3Nlck5vdGlmaWNhdGlvblJlcXVpcmVJbnRlcmFjdGlvblN1cHBvcnRlZClcclxuICAgICAgbm90aWZpY2F0aW9uT3B0aW9ucy5yZXF1aXJlSW50ZXJhY3Rpb24gPSB0cnVlO1xyXG5cclxuICAgIGJyb3dzZXIubm90aWZpY2F0aW9ucy5jcmVhdGUobm90aWZpY2F0aW9uLmlkLCBub3RpZmljYXRpb25PcHRpb25zKTtcclxuICB9XHJcblxyXG4gIHBsYXlOb3RpZmljYXRpb25JY29uQW5pbWF0aW9uKG5vdGlmaWNhdGlvbik7XHJcblxyXG4gIC8vIFVubGlrZSBvdGhlciBub3RpZmljYXRpb25zLCB3ZSBjYW5ub3QgbWFyayBuZXd0YWItdHlwZSBub3RpZmljYXRpb25zXHJcbiAgLy8gYXMgc2hvd24gcmlnaHQgYXdheSBiZWNhdXNlIHRoZXkncmUgbm90IHNob3duIGltbWVkaWF0ZWx5LlxyXG4gIGlmIChtYXRjaGVzRGlzcGxheU1ldGhvZChcIm5ld3RhYlwiLCBub3RpZmljYXRpb24pKVxyXG4gIHtcclxuICAgIGxldCB7aW5zdGFsbFR5cGV9ID0gYXdhaXQgYnJvd3Nlci5tYW5hZ2VtZW50LmdldFNlbGYoKTtcclxuICAgIC8vIE5ld3RhYiBub3RpZmljYXRpb25zIGNhbiBiZSBxdWl0ZSBvYnRydXNpdmUgYW5kIG1hbmFnZWQgdXNlcnMgbWF5XHJcbiAgICAvLyBzZWUgdGhlbSBtb3JlIGZyZXF1ZW50bHkgdGhhbiBvdGhlcnMgc28gd2Ugc2hvdWxkbid0IHNob3cgc3VjaFxyXG4gICAgLy8gbm90aWZpY2F0aW9ucyB0byB0aGVtLlxyXG4gICAgaWYgKGluc3RhbGxUeXBlID09IFwiYWRtaW5cIilcclxuICAgIHtcclxuICAgICAgbm90aWZpY2F0aW9ucy5tYXJrQXNTaG93bihub3RpZmljYXRpb24uaWQpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgb3Blbk5vdGlmaWNhdGlvbkluTmV3VGFiKG5vdGlmaWNhdGlvbik7XHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICBub3RpZmljYXRpb25zLm1hcmtBc1Nob3duKG5vdGlmaWNhdGlvbi5pZCk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZXMgdGhlIG5vdGlmaWNhdGlvbiBzeXN0ZW0uXHJcbiAqXHJcbiAqIEBwYXJhbSB7Ym9vbH0gZmlyc3RSdW5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0Tm90aWZpY2F0aW9ucyhmaXJzdFJ1bilcclxue1xyXG4gIGxldCBvbkNsaWNrID0gYXN5bmMobm90aWZpY2F0aW9uSWQsIGJ1dHRvbkluZGV4KSA9PlxyXG4gIHtcclxuICAgIGlmICh0eXBlb2YgYnV0dG9uSW5kZXggPT0gXCJudW1iZXJcIilcclxuICAgICAgYXdhaXQgbm90aWZpY2F0aW9uQnV0dG9uQ2xpY2sobm90aWZpY2F0aW9uSWQsIGJ1dHRvbkluZGV4KTtcclxuICAgIGVsc2UgaWYgKCFicm93c2VyTm90aWZpY2F0aW9uQnV0dG9uc1N1cHBvcnRlZClcclxuICAgICAgb3Blbk5vdGlmaWNhdGlvbkxpbmtzKG5vdGlmaWNhdGlvbklkKTtcclxuXHJcbiAgICAvLyBDaHJvbWUgaGlkZXMgbm90aWZpY2F0aW9ucyBpbiB0aGUgbm90aWZpY2F0aW9uIGNlbnRlciB3aGVuIGNsaWNrZWQsXHJcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIGNsZWFyIHRoZW0uXHJcbiAgICBicm93c2VyLm5vdGlmaWNhdGlvbnMuY2xlYXIobm90aWZpY2F0aW9uSWQpO1xyXG5cclxuICAgIC8vIEJ1dCBvbkNsb3NlZCBpc24ndCB0cmlnZ2VyZWQgd2hlbiB3ZSBjbGVhciB0aGUgbm90aWZpY2F0aW9uLCBzbyB3ZSBuZWVkXHJcbiAgICAvLyB0byB0YWtlIGNhcmUgdG8gY2xlYXIgb3VyIHJlY29yZCBvZiBpdCBoZXJlIHRvby5cclxuICAgIG5vdGlmaWNhdGlvbkRpc21pc3NlZChub3RpZmljYXRpb25JZCwgZmFsc2UpO1xyXG4gIH07XHJcbiAgYnJvd3Nlci5ub3RpZmljYXRpb25zLm9uQnV0dG9uQ2xpY2tlZC5hZGRMaXN0ZW5lcihvbkNsaWNrKTtcclxuICBicm93c2VyLm5vdGlmaWNhdGlvbnMub25DbGlja2VkLmFkZExpc3RlbmVyKG9uQ2xpY2spO1xyXG5cclxuICBsZXQgb25DbG9zZWQgPSAobm90aWZpY2F0aW9uSWQsIGJ5VXNlcikgPT5cclxuICB7XHJcbiAgICAvLyBEZXNwaXRlIHVzaW5nIHRoZSBoaWdoZXN0IHByaW9yaXR5IGZvciBvdXIgbm90aWZpY2F0aW9ucywgV2luZG93cyAxMFxyXG4gICAgLy8gd2lsbCBzdGlsbCBoaWRlIHRoZW0gYWZ0ZXIgYSBmZXcgc2Vjb25kcyBhbmQgc3Rhc2ggdGhlbSBpbiB0aGVcclxuICAgIC8vIG5vdGlmaWNhdGlvbiBjZW50ZXIuIFdlIHN0aWxsIGNvbnNpZGVyIHRoZSBub3RpZmljYXRpb24gYWN0aXZlIHdoZW5cclxuICAgIC8vIHRoaXMgaGFwcGVucywgaW4gb3JkZXIgdG8gY29udGludWUgYW5pbWF0aW5nIHRoZSBBQlAgaWNvbiBhbmQvb3JcclxuICAgIC8vIGRpc3BsYXlpbmcgdGhlIG5vdGlmaWNhdGlvbiBkZXRhaWxzIGluIG91ciBwb3B1cCB3aW5kb3cuXHJcbiAgICAvLyBOb3RlOiBFdmVuIGlmIHRoZSBub3RpZmljYXRpb24gd2FzIGNsb3NlZCBieSB0aGUgdXNlciwgaXQgc3RpbGwgbWlnaHRcclxuICAgIC8vICAgICAgIGJlIHN0YXNoZWQgaW4gdGhlIG5vdGlmaWNhdGlvbiBjZW50ZXIuXHJcbiAgICBpZiAoYnlVc2VyKVxyXG4gICAgICBub3RpZmljYXRpb25EaXNtaXNzZWQobm90aWZpY2F0aW9uSWQsIHRydWUpO1xyXG4gIH07XHJcbiAgYnJvd3Nlci5ub3RpZmljYXRpb25zLm9uQ2xvc2VkLmFkZExpc3RlbmVyKG9uQ2xvc2VkKTtcclxuXHJcbiAgbm90aWZpY2F0aW9ucy5zdGFydCgpO1xyXG5cclxuICBpZiAoZmlyc3RSdW4pXHJcbiAgICBpbml0RGF5MU5vdGlmaWNhdGlvbigpO1xyXG59XHJcblxyXG4vKipcclxuICogSWYgdGhlIGdpdmVuIG5vdGlmaWNhdGlvbiB0eXBlIGlzIG9mIHZpdGFsIGltcG9ydGFuY2UgcmV0dXJuIGZhbHNlLFxyXG4gKiB0cnVlIG90aGVyd2lzZS5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IG5vdGlmaWNhdGlvblR5cGVcclxuICogQHJldHVybiB7Ym9vbGVhbn1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc09wdGlvbmFsKG5vdGlmaWNhdGlvblR5cGUpXHJcbntcclxuICByZXR1cm4gIVtcImNyaXRpY2FsXCIsIFwicmVsZW50bGVzc1wiXS5pbmNsdWRlcyhub3RpZmljYXRpb25UeXBlKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNlbnQgd2hlbiBhIHBvcHVwIG5vdGlmaWNhdGlvbiBpcyBjbGlja2VkLiBJZiBsaW5rIGlzIHNwZWNpZmllZCwgdGhhdCBpc1xyXG4gKiBvcGVuZWQsIG90aGVyd2lzZSB0aGUgbm90aWZpY2F0aW9uIGlzIGRpc21pc3NlZC5cclxuICpcclxuICogQGV2ZW50IFwibm90aWZpY2F0aW9ucy5jbGlja2VkXCJcclxuICogQHByb3BlcnR5IHtudW1iZXJ9IGlkIC0gSUQgb2YgdGhlIGNsaWNrZWQgbm90aWZpY2F0aW9uXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbGlua10gLSBOb3RpZmljYXRpb24gbGluayB0byBvcGVuXHJcbiAqL1xyXG5wb3J0Lm9uKFwibm90aWZpY2F0aW9ucy5jbGlja2VkXCIsIChtZXNzYWdlLCBzZW5kZXIpID0+XHJcbntcclxuICBpZiAobWVzc2FnZS5saW5rKVxyXG4gIHtcclxuICAgIG9wZW5Ob3RpZmljYXRpb25MaW5rKG1lc3NhZ2UubGluayk7XHJcbiAgfVxyXG4gIC8vIFdoaWxlIGNsaWNraW5nIG9uIGEgZGVza3RvcCBub3RpZmljYXRpb24ncyBidXR0b24gZGlzbWlzc2VzIHRoZVxyXG4gIC8vIG5vdGlmaWNhdGlvbiwgY2xpY2tpbmcgb24gYSBwb3B1cCB3aW5kb3cgbm90aWZpY2F0aW9uJ3MgbGluayBkb2VzIG5vdC5cclxuICBlbHNlXHJcbiAge1xyXG4gICAgYnJvd3Nlci5ub3RpZmljYXRpb25zLmNsZWFyKG1lc3NhZ2UuaWQpO1xyXG4gICAgbm90aWZpY2F0aW9uRGlzbWlzc2VkKG1lc3NhZ2UuaWQsIHRydWUpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgYWN0aXZlIG5vdGlmaWNhdGlvbiBpZiB0aGVyZSBpcyBvbmUgYW5kIGlmIGl0IGFwcGxpZXMgdG8gdGhlXHJcbiAqIGdpdmVuIHVybCBhbmQvb3IgZGlzcGxheSBtZXRob2QuXHJcbiAqXHJcbiAqIEBldmVudCBcIm5vdGlmaWNhdGlvbnMuZ2V0XCJcclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtkaXNwbGF5TWV0aG9kXVxyXG4gKiAgIERpc3BsYXkgbWV0aG9kIHRvIGNoZWNrIHRoYXQgdGhlIGFjdGl2ZSBub3RpZmljYXRpb24gbWF0Y2hlcy5cclxuICogICBGb3IgZXhhbXBsZSBcInBvcHVwXCIgb3IgXCJpY29uXCIuXHJcbiAqIEByZXR1cm5zIHs/b2JqZWN0fVxyXG4gKi9cclxucG9ydC5vbihcIm5vdGlmaWNhdGlvbnMuZ2V0XCIsIChtZXNzYWdlLCBzZW5kZXIpID0+XHJcbntcclxuICBpZiAoIWFjdGl2ZU5vdGlmaWNhdGlvbilcclxuICAgIHJldHVybjtcclxuXHJcbiAgaWYgKFwiZGlzcGxheU1ldGhvZFwiIGluIG1lc3NhZ2UgJiZcclxuICAgICAgIW1hdGNoZXNEaXNwbGF5TWV0aG9kKG1lc3NhZ2UuZGlzcGxheU1ldGhvZCwgYWN0aXZlTm90aWZpY2F0aW9uKSlcclxuICAgIHJldHVybjtcclxuXHJcbiAgbGV0IHRleHRzID0gbm90aWZpY2F0aW9ucy5nZXRMb2NhbGl6ZWRUZXh0cyhhY3RpdmVOb3RpZmljYXRpb24pO1xyXG4gIHJldHVybiBPYmplY3QuYXNzaWduKHt0ZXh0c30sIGFjdGl2ZU5vdGlmaWNhdGlvbik7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIFNlbnQgd2hlbiBhIHBvcHVwIG5vdGlmaWNhdGlvbiB3YXMgc2hvd24gdG8gdGhlIHVzZXIuIFN0b3BzIGljb24gYW5pbWF0aW9uLlxyXG4gKlxyXG4gKiBAZXZlbnQgXCJub3RpZmljYXRpb25zLnNlZW5cIlxyXG4gKi9cclxucG9ydC5vbihcIm5vdGlmaWNhdGlvbnMuc2VlblwiLCAobWVzc2FnZSwgc2VuZGVyKSA9PlxyXG57XHJcbiAgaWYgKCFhY3RpdmVOb3RpZmljYXRpb24pXHJcbiAgICByZXR1cm47XHJcblxyXG4gIGlmIChtYXRjaGVzRGlzcGxheU1ldGhvZChcInBvcHVwXCIsIGFjdGl2ZU5vdGlmaWNhdGlvbikgJiZcclxuICAgICAgbWF0Y2hlc0Rpc3BsYXlNZXRob2QoXCJpY29uXCIsIGFjdGl2ZU5vdGlmaWNhdGlvbikpXHJcbiAgICBzdG9wSWNvbkFuaW1hdGlvbigpO1xyXG59KTtcclxuXHJcbmV4dC5wYWdlcy5vbkxvYWRpbmcuYWRkTGlzdGVuZXIocGFnZSA9PlxyXG57XHJcbiAgbm90aWZpY2F0aW9ucy5zaG93TmV4dChwYWdlLnVybC5ocmVmKTtcclxufSk7XHJcblxyXG5TdGF0cy5vbihcImJsb2NrZWRfdG90YWxcIiwgKCkgPT5cclxue1xyXG4gIG5vdGlmaWNhdGlvbnMuc2hvd05leHQoKTtcclxufSk7XHJcblxyXG5ub3RpZmljYXRpb25zLmFkZFNob3dMaXN0ZW5lcihzaG93Tm90aWZpY2F0aW9uKTtcclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlIHN1YnNjcmlwdGlvbkluaXQgKi9cclxuXHJcbmltcG9ydCB7U3Vic2NyaXB0aW9uLCBEb3dubG9hZGFibGVTdWJzY3JpcHRpb24sIFNwZWNpYWxTdWJzY3JpcHRpb259XHJcbiAgZnJvbSBcIi4uL2FkYmxvY2twbHVzY29yZS9saWIvc3Vic2NyaXB0aW9uQ2xhc3Nlcy5qc1wiO1xyXG5pbXBvcnQge2ZpbHRlclN0b3JhZ2V9IGZyb20gXCIuLi9hZGJsb2NrcGx1c2NvcmUvbGliL2ZpbHRlclN0b3JhZ2UuanNcIjtcclxuaW1wb3J0IHtmaWx0ZXJFbmdpbmV9IGZyb20gXCIuLi9hZGJsb2NrcGx1c2NvcmUvbGliL2ZpbHRlckVuZ2luZS5qc1wiO1xyXG5pbXBvcnQge3JlY29tbWVuZGF0aW9uc30gZnJvbSBcIi4uL2FkYmxvY2twbHVzY29yZS9saWIvcmVjb21tZW5kYXRpb25zLmpzXCI7XHJcbmltcG9ydCB7bm90aWZpY2F0aW9uc30gZnJvbSBcIi4uL2FkYmxvY2twbHVzY29yZS9saWIvbm90aWZpY2F0aW9ucy5qc1wiO1xyXG5pbXBvcnQge3N5bmNocm9uaXplcn0gZnJvbSBcIi4uL2FkYmxvY2twbHVzY29yZS9saWIvc3luY2hyb25pemVyLmpzXCI7XHJcbmltcG9ydCAqIGFzIGluZm8gZnJvbSBcImluZm9cIjtcclxuaW1wb3J0IHtwb3J0fSBmcm9tIFwiLi9tZXNzYWdpbmcuanNcIjtcclxuaW1wb3J0IHtQcmVmc30gZnJvbSBcIi4vcHJlZnMuanNcIjtcclxuaW1wb3J0IHtpbml0Tm90aWZpY2F0aW9uc30gZnJvbSBcIi4vbm90aWZpY2F0aW9uSGVscGVyLmpzXCI7XHJcblxyXG5sZXQgZmlyc3RSdW47XHJcbmxldCBzdWJzY3JpcHRpb25zQ2FsbGJhY2sgPSBudWxsO1xyXG5sZXQgdXNlck5vdGlmaWNhdGlvbkNhbGxiYWNrID0gbnVsbDtcclxubGV0IHJlaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxubGV0IGRhdGFDb3JydXB0ZWQgPSBmYWxzZTtcclxuXHJcbi8qKlxyXG4gKiBJZiB0aGVyZSBhcmVuJ3QgYW55IGZpbHRlcnMsIHRoZSBkZWZhdWx0IHN1YnNjcmlwdGlvbnMgYXJlIGFkZGVkLlxyXG4gKiBIb3dldmVyLCBpZiBwYXR0ZXJucy5pbmkgYWxyZWFkeSBkaWQgZXhpc3QgYW5kL29yIGFueSBwcmVmZXJlbmNlXHJcbiAqIGlzIHNldCB0byBhIG5vbi1kZWZhdWx0IHZhbHVlLCB0aGlzIGluZGljYXRlcyB0aGF0IHRoaXMgaXNuJ3QgdGhlXHJcbiAqIGZpcnN0IHJ1biwgYnV0IHNvbWV0aGluZyB3ZW50IHdyb25nLlxyXG4gKlxyXG4gKiBUaGlzIGZ1bmN0aW9uIGRldGVjdHMgdGhlIGZpcnN0IHJ1biwgYW5kIG1ha2VzIHN1cmUgdGhhdCB0aGUgdXNlclxyXG4gKiBnZXRzIG5vdGlmaWVkIChvbiB0aGUgZmlyc3QgcnVuIHBhZ2UpIGlmIHRoZSBkYXRhIGFwcGVhcnMgaW5jb21wbGV0ZVxyXG4gKiBhbmQgdGhlcmVmb3JlIHdpbGwgYmUgcmVpbml0aWFsaXplZC5cclxuICovXHJcbmZ1bmN0aW9uIGRldGVjdEZpcnN0UnVuKClcclxue1xyXG4gIGZpcnN0UnVuID0gZmlsdGVyU3RvcmFnZS5nZXRTdWJzY3JpcHRpb25Db3VudCgpID09IDA7XHJcblxyXG4gIGlmIChmaXJzdFJ1biAmJiAoIWZpbHRlclN0b3JhZ2UuZmlyc3RSdW4gfHwgUHJlZnMuY3VycmVudFZlcnNpb24pKVxyXG4gICAgcmVpbml0aWFsaXplZCA9IHRydWU7XHJcblxyXG4gIFByZWZzLmN1cnJlbnRWZXJzaW9uID0gaW5mby5hZGRvblZlcnNpb247XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbiBjYXNlIG9mIGRhdGEgY29ycnVwdGlvbiwgd2UgZG9uJ3Qgd2FudCB0byBzaG93IHVzZXJzXHJcbiAqIGFueSBub24tZXNzZW50aWFsIG5vdGlmaWNhdGlvbnMgc28gd2UgbmVlZCB0byBpbnN0cnVjdFxyXG4gKiB0aGUgbm90aWZpY2F0aW9uIG1hbmFnZXIgdG8gaWdub3JlIHRoZW0uXHJcbiAqXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWVcclxuICovXHJcbmZ1bmN0aW9uIHNldERhdGFDb3JydXB0ZWQodmFsdWUpXHJcbntcclxuICBkYXRhQ29ycnVwdGVkID0gdmFsdWU7XHJcbiAgbm90aWZpY2F0aW9ucy5pZ25vcmVkID0gdmFsdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgdG8gYWRkIHRoZSBkZWZhdWx0IGFkIGJsb2NraW5nIHN1YnNjcmlwdGlvbnMuXHJcbiAqIFJldHVybnMgdHJ1ZSwgaWYgdGhlcmUgYXJlIG5vIGZpbHRlciBzdWJzY3JpcHRpb25zIGJlc2lkZXMgdGhvc2VcclxuICogb3RoZXIgc3Vic2NyaXB0aW9ucyBhZGRlZCBhdXRvbWF0aWNhbGx5LCBhbmQgbm8gY3VzdG9tIGZpbHRlcnMuXHJcbiAqXHJcbiAqIE9uIGZpcnN0IHJ1biwgdGhpcyBsb2dpYyBzaG91bGQgYWx3YXlzIHJlc3VsdCBpbiB0cnVlIHNpbmNlIHRoZXJlXHJcbiAqIGlzIG5vIGRhdGEgYW5kIHRoZXJlZm9yZSBubyBzdWJzY3JpcHRpb25zLiBCdXQgaXQgYWxzbyBjYXVzZXMgdGhlXHJcbiAqIGRlZmF1bHQgYWQgYmxvY2tpbmcgc3Vic2NyaXB0aW9ucyB0byBiZSBhZGRlZCBhZ2FpbiBhZnRlciBzb21lXHJcbiAqIGRhdGEgY29ycnVwdGlvbiBvciBtaXNjb25maWd1cmF0aW9uLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHtib29sZWFufVxyXG4gKi9cclxuZnVuY3Rpb24gc2hvdWxkQWRkRGVmYXVsdFN1YnNjcmlwdGlvbnMoKVxyXG57XHJcbiAgZm9yIChsZXQgc3Vic2NyaXB0aW9uIG9mIGZpbHRlclN0b3JhZ2Uuc3Vic2NyaXB0aW9ucygpKVxyXG4gIHtcclxuICAgIGlmIChzdWJzY3JpcHRpb24gaW5zdGFuY2VvZiBEb3dubG9hZGFibGVTdWJzY3JpcHRpb24gJiZcclxuICAgICAgICBzdWJzY3JpcHRpb24udXJsICE9IFByZWZzLnN1YnNjcmlwdGlvbnNfZXhjZXB0aW9uc3VybCAmJlxyXG4gICAgICAgIHN1YnNjcmlwdGlvbi50eXBlICE9IFwiY2lyY3VtdmVudGlvblwiKVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgaWYgKHN1YnNjcmlwdGlvbiBpbnN0YW5jZW9mIFNwZWNpYWxTdWJzY3JpcHRpb24gJiZcclxuICAgICAgICBzdWJzY3JpcHRpb24uZmlsdGVyQ291bnQgPiAwKVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEZpbmRzIHRoZSBkZWZhdWx0IGZpbHRlciBzdWJzY3JpcHRpb25zLlxyXG4gKlxyXG4gKiBSZXR1cm5zIGFuIGFycmF5IHRoYXQgaW5jbHVkZXMgb25lIHN1YnNjcmlwdGlvbiBvZiB0aGUgdHlwZSBcImFkc1wiIGZvciB0aGVcclxuICogY3VycmVudCBVSSBsYW5ndWFnZSwgYW5kIGFueSBzdWJzY3JpcHRpb25zIG9mIHRoZSB0eXBlIFwiY2lyY3VtdmVudGlvblwiLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0FycmF5LjxvYmplY3Q+fSBzdWJzY3JpcHRpb25zXHJcbiAqIEByZXR1cm4ge0FycmF5LjxvYmplY3Q+fVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNob29zZUZpbHRlclN1YnNjcmlwdGlvbnMoc3Vic2NyaXB0aW9ucylcclxue1xyXG4gIGxldCBjdXJyZW50TGFuZyA9IGJyb3dzZXIuaTE4bi5nZXRVSUxhbmd1YWdlKCkuc3BsaXQoXCItXCIpWzBdO1xyXG4gIGxldCBkZWZhdWx0TGFuZyA9IGJyb3dzZXIucnVudGltZS5nZXRNYW5pZmVzdCgpLmRlZmF1bHRfbG9jYWxlLnNwbGl0KFwiX1wiKVswXTtcclxuXHJcbiAgbGV0IGFkU3Vic2NyaXB0aW9ucyA9IFtdO1xyXG4gIGxldCBhZFN1YnNjcmlwdGlvbnNEZWZhdWx0TGFuZyA9IFtdO1xyXG4gIGxldCBjaG9zZW5TdWJzY3JpcHRpb25zID0gW107XHJcblxyXG4gIGZvciAobGV0IHN1YnNjcmlwdGlvbiBvZiBzdWJzY3JpcHRpb25zKVxyXG4gIHtcclxuICAgIHN3aXRjaCAoc3Vic2NyaXB0aW9uLnR5cGUpXHJcbiAgICB7XHJcbiAgICAgIGNhc2UgXCJhZHNcIjpcclxuICAgICAgICBpZiAoc3Vic2NyaXB0aW9uLmxhbmd1YWdlcy5pbmNsdWRlcyhjdXJyZW50TGFuZykpXHJcbiAgICAgICAgICBhZFN1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgIGlmIChzdWJzY3JpcHRpb24ubGFuZ3VhZ2VzLmluY2x1ZGVzKGRlZmF1bHRMYW5nKSlcclxuICAgICAgICAgIGFkU3Vic2NyaXB0aW9uc0RlZmF1bHRMYW5nLnB1c2goc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgXCJjaXJjdW12ZW50aW9uXCI6XHJcbiAgICAgICAgY2hvc2VuU3Vic2NyaXB0aW9ucy5wdXNoKHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAoYWRTdWJzY3JpcHRpb25zLmxlbmd0aCA+IDAgfHwgKGFkU3Vic2NyaXB0aW9ucyA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZFN1YnNjcmlwdGlvbnNEZWZhdWx0TGFuZykubGVuZ3RoID4gMClcclxuICB7XHJcbiAgICBsZXQgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhZFN1YnNjcmlwdGlvbnMubGVuZ3RoKTtcclxuICAgIGNob3NlblN1YnNjcmlwdGlvbnMudW5zaGlmdChhZFN1YnNjcmlwdGlvbnNbcmFuZG9tSW5kZXhdKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBjaG9zZW5TdWJzY3JpcHRpb25zO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0cyB0aGUgZmlsdGVyIHN1YnNjcmlwdGlvbnMgdG8gYmUgYWRkZWQgd2hlbiB0aGUgZXh0bmVzaW9uIGlzIGxvYWRlZC5cclxuICpcclxuICogQHJldHVybiB7UHJvbWlzZXxTdWJzY3JpcHRpb25bXX1cclxuICovXHJcbmZ1bmN0aW9uIGdldFN1YnNjcmlwdGlvbnMoKVxyXG57XHJcbiAgbGV0IHN1YnNjcmlwdGlvbnMgPSBbXTtcclxuXHJcbiAgLy8gQWRkIHByZS1jb25maWd1cmVkIHN1YnNjcmlwdGlvbnNcclxuICBmb3IgKGxldCB1cmwgb2YgUHJlZnMuYWRkaXRpb25hbF9zdWJzY3JpcHRpb25zKVxyXG4gICAgc3Vic2NyaXB0aW9ucy5wdXNoKFN1YnNjcmlwdGlvbi5mcm9tVVJMKHVybCkpO1xyXG5cclxuICAvLyBBZGQgdGhlIFwiYWNjZXB0YWJsZSBhZHNcIiBzdWJzY3JpcHRpb25cclxuICBpZiAoZmlyc3RSdW4pXHJcbiAge1xyXG4gICAgbGV0IGFjY2VwdGFibGVBZHNTdWJzY3JpcHRpb24gPSBTdWJzY3JpcHRpb24uZnJvbVVSTChcclxuICAgICAgUHJlZnMuc3Vic2NyaXB0aW9uc19leGNlcHRpb25zdXJsXHJcbiAgICApO1xyXG4gICAgYWNjZXB0YWJsZUFkc1N1YnNjcmlwdGlvbi50aXRsZSA9IFwiQWxsb3cgbm9uLWludHJ1c2l2ZSBhZHZlcnRpc2luZ1wiO1xyXG4gICAgc3Vic2NyaXB0aW9ucy5wdXNoKGFjY2VwdGFibGVBZHNTdWJzY3JpcHRpb24pO1xyXG4gIH1cclxuXHJcbiAgLy8gQWRkIGRlZmF1bHQgYWQgYmxvY2tpbmcgc3Vic2NyaXB0aW9ucyAoZS5nLiBFYXN5TGlzdCwgQW50aS1DaXJjdW12ZW50aW9uKVxyXG4gIGxldCBhZGREZWZhdWx0U3Vic2NyaXB0aW9uID0gc2hvdWxkQWRkRGVmYXVsdFN1YnNjcmlwdGlvbnMoKTtcclxuICBpZiAoYWRkRGVmYXVsdFN1YnNjcmlwdGlvbiB8fCAhUHJlZnMuc3Vic2NyaXB0aW9uc19hZGRlZGFudGljdilcclxuICB7XHJcbiAgICBmb3IgKGxldCB7dXJsLCB0eXBlLFxyXG4gICAgICAgICAgICAgIHRpdGxlLCBob21lcGFnZX0gb2YgY2hvb3NlRmlsdGVyU3Vic2NyaXB0aW9ucyhyZWNvbW1lbmRhdGlvbnMoKSkpXHJcbiAgICB7XHJcbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHdlIGRvbid0IGFkZCBFYXN5bGlzdCBhZ2FpbiBpZiB3ZSB3YW50XHJcbiAgICAgIC8vIHRvIGp1c3QgYWRkIHRoZSBBbnRpLUNpcmN1bXZlbnRpb24gc3Vic2NyaXB0aW9uLlxyXG4gICAgICBpZiAoIWFkZERlZmF1bHRTdWJzY3JpcHRpb24gJiYgdHlwZSAhPSBcImNpcmN1bXZlbnRpb25cIilcclxuICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgIGxldCBzdWJzY3JpcHRpb24gPSBTdWJzY3JpcHRpb24uZnJvbVVSTCh1cmwpO1xyXG4gICAgICBzdWJzY3JpcHRpb24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgc3Vic2NyaXB0aW9uLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgIHN1YnNjcmlwdGlvbi5ob21lcGFnZSA9IGhvbWVwYWdlO1xyXG4gICAgICBzdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKTtcclxuXHJcbiAgICAgIGlmIChzdWJzY3JpcHRpb24udHlwZSA9PSBcImNpcmN1bXZlbnRpb25cIilcclxuICAgICAgICBQcmVmcy5zdWJzY3JpcHRpb25zX2FkZGVkYW50aWN2ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc3Vic2NyaXB0aW9ucztcclxuICB9XHJcblxyXG4gIHJldHVybiBzdWJzY3JpcHRpb25zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRTdWJzY3JpcHRpb25zQW5kTm90aWZ5VXNlcihzdWJzY3JpcHRpb25zKVxyXG57XHJcbiAgaWYgKHN1YnNjcmlwdGlvbnNDYWxsYmFjaylcclxuICAgIHN1YnNjcmlwdGlvbnMgPSBzdWJzY3JpcHRpb25zQ2FsbGJhY2soc3Vic2NyaXB0aW9ucyk7XHJcblxyXG4gIGZvciAobGV0IHN1YnNjcmlwdGlvbiBvZiBzdWJzY3JpcHRpb25zKVxyXG4gIHtcclxuICAgIGZpbHRlclN0b3JhZ2UuYWRkU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XHJcbiAgICBpZiAoc3Vic2NyaXB0aW9uIGluc3RhbmNlb2YgRG93bmxvYWRhYmxlU3Vic2NyaXB0aW9uICYmXHJcbiAgICAgICAgIXN1YnNjcmlwdGlvbi5sYXN0RG93bmxvYWQpXHJcbiAgICAgIHN5bmNocm9uaXplci5leGVjdXRlKHN1YnNjcmlwdGlvbik7XHJcbiAgfVxyXG5cclxuICBpZiAodXNlck5vdGlmaWNhdGlvbkNhbGxiYWNrKVxyXG4gICAgdXNlck5vdGlmaWNhdGlvbkNhbGxiYWNrKHtkYXRhQ29ycnVwdGVkLCBmaXJzdFJ1biwgcmVpbml0aWFsaXplZH0pO1xyXG59XHJcblxyXG4vKipcclxuICogV2UgbmVlZCB0byBjaGVjayB3aGV0aGVyIHdlIGNhbiBzYWZlbHkgd3JpdGUgdG8vcmVhZCBmcm9tIHN0b3JhZ2VcclxuICogYmVmb3JlIHdlIHN0YXJ0IHJlbHlpbmcgb24gaXQgZm9yIHN0b3JpbmcgcHJlZmVyZW5jZXMuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB0ZXN0U3RvcmFnZSgpXHJcbntcclxuICBsZXQgdGVzdEtleSA9IFwicmVhZHdyaXRlX3Rlc3RcIjtcclxuICBsZXQgdGVzdFZhbHVlID0gTWF0aC5yYW5kb20oKTtcclxuXHJcbiAgdHJ5XHJcbiAge1xyXG4gICAgYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldCh7W3Rlc3RLZXldOiB0ZXN0VmFsdWV9KTtcclxuICAgIGxldCByZXN1bHQgPSBhd2FpdCBicm93c2VyLnN0b3JhZ2UubG9jYWwuZ2V0KHRlc3RLZXkpO1xyXG4gICAgaWYgKHJlc3VsdFt0ZXN0S2V5XSAhPSB0ZXN0VmFsdWUpXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlN0b3JhZ2UgdGVzdDogRmFpbGVkIHRvIHJlYWQgYW5kIHdyaXRlIHZhbHVlXCIpO1xyXG4gIH1cclxuICBmaW5hbGx5XHJcbiAge1xyXG4gICAgYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnJlbW92ZSh0ZXN0S2V5KTtcclxuICB9XHJcbn1cclxuXHJcbihhc3luYygpID0+XHJcbntcclxuICBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICBmaWx0ZXJFbmdpbmUuaW5pdGlhbGl6ZSgpLnRoZW4oKCkgPT4gc3luY2hyb25pemVyLnN0YXJ0KCkpLFxyXG4gICAgUHJlZnMudW50aWxMb2FkZWQuY2F0Y2goKCkgPT4geyBzZXREYXRhQ29ycnVwdGVkKHRydWUpOyB9KSxcclxuICAgIHRlc3RTdG9yYWdlKCkuY2F0Y2goKCkgPT4geyBzZXREYXRhQ29ycnVwdGVkKHRydWUpOyB9KVxyXG4gIF0pO1xyXG4gIGRldGVjdEZpcnN0UnVuKCk7XHJcbiAgbGV0IHN1YnNjcmlwdGlvbnMgPSBhd2FpdCBnZXRTdWJzY3JpcHRpb25zKCk7XHJcbiAgYWRkU3Vic2NyaXB0aW9uc0FuZE5vdGlmeVVzZXIoc3Vic2NyaXB0aW9ucyk7XHJcbiAgLy8gV2UgaGF2ZSB0byByZXF1aXJlIHRoZSBcInVuaW5zdGFsbFwiIG1vZHVsZSBvbiBkZW1hbmQsXHJcbiAgLy8gYXMgdGhlIFwidW5pbnN0YWxsXCIgbW9kdWxlIGluIHR1cm4gcmVxdWlyZXMgdGhpcyBtb2R1bGUuXHJcbiAgKGF3YWl0IGltcG9ydChcIi4vdW5pbnN0YWxsLmpzXCIpKS5zZXRVbmluc3RhbGxVUkwoKTtcclxuICBpbml0Tm90aWZpY2F0aW9ucyhmaXJzdFJ1bik7XHJcbn0pKCk7XHJcblxyXG4vKipcclxuICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciBhIGRhdGEgY29ycnVwdGlvbiB3YXMgZGV0ZWN0ZWQuXHJcbiAqXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNEYXRhQ29ycnVwdGVkKClcclxue1xyXG4gIHJldHVybiBkYXRhQ29ycnVwdGVkO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0cyBhIGNhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHdpdGggYW4gYXJyYXkgb2Ygc3Vic2NyaXB0aW9ucyB0byBiZSBhZGRlZFxyXG4gKiBkdXJpbmcgaW5pdGlhbGl6YXRpb24uIFRoZSBjYWxsYmFjayBtdXN0IHJldHVybiBhbiBhcnJheSBvZiBzdWJzY3JpcHRpb25zXHJcbiAqIHRoYXQgd2lsbCBlZmZlY3RpdmVseSBiZSBhZGRlZC5cclxuICpcclxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRTdWJzY3JpcHRpb25zQ2FsbGJhY2soY2FsbGJhY2spXHJcbntcclxuICBzdWJzY3JpcHRpb25zQ2FsbGJhY2sgPSBjYWxsYmFjaztcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldHMgYSBjYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aXRoIGVudmlyb25tZW50IGluZm9ybWF0aW9uIGFmdGVyXHJcbiAqIGluaXRpYWxpemF0aW9uIHRvIG5vdGlmeSB1c2Vycy5cclxuICpcclxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXROb3RpZnlVc2VyQ2FsbGJhY2soY2FsbGJhY2spXHJcbntcclxuICB1c2VyTm90aWZpY2F0aW9uQ2FsbGJhY2sgPSBjYWxsYmFjaztcclxufVxyXG5cclxuLyoqXHJcbiAqIEB0eXBlZGVmIHtvYmplY3R9IHN1YnNjcmlwdGlvbnNHZXRJbml0SXNzdWVzUmVzdWx0XHJcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gZGF0YUNvcnJ1cHRlZFxyXG4gKiAgIHRydWUgaWYgaXQgYXBwZWFycyB0aGF0IHRoZSB1c2VyJ3MgZXh0ZW5zaW9uIGRhdGEgd2FzIGNvcnJ1cHRlZC5cclxuICogQHByb3BlcnR5IHtib29sZWFufSByZWluaXRpYWxpemVkXHJcbiAqICAgdHJ1ZSBpZiB3ZSBoYXZlIHJlc2V0IHRoZSB1c2VyJ3Mgc2V0dGluZ3MgZHVlIHRvIGRhdGEgY29ycnVwdGlvbi5cclxuICovXHJcblxyXG4vKipcclxuICogUmV0dXJucyBhbiBPYmplY3Qgd2l0aCBib29sZWFuIGZsYWdzIGZvciBhbnkgc3Vic2NyaXB0aW9uIGluaXRpYWxpemF0aW9uXHJcbiAqIGlzc3Vlcy5cclxuICpcclxuICogQGV2ZW50IFwic3Vic2NyaXB0aW9ucy5nZXRJbml0SXNzdWVzXCJcclxuICogQHJldHVybnMge3N1YnNjcmlwdGlvbnNHZXRJbml0SXNzdWVzUmVzdWx0fVxyXG4gKi9cclxucG9ydC5vbihcInN1YnNjcmlwdGlvbnMuZ2V0SW5pdElzc3Vlc1wiLFxyXG4gICAgICAgIChtZXNzYWdlLCBzZW5kZXIpID0+ICh7ZGF0YUNvcnJ1cHRlZCwgcmVpbml0aWFsaXplZH0pKTtcclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbi8qKiBAbW9kdWxlIHVuaW5zdGFsbCAqL1xyXG5cclxuaW1wb3J0ICogYXMgaW5mbyBmcm9tIFwiaW5mb1wiO1xyXG5pbXBvcnQge2FuYWx5dGljc30gZnJvbSBcIi4uL2FkYmxvY2twbHVzY29yZS9saWIvYW5hbHl0aWNzLmpzXCI7XHJcbmltcG9ydCB7ZmlsdGVyTm90aWZpZXJ9IGZyb20gXCIuLi9hZGJsb2NrcGx1c2NvcmUvbGliL2ZpbHRlck5vdGlmaWVyLmpzXCI7XHJcbmltcG9ydCB7ZmlsdGVyU3RvcmFnZX0gZnJvbSBcIi4uL2FkYmxvY2twbHVzY29yZS9saWIvZmlsdGVyU3RvcmFnZS5qc1wiO1xyXG5pbXBvcnQge3JlY29tbWVuZGF0aW9uc30gZnJvbSBcIi4uL2FkYmxvY2twbHVzY29yZS9saWIvcmVjb21tZW5kYXRpb25zLmpzXCI7XHJcbmltcG9ydCB7aXNEYXRhQ29ycnVwdGVkfSBmcm9tIFwiLi9zdWJzY3JpcHRpb25Jbml0LmpzXCI7XHJcbmltcG9ydCB7UHJlZnN9IGZyb20gXCIuL3ByZWZzLmpzXCI7XHJcblxyXG5jb25zdCBhYmJyZXZpYXRpb25zID0gW1xyXG4gIFtcImFuXCIsIFwiYWRkb25OYW1lXCJdLCBbXCJhdlwiLCBcImFkZG9uVmVyc2lvblwiXSxcclxuICBbXCJhcFwiLCBcImFwcGxpY2F0aW9uXCJdLCBbXCJhcHZcIiwgXCJhcHBsaWNhdGlvblZlcnNpb25cIl0sXHJcbiAgW1wicFwiLCBcInBsYXRmb3JtXCJdLCBbXCJmdlwiLCBcImZpcnN0VmVyc2lvblwiXSwgW1wicHZcIiwgXCJwbGF0Zm9ybVZlcnNpb25cIl0sXHJcbiAgW1wibmRjXCIsIFwibm90aWZpY2F0aW9uRG93bmxvYWRDb3VudFwiXSwgW1wiY1wiLCBcImNvcnJ1cHRlZFwiXSxcclxuICBbXCJzXCIsIFwic3Vic2NyaXB0aW9uc1wiXVxyXG5dO1xyXG5cclxuLyoqXHJcbiAqIFJldHJpZXZlcyBzZXQgb2YgVVJMcyBvZiByZWNvbW1lbmRlZCBhZCBibG9ja2luZyBmaWx0ZXIgbGlzdHNcclxuICpcclxuICogQHJldHVybiB7U2V0fVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QWRzU3Vic2NyaXB0aW9ucygpXHJcbntcclxuICBsZXQgc3Vic2NyaXB0aW9ucyA9IG5ldyBTZXQoKTtcclxuICBmb3IgKGxldCBzdWJzY3JpcHRpb24gb2YgcmVjb21tZW5kYXRpb25zKCkpXHJcbiAge1xyXG4gICAgaWYgKHN1YnNjcmlwdGlvbi50eXBlID09IFwiYWRzXCIpXHJcbiAgICAgIHN1YnNjcmlwdGlvbnMuYWRkKHN1YnNjcmlwdGlvbi51cmwpO1xyXG4gIH1cclxuICByZXR1cm4gc3Vic2NyaXB0aW9ucztcclxufVxyXG5cclxuLyoqXHJcbiAqIERldGVybWluZXMgd2hldGhlciBhbnkgb2YgdGhlIGdpdmVuIHN1YnNjcmlwdGlvbnMgYXJlIGluc3RhbGxlZCBhbmQgZW5hYmxlZFxyXG4gKlxyXG4gKiBAcGFyYW0ge1NldH0gdXJsc1xyXG4gKlxyXG4gKiBAcmV0dXJuIHtib29sZWFufVxyXG4gKi9cclxuZnVuY3Rpb24gaXNBbnlTdWJzY3JpcHRpb25BY3RpdmUodXJscylcclxue1xyXG4gIGZvciAobGV0IHN1YnNjcmlwdGlvbiBvZiBmaWx0ZXJTdG9yYWdlLnN1YnNjcmlwdGlvbnMoKSlcclxuICB7XHJcbiAgICBpZiAoIXN1YnNjcmlwdGlvbi5kaXNhYmxlZCAmJiB1cmxzLmhhcyhzdWJzY3JpcHRpb24udXJsKSlcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXRzIChvciB1cGRhdGVzKSB0aGUgVVJMIHRoYXQgaXMgb3BlbmVuZCB3aGVuIHRoZSBleHRlbnNpb24gaXMgdW5pbnN0YWxsZWQuXHJcbiAqXHJcbiAqIE11c3QgYmUgY2FsbGVkIGFmdGVyIHByZWZzIGdvdCBpbml0aWFsaXplZCBhbmQgYSBkYXRhIGNvcnJ1cHRpb25cclxuICogaWYgYW55IHdhcyBkZXRlY3RlZCwgYXMgd2VsbCB3aGVuIG5vdGlmaWNhdGlvbiBkYXRhIGNoYW5nZS5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRVbmluc3RhbGxVUkwoKVxyXG57XHJcbiAgbGV0IHNlYXJjaCA9IFtdO1xyXG4gIGxldCBwYXJhbXMgPSBPYmplY3QuY3JlYXRlKGluZm8pO1xyXG5cclxuICBwYXJhbXMuY29ycnVwdGVkID0gaXNEYXRhQ29ycnVwdGVkKCkgPyBcIjFcIiA6IFwiMFwiO1xyXG4gIHBhcmFtcy5maXJzdFZlcnNpb24gPSBhbmFseXRpY3MuZ2V0Rmlyc3RWZXJzaW9uKCk7XHJcblxyXG4gIGxldCBub3RpZmljYXRpb25Eb3dubG9hZENvdW50ID0gUHJlZnMubm90aWZpY2F0aW9uZGF0YS5kb3dubG9hZENvdW50IHx8IDA7XHJcbiAgaWYgKG5vdGlmaWNhdGlvbkRvd25sb2FkQ291bnQgPCA1KVxyXG4gICAgcGFyYW1zLm5vdGlmaWNhdGlvbkRvd25sb2FkQ291bnQgPSBub3RpZmljYXRpb25Eb3dubG9hZENvdW50O1xyXG4gIGVsc2UgaWYgKG5vdGlmaWNhdGlvbkRvd25sb2FkQ291bnQgPCA4KVxyXG4gICAgcGFyYW1zLm5vdGlmaWNhdGlvbkRvd25sb2FkQ291bnQgPSBcIjUtN1wiO1xyXG4gIGVsc2UgaWYgKG5vdGlmaWNhdGlvbkRvd25sb2FkQ291bnQgPCAzMClcclxuICAgIHBhcmFtcy5ub3RpZmljYXRpb25Eb3dubG9hZENvdW50ID0gXCI4LTI5XCI7XHJcbiAgZWxzZSBpZiAobm90aWZpY2F0aW9uRG93bmxvYWRDb3VudCA8IDkwKVxyXG4gICAgcGFyYW1zLm5vdGlmaWNhdGlvbkRvd25sb2FkQ291bnQgPSBcIjMwLTg5XCI7XHJcbiAgZWxzZSBpZiAobm90aWZpY2F0aW9uRG93bmxvYWRDb3VudCA8IDE4MClcclxuICAgIHBhcmFtcy5ub3RpZmljYXRpb25Eb3dubG9hZENvdW50ID0gXCI5MC0xNzlcIjtcclxuICBlbHNlXHJcbiAgICBwYXJhbXMubm90aWZpY2F0aW9uRG93bmxvYWRDb3VudCA9IFwiMTgwK1wiO1xyXG5cclxuICBsZXQgYWFTdWJzY3JpcHRpb25zID0gbmV3IFNldChbUHJlZnMuc3Vic2NyaXB0aW9uc19leGNlcHRpb25zdXJsXSk7XHJcbiAgbGV0IGFkc1N1YnNjcmlwdGlvbnMgPSBnZXRBZHNTdWJzY3JpcHRpb25zKCk7XHJcbiAgbGV0IGlzQWNjZXB0YWJsZUFkc0FjdGl2ZSA9IGlzQW55U3Vic2NyaXB0aW9uQWN0aXZlKGFhU3Vic2NyaXB0aW9ucyk7XHJcbiAgbGV0IGlzQWRCbG9ja2luZ0FjdGl2ZSA9IGlzQW55U3Vic2NyaXB0aW9uQWN0aXZlKGFkc1N1YnNjcmlwdGlvbnMpO1xyXG4gIHBhcmFtcy5zdWJzY3JpcHRpb25zID0gKGlzQWNjZXB0YWJsZUFkc0FjdGl2ZSA8PCAxKSB8IGlzQWRCbG9ja2luZ0FjdGl2ZTtcclxuXHJcbiAgZm9yIChsZXQgW2FiYnJldmlhdGlvbiwga2V5XSBvZiBhYmJyZXZpYXRpb25zKVxyXG4gICAgc2VhcmNoLnB1c2goYWJicmV2aWF0aW9uICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pKTtcclxuXHJcbiAgYnJvd3Nlci5ydW50aW1lLnNldFVuaW5zdGFsbFVSTChQcmVmcy5nZXREb2NMaW5rKFwidW5pbnN0YWxsZWRcIikgKyBcIiZcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2guam9pbihcIiZcIikpO1xyXG59XHJcblxyXG5maWx0ZXJOb3RpZmllci5vbihcInN1YnNjcmlwdGlvbi5hZGRlZFwiLCBzZXRVbmluc3RhbGxVUkwpO1xyXG5maWx0ZXJOb3RpZmllci5vbihcInN1YnNjcmlwdGlvbi5kaXNhYmxlZFwiLCBzZXRVbmluc3RhbGxVUkwpO1xyXG5maWx0ZXJOb3RpZmllci5vbihcInN1YnNjcmlwdGlvbi5yZW1vdmVkXCIsIHNldFVuaW5zdGFsbFVSTCk7XHJcblByZWZzLm9uKFwibm90aWZpY2F0aW9uZGF0YVwiLCBzZXRVbmluc3RhbGxVUkwpO1xyXG4iLCIvKlxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBBZGJsb2NrIFBsdXMgPGh0dHBzOi8vYWRibG9ja3BsdXMub3JnLz4sXHJcbiAqIENvcHlyaWdodCAoQykgMjAwNi1wcmVzZW50IGV5ZW8gR21iSFxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBhc1xyXG4gKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICpcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCBBZGJsb2NrIFBsdXMuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqL1xyXG5cclxuLyoqIEBtb2R1bGUgdXJsICovXHJcblxyXG4vKipcclxuICogR2V0cyB0aGUgSUROLWRlY29kZWQgaG9zdG5hbWUgZnJvbSB0aGUgVVJMIG9mIGEgZnJhbWUuXHJcbiAqIElmIHRoZSBVUkwgZG9uJ3QgaGF2ZSBob3N0IGluZm9ybWF0aW9uIChsaWtlIFwiYWJvdXQ6YmxhbmtcIlxyXG4gKiBhbmQgXCJkYXRhOlwiIFVSTHMpIGl0IGZhbGxzIGJhY2sgdG8gdGhlIHBhcmVudCBmcmFtZS5cclxuICpcclxuICogQHBhcmFtIHs/RnJhbWV9ICBmcmFtZVxyXG4gKiBAcGFyYW0ge1VSTH0gICAgW29yaWdpblVybF1cclxuICogQHJldHVybiB7c3RyaW5nfVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RIb3N0RnJvbUZyYW1lKGZyYW1lLCBvcmlnaW5VcmwpXHJcbntcclxuICBmb3IgKDsgZnJhbWU7IGZyYW1lID0gZnJhbWUucGFyZW50KVxyXG4gIHtcclxuICAgIGxldCB7aG9zdG5hbWV9ID0gZnJhbWUudXJsO1xyXG4gICAgaWYgKGhvc3RuYW1lKVxyXG4gICAgICByZXR1cm4gaG9zdG5hbWU7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gb3JpZ2luVXJsID8gb3JpZ2luVXJsLmhvc3RuYW1lIDogXCJcIjtcclxufVxyXG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBvYmplY3RBc3NpZ24gPSByZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7XG5cbi8vIGNvbXBhcmUgYW5kIGlzQnVmZmVyIHRha2VuIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvYmxvYi82ODBlOWU1ZTQ4OGYyMmFhYzI3NTk5YTU3ZGM4NDRhNjMxNTkyOGRkL2luZGV4LmpzXG4vLyBvcmlnaW5hbCBub3RpY2U6XG5cbi8qIVxuICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuXG4gKlxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cbmZ1bmN0aW9uIGNvbXBhcmUoYSwgYikge1xuICBpZiAoYSA9PT0gYikge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgdmFyIHggPSBhLmxlbmd0aDtcbiAgdmFyIHkgPSBiLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XG4gICAgICB4ID0gYVtpXTtcbiAgICAgIHkgPSBiW2ldO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKHggPCB5KSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIGlmICh5IDwgeCkge1xuICAgIHJldHVybiAxO1xuICB9XG4gIHJldHVybiAwO1xufVxuZnVuY3Rpb24gaXNCdWZmZXIoYikge1xuICBpZiAoZ2xvYmFsLkJ1ZmZlciAmJiB0eXBlb2YgZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBnbG9iYWwuQnVmZmVyLmlzQnVmZmVyKGIpO1xuICB9XG4gIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpO1xufVxuXG4vLyBiYXNlZCBvbiBub2RlIGFzc2VydCwgb3JpZ2luYWwgbm90aWNlOlxuLy8gTkI6IFRoZSBVUkwgdG8gdGhlIENvbW1vbkpTIHNwZWMgaXMga2VwdCBqdXN0IGZvciB0cmFkaXRpb24uXG4vLyAgICAgbm9kZS1hc3NlcnQgaGFzIGV2b2x2ZWQgYSBsb3Qgc2luY2UgdGhlbiwgYm90aCBpbiBBUEkgYW5kIGJlaGF2aW9yLlxuXG4vLyBodHRwOi8vd2lraS5jb21tb25qcy5vcmcvd2lraS9Vbml0X1Rlc3RpbmcvMS4wXG4vL1xuLy8gVEhJUyBJUyBOT1QgVEVTVEVEIE5PUiBMSUtFTFkgVE8gV09SSyBPVVRTSURFIFY4IVxuLy9cbi8vIE9yaWdpbmFsbHkgZnJvbSBuYXJ3aGFsLmpzIChodHRwOi8vbmFyd2hhbGpzLm9yZylcbi8vIENvcHlyaWdodCAoYykgMjAwOSBUaG9tYXMgUm9iaW5zb24gPDI4MG5vcnRoLmNvbT5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG9cbi8vIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlXG4vLyByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Jcbi8vIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOXG4vLyBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OXG4vLyBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsLycpO1xudmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgcFNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xudmFyIGZ1bmN0aW9uc0hhdmVOYW1lcyA9IChmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmdW5jdGlvbiBmb28oKSB7fS5uYW1lID09PSAnZm9vJztcbn0oKSk7XG5mdW5jdGlvbiBwVG9TdHJpbmcgKG9iaikge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaik7XG59XG5mdW5jdGlvbiBpc1ZpZXcoYXJyYnVmKSB7XG4gIGlmIChpc0J1ZmZlcihhcnJidWYpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgZ2xvYmFsLkFycmF5QnVmZmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIEFycmF5QnVmZmVyLmlzVmlldyhhcnJidWYpO1xuICB9XG4gIGlmICghYXJyYnVmKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChhcnJidWYgaW5zdGFuY2VvZiBEYXRhVmlldykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChhcnJidWYuYnVmZmVyICYmIGFycmJ1Zi5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbi8vIDEuIFRoZSBhc3NlcnQgbW9kdWxlIHByb3ZpZGVzIGZ1bmN0aW9ucyB0aGF0IHRocm93XG4vLyBBc3NlcnRpb25FcnJvcidzIHdoZW4gcGFydGljdWxhciBjb25kaXRpb25zIGFyZSBub3QgbWV0LiBUaGVcbi8vIGFzc2VydCBtb2R1bGUgbXVzdCBjb25mb3JtIHRvIHRoZSBmb2xsb3dpbmcgaW50ZXJmYWNlLlxuXG52YXIgYXNzZXJ0ID0gbW9kdWxlLmV4cG9ydHMgPSBvaztcblxuLy8gMi4gVGhlIEFzc2VydGlvbkVycm9yIGlzIGRlZmluZWQgaW4gYXNzZXJ0LlxuLy8gbmV3IGFzc2VydC5Bc3NlcnRpb25FcnJvcih7IG1lc3NhZ2U6IG1lc3NhZ2UsXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsOiBhY3R1YWwsXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IGV4cGVjdGVkIH0pXG5cbnZhciByZWdleCA9IC9cXHMqZnVuY3Rpb25cXHMrKFteXFwoXFxzXSopXFxzKi87XG4vLyBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vbGpoYXJiL2Z1bmN0aW9uLnByb3RvdHlwZS5uYW1lL2Jsb2IvYWRlZWVlYzhiZmNjNjA2OGIxODdkN2Q5ZmIzZDViYjFkM2EzMDg5OS9pbXBsZW1lbnRhdGlvbi5qc1xuZnVuY3Rpb24gZ2V0TmFtZShmdW5jKSB7XG4gIGlmICghdXRpbC5pc0Z1bmN0aW9uKGZ1bmMpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChmdW5jdGlvbnNIYXZlTmFtZXMpIHtcbiAgICByZXR1cm4gZnVuYy5uYW1lO1xuICB9XG4gIHZhciBzdHIgPSBmdW5jLnRvU3RyaW5nKCk7XG4gIHZhciBtYXRjaCA9IHN0ci5tYXRjaChyZWdleCk7XG4gIHJldHVybiBtYXRjaCAmJiBtYXRjaFsxXTtcbn1cbmFzc2VydC5Bc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIEFzc2VydGlvbkVycm9yKG9wdGlvbnMpIHtcbiAgdGhpcy5uYW1lID0gJ0Fzc2VydGlvbkVycm9yJztcbiAgdGhpcy5hY3R1YWwgPSBvcHRpb25zLmFjdHVhbDtcbiAgdGhpcy5leHBlY3RlZCA9IG9wdGlvbnMuZXhwZWN0ZWQ7XG4gIHRoaXMub3BlcmF0b3IgPSBvcHRpb25zLm9wZXJhdG9yO1xuICBpZiAob3B0aW9ucy5tZXNzYWdlKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlO1xuICAgIHRoaXMuZ2VuZXJhdGVkTWVzc2FnZSA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubWVzc2FnZSA9IGdldE1lc3NhZ2UodGhpcyk7XG4gICAgdGhpcy5nZW5lcmF0ZWRNZXNzYWdlID0gdHJ1ZTtcbiAgfVxuICB2YXIgc3RhY2tTdGFydEZ1bmN0aW9uID0gb3B0aW9ucy5zdGFja1N0YXJ0RnVuY3Rpb24gfHwgZmFpbDtcbiAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgc3RhY2tTdGFydEZ1bmN0aW9uKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBub24gdjggYnJvd3NlcnMgc28gd2UgY2FuIGhhdmUgYSBzdGFja3RyYWNlXG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcigpO1xuICAgIGlmIChlcnIuc3RhY2spIHtcbiAgICAgIHZhciBvdXQgPSBlcnIuc3RhY2s7XG5cbiAgICAgIC8vIHRyeSB0byBzdHJpcCB1c2VsZXNzIGZyYW1lc1xuICAgICAgdmFyIGZuX25hbWUgPSBnZXROYW1lKHN0YWNrU3RhcnRGdW5jdGlvbik7XG4gICAgICB2YXIgaWR4ID0gb3V0LmluZGV4T2YoJ1xcbicgKyBmbl9uYW1lKTtcbiAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAvLyBvbmNlIHdlIGhhdmUgbG9jYXRlZCB0aGUgZnVuY3Rpb24gZnJhbWVcbiAgICAgICAgLy8gd2UgbmVlZCB0byBzdHJpcCBvdXQgZXZlcnl0aGluZyBiZWZvcmUgaXQgKGFuZCBpdHMgbGluZSlcbiAgICAgICAgdmFyIG5leHRfbGluZSA9IG91dC5pbmRleE9mKCdcXG4nLCBpZHggKyAxKTtcbiAgICAgICAgb3V0ID0gb3V0LnN1YnN0cmluZyhuZXh0X2xpbmUgKyAxKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zdGFjayA9IG91dDtcbiAgICB9XG4gIH1cbn07XG5cbi8vIGFzc2VydC5Bc3NlcnRpb25FcnJvciBpbnN0YW5jZW9mIEVycm9yXG51dGlsLmluaGVyaXRzKGFzc2VydC5Bc3NlcnRpb25FcnJvciwgRXJyb3IpO1xuXG5mdW5jdGlvbiB0cnVuY2F0ZShzLCBuKSB7XG4gIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gcy5sZW5ndGggPCBuID8gcyA6IHMuc2xpY2UoMCwgbik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHM7XG4gIH1cbn1cbmZ1bmN0aW9uIGluc3BlY3Qoc29tZXRoaW5nKSB7XG4gIGlmIChmdW5jdGlvbnNIYXZlTmFtZXMgfHwgIXV0aWwuaXNGdW5jdGlvbihzb21ldGhpbmcpKSB7XG4gICAgcmV0dXJuIHV0aWwuaW5zcGVjdChzb21ldGhpbmcpO1xuICB9XG4gIHZhciByYXduYW1lID0gZ2V0TmFtZShzb21ldGhpbmcpO1xuICB2YXIgbmFtZSA9IHJhd25hbWUgPyAnOiAnICsgcmF3bmFtZSA6ICcnO1xuICByZXR1cm4gJ1tGdW5jdGlvbicgKyAgbmFtZSArICddJztcbn1cbmZ1bmN0aW9uIGdldE1lc3NhZ2Uoc2VsZikge1xuICByZXR1cm4gdHJ1bmNhdGUoaW5zcGVjdChzZWxmLmFjdHVhbCksIDEyOCkgKyAnICcgK1xuICAgICAgICAgc2VsZi5vcGVyYXRvciArICcgJyArXG4gICAgICAgICB0cnVuY2F0ZShpbnNwZWN0KHNlbGYuZXhwZWN0ZWQpLCAxMjgpO1xufVxuXG4vLyBBdCBwcmVzZW50IG9ubHkgdGhlIHRocmVlIGtleXMgbWVudGlvbmVkIGFib3ZlIGFyZSB1c2VkIGFuZFxuLy8gdW5kZXJzdG9vZCBieSB0aGUgc3BlYy4gSW1wbGVtZW50YXRpb25zIG9yIHN1YiBtb2R1bGVzIGNhbiBwYXNzXG4vLyBvdGhlciBrZXlzIHRvIHRoZSBBc3NlcnRpb25FcnJvcidzIGNvbnN0cnVjdG9yIC0gdGhleSB3aWxsIGJlXG4vLyBpZ25vcmVkLlxuXG4vLyAzLiBBbGwgb2YgdGhlIGZvbGxvd2luZyBmdW5jdGlvbnMgbXVzdCB0aHJvdyBhbiBBc3NlcnRpb25FcnJvclxuLy8gd2hlbiBhIGNvcnJlc3BvbmRpbmcgY29uZGl0aW9uIGlzIG5vdCBtZXQsIHdpdGggYSBtZXNzYWdlIHRoYXRcbi8vIG1heSBiZSB1bmRlZmluZWQgaWYgbm90IHByb3ZpZGVkLiAgQWxsIGFzc2VydGlvbiBtZXRob2RzIHByb3ZpZGVcbi8vIGJvdGggdGhlIGFjdHVhbCBhbmQgZXhwZWN0ZWQgdmFsdWVzIHRvIHRoZSBhc3NlcnRpb24gZXJyb3IgZm9yXG4vLyBkaXNwbGF5IHB1cnBvc2VzLlxuXG5mdW5jdGlvbiBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsIG9wZXJhdG9yLCBzdGFja1N0YXJ0RnVuY3Rpb24pIHtcbiAgdGhyb3cgbmV3IGFzc2VydC5Bc3NlcnRpb25FcnJvcih7XG4gICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICBhY3R1YWw6IGFjdHVhbCxcbiAgICBleHBlY3RlZDogZXhwZWN0ZWQsXG4gICAgb3BlcmF0b3I6IG9wZXJhdG9yLFxuICAgIHN0YWNrU3RhcnRGdW5jdGlvbjogc3RhY2tTdGFydEZ1bmN0aW9uXG4gIH0pO1xufVxuXG4vLyBFWFRFTlNJT04hIGFsbG93cyBmb3Igd2VsbCBiZWhhdmVkIGVycm9ycyBkZWZpbmVkIGVsc2V3aGVyZS5cbmFzc2VydC5mYWlsID0gZmFpbDtcblxuLy8gNC4gUHVyZSBhc3NlcnRpb24gdGVzdHMgd2hldGhlciBhIHZhbHVlIGlzIHRydXRoeSwgYXMgZGV0ZXJtaW5lZFxuLy8gYnkgISFndWFyZC5cbi8vIGFzc2VydC5vayhndWFyZCwgbWVzc2FnZV9vcHQpO1xuLy8gVGhpcyBzdGF0ZW1lbnQgaXMgZXF1aXZhbGVudCB0byBhc3NlcnQuZXF1YWwodHJ1ZSwgISFndWFyZCxcbi8vIG1lc3NhZ2Vfb3B0KTsuIFRvIHRlc3Qgc3RyaWN0bHkgZm9yIHRoZSB2YWx1ZSB0cnVlLCB1c2Vcbi8vIGFzc2VydC5zdHJpY3RFcXVhbCh0cnVlLCBndWFyZCwgbWVzc2FnZV9vcHQpOy5cblxuZnVuY3Rpb24gb2sodmFsdWUsIG1lc3NhZ2UpIHtcbiAgaWYgKCF2YWx1ZSkgZmFpbCh2YWx1ZSwgdHJ1ZSwgbWVzc2FnZSwgJz09JywgYXNzZXJ0Lm9rKTtcbn1cbmFzc2VydC5vayA9IG9rO1xuXG4vLyA1LiBUaGUgZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIHNoYWxsb3csIGNvZXJjaXZlIGVxdWFsaXR5IHdpdGhcbi8vID09LlxuLy8gYXNzZXJ0LmVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0LmVxdWFsID0gZnVuY3Rpb24gZXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoYWN0dWFsICE9IGV4cGVjdGVkKSBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICc9PScsIGFzc2VydC5lcXVhbCk7XG59O1xuXG4vLyA2LiBUaGUgbm9uLWVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBmb3Igd2hldGhlciB0d28gb2JqZWN0cyBhcmUgbm90IGVxdWFsXG4vLyB3aXRoICE9IGFzc2VydC5ub3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5ub3RFcXVhbCA9IGZ1bmN0aW9uIG5vdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKGFjdHVhbCA9PSBleHBlY3RlZCkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJyE9JywgYXNzZXJ0Lm5vdEVxdWFsKTtcbiAgfVxufTtcblxuLy8gNy4gVGhlIGVxdWl2YWxlbmNlIGFzc2VydGlvbiB0ZXN0cyBhIGRlZXAgZXF1YWxpdHkgcmVsYXRpb24uXG4vLyBhc3NlcnQuZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0LmRlZXBFcXVhbCA9IGZ1bmN0aW9uIGRlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmICghX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBmYWxzZSkpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdkZWVwRXF1YWwnLCBhc3NlcnQuZGVlcEVxdWFsKTtcbiAgfVxufTtcblxuYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIGRlZXBTdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmICghX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCB0cnVlKSkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ2RlZXBTdHJpY3RFcXVhbCcsIGFzc2VydC5kZWVwU3RyaWN0RXF1YWwpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBfZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIHN0cmljdCwgbWVtb3MpIHtcbiAgLy8gNy4xLiBBbGwgaWRlbnRpY2FsIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgYXMgZGV0ZXJtaW5lZCBieSA9PT0uXG4gIGlmIChhY3R1YWwgPT09IGV4cGVjdGVkKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAoaXNCdWZmZXIoYWN0dWFsKSAmJiBpc0J1ZmZlcihleHBlY3RlZCkpIHtcbiAgICByZXR1cm4gY29tcGFyZShhY3R1YWwsIGV4cGVjdGVkKSA9PT0gMDtcblxuICAvLyA3LjIuIElmIHRoZSBleHBlY3RlZCB2YWx1ZSBpcyBhIERhdGUgb2JqZWN0LCB0aGUgYWN0dWFsIHZhbHVlIGlzXG4gIC8vIGVxdWl2YWxlbnQgaWYgaXQgaXMgYWxzbyBhIERhdGUgb2JqZWN0IHRoYXQgcmVmZXJzIHRvIHRoZSBzYW1lIHRpbWUuXG4gIH0gZWxzZSBpZiAodXRpbC5pc0RhdGUoYWN0dWFsKSAmJiB1dGlsLmlzRGF0ZShleHBlY3RlZCkpIHtcbiAgICByZXR1cm4gYWN0dWFsLmdldFRpbWUoKSA9PT0gZXhwZWN0ZWQuZ2V0VGltZSgpO1xuXG4gIC8vIDcuMyBJZiB0aGUgZXhwZWN0ZWQgdmFsdWUgaXMgYSBSZWdFeHAgb2JqZWN0LCB0aGUgYWN0dWFsIHZhbHVlIGlzXG4gIC8vIGVxdWl2YWxlbnQgaWYgaXQgaXMgYWxzbyBhIFJlZ0V4cCBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzb3VyY2UgYW5kXG4gIC8vIHByb3BlcnRpZXMgKGBnbG9iYWxgLCBgbXVsdGlsaW5lYCwgYGxhc3RJbmRleGAsIGBpZ25vcmVDYXNlYCkuXG4gIH0gZWxzZSBpZiAodXRpbC5pc1JlZ0V4cChhY3R1YWwpICYmIHV0aWwuaXNSZWdFeHAoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGFjdHVhbC5zb3VyY2UgPT09IGV4cGVjdGVkLnNvdXJjZSAmJlxuICAgICAgICAgICBhY3R1YWwuZ2xvYmFsID09PSBleHBlY3RlZC5nbG9iYWwgJiZcbiAgICAgICAgICAgYWN0dWFsLm11bHRpbGluZSA9PT0gZXhwZWN0ZWQubXVsdGlsaW5lICYmXG4gICAgICAgICAgIGFjdHVhbC5sYXN0SW5kZXggPT09IGV4cGVjdGVkLmxhc3RJbmRleCAmJlxuICAgICAgICAgICBhY3R1YWwuaWdub3JlQ2FzZSA9PT0gZXhwZWN0ZWQuaWdub3JlQ2FzZTtcblxuICAvLyA3LjQuIE90aGVyIHBhaXJzIHRoYXQgZG8gbm90IGJvdGggcGFzcyB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcsXG4gIC8vIGVxdWl2YWxlbmNlIGlzIGRldGVybWluZWQgYnkgPT0uXG4gIH0gZWxzZSBpZiAoKGFjdHVhbCA9PT0gbnVsbCB8fCB0eXBlb2YgYWN0dWFsICE9PSAnb2JqZWN0JykgJiZcbiAgICAgICAgICAgICAoZXhwZWN0ZWQgPT09IG51bGwgfHwgdHlwZW9mIGV4cGVjdGVkICE9PSAnb2JqZWN0JykpIHtcbiAgICByZXR1cm4gc3RyaWN0ID8gYWN0dWFsID09PSBleHBlY3RlZCA6IGFjdHVhbCA9PSBleHBlY3RlZDtcblxuICAvLyBJZiBib3RoIHZhbHVlcyBhcmUgaW5zdGFuY2VzIG9mIHR5cGVkIGFycmF5cywgd3JhcCB0aGVpciB1bmRlcmx5aW5nXG4gIC8vIEFycmF5QnVmZmVycyBpbiBhIEJ1ZmZlciBlYWNoIHRvIGluY3JlYXNlIHBlcmZvcm1hbmNlXG4gIC8vIFRoaXMgb3B0aW1pemF0aW9uIHJlcXVpcmVzIHRoZSBhcnJheXMgdG8gaGF2ZSB0aGUgc2FtZSB0eXBlIGFzIGNoZWNrZWQgYnlcbiAgLy8gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyAoYWthIHBUb1N0cmluZykuIE5ldmVyIHBlcmZvcm0gYmluYXJ5XG4gIC8vIGNvbXBhcmlzb25zIGZvciBGbG9hdCpBcnJheXMsIHRob3VnaCwgc2luY2UgZS5nLiArMCA9PT0gLTAgYnV0IHRoZWlyXG4gIC8vIGJpdCBwYXR0ZXJucyBhcmUgbm90IGlkZW50aWNhbC5cbiAgfSBlbHNlIGlmIChpc1ZpZXcoYWN0dWFsKSAmJiBpc1ZpZXcoZXhwZWN0ZWQpICYmXG4gICAgICAgICAgICAgcFRvU3RyaW5nKGFjdHVhbCkgPT09IHBUb1N0cmluZyhleHBlY3RlZCkgJiZcbiAgICAgICAgICAgICAhKGFjdHVhbCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSB8fFxuICAgICAgICAgICAgICAgYWN0dWFsIGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5KSkge1xuICAgIHJldHVybiBjb21wYXJlKG5ldyBVaW50OEFycmF5KGFjdHVhbC5idWZmZXIpLFxuICAgICAgICAgICAgICAgICAgIG5ldyBVaW50OEFycmF5KGV4cGVjdGVkLmJ1ZmZlcikpID09PSAwO1xuXG4gIC8vIDcuNSBGb3IgYWxsIG90aGVyIE9iamVjdCBwYWlycywgaW5jbHVkaW5nIEFycmF5IG9iamVjdHMsIGVxdWl2YWxlbmNlIGlzXG4gIC8vIGRldGVybWluZWQgYnkgaGF2aW5nIHRoZSBzYW1lIG51bWJlciBvZiBvd25lZCBwcm9wZXJ0aWVzIChhcyB2ZXJpZmllZFxuICAvLyB3aXRoIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCksIHRoZSBzYW1lIHNldCBvZiBrZXlzXG4gIC8vIChhbHRob3VnaCBub3QgbmVjZXNzYXJpbHkgdGhlIHNhbWUgb3JkZXIpLCBlcXVpdmFsZW50IHZhbHVlcyBmb3IgZXZlcnlcbiAgLy8gY29ycmVzcG9uZGluZyBrZXksIGFuZCBhbiBpZGVudGljYWwgJ3Byb3RvdHlwZScgcHJvcGVydHkuIE5vdGU6IHRoaXNcbiAgLy8gYWNjb3VudHMgZm9yIGJvdGggbmFtZWQgYW5kIGluZGV4ZWQgcHJvcGVydGllcyBvbiBBcnJheXMuXG4gIH0gZWxzZSBpZiAoaXNCdWZmZXIoYWN0dWFsKSAhPT0gaXNCdWZmZXIoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIG1lbW9zID0gbWVtb3MgfHwge2FjdHVhbDogW10sIGV4cGVjdGVkOiBbXX07XG5cbiAgICB2YXIgYWN0dWFsSW5kZXggPSBtZW1vcy5hY3R1YWwuaW5kZXhPZihhY3R1YWwpO1xuICAgIGlmIChhY3R1YWxJbmRleCAhPT0gLTEpIHtcbiAgICAgIGlmIChhY3R1YWxJbmRleCA9PT0gbWVtb3MuZXhwZWN0ZWQuaW5kZXhPZihleHBlY3RlZCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbWVtb3MuYWN0dWFsLnB1c2goYWN0dWFsKTtcbiAgICBtZW1vcy5leHBlY3RlZC5wdXNoKGV4cGVjdGVkKTtcblxuICAgIHJldHVybiBvYmpFcXVpdihhY3R1YWwsIGV4cGVjdGVkLCBzdHJpY3QsIG1lbW9zKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0FyZ3VtZW50cyhvYmplY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpID09ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xufVxuXG5mdW5jdGlvbiBvYmpFcXVpdihhLCBiLCBzdHJpY3QsIGFjdHVhbFZpc2l0ZWRPYmplY3RzKSB7XG4gIGlmIChhID09PSBudWxsIHx8IGEgPT09IHVuZGVmaW5lZCB8fCBiID09PSBudWxsIHx8IGIgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gZmFsc2U7XG4gIC8vIGlmIG9uZSBpcyBhIHByaW1pdGl2ZSwgdGhlIG90aGVyIG11c3QgYmUgc2FtZVxuICBpZiAodXRpbC5pc1ByaW1pdGl2ZShhKSB8fCB1dGlsLmlzUHJpbWl0aXZlKGIpKVxuICAgIHJldHVybiBhID09PSBiO1xuICBpZiAoc3RyaWN0ICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihhKSAhPT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGIpKVxuICAgIHJldHVybiBmYWxzZTtcbiAgdmFyIGFJc0FyZ3MgPSBpc0FyZ3VtZW50cyhhKTtcbiAgdmFyIGJJc0FyZ3MgPSBpc0FyZ3VtZW50cyhiKTtcbiAgaWYgKChhSXNBcmdzICYmICFiSXNBcmdzKSB8fCAoIWFJc0FyZ3MgJiYgYklzQXJncykpXG4gICAgcmV0dXJuIGZhbHNlO1xuICBpZiAoYUlzQXJncykge1xuICAgIGEgPSBwU2xpY2UuY2FsbChhKTtcbiAgICBiID0gcFNsaWNlLmNhbGwoYik7XG4gICAgcmV0dXJuIF9kZWVwRXF1YWwoYSwgYiwgc3RyaWN0KTtcbiAgfVxuICB2YXIga2EgPSBvYmplY3RLZXlzKGEpO1xuICB2YXIga2IgPSBvYmplY3RLZXlzKGIpO1xuICB2YXIga2V5LCBpO1xuICAvLyBoYXZpbmcgdGhlIHNhbWUgbnVtYmVyIG9mIG93bmVkIHByb3BlcnRpZXMgKGtleXMgaW5jb3Jwb3JhdGVzXG4gIC8vIGhhc093blByb3BlcnR5KVxuICBpZiAoa2EubGVuZ3RoICE9PSBrYi5sZW5ndGgpXG4gICAgcmV0dXJuIGZhbHNlO1xuICAvL3RoZSBzYW1lIHNldCBvZiBrZXlzIChhbHRob3VnaCBub3QgbmVjZXNzYXJpbHkgdGhlIHNhbWUgb3JkZXIpLFxuICBrYS5zb3J0KCk7XG4gIGtiLnNvcnQoKTtcbiAgLy9+fn5jaGVhcCBrZXkgdGVzdFxuICBmb3IgKGkgPSBrYS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGlmIChrYVtpXSAhPT0ga2JbaV0pXG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy9lcXVpdmFsZW50IHZhbHVlcyBmb3IgZXZlcnkgY29ycmVzcG9uZGluZyBrZXksIGFuZFxuICAvL35+fnBvc3NpYmx5IGV4cGVuc2l2ZSBkZWVwIHRlc3RcbiAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBrZXkgPSBrYVtpXTtcbiAgICBpZiAoIV9kZWVwRXF1YWwoYVtrZXldLCBiW2tleV0sIHN0cmljdCwgYWN0dWFsVmlzaXRlZE9iamVjdHMpKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyA4LiBUaGUgbm9uLWVxdWl2YWxlbmNlIGFzc2VydGlvbiB0ZXN0cyBmb3IgYW55IGRlZXAgaW5lcXVhbGl0eS5cbi8vIGFzc2VydC5ub3REZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQubm90RGVlcEVxdWFsID0gZnVuY3Rpb24gbm90RGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKF9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgZmFsc2UpKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnbm90RGVlcEVxdWFsJywgYXNzZXJ0Lm5vdERlZXBFcXVhbCk7XG4gIH1cbn07XG5cbmFzc2VydC5ub3REZWVwU3RyaWN0RXF1YWwgPSBub3REZWVwU3RyaWN0RXF1YWw7XG5mdW5jdGlvbiBub3REZWVwU3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCB0cnVlKSkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ25vdERlZXBTdHJpY3RFcXVhbCcsIG5vdERlZXBTdHJpY3RFcXVhbCk7XG4gIH1cbn1cblxuXG4vLyA5LiBUaGUgc3RyaWN0IGVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBzdHJpY3QgZXF1YWxpdHksIGFzIGRldGVybWluZWQgYnkgPT09LlxuLy8gYXNzZXJ0LnN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0LnN0cmljdEVxdWFsID0gZnVuY3Rpb24gc3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoYWN0dWFsICE9PSBleHBlY3RlZCkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJz09PScsIGFzc2VydC5zdHJpY3RFcXVhbCk7XG4gIH1cbn07XG5cbi8vIDEwLiBUaGUgc3RyaWN0IG5vbi1lcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgZm9yIHN0cmljdCBpbmVxdWFsaXR5LCBhc1xuLy8gZGV0ZXJtaW5lZCBieSAhPT0uICBhc3NlcnQubm90U3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQubm90U3RyaWN0RXF1YWwgPSBmdW5jdGlvbiBub3RTdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmIChhY3R1YWwgPT09IGV4cGVjdGVkKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnIT09JywgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZXhwZWN0ZWRFeGNlcHRpb24oYWN0dWFsLCBleHBlY3RlZCkge1xuICBpZiAoIWFjdHVhbCB8fCAhZXhwZWN0ZWQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGV4cGVjdGVkKSA9PSAnW29iamVjdCBSZWdFeHBdJykge1xuICAgIHJldHVybiBleHBlY3RlZC50ZXN0KGFjdHVhbCk7XG4gIH1cblxuICB0cnkge1xuICAgIGlmIChhY3R1YWwgaW5zdGFuY2VvZiBleHBlY3RlZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gSWdub3JlLiAgVGhlIGluc3RhbmNlb2YgY2hlY2sgZG9lc24ndCB3b3JrIGZvciBhcnJvdyBmdW5jdGlvbnMuXG4gIH1cblxuICBpZiAoRXJyb3IuaXNQcm90b3R5cGVPZihleHBlY3RlZCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gZXhwZWN0ZWQuY2FsbCh7fSwgYWN0dWFsKSA9PT0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gX3RyeUJsb2NrKGJsb2NrKSB7XG4gIHZhciBlcnJvcjtcbiAgdHJ5IHtcbiAgICBibG9jaygpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgZXJyb3IgPSBlO1xuICB9XG4gIHJldHVybiBlcnJvcjtcbn1cblxuZnVuY3Rpb24gX3Rocm93cyhzaG91bGRUaHJvdywgYmxvY2ssIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIHZhciBhY3R1YWw7XG5cbiAgaWYgKHR5cGVvZiBibG9jayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiYmxvY2tcIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZXhwZWN0ZWQgPT09ICdzdHJpbmcnKSB7XG4gICAgbWVzc2FnZSA9IGV4cGVjdGVkO1xuICAgIGV4cGVjdGVkID0gbnVsbDtcbiAgfVxuXG4gIGFjdHVhbCA9IF90cnlCbG9jayhibG9jayk7XG5cbiAgbWVzc2FnZSA9IChleHBlY3RlZCAmJiBleHBlY3RlZC5uYW1lID8gJyAoJyArIGV4cGVjdGVkLm5hbWUgKyAnKS4nIDogJy4nKSArXG4gICAgICAgICAgICAobWVzc2FnZSA/ICcgJyArIG1lc3NhZ2UgOiAnLicpO1xuXG4gIGlmIChzaG91bGRUaHJvdyAmJiAhYWN0dWFsKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCAnTWlzc2luZyBleHBlY3RlZCBleGNlcHRpb24nICsgbWVzc2FnZSk7XG4gIH1cblxuICB2YXIgdXNlclByb3ZpZGVkTWVzc2FnZSA9IHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJztcbiAgdmFyIGlzVW53YW50ZWRFeGNlcHRpb24gPSAhc2hvdWxkVGhyb3cgJiYgdXRpbC5pc0Vycm9yKGFjdHVhbCk7XG4gIHZhciBpc1VuZXhwZWN0ZWRFeGNlcHRpb24gPSAhc2hvdWxkVGhyb3cgJiYgYWN0dWFsICYmICFleHBlY3RlZDtcblxuICBpZiAoKGlzVW53YW50ZWRFeGNlcHRpb24gJiZcbiAgICAgIHVzZXJQcm92aWRlZE1lc3NhZ2UgJiZcbiAgICAgIGV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpKSB8fFxuICAgICAgaXNVbmV4cGVjdGVkRXhjZXB0aW9uKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCAnR290IHVud2FudGVkIGV4Y2VwdGlvbicgKyBtZXNzYWdlKTtcbiAgfVxuXG4gIGlmICgoc2hvdWxkVGhyb3cgJiYgYWN0dWFsICYmIGV4cGVjdGVkICYmXG4gICAgICAhZXhwZWN0ZWRFeGNlcHRpb24oYWN0dWFsLCBleHBlY3RlZCkpIHx8ICghc2hvdWxkVGhyb3cgJiYgYWN0dWFsKSkge1xuICAgIHRocm93IGFjdHVhbDtcbiAgfVxufVxuXG4vLyAxMS4gRXhwZWN0ZWQgdG8gdGhyb3cgYW4gZXJyb3I6XG4vLyBhc3NlcnQudGhyb3dzKGJsb2NrLCBFcnJvcl9vcHQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0LnRocm93cyA9IGZ1bmN0aW9uKGJsb2NrLCAvKm9wdGlvbmFsKi9lcnJvciwgLypvcHRpb25hbCovbWVzc2FnZSkge1xuICBfdGhyb3dzKHRydWUsIGJsb2NrLCBlcnJvciwgbWVzc2FnZSk7XG59O1xuXG4vLyBFWFRFTlNJT04hIFRoaXMgaXMgYW5ub3lpbmcgdG8gd3JpdGUgb3V0c2lkZSB0aGlzIG1vZHVsZS5cbmFzc2VydC5kb2VzTm90VGhyb3cgPSBmdW5jdGlvbihibG9jaywgLypvcHRpb25hbCovZXJyb3IsIC8qb3B0aW9uYWwqL21lc3NhZ2UpIHtcbiAgX3Rocm93cyhmYWxzZSwgYmxvY2ssIGVycm9yLCBtZXNzYWdlKTtcbn07XG5cbmFzc2VydC5pZkVycm9yID0gZnVuY3Rpb24oZXJyKSB7IGlmIChlcnIpIHRocm93IGVycjsgfTtcblxuLy8gRXhwb3NlIGEgc3RyaWN0IG9ubHkgdmFyaWFudCBvZiBhc3NlcnRcbmZ1bmN0aW9uIHN0cmljdCh2YWx1ZSwgbWVzc2FnZSkge1xuICBpZiAoIXZhbHVlKSBmYWlsKHZhbHVlLCB0cnVlLCBtZXNzYWdlLCAnPT0nLCBzdHJpY3QpO1xufVxuYXNzZXJ0LnN0cmljdCA9IG9iamVjdEFzc2lnbihzdHJpY3QsIGFzc2VydCwge1xuICBlcXVhbDogYXNzZXJ0LnN0cmljdEVxdWFsLFxuICBkZWVwRXF1YWw6IGFzc2VydC5kZWVwU3RyaWN0RXF1YWwsXG4gIG5vdEVxdWFsOiBhc3NlcnQubm90U3RyaWN0RXF1YWwsXG4gIG5vdERlZXBFcXVhbDogYXNzZXJ0Lm5vdERlZXBTdHJpY3RFcXVhbFxufSk7XG5hc3NlcnQuc3RyaWN0LnN0cmljdCA9IGFzc2VydC5zdHJpY3Q7XG5cbnZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iaikge1xuICB2YXIga2V5cyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKGhhc093bi5jYWxsKG9iaiwga2V5KSkga2V5cy5wdXNoKGtleSk7XG4gIH1cbiAgcmV0dXJuIGtleXM7XG59O1xuIiwiaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwge1xuICAgICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgdmFsdWU6IGN0b3IsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59IGVsc2Uge1xuICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2Vyc1xuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge31cbiAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlXG4gICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKVxuICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvclxuICB9XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQnVmZmVyKGFyZykge1xuICByZXR1cm4gYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnXG4gICAgJiYgdHlwZW9mIGFyZy5jb3B5ID09PSAnZnVuY3Rpb24nXG4gICAgJiYgdHlwZW9mIGFyZy5maWxsID09PSAnZnVuY3Rpb24nXG4gICAgJiYgdHlwZW9mIGFyZy5yZWFkVUludDggPT09ICdmdW5jdGlvbic7XG59IiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbnZhciBmb3JtYXRSZWdFeHAgPSAvJVtzZGolXS9nO1xuZXhwb3J0cy5mb3JtYXQgPSBmdW5jdGlvbihmKSB7XG4gIGlmICghaXNTdHJpbmcoZikpIHtcbiAgICB2YXIgb2JqZWN0cyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBvYmplY3RzLnB1c2goaW5zcGVjdChhcmd1bWVudHNbaV0pKTtcbiAgICB9XG4gICAgcmV0dXJuIG9iamVjdHMuam9pbignICcpO1xuICB9XG5cbiAgdmFyIGkgPSAxO1xuICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgdmFyIGxlbiA9IGFyZ3MubGVuZ3RoO1xuICB2YXIgc3RyID0gU3RyaW5nKGYpLnJlcGxhY2UoZm9ybWF0UmVnRXhwLCBmdW5jdGlvbih4KSB7XG4gICAgaWYgKHggPT09ICclJScpIHJldHVybiAnJSc7XG4gICAgaWYgKGkgPj0gbGVuKSByZXR1cm4geDtcbiAgICBzd2l0Y2ggKHgpIHtcbiAgICAgIGNhc2UgJyVzJzogcmV0dXJuIFN0cmluZyhhcmdzW2krK10pO1xuICAgICAgY2FzZSAnJWQnOiByZXR1cm4gTnVtYmVyKGFyZ3NbaSsrXSk7XG4gICAgICBjYXNlICclaic6XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZ3NbaSsrXSk7XG4gICAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgICByZXR1cm4gJ1tDaXJjdWxhcl0nO1xuICAgICAgICB9XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4geDtcbiAgICB9XG4gIH0pO1xuICBmb3IgKHZhciB4ID0gYXJnc1tpXTsgaSA8IGxlbjsgeCA9IGFyZ3NbKytpXSkge1xuICAgIGlmIChpc051bGwoeCkgfHwgIWlzT2JqZWN0KHgpKSB7XG4gICAgICBzdHIgKz0gJyAnICsgeDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RyICs9ICcgJyArIGluc3BlY3QoeCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzdHI7XG59O1xuXG5cbi8vIE1hcmsgdGhhdCBhIG1ldGhvZCBzaG91bGQgbm90IGJlIHVzZWQuXG4vLyBSZXR1cm5zIGEgbW9kaWZpZWQgZnVuY3Rpb24gd2hpY2ggd2FybnMgb25jZSBieSBkZWZhdWx0LlxuLy8gSWYgLS1uby1kZXByZWNhdGlvbiBpcyBzZXQsIHRoZW4gaXQgaXMgYSBuby1vcC5cbmV4cG9ydHMuZGVwcmVjYXRlID0gZnVuY3Rpb24oZm4sIG1zZykge1xuICAvLyBBbGxvdyBmb3IgZGVwcmVjYXRpbmcgdGhpbmdzIGluIHRoZSBwcm9jZXNzIG9mIHN0YXJ0aW5nIHVwLlxuICBpZiAoaXNVbmRlZmluZWQoZ2xvYmFsLnByb2Nlc3MpKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGV4cG9ydHMuZGVwcmVjYXRlKGZuLCBtc2cpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfVxuXG4gIGlmIChwcm9jZXNzLm5vRGVwcmVjYXRpb24gPT09IHRydWUpIHtcbiAgICByZXR1cm4gZm47XG4gIH1cblxuICB2YXIgd2FybmVkID0gZmFsc2U7XG4gIGZ1bmN0aW9uIGRlcHJlY2F0ZWQoKSB7XG4gICAgaWYgKCF3YXJuZWQpIHtcbiAgICAgIGlmIChwcm9jZXNzLnRocm93RGVwcmVjYXRpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgICB9IGVsc2UgaWYgKHByb2Nlc3MudHJhY2VEZXByZWNhdGlvbikge1xuICAgICAgICBjb25zb2xlLnRyYWNlKG1zZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKG1zZyk7XG4gICAgICB9XG4gICAgICB3YXJuZWQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIHJldHVybiBkZXByZWNhdGVkO1xufTtcblxuXG52YXIgZGVidWdzID0ge307XG52YXIgZGVidWdFbnZpcm9uO1xuZXhwb3J0cy5kZWJ1Z2xvZyA9IGZ1bmN0aW9uKHNldCkge1xuICBpZiAoaXNVbmRlZmluZWQoZGVidWdFbnZpcm9uKSlcbiAgICBkZWJ1Z0Vudmlyb24gPSBwcm9jZXNzLmVudi5OT0RFX0RFQlVHIHx8ICcnO1xuICBzZXQgPSBzZXQudG9VcHBlckNhc2UoKTtcbiAgaWYgKCFkZWJ1Z3Nbc2V0XSkge1xuICAgIGlmIChuZXcgUmVnRXhwKCdcXFxcYicgKyBzZXQgKyAnXFxcXGInLCAnaScpLnRlc3QoZGVidWdFbnZpcm9uKSkge1xuICAgICAgdmFyIHBpZCA9IHByb2Nlc3MucGlkO1xuICAgICAgZGVidWdzW3NldF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG1zZyA9IGV4cG9ydHMuZm9ybWF0LmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cyk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJyVzICVkOiAlcycsIHNldCwgcGlkLCBtc2cpO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdzW3NldF0gPSBmdW5jdGlvbigpIHt9O1xuICAgIH1cbiAgfVxuICByZXR1cm4gZGVidWdzW3NldF07XG59O1xuXG5cbi8qKlxuICogRWNob3MgdGhlIHZhbHVlIG9mIGEgdmFsdWUuIFRyeXMgdG8gcHJpbnQgdGhlIHZhbHVlIG91dFxuICogaW4gdGhlIGJlc3Qgd2F5IHBvc3NpYmxlIGdpdmVuIHRoZSBkaWZmZXJlbnQgdHlwZXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIHByaW50IG91dC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIE9wdGlvbmFsIG9wdGlvbnMgb2JqZWN0IHRoYXQgYWx0ZXJzIHRoZSBvdXRwdXQuXG4gKi9cbi8qIGxlZ2FjeTogb2JqLCBzaG93SGlkZGVuLCBkZXB0aCwgY29sb3JzKi9cbmZ1bmN0aW9uIGluc3BlY3Qob2JqLCBvcHRzKSB7XG4gIC8vIGRlZmF1bHQgb3B0aW9uc1xuICB2YXIgY3R4ID0ge1xuICAgIHNlZW46IFtdLFxuICAgIHN0eWxpemU6IHN0eWxpemVOb0NvbG9yXG4gIH07XG4gIC8vIGxlZ2FjeS4uLlxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAzKSBjdHguZGVwdGggPSBhcmd1bWVudHNbMl07XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDQpIGN0eC5jb2xvcnMgPSBhcmd1bWVudHNbM107XG4gIGlmIChpc0Jvb2xlYW4ob3B0cykpIHtcbiAgICAvLyBsZWdhY3kuLi5cbiAgICBjdHguc2hvd0hpZGRlbiA9IG9wdHM7XG4gIH0gZWxzZSBpZiAob3B0cykge1xuICAgIC8vIGdvdCBhbiBcIm9wdGlvbnNcIiBvYmplY3RcbiAgICBleHBvcnRzLl9leHRlbmQoY3R4LCBvcHRzKTtcbiAgfVxuICAvLyBzZXQgZGVmYXVsdCBvcHRpb25zXG4gIGlmIChpc1VuZGVmaW5lZChjdHguc2hvd0hpZGRlbikpIGN0eC5zaG93SGlkZGVuID0gZmFsc2U7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguZGVwdGgpKSBjdHguZGVwdGggPSAyO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmNvbG9ycykpIGN0eC5jb2xvcnMgPSBmYWxzZTtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jdXN0b21JbnNwZWN0KSkgY3R4LmN1c3RvbUluc3BlY3QgPSB0cnVlO1xuICBpZiAoY3R4LmNvbG9ycykgY3R4LnN0eWxpemUgPSBzdHlsaXplV2l0aENvbG9yO1xuICByZXR1cm4gZm9ybWF0VmFsdWUoY3R4LCBvYmosIGN0eC5kZXB0aCk7XG59XG5leHBvcnRzLmluc3BlY3QgPSBpbnNwZWN0O1xuXG5cbi8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQU5TSV9lc2NhcGVfY29kZSNncmFwaGljc1xuaW5zcGVjdC5jb2xvcnMgPSB7XG4gICdib2xkJyA6IFsxLCAyMl0sXG4gICdpdGFsaWMnIDogWzMsIDIzXSxcbiAgJ3VuZGVybGluZScgOiBbNCwgMjRdLFxuICAnaW52ZXJzZScgOiBbNywgMjddLFxuICAnd2hpdGUnIDogWzM3LCAzOV0sXG4gICdncmV5JyA6IFs5MCwgMzldLFxuICAnYmxhY2snIDogWzMwLCAzOV0sXG4gICdibHVlJyA6IFszNCwgMzldLFxuICAnY3lhbicgOiBbMzYsIDM5XSxcbiAgJ2dyZWVuJyA6IFszMiwgMzldLFxuICAnbWFnZW50YScgOiBbMzUsIDM5XSxcbiAgJ3JlZCcgOiBbMzEsIDM5XSxcbiAgJ3llbGxvdycgOiBbMzMsIDM5XVxufTtcblxuLy8gRG9uJ3QgdXNlICdibHVlJyBub3QgdmlzaWJsZSBvbiBjbWQuZXhlXG5pbnNwZWN0LnN0eWxlcyA9IHtcbiAgJ3NwZWNpYWwnOiAnY3lhbicsXG4gICdudW1iZXInOiAneWVsbG93JyxcbiAgJ2Jvb2xlYW4nOiAneWVsbG93JyxcbiAgJ3VuZGVmaW5lZCc6ICdncmV5JyxcbiAgJ251bGwnOiAnYm9sZCcsXG4gICdzdHJpbmcnOiAnZ3JlZW4nLFxuICAnZGF0ZSc6ICdtYWdlbnRhJyxcbiAgLy8gXCJuYW1lXCI6IGludGVudGlvbmFsbHkgbm90IHN0eWxpbmdcbiAgJ3JlZ2V4cCc6ICdyZWQnXG59O1xuXG5cbmZ1bmN0aW9uIHN0eWxpemVXaXRoQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHtcbiAgdmFyIHN0eWxlID0gaW5zcGVjdC5zdHlsZXNbc3R5bGVUeXBlXTtcblxuICBpZiAoc3R5bGUpIHtcbiAgICByZXR1cm4gJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVswXSArICdtJyArIHN0ciArXG4gICAgICAgICAgICdcXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMV0gKyAnbSc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIHN0eWxpemVOb0NvbG9yKHN0ciwgc3R5bGVUeXBlKSB7XG4gIHJldHVybiBzdHI7XG59XG5cblxuZnVuY3Rpb24gYXJyYXlUb0hhc2goYXJyYXkpIHtcbiAgdmFyIGhhc2ggPSB7fTtcblxuICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKHZhbCwgaWR4KSB7XG4gICAgaGFzaFt2YWxdID0gdHJ1ZTtcbiAgfSk7XG5cbiAgcmV0dXJuIGhhc2g7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0VmFsdWUoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzKSB7XG4gIC8vIFByb3ZpZGUgYSBob29rIGZvciB1c2VyLXNwZWNpZmllZCBpbnNwZWN0IGZ1bmN0aW9ucy5cbiAgLy8gQ2hlY2sgdGhhdCB2YWx1ZSBpcyBhbiBvYmplY3Qgd2l0aCBhbiBpbnNwZWN0IGZ1bmN0aW9uIG9uIGl0XG4gIGlmIChjdHguY3VzdG9tSW5zcGVjdCAmJlxuICAgICAgdmFsdWUgJiZcbiAgICAgIGlzRnVuY3Rpb24odmFsdWUuaW5zcGVjdCkgJiZcbiAgICAgIC8vIEZpbHRlciBvdXQgdGhlIHV0aWwgbW9kdWxlLCBpdCdzIGluc3BlY3QgZnVuY3Rpb24gaXMgc3BlY2lhbFxuICAgICAgdmFsdWUuaW5zcGVjdCAhPT0gZXhwb3J0cy5pbnNwZWN0ICYmXG4gICAgICAvLyBBbHNvIGZpbHRlciBvdXQgYW55IHByb3RvdHlwZSBvYmplY3RzIHVzaW5nIHRoZSBjaXJjdWxhciBjaGVjay5cbiAgICAgICEodmFsdWUuY29uc3RydWN0b3IgJiYgdmFsdWUuY29uc3RydWN0b3IucHJvdG90eXBlID09PSB2YWx1ZSkpIHtcbiAgICB2YXIgcmV0ID0gdmFsdWUuaW5zcGVjdChyZWN1cnNlVGltZXMsIGN0eCk7XG4gICAgaWYgKCFpc1N0cmluZyhyZXQpKSB7XG4gICAgICByZXQgPSBmb3JtYXRWYWx1ZShjdHgsIHJldCwgcmVjdXJzZVRpbWVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIC8vIFByaW1pdGl2ZSB0eXBlcyBjYW5ub3QgaGF2ZSBwcm9wZXJ0aWVzXG4gIHZhciBwcmltaXRpdmUgPSBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSk7XG4gIGlmIChwcmltaXRpdmUpIHtcbiAgICByZXR1cm4gcHJpbWl0aXZlO1xuICB9XG5cbiAgLy8gTG9vayB1cCB0aGUga2V5cyBvZiB0aGUgb2JqZWN0LlxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcbiAgdmFyIHZpc2libGVLZXlzID0gYXJyYXlUb0hhc2goa2V5cyk7XG5cbiAgaWYgKGN0eC5zaG93SGlkZGVuKSB7XG4gICAga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlKTtcbiAgfVxuXG4gIC8vIElFIGRvZXNuJ3QgbWFrZSBlcnJvciBmaWVsZHMgbm9uLWVudW1lcmFibGVcbiAgLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2R3dzUyc2J0KHY9dnMuOTQpLmFzcHhcbiAgaWYgKGlzRXJyb3IodmFsdWUpXG4gICAgICAmJiAoa2V5cy5pbmRleE9mKCdtZXNzYWdlJykgPj0gMCB8fCBrZXlzLmluZGV4T2YoJ2Rlc2NyaXB0aW9uJykgPj0gMCkpIHtcbiAgICByZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpO1xuICB9XG5cbiAgLy8gU29tZSB0eXBlIG9mIG9iamVjdCB3aXRob3V0IHByb3BlcnRpZXMgY2FuIGJlIHNob3J0Y3V0dGVkLlxuICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHtcbiAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgIHZhciBuYW1lID0gdmFsdWUubmFtZSA/ICc6ICcgKyB2YWx1ZS5uYW1lIDogJyc7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tGdW5jdGlvbicgKyBuYW1lICsgJ10nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuICAgIH1cbiAgICBpZiAoaXNEYXRlKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAnZGF0ZScpO1xuICAgIH1cbiAgICBpZiAoaXNFcnJvcih2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGJhc2UgPSAnJywgYXJyYXkgPSBmYWxzZSwgYnJhY2VzID0gWyd7JywgJ30nXTtcblxuICAvLyBNYWtlIEFycmF5IHNheSB0aGF0IHRoZXkgYXJlIEFycmF5XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGFycmF5ID0gdHJ1ZTtcbiAgICBicmFjZXMgPSBbJ1snLCAnXSddO1xuICB9XG5cbiAgLy8gTWFrZSBmdW5jdGlvbnMgc2F5IHRoYXQgdGhleSBhcmUgZnVuY3Rpb25zXG4gIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgIHZhciBuID0gdmFsdWUubmFtZSA/ICc6ICcgKyB2YWx1ZS5uYW1lIDogJyc7XG4gICAgYmFzZSA9ICcgW0Z1bmN0aW9uJyArIG4gKyAnXSc7XG4gIH1cblxuICAvLyBNYWtlIFJlZ0V4cHMgc2F5IHRoYXQgdGhleSBhcmUgUmVnRXhwc1xuICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG4gIH1cblxuICAvLyBNYWtlIGRhdGVzIHdpdGggcHJvcGVydGllcyBmaXJzdCBzYXkgdGhlIGRhdGVcbiAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgRGF0ZS5wcm90b3R5cGUudG9VVENTdHJpbmcuY2FsbCh2YWx1ZSk7XG4gIH1cblxuICAvLyBNYWtlIGVycm9yIHdpdGggbWVzc2FnZSBmaXJzdCBzYXkgdGhlIGVycm9yXG4gIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gIH1cblxuICBpZiAoa2V5cy5sZW5ndGggPT09IDAgJiYgKCFhcnJheSB8fCB2YWx1ZS5sZW5ndGggPT0gMCkpIHtcbiAgICByZXR1cm4gYnJhY2VzWzBdICsgYmFzZSArIGJyYWNlc1sxXTtcbiAgfVxuXG4gIGlmIChyZWN1cnNlVGltZXMgPCAwKSB7XG4gICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbT2JqZWN0XScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG5cbiAgY3R4LnNlZW4ucHVzaCh2YWx1ZSk7XG5cbiAgdmFyIG91dHB1dDtcbiAgaWYgKGFycmF5KSB7XG4gICAgb3V0cHV0ID0gZm9ybWF0QXJyYXkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5cyk7XG4gIH0gZWxzZSB7XG4gICAgb3V0cHV0ID0ga2V5cy5tYXAoZnVuY3Rpb24oa2V5KSB7XG4gICAgICByZXR1cm4gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSk7XG4gICAgfSk7XG4gIH1cblxuICBjdHguc2Vlbi5wb3AoKTtcblxuICByZXR1cm4gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFByaW1pdGl2ZShjdHgsIHZhbHVlKSB7XG4gIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCd1bmRlZmluZWQnLCAndW5kZWZpbmVkJyk7XG4gIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICB2YXIgc2ltcGxlID0gJ1xcJycgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkucmVwbGFjZSgvXlwifFwiJC9nLCAnJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8nL2csIFwiXFxcXCdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJykgKyAnXFwnJztcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoc2ltcGxlLCAnc3RyaW5nJyk7XG4gIH1cbiAgaWYgKGlzTnVtYmVyKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ251bWJlcicpO1xuICBpZiAoaXNCb29sZWFuKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ2Jvb2xlYW4nKTtcbiAgLy8gRm9yIHNvbWUgcmVhc29uIHR5cGVvZiBudWxsIGlzIFwib2JqZWN0XCIsIHNvIHNwZWNpYWwgY2FzZSBoZXJlLlxuICBpZiAoaXNOdWxsKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJ251bGwnLCAnbnVsbCcpO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdEVycm9yKHZhbHVlKSB7XG4gIHJldHVybiAnWycgKyBFcnJvci5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgKyAnXSc7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0QXJyYXkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5cykge1xuICB2YXIgb3V0cHV0ID0gW107XG4gIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgaWYgKGhhc093blByb3BlcnR5KHZhbHVlLCBTdHJpbmcoaSkpKSB7XG4gICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuICAgICAgICAgIFN0cmluZyhpKSwgdHJ1ZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvdXRwdXQucHVzaCgnJyk7XG4gICAgfVxuICB9XG4gIGtleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICBpZiAoIWtleS5tYXRjaCgvXlxcZCskLykpIHtcbiAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG4gICAgICAgICAga2V5LCB0cnVlKSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KSB7XG4gIHZhciBuYW1lLCBzdHIsIGRlc2M7XG4gIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHZhbHVlLCBrZXkpIHx8IHsgdmFsdWU6IHZhbHVlW2tleV0gfTtcbiAgaWYgKGRlc2MuZ2V0KSB7XG4gICAgaWYgKGRlc2Muc2V0KSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlci9TZXR0ZXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tHZXR0ZXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGRlc2Muc2V0KSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuICBpZiAoIWhhc093blByb3BlcnR5KHZpc2libGVLZXlzLCBrZXkpKSB7XG4gICAgbmFtZSA9ICdbJyArIGtleSArICddJztcbiAgfVxuICBpZiAoIXN0cikge1xuICAgIGlmIChjdHguc2Vlbi5pbmRleE9mKGRlc2MudmFsdWUpIDwgMCkge1xuICAgICAgaWYgKGlzTnVsbChyZWN1cnNlVGltZXMpKSB7XG4gICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIGRlc2MudmFsdWUsIHJlY3Vyc2VUaW1lcyAtIDEpO1xuICAgICAgfVxuICAgICAgaWYgKHN0ci5pbmRleE9mKCdcXG4nKSA+IC0xKSB7XG4gICAgICAgIGlmIChhcnJheSkge1xuICAgICAgICAgIHN0ciA9IHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybiAnICAnICsgbGluZTtcbiAgICAgICAgICB9KS5qb2luKCdcXG4nKS5zdWJzdHIoMik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyID0gJ1xcbicgKyBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgICAgICByZXR1cm4gJyAgICcgKyBsaW5lO1xuICAgICAgICAgIH0pLmpvaW4oJ1xcbicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbQ2lyY3VsYXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cbiAgaWYgKGlzVW5kZWZpbmVkKG5hbWUpKSB7XG4gICAgaWYgKGFycmF5ICYmIGtleS5tYXRjaCgvXlxcZCskLykpIHtcbiAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICAgIG5hbWUgPSBKU09OLnN0cmluZ2lmeSgnJyArIGtleSk7XG4gICAgaWYgKG5hbWUubWF0Y2goL15cIihbYS16QS1aX11bYS16QS1aXzAtOV0qKVwiJC8pKSB7XG4gICAgICBuYW1lID0gbmFtZS5zdWJzdHIoMSwgbmFtZS5sZW5ndGggLSAyKTtcbiAgICAgIG5hbWUgPSBjdHguc3R5bGl6ZShuYW1lLCAnbmFtZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC8nL2csIFwiXFxcXCdcIilcbiAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKVxuICAgICAgICAgICAgICAgICAucmVwbGFjZSgvKF5cInxcIiQpL2csIFwiJ1wiKTtcbiAgICAgIG5hbWUgPSBjdHguc3R5bGl6ZShuYW1lLCAnc3RyaW5nJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5hbWUgKyAnOiAnICsgc3RyO1xufVxuXG5cbmZ1bmN0aW9uIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKSB7XG4gIHZhciBudW1MaW5lc0VzdCA9IDA7XG4gIHZhciBsZW5ndGggPSBvdXRwdXQucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGN1cikge1xuICAgIG51bUxpbmVzRXN0Kys7XG4gICAgaWYgKGN1ci5pbmRleE9mKCdcXG4nKSA+PSAwKSBudW1MaW5lc0VzdCsrO1xuICAgIHJldHVybiBwcmV2ICsgY3VyLnJlcGxhY2UoL1xcdTAwMWJcXFtcXGRcXGQ/bS9nLCAnJykubGVuZ3RoICsgMTtcbiAgfSwgMCk7XG5cbiAgaWYgKGxlbmd0aCA+IDYwKSB7XG4gICAgcmV0dXJuIGJyYWNlc1swXSArXG4gICAgICAgICAgIChiYXNlID09PSAnJyA/ICcnIDogYmFzZSArICdcXG4gJykgK1xuICAgICAgICAgICAnICcgK1xuICAgICAgICAgICBvdXRwdXQuam9pbignLFxcbiAgJykgK1xuICAgICAgICAgICAnICcgK1xuICAgICAgICAgICBicmFjZXNbMV07XG4gIH1cblxuICByZXR1cm4gYnJhY2VzWzBdICsgYmFzZSArICcgJyArIG91dHB1dC5qb2luKCcsICcpICsgJyAnICsgYnJhY2VzWzFdO1xufVxuXG5cbi8vIE5PVEU6IFRoZXNlIHR5cGUgY2hlY2tpbmcgZnVuY3Rpb25zIGludGVudGlvbmFsbHkgZG9uJ3QgdXNlIGBpbnN0YW5jZW9mYFxuLy8gYmVjYXVzZSBpdCBpcyBmcmFnaWxlIGFuZCBjYW4gYmUgZWFzaWx5IGZha2VkIHdpdGggYE9iamVjdC5jcmVhdGUoKWAuXG5mdW5jdGlvbiBpc0FycmF5KGFyKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KGFyKTtcbn1cbmV4cG9ydHMuaXNBcnJheSA9IGlzQXJyYXk7XG5cbmZ1bmN0aW9uIGlzQm9vbGVhbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJztcbn1cbmV4cG9ydHMuaXNCb29sZWFuID0gaXNCb29sZWFuO1xuXG5mdW5jdGlvbiBpc051bGwoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGw7XG59XG5leHBvcnRzLmlzTnVsbCA9IGlzTnVsbDtcblxuZnVuY3Rpb24gaXNOdWxsT3JVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsT3JVbmRlZmluZWQgPSBpc051bGxPclVuZGVmaW5lZDtcblxuZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJztcbn1cbmV4cG9ydHMuaXNOdW1iZXIgPSBpc051bWJlcjtcblxuZnVuY3Rpb24gaXNTdHJpbmcoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3RyaW5nJztcbn1cbmV4cG9ydHMuaXNTdHJpbmcgPSBpc1N0cmluZztcblxuZnVuY3Rpb24gaXNTeW1ib2woYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3ltYm9sJztcbn1cbmV4cG9ydHMuaXNTeW1ib2wgPSBpc1N5bWJvbDtcblxuZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IHZvaWQgMDtcbn1cbmV4cG9ydHMuaXNVbmRlZmluZWQgPSBpc1VuZGVmaW5lZDtcblxuZnVuY3Rpb24gaXNSZWdFeHAocmUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KHJlKSAmJiBvYmplY3RUb1N0cmluZyhyZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufVxuZXhwb3J0cy5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcblxuZnVuY3Rpb24gaXNEYXRlKGQpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KGQpICYmIG9iamVjdFRvU3RyaW5nKGQpID09PSAnW29iamVjdCBEYXRlXSc7XG59XG5leHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTtcblxuZnVuY3Rpb24gaXNFcnJvcihlKSB7XG4gIHJldHVybiBpc09iamVjdChlKSAmJlxuICAgICAgKG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nIHx8IGUgaW5zdGFuY2VvZiBFcnJvcik7XG59XG5leHBvcnRzLmlzRXJyb3IgPSBpc0Vycm9yO1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cbmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcgfHwgIC8vIEVTNiBzeW1ib2xcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnO1xufVxuZXhwb3J0cy5pc1ByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlO1xuXG5leHBvcnRzLmlzQnVmZmVyID0gcmVxdWlyZSgnLi9zdXBwb3J0L2lzQnVmZmVyJyk7XG5cbmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKG8pIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcbn1cblxuXG5mdW5jdGlvbiBwYWQobikge1xuICByZXR1cm4gbiA8IDEwID8gJzAnICsgbi50b1N0cmluZygxMCkgOiBuLnRvU3RyaW5nKDEwKTtcbn1cblxuXG52YXIgbW9udGhzID0gWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsXG4gICAgICAgICAgICAgICdPY3QnLCAnTm92JywgJ0RlYyddO1xuXG4vLyAyNiBGZWIgMTY6MTk6MzRcbmZ1bmN0aW9uIHRpbWVzdGFtcCgpIHtcbiAgdmFyIGQgPSBuZXcgRGF0ZSgpO1xuICB2YXIgdGltZSA9IFtwYWQoZC5nZXRIb3VycygpKSxcbiAgICAgICAgICAgICAgcGFkKGQuZ2V0TWludXRlcygpKSxcbiAgICAgICAgICAgICAgcGFkKGQuZ2V0U2Vjb25kcygpKV0uam9pbignOicpO1xuICByZXR1cm4gW2QuZ2V0RGF0ZSgpLCBtb250aHNbZC5nZXRNb250aCgpXSwgdGltZV0uam9pbignICcpO1xufVxuXG5cbi8vIGxvZyBpcyBqdXN0IGEgdGhpbiB3cmFwcGVyIHRvIGNvbnNvbGUubG9nIHRoYXQgcHJlcGVuZHMgYSB0aW1lc3RhbXBcbmV4cG9ydHMubG9nID0gZnVuY3Rpb24oKSB7XG4gIGNvbnNvbGUubG9nKCclcyAtICVzJywgdGltZXN0YW1wKCksIGV4cG9ydHMuZm9ybWF0LmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cykpO1xufTtcblxuXG4vKipcbiAqIEluaGVyaXQgdGhlIHByb3RvdHlwZSBtZXRob2RzIGZyb20gb25lIGNvbnN0cnVjdG9yIGludG8gYW5vdGhlci5cbiAqXG4gKiBUaGUgRnVuY3Rpb24ucHJvdG90eXBlLmluaGVyaXRzIGZyb20gbGFuZy5qcyByZXdyaXR0ZW4gYXMgYSBzdGFuZGFsb25lXG4gKiBmdW5jdGlvbiAobm90IG9uIEZ1bmN0aW9uLnByb3RvdHlwZSkuIE5PVEU6IElmIHRoaXMgZmlsZSBpcyB0byBiZSBsb2FkZWRcbiAqIGR1cmluZyBib290c3RyYXBwaW5nIHRoaXMgZnVuY3Rpb24gbmVlZHMgdG8gYmUgcmV3cml0dGVuIHVzaW5nIHNvbWUgbmF0aXZlXG4gKiBmdW5jdGlvbnMgYXMgcHJvdG90eXBlIHNldHVwIHVzaW5nIG5vcm1hbCBKYXZhU2NyaXB0IGRvZXMgbm90IHdvcmsgYXNcbiAqIGV4cGVjdGVkIGR1cmluZyBib290c3RyYXBwaW5nIChzZWUgbWlycm9yLmpzIGluIHIxMTQ5MDMpLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGN0b3IgQ29uc3RydWN0b3IgZnVuY3Rpb24gd2hpY2ggbmVlZHMgdG8gaW5oZXJpdCB0aGVcbiAqICAgICBwcm90b3R5cGUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBzdXBlckN0b3IgQ29uc3RydWN0b3IgZnVuY3Rpb24gdG8gaW5oZXJpdCBwcm90b3R5cGUgZnJvbS5cbiAqL1xuZXhwb3J0cy5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG5cbmV4cG9ydHMuX2V4dGVuZCA9IGZ1bmN0aW9uKG9yaWdpbiwgYWRkKSB7XG4gIC8vIERvbid0IGRvIGFueXRoaW5nIGlmIGFkZCBpc24ndCBhbiBvYmplY3RcbiAgaWYgKCFhZGQgfHwgIWlzT2JqZWN0KGFkZCkpIHJldHVybiBvcmlnaW47XG5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhZGQpO1xuICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgb3JpZ2luW2tleXNbaV1dID0gYWRkW2tleXNbaV1dO1xuICB9XG4gIHJldHVybiBvcmlnaW47XG59O1xuXG5mdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xufVxuIiwiLypcbm9iamVjdC1hc3NpZ25cbihjKSBTaW5kcmUgU29yaHVzXG5AbGljZW5zZSBNSVRcbiovXG5cbid1c2Ugc3RyaWN0Jztcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG52YXIgZ2V0T3duUHJvcGVydHlTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgcHJvcElzRW51bWVyYWJsZSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG5cbmZ1bmN0aW9uIHRvT2JqZWN0KHZhbCkge1xuXHRpZiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmFzc2lnbiBjYW5ub3QgYmUgY2FsbGVkIHdpdGggbnVsbCBvciB1bmRlZmluZWQnKTtcblx0fVxuXG5cdHJldHVybiBPYmplY3QodmFsKTtcbn1cblxuZnVuY3Rpb24gc2hvdWxkVXNlTmF0aXZlKCkge1xuXHR0cnkge1xuXHRcdGlmICghT2JqZWN0LmFzc2lnbikge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIERldGVjdCBidWdneSBwcm9wZXJ0eSBlbnVtZXJhdGlvbiBvcmRlciBpbiBvbGRlciBWOCB2ZXJzaW9ucy5cblxuXHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTQxMThcblx0XHR2YXIgdGVzdDEgPSBuZXcgU3RyaW5nKCdhYmMnKTsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3LXdyYXBwZXJzXG5cdFx0dGVzdDFbNV0gPSAnZGUnO1xuXHRcdGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0ZXN0MSlbMF0gPT09ICc1Jykge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMwNTZcblx0XHR2YXIgdGVzdDIgPSB7fTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHtcblx0XHRcdHRlc3QyWydfJyArIFN0cmluZy5mcm9tQ2hhckNvZGUoaSldID0gaTtcblx0XHR9XG5cdFx0dmFyIG9yZGVyMiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRlc3QyKS5tYXAoZnVuY3Rpb24gKG4pIHtcblx0XHRcdHJldHVybiB0ZXN0MltuXTtcblx0XHR9KTtcblx0XHRpZiAob3JkZXIyLmpvaW4oJycpICE9PSAnMDEyMzQ1Njc4OScpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMDU2XG5cdFx0dmFyIHRlc3QzID0ge307XG5cdFx0J2FiY2RlZmdoaWprbG1ub3BxcnN0Jy5zcGxpdCgnJykuZm9yRWFjaChmdW5jdGlvbiAobGV0dGVyKSB7XG5cdFx0XHR0ZXN0M1tsZXR0ZXJdID0gbGV0dGVyO1xuXHRcdH0pO1xuXHRcdGlmIChPYmplY3Qua2V5cyhPYmplY3QuYXNzaWduKHt9LCB0ZXN0MykpLmpvaW4oJycpICE9PVxuXHRcdFx0XHQnYWJjZGVmZ2hpamtsbW5vcHFyc3QnKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRydWU7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdC8vIFdlIGRvbid0IGV4cGVjdCBhbnkgb2YgdGhlIGFib3ZlIHRvIHRocm93LCBidXQgYmV0dGVyIHRvIGJlIHNhZmUuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2hvdWxkVXNlTmF0aXZlKCkgPyBPYmplY3QuYXNzaWduIDogZnVuY3Rpb24gKHRhcmdldCwgc291cmNlKSB7XG5cdHZhciBmcm9tO1xuXHR2YXIgdG8gPSB0b09iamVjdCh0YXJnZXQpO1xuXHR2YXIgc3ltYm9scztcblxuXHRmb3IgKHZhciBzID0gMTsgcyA8IGFyZ3VtZW50cy5sZW5ndGg7IHMrKykge1xuXHRcdGZyb20gPSBPYmplY3QoYXJndW1lbnRzW3NdKTtcblxuXHRcdGZvciAodmFyIGtleSBpbiBmcm9tKSB7XG5cdFx0XHRpZiAoaGFzT3duUHJvcGVydHkuY2FsbChmcm9tLCBrZXkpKSB7XG5cdFx0XHRcdHRvW2tleV0gPSBmcm9tW2tleV07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGdldE93blByb3BlcnR5U3ltYm9scykge1xuXHRcdFx0c3ltYm9scyA9IGdldE93blByb3BlcnR5U3ltYm9scyhmcm9tKTtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3ltYm9scy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAocHJvcElzRW51bWVyYWJsZS5jYWxsKGZyb20sIHN5bWJvbHNbaV0pKSB7XG5cdFx0XHRcdFx0dG9bc3ltYm9sc1tpXV0gPSBmcm9tW3N5bWJvbHNbaV1dO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHRvO1xufTtcbiIsIi8qXHJcbiAqIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIEFkYmxvY2sgUGx1cyA8aHR0cHM6Ly9hZGJsb2NrcGx1cy5vcmcvPixcclxuICogQ29weXJpZ2h0IChDKSAyMDA2LXByZXNlbnQgZXllbyBHbWJIXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XHJcbiAqIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbiAzIGFzXHJcbiAqIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLlxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCxcclxuICogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2ZcclxuICogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZVxyXG4gKiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxyXG4gKlxyXG4gKiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxyXG4gKiBhbG9uZyB3aXRoIEFkYmxvY2sgUGx1cy4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cclxuICovXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmNvbnN0IHtub3RpZmljYXRpb25zfSA9IHJlcXVpcmUoXCJub3RpZmljYXRpb25zXCIpO1xyXG5jb25zdCB7UHJlZnN9ID0gcmVxdWlyZShcInByZWZzXCIpO1xyXG5jb25zdCB7U3RhdHN9ID0gcmVxdWlyZShcInN0YXRzXCIpO1xyXG5cclxuY29uc3Qge2NvcmVMb2NhbGVzfSA9IHJlcXVpcmUoXCIuLi9kYXRhL2xvY2FsZXMuanNvblwiKTtcclxuXHJcbmNvbnN0IERFTEFZX0lOX01TID0gMzAgKiA2MCAqIDEwMDA7XHJcbmNvbnN0IE1JTl9CTE9DS0VEID0gNTU7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBpc0FuZHJvaWQoKVxyXG57XHJcbiAgY29uc3QgcGxhdGZvcm1JbmZvID0gYXdhaXQgYnJvd3Nlci5ydW50aW1lLmdldFBsYXRmb3JtSW5mbygpO1xyXG4gIHJldHVybiBwbGF0Zm9ybUluZm8ub3MgPT0gXCJhbmRyb2lkXCI7XHJcbn1cclxuXHJcbmV4cG9ydHMuaW5pdERheTFOb3RpZmljYXRpb24gPSBhc3luYyBmdW5jdGlvbiBpbml0RGF5MU5vdGlmaWNhdGlvbigpXHJcbntcclxuICBpZiAoKGF3YWl0IGlzQW5kcm9pZCgpKSB8fCBQcmVmcy5zdXBwcmVzc19maXJzdF9ydW5fcGFnZSlcclxuICAgIHJldHVybjtcclxuXHJcbiAgc2V0VGltZW91dCgoKSA9PlxyXG4gIHtcclxuICAgIC8vIFdlIGRvbid0IGtub3cgd2hhdCBleGFjdGx5IHRoZSBibG9ja2VkIGNvdW50IHdpbGwgYmUgd2hlblxyXG4gICAgLy8gdGhlIG5vdGlmaWNhdGlvbiB3aWxsIGJlIHNob3duIGJ1dCB3ZSBleHBlY3QgaXQgdG8gYmUgc2hvd25cclxuICAgIC8vIGltbWVkaWF0ZWx5IGFmdGVyIGl0IHN1cnBhc3NlcyB0aGUgdGhyZXNob2xkXHJcbiAgICBsZXQgYmxvY2tlZENvdW50ID0gU3RhdHMuYmxvY2tlZF90b3RhbDtcclxuICAgIGlmIChibG9ja2VkQ291bnQgPCBNSU5fQkxPQ0tFRClcclxuICAgIHtcclxuICAgICAgYmxvY2tlZENvdW50ID0gTUlOX0JMT0NLRUQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgbm90aWZpY2F0aW9uID0ge1xyXG4gICAgICBpZDogXCJkYXkxXCIsXHJcbiAgICAgIHR5cGU6IFwibm9ybWFsXCIsXHJcbiAgICAgIHRpdGxlOiBicm93c2VyLmkxOG4uZ2V0TWVzc2FnZShcIm5vdGlmaWNhdGlvbl9kYXkxX3RpdGxlXCIsIFtibG9ja2VkQ291bnRdKSxcclxuICAgICAgbWVzc2FnZTogYnJvd3Nlci5pMThuLmdldE1lc3NhZ2UoXCJub3RpZmljYXRpb25fZGF5MV9tZXNzYWdlXCIpLFxyXG4gICAgICBsaW5rczogW1wiYWJwOmRheTFcIl0sXHJcbiAgICAgIHRhcmdldHM6IFtcclxuICAgICAgICB7YmxvY2tlZFRvdGFsTWluOiBNSU5fQkxPQ0tFRH1cclxuICAgICAgXVxyXG4gICAgfTtcclxuXHJcbiAgICBub3RpZmljYXRpb25zLmFkZE5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pO1xyXG4gICAgbm90aWZpY2F0aW9ucy5zaG93TmV4dCgpO1xyXG4gIH0sIERFTEFZX0lOX01TKTtcclxufTtcclxuXHJcbmV4cG9ydHMuc2hvd1Byb2JsZW1Ob3RpZmljYXRpb24gPSBhc3luYygpID0+XHJcbntcclxuICBpZiAoYXdhaXQgaXNBbmRyb2lkKCkpXHJcbiAgICByZXR1cm47XHJcblxyXG4gIGNvbnN0IGxvY2FsZSA9IGJyb3dzZXIuaTE4bi5nZXRVSUxhbmd1YWdlKCk7XHJcblxyXG4gIC8vIER1ZSB0byBhIHJhY2UgY29uZGl0aW9uLCB3ZSBjYW5ub3QgcmVsaWFibHkgdGFyZ2V0IHRoZSBub3RpZmljYXRpb24gdG9cclxuICAvLyBvbmx5IGNlcnRhaW4gbG9jYWxlcy4gVGhlcmVmb3JlIHdlIGhhdmUgdG8gaW1wbGVtZW50IHRoaXMgY2hlY2sgb3Vyc2VsdmVzLlxyXG4gIC8vIGh0dHBzOi8vZ2l0bGFiLmNvbS9leWVvL2FkYmxvY2twbHVzL2FkYmxvY2twbHVzY2hyb21lL2lzc3Vlcy8xMzVcclxuICBub3RpZmljYXRpb25zLnNob3dOb3RpZmljYXRpb24oe1xyXG4gICAgaWQ6IFwicHJvYmxlbVwiLFxyXG4gICAgdHlwZTogL14oPzpkZXxmcilcXGIvLnRlc3QobG9jYWxlKSA/IFwiaW5mb3JtYXRpb25cIiA6IG51bGwsXHJcbiAgICBtZXNzYWdlOiBicm93c2VyLmkxOG4uZ2V0TWVzc2FnZShcIm5vdGlmaWNhdGlvbl9wcm9ibGVtX21lc3NhZ2VcIiksXHJcbiAgICBsaW5rczogW1wiYWJwOnByb2JsZW1cIl1cclxuICB9KTtcclxufTtcclxuXHJcbmV4cG9ydHMuc2hvd1VwZGF0ZXNOb3RpZmljYXRpb24gPSBhc3luYygpID0+XHJcbntcclxuICBpZiAoYXdhaXQgaXNBbmRyb2lkKCkpXHJcbiAgICByZXR1cm47XHJcblxyXG4gIGNvbnN0IGxvY2FsZSA9IGJyb3dzZXIuaTE4bi5nZXRVSUxhbmd1YWdlKCk7XHJcbiAgLy8gRHVlIHRvIGEgcmFjZSBjb25kaXRpb24sIHdlIGNhbm5vdCByZWxpYWJseSB0YXJnZXQgdGhlIG5vdGlmaWNhdGlvbiB0b1xyXG4gIC8vIG9ubHkgY2VydGFpbiBsb2NhbGVzLiBUaGVyZWZvcmUgd2UgaGF2ZSB0byBpbXBsZW1lbnQgdGhpcyBjaGVjayBvdXJzZWx2ZXMuXHJcbiAgLy8gaHR0cHM6Ly9naXRsYWIuY29tL2V5ZW8vYWRibG9ja3BsdXMvYWRibG9ja3BsdXNjaHJvbWUvaXNzdWVzLzEzNVxyXG4gIGlmICghY29yZUxvY2FsZXMuaW5jbHVkZXMobG9jYWxlKSlcclxuICB7XHJcbiAgICAvLyBUaGF0IHNwZWNpZmljIGxvY2FsZSBtYXkgbm90IGJlIHBhcnQgb2Ygb3VyIGNvcmUgbGFuZ3VhZ2VzLiBIb3dldmVyLFxyXG4gICAgLy8gdGhlIGxhbmd1YWdlIGl0IGJlbG9uZ3MgdG8gbWF5IGJlLiBUaGVyZWZvcmUgd2UgYXJlIGFibGUgdG8gc2hvdyB0aGVcclxuICAgIC8vIHVwZGF0ZXMgcGFnZSB3aXRoIHRob3NlIHRyYW5zbGF0aW9ucyBpbnN0ZWFkLlxyXG4gICAgY29uc3QgW2xhbmd1YWdlXSA9IGxvY2FsZS5zcGxpdChcIi1cIik7XHJcbiAgICBpZiAoIWNvcmVMb2NhbGVzLmluY2x1ZGVzKGxhbmd1YWdlKSlcclxuICAgICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgbm90aWZpY2F0aW9ucy5zaG93Tm90aWZpY2F0aW9uKHtcclxuICAgIGlkOiBcInVwZGF0ZXNcIixcclxuICAgIHR5cGU6IFwiaW5mb3JtYXRpb25cIixcclxuICAgIHRpdGxlOiBicm93c2VyLmkxOG4uZ2V0TWVzc2FnZShcIm5vdGlmaWNhdGlvbl91cGRhdGVzX3RpdGxlXCIpLFxyXG4gICAgbWVzc2FnZTogYnJvd3Nlci5pMThuLmdldE1lc3NhZ2UoXCJub3RpZmljYXRpb25fdXBkYXRlc19tZXNzYWdlXCIpLFxyXG4gICAgbGlua3M6IFtcImFicDp1cGRhdGVzXCJdXHJcbiAgfSwge2lnbm9yYWJsZTogdHJ1ZX0pO1xyXG59O1xyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IHNlbGY7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3Rcbi8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuLy8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4vLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3Rcbi8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbl9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG5cdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IHRoaXModmFsdWUpO1xuXHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuXHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuXHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuXHR2YXIgZGVmID0ge307XG5cdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB2YWx1ZSkge1xuXHRcdGZvcihjb25zdCBrZXkgaW4gdmFsdWUpIGRlZltrZXldID0gKCkgPT4gdmFsdWVba2V5XTtcblx0fVxuXHRkZWZbJ2RlZmF1bHQnXSA9ICgpID0+IHZhbHVlO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGRlZik7XG5cdHJldHVybiBucztcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvKlxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBBZGJsb2NrIFBsdXMgPGh0dHBzOi8vYWRibG9ja3BsdXMub3JnLz4sXHJcbiAqIENvcHlyaWdodCAoQykgMjAwNi1wcmVzZW50IGV5ZW8gR21iSFxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBhc1xyXG4gKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICpcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCBBZGJsb2NrIFBsdXMuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqL1xyXG5cclxuLyoqIEBtb2R1bGUgZmlsdGVyQ29tcG9zZXIgKi9cclxuXHJcbmltcG9ydCB7ZGVmYXVsdE1hdGNoZXJ9IGZyb20gXCIuLi9hZGJsb2NrcGx1c2NvcmUvbGliL21hdGNoZXIuanNcIjtcclxuaW1wb3J0IHtjb250ZW50VHlwZXN9IGZyb20gXCIuLi9hZGJsb2NrcGx1c2NvcmUvbGliL2NvbnRlbnRUeXBlcy5qc1wiO1xyXG5pbXBvcnQge2ZpbHRlck5vdGlmaWVyfSBmcm9tIFwiLi4vYWRibG9ja3BsdXNjb3JlL2xpYi9maWx0ZXJOb3RpZmllci5qc1wiO1xyXG5pbXBvcnQge1ByZWZzfSBmcm9tIFwiLi9wcmVmcy5qc1wiO1xyXG5pbXBvcnQge2V4dHJhY3RIb3N0RnJvbUZyYW1lfSBmcm9tIFwiLi91cmwuanNcIjtcclxuaW1wb3J0IHtnZXRLZXksIGNoZWNrQWxsb3dsaXN0ZWR9IGZyb20gXCIuL2FsbG93bGlzdGluZy5qc1wiO1xyXG5pbXBvcnQge3BvcnR9IGZyb20gXCIuL21lc3NhZ2luZy5qc1wiO1xyXG5pbXBvcnQgKiBhcyBpbmZvIGZyb20gXCJpbmZvXCI7XHJcblxyXG5mdW5jdGlvbiBpc1ZhbGlkU3RyaW5nKHMpXHJcbntcclxuICByZXR1cm4gcyAmJiBzLmluZGV4T2YoXCJcXDBcIikgPT0gLTE7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVzY2FwZUNoYXIoY2hyKVxyXG57XHJcbiAgbGV0IGNvZGUgPSBjaHIuY2hhckNvZGVBdCgwKTtcclxuXHJcbiAgLy8gQ29udHJvbCBjaGFyYWN0ZXJzIGFuZCBsZWFkaW5nIGRpZ2l0cyBtdXN0IGJlIGVzY2FwZWQgYmFzZWQgb25cclxuICAvLyB0aGVpciBjaGFyIGNvZGUgaW4gQ1NTLiBNb3Jlb3ZlciwgY3VybHkgYnJhY2tldHMgYXJlbid0IGFsbG93ZWRcclxuICAvLyBpbiBlbGVtaGlkZSBmaWx0ZXJzLCBhbmQgdGhlcmVmb3JlIG11c3QgYmUgZXNjYXBlZCBiYXNlZCBvbiB0aGVpclxyXG4gIC8vIGNoYXIgY29kZSBhcyB3ZWxsLlxyXG4gIGlmIChjb2RlIDw9IDB4MUYgfHwgY29kZSA9PSAweDdGIHx8IC9bXFxke31dLy50ZXN0KGNocikpXHJcbiAgICByZXR1cm4gXCJcXFxcXCIgKyBjb2RlLnRvU3RyaW5nKDE2KSArIFwiIFwiO1xyXG5cclxuICByZXR1cm4gXCJcXFxcXCIgKyBjaHI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFc2NhcGVzIGEgdG9rZW4gKGUuZy4gdGFnLCBpZCwgY2xhc3Mgb3IgYXR0cmlidXRlKSB0byBiZSB1c2VkIGluXHJcbiAqIENTUyBzZWxlY3RvcnMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzXHJcbiAqIEByZXR1cm4ge3N0cmluZ31cclxuICogQHN0YXRpY1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZUNTUyhzKVxyXG57XHJcbiAgcmV0dXJuIHMucmVwbGFjZSgvXltcXGQtXXxbXlxcd1xcLVxcdTAwODAtXFx1RkZGRl0vZywgZXNjYXBlQ2hhcik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBRdW90ZXMgYSBzdHJpbmcgdG8gYmUgdXNlZCBhcyBhdHRyaWJ1dGUgdmFsdWUgaW4gQ1NTIHNlbGVjdG9ycy5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXHJcbiAqIEByZXR1cm4ge3N0cmluZ31cclxuICogQHN0YXRpY1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHF1b3RlQ1NTKHZhbHVlKVxyXG57XHJcbiAgcmV0dXJuICdcIicgKyB2YWx1ZS5yZXBsYWNlKC9bXCJcXFxce31cXHgwMC1cXHgxRlxceDdGXS9nLCBlc2NhcGVDaGFyKSArICdcIic7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbXBvc2VGaWx0ZXJzKGRldGFpbHMpXHJcbntcclxuICBsZXQge3BhZ2UsIGZyYW1lfSA9IGRldGFpbHM7XHJcbiAgbGV0IGZpbHRlcnMgPSBbXTtcclxuICBsZXQgc2VsZWN0b3JzID0gW107XHJcblxyXG4gIGlmICghY2hlY2tBbGxvd2xpc3RlZChwYWdlLCBmcmFtZSkpXHJcbiAge1xyXG4gICAgbGV0IGRvY0RvbWFpbiA9IGV4dHJhY3RIb3N0RnJvbUZyYW1lKGZyYW1lKTtcclxuXHJcbiAgICAvLyBBZGQgYSBibG9ja2luZyBmaWx0ZXIgZm9yIGVhY2ggVVJMIG9mIHRoZSBlbGVtZW50IHRoYXQgY2FuIGJlIGJsb2NrZWRcclxuICAgIGlmIChkZXRhaWxzLnVybClcclxuICAgIHtcclxuICAgICAgbGV0IHR5cGVNYXNrO1xyXG4gICAgICBzd2l0Y2ggKGRldGFpbHMudGFnTmFtZSlcclxuICAgICAge1xyXG4gICAgICAgIGNhc2UgXCJpbWdcIjpcclxuICAgICAgICBjYXNlIFwiaW5wdXRcIjpcclxuICAgICAgICAgIHR5cGVNYXNrID0gY29udGVudFR5cGVzLklNQUdFO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcImF1ZGlvXCI6XHJcbiAgICAgICAgY2FzZSBcInZpZGVvXCI6XHJcbiAgICAgICAgICB0eXBlTWFzayA9IGNvbnRlbnRUeXBlcy5NRURJQTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJmcmFtZVwiOlxyXG4gICAgICAgIGNhc2UgXCJpZnJhbWVcIjpcclxuICAgICAgICAgIHR5cGVNYXNrID0gY29udGVudFR5cGVzLlNVQkRPQ1VNRU5UO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxyXG4gICAgICAgIGNhc2UgXCJlbWJlZFwiOlxyXG4gICAgICAgICAgdHlwZU1hc2sgPSBjb250ZW50VHlwZXMuT0JKRUNUO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBzcGVjaWZpY09ubHkgPSBjaGVja0FsbG93bGlzdGVkKFxyXG4gICAgICAgIHBhZ2UsIGZyYW1lLCBudWxsLCBjb250ZW50VHlwZXMuR0VORVJJQ0JMT0NLXHJcbiAgICAgICk7XHJcbiAgICAgIGxldCBhbGxvd2xpc3RlZCA9IGRlZmF1bHRNYXRjaGVyLmlzQWxsb3dsaXN0ZWQoXHJcbiAgICAgICAgZGV0YWlscy51cmwsIHR5cGVNYXNrLCBkb2NEb21haW4sXHJcbiAgICAgICAgZ2V0S2V5KHBhZ2UsIGZyYW1lKSwgc3BlY2lmaWNPbmx5XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoIWFsbG93bGlzdGVkKVxyXG4gICAgICB7XHJcbiAgICAgICAgbGV0IGZpbHRlclRleHQgPSBkZXRhaWxzLnVybC5yZXBsYWNlKC9eW1xcdy1dKzpcXC8rKD86d3d3XFwuKT8vLCBcInx8XCIpO1xyXG5cclxuICAgICAgICBpZiAoc3BlY2lmaWNPbmx5KVxyXG4gICAgICAgICAgZmlsdGVyVGV4dCArPSBcIiRkb21haW49XCIgKyBkb2NEb21haW47XHJcblxyXG4gICAgICAgIGlmICghZmlsdGVycy5pbmNsdWRlcyhmaWx0ZXJUZXh0KSlcclxuICAgICAgICAgIGZpbHRlcnMucHVzaChmaWx0ZXJUZXh0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHdlIGNvdWxkbid0IGdlbmVyYXRlIGFueSBibG9ja2luZyBmaWx0ZXJzLCBmYWxsYmFjayB0byBlbGVtZW50IGhpZGluZ1xyXG4gICAgaWYgKGZpbHRlcnMubGVuZ3RoID09IDAgJiYgIWNoZWNrQWxsb3dsaXN0ZWQocGFnZSwgZnJhbWUsIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZXMuRUxFTUhJREUpKVxyXG4gICAge1xyXG4gICAgICAvLyBHZW5lcmF0ZSBDU1Mgc2VsZWN0b3JzIGJhc2VkIG9uIHRoZSBlbGVtZW50J3MgXCJpZFwiIGFuZFxyXG4gICAgICAvLyBcImNsYXNzXCIgYXR0cmlidXRlLlxyXG4gICAgICBpZiAoaXNWYWxpZFN0cmluZyhkZXRhaWxzLmlkKSlcclxuICAgICAgICBzZWxlY3RvcnMucHVzaChcIiNcIiArIGVzY2FwZUNTUyhkZXRhaWxzLmlkKSk7XHJcblxyXG4gICAgICBsZXQgY2xhc3NlcyA9IGRldGFpbHMuY2xhc3Nlcy5maWx0ZXIoaXNWYWxpZFN0cmluZyk7XHJcbiAgICAgIGlmIChjbGFzc2VzLmxlbmd0aCA+IDApXHJcbiAgICAgICAgc2VsZWN0b3JzLnB1c2goY2xhc3Nlcy5tYXAoYyA9PiBcIi5cIiArIGVzY2FwZUNTUyhjKSkuam9pbihcIlwiKSk7XHJcblxyXG4gICAgICAvLyBJZiB0aGVyZSBpcyBhIFwic3JjXCIgYXR0cmlidXRlLCBzcGVjaWZpeWluZyBhIFVSTCB0aGF0IHdlIGNhbid0IGJsb2NrLFxyXG4gICAgICAvLyBnZW5lcmF0ZSBhIENTUyBzZWxlY3RvciBtYXRjaGluZyB0aGUgXCJzcmNcIiBhdHRyaWJ1dGVcclxuICAgICAgaWYgKGlzVmFsaWRTdHJpbmcoZGV0YWlscy5zcmMpKVxyXG4gICAgICB7XHJcbiAgICAgICAgc2VsZWN0b3JzLnB1c2goXHJcbiAgICAgICAgICBlc2NhcGVDU1MoZGV0YWlscy50YWdOYW1lKSArIFwiW3NyYz1cIiArIHF1b3RlQ1NTKGRldGFpbHMuc3JjKSArIFwiXVwiXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQXMgbGFzdCByZXNvcnQsIGlmIHRoZXJlIGlzIGEgXCJzdHlsZVwiIGF0dHJpYnV0ZSwgYW5kIHdlXHJcbiAgICAgIC8vIGNvdWxkbid0IGdlbmVyYXRlIGFueSBmaWx0ZXJzIHNvIGZhciwgZ2VuZXJhdGUgYSBDU1Mgc2VsZWN0b3JcclxuICAgICAgLy8gbWF0Y2hpbmcgdGhlIFwic3R5bGVcIiBhdHRyaWJ1dGVcclxuICAgICAgaWYgKGlzVmFsaWRTdHJpbmcoZGV0YWlscy5zdHlsZSkgJiYgc2VsZWN0b3JzLmxlbmd0aCA9PSAwICYmXHJcbiAgICAgICAgICBmaWx0ZXJzLmxlbmd0aCA9PSAwKVxyXG4gICAgICB7XHJcbiAgICAgICAgc2VsZWN0b3JzLnB1c2goXHJcbiAgICAgICAgICBlc2NhcGVDU1MoZGV0YWlscy50YWdOYW1lKSArIFwiW3N0eWxlPVwiICsgcXVvdGVDU1MoZGV0YWlscy5zdHlsZSkgKyBcIl1cIlxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEFkZCBhbiBlbGVtZW50IGhpZGluZyBmaWx0ZXIgZm9yIGVhY2ggZ2VuZXJhdGVkIENTUyBzZWxlY3RvclxyXG4gICAgICBmb3IgKGxldCBzZWxlY3RvciBvZiBzZWxlY3RvcnMpXHJcbiAgICAgICAgZmlsdGVycy5wdXNoKGRvY0RvbWFpbi5yZXBsYWNlKC9ed3d3XFwuLywgXCJcIikgKyBcIiMjXCIgKyBzZWxlY3Rvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge2ZpbHRlcnMsIHNlbGVjdG9yc307XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBPcGVucyB0aGUgXCJibG9jayBlbGVtZW50XCIgZGlhbG9nLlxyXG4gKlxyXG4gKiBAZXZlbnQgXCJjb21wb3Nlci5vcGVuRGlhbG9nXCJcclxuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gZmlsdGVycyAtIFRoZSBzdWdnZXN0ZWQgZmlsdGVycyB0byBwb3B1bGF0ZSB0aGUgZGlhbG9nXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoLlxyXG4gKiBAcmV0dXJucyB7P251bWJlcn0gZGlhbG9nIHdpbmRvdydzIHBhZ2UgSURcclxuICovXHJcbnBvcnQub24oXCJjb21wb3Nlci5vcGVuRGlhbG9nXCIsIGFzeW5jKG1lc3NhZ2UsIHNlbmRlcikgPT5cclxue1xyXG4gIGxldCBuZXdXaW5kb3cgPSBhd2FpdCBicm93c2VyLndpbmRvd3MuY3JlYXRlKHtcclxuICAgIHVybDogYnJvd3Nlci5ydW50aW1lLmdldFVSTChcImNvbXBvc2VyLmh0bWxcIiksXHJcbiAgICBsZWZ0OiA1MCxcclxuICAgIHRvcDogNTAsXHJcbiAgICB3aWR0aDogNjAwLFxyXG4gICAgaGVpZ2h0OiAzMDAsXHJcbiAgICB0eXBlOiBcInBvcHVwXCJcclxuICB9KTtcclxuICBsZXQgcG9wdXBQYWdlSWQgPSBuZXdXaW5kb3cudGFic1swXS5pZDtcclxuXHJcbiAgbGV0IGRvSW5pdEF0dGVtcHQgPSAwO1xyXG4gIGxldCBkb0luaXQgPSBhc3luYygpID0+XHJcbiAge1xyXG4gICAgZG9Jbml0QXR0ZW1wdCArPSAxO1xyXG4gICAgaWYgKGRvSW5pdEF0dGVtcHQgPiAzMClcclxuICAgICAgcmV0dXJuO1xyXG5cclxuICAgIHRyeVxyXG4gICAge1xyXG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBicm93c2VyLnRhYnMuc2VuZE1lc3NhZ2UocG9wdXBQYWdlSWQsIHtcclxuICAgICAgICB0eXBlOiBcImNvbXBvc2VyLmRpYWxvZy5pbml0XCIsXHJcbiAgICAgICAgc2VuZGVyOiBzZW5kZXIucGFnZS5pZCxcclxuICAgICAgICBmaWx0ZXJzOiBtZXNzYWdlLmZpbHRlcnMsXHJcbiAgICAgICAgaGlnaGxpZ2h0czogbWVzc2FnZS5oaWdobGlnaHRzXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gU29tZXRpbWVzIHNlbmRNZXNzYWdlIGluY29ycmVjdGx5IHJlcG9ydHMgYSBzdWNjZXNzIG9uIEZpcmVmb3gsIHNvXHJcbiAgICAgIC8vIHdlIG11c3QgY2hlY2sgdGhlIHJlc3BvbnNlIHRvby5cclxuICAgICAgaWYgKCFyZXNwb25zZSlcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcclxuXHJcbiAgICAgIC8vIFNvbWV0aW1lcyBGaXJlZm94IDw2MyBkb2Vzbid0IGRyYXcgdGhlIHdpbmRvdydzIGNvbnRlbnRzWzFdXHJcbiAgICAgIC8vIGluaXRpYWxseSwgc28gd2UgcmVzaXplIHRoZSB3aW5kb3cgc2xpZ2h0bHkgYXMgYSB3b3JrYXJvdW5kLlxyXG4gICAgICAvLyBbMV0gLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDA4NDQ2XHJcbiAgICAgIGlmIChpbmZvLmFwcGxpY2F0aW9uID09IFwiZmlyZWZveFwiKVxyXG4gICAgICB7XHJcbiAgICAgICAgYXdhaXQgYnJvd3Nlci53aW5kb3dzLnVwZGF0ZShuZXdXaW5kb3cuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7d2lkdGg6IG5ld1dpbmRvdy53aWR0aCArIDJ9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpXHJcbiAgICB7XHJcbiAgICAgIC8vIEZpcmVmb3ggc29tZXRpbWVzIHNldHMgdGhlIHN0YXR1cyBmb3IgYSB3aW5kb3cgdG8gXCJjb21wbGV0ZVwiIGJlZm9yZVxyXG4gICAgICAvLyBpdCBpcyByZWFkeSB0byByZWNlaXZlIG1lc3NhZ2VzWzFdLiBBcyBhIHdvcmthcm91bmQgd2UnbGwgdHJ5IGFnYWluIGFcclxuICAgICAgLy8gZmV3IHRpbWVzIHdpdGggYSBzZWNvbmQgZGVsYXkuXHJcbiAgICAgIC8vIFsxXSAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE0MTg2NTVcclxuICAgICAgc2V0VGltZW91dChkb0luaXQsIDEwMCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgaWYgKG5ld1dpbmRvdy50YWJzWzBdLnN0YXR1cyAhPSBcImNvbXBsZXRlXCIpXHJcbiAge1xyXG4gICAgbGV0IHVwZGF0ZUxpc3RlbmVyID0gYXN5bmModGFiSWQsIGNoYW5nZUluZm8sIHRhYikgPT5cclxuICAgIHtcclxuICAgICAgaWYgKHRhYklkID09IHBvcHVwUGFnZUlkICYmIGNoYW5nZUluZm8uc3RhdHVzID09IFwiY29tcGxldGVcIilcclxuICAgICAge1xyXG4gICAgICAgIGF3YWl0IGJyb3dzZXIudGFicy5vblVwZGF0ZWQucmVtb3ZlTGlzdGVuZXIodXBkYXRlTGlzdGVuZXIpO1xyXG4gICAgICAgIGF3YWl0IGRvSW5pdCgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgYXdhaXQgYnJvd3Nlci50YWJzLm9uVXBkYXRlZC5hZGRMaXN0ZW5lcih1cGRhdGVMaXN0ZW5lcik7XHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICBhd2FpdCBkb0luaXQoKTtcclxuICB9XHJcblxyXG4gIGxldCBvblJlbW92ZWQgPSByZW1vdmVkVGFiSWQgPT5cclxuICB7XHJcbiAgICBpZiAocmVtb3ZlZFRhYklkID09IHBvcHVwUGFnZUlkKVxyXG4gICAge1xyXG4gICAgICBicm93c2VyLnRhYnMuc2VuZE1lc3NhZ2Uoc2VuZGVyLnBhZ2UuaWQsIHtcclxuICAgICAgICB0eXBlOiBcImNvbXBvc2VyLmNvbnRlbnQuZGlhbG9nQ2xvc2VkXCIsXHJcbiAgICAgICAgcG9wdXBJZDogcG9wdXBQYWdlSWRcclxuICAgICAgfSk7XHJcbiAgICAgIGJyb3dzZXIudGFicy5vblJlbW92ZWQucmVtb3ZlTGlzdGVuZXIob25SZW1vdmVkKTtcclxuICAgIH1cclxuICB9O1xyXG4gIGJyb3dzZXIudGFicy5vblJlbW92ZWQuYWRkTGlzdGVuZXIob25SZW1vdmVkKTtcclxuXHJcbiAgcmV0dXJuIHBvcHVwUGFnZUlkO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBjb21wb3NlckdldEZpbHRlcnNSZXN1bHRcclxuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gZmlsdGVyc1xyXG4gKiAgIEFycmF5IG9mIGJsb2NraW5nIGZpbHRlcnMgd2hpY2ggc2hvdWxkIGJsb2NrIHRoZSBlbGVtZW50LlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBzZWxlY3RvcnNcclxuICogICBBcnJheSBvZiBDU1Mgc2VsZWN0b3JzIHdoaWNoIHNob3VsZCBoaWRlIHRoZSBlbGVtZW50LCBhIGZhbGxiYWNrIGlmXHJcbiAqICAgYmxvY2tpbmcgd2Fzbid0IHBvc3NpYmxlLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBHaXZlbiB0aGUgZGV0YWlscyBvZiBhbiBlbGVtZW50LCByZXR1cm4gc3VnZ2VzdGVkIGZpbHRlcnMgb3IgQ1NTIHNlbGVjdG9yc1xyXG4gKiB0byBibG9jayBvciBoaWRlIHRoYXQgZWxlbWVudC5cclxuICpcclxuICogQGV2ZW50IFwiY29tcG9zZXIuZ2V0RmlsdGVyc1wiXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0YWdOYW1lIC0gVGhlIGVsZW1lbnQncyB0YWcgbmFtZSBlLmcuIFwiYVwiLlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gaWQgLSBUaGUgZWxlbWVudCdzIGlkIGF0dHJpYnV0ZS5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtzcmNdIC0gVGhlIGVsZW1lbnQncyBzcmMgYXR0cmlidXRlLlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3N0eWxlXSAtIFRoZSBlbGVtZW50J3Mgc3R5bGUgYXR0cmlidXRlLlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBjbGFzc2VzIC0gVGhlIGVsZW1lbnQncyBjbGFzcyBsaXN0LlxyXG4gKiBAcHJvcGVydHkge3N0cmluZz99IHVybCAtIFRoZSBVUkwgYXNzb2NpYXRlZCB3aXRoIHRoZSBlbGVtZW50LlxyXG4gKiBAcmV0dXJucyB7Y29tcG9zZXJHZXRGaWx0ZXJzUmVzdWx0fVxyXG4gKi9cclxucG9ydC5vbihcImNvbXBvc2VyLmdldEZpbHRlcnNcIiwgKG1lc3NhZ2UsIHNlbmRlcikgPT5cclxue1xyXG4gIHJldHVybiBjb21wb3NlRmlsdGVycyh7XHJcbiAgICB0YWdOYW1lOiBtZXNzYWdlLnRhZ05hbWUsXHJcbiAgICBpZDogbWVzc2FnZS5pZCxcclxuICAgIHNyYzogbWVzc2FnZS5zcmMsXHJcbiAgICBzdHlsZTogbWVzc2FnZS5zdHlsZSxcclxuICAgIGNsYXNzZXM6IG1lc3NhZ2UuY2xhc3NlcyxcclxuICAgIHVybDogbWVzc2FnZS51cmwsXHJcbiAgICBwYWdlOiBzZW5kZXIucGFnZSxcclxuICAgIGZyYW1lOiBzZW5kZXIuZnJhbWVcclxuICB9KTtcclxufSk7XHJcblxyXG4vKipcclxuICogRm9yd2FyZHMgdGhlIGdpdmVuIG1lc3NhZ2UgcGF5bG9hZCB0byB0aGUgZ2l2ZW4gcGFnZSBJRCwgYWxsb3dpbmcgYSBjb250ZW50XHJcbiAqIHNjcmlwdCB0byBzZW5kIGEgbWVzc2FnZSB0byBhbm90aGVyIHBhZ2UncyBjb250ZW50IHNjcmlwdC5cclxuICpcclxuICogQGV2ZW50IFwiY29tcG9zZXIuZm9yd2FyZFwiXHJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0YXJnZXRQYWdlSWQgVGhlIElEIG9mIHRoZSBwYWdlIHRvIGZvcndhcmQgdGhlIG1lc3NhZ2UuXHJcbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBwYXlsb2FkIFRoZSBjb250ZW50cyBvZiB0aGUgbWVzc2FnZSB0byBmb3J3YXJkLlxyXG4gKiBAcmV0dXJucyBUaGUgcmVzcG9uc2UgZnJvbSB0aGUgZm9yd2FyZGVkIG1lc3NhZ2UncyByZWNpcGllbnQuXHJcbiAqL1xyXG5wb3J0Lm9uKFwiY29tcG9zZXIuZm9yd2FyZFwiLCAobXNnLCBzZW5kZXIpID0+XHJcbntcclxuICBsZXQgdGFyZ2V0UGFnZTtcclxuICBpZiAobXNnLnRhcmdldFBhZ2VJZClcclxuICAgIHRhcmdldFBhZ2UgPSBleHQuZ2V0UGFnZShtc2cudGFyZ2V0UGFnZUlkKTtcclxuICBlbHNlXHJcbiAgICB0YXJnZXRQYWdlID0gc2VuZGVyLnBhZ2U7XHJcbiAgaWYgKHRhcmdldFBhZ2UpXHJcbiAge1xyXG4gICAgbXNnLnBheWxvYWQuc2VuZGVyID0gc2VuZGVyLnBhZ2UuaWQ7XHJcbiAgICByZXR1cm4gYnJvd3Nlci50YWJzLnNlbmRNZXNzYWdlKHRhcmdldFBhZ2UuaWQsIG1zZy5wYXlsb2FkKTtcclxuICB9XHJcbn0pO1xyXG5cclxuZXh0LnBhZ2VzLm9uTG9hZGluZy5hZGRMaXN0ZW5lcihwYWdlID0+XHJcbntcclxuICAvLyBXaGVuIHRhYnMgc3RhcnQgbG9hZGluZyB3ZSBzZW5kIHRoZW0gYSBtZXNzYWdlIHRvIGVuc3VyZSB0aGF0IHRoZSBzdGF0ZVxyXG4gIC8vIG9mIHRoZSBcImJsb2NrIGVsZW1lbnRcIiB0b29sIGlzIHJlc2V0LiBUaGlzIGlzIG5lY2Vzc2FyeSBzaW5jZSBGaXJlZm94IHdpbGxcclxuICAvLyBzb21ldGltZXMgY2FjaGUgdGhlIHN0YXRlIG9mIGEgdGFiIHdoZW4gdGhlIHVzZXIgbmF2aWdhdGVzIGJhY2sgLyBmb3J3YXJkLFxyXG4gIC8vIHdoaWNoIGluY2x1ZGVzIHRoZSBzdGF0ZSBvZiB0aGUgXCJibG9jayBlbGVtZW50XCIgdG9vbC5cclxuICAvLyBTaW5jZSBzZW5kaW5nIHRoaXMgbWVzc2FnZSB3aWxsIG9mdGVuIGZhaWwgKGUuZy4gZm9yIG5ldyB0YWJzIHdoaWNoIGhhdmVcclxuICAvLyBqdXN0IGJlZW4gb3BlbmVkKSB3ZSBjYXRjaCBhbmQgaWdub3JlIGFueSBleGNlcHRpb24gdGhyb3duLlxyXG4gIGJyb3dzZXIudGFicy5zZW5kTWVzc2FnZShcclxuICAgIHBhZ2UuaWQsIHt0eXBlOiBcImNvbXBvc2VyLmNvbnRlbnQuZmluaXNoZWRcIn1cclxuICApLmNhdGNoKCgpID0+IHt9KTtcclxufSk7XHJcblxyXG5cclxuLyogQ29udGV4dCBtZW51IGFuZCBwb3B1cCBidXR0b24gKi9cclxuXHJcbmxldCByZWFkeUFjdGl2ZVBhZ2VzID0gbmV3IGV4dC5QYWdlTWFwKCk7XHJcbmxldCBzaG93aW5nQ29udGV4dE1lbnUgPSBmYWxzZTtcclxuXHJcbmlmIChcImNvbnRleHRNZW51c1wiIGluIGJyb3dzZXIpXHJcbntcclxuICBicm93c2VyLmNvbnRleHRNZW51cy5vbkNsaWNrZWQuYWRkTGlzdGVuZXIoKGl0ZW1JbmZvLCB0YWIpID0+XHJcbiAge1xyXG4gICAgaWYgKGl0ZW1JbmZvLm1lbnVJdGVtSWQgPT0gXCJibG9ja19lbGVtZW50XCIpXHJcbiAgICB7XHJcbiAgICAgIGJyb3dzZXIudGFicy5zZW5kTWVzc2FnZShcclxuICAgICAgICB0YWIuaWQsIHt0eXBlOiBcImNvbXBvc2VyLmNvbnRlbnQuY29udGV4dE1lbnVDbGlja2VkXCJ9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dPckhpZGVDb250ZXh0TWVudShhY3RpdmVQYWdlKVxyXG57XHJcbiAgLy8gRmlyZWZveCBmb3IgQW5kcm9pZCBkb2VzIG5vdCBzdXBwb3J0IGJyb3dzZXIuY29udGV4dE1lbnVzLlxyXG4gIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTEyNjkwNjJcclxuICBpZiAoIShcImNvbnRleHRNZW51c1wiIGluIGJyb3dzZXIpKVxyXG4gICAgcmV0dXJuO1xyXG5cclxuICBsZXQgc2hvdWxkU2hvd0NvbnRleHRNZW51ID0gUHJlZnMuc2hvdWxkU2hvd0Jsb2NrRWxlbWVudE1lbnUgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkeUFjdGl2ZVBhZ2VzLmdldChhY3RpdmVQYWdlKTtcclxuXHJcbiAgaWYgKHNob3VsZFNob3dDb250ZXh0TWVudSAmJiAhc2hvd2luZ0NvbnRleHRNZW51KVxyXG4gIHtcclxuICAgIGJyb3dzZXIuY29udGV4dE1lbnVzLmNyZWF0ZSh7XHJcbiAgICAgIGlkOiBcImJsb2NrX2VsZW1lbnRcIixcclxuICAgICAgdGl0bGU6IGJyb3dzZXIuaTE4bi5nZXRNZXNzYWdlKFwiYmxvY2tfZWxlbWVudFwiKSxcclxuICAgICAgY29udGV4dHM6IFtcImltYWdlXCIsIFwidmlkZW9cIiwgXCJhdWRpb1wiXVxyXG4gICAgfSk7XHJcbiAgICBzaG93aW5nQ29udGV4dE1lbnUgPSB0cnVlO1xyXG4gIH1cclxuICBlbHNlIGlmICghc2hvdWxkU2hvd0NvbnRleHRNZW51ICYmIHNob3dpbmdDb250ZXh0TWVudSlcclxuICB7XHJcbiAgICBicm93c2VyLmNvbnRleHRNZW51cy5yZW1vdmUoXCJibG9ja19lbGVtZW50XCIpO1xyXG4gICAgc2hvd2luZ0NvbnRleHRNZW51ID0gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVDb250ZXh0TWVudSh1cGRhdGVkUGFnZSlcclxue1xyXG4gIGxldCB0YWJzID0gYXdhaXQgYnJvd3Nlci50YWJzLnF1ZXJ5KHthY3RpdmU6IHRydWUsIGxhc3RGb2N1c2VkV2luZG93OiB0cnVlfSk7XHJcbiAgaWYgKHRhYnMubGVuZ3RoID4gMCAmJiAoIXVwZGF0ZWRQYWdlIHx8IHVwZGF0ZWRQYWdlLmlkID09IHRhYnNbMF0uaWQpKVxyXG4gICAgc2hvd09ySGlkZUNvbnRleHRNZW51KHVwZGF0ZWRQYWdlIHx8IG5ldyBleHQuUGFnZSh0YWJzWzBdKSk7XHJcbn1cclxuXHJcbmJyb3dzZXIudGFicy5vbkFjdGl2YXRlZC5hZGRMaXN0ZW5lcihhY3RpdmVJbmZvID0+XHJcbntcclxuICBzaG93T3JIaWRlQ29udGV4dE1lbnUobmV3IGV4dC5QYWdlKHtpZDogYWN0aXZlSW5mby50YWJJZH0pKTtcclxufSk7XHJcblxyXG4vLyBGaXJlZm94IGZvciBBbmRyb2lkIGRvZXMgbm90IHN1cHBvcnQgYnJvd3Nlci53aW5kb3dzLlxyXG4vLyBodHRwczovL2lzc3Vlcy5hZGJsb2NrcGx1cy5vcmcvdGlja2V0LzUzNDdcclxuaWYgKFwid2luZG93c1wiIGluIGJyb3dzZXIpXHJcbntcclxuICBicm93c2VyLndpbmRvd3Mub25Gb2N1c0NoYW5nZWQuYWRkTGlzdGVuZXIod2luZG93SWQgPT5cclxuICB7XHJcbiAgICBpZiAod2luZG93SWQgIT0gYnJvd3Nlci53aW5kb3dzLldJTkRPV19JRF9OT05FKVxyXG4gICAgICB1cGRhdGVDb250ZXh0TWVudSgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5maWx0ZXJOb3RpZmllci5vbihcInBhZ2UuQWxsb3dsaXN0aW5nU3RhdGVSZXZhbGlkYXRlXCIsIChwYWdlLCBmaWx0ZXIpID0+XHJcbntcclxuICBpZiAocmVhZHlBY3RpdmVQYWdlcy5oYXMocGFnZSkpXHJcbiAge1xyXG4gICAgcmVhZHlBY3RpdmVQYWdlcy5zZXQocGFnZSwgIWZpbHRlcik7XHJcbiAgICB1cGRhdGVDb250ZXh0TWVudShwYWdlKTtcclxuICB9XHJcbn0pO1xyXG5cclxuUHJlZnMub24oXCJzaG91bGRTaG93QmxvY2tFbGVtZW50TWVudVwiLCAoKSA9PlxyXG57XHJcbiAgdXBkYXRlQ29udGV4dE1lbnUoKTtcclxufSk7XHJcblxyXG4vKipcclxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBwYWdlIGlzIHJlYWR5IGZvciB0aGUgXCJibG9jayBlbGVtZW50XCIgdG9vbCwgZmFsc2VcclxuICogb3RoZXJ3aXNlLlxyXG4gKlxyXG4gKiBAZXZlbnQgXCJjb21wb3Nlci5pc1BhZ2VSZWFkeVwiXHJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBwYWdlSWRcclxuICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAqL1xyXG5wb3J0Lm9uKFwiY29tcG9zZXIuaXNQYWdlUmVhZHlcIiwgKG1lc3NhZ2UsIHNlbmRlcikgPT5cclxue1xyXG4gIHJldHVybiByZWFkeUFjdGl2ZVBhZ2VzLmhhcyhuZXcgZXh0LlBhZ2Uoe2lkOiBtZXNzYWdlLnBhZ2VJZH0pKTtcclxufSk7XHJcblxyXG4vKipcclxuICogTWFya3MgdGhlIHBhZ2Ugd2hpY2ggc2VudCB0aGlzIG1lc3NhZ2UgYXMgYmVpbmcgcmVhZHkgZm9yIHRoZVxyXG4gKiBcImJsb2NrIGVsZW1lbnRcIiB0b29sLCBidXQgb25seSBpZiB0aGUgcGFnZSBpc24ndCBhbGxvd2xpc3RlZC5cclxuICpcclxuICogQGV2ZW50IFwiY29tcG9zZXIucmVhZHlcIlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICovXHJcbnBvcnQub24oXCJjb21wb3Nlci5yZWFkeVwiLCAobWVzc2FnZSwgc2VuZGVyKSA9PlxyXG57XHJcbiAgcmVhZHlBY3RpdmVQYWdlcy5zZXQoc2VuZGVyLnBhZ2UsICFjaGVja0FsbG93bGlzdGVkKHNlbmRlci5wYWdlKSk7XHJcbiAgdXBkYXRlQ29udGV4dE1lbnUoc2VuZGVyLnBhZ2UpO1xyXG59KTtcclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbmltcG9ydCBhc3NlcnQgZnJvbSBcImFzc2VydFwiO1xyXG5pbXBvcnQge0ZpbHRlciwgRWxlbUhpZGVGaWx0ZXJ9XHJcbiAgZnJvbSBcIi4uLy4uL2FkYmxvY2twbHVzY29yZS9saWIvZmlsdGVyQ2xhc3Nlcy5qc1wiO1xyXG5pbXBvcnQge2VzY2FwZUNTUywgcXVvdGVDU1N9IGZyb20gXCIuLi8uLi9saWIvZmlsdGVyQ29tcG9zZXIuanNcIjtcclxuXHJcbmRlc2NyaWJlKFwiQ1NTIGVzY2FwaW5nXCIsICgpID0+XHJcbntcclxuICBpdChcImVzY2FwZXMgQ1NTXCIsICgpID0+XHJcbiAge1xyXG4gICAgZnVuY3Rpb24gdGVzdFNlbGVjdG9yKG9wdHMpXHJcbiAgICB7XHJcbiAgICAgIGxldCBtdXN0TWF0Y2ggPSBvcHRzLm11c3RNYXRjaCAhPT0gZmFsc2U7XHJcbiAgICAgIGxldCBkb2MgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoKTtcclxuXHJcbiAgICAgIGxldCBzdHlsZSA9IGRvYy5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgIGRvYy5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xyXG4gICAgICBzdHlsZS5zaGVldC5pbnNlcnRSdWxlKG9wdHMuc2VsZWN0b3IgKyBcIiB7fVwiLCAwKTtcclxuXHJcbiAgICAgIGxldCBlbGVtZW50O1xyXG4gICAgICB0cnlcclxuICAgICAge1xyXG4gICAgICAgIGVsZW1lbnQgPSBkb2MuY3JlYXRlRWxlbWVudChvcHRzLnRhZ05hbWUgfHwgXCJkaXZcIik7XHJcbiAgICAgIH1cclxuICAgICAgY2F0Y2ggKGUpXHJcbiAgICAgIHtcclxuICAgICAgICAvLyBTb21lIGNoYXJhY3RlcnMgd2UgYXJlIGdvaW5nIHRvIHRlc3QgY2FuIG5vdCBvY2N1ciBpbiB0YWcgbmFtZXMsXHJcbiAgICAgICAgLy8gYnV0IHdlIHN0aWxsIGhhdmUgdG8gbWFrZSBzdXJlIHRoYXQgbm8gZXhjZXB0aW9uIGlzIHRocm93biB3aGVuXHJcbiAgICAgICAgLy8gY2FsbGluZyAucXVlcnlTZWxlY3RvcigpIGFuZCAuaW5zZXJ0UnVsZSgpXHJcbiAgICAgICAgZWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgbXVzdE1hdGNoID0gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChlbGVtZW50KVxyXG4gICAgICB7XHJcbiAgICAgICAgZm9yIChsZXQgYXR0ciBpbiBvcHRzLmF0dHJpYnV0ZXMpXHJcbiAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyLCBvcHRzLmF0dHJpYnV0ZXNbYXR0cl0pO1xyXG5cclxuICAgICAgICBkb2MuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgZm91bmRFbGVtZW50ID0gZG9jLnF1ZXJ5U2VsZWN0b3Iob3B0cy5zZWxlY3Rvcik7XHJcbiAgICAgIGxldCBmaWx0ZXIgPSBGaWx0ZXIuZnJvbVRleHQoXCIjI1wiICsgb3B0cy5zZWxlY3Rvcik7XHJcblxyXG4gICAgICBpZiAoIShmaWx0ZXIgaW5zdGFuY2VvZiBFbGVtSGlkZUZpbHRlcikpXHJcbiAgICAgICAgYXNzZXJ0Lm9rKGZhbHNlLCBvcHRzLnNlbGVjdG9yICsgXCIgKG5vdCBhbGxvd2VkIGluIGVsZW1oaWRlIGZpbHRlcnMpXCIpO1xyXG4gICAgICBlbHNlIGlmIChtdXN0TWF0Y2gpXHJcbiAgICAgICAgYXNzZXJ0LmVxdWFsKGZvdW5kRWxlbWVudCwgZWxlbWVudCwgb3B0cy5zZWxlY3Rvcik7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICBhc3NlcnQub2sodHJ1ZSwgb3B0cy5zZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdGVzdEVzY2FwZShzKVxyXG4gICAge1xyXG4gICAgICB0ZXN0U2VsZWN0b3Ioe1xyXG4gICAgICAgIHNlbGVjdG9yOiBlc2NhcGVDU1MocyksXHJcbiAgICAgICAgdGFnTmFtZTogc1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRlc3RTZWxlY3Rvcih7XHJcbiAgICAgICAgc2VsZWN0b3I6IFwiI1wiICsgZXNjYXBlQ1NTKHMpLFxyXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtpZDogc31cclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0ZXN0U2VsZWN0b3Ioe1xyXG4gICAgICAgIHNlbGVjdG9yOiBcIi5cIiArIGVzY2FwZUNTUyhzKSxcclxuICAgICAgICBhdHRyaWJ1dGVzOiB7Y2xhc3M6IHN9LFxyXG5cclxuICAgICAgICAvLyBXaGl0ZXNwYWNlIGNoYXJhY3RlcnMgc3BsaXQgdGhlIGNsYXNzIG5hbWUsIGhlbmNlIHRoZSBzZWxlY3RvclxyXG4gICAgICAgIC8vIHdvbid0IG1hdGNoLiBCdXQgd2Ugc3RpbGwgaGF2ZSB0byBtYWtlIHN1cmUgdGhhdCBubyBleGNlcHRpb25cclxuICAgICAgICAvLyBpcyB0aHJvd24gd2hlbiBjYWxsaW5nIC5xdWVyeVNlbGVjdG9yKCkgYW5kIC5pbnNlcnRSdWxlKClcclxuICAgICAgICBtdXN0TWF0Y2g6ICEvXFxzLy50ZXN0KHMpXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGVzdFNlbGVjdG9yKHtcclxuICAgICAgICBzZWxlY3RvcjogXCJbZm9vPVwiICsgcXVvdGVDU1MocykgKyBcIl1cIixcclxuICAgICAgICBhdHRyaWJ1dGVzOiB7Zm9vOiBzfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IDB4ODA7IGkrKylcclxuICAgIHtcclxuICAgICAgbGV0IGNociA9IFN0cmluZy5mcm9tQ2hhckNvZGUoaSk7XHJcblxyXG4gICAgICAvLyBNYWtlIHN1cmUgdGhhdCBhbGwgQVNDSUkgY2hhcmFjdGVycyBhcmUgY29ycmVjdGx5IGVzY2FwZWQuXHJcbiAgICAgIHRlc3RFc2NhcGUoY2hyKTtcclxuXHJcbiAgICAgIC8vIFNvbWUgY2hhcmFjdGVycyBhcmUgb25seSBlc2NhcGVkIHdoZW4gaW4gdGhlIGZpcnN0IHBvc2l0b24sXHJcbiAgICAgIC8vIHNvIHdlIHN0aWxsIGhhdmUgdG8gbWFrZSBzdXJlIHRoYXQgZXZlcnl0aGluZyBpcyBjb3JyZWN0bHkgZXNjYXBlZFxyXG4gICAgICAvLyBpbiBzdWJzZXF1ZW50IHBvc2l0aW9ucy5cclxuICAgICAgdGVzdEVzY2FwZShcInhcIiArIGNocik7XHJcblxyXG4gICAgICAvLyBMZWFkaW5nIGRhc2hlcyBtdXN0IGJlIGVzY2FwZWQsIHdoZW4gZm9sbG93ZWQgYnkgY2VydGFpbiBjaGFyYWN0ZXJzLlxyXG4gICAgICB0ZXN0RXNjYXBlKFwiLVwiICsgY2hyKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUZXN0IHNvbWUgbm9uLUFTQ0lJIGNoYXJhY3RlcnMuIEhvd2V2ZXIsIHRob3NlIHNob3VsZG4ndFxyXG4gICAgLy8gcmVxdWlyZSBlc2NhcGluZy5cclxuICAgIHRlc3RFc2NhcGUoXCJcXHVEODNEXFx1REUzQlxcdTI2NjVcXHUwMEU0XCIpO1xyXG4gIH0pO1xyXG59KTtcclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbmltcG9ydCBhc3NlcnQgZnJvbSBcImFzc2VydFwiO1xyXG5pbXBvcnQge1ByZWZzfSBmcm9tIFwiLi4vLi4vbGliL3ByZWZzLmpzXCI7XHJcblxyXG5kZXNjcmliZShcIlByZWZlcmVuY2VzXCIsICgpID0+XHJcbntcclxuICBmdW5jdGlvbiBhZnRlcldyaXRlKHByZWZLZXkpXHJcbiAge1xyXG4gICAgcmV0dXJuIFByb21pc2UucmFjZShbXHJcbiAgICAgIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+XHJcbiAgICAgIHtcclxuICAgICAgICBsZXQgb25DaGFuZ2UgPSAoY2hhbmdlcywgYXJlYSkgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAoYXJlYSA9PSBcImxvY2FsXCIgJiYgcHJlZktleSBpbiBjaGFuZ2VzKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBicm93c2VyLnN0b3JhZ2Uub25DaGFuZ2VkLnJlbW92ZUxpc3RlbmVyKG9uQ2hhbmdlKTtcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgYnJvd3Nlci5zdG9yYWdlLm9uQ2hhbmdlZC5hZGRMaXN0ZW5lcihvbkNoYW5nZSk7XHJcbiAgICAgIH0pLFxyXG4gICAgICAvLyBXZSBzbGVlcCA1MDBtcyBpbiBjYXNlIHRoZSBvbkNoYW5nZSBldmVudCBkb2Vzbid0IGZpcmUgd2hlbiBleHBlY3RlZC5cclxuICAgICAgLy8gRmlyZWZveCA2NiBoYXMgYSBidWcgd2hlcmVieSB0aGUgZXZlbnQgZG9lc24ndCBmaXJlIGZvciBmYWxzZXkgdmFsdWVzLlxyXG4gICAgICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNTQxNDQ5XHJcbiAgICAgIG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCA1MDApKVxyXG4gICAgXSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBmdW5jdGlvbiBwZXJmb3JtU3RvcmFnZVRlc3RzKHByZWZOYW1lLCBwcmVmS2V5LCBkZWZhdWx0VmFsdWUsIG5ld1ZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdHMpXHJcbiAge1xyXG4gICAgbGV0IFttZXRob2QsIHdoaWNoVmFsdWVdID0gdGVzdHMuc2hpZnQoKTtcclxuICAgIGxldCB2YWx1ZSA9IHdoaWNoVmFsdWUgPT0gXCJkZWZhdWx0XCIgPyBkZWZhdWx0VmFsdWUgOiBuZXdWYWx1ZTtcclxuXHJcbiAgICBsZXQgaXRlbXMgPSBhd2FpdCBicm93c2VyLnN0b3JhZ2UubG9jYWwuZ2V0KHByZWZLZXkpO1xyXG4gICAgbGV0IGV4cGVjdGluZ1dyaXRlID0gdHlwZW9mIGRlZmF1bHRWYWx1ZSA9PSBcIm9iamVjdFwiIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmS2V5IGluIGl0ZW1zIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB3aGljaFZhbHVlID09IFwibmV3XCI7XHJcbiAgICBpZiAoZXhwZWN0aW5nV3JpdGUpXHJcbiAgICAgIGFmdGVyV3JpdGUocHJlZktleSk7XHJcblxyXG4gICAgaWYgKG1ldGhvZCA9PSBcInByb3BlcnR5XCIpXHJcbiAgICAgIFByZWZzW3ByZWZOYW1lXSA9IHZhbHVlO1xyXG4gICAgZWxzZVxyXG4gICAgICBQcmVmcy5zZXQocHJlZk5hbWUsIHZhbHVlKTtcclxuXHJcbiAgICBhc3NlcnQuZGVlcEVxdWFsKFByZWZzW3ByZWZOYW1lXSwgdmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgIGBBc3NpZ25lZCBQcmVmc1snJHtwcmVmTmFtZX0nXSAke3doaWNoVmFsdWV9IHZhbHVlYCk7XHJcblxyXG4gICAgaXRlbXMgPSBhd2FpdCBicm93c2VyLnN0b3JhZ2UubG9jYWwuZ2V0KHByZWZLZXkpO1xyXG4gICAgaWYgKHdoaWNoVmFsdWUgPT0gXCJkZWZhdWx0XCIgJiYgdHlwZW9mIGRlZmF1bHRWYWx1ZSAhPSBcIm9iamVjdFwiKVxyXG4gICAge1xyXG4gICAgICBhc3NlcnQuZXF1YWwocHJlZktleSBpbiBpdGVtcywgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICBgJHtwcmVmS2V5fSBzaG91bGRuJ3QgYmUgcHJlc2VudCBpbiBzdG9hZ2UubG9jYWxgKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgYXNzZXJ0LmVxdWFsKHByZWZLZXkgaW4gaXRlbXMsIHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICBgJHtwcmVmS2V5fSBzaG91bGQgYmUgcHJlc2VudCBpbiBzdG9hZ2UubG9jYWxgKTtcclxuXHJcbiAgICAgIGFzc2VydC5kZWVwRXF1YWwoaXRlbXNbcHJlZktleV0sIHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgIGAke3ByZWZLZXl9IGluIHN0b3JhZ2UubG9jYWwgc2hvdWxkIGhhdmUgdGhlIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfWApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0ZXN0cy5sZW5ndGgpXHJcbiAgICB7XHJcbiAgICAgIGF3YWl0IHBlcmZvcm1TdG9yYWdlVGVzdHMocHJlZk5hbWUsIHByZWZLZXksIGRlZmF1bHRWYWx1ZSwgbmV3VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdHMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gdGVzdFByZWZTdG9yYWdlKHByZWZOYW1lLCBkZWZhdWx0VmFsdWUsIG5ld1ZhbHVlKVxyXG4gIHtcclxuICAgIGxldCBwcmVmS2V5ID0gYHByZWY6JHtwcmVmTmFtZX1gO1xyXG4gICAgbGV0IHRlc3RzID0gW1tcInByb3BlcnR5XCIsIFwiZGVmYXVsdFwiXSxcclxuICAgICAgICAgICAgICAgICBbXCJwcm9wZXJ0eVwiLCBcIm5ld1wiXSxcclxuICAgICAgICAgICAgICAgICBbXCJwcm9wZXJ0eVwiLCBcImRlZmF1bHRcIl0sXHJcbiAgICAgICAgICAgICAgICAgW1wic2V0XCIsIFwibmV3XCJdLFxyXG4gICAgICAgICAgICAgICAgIFtcInNldFwiLCBcImRlZmF1bHRcIl1dO1xyXG5cclxuICAgIGxldCBiYWNrdXBWYWx1ZSA9IFByZWZzW3ByZWZOYW1lXTtcclxuICAgIHRyeVxyXG4gICAge1xyXG4gICAgICBhd2FpdCBwZXJmb3JtU3RvcmFnZVRlc3RzKHByZWZOYW1lLCBwcmVmS2V5LCBkZWZhdWx0VmFsdWUsIG5ld1ZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlc3RzKTtcclxuICAgIH1cclxuICAgIGZpbmFsbHlcclxuICAgIHtcclxuICAgICAgUHJlZnMuc2V0KHByZWZOYW1lLCBiYWNrdXBWYWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpdChcInN0b3JlcyBudW1lcmljYWwgcHJlZmVyZW5jZXNcIiwgYXN5bmMoKSA9PlxyXG4gIHtcclxuICAgIGF3YWl0IHRlc3RQcmVmU3RvcmFnZShcInBhdHRlcm5zYmFja3Vwc1wiLCAwLCAxMik7XHJcbiAgfSk7XHJcblxyXG4gIGl0KFwic3RvcmVzIGJvb2xlYW4gcHJlZmVyZW5jZXNcIiwgYXN5bmMoKSA9PlxyXG4gIHtcclxuICAgIGF3YWl0IHRlc3RQcmVmU3RvcmFnZShcInNhdmVzdGF0c1wiLCBmYWxzZSwgdHJ1ZSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KFwic3RvcmVzIHN0cmluZyBwcmVmZXJlbmNlc1wiLCBhc3luYygpID0+XHJcbiAge1xyXG4gICAgbGV0IGRlZmF1bHRWYWx1ZSA9IFwiaHR0cHM6Ly9ub3RpZmljYXRpb24uYWRibG9ja3BsdXMub3JnL25vdGlmaWNhdGlvbi5qc29uXCI7XHJcbiAgICBsZXQgbmV3VmFsdWUgPSBcImh0dHBzOi8vbm90aWZpY2F0aW9uLmFkYmxvY2twbHVzLm9yZy9mb29cXHUxMjM0YmFyLmpzb25cIjtcclxuXHJcbiAgICBhd2FpdCB0ZXN0UHJlZlN0b3JhZ2UoXCJub3RpZmljYXRpb251cmxcIiwgZGVmYXVsdFZhbHVlLCBuZXdWYWx1ZSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KFwic3RvcmVzIG9iamVjdCBwcmVmZXJlbmNlc1wiLCBhc3luYygpID0+XHJcbiAge1xyXG4gICAgYXdhaXQgdGVzdFByZWZTdG9yYWdlKFwibm90aWZpY2F0aW9uZGF0YVwiLCB7fSwge2ZvbzogMSwgYmFyOiAyfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iLCJleHBvcnQgZGVmYXVsdFxyXG5bXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiRWFzeUxpc3QgQ3plY2ggYW5kIFNsb3ZhaytFYXN5TGlzdFwiLFxyXG4gICAgdXJsOiBcImh0dHBzOi8vZWFzeWxpc3QtZG93bmxvYWRzLmFkYmxvY2twbHVzLm9yZy9lYXN5bGlzdGN6ZWNoc2xvdmFrK2Vhc3lsaXN0LnR4dFwiLFxyXG4gICAgaG9tZXBhZ2U6IFwiaHR0cHM6Ly9hZGJsb2NrLnNrL1wiLFxyXG4gICAgbGFuZ3VhZ2VzOiBbXHJcbiAgICAgIFwiY3NcIixcclxuICAgICAgXCJza1wiXHJcbiAgICBdLFxyXG4gICAgdHlwZTogXCJhZHNcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiRWFzeUxpc3RcIixcclxuICAgIHVybDogXCJodHRwczovL2Vhc3lsaXN0LWRvd25sb2Fkcy5hZGJsb2NrcGx1cy5vcmcvZWFzeWxpc3QudHh0XCIsXHJcbiAgICBob21lcGFnZTogXCJodHRwczovL2Vhc3lsaXN0LnRvL1wiLFxyXG4gICAgbGFuZ3VhZ2VzOiBbXHJcbiAgICAgIFwiZW5cIlxyXG4gICAgXSxcclxuICAgIHR5cGU6IFwiYWRzXCJcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcIkVhc3lMaXN0IER1dGNoK0Vhc3lMaXN0XCIsXHJcbiAgICB1cmw6IFwiaHR0cHM6Ly9lYXN5bGlzdC1kb3dubG9hZHMuYWRibG9ja3BsdXMub3JnL2Vhc3lsaXN0ZHV0Y2grZWFzeWxpc3QudHh0XCIsXHJcbiAgICBob21lcGFnZTogXCJodHRwczovL2Vhc3lsaXN0LnRvL1wiLFxyXG4gICAgbGFuZ3VhZ2VzOiBbXHJcbiAgICAgIFwibmxcIlxyXG4gICAgXSxcclxuICAgIHR5cGU6IFwiYWRzXCJcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcIkVhc3lMaXN0IEdlcm1hbnkrRWFzeUxpc3RcIixcclxuICAgIHVybDogXCJodHRwczovL2Vhc3lsaXN0LWRvd25sb2Fkcy5hZGJsb2NrcGx1cy5vcmcvZWFzeWxpc3RnZXJtYW55K2Vhc3lsaXN0LnR4dFwiLFxyXG4gICAgaG9tZXBhZ2U6IFwiaHR0cHM6Ly9lYXN5bGlzdC50by9cIixcclxuICAgIGxhbmd1YWdlczogW1xyXG4gICAgICBcImRlXCJcclxuICAgIF0sXHJcbiAgICB0eXBlOiBcImFkc1wiXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aXRsZTogXCJFYXN5TGlzdCBJdGFseStFYXN5TGlzdFwiLFxyXG4gICAgdXJsOiBcImh0dHBzOi8vZWFzeWxpc3QtZG93bmxvYWRzLmFkYmxvY2twbHVzLm9yZy9lYXN5bGlzdGl0YWx5K2Vhc3lsaXN0LnR4dFwiLFxyXG4gICAgaG9tZXBhZ2U6IFwiaHR0cHM6Ly9lYXN5bGlzdC50by9cIixcclxuICAgIGxhbmd1YWdlczogW1xyXG4gICAgICBcIml0XCJcclxuICAgIF0sXHJcbiAgICB0eXBlOiBcImFkc1wiXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aXRsZTogXCJMaXN0ZSBGUitFYXN5TGlzdFwiLFxyXG4gICAgdXJsOiBcImh0dHBzOi8vZWFzeWxpc3QtZG93bmxvYWRzLmFkYmxvY2twbHVzLm9yZy9saXN0ZV9mcitlYXN5bGlzdC50eHRcIixcclxuICAgIGhvbWVwYWdlOiBcImh0dHBzOi8vZm9ydW1zLmxhbmlrLnVzL3ZpZXdmb3J1bS5waHA/Zj05MVwiLFxyXG4gICAgbGFuZ3VhZ2VzOiBbXHJcbiAgICAgIFwiZnJcIlxyXG4gICAgXSxcclxuICAgIHR5cGU6IFwiYWRzXCJcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcIlJ1QWRMaXN0K0Vhc3lMaXN0XCIsXHJcbiAgICB1cmw6IFwiaHR0cHM6Ly9lYXN5bGlzdC1kb3dubG9hZHMuYWRibG9ja3BsdXMub3JnL3J1YWRsaXN0K2Vhc3lsaXN0LnR4dFwiLFxyXG4gICAgaG9tZXBhZ2U6IFwiaHR0cHM6Ly9mb3J1bXMubGFuaWsudXMvdmlld2ZvcnVtLnBocD9mPTEwMlwiLFxyXG4gICAgbGFuZ3VhZ2VzOiBbXHJcbiAgICAgIFwicnVcIixcclxuICAgICAgXCJ1a1wiXHJcbiAgICBdLFxyXG4gICAgdHlwZTogXCJhZHNcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiQUJQIGZpbHRlcnNcIixcclxuICAgIHVybDogXCJodHRwczovL2Vhc3lsaXN0LWRvd25sb2Fkcy5hZGJsb2NrcGx1cy5vcmcvYWJwLWZpbHRlcnMtYW50aS1jdi50eHRcIixcclxuICAgIGhvbWVwYWdlOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9hYnAtZmlsdGVycy9hYnAtZmlsdGVycy1hbnRpLWN2XCIsXHJcbiAgICBsYW5ndWFnZXM6IFtcclxuICAgICAgXCJkZVwiLFxyXG4gICAgICBcImVuXCJcclxuICAgIF0sXHJcbiAgICB0eXBlOiBcImNpcmN1bXZlbnRpb25cIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiQUJQIEFudGktQ2lyY3VtdmVudGlvbiBsaXN0IEZyXCIsXHJcbiAgICB1cmw6IFwiaHR0cHM6Ly9lYXN5bGlzdC1kb3dubG9hZHMuYWRibG9ja3BsdXMub3JnL2FicC1maWx0ZXJzLWFudGktY3YtZnIudHh0XCIsXHJcbiAgICBob21lcGFnZTogXCJodHRwczovL2dpdGh1Yi5jb20vYWJwLWZpbHRlcnMvYWJwLWZpbHRlcnMtYW50aS1jdlwiLFxyXG4gICAgbGFuZ3VhZ2VzOiBbXHJcbiAgICAgIFwiZnJcIlxyXG4gICAgXSxcclxuICAgIHR5cGU6IFwiY2lyY3VtdmVudGlvblwiXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aXRsZTogXCJFYXN5UHJpdmFjeVwiLFxyXG4gICAgdXJsOiBcImh0dHBzOi8vZWFzeWxpc3QtZG93bmxvYWRzLmFkYmxvY2twbHVzLm9yZy9lYXN5cHJpdmFjeS50eHRcIixcclxuICAgIGhvbWVwYWdlOiBcImh0dHBzOi8vZWFzeWxpc3QudG8vXCIsXHJcbiAgICB0eXBlOiBcInByaXZhY3lcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiRmFuYm95J3MgU29jaWFsIEJsb2NraW5nIExpc3RcIixcclxuICAgIHVybDogXCJodHRwczovL2Vhc3lsaXN0LWRvd25sb2Fkcy5hZGJsb2NrcGx1cy5vcmcvZmFuYm95LXNvY2lhbC50eHRcIixcclxuICAgIGhvbWVwYWdlOiBcImh0dHBzOi8vZWFzeWxpc3QudG8vXCIsXHJcbiAgICB0eXBlOiBcInNvY2lhbFwiXHJcbiAgfVxyXG5dO1xyXG4iLCIvKlxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBBZGJsb2NrIFBsdXMgPGh0dHBzOi8vYWRibG9ja3BsdXMub3JnLz4sXHJcbiAqIENvcHlyaWdodCAoQykgMjAwNi1wcmVzZW50IGV5ZW8gR21iSFxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBhc1xyXG4gKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICpcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCBBZGJsb2NrIFBsdXMuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqL1xyXG5cclxuaW1wb3J0IGFzc2VydCBmcm9tIFwiYXNzZXJ0XCI7XHJcbmltcG9ydCB7Y2hvb3NlRmlsdGVyU3Vic2NyaXB0aW9uc30gZnJvbSBcIi4uLy4uL2xpYi9zdWJzY3JpcHRpb25Jbml0LmpzXCI7XHJcbmltcG9ydCBzdWJzY3JpcHRpb25zIGZyb20gXCIuL3Jlc291cmNlcy9zdWJzY3JpcHRpb25zLmpzXCI7XHJcblxyXG5kZXNjcmliZShcIlN1YnNjcmlwdGlvbiBpbml0aWFsaXphdGlvblwiLCAoKSA9PlxyXG57XHJcbiAgbGV0IG9yaWdHZXRVSUxhbmd1YWdlO1xyXG4gIGxldCBsYW5ndWFnZTtcclxuXHJcbiAgYmVmb3JlKCgpID0+XHJcbiAge1xyXG4gICAgb3JpZ0dldFVJTGFuZ3VhZ2UgPSBicm93c2VyLmkxOG4uZ2V0VUlMYW5ndWFnZTtcclxuICAgIGJyb3dzZXIuaTE4bi5nZXRVSUxhbmd1YWdlID0gKCkgPT4gbGFuZ3VhZ2U7XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyKCgpID0+XHJcbiAge1xyXG4gICAgYnJvd3Nlci5pMThuLmdldFVJTGFuZ3VhZ2UgPSBvcmlnR2V0VUlMYW5ndWFnZTtcclxuICB9KTtcclxuXHJcbiAgaXQoXCJjaG9vc2VzIGRlZmF1bHQgZmlsdGVyIHN1YnNjcmlwdGlvbnNcIiwgKCkgPT5cclxuICB7XHJcbiAgICBsYW5ndWFnZSA9IFwiZW5cIjtcclxuXHJcbiAgICBsZXQgc3VicyA9IGNob29zZUZpbHRlclN1YnNjcmlwdGlvbnMoc3Vic2NyaXB0aW9ucyk7XHJcbiAgICBhc3NlcnQub2soc3Vicyk7XHJcblxyXG4gICAgbGV0IHN1YjEgPSBzdWJzLmZpbmQoc3ViID0+IHN1Yi50eXBlID09IFwiY2lyY3VtdmVudGlvblwiKTtcclxuICAgIGFzc2VydC5vayhzdWIxKTtcclxuICAgIGxldCBzdWIyID0gc3Vicy5maW5kKHN1YiA9PiBzdWIudHlwZSA9PSBcImFkc1wiKTtcclxuICAgIGFzc2VydC5vayhzdWIxKTtcclxuXHJcbiAgICBhc3NlcnQuZGVlcEVxdWFsKHN1YjEubGFuZ3VhZ2VzLCBbXCJkZVwiLCBcImVuXCJdKTtcclxuICAgIGFzc2VydC5kZWVwRXF1YWwoc3ViMi5sYW5ndWFnZXMsIFtcImVuXCJdKTtcclxuICB9KTtcclxuXHJcbiAgaXQoXCJmYWxscyBiYWNrIHRvIGRlZmF1bHQgbGFuZ3VhZ2VcIiwgKCkgPT5cclxuICB7XHJcbiAgICBsYW5ndWFnZSA9IFwic2xcIjtcclxuXHJcbiAgICBsZXQgc3VicyA9IGNob29zZUZpbHRlclN1YnNjcmlwdGlvbnMoc3Vic2NyaXB0aW9ucyk7XHJcbiAgICBhc3NlcnQub2soc3Vicyk7XHJcbiAgICBsZXQgc3ViMSA9IHN1YnMuZmluZChzdWIgPT4gc3ViLnR5cGUgPT0gXCJhZHNcIik7XHJcbiAgICBhc3NlcnQub2soc3ViMSk7XHJcbiAgICBhc3NlcnQuZGVlcEVxdWFsKHN1YjEubGFuZ3VhZ2VzLCBbXCJlblwiXSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iLCIvKlxyXG4gKiBUaGlzIGZpbGUgaXMgcGFydCBvZiBBZGJsb2NrIFBsdXMgPGh0dHBzOi8vYWRibG9ja3BsdXMub3JnLz4sXHJcbiAqIENvcHlyaWdodCAoQykgMjAwNi1wcmVzZW50IGV5ZW8gR21iSFxyXG4gKlxyXG4gKiBBZGJsb2NrIFBsdXMgaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeVxyXG4gKiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBhc1xyXG4gKiBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi5cclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXHJcbiAqIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcclxuICogR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy5cclxuICpcclxuICogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2VcclxuICogYWxvbmcgd2l0aCBBZGJsb2NrIFBsdXMuICBJZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uXHJcbiAqL1xyXG5cclxuaW1wb3J0IGFzc2VydCBmcm9tIFwiYXNzZXJ0XCI7XHJcbmltcG9ydCB7YW5hbHl0aWNzfSBmcm9tIFwiLi4vLi4vYWRibG9ja3BsdXNjb3JlL2xpYi9hbmFseXRpY3MuanNcIjtcclxuaW1wb3J0IHtmaWx0ZXJTdG9yYWdlfSBmcm9tIFwiLi4vLi4vYWRibG9ja3BsdXNjb3JlL2xpYi9maWx0ZXJTdG9yYWdlLmpzXCI7XHJcbmltcG9ydCB7UHJlZnN9IGZyb20gXCIuLi8uLi9saWIvcHJlZnMuanNcIjtcclxuaW1wb3J0IHtzZXRVbmluc3RhbGxVUkx9IGZyb20gXCIuLi8uLi9saWIvdW5pbnN0YWxsLmpzXCI7XHJcbmltcG9ydCAqIGFzIGluZm8gZnJvbSBcImluZm9cIjtcclxuXHJcbmNvbnN0IHJlYWxTZXRVbmluc3RhbGxVUkwgPSBicm93c2VyLnJ1bnRpbWUuc2V0VW5pbnN0YWxsVVJMO1xyXG5cclxubGV0IHVuaW5zdGFsbFVSTDtcclxubGV0IHVybFBhcmFtcyA9ICgpID0+IG5ldyBVUkwodW5pbnN0YWxsVVJMKS5zZWFyY2guc3Vic3RyKDEpLnNwbGl0KFwiJlwiKTtcclxuXHJcbmRlc2NyaWJlKFwiVW5pbnN0YWxsIFVSTFwiLCAoKSA9PlxyXG57XHJcbiAgYmVmb3JlRWFjaCgoKSA9PlxyXG4gIHtcclxuICAgIGJyb3dzZXIucnVudGltZS5zZXRVbmluc3RhbGxVUkwgPSB1cmwgPT4gdW5pbnN0YWxsVVJMID0gdXJsO1xyXG4gIH0pO1xyXG4gIGFmdGVyRWFjaCgoKSA9PlxyXG4gIHtcclxuICAgIGJyb3dzZXIucnVudGltZS5zZXRVbmluc3RhbExVUkwgPSByZWFsU2V0VW5pbnN0YWxsVVJMO1xyXG4gIH0pO1xyXG5cclxuICBpdChcImFkZHMgcGFyYW1ldGVycyB0byB1bmluc3RhbGwgVVJMXCIsICgpID0+XHJcbiAge1xyXG4gICAgY29uc3QgZXhwZWN0ZWRQYXJhbXMgPSBbXHJcbiAgICAgIFtcImFuXCIsIGluZm8uYWRkb25OYW1lXSxcclxuICAgICAgW1wiYXZcIiwgaW5mby5hZGRvblZlcnNpb25dLFxyXG4gICAgICBbXCJhcFwiLCBpbmZvLmFwcGxpY2F0aW9uXSxcclxuICAgICAgW1wiYXB2XCIsIGluZm8uYXBwbGljYXRpb25WZXJzaW9uXSxcclxuICAgICAgW1wicFwiLCBpbmZvLnBsYXRmb3JtXSxcclxuICAgICAgW1wiZnZcIiwgYW5hbHl0aWNzLmdldEZpcnN0VmVyc2lvbigpXSxcclxuICAgICAgW1wicHZcIiwgaW5mby5wbGF0Zm9ybVZlcnNpb25dLFxyXG4gICAgICBbXCJuZGNcIiwgXCIwXCJdLFxyXG4gICAgICBbXCJjXCIsIFwiMFwiXSxcclxuICAgICAgW1wic1wiLCBcIjNcIl1cclxuICAgIF07XHJcbiAgICBzZXRVbmluc3RhbGxVUkwoKTtcclxuXHJcbiAgICBsZXQgcGFyYW1zID0gdXJsUGFyYW1zKCk7XHJcbiAgICBmb3IgKGxldCBbbmFtZSwgdmFsdWVdIG9mIGV4cGVjdGVkUGFyYW1zKVxyXG4gICAge1xyXG4gICAgICB2YWx1ZSA9IGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgICAgIGFzc2VydC5vayhcclxuICAgICAgICBwYXJhbXMuaW5jbHVkZXMoYCR7bmFtZX09JHt2YWx1ZX1gKSxcclxuICAgICAgICBgVGhlIHBhcmFtZXRlciAnJHtuYW1lfScgaGFzIHRoZSBleHBlY3RlZCB2YWx1ZSAnJHt2YWx1ZX0nYFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBpdChcImxpbWl0cyB1bmluc3RhbGwgVVJMIGxlbmd0aFwiLCAoKSA9PlxyXG4gIHtcclxuICAgIGNvbnN0IG1heExlbmd0aCA9IDI1NTtcclxuICAgIHNldFVuaW5zdGFsbFVSTCgpO1xyXG4gICAgYXNzZXJ0Lm9rKFxyXG4gICAgICB1bmluc3RhbGxVUkwubGVuZ3RoIDw9IG1heExlbmd0aCxcclxuICAgICAgYHVuaW5zdGFsbCBVUkwgaXMgbm90IGxvbmdlciB0aGFuICR7bWF4TGVuZ3RofSBjaGFyYWN0ZXJzYFxyXG4gICAgKTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoXCJTdWJzY3JpcHRpb24gcGFyYW1ldGVyXCIsICgpID0+XHJcbiAge1xyXG4gICAgbGV0IGluaXRpYWxTdWJzY3JpcHRpb25zO1xyXG5cclxuICAgIGJlZm9yZUVhY2goKCkgPT5cclxuICAgIHtcclxuICAgICAgYnJvd3Nlci5ydW50aW1lLnNldFVuaW5zdGFsbFVSTCA9IHVybCA9PiB1bmluc3RhbGxVUkwgPSB1cmw7XHJcbiAgICAgIGluaXRpYWxTdWJzY3JpcHRpb25zID0gQXJyYXkuZnJvbShmaWx0ZXJTdG9yYWdlLnN1YnNjcmlwdGlvbnMoKSk7XHJcbiAgICB9KTtcclxuICAgIGFmdGVyRWFjaCgoKSA9PlxyXG4gICAge1xyXG4gICAgICBmb3IgKGxldCBzdWJzY3JpcHRpb24gb2YgaW5pdGlhbFN1YnNjcmlwdGlvbnMpXHJcbiAgICAgICAgZmlsdGVyU3RvcmFnZS5hZGRTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKTtcclxuICAgICAgYnJvd3Nlci5ydW50aW1lLnNldFVuaW5zdGFsTFVSTCA9IHJlYWxTZXRVbmluc3RhbGxVUkw7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdChcInByb2R1Y2VzIHBhcmFtZXRlciBzPTBcIiwgKCkgPT5cclxuICAgIHtcclxuICAgICAgZm9yIChsZXQgc3Vic2NyaXB0aW9uIG9mIGluaXRpYWxTdWJzY3JpcHRpb25zKVxyXG4gICAgICAgIGZpbHRlclN0b3JhZ2UucmVtb3ZlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XHJcbiAgICAgIHNldFVuaW5zdGFsbFVSTCgpO1xyXG4gICAgICBhc3NlcnQub2soXHJcbiAgICAgICAgdXJsUGFyYW1zKCkuaW5jbHVkZXMoXCJzPTBcIiksXHJcbiAgICAgICAgXCJzdWJzY3JpcHRpb24gcGFyYW1ldGVyICdzJyBoYXMgdGhlIGV4cGVjdGVkIHZhbHVlICcwJ1wiXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdChcInByb2R1Y2VzIHBhcmFtZXRlciBzPTFcIiwgKCkgPT5cclxuICAgIHtcclxuICAgICAgZm9yIChsZXQgc3Vic2NyaXB0aW9uIG9mIGluaXRpYWxTdWJzY3JpcHRpb25zKVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbi50eXBlICE9IFwiYWRzXCIpXHJcbiAgICAgICAgICBmaWx0ZXJTdG9yYWdlLnJlbW92ZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pO1xyXG4gICAgICB9XHJcbiAgICAgIHNldFVuaW5zdGFsbFVSTCgpO1xyXG4gICAgICBhc3NlcnQub2soXHJcbiAgICAgICAgdXJsUGFyYW1zKCkuaW5jbHVkZXMoXCJzPTFcIiksXHJcbiAgICAgICAgXCJzdWJzY3JpcHRpb24gcGFyYW1ldGVyICdzJyBoYXMgdGhlIGV4cGVjdGVkIHZhbHVlICcxJ1wiICsgdXJsUGFyYW1zKClcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KFwicHJvZHVjZXMgcGFyYW1ldGVyIHM9MlwiLCAoKSA9PlxyXG4gICAge1xyXG4gICAgICBmb3IgKGxldCBzdWJzY3JpcHRpb24gb2YgaW5pdGlhbFN1YnNjcmlwdGlvbnMpXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAoc3Vic2NyaXB0aW9uLnVybCAhPSBQcmVmcy5zdWJzY3JpcHRpb25zX2V4Y2VwdGlvbnN1cmwpXHJcbiAgICAgICAgICBmaWx0ZXJTdG9yYWdlLnJlbW92ZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pO1xyXG4gICAgICB9XHJcbiAgICAgIHNldFVuaW5zdGFsbFVSTCgpO1xyXG4gICAgICBhc3NlcnQub2soXHJcbiAgICAgICAgdXJsUGFyYW1zKCkuaW5jbHVkZXMoXCJzPTJcIiksXHJcbiAgICAgICAgXCJzdWJzY3JpcHRpb24gcGFyYW1ldGVyICdzJyBoYXMgdGhlIGV4cGVjdGVkIHZhbHVlICcyJ1wiICsgdXJsUGFyYW1zKClcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIiwiLypcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgQWRibG9jayBQbHVzIDxodHRwczovL2FkYmxvY2twbHVzLm9yZy8+LFxyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMDYtcHJlc2VudCBleWVvIEdtYkhcclxuICpcclxuICogQWRibG9jayBQbHVzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcclxuICogaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDMgYXNcclxuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24uXHJcbiAqXHJcbiAqIEFkYmxvY2sgUGx1cyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxyXG4gKiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxyXG4gKiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXHJcbiAqIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqXHJcbiAqIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXHJcbiAqIGFsb25nIHdpdGggQWRibG9jayBQbHVzLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxyXG4gKi9cclxuXHJcbmltcG9ydCBhc3NlcnQgZnJvbSBcImFzc2VydFwiO1xyXG5pbXBvcnQge2V4dHJhY3RIb3N0RnJvbUZyYW1lfSBmcm9tIFwiLi4vLi4vbGliL3VybC5qc1wiO1xyXG5cclxuZGVzY3JpYmUoXCJVUkwvaG9zdCB0b29sc1wiLCAoKSA9PlxyXG57XHJcbiAgaXQoXCJleHRyYWN0cyBob3N0bmFtZSBmcm9tIGZyYW1lXCIsICgpID0+XHJcbiAge1xyXG4gICAgZnVuY3Rpb24gdGVzdEZyYW1lSG9zdG5hbWUoaGllcmFyY2h5LCBleHBlY3RlZEhvc3RuYW1lLCBtZXNzYWdlKVxyXG4gICAge1xyXG4gICAgICBsZXQgZnJhbWUgPSBudWxsO1xyXG5cclxuICAgICAgZm9yIChsZXQgdXJsIG9mIGhpZXJhcmNoeSlcclxuICAgICAgICBmcmFtZSA9IHtwYXJlbnQ6IGZyYW1lLCB1cmw6IG5ldyBVUkwodXJsKX07XHJcblxyXG4gICAgICBhc3NlcnQuZXF1YWwoZXh0cmFjdEhvc3RGcm9tRnJhbWUoZnJhbWUpLCBleHBlY3RlZEhvc3RuYW1lLCBtZXNzYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICB0ZXN0RnJhbWVIb3N0bmFtZShbXCJodHRwOi8vZXhhbXBsZS5jb20vXCJdLCBcImV4YW1wbGUuY29tXCIsIFwic2luZ2xlIGZyYW1lXCIpO1xyXG4gICAgdGVzdEZyYW1lSG9zdG5hbWUoW1wiaHR0cDovL2V4YW1wbGUuY29tL1wiLCBcImh0dHA6Ly9leGFtcGxlLm9yZy9cIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICBcImV4YW1wbGUub3JnXCIsIFwid2l0aCBwYXJlbnQgZnJhbWVcIik7XHJcbiAgICB0ZXN0RnJhbWVIb3N0bmFtZShbXCJodHRwOi8vZXhhbXBsZS5jb20vXCIsIFwiZGF0YTp0ZXh0L3BsYWluLGZvb1wiXSxcclxuICAgICAgICAgICAgICAgICAgICAgIFwiZXhhbXBsZS5jb21cIiwgXCJkYXRhOiBVUkwsIGhvc3RuYW1lIGluIHBhcmVudFwiKTtcclxuICAgIHRlc3RGcmFtZUhvc3RuYW1lKFtcImh0dHA6Ly9leGFtcGxlLmNvbS9cIiwgXCJhYm91dDpibGFua1wiLCBcImFib3V0OmJsYW5rXCJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJleGFtcGxlLmNvbVwiLCBcImFib3V0OmJsYW5rLCBob3N0bmFtZSBpbiBhbmNlc3RvclwiKTtcclxuICAgIHRlc3RGcmFtZUhvc3RuYW1lKFtcImFib3V0OmJsYW5rXCIsIFwiYWJvdXQ6YmxhbmtcIl0sIFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcImFib3V0OmJsYW5rLCBubyBob3N0bmFtZVwiKTtcclxuICAgIHRlc3RGcmFtZUhvc3RuYW1lKFtcImh0dHA6Ly94bi0tZi0xZ2FhLmNvbS9cIl0sIFwieG4tLWYtMWdhYS5jb21cIixcclxuICAgICAgICAgICAgICAgICAgICAgIFwid2l0aCBwdW55Y29kZVwiKTtcclxuICAgIHRlc3RGcmFtZUhvc3RuYW1lKFtcImh0dHA6Ly91c2VyOnBhc3N3b3JkQGV4YW1wbGUuY29tL1wiXSwgXCJleGFtcGxlLmNvbVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJ3aXRoIGF1dGggY3JlZGVudGlhbHNcIik7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBOzs7Ozs7OztBOzs7Ozs7OztBOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7OztBQy9OQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7O0FDcEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7QUN0T0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7O0FDN0lBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7O0FDM2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7OztBQ3hwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7OztBQzVGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7OztBQzFKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7O0FDcEhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7OztBQzN5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7QUM5T0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7O0FDclpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7O0FDbENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7QUNuWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7OztBQ3B4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7OztBQzdIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7QUNoSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7O0FDNWtCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7O0FDcDZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7QUNua0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7O0FDNUhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7O0FDcklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7OztBQ2hHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7OztBQ2xOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7QUNuYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7O0FDdlJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7Ozs7QUNqK0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7QUN0ZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7OztBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7QUNuaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7Ozs7Ozs7Ozs7QUNwRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzVEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM3S0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7Ozs7Ozs7QUNwVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7Ozs7O0FDek5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7Ozs7Ozs7QUN4SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7Ozs7Ozs7O0FDbkhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FDclNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7Ozs7Ozs7Ozs7OztBQzdTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7Ozs7OztBQ25IQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7OztBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7OztBQzNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7OztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7OztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBOzs7Ozs7QUMza0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QTs7Ozs7Ozs7QTs7Ozs7OztBQzNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0E7Ozs7OztBQ2hIQTtBQUNBO0E7Ozs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ1BBOzs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQ3BIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ25JQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUMvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FDcElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBIiwic291cmNlUm9vdCI6IiJ9